(self.webpackChunksdLbog=self.webpackChunksdLbog||[]).push([[179],{935:(Es,we,k)=>{"use strict";function u(n){return"function"==typeof n}function B(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const _=B(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function M(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class y{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(u(r))try{r()}catch(o){e=o instanceof _?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{v(o)}catch(l){e=e??[],l instanceof _?e=[...e,...l.errors]:e.push(l)}}if(e)throw new _(e)}}add(e){var t;if(e&&e!==this)if(this.closed)v(e);else{if(e instanceof y){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&M(t,e)}remove(e){const{_finalizers:t}=this;t&&M(t,e),e instanceof y&&e._removeParent(this)}}y.EMPTY=(()=>{const n=new y;return n.closed=!0,n})();const D=y.EMPTY;function d(n){return n instanceof y||n&&"closed"in n&&u(n.remove)&&u(n.add)&&u(n.unsubscribe)}function v(n){u(n)?n():n.unsubscribe()}const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},L={setTimeout(n,e,...t){const{delegate:r}=L;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=L;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function b(n){L.setTimeout(()=>{const{onUnhandledError:e}=p;if(!e)throw n;e(n)})}function F(){}const m=S("C",void 0,void 0);function S(n,e,t){return{kind:n,value:e,error:t}}let C=null;function x(n){if(p.useDeprecatedSynchronousErrorHandling){const e=!C;if(e&&(C={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=C;if(C=null,t)throw r}}else n()}class N extends y{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,d(e)&&e.add(this)):this.destination=J}static create(e,t,r){return new R(e,t,r)}next(e){this.isStopped?$(function g(n){return S("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?$(function h(n){return S("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$(m,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const w=Function.prototype.bind;function P(n,e){return w.call(n,e)}class f{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){V(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){V(r)}else V(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){V(t)}}}class R extends N{constructor(e,t,r){let i;if(super(),u(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&p.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&P(e.next,o),error:e.error&&P(e.error,o),complete:e.complete&&P(e.complete,o)}):i=e}this.destination=new f(i)}}function V(n){p.useDeprecatedSynchronousErrorHandling?function O(n){p.useDeprecatedSynchronousErrorHandling&&C&&(C.errorThrown=!0,C.error=n)}(n):b(n)}function $(n,e){const{onStoppedNotification:t}=p;t&&L.setTimeout(()=>t(n,e))}const J={closed:!0,next:F,error:function Q(n){throw n},complete:F},te="function"==typeof Symbol&&Symbol.observable||"@@observable";function X(n){return n}let ee=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function _e(n){return n&&n instanceof N||function pe(n){return n&&u(n.next)&&u(n.error)&&u(n.complete)}(n)&&d(n)}(t)?t:new R(t,r,i);return x(()=>{const{operator:l,source:c}=this;o.add(l?l.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=ue(r))((i,o)=>{const l=new R({next:c=>{try{t(c)}catch(T){o(T),l.unsubscribe()}},error:o,complete:i});this.subscribe(l)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[te](){return this}pipe(...t){return function oe(n){return 0===n.length?X:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=ue(t))((r,i)=>{let o;this.subscribe(l=>o=l,l=>i(l),()=>r(o))})}}return n.create=e=>new n(e),n})();function ue(n){var e;return null!==(e=n??p.Promise)&&void 0!==e?e:Promise}const ie=B(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let me=(()=>{class n extends ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ae(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ie}next(t){x(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){x(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){x(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?D:(this.currentObservers=null,o.push(t),new y(()=>{this.currentObservers=null,M(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new ee;return t.source=this,t}}return n.create=(e,t)=>new ae(e,t),n})();class ae extends me{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:D}}function ge(n){return u(n?.lift)}function fe(n){return e=>{if(ge(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(n,e,t,r,i){return new de(n,e,t,r,i)}class de extends N{constructor(e,t,r,i,o,l){super(e),this.onFinalize=o,this.shouldUnsubscribe=l,this._next=t?function(c){try{t(c)}catch(T){e.error(T)}}:super._next,this._error=i?function(c){try{i(c)}catch(T){e.error(T)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function se(n,e){return fe((t,r)=>{let i=0;t.subscribe(ce(r,o=>{r.next(n.call(e,o,i++))}))})}function Ee(n){return this instanceof Ee?(this.v=n,this):new Ee(n)}function Ce(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i;function l(Re){r[Re]&&(i[Re]=function(Ne){return new Promise(function(Ve,qe){o.push([Re,Ne,Ve,qe])>1||c(Re,Ne)})})}function c(Re,Ne){try{!function T(Re){Re.value instanceof Ee?Promise.resolve(Re.value.v).then(j,q):he(o[0][2],Re)}(r[Re](Ne))}catch(Ve){he(o[0][3],Ve)}}function j(Re){c("next",Re)}function q(Re){c("throw",Re)}function he(Re,Ne){Re(Ne),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Oe(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function le(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(l){return new Promise(function(c,T){!function i(o,l,c,T){Promise.resolve(T).then(function(j){o({value:j,done:c})},l)}(c,T,(l=n[o](l)).done,l.value)})}}}const Dt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Ft(n){return u(n?.then)}function Ht(n){return u(n[te])}function Jt(n){return Symbol.asyncIterator&&u(n?.[Symbol.asyncIterator])}function sn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const je=function on(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function xe(n){return u(n?.[je])}function Se(n){return Ce(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Ee(t.read());if(i)return yield Ee(void 0);yield yield Ee(r)}}finally{t.releaseLock()}})}function ke(n){return u(n?.getReader)}function Ze(n){if(n instanceof ee)return n;if(null!=n){if(Ht(n))return function at(n){return new ee(e=>{const t=n[te]();if(u(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Dt(n))return function dt(n){return new ee(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Ft(n))return function et(n){return new ee(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,b)})}(n);if(Jt(n))return jt(n);if(xe(n))return function pt(n){return new ee(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(ke(n))return function Rt(n){return jt(Se(n))}(n)}throw sn(n)}function jt(n){return new ee(e=>{(function Yt(n,e){var t,r,i,o;return function W(n,e,t,r){return new(t||(t=Promise))(function(o,l){function c(q){try{j(r.next(q))}catch(he){l(he)}}function T(q){try{j(r.throw(q))}catch(he){l(he)}}function j(q){q.done?o(q.value):function i(o){return o instanceof t?o:new t(function(l){l(o)})}(q.value).then(c,T)}j((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Oe(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(l){i={error:l}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Be(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function nt(n,e,t=1/0){return u(e)?nt((r,i)=>se((o,l)=>e(r,o,i,l))(Ze(n(r,i))),t):("number"==typeof e&&(t=e),fe((r,i)=>function $e(n,e,t,r,i,o,l,c){const T=[];let j=0,q=0,he=!1;const Re=()=>{he&&!T.length&&!j&&e.complete()},Ne=qe=>j<r?Ve(qe):T.push(qe),Ve=qe=>{o&&e.next(qe),j++;let mt=!1;Ze(t(qe,q++)).subscribe(ce(e,gt=>{i?.(gt),o?Ne(gt):e.next(gt)},()=>{mt=!0},void 0,()=>{if(mt)try{for(j--;T.length&&j<r;){const gt=T.shift();l?Be(e,l,()=>Ve(gt)):Ve(gt)}Re()}catch(gt){e.error(gt)}}))};return n.subscribe(ce(e,Ne,()=>{he=!0,Re()})),()=>{c?.()}}(r,i,n,t)))}function Ot(n=1/0){return nt(X,n)}const Mt=new ee(n=>n.complete());function ct(n){return n&&u(n.schedule)}function Vt(n){return n[n.length-1]}function Ae(n){return u(Vt(n))?n.pop():void 0}function Xe(n){return ct(Vt(n))?n.pop():void 0}function tt(n,e=0){return fe((t,r)=>{t.subscribe(ce(r,i=>Be(r,n,()=>r.next(i),e),()=>Be(r,n,()=>r.complete(),e),i=>Be(r,n,()=>r.error(i),e)))})}function rt(n,e=0){return fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Wt(n,e){if(!n)throw new Error("Iterable cannot be null");return new ee(t=>{Be(t,e,()=>{const r=n[Symbol.asyncIterator]();Be(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function We(n,e){return e?function ut(n,e){if(null!=n){if(Ht(n))return function yt(n,e){return Ze(n).pipe(rt(e),tt(e))}(n,e);if(Dt(n))return function ln(n,e){return new ee(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Ft(n))return function $t(n,e){return Ze(n).pipe(rt(e),tt(e))}(n,e);if(Jt(n))return Wt(n,e);if(xe(n))return function Qt(n,e){return new ee(t=>{let r;return Be(t,e,()=>{r=n[je](),Be(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(l){return void t.error(l)}o?t.complete():t.next(i)},0,!0)}),()=>u(r?.return)&&r.return()})}(n,e);if(ke(n))return function Je(n,e){return Wt(Se(n),e)}(n,e)}throw sn(n)}(n,e):Ze(n)}function ot(...n){const e=Xe(n),t=function Et(n,e){return"number"==typeof Vt(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Ze(r[0]):Ot(t)(We(r,e)):Mt}function ht(n){return n<=0?()=>Mt:fe((e,t)=>{let r=0;e.subscribe(ce(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Lt(n={}){const{connector:e=(()=>new me),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let l=null,c=null,T=null,j=0,q=!1,he=!1;const Re=()=>{c?.unsubscribe(),c=null},Ne=()=>{Re(),l=T=null,q=he=!1},Ve=()=>{const qe=l;Ne(),qe?.unsubscribe()};return fe((qe,mt)=>{j++,!he&&!q&&Re();const gt=T=T??e();mt.add(()=>{j--,0===j&&!he&&!q&&(c=Ut(Ve,i))}),gt.subscribe(mt),l||(l=new R({next:xt=>gt.next(xt),error:xt=>{he=!0,Re(),c=Ut(Ne,t,xt),gt.error(xt)},complete:()=>{q=!0,Re(),c=Ut(Ne,r),gt.complete()}}),We(qe).subscribe(l))})(o)}}function Ut(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(ht(1)).subscribe(()=>n())}function Ge(n){for(let e in n)if(n[e]===Ge)return e;throw Error("Could not find renamed property on target object.")}function Nt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Tt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Tt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function nn(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Mn=Ge({__forward_ref__:Ge});function Ln(n){return n.__forward_ref__=Ln,n.toString=function(){return Tt(this())},n}function Kt(n){return function In(n){return"function"==typeof n&&n.hasOwnProperty(Mn)&&n.__forward_ref__===Ln}(n)?n():n}class At extends Error{constructor(e,t){super(function Kn(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function rn(n){return"string"==typeof n?n:null==n?"":String(n)}function ii(n,e){throw new At(-201,!1)}function st(n,e){null==n&&function Ct(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Bt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yn(n){return{providers:n.providers||[],imports:n.imports||[]}}function er(n){return pa(n,ma)||pa(n,Zl)}function pa(n,e){return n.hasOwnProperty(e)?n[e]:null}function Xl(n){return n&&(n.hasOwnProperty(va)||n.hasOwnProperty(Pf))?n[va]:null}const ma=Ge({\u0275prov:Ge}),va=Ge({\u0275inj:Ge}),Zl=Ge({ngInjectableDef:Ge}),Pf=Ge({ngInjectorDef:Ge});var un=(()=>((un=un||{})[un.Default=0]="Default",un[un.Host=1]="Host",un[un.Self=2]="Self",un[un.SkipSelf=4]="SkipSelf",un[un.Optional=8]="Optional",un))();let Io;function si(n){const e=Io;return Io=n,e}function ql(n,e,t){const r=er(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&un.Optional?null:void 0!==e?e:void ii(Tt(n))}function Fi(n){return{toString:n}.toString()}var Wr=(()=>((Wr=Wr||{})[Wr.OnPush=0]="OnPush",Wr[Wr.Default=1]="Default",Wr))(),Gr=(()=>{return(n=Gr||(Gr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Gr;var n})();const jn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),_s={},Fn=[],Ea=Ge({\u0275cmp:Ge}),Ro=Ge({\u0275dir:Ge}),Bs=Ge({\u0275pipe:Ge}),Jl=Ge({\u0275mod:Ge}),yi=Ge({\u0275fac:Ge}),Us=Ge({__NG_ELEMENT_ID__:Ge});let wf=0;function Yr(n){return Fi(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Wr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Fn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Gr.Emulated,id:"c"+wf++,styles:n.styles||Fn,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.dependencies,l=n.features;return i.inputs=_a(n.inputs,r),i.outputs=_a(n.outputs),l&&l.forEach(c=>c(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(js).filter(eu):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(vr).filter(eu):null,i})}function js(n){return kn(n)||mr(n)}function eu(n){return null!==n}const tu={};function Zn(n){return Fi(()=>{const e={type:n.type,bootstrap:n.bootstrap||Fn,declarations:n.declarations||Fn,imports:n.imports||Fn,exports:n.exports||Fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(tu[n.id]=n.type),e})}function _a(n,e){if(null==n)return _s;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const nr=Yr;function kn(n){return n[Ea]||null}function mr(n){return n[Ro]||null}function vr(n){return n[Bs]||null}function ze(n,e){const t=n[Jl]||null;if(!t&&!0===e)throw new Error(`Type ${Tt(n)} does not have '\u0275mod' property.`);return t}function Hr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Di(n){return Array.isArray(n)&&!0===n[1]}function xf(n){return 0!=(8&n.flags)}function su(n){return 2==(2&n.flags)}function au(n){return 1==(1&n.flags)}function Ci(n){return null!==n.template}function LS(n){return 0!=(256&n[2])}function Ks(n,e){return n.hasOwnProperty(yi)?n[yi]:null}class BS{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Em(n){return n.type.prototype.ngOnChanges&&(n.setInput=jS),US}function US(){const n=ym(this),e=n?.current;if(e){const t=n.previous;if(t===_s)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function jS(n,e,t,r){const i=ym(n)||function kS(n,e){return n[_m]=e}(n,{previous:_s,current:null}),o=i.current||(i.current={}),l=i.previous,c=this.declaredInputs[t],T=l[c];o[c]=new BS(T&&T.currentValue,e,l===_s),n[r]=e}const _m="__ngSimpleChanges__";function ym(n){return n[_m]||null}function rr(n){for(;Array.isArray(n);)n=n[0];return n}function ou(n,e){return rr(e[n])}function oi(n,e){return rr(e[n.index])}function Hf(n,e){return n.data[e]}function zr(n,e){const t=e[n];return Hr(t)?t:t[0]}function Tm(n){return 4==(4&n[2])}function Vf(n){return 64==(64&n[2])}function ys(n,e){return null==e?null:n[e]}function Dm(n){n[18]=0}function Kf(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const En={lFrame:bm(null),bindingsEnabled:!0};function Mm(){return En.bindingsEnabled}function bt(){return En.lFrame.lView}function wn(){return En.lFrame.tView}function Wf(n){return En.lFrame.contextLView=n,n[8]}function Gf(n){return En.lFrame.contextLView=null,n}function lr(){let n=Sm();for(;null!==n&&64===n.type;)n=n.parent;return n}function Sm(){return En.lFrame.currentTNode}function xi(n,e){const t=En.lFrame;t.currentTNode=n,t.isParent=e}function Yf(){return En.lFrame.isParent}function zf(){En.lFrame.isParent=!1}function Sa(){return En.lFrame.bindingIndex++}function eA(n,e){const t=En.lFrame;t.bindingIndex=t.bindingRootIndex=n,$f(e)}function $f(n){En.lFrame.currentDirectiveIndex=n}function Qf(n){const e=En.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function Rm(){return En.lFrame.currentQueryIndex}function Xf(n){En.lFrame.currentQueryIndex=n}function nA(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Om(n,e,t){if(t&un.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&un.Host||(i=nA(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,n=o}const r=En.lFrame=Pm();return r.currentTNode=e,r.lView=n,!0}function Zf(n){const e=Pm(),t=n[1];En.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Pm(){const n=En.lFrame,e=null===n?null:n.child;return null===e?bm(n):e}function bm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function wm(){const n=En.lFrame;return En.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Nm=wm;function qf(){const n=wm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Nr(){return En.lFrame.selectedIndex}function Ts(n){En.lFrame.selectedIndex=n}function qn(){const n=En.lFrame;return Hf(n.tView,n.selectedIndex)}function uu(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:c,ngAfterViewInit:T,ngAfterViewChecked:j,ngOnDestroy:q}=o;l&&(n.contentHooks||(n.contentHooks=[])).push(-t,l),c&&((n.contentHooks||(n.contentHooks=[])).push(t,c),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,c)),T&&(n.viewHooks||(n.viewHooks=[])).push(-t,T),j&&((n.viewHooks||(n.viewHooks=[])).push(t,j),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,j)),null!=q&&(n.destroyHooks||(n.destroyHooks=[])).push(t,q)}}function cu(n,e,t){Lm(n,e,3,t)}function fu(n,e,t,r){(3&n[2])===t&&Lm(n,e,t,r)}function Jf(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Lm(n,e,t,r){const o=r??-1,l=e.length-1;let c=0;for(let T=void 0!==r?65535&n[18]:0;T<l;T++)if("number"==typeof e[T+1]){if(c=e[T],null!=r&&c>=r)break}else e[T]<0&&(n[18]+=65536),(c<o||-1==o)&&(fA(n,t,e,T),n[18]=(4294901760&n[18])+T+2),T++}function fA(n,e,t,r){const i=t[r]<0,o=t[r+1],c=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(c)}finally{}}}else try{o.call(c)}finally{}}class Lo{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function du(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],l=t[r++],c=t[r++];n.setAttribute(e,l,c,o)}else{const o=i,l=t[++r];xm(o)?n.setProperty(e,o,l):n.setAttribute(e,o,l),r++}}return r}function Fm(n){return 3===n||4===n||6===n}function xm(n){return 64===n.charCodeAt(0)}function hu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Bm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Bm(n,e,t,r,i){let o=0,l=n.length;if(-1===e)l=-1;else for(;o<n.length;){const c=n[o++];if("number"==typeof c){if(c===e){l=-1;break}if(c>e){l=o-1;break}}}for(;o<n.length;){const c=n[o];if("number"==typeof c)break;if(c===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==l&&(n.splice(l,0,e),o=l+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function Um(n){return-1!==n}function Aa(n){return 32767&n}function Ia(n,e){let t=function mA(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let td=!0;function gu(n){const e=td;return td=n,e}let vA=0;const Bi={};function xo(n,e){const t=rd(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,nd(r.data,n),nd(e,null),nd(r.blueprint,null));const i=pu(n,e),o=n.injectorIndex;if(Um(i)){const l=Aa(i),c=Ia(i,e),T=c[1].data;for(let j=0;j<8;j++)e[o+j]=c[l+j]|T[l+j]}return e[o+8]=i,o}function nd(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rd(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function pu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=zm(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function mu(n,e,t){!function EA(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Us)&&(r=t[Us]),null==r&&(r=t[Us]=vA++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function Hm(n,e,t){if(t&un.Optional)return n;ii()}function Vm(n,e,t,r){if(t&un.Optional&&void 0===r&&(r=null),0==(t&(un.Self|un.Host))){const i=n[9],o=si(void 0);try{return i?i.get(e,r,t&un.Optional):ql(e,r,t&un.Optional)}finally{si(o)}}return Hm(r,0,t)}function Km(n,e,t,r=un.Default,i){if(null!==n){if(1024&e[2]){const l=function MA(n,e,t,r,i){let o=n,l=e;for(;null!==o&&null!==l&&1024&l[2]&&!(256&l[2]);){const c=Wm(o,l,t,r|un.Self,Bi);if(c!==Bi)return c;let T=o.parent;if(!T){const j=l[21];if(j){const q=j.get(t,Bi,r);if(q!==Bi)return q}T=zm(l),l=l[15]}o=T}return i}(n,e,t,r,Bi);if(l!==Bi)return l}const o=Wm(n,e,t,r,Bi);if(o!==Bi)return o}return Vm(e,t,r,i)}function Wm(n,e,t,r,i){const o=function TA(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Us)?n[Us]:void 0;return"number"==typeof e?e>=0?255&e:DA:e}(t);if("function"==typeof o){if(!Om(e,n,r))return r&un.Host?Hm(i,0,r):Vm(e,t,r,i);try{const l=o(r);if(null!=l||r&un.Optional)return l;ii()}finally{Nm()}}else if("number"==typeof o){let l=null,c=rd(n,e),T=-1,j=r&un.Host?e[16][6]:null;for((-1===c||r&un.SkipSelf)&&(T=-1===c?pu(n,e):e[c+8],-1!==T&&Ym(r,!1)?(l=e[1],c=Aa(T),e=Ia(T,e)):c=-1);-1!==c;){const q=e[1];if(Gm(o,c,q.data)){const he=yA(c,e,t,l,r,j);if(he!==Bi)return he}T=e[c+8],-1!==T&&Ym(r,e[1].data[c+8]===j)&&Gm(o,c,e)?(l=q,c=Aa(T),e=Ia(T,e)):c=-1}}return i}function yA(n,e,t,r,i,o){const l=e[1],c=l.data[n+8],q=vu(c,l,t,null==r?su(c)&&td:r!=l&&0!=(3&c.type),i&un.Host&&o===c);return null!==q?Bo(e,l,q,c):Bi}function vu(n,e,t,r,i){const o=n.providerIndexes,l=e.data,c=1048575&o,T=n.directiveStart,q=o>>20,Re=i?c+q:n.directiveEnd;for(let Ne=r?c:c+q;Ne<Re;Ne++){const Ve=l[Ne];if(Ne<T&&t===Ve||Ne>=T&&Ve.type===t)return Ne}if(i){const Ne=l[T];if(Ne&&Ci(Ne)&&Ne.type===t)return T}return null}function Bo(n,e,t,r){let i=n[t];const o=e.data;if(function dA(n){return n instanceof Lo}(i)){const l=i;l.resolving&&function Ei(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new At(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Dn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():rn(n)}(o[t]));const c=gu(l.canSeeViewProviders);l.resolving=!0;const T=l.injectImpl?si(l.injectImpl):null;Om(n,r,un.Default);try{i=n[t]=l.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function cA(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const l=Em(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,l),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,l)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==T&&si(T),gu(c),l.resolving=!1,Nm()}}return i}function Gm(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Ym(n,e){return!(n&un.Self||n&un.Host&&e)}class Ra{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Km(this._tNode,this._lView,e,r,t)}}function DA(){return new Ra(lr(),bt())}function zm(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function Oa(n){return function _A(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(Fm(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(lr(),n)}const ba="__parameters__";function Na(n,e,t){return Fi(()=>{const r=function sd(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const l=new i(...o);return c.annotation=l,c;function c(T,j,q){const he=T.hasOwnProperty(ba)?T[ba]:Object.defineProperty(T,ba,{value:[]})[ba];for(;he.length<=q;)he.push(null);return(he[q]=he[q]||[]).push(l),T}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class tn{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Bt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const AA=new tn("AnalyzeForEntryComponents");function $r(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),$r(r,e)):e!==n&&e.push(r)}return e}function qi(n,e){n.forEach(t=>Array.isArray(t)?qi(t,e):e(t))}function Qm(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Eu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ko(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Qr(n,e,t){let r=La(n,e);return r>=0?n[1|r]=t:(r=~r,function OA(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function od(n,e){const t=La(n,e);if(t>=0)return n[1|t]}function La(n,e){return function qm(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),l=n[o<<t];if(e===l)return o<<t;l>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Ho={},ud="__NG_DI_FLAG__",yu="ngTempTokenPath",BA=/\n/gm,Jm="__source";let Vo;function Tu(n){const e=Vo;return Vo=n,e}function jA(n,e=un.Default){if(void 0===Vo)throw new At(-203,!1);return null===Vo?ql(n,void 0,e):Vo.get(n,e&un.Optional?null:void 0,e)}function St(n,e=un.Default){return(function bf(){return Io}()||jA)(Kt(n),e)}function Mi(n,e=un.Default){return St(n,e)}function cd(n){const e=[];for(let t=0;t<n.length;t++){const r=Kt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new At(900,!1);let i,o=un.Default;for(let l=0;l<r.length;l++){const c=r[l],T=kA(c);"number"==typeof T?-1===T?i=c.token:o|=T:i=c}e.push(St(i,o))}else e.push(St(r))}return e}function Ko(n,e){return n[ud]=e,n.prototype[ud]=e,n}function kA(n){return n[ud]}const li=Ko(Na("Optional"),8),Fa=Ko(Na("SkipSelf"),4);let dd,Mu;function Ba(n){return function hd(){if(void 0===Mu&&(Mu=null,jn.trustedTypes))try{Mu=jn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Mu}()?.createHTML(n)||n}class Gs{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class tI extends Gs{getTypeName(){return"HTML"}}class nI extends Gs{getTypeName(){return"Style"}}class rI extends Gs{getTypeName(){return"Script"}}class iI extends Gs{getTypeName(){return"URL"}}class sI extends Gs{getTypeName(){return"ResourceURL"}}function Xr(n){return n instanceof Gs?n.changingThisBreaksApplicationSecurity:n}function Ui(n,e){const t=function aI(n){return n instanceof Gs&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class dI{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ba(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class hI{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ba(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=Ba(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const l=t.item(i).name;("xmlns:ns1"===l||0===l.indexOf("ns1:"))&&e.removeAttribute(l)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const pI=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,mI=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Yo(n){return(n=String(n)).match(pI)||n.match(mI)?n:"unsafe:"+n}function ji(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function zo(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const gv=ji("area,br,col,hr,img,wbr"),pv=ji("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),mv=ji("rp,rt"),pd=zo(gv,zo(pv,ji("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zo(mv,ji("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zo(mv,pv)),md=ji("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vd=ji("srcset"),vv=zo(md,vd,ji("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ji("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vI=ji("script,style,template");class EI{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!pd.hasOwnProperty(t))return this.sanitizedSomething=!0,!vI.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),l=o.name,c=l.toLowerCase();if(!vv.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let T=o.value;md[c]&&(T=Yo(T)),vd[c]&&(n=T,T=(n=String(n)).split(",").map(e=>Yo(e.trim())).join(", ")),this.buf.push(" ",l,'="',Ev(T),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();pd.hasOwnProperty(t)&&!gv.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Ev(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const _I=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yI=/([^\#-~ |!])/g;function Ev(n){return n.replace(/&/g,"&amp;").replace(_I,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(yI,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Au;function _v(n,e){let t=null;try{Au=Au||function dv(n){const e=new hI(n);return function gI(){try{return!!(new window.DOMParser).parseFromString(Ba(""),"text/html")}catch{return!1}}()?new dI(e):e}(n);let r=e?String(e):"";t=Au.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Au.getInertBodyElement(r)}while(r!==o);return Ba((new EI).sanitizeChildren(Ed(t)||t))}finally{if(t){const r=Ed(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Ed(n){return"content"in n&&function TI(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Un=(()=>((Un=Un||{})[Un.NONE=0]="NONE",Un[Un.HTML=1]="HTML",Un[Un.STYLE=2]="STYLE",Un[Un.SCRIPT=3]="SCRIPT",Un[Un.URL=4]="URL",Un[Un.RESOURCE_URL=5]="RESOURCE_URL",Un))();function $o(n){const e=function Qo(){const n=bt();return n&&n[12]}();return e?e.sanitize(Un.URL,n)||"":Ui(n,"URL")?Xr(n):Yo(rn(n))}function yd(n){return n.ngOriginalError}class Ji{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&yd(e);for(;t&&yd(t);)t=yd(t);return t||null}}const Td=new Map;let BI=0;const Cd="__ngContext__";function Ir(n,e){Hr(e)?(n[Cd]=e[20],function jI(n){Td.set(n[20],n)}(e)):n[Cd]=e}function Xo(n){const e=n[Cd];return"number"==typeof e?function Dv(n){return Td.get(n)||null}(e):e||null}function Md(n){const e=Xo(n);return e?Hr(e)?e:e.lView:null}const $I=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(jn))();function es(n){return n instanceof Function?n():n}var Vr=(()=>((Vr=Vr||{})[Vr.Important=1]="Important",Vr[Vr.DashCase=2]="DashCase",Vr))();function Ad(n,e){return undefined(n,e)}function Zo(n){const e=n[3];return Di(e)?e[3]:e}function Id(n){return bv(n[13])}function Rd(n){return bv(n[4])}function bv(n){for(;null!==n&&!Di(n);)n=n[4];return n}function ja(n,e,t,r,i){if(null!=r){let o,l=!1;Di(r)?o=r:Hr(r)&&(l=!0,r=r[0]);const c=rr(r);0===n&&null!==t?null==i?Bv(e,t,c):Ys(e,t,c,i||null,!0):1===n&&null!==t?Ys(e,t,c,i||null,!0):2===n?function Wv(n,e,t){const r=Iu(n,e);r&&function cR(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,c,l):3===n&&e.destroyNode(c),null!=o&&function hR(n,e,t,r,i){const o=t[7];o!==rr(t)&&ja(e,n,r,o,i);for(let c=10;c<t.length;c++){const T=t[c];qo(T[1],T,n,e,r,o)}}(e,n,o,t,i)}}function Pd(n,e,t){return n.createElement(e,t)}function Nv(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Kf(i,-1)),t.splice(r,1)}function bd(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Nv(i,r),e>0&&(n[t-1][4]=r[4]);const o=Eu(n,10+e);!function nR(n,e){qo(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const l=o[19];null!==l&&l.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Lv(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&qo(n,e,t,3,null,null),function sR(n){let e=n[13];if(!e)return wd(n[1],n);for(;e;){let t=null;if(Hr(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Hr(e)&&wd(e[1],e),e=e[3];null===e&&(e=n),Hr(e)&&wd(e[1],e),t=e&&e[4]}e=t}}(e)}}function wd(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function uR(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Lo)){const o=t[r+1];if(Array.isArray(o))for(let l=0;l<o.length;l+=2){const c=i[o[l]],T=o[l+1];try{T.call(c)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function lR(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const l=t[o+1],c="function"==typeof l?l(e):rr(e[l]),T=r[i=t[o+2]],j=t[o+3];"boolean"==typeof j?c.removeEventListener(t[o],T,j):j>=0?r[i=j]():r[i=-j].unsubscribe(),o+=2}else{const l=r[i=t[o+1]];t[o].call(l)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Di(e[3])){t!==e[3]&&Nv(t,e);const r=e[19];null!==r&&r.detachView(n)}!function kI(n){Td.delete(n[20])}(e)}}function Fv(n,e,t){return function xv(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Gr.None||i===Gr.Emulated)return null}return oi(r,t)}(n,e.parent,t)}function Ys(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Bv(n,e,t){n.appendChild(e,t)}function Uv(n,e,t,r,i){null!==r?Ys(n,e,t,r,i):Bv(n,e,t)}function Iu(n,e){return n.parentNode(e)}function jv(n,e,t){return Hv(n,e,t)}let Hv=function kv(n,e,t){return 40&n.type?oi(n,t):null};function Ru(n,e,t,r){const i=Fv(n,r,e),o=e[11],c=jv(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let T=0;T<t.length;T++)Uv(o,i,t[T],c,!1);else Uv(o,i,t,c,!1)}function Ou(n,e){if(null!==e){const t=e.type;if(3&t)return oi(e,n);if(4&t)return Ld(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Ou(n,r);{const i=n[e.index];return Di(i)?Ld(-1,i):rr(i)}}if(32&t)return Ad(e,n)()||rr(n[e.index]);{const r=Kv(n,e);return null!==r?Array.isArray(r)?r[0]:Ou(Zo(n[16]),r):Ou(n,e.next)}}return null}function Kv(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Ld(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Ou(r,i)}return e[7]}function Fd(n,e,t,r,i,o,l){for(;null!=t;){const c=r[t.index],T=t.type;if(l&&0===e&&(c&&Ir(rr(c),r),t.flags|=4),64!=(64&t.flags))if(8&T)Fd(n,e,t.child,r,i,o,!1),ja(e,n,i,c,o);else if(32&T){const j=Ad(t,r);let q;for(;q=j();)ja(e,n,i,q,o);ja(e,n,i,c,o)}else 16&T?Gv(n,e,r,t,i,o):ja(e,n,i,c,o);t=l?t.projectionNext:t.next}}function qo(n,e,t,r,i,o){Fd(t,r,n.firstChild,e,i,o,!1)}function Gv(n,e,t,r,i,o){const l=t[16],T=l[6].projection[r.projection];if(Array.isArray(T))for(let j=0;j<T.length;j++)ja(e,n,i,T[j],o);else Fd(n,e,T,l[3],i,o,!0)}function Yv(n,e,t){n.setAttribute(e,"style",t)}function xd(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function zv(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const $v="ng-template";function pR(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==zv(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Qv(n){return 4===n.type&&n.value!==$v}function mR(n,e,t){return e===(4!==n.type||t?n.value:$v)}function vR(n,e,t){let r=4;const i=n.attrs||[],o=function yR(n){for(let e=0;e<n.length;e++)if(Fm(n[e]))return e;return n.length}(i);let l=!1;for(let c=0;c<e.length;c++){const T=e[c];if("number"!=typeof T){if(!l)if(4&r){if(r=2|1&r,""!==T&&!mR(n,T,t)||""===T&&1===e.length){if(Si(r))return!1;l=!0}}else{const j=8&r?T:e[++c];if(8&r&&null!==n.attrs){if(!pR(n.attrs,j,t)){if(Si(r))return!1;l=!0}continue}const he=ER(8&r?"class":T,i,Qv(n),t);if(-1===he){if(Si(r))return!1;l=!0;continue}if(""!==j){let Re;Re=he>o?"":i[he+1].toLowerCase();const Ne=8&r?Re:null;if(Ne&&-1!==zv(Ne,j,0)||2&r&&j!==Re){if(Si(r))return!1;l=!0}}}}else{if(!l&&!Si(r)&&!Si(T))return!1;if(l&&Si(T))continue;l=!1,r=T|1&r}}return Si(r)||l}function Si(n){return 0==(1&n)}function ER(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const l=e[i];if(l===n)return i;if(3===l||6===l)o=!0;else{if(1===l||2===l){let c=e[++i];for(;"string"==typeof c;)c=e[++i];continue}if(4===l)break;if(0===l){i+=4;continue}}i+=o?1:2}return-1}return function TR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Xv(n,e,t=!1){for(let r=0;r<e.length;r++)if(vR(n,e[r],t))return!0;return!1}function DR(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Zv(n,e){return n?":not("+e.trim()+")":e}function CR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let l=n[t];if("string"==typeof l)if(2&r){const c=n[++t];i+="["+l+(c.length>0?'="'+c+'"':"")+"]"}else 8&r?i+="."+l:4&r&&(i+=" "+l);else""!==i&&!Si(l)&&(e+=Zv(o,i),i=""),r=l,o=o||!Si(r);t++}return""!==i&&(e+=Zv(o,i)),e}const _n={};function ts(n){qv(wn(),bt(),Nr()+n,!1)}function qv(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&cu(e,o,t)}else{const o=n.preOrderHooks;null!==o&&fu(e,o,0,t)}Ts(t)}const Bd=new tn("ENVIRONMENT_INITIALIZER"),nE=new tn("INJECTOR_DEF_TYPES");function bR(...n){return{\u0275providers:rE(0,n)}}function rE(n,...e){const t=[],r=new Set;let i;return qi(e,o=>{const l=o;Ud(l,t,[],r)&&(i||(i=[]),i.push(l))}),void 0!==i&&iE(i,t),t}function iE(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];qi(i,o=>{e.push(o)})}}function Ud(n,e,t,r){if(!(n=Kt(n)))return!1;let i=null,o=Xl(n);const l=!o&&kn(n);if(o||l){if(l&&!l.standalone)return!1;i=n}else{const T=n.ngModule;if(o=Xl(T),!o)return!1;i=T}const c=r.has(i);if(l){if(c)return!1;if(r.add(i),l.dependencies){const T="function"==typeof l.dependencies?l.dependencies():l.dependencies;for(const j of T)Ud(j,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!c){let j;r.add(i);try{qi(o.imports,q=>{Ud(q,e,t,r)&&(j||(j=[]),j.push(q))})}finally{}void 0!==j&&iE(j,e)}if(!c){const j=Ks(i)||(()=>new i);e.push({provide:i,useFactory:j,deps:Fn},{provide:nE,useValue:i,multi:!0},{provide:Bd,useValue:()=>St(i),multi:!0})}const T=o.providers;null==T||c||qi(T,q=>{e.push(q)})}}return i!==n&&void 0!==n.providers}const wR=Ge({provide:String,useValue:Ge});function jd(n){return null!==n&&"object"==typeof n&&wR in n}function zs(n){return"function"==typeof n}const kd=new tn("INJECTOR",-1);class oE{get(e,t=Ho){if(t===Ho){const r=new Error(`NullInjectorError: No provider for ${Tt(e)}!`);throw r.name="NullInjectorError",r}return t}}const Hd=new tn("Set Injector scope."),Pu={},LR={};let Vd;function Kd(){return void 0===Vd&&(Vd=new oE),Vd}class $s{}class lE extends $s{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gd(e,l=>this.processProvider(l)),this.records.set(kd,ka(void 0,this)),i.has("environment")&&this.records.set($s,ka(void 0,this));const o=this.records.get(Hd);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nE.multi,Fn,un.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}get(e,t=Ho,r=un.Default){this.assertNotDestroyed();const i=Tu(this),o=si(void 0);try{if(!(r&un.SkipSelf)){let c=this.records.get(e);if(void 0===c){const T=function jR(n){return"function"==typeof n||"object"==typeof n&&n instanceof tn}(e)&&er(e);c=T&&this.injectableDefInScope(T)?ka(Wd(e),Pu):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&un.Self?Kd():this.parent).get(e,t=r&un.Optional&&t===Ho?null:t)}catch(l){if("NullInjectorError"===l.name){if((l[yu]=l[yu]||[]).unshift(Tt(e)),i)throw l;return function HA(n,e,t,r){const i=n[yu];throw e[Jm]&&i.unshift(e[Jm]),n.message=function VA(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Tt(e);if(Array.isArray(e))i=e.map(Tt).join(" -> ");else if("object"==typeof e){let o=[];for(let l in e)if(e.hasOwnProperty(l)){let c=e[l];o.push(l+":"+("string"==typeof c?JSON.stringify(c):Tt(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(BA,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[yu]=null,n}(l,e,"R3InjectorError",this.source)}throw l}finally{si(o),Tu(i)}}resolveInjectorInitializers(){const e=Tu(this),t=si(void 0);try{const r=this.get(Bd.multi,Fn,un.Self);for(const i of r)i()}finally{Tu(e),si(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Tt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new At(205,!1)}processProvider(e){let t=zs(e=Kt(e))?e:Kt(e&&e.provide);const r=function xR(n){return jd(n)?ka(void 0,n.useValue):ka(uE(n),Pu)}(e);if(zs(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ka(void 0,Pu,!0),i.factory=()=>cd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Pu&&(t.value=LR,t.value=t.factory()),"object"==typeof t.value&&t.value&&function UR(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Kt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Wd(n){const e=er(n),t=null!==e?e.factory:Ks(n);if(null!==t)return t;if(n instanceof tn)throw new At(204,!1);if(n instanceof Function)return function FR(n){const e=n.length;if(e>0)throw ko(e,"?"),new At(204,!1);const t=function Rf(n){const e=n&&(n[ma]||n[Zl]);if(e){const t=function Of(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new At(204,!1)}function uE(n,e,t){let r;if(zs(n)){const i=Kt(n);return Ks(i)||Wd(i)}if(jd(n))r=()=>Kt(n.useValue);else if(function aE(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...cd(n.deps||[]));else if(function sE(n){return!(!n||!n.useExisting)}(n))r=()=>St(Kt(n.useExisting));else{const i=Kt(n&&(n.useClass||n.provide));if(!function BR(n){return!!n.deps}(n))return Ks(i)||Wd(i);r=()=>new i(...cd(n.deps))}return r}function ka(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function kR(n){return!!n.\u0275providers}function Gd(n,e){for(const t of n)Array.isArray(t)?Gd(t,e):kR(t)?Gd(t.\u0275providers,e):e(t)}function cE(n,e=null,t=null,r){const i=fE(n,e,t,r);return i.resolveInjectorInitializers(),i}function fE(n,e=null,t=null,r,i=new Set){const o=[t||Fn,bR(n)];return r=r||("object"==typeof n?void 0:Tt(n)),new lE(o,e||Kd(),r||null,i)}let Rr=(()=>{class n{static create(t,r){if(Array.isArray(t))return cE({name:""},r,t,"");{const i=t.name??"";return cE({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=Ho,n.NULL=new oE,n.\u0275prov=Bt({token:n,providedIn:"any",factory:()=>St(kd)}),n.__NG_ELEMENT_ID__=-1,n})();function kt(n,e=un.Default){const t=bt();return null===t?St(n,e):Km(lr(),t,Kt(n),e)}function Xd(){throw new Error("invalid")}function wu(n,e){return n<<17|e<<2}function Ai(n){return n>>17&32767}function eh(n){return 2|n}function ns(n){return(131068&n)>>2}function th(n,e){return-131069&n|e<<2}function nh(n){return 1|n}function bE(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const l=n.data[o];Xf(i),l.contentQueries(2,e[o],o)}}}function Fu(n,e,t,r,i,o,l,c,T,j,q){const he=e.blueprint.slice();return he[0]=i,he[2]=76|r,(null!==q||n&&1024&n[2])&&(he[2]|=1024),Dm(he),he[3]=he[15]=n,he[8]=t,he[10]=l||n&&n[10],he[11]=c||n&&n[11],he[12]=T||n&&n[12]||null,he[9]=j||n&&n[9]||null,he[6]=o,he[20]=function UI(){return BI++}(),he[21]=q,he[16]=2==e.type?n[16]:he,he}function Va(n,e,t,r,i){let o=n.data[e];if(null===o)o=function fh(n,e,t,r,i){const o=Sm(),l=Yf(),T=n.data[e]=function y0(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,l?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=T),null!==o&&(l?null==o.child&&null!==T.parent&&(o.child=T):null===o.next&&(o.next=T)),T}(n,e,t,r,i),function JS(){return En.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const l=function No(){const n=En.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===l?-1:l.injectorIndex}return xi(o,!0),o}function Ka(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function xu(n,e,t){Zf(e);try{const r=n.viewQuery;null!==r&&Th(1,r,t);const i=n.template;null!==i&&wE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&bE(n,e),n.staticViewQueries&&Th(2,n.viewQuery,t);const o=n.components;null!==o&&function m0(n,e){for(let t=0;t<e.length;t++)U0(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,qf()}}function Jo(n,e,t,r){const i=e[2];if(128!=(128&i)){Zf(e);try{Dm(e),function Am(n){return En.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&wE(n,e,t,2,r);const l=3==(3&i);if(l){const j=n.preOrderCheckHooks;null!==j&&cu(e,j,null)}else{const j=n.preOrderHooks;null!==j&&fu(e,j,0,null),Jf(e,0)}if(function x0(n){for(let e=Id(n);null!==e;e=Rd(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Kf(o,1),i[2]|=512}}}(e),function F0(n){for(let e=Id(n);null!==e;e=Rd(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Vf(r)&&Jo(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&bE(n,e),l){const j=n.contentCheckHooks;null!==j&&cu(e,j)}else{const j=n.contentHooks;null!==j&&fu(e,j,1),Jf(e,1)}!function g0(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Ts(~i);else{const o=i,l=t[++r],c=t[++r];eA(l,o),c(2,e[o])}}}finally{Ts(-1)}}(n,e);const c=n.components;null!==c&&function p0(n,e){for(let t=0;t<e.length;t++)B0(n,e[t])}(e,c);const T=n.viewQuery;if(null!==T&&Th(2,T,r),l){const j=n.viewCheckHooks;null!==j&&cu(e,j)}else{const j=n.viewHooks;null!==j&&fu(e,j,2),Jf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Kf(e[3],-1))}finally{qf()}}}function v0(n,e,t,r){const i=e[10],l=Tm(e);try{!l&&i.begin&&i.begin(),l&&xu(n,e,r),Jo(n,e,t,r)}finally{!l&&i.end&&i.end()}}function wE(n,e,t,r,i){const o=Nr(),l=2&r;try{Ts(-1),l&&e.length>22&&qv(n,e,22,!1),t(r,i)}finally{Ts(o)}}function dh(n,e,t){!Mm()||(function I0(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;n.firstCreatePass||xo(t,e),Ir(r,e);const l=t.initialInputs;for(let c=i;c<o;c++){const T=n.data[c],j=Ci(T);j&&w0(e,t,T);const q=Bo(e,n,c,t);Ir(q,e),null!==l&&N0(0,c-i,q,T,0,l),j&&(zr(t.index,e)[8]=q)}}(n,e,t,oi(t,e)),128==(128&t.flags)&&function R0(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,l=function tA(){return En.lFrame.currentDirectiveIndex}();try{Ts(o);for(let c=r;c<i;c++){const T=n.data[c],j=e[c];$f(c),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&UE(T,j)}}finally{Ts(-1),$f(l)}}(n,e,t))}function hh(n,e,t=oi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const l=r[o+1],c=-1===l?t(e,n):n[l];n[i++]=c}}}function LE(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=gh(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function gh(n,e,t,r,i,o,l,c,T,j){const q=22+r,he=q+i,Re=function E0(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:_n);return t}(q,he),Ne="function"==typeof j?j():j;return Re[1]={type:n,blueprint:Re,template:t,queries:null,viewQuery:c,declTNode:e,data:Re.slice().fill(null,q),bindingStartIndex:q,expandoStartIndex:he,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof l?l():l,firstChild:null,schemas:T,consts:Ne,incompleteFirstPass:!1}}function FE(n,e,t,r){const i=WE(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&GE(n).push(r,i.length-1))}function xE(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Zr(n,e,t,r,i,o,l,c){const T=oi(e,t);let q,j=e.inputs;!c&&null!=j&&(q=j[r])?($E(n,t,q,r,i),su(e)&&function C0(n,e){const t=zr(e,n);16&t[2]||(t[2]|=32)}(t,e.index)):3&e.type&&(r=function D0(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=l?l(i,e.value||"",r):i,o.setProperty(T,r,i))}function ph(n,e,t,r){let i=!1;if(Mm()){const o=function O0(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const l=r[o];Xv(t,l.selectors,!1)&&(i||(i=[]),mu(xo(t,e),n,l.type),Ci(l)?(jE(n,t),i.unshift(l)):i.push(l))}return i}(n,e,t),l=null===r?null:{"":-1};if(null!==o){i=!0,kE(t,n.data.length,o.length);for(let q=0;q<o.length;q++){const he=o[q];he.providersResolver&&he.providersResolver(he)}let c=!1,T=!1,j=Ka(n,e,o.length,null);for(let q=0;q<o.length;q++){const he=o[q];t.mergedAttrs=hu(t.mergedAttrs,he.hostAttrs),HE(n,t,e,j,he),b0(j,he,l),null!==he.contentQueries&&(t.flags|=8),(null!==he.hostBindings||null!==he.hostAttrs||0!==he.hostVars)&&(t.flags|=128);const Re=he.type.prototype;!c&&(Re.ngOnChanges||Re.ngOnInit||Re.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),c=!0),!T&&(Re.ngOnChanges||Re.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),T=!0),j++}!function T0(n,e){const r=e.directiveEnd,i=n.data,o=e.attrs,l=[];let c=null,T=null;for(let j=e.directiveStart;j<r;j++){const q=i[j],he=q.inputs,Re=null===o||Qv(e)?null:L0(he,o);l.push(Re),c=xE(he,j,c),T=xE(q.outputs,j,T)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=16),c.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=l,e.inputs=c,e.outputs=T}(n,t)}l&&function P0(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new At(-301,!1);r.push(e[i],o)}}}(t,r,l)}return t.mergedAttrs=hu(t.mergedAttrs,t.attrs),i}function BE(n,e,t,r,i,o){const l=o.hostBindings;if(l){let c=n.hostBindingOpCodes;null===c&&(c=n.hostBindingOpCodes=[]);const T=~e.index;(function A0(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(c)!=T&&c.push(T),c.push(r,i,l)}}function UE(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function jE(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function b0(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ci(e)&&(t[""]=n)}}function kE(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function HE(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=Ks(i.type)),l=new Lo(o,Ci(i),kt);n.blueprint[r]=l,t[r]=l,BE(n,e,0,r,Ka(n,t,i.hostVars,_n),i)}function w0(n,e,t){const r=oi(e,n),i=LE(t),o=n[10],l=Bu(n,Fu(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=l}function ki(n,e,t,r,i,o){const l=oi(n,e);!function mh(n,e,t,r,i,o,l){if(null==o)n.removeAttribute(e,i,t);else{const c=null==l?rn(o):l(o,r||"",i);n.setAttribute(e,i,c,t)}}(e[11],l,o,n.value,t,r,i)}function N0(n,e,t,r,i,o){const l=o[e];if(null!==l){const c=r.setInput;for(let T=0;T<l.length;){const j=l[T++],q=l[T++],he=l[T++];null!==c?r.setInput(t,he,j,q):t[q]=he}}}function L0(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function VE(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function B0(n,e){const t=zr(e,n);if(Vf(t)){const r=t[1];48&t[2]?Jo(r,t,r.template,t[8]):t[5]>0&&vh(t)}}function vh(n){for(let r=Id(n);null!==r;r=Rd(r))for(let i=10;i<r.length;i++){const o=r[i];if(512&o[2]){const l=o[1];Jo(l,o,l.template,o[8])}else o[5]>0&&vh(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=zr(t[r],n);Vf(i)&&i[5]>0&&vh(i)}}function U0(n,e){const t=zr(e,n),r=t[1];(function j0(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),xu(r,t,t[8])}function Bu(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Eh(n){for(;n;){n[2]|=32;const e=Zo(n);if(LS(n)&&!e)return n;n=e}return null}function KE(n){!function _h(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=Md(t);if(null!==r){const i=r[1];v0(i,r,i.template,t)}}}(n[8])}function Th(n,e,t){Xf(0),e(n,t)}const H0=(()=>Promise.resolve(null))();function WE(n){return n[7]||(n[7]=[])}function GE(n){return n.cleanup||(n.cleanup=[])}function YE(n,e,t){return(null===n||Ci(n))&&(t=function WS(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function zE(n,e){const t=n[9],r=t?t.get(Ji,null):null;r&&r.handleError(e)}function $E(n,e,t,r,i){for(let o=0;o<t.length;){const l=t[o++],c=t[o++],T=e[l],j=n.data[l];null!==j.setInput?j.setInput(T,i,r,c):T[c]=i}}function Uu(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let l=0;l<e.length;l++){const c=e[l];"number"==typeof c?o=c:1==o?i=nn(i,c):2==o&&(r=nn(r,c+": "+e[++l]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function G0(){const n=lr();uu(bt()[1],n)}function el(n){let e=function QE(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Ci(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new At(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const l=n;l.inputs=Dh(n.inputs),l.declaredInputs=Dh(n.declaredInputs),l.outputs=Dh(n.outputs);const c=i.hostBindings;c&&Q0(n,c);const T=i.viewQuery,j=i.contentQueries;if(T&&z0(n,T),j&&$0(n,j),Nt(n.inputs,i.inputs),Nt(n.declaredInputs,i.declaredInputs),Nt(n.outputs,i.outputs),Ci(i)&&i.data.animation){const q=n.data;q.animation=(q.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let l=0;l<o.length;l++){const c=o[l];c&&c.ngInherit&&c(n),c===el&&(t=!1)}}e=Object.getPrototypeOf(e)}!function Y0(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=hu(i.hostAttrs,t=hu(t,i.hostAttrs))}}(r)}function Dh(n){return n===_s?{}:n===Fn?[]:n}function z0(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function $0(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function Q0(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let ju=null;function Qs(){if(!ju){const n=jn.Symbol;if(n&&n.iterator)ju=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ju=r)}}}return ju}function tl(n){return!!function Ch(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Qs()in n)}function Or(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function rl(n,e,t,r){const i=bt();return Or(i,Sa(),e)&&(wn(),ki(qn(),i,n,e,t,r)),rl}function Ga(n,e,t,r){return Or(n,Sa(),t)?e+rn(t)+r:_n}function Zs(n,e,t,r,i,o,l,c){const T=bt(),j=wn(),q=n+22,he=j.firstCreatePass?function iO(n,e,t,r,i,o,l,c,T){const j=e.consts,q=Va(e,n,4,l||null,ys(j,c));ph(e,t,q,ys(j,T)),uu(e,q);const he=q.tViews=gh(2,q,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,j);return null!==e.queries&&(e.queries.template(e,q),he.queries=e.queries.embeddedTView(q)),q}(q,j,T,e,t,r,i,o,l):j.data[q];xi(he,!1);const Re=T[11].createComment("");Ru(j,T,Re,he),Ir(Re,T),Bu(T,T[q]=VE(Re,T,Re,he)),au(he)&&dh(j,T,he),null!=l&&hh(T,he,c)}function Ii(n,e,t){const r=bt();return Or(r,Sa(),e)&&Zr(wn(),qn(),r,n,e,r[11],t,!1),Ii}function Mh(n,e,t,r,i){const l=i?"class":"style";$E(n,t,e.inputs[l],l,r)}function cr(n,e,t,r){const i=bt(),o=wn(),l=22+n,c=i[11],T=i[l]=Pd(c,e,function uA(){return En.lFrame.currentNamespace}()),j=o.firstCreatePass?function aO(n,e,t,r,i,o,l){const c=e.consts,j=Va(e,n,2,i,ys(c,o));return ph(e,t,j,ys(c,l)),null!==j.attrs&&Uu(j,j.attrs,!1),null!==j.mergedAttrs&&Uu(j,j.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,j),j}(l,o,i,0,e,t,r):o.data[l];xi(j,!0);const q=j.mergedAttrs;null!==q&&du(c,T,q);const he=j.classes;null!==he&&xd(c,T,he);const Re=j.styles;return null!==Re&&Yv(c,T,Re),64!=(64&j.flags)&&Ru(o,i,T,j),0===function zS(){return En.lFrame.elementDepthCount}()&&Ir(T,i),function $S(){En.lFrame.elementDepthCount++}(),au(j)&&(dh(o,i,j),function NE(n,e,t){if(xf(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const l=n.data[o];l.contentQueries&&l.contentQueries(1,t[o],o)}}}(o,j,i)),null!==r&&hh(i,j),cr}function Tr(){let n=lr();Yf()?zf():(n=n.parent,xi(n,!1));const e=n;!function QS(){En.lFrame.elementDepthCount--}();const t=wn();return t.firstCreatePass&&(uu(t,n),xf(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function gA(n){return 0!=(16&n.flags)}(e)&&Mh(t,e,bt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function pA(n){return 0!=(32&n.flags)}(e)&&Mh(t,e,bt(),e.stylesWithoutHost,!1),Tr}function is(n,e,t,r){return cr(n,e,t,r),Tr(),is}function Ih(){return bt()}function Hu(n){return!!n&&"function"==typeof n.then}const l_=function o_(n){return!!n&&"function"==typeof n.subscribe};function ss(n,e,t,r){const i=bt(),o=wn(),l=lr();return u_(o,i,i[11],l,n,e,0,r),ss}function Rh(n,e){const t=lr(),r=bt(),i=wn();return u_(i,r,YE(Qf(i.data),t,r),t,n,e),Rh}function u_(n,e,t,r,i,o,l,c){const T=au(r),q=n.firstCreatePass&&GE(n),he=e[8],Re=WE(e);let Ne=!0;if(3&r.type||c){const mt=oi(r,e),gt=c?c(mt):mt,xt=Re.length,vt=c?vn=>c(rr(vn[r.index])):r.index;let Gt=null;if(!c&&T&&(Gt=function lO(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const l=i[o];if(l===t&&i[o+1]===r){const c=e[7],T=i[o+2];return c.length>T?c[T]:null}"string"==typeof l&&(o+=2)}return null}(n,e,i,r.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=o,Gt.__ngLastListenerFn__=o,Ne=!1;else{o=f_(r,e,he,o,!1);const vn=t.listen(gt,i,o);Re.push(o,vn),q&&q.push(i,vt,xt,xt+1)}}else o=f_(r,e,he,o,!1);const Ve=r.outputs;let qe;if(Ne&&null!==Ve&&(qe=Ve[i])){const mt=qe.length;if(mt)for(let gt=0;gt<mt;gt+=2){const bn=e[qe[gt]][qe[gt+1]].subscribe(o),Qn=Re.length;Re.push(o,bn),q&&q.push(i,r.index,Qn,-(Qn+1))}}}function c_(n,e,t,r){try{return!1!==t(r)}catch(i){return zE(n,i),!1}}function f_(n,e,t,r,i){return function o(l){if(l===Function)return r;Eh(2&n.flags?zr(n.index,e):e);let T=c_(e,0,r,l),j=o.__ngNextListenerFn__;for(;j;)T=c_(e,0,j,l)&&T,j=j.__ngNextListenerFn__;return i&&!1===T&&(l.preventDefault(),l.returnValue=!1),T}}function Ja(n=1){return function rA(n){return(En.lFrame.contextLView=function iA(n,e){for(;n>0;)e=e[15],n--;return e}(n,En.lFrame.contextLView))[8]}(n)}function uO(n,e){let t=null;const r=function _R(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Xv(n,o,!0):DR(r,o))return i}else t=i}return t}function eo(n){const e=bt()[16][6];if(!e.projection){const r=e.projection=ko(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const l=n?uO(o,n):0;null!==l&&(i[l]?i[l].projectionNext=o:r[l]=o,i[l]=o),o=o.next}}}function as(n,e=0,t){const r=bt(),i=wn(),o=Va(i,22+n,16,null,t||null);null===o.projection&&(o.projection=e),zf(),64!=(64&o.flags)&&function dR(n,e,t){Gv(e[11],0,e,t,Fv(n,t,e),jv(t.parent||e[6],t,e))}(i,r,o)}function Oh(n,e,t){return Ph(n,"",e,"",t),Oh}function Ph(n,e,t,r,i){const o=bt(),l=Ga(o,e,t,r);return l!==_n&&Zr(wn(),qn(),o,n,l,o[11],i,!1),Ph}function y_(n,e,t,r,i){const o=n[t+1],l=null===e;let c=r?Ai(o):ns(o),T=!1;for(;0!==c&&(!1===T||l);){const q=n[c+1];dO(n[c],e)&&(T=!0,n[c+1]=r?nh(q):eh(q)),c=r?Ai(q):ns(q)}T&&(n[t+1]=r?eh(o):nh(o))}function dO(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&La(n,e)>=0}function bh(n,e,t){return Ri(n,e,t,!1),bh}function qs(n,e){return Ri(n,e,null,!0),qs}function Ri(n,e,t,r){const i=bt(),o=wn(),l=function Zi(n){const e=En.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function R_(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Nr()],l=function I_(n,e){return e>=n.expandoStartIndex}(n,t);(function w_(n,e){return 0!=(n.flags&(e?16:32))})(o,r)&&null===e&&!l&&(e=!1),e=function TO(n,e,t,r){const i=Qf(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=il(t=wh(null,n,e,t,r),e.attrs,r),o=null);else{const l=e.directiveStylingLast;if(-1===l||n[l]!==i)if(t=wh(i,n,e,t,r),null===o){let T=function DO(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==ns(r))return n[Ai(r)]}(n,e,r);void 0!==T&&Array.isArray(T)&&(T=wh(null,n,e,T[1],r),T=il(T,e.attrs,r),function CO(n,e,t,r){n[Ai(t?e.classBindings:e.styleBindings)]=r}(n,e,r,T))}else o=function MO(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=il(r,n[o].hostAttrs,t);return il(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function cO(n,e,t,r,i,o){let l=o?e.classBindings:e.styleBindings,c=Ai(l),T=ns(l);n[r]=t;let q,j=!1;if(Array.isArray(t)){const he=t;q=he[1],(null===q||La(he,q)>0)&&(j=!0)}else q=t;if(i)if(0!==T){const Re=Ai(n[c+1]);n[r+1]=wu(Re,c),0!==Re&&(n[Re+1]=th(n[Re+1],r)),n[c+1]=function r0(n,e){return 131071&n|e<<17}(n[c+1],r)}else n[r+1]=wu(c,0),0!==c&&(n[c+1]=th(n[c+1],r)),c=r;else n[r+1]=wu(T,0),0===c?c=r:n[T+1]=th(n[T+1],r),T=r;j&&(n[r+1]=eh(n[r+1])),y_(n,q,r,!0),y_(n,q,r,!1),function fO(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&La(o,e)>=0&&(t[r+1]=nh(t[r+1]))}(e,q,n,r,o),l=wu(c,T),o?e.classBindings=l:e.styleBindings=l}(i,o,e,t,l,r)}}(o,n,l,r),e!==_n&&Or(i,l,e)&&function P_(n,e,t,r,i,o,l,c){if(!(3&e.type))return;const T=n.data,j=T[c+1];Vu(function CE(n){return 1==(1&n)}(j)?b_(T,e,t,i,ns(j),l):void 0)||(Vu(o)||function DE(n){return 2==(2&n)}(j)&&(o=b_(T,null,t,i,c,l)),function gR(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Vr.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Vr.Important),n.setStyle(t,r,i,o))}}(r,l,ou(Nr(),t),i,o))}(o,o.data[Nr()],i,i[11],n,i[l+1]=function IO(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Tt(Xr(n)))),n}(e,t),r,l)}function wh(n,e,t,r,i){let o=null;const l=t.directiveEnd;let c=t.directiveStylingLast;for(-1===c?c=t.directiveStart:c++;c<l&&(o=e[c],r=il(r,o.hostAttrs,i),o!==n);)c++;return null!==n&&(t.directiveStylingLast=c),r}function il(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const l=e[o];"number"==typeof l?i=l:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Qr(n,l,!!t||e[++o]))}return void 0===n?null:n}function b_(n,e,t,r,i,o){const l=null===e;let c;for(;i>0;){const T=n[i],j=Array.isArray(T),q=j?T[1]:T,he=null===q;let Re=t[i+1];Re===_n&&(Re=he?Fn:void 0);let Ne=he?od(Re,r):q===r?Re:void 0;if(j&&!Vu(Ne)&&(Ne=od(T,r)),Vu(Ne)&&(c=Ne,l))return c;const Ve=n[i+1];i=l?Ai(Ve):ns(Ve)}if(null!==e){let T=o?e.residualClasses:e.residualStyles;null!=T&&(c=od(T,r))}return c}function Vu(n){return void 0!==n}function Js(n,e=""){const t=bt(),r=wn(),i=n+22,o=r.firstCreatePass?Va(r,i,1,e,null):r.data[i],l=t[i]=function Od(n,e){return n.createText(e)}(t[11],e);Ru(r,t,l,o),xi(o,!1)}function Ku(n){return Nh("",n,""),Ku}function Nh(n,e,t){const r=bt(),i=Ga(r,n,e,t);return i!==_n&&function rs(n,e,t){const r=ou(e,n);!function wv(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,Nr(),i),Nh}function Lh(n,e,t){const r=bt();if(Or(r,Sa(),e)){const o=wn(),l=qn();Zr(o,l,r,n,e,YE(Qf(o.data),l,r),t,!0)}return Lh}const ro="en-US";let J_=ro;function Bh(n,e,t,r,i){if(n=Kt(n),Array.isArray(n))for(let o=0;o<n.length;o++)Bh(n[o],e,t,r,i);else{const o=wn(),l=bt();let c=zs(n)?n:Kt(n.provide),T=uE(n);const j=lr(),q=1048575&j.providerIndexes,he=j.directiveStart,Re=j.providerIndexes>>20;if(zs(n)||!n.multi){const Ne=new Lo(T,i,kt),Ve=jh(c,e,i?q:q+Re,he);-1===Ve?(mu(xo(j,l),o,c),Uh(o,n,e.length),e.push(c),j.directiveStart++,j.directiveEnd++,i&&(j.providerIndexes+=1048576),t.push(Ne),l.push(Ne)):(t[Ve]=Ne,l[Ve]=Ne)}else{const Ne=jh(c,e,q+Re,he),Ve=jh(c,e,q,q+Re),qe=Ne>=0&&t[Ne],mt=Ve>=0&&t[Ve];if(i&&!mt||!i&&!qe){mu(xo(j,l),o,c);const gt=function GP(n,e,t,r,i){const o=new Lo(n,t,kt);return o.multi=[],o.index=e,o.componentProviders=0,My(o,i,r&&!t),o}(i?WP:KP,t.length,i,r,T);!i&&mt&&(t[Ve].providerFactory=gt),Uh(o,n,e.length,0),e.push(c),j.directiveStart++,j.directiveEnd++,i&&(j.providerIndexes+=1048576),t.push(gt),l.push(gt)}else Uh(o,n,Ne>-1?Ne:Ve,My(t[i?Ve:Ne],T,!i&&r));!i&&r&&mt&&t[Ve].componentProviders++}}}function Uh(n,e,t,r){const i=zs(e),o=function NR(n){return!!n.useClass}(e);if(i||o){const T=(o?Kt(e.useClass):e).prototype.ngOnDestroy;if(T){const j=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const q=j.indexOf(t);-1===q?j.push(t,[r,T]):j[q+1].push(r,T)}else j.push(t,T)}}}function My(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function jh(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function KP(n,e,t,r){return kh(this.multi,[])}function WP(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const l=this.providerFactory.componentProviders,c=Bo(t,t[1],this.providerFactory.index,r);o=c.slice(0,l),kh(i,o);for(let T=l;T<c.length;T++)o.push(c[T])}else o=[],kh(i,o);return o}function kh(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Hh(n,e=[]){return t=>{t.providersResolver=(r,i)=>function VP(n,e,t){const r=wn();if(r.firstCreatePass){const i=Ci(n);Bh(t,r.data,r.blueprint,i,!0),Bh(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class zP{resolveComponentFactory(e){throw function YP(n){const e=Error(`No component factory found for ${Tt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let ul=(()=>{class n{}return n.NULL=new zP,n})();class Ss{}class Ay{}class Iy{}function QP(){return so(lr(),bt())}function so(n,e){return new xr(oi(n,e))}let xr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=QP,n})();function XP(n){return n instanceof xr?n.nativeElement:n}class cl{}let qP=(()=>{class n{}return n.\u0275prov=Bt({token:n,providedIn:"root",factory:()=>null}),n})();class ao{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const JP=new ao("14.0.5"),Vh={};function Qu(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(rr(o)),Di(o))for(let c=10;c<o.length;c++){const T=o[c],j=T[1].firstChild;null!==j&&Qu(T[1],T,j,r)}const l=t.type;if(8&l)Qu(n,e,t.child,r);else if(32&l){const c=Ad(t,e);let T;for(;T=c();)r.push(T)}else if(16&l){const c=Kv(e,t);if(Array.isArray(c))r.push(...c);else{const T=Zo(e[16]);Qu(T[1],T,c,r,!0)}}t=i?t.projectionNext:t.next}return r}class fl{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Qu(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Di(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(bd(e,r),Eu(t,r))}this._attachedToViewContainer=!1}Lv(this._lView[1],this._lView)}onDestroy(e){FE(this._lView[1],this._lView,null,e)}markForCheck(){Eh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function yh(n,e,t){const r=e[10];r.begin&&r.begin();try{Jo(n,e,n.template,t)}catch(i){throw zE(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new At(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function iR(n,e){qo(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new At(902,!1);this._appRef=e}}class eb extends fl{constructor(e){super(e),this._view=e}detectChanges(){KE(this._view)}checkNoChanges(){}get context(){return null}}class Kh extends ul{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=kn(e);return new Wh(t,this.ngModule)}}function Ry(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class nb{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){const i=this.injector.get(e,Vh,r);return i!==Vh||t===Vh?i:this.parentInjector.get(e,t,r)}}class Wh extends Iy{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function MR(n){return n.map(CR).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Ry(this.componentDef.inputs)}get outputs(){return Ry(this.componentDef.outputs)}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof $s?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const l=o?new nb(e,o):e,c=l.get(cl,null);if(null===c)throw new At(407,!1);const T=l.get(qP,null),j=c.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",he=r?function _0(n,e,t){return n.selectRootElement(e,t===Gr.ShadowDom)}(j,r,this.componentDef.encapsulation):Pd(c.createRenderer(null,this.componentDef),q,function tb(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(q)),Re=this.componentDef.onPush?288:272,Ne=function W0(n,e){return{components:[],scheduler:n||$I,clean:H0,playerHandler:e||null,flags:0}}(),Ve=gh(0,null,null,1,0,null,null,null,null,null),qe=Fu(null,Ve,Ne,Re,null,null,c,j,T,l,null);let mt,gt;Zf(qe);try{const xt=function V0(n,e,t,r,i,o){const l=t[1];t[22]=n;const T=Va(l,22,2,"#host",null),j=T.mergedAttrs=e.hostAttrs;null!==j&&(Uu(T,j,!0),null!==n&&(du(i,n,j),null!==T.classes&&xd(i,n,T.classes),null!==T.styles&&Yv(i,n,T.styles)));const q=r.createRenderer(n,e),he=Fu(t,LE(e),null,e.onPush?32:16,t[22],T,r,q,o||null,null,null);return l.firstCreatePass&&(mu(xo(T,t),l,e.type),jE(l,T),kE(T,t.length,1)),Bu(t,he),t[22]=he}(he,this.componentDef,qe,c,j);if(he)if(r)du(j,he,["ng-version",JP.full]);else{const{attrs:vt,classes:Gt}=function SR(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!Si(i))break;i=o}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);vt&&du(j,he,vt),Gt&&Gt.length>0&&xd(j,he,Gt.join(" "))}if(gt=Hf(Ve,22),void 0!==t){const vt=gt.projection=[];for(let Gt=0;Gt<this.ngContentSelectors.length;Gt++){const vn=t[Gt];vt.push(null!=vn?Array.from(vn):null)}}mt=function K0(n,e,t,r,i){const o=t[1],l=function S0(n,e,t){const r=lr();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),HE(n,r,e,Ka(n,e,1,null),t));const i=Bo(e,n,r.directiveStart,r);Ir(i,e);const o=oi(r,e);return o&&Ir(o,e),i}(o,t,e);if(r.components.push(l),n[8]=l,null!==i)for(const T of i)T(l,e);if(e.contentQueries){const T=lr();e.contentQueries(1,l,T.directiveStart)}const c=lr();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Ts(c.index),BE(t[1],c,0,c.directiveStart,c.directiveEnd,e),UE(e,l)),l}(xt,this.componentDef,qe,Ne,[G0]),xu(Ve,qe,null)}finally{qf()}return new ib(this.componentType,mt,so(gt,qe),qe,gt)}}class ib extends class $P{}{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new eb(i),this.componentType=e}get injector(){return new Ra(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class Oy extends Ss{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Kh(this);const r=ze(e);this._bootstrapComponents=es(r.bootstrap),this._r3Injector=fE(e,t,[{provide:Ss,useValue:this},{provide:ul,useValue:this.componentFactoryResolver}],Tt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(e)}get(e,t=Rr.THROW_IF_NOT_FOUND,r=un.Default){return e===Rr||e===Ss||e===kd?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Gh extends Ay{constructor(e){super(),this.moduleType=e}create(e){return new Oy(this.moduleType,e)}}class ab extends Ss{constructor(e,t,r){super(),this.componentFactoryResolver=new Kh(this),this.instance=null;const i=new lE([...e,{provide:Ss,useValue:this},{provide:ul,useValue:this.componentFactoryResolver}],t||Kd(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Xu(n,e=null,t=null){return new ab(n,e,t).injector}function zh(n){return e=>{setTimeout(n,void 0,e)}}const dr=class Lb extends me{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),l=r;if(e&&"object"==typeof e){const T=e;i=T.next?.bind(T),o=T.error?.bind(T),l=T.complete?.bind(T)}this.__isAsync&&(o=zh(o),i&&(i=zh(i)),l&&(l=zh(l)));const c=super.subscribe({next:i,error:o,complete:l});return e instanceof y&&e.add(c),c}};function Fb(){return this._results[Qs()]()}class Zu{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Qs(),r=Zu.prototype;r[t]||(r[t]=Fb)}get changes(){return this._changes||(this._changes=new dr)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=$r(e);(this._changesDetected=!function IA(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let os=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ub,n})();const xb=os,Bb=class extends xb{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=Fu(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const l=this._declarationLView[19];return null!==l&&(i[19]=l.createEmbeddedView(r)),xu(r,i,e),new fl(i)}};function Ub(){return qu(lr(),bt())}function qu(n,e){return 4&n.type?new Bb(e,n,so(n,e)):null}let Pi=(()=>{class n{}return n.__NG_ELEMENT_ID__=jb,n})();function jb(){return Ky(lr(),bt())}const kb=Pi,Hy=class extends kb{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return so(this._hostTNode,this._hostLView)}get injector(){return new Ra(this._hostTNode,this._hostLView)}get parentInjector(){const e=pu(this._hostTNode,this._hostLView);if(Um(e)){const t=Ia(e,this._hostLView),r=Aa(e);return new Ra(t[1].data[r+8],t)}return new Ra(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Vy(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const l=e.createEmbeddedView(t||{},o);return this.insert(l,i),l}createComponent(e,t,r,i,o){const l=e&&!function jo(n){return"function"==typeof n}(e);let c;if(l)c=t;else{const he=t||{};c=he.index,r=he.injector,i=he.projectableNodes,o=he.environmentInjector||he.ngModuleRef}const T=l?e:new Wh(kn(e)),j=r||this.parentInjector;if(!o&&null==T.ngModule){const Re=(l?j:this.parentInjector).get($s,null);Re&&(o=Re)}const q=T.create(j,i,void 0,o);return this.insert(q.hostView,c),q}insert(e,t){const r=e._lView,i=r[1];if(function YS(n){return Di(n[3])}(r)){const q=this.indexOf(e);if(-1!==q)this.detach(q);else{const he=r[3],Re=new Hy(he,he[6],he[3]);Re.detach(Re.indexOf(e))}}const o=this._adjustIndex(t),l=this._lContainer;!function aR(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],Qm(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const l=e[17];null!==l&&t!==l&&function oR(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(l,e);const c=e[19];null!==c&&c.insertView(n),e[2]|=64}(i,r,l,o);const c=Ld(o,l),T=r[11],j=Iu(T,l[7]);return null!==j&&function rR(n,e,t,r,i,o){r[0]=i,r[6]=e,qo(n,r,t,1,i,o)}(i,l[6],T,r,j,c),e.attachToViewContainerRef(),Qm($h(l),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Vy(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=bd(this._lContainer,t);r&&(Eu($h(this._lContainer),t),Lv(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=bd(this._lContainer,t);return r&&null!=Eu($h(this._lContainer),t)?new fl(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Vy(n){return n[8]}function $h(n){return n[8]||(n[8]=[])}function Ky(n,e){let t;const r=e[n.index];if(Di(r))t=r;else{let i;if(8&n.type)i=rr(r);else{const o=e[11];i=o.createComment("");const l=oi(n,e);Ys(o,Iu(o,l),i,function fR(n,e){return n.nextSibling(e)}(o,l),!1)}e[n.index]=t=VE(r,e,i,n),Bu(e,t)}return new Hy(t,n,e)}class Qh{constructor(e){this.queryList=e,this.matches=null}clone(){return new Qh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Xh{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const l=t.getByIndex(o);i.push(this.queries[l.indexInDeclarationView].clone())}return new Xh(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==$y(e,t).matches&&this.queries[t].setDirty()}}class Wy{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class Zh{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new Zh(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class qh{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new qh(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,Kb(t,o)),this.matchTNodeWithReadOption(e,t,vu(t,e,o,!1,!1))}else r===os?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,vu(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===xr||i===Pi||i===os&&4&t.type)this.addMatch(t.index,-2);else{const o=vu(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Kb(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function Gb(n,e,t,r){return-1===t?function Wb(n,e){return 11&n.type?so(n,e):4&n.type?qu(n,e):null}(e,n):-2===t?function Yb(n,e,t){return t===xr?so(e,n):t===os?qu(e,n):t===Pi?Ky(e,n):void 0}(n,e,r):Bo(n,n[1],t,e)}function Gy(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const o=n.data,l=t.matches,c=[];for(let T=0;T<l.length;T+=2){const j=l[T];c.push(j<0?null:Gb(e,o[j],l[T+1],t.metadata.read))}i.matches=c}return i.matches}function Jh(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const l=Gy(n,e,i,t);for(let c=0;c<o.length;c+=2){const T=o[c];if(T>0)r.push(l[c/2]);else{const j=o[c+1],q=e[-T];for(let he=10;he<q.length;he++){const Re=q[he];Re[17]===Re[3]&&Jh(Re[1],Re,j,r)}if(null!==q[9]){const he=q[9];for(let Re=0;Re<he.length;Re++){const Ne=he[Re];Jh(Ne[1],Ne,j,r)}}}}}return r}function Wi(n){const e=bt(),t=wn(),r=Rm();Xf(r+1);const i=$y(t,r);if(n.dirty&&Tm(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?Jh(t,e,r,[]):Gy(t,e,i,r);n.reset(o,XP),n.notifyOnChanges()}return!0}return!1}function gl(n,e,t){const r=wn();r.firstCreatePass&&(zy(r,new Wy(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),Yy(r,bt(),e)}function oo(n,e,t,r){const i=wn();if(i.firstCreatePass){const o=lr();zy(i,new Wy(e,t,r),o.index),function $b(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}Yy(i,bt(),t)}function Gi(){return function zb(n,e){return n[19].queries[e].queryList}(bt(),Rm())}function Yy(n,e,t){const r=new Zu(4==(4&t));FE(n,e,r,r.destroy),null===e[19]&&(e[19]=new Xh),e[19].queries.push(new Qh(r))}function zy(n,e,t){null===n.queries&&(n.queries=new Zh),n.queries.track(new qh(e,t))}function $y(n,e){return n.queries.getByIndex(e)}function ec(...n){}const tc=new tn("Application Initializer");let nc=(()=>{class n{constructor(t){this.appInits=t,this.resolve=ec,this.reject=ec,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Hu(o))t.push(o);else if(l_(o)){const l=new Promise((c,T)=>{o.subscribe({complete:c,error:T})});t.push(l)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(St(tc,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ml=new tn("AppId",{providedIn:"root",factory:function hT(){return`${ig()}${ig()}${ig()}`}});function ig(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gT=new tn("Platform Initializer"),rc=new tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pT=new tn("appBootstrapListener"),sg=new tn("AnimationModuleType");let ag=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Yi=new tn("LocaleId",{providedIn:"root",factory:()=>Mi(Yi,un.Optional|un.SkipSelf)||function pw(){return typeof $localize<"u"&&$localize.locale||ro}()});class vw{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let og=(()=>{class n{compileModuleSync(t){return new Gh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=es(ze(t).declarations).reduce((l,c)=>{const T=kn(c);return T&&l.push(new Wh(T)),l},[]);return new vw(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yw=(()=>Promise.resolve(0))();function lg(n){typeof Zone>"u"?yw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Bn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new dr(!1),this.onMicrotaskEmpty=new dr(!1),this.onStable=new dr(!1),this.onError=new dr(!1),typeof Zone>"u")throw new At(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Tw(){let n=jn.requestAnimationFrame,e=jn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Mw(n){const e=()=>{!function Cw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(jn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,cg(n),n.isCheckStableRunning=!0,ug(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),cg(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,l,c)=>{try{return ET(n),t.invokeTask(i,o,l,c)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),_T(n)}},onInvoke:(t,r,i,o,l,c,T)=>{try{return ET(n),t.invoke(i,o,l,c,T)}finally{n.shouldCoalesceRunChangeDetection&&e(),_T(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,cg(n),ug(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bn.isInAngularZone())throw new At(909,!1)}static assertNotInAngularZone(){if(Bn.isInAngularZone())throw new At(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,l=o.scheduleEventTask("NgZoneEvent: "+i,e,Dw,ec,ec);try{return o.runTask(l,t,r)}finally{o.cancelTask(l)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Dw={};function ug(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function cg(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function ET(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _T(n){n._nesting--,ug(n)}class Sw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new dr,this.onMicrotaskEmpty=new dr,this.onStable=new dr,this.onError=new dr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const yT=new tn(""),ic=new tn("");let hg,fg=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,hg||(function Aw(n){hg=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bn.assertNotInAngularZone(),lg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lg(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(l=>l.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(St(Bn),St(dg),St(ic))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),dg=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return hg?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),As=null;const TT=new tn("AllowMultipleToken"),gg=new tn("PlatformDestroyListeners");class DT{constructor(e,t){this.name=e,this.token=t}}function MT(n,e,t=[]){const r=`Platform: ${e}`,i=new tn(r);return(o=[])=>{let l=pg();if(!l||l.injector.get(TT,!1)){const c=[...t,...o,{provide:i,useValue:!0}];n?n(c):function Ow(n){if(As&&!As.get(TT,!1))throw new At(400,!1);As=n;const e=n.get(AT);(function CT(n){const e=n.get(gT,null);e&&e.forEach(t=>t())})(n)}(function ST(n=[],e){return Rr.create({name:e,providers:[{provide:Hd,useValue:"platform"},{provide:gg,useValue:new Set([()=>As=null])},...n]})}(c,r))}return function bw(n){const e=pg();if(!e)throw new At(401,!1);return e}()}}function pg(){return As?.get(AT)??null}let AT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function ww(n,e){let t;return t="noop"===n?new Sw:("zone.js"===n?void 0:n)||new Bn(e),t}(r?.ngZone,function IT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Bn,useValue:i}];return i.run(()=>{const l=Rr.create({providers:o,parent:this.injector,name:t.moduleType.name}),c=t.create(l),T=c.injector.get(Ji,null);if(!T)throw new At(402,!1);return i.runOutsideAngular(()=>{const j=i.onError.subscribe({next:q=>{T.handleError(q)}});c.onDestroy(()=>{sc(this._modules,c),j.unsubscribe()})}),function RT(n,e,t){try{const r=t();return Hu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(T,i,()=>{const j=c.injector.get(nc);return j.runInitializers(),j.donePromise.then(()=>(function ey(n){st(n,"Expected localeId to be defined"),"string"==typeof n&&(J_=n.toLowerCase().replace(/_/g,"-"))}(c.injector.get(Yi,ro)||ro),this._moduleDoBootstrap(c),c))})})}bootstrapModule(t,r=[]){const i=OT({},r);return function Iw(n,e,t){const r=new Gh(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(vl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new At(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new At(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(gg,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(St(Rr))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function OT(n,e){return Array.isArray(e)?e.reduce(OT,n):{...n,...e}}let vl=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new ee(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new ee(c=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Bn.assertNotInAngularZone(),lg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const j=this._zone.onUnstable.subscribe(()=>{Bn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{T.unsubscribe(),j.unsubscribe()}});this.isStable=ot(o,l.pipe(Lt()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof Iy;if(!this._injector.get(nc).done)throw!i&&function uo(n){const e=kn(n)||mr(n)||vr(n);return null!==e&&e.standalone}(t),new At(405,false);let l;l=i?t:this._injector.get(ul).resolveComponentFactory(t),this.componentTypes.push(l.componentType);const c=function Rw(n){return n.isBoundToModule}(l)?void 0:this._injector.get(Ss),j=l.create(Rr.NULL,[],r||l.selector,c),q=j.location.nativeElement,he=j.injector.get(yT,null);return he?.registerApplication(q),j.onDestroy(()=>{this.detachView(j.hostView),sc(this.components,j),he?.unregisterApplication(q)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new At(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;sc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(pT,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>sc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new At(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(St(Bn),St(Rr),St(Ji))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let bT=!0,El=(()=>{class n{}return n.__NG_ELEMENT_ID__=Fw,n})();function Fw(n){return function xw(n,e,t){if(su(n)&&!t){const r=zr(n.index,e);return new fl(r,r)}return 47&n.type?new fl(e[16],e):null}(lr(),bt(),16==(16&n))}class xT{constructor(){}supports(e){return tl(e)}create(e){return new Vw(e)}}const Hw=(n,e)=>e;class Vw{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Hw}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const l=!r||t&&t.currentIndex<UT(r,i,o)?t:r,c=UT(l,i,o),T=l.currentIndex;if(l===r)i--,r=r._nextRemoved;else if(t=t._next,null==l.previousIndex)i++;else{o||(o=[]);const j=c-i,q=T-i;if(j!=q){for(let Re=0;Re<j;Re++){const Ne=Re<o.length?o[Re]:o[Re]=0,Ve=Ne+Re;q<=Ve&&Ve<j&&(o[Re]=Ne+1)}o[l.previousIndex]=q-j}}c!==T&&e(l,c,T)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!tl(e))throw new At(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,l,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],l=this._trackByFn(c,o),null!==t&&Object.is(t.trackById,l)?(r&&(t=this._verifyReinsertion(t,o,l,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,l,c),r=!0),t=t._next}else i=0,function eO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Qs()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,c=>{l=this._trackByFn(i,c),null!==t&&Object.is(t.trackById,l)?(r&&(t=this._verifyReinsertion(t,c,l,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)):(t=this._mismatch(t,c,l,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Kw(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new BT),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Kw{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ww{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class BT{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Ww,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UT(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function kT(){return new lc([new xT])}let lc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||kT()),deps:[[n,new Fa,new li]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new At(901,!1)}}return n.\u0275prov=Bt({token:n,providedIn:"root",factory:kT}),n})();const Qw=MT(null,"core",[]);let Xw=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(St(vl))},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({}),n})(),uc=null;function Is(){return uc}const Nn=new tn("DocumentToken");let cc=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:function(){return function eN(){return St(VT)}()},providedIn:"platform"}),n})();const tN=new tn("Location Initialized");let VT=(()=>{class n extends cc{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Is().getBaseHref(this._doc)}onPopState(t){const r=Is().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Is().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){KT()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){KT()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(St(Nn))},n.\u0275prov=Bt({token:n,factory:function(){return function nN(){return new VT(St(Nn))}()},providedIn:"platform"}),n})();function KT(){return!!window.history.pushState}function yg(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function WT(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function us(n){return n&&"?"!==n[0]?"?"+n:n}let na=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:function(){return function rN(){const n=St(Nn).location;return new YT(St(cc),n&&n.origin||"")}()},providedIn:"root"}),n})();const GT=new tn("appBaseHref");let YT=(()=>{class n extends na{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return yg(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+us(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+us(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+us(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(St(cc),St(GT,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),iN=(()=>{class n extends na{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=yg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+us(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+us(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(St(cc),St(GT,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),Tg=(()=>{class n{constructor(t){this._subject=new dr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=WT(zT(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+us(r))}normalize(t){return n.stripTrailingSlash(function aN(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,zT(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+us(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+us(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=us,n.joinWithSlash=yg,n.stripTrailingSlash=WT,n.\u0275fac=function(t){return new(t||n)(St(na))},n.\u0275prov=Bt({token:n,factory:function(){return function sN(){return new Tg(St(na))}()},providedIn:"root"}),n})();function zT(n){return n.replace(/\/index.html$/,"")}function nD(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class GN{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sD=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new GN(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===o?void 0:o);else if(null!==o){const c=r.get(o);r.move(c,l),aD(c,i)}});for(let i=0,o=r.length;i<o;i++){const c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{aD(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(kt(Pi),kt(os),kt(lc))},n.\u0275dir=nr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function aD(n,e){n.context.$implicit=e.item}let bg=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new zN,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){oD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){oD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(kt(Pi),kt(os))},n.\u0275dir=nr({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class zN{constructor(){this.$implicit=null,this.ngIf=null}}function oD(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Tt(e)}'.`)}let yc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({}),n})();const cD="browser";let ML=(()=>{class n{}return n.\u0275prov=Bt({token:n,providedIn:"root",factory:()=>new SL(St(Nn),window)}),n})();class SL{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function AL(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fD(this.window.history)||fD(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fD(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class dD{}class xg extends class IL extends class Jw{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function qw(n){uc||(uc=n)}(new xg)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function RL(){return Dl=Dl||document.querySelector("base"),Dl?Dl.getAttribute("href"):null}();return null==t?null:function OL(n){Tc=Tc||document.createElement("a"),Tc.setAttribute("href",n);const e=Tc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Dl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nD(document.cookie,e)}}let Tc,Dl=null;const hD=new tn("TRANSITION_ID"),bL=[{provide:tc,useFactory:function PL(n,e,t){return()=>{t.get(nc).donePromise.then(()=>{const r=Is(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[hD,Nn,Rr],multi:!0}];let NL=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();const Cl=new tn("EventManagerPlugins");let Dc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const l=i[o];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(St(Cl),St(Bn))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();class Bg{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Is().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let gD=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),Ml=(()=>{class n extends gD{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const l=this._doc.createElement("style");l.textContent=o,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(pD),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(pD))}}return n.\u0275fac=function(t){return new(t||n)(St(Nn))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();function pD(n){Is().remove(n)}const Ug={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},jg=/%COMP%/g;function Cc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Cc(n,i,t):(i=i.replace(jg,n),t.push(i))}return t}function ED(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Mc=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new kg(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Gr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new jL(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Gr.ShadowDom:return new kL(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Cc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(St(Dc),St(Ml),St(ml))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();class kg{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ug[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(yD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Ug[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ug[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Vr.DashCase|Vr.Important)?e.style.setProperty(t,r,i&Vr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Vr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ED(r)):this.eventManager.addEventListener(e,t,ED(r))}}function yD(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class jL extends kg{constructor(e,t,r,i){super(e),this.component=r;const o=Cc(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function xL(n){return"_ngcontent-%COMP%".replace(jg,n)}(i+"-"+r.id),this.hostAttr=function BL(n){return"_nghost-%COMP%".replace(jg,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class kL extends kg{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Cc(i.id,i.styles,[]);for(let l=0;l<o.length;l++){const c=document.createElement("style");c.textContent=o[l],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let HL=(()=>{class n extends Bg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(St(Nn))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();const TD=["alt","control","meta","shift"],KL={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},DD={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},WL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let GL=(()=>{class n extends Bg{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Is().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="";if(TD.forEach(T=>{const j=r.indexOf(T);j>-1&&(r.splice(j,1),l+=T+".")}),l+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=l,c}static getEventFullKey(t){let r="",i=function YL(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&DD.hasOwnProperty(e)&&(e=DD[e]))}return KL[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),TD.forEach(o=>{o!=i&&WL[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{n.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(St(Nn))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();const XL=MT(Qw,"browser",[{provide:rc,useValue:cD},{provide:gT,useValue:function zL(){xg.makeCurrent()},multi:!0},{provide:Nn,useFactory:function QL(){return function qA(n){dd=n}(document),document},deps:[]}]),MD=new tn(""),SD=[{provide:ic,useClass:class wL{addToWindow(e){jn.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},jn.getAllAngularTestabilities=()=>e.getAllTestabilities(),jn.getAllAngularRootElements=()=>e.getAllRootElements(),jn.frameworkStabilizers||(jn.frameworkStabilizers=[]),jn.frameworkStabilizers.push(r=>{const i=jn.getAllAngularTestabilities();let o=i.length,l=!1;const c=function(T){l=l||T,o--,0==o&&r(l)};i.forEach(function(T){T.whenStable(c)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Is().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:yT,useClass:fg,deps:[Bn,dg,ic]},{provide:fg,useClass:fg,deps:[Bn,dg,ic]}],AD=[{provide:Hd,useValue:"root"},{provide:Ji,useFactory:function $L(){return new Ji},deps:[]},{provide:Cl,useClass:HL,multi:!0,deps:[Nn,Bn,rc]},{provide:Cl,useClass:GL,multi:!0,deps:[Nn]},{provide:Mc,useClass:Mc,deps:[Dc,Ml,ml]},{provide:cl,useExisting:Mc},{provide:gD,useExisting:Ml},{provide:Ml,useClass:Ml,deps:[Nn]},{provide:Dc,useClass:Dc,deps:[Cl,Bn]},{provide:dD,useClass:NL,deps:[]},[]];let ID=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:ml,useValue:t.appId},{provide:hD,useExisting:ml},bL]}}}return n.\u0275fac=function(t){return new(t||n)(St(MD,12))},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({providers:[...AD,...SD],imports:[yc,Xw]}),n})(),RD=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(St(Nn))},n.\u0275prov=Bt({token:n,factory:function(t){let r=null;return r=t?new t:function qL(){return new RD(St(Nn))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const aF={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},Sc=new tn("HammerGestureConfig"),bD=new tn("HammerLoader");let wD=(()=>{class n{constructor(){this.events=[],this.overrides={}}buildHammer(t){const r=new Hammer(t,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(const i in this.overrides)r.get(i).set(this.overrides[i]);return r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),oF=(()=>{class n extends Bg{constructor(t,r,i,o){super(t),this._config=r,this.console=i,this.loader=o,this._loaderPromise=null}supports(t){return!(!aF.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader)}addEventListener(t,r,i){const o=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||o.runOutsideAngular(()=>this.loader());let l=!1,c=()=>{l=!0};return o.runOutsideAngular(()=>this._loaderPromise.then(()=>{window.Hammer?l||(c=this.addEventListener(t,r,i)):c=()=>{}}).catch(()=>{c=()=>{}})),()=>{c()}}return o.runOutsideAngular(()=>{const l=this._config.buildHammer(t),c=function(T){o.runGuarded(function(){i(T)})};return l.on(r,c),()=>{l.off(r,c),"function"==typeof l.destroy&&l.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}return n.\u0275fac=function(t){return new(t||n)(St(Nn),St(Sc),St(ag),St(bD,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),lF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({providers:[{provide:Cl,useClass:oF,multi:!0,deps:[Nn,Sc,ag,[new li,bD]]},{provide:Sc,useClass:wD,deps:[]}]}),n})(),Kg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:function(t){let r=null;return r=t?new(t||n):St(ND),r},providedIn:"root"}),n})(),ND=(()=>{class n extends Kg{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Un.NONE:return r;case Un.HTML:return Ui(r,"HTML")?Xr(r):_v(this._doc,String(r)).toString();case Un.STYLE:return Ui(r,"Style")?Xr(r):r;case Un.SCRIPT:if(Ui(r,"Script"))return Xr(r);throw new Error("unsafe value used in a script context");case Un.URL:return Ui(r,"URL")?Xr(r):Yo(String(r));case Un.RESOURCE_URL:if(Ui(r,"ResourceURL"))return Xr(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function oI(n){return new tI(n)}(t)}bypassSecurityTrustStyle(t){return function lI(n){return new nI(n)}(t)}bypassSecurityTrustScript(t){return function uI(n){return new rI(n)}(t)}bypassSecurityTrustUrl(t){return function cI(n){return new iI(n)}(t)}bypassSecurityTrustResourceUrl(t){return function fI(n){return new sI(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(St(Nn))},n.\u0275prov=Bt({token:n,factory:function(t){let r=null;return r=t?new t:function uF(n){return new ND(n.get(Nn))}(St(Rr)),r},providedIn:"root"}),n})();function dn(...n){return We(n,Xe(n))}class di extends me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:cF}=Array,{getPrototypeOf:fF,prototype:dF,keys:hF}=Object;function LD(n){if(1===n.length){const e=n[0];if(cF(e))return{args:e,keys:null};if(function gF(n){return n&&"object"==typeof n&&fF(n)===dF}(e)){const t=hF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:pF}=Array;function Wg(n){return se(e=>function mF(n,e){return pF(e)?n(...e):n(e)}(n,e))}function FD(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Gg(...n){const e=Xe(n),t=Ae(n),{args:r,keys:i}=LD(n);if(0===r.length)return We([],e);const o=new ee(function vF(n,e,t=X){return r=>{xD(e,()=>{const{length:i}=n,o=new Array(i);let l=i,c=i;for(let T=0;T<i;T++)xD(e,()=>{const j=We(n[T],e);let q=!1;j.subscribe(ce(r,he=>{o[T]=he,q||(q=!0,c--),c||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>FD(i,l):X));return t?o.pipe(Wg(t)):o}function xD(n,e,t){n?Be(t,n,e):e()}function ho(n,e){const t=u(n)?n:()=>n,r=i=>i.error(t());return new ee(e?i=>e.schedule(r,0,i):r)}const Sl=B(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ac(...n){return function EF(){return Ot(1)}()(We(n,Xe(n)))}function BD(n){return new ee(e=>{Ze(n()).subscribe(e)})}function Yg(){return fe((n,e)=>{let t=null;n._refCount++;const r=ce(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class UD extends ee{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ge(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new y;const t=this.getSubject();e.add(this.source.subscribe(ce(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=y.EMPTY)}return e}refCount(){return Yg()(this)}}function ra(n,e){return fe((t,r)=>{let i=null,o=0,l=!1;const c=()=>l&&!i&&r.complete();t.subscribe(ce(r,T=>{i?.unsubscribe();let j=0;const q=o++;Ze(n(T,q)).subscribe(i=ce(r,he=>r.next(e?e(T,he,q,j++):he),()=>{i=null,c()}))},()=>{l=!0,c()}))})}function Ic(...n){const e=Xe(n);return fe((t,r)=>{(e?Ac(n,t,e):Ac(n,t)).subscribe(r)})}function _F(n,e,t,r,i){return(o,l)=>{let c=t,T=e,j=0;o.subscribe(ce(l,q=>{const he=j++;T=c?n(T,q,he):(c=!0,q),r&&l.next(T)},i&&(()=>{c&&l.next(T),l.complete()})))}}function jD(n,e){return fe(_F(n,e,arguments.length>=2,!0))}function Dr(n,e){return fe((t,r)=>{let i=0;t.subscribe(ce(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Os(n){return fe((e,t)=>{let o,r=null,i=!1;r=e.subscribe(ce(t,void 0,void 0,l=>{o=Ze(n(l,Os(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function go(n,e){return u(e)?nt(n,e,1):nt(n,1)}function zg(n){return n<=0?()=>Mt:fe((e,t)=>{let r=[];e.subscribe(ce(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function kD(n=yF){return fe((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function yF(){return new Sl}function $g(n){return fe((e,t)=>{let r=!1;e.subscribe(ce(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ia(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Dr((i,o)=>n(i,o,r)):X,ht(1),t?$g(e):kD(()=>new Sl))}function gr(n,e,t){const r=u(n)||e||t?{next:n,error:e,complete:t}:n;return r?fe((i,o)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let c=!0;i.subscribe(ce(o,T=>{var j;null===(j=r.next)||void 0===j||j.call(r,T),o.next(T)},()=>{var T;c=!1,null===(T=r.complete)||void 0===T||T.call(r),o.complete()},T=>{var j;c=!1,null===(j=r.error)||void 0===j||j.call(r,T),o.error(T)},()=>{var T,j;c&&(null===(T=r.unsubscribe)||void 0===T||T.call(r)),null===(j=r.finalize)||void 0===j||j.call(r)}))}):X}function Qg(n){return se(()=>n)}function Rc(n){return fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class fs{constructor(e,t){this.id=e,this.url=t}}class Xg extends fs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class sa extends fs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Oc extends fs{constructor(e,t,r){super(e,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class HD extends fs{constructor(e,t,r){super(e,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class DF extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CF extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class MF extends fs{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class SF extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AF extends fs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IF{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class RF{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OF{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PF{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bF{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wF{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VD{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rn="primary";class LF{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function po(n){return new LF(n)}const Zg="Redirecting to ",KD="ngNavigationCancelingError";function qg(n){const e=Error("NavigationCancelingError: "+(n||""));return e[KD]=!0,e}function xF(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],c=n[o];if(l.startsWith(":"))i[l.substring(1)]=c;else if(l!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function zi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!WD(n[i],e[i]))return!1;return!0}function WD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function GD(n){return Array.prototype.concat.apply([],n)}function YD(n){return n.length>0?n[n.length-1]:null}function Cr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ps(n){return l_(n)?n:Hu(n)?We(Promise.resolve(n)):dn(n)}const jF={exact:function QD(n,e,t){if(!oa(n.segments,e.segments)||!Pc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!QD(n.children[r],e.children[r],t))return!1;return!0},subset:XD},zD={exact:function kF(n,e){return zi(n,e)},subset:function HF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>WD(n[t],e[t]))},ignored:()=>!0};function $D(n,e,t){return jF[t.paths](n.root,e.root,t.matrixParams)&&zD[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function XD(n,e,t){return ZD(n,e,e.segments,t)}function ZD(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!oa(i,t)||e.hasChildren()||!Pc(i,t,r))}if(n.segments.length===t.length){if(!oa(n.segments,t)||!Pc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!XD(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(oa(n.segments,i)&&Pc(n.segments,i,r)&&n.children[Rn])&&ZD(n.children[Rn],e,o,r)}}function Pc(n,e,t){return e.every((r,i)=>zD[t](n[i].parameters,r.parameters))}class aa{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=po(this.queryParams)),this._queryParamMap}toString(){return WF.serialize(this)}}class Pn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Cr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bc(this)}}class Al{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=po(this.parameters)),this._parameterMap}toString(){return nC(this)}}function oa(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class qD{}class JD{parse(e){const t=new JF(e);return new aa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Il(e.root,!0)}`,r=function zF(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${wc(t)}=${wc(i)}`).join("&"):`${wc(t)}=${wc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function GF(n){return encodeURI(n)}(e.fragment)}`:""}`}}const WF=new JD;function bc(n){return n.segments.map(e=>nC(e)).join("/")}function Il(n,e){if(!n.hasChildren())return bc(n);if(e){const t=n.children[Rn]?Il(n.children[Rn],!1):"",r=[];return Cr(n.children,(i,o)=>{o!==Rn&&r.push(`${o}:${Il(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function KF(n,e){let t=[];return Cr(n.children,(r,i)=>{i===Rn&&(t=t.concat(e(r,i)))}),Cr(n.children,(r,i)=>{i!==Rn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Rn?[Il(n.children[Rn],!1)]:[`${i}:${Il(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rn]?`${bc(n)}/${t[0]}`:`${bc(n)}/(${t.join("//")})`}}function eC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wc(n){return eC(n).replace(/%3B/gi,";")}function ep(n){return eC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nc(n){return decodeURIComponent(n)}function tC(n){return Nc(n.replace(/\+/g,"%20"))}function nC(n){return`${ep(n.path)}${function YF(n){return Object.keys(n).map(e=>`;${ep(e)}=${ep(n[e])}`).join("")}(n.parameters)}`}const $F=/^[^\/()?;=#]+/;function Lc(n){const e=n.match($F);return e?e[0]:""}const QF=/^[^=?&#]+/,ZF=/^[^&#]+/;class JF{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pn([],{}):new Pn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rn]=new Pn(e,t)),r}parseSegment(){const e=Lc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new At(4009,!1);return this.capture(e),new Al(Nc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Lc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Lc(this.remaining);i&&(r=i,this.capture(r))}e[Nc(t)]=Nc(r)}parseQueryParam(e){const t=function XF(n){const e=n.match(QF);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function qF(n){const e=n.match(ZF);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=tC(t),o=tC(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new At(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Rn);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[Rn]:new Pn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new At(4011,!1)}}class rC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=tp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=tp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=np(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return np(e,this._root).map(t=>t.value)}}function tp(n,e){if(n===e.value)return e;for(const t of e.children){const r=tp(n,t);if(r)return r}return null}function np(n,e){if(n===e.value)return[e];for(const t of e.children){const r=np(n,t);if(r.length)return r.unshift(e),r}return[]}class ds{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function mo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class iC extends rC{constructor(e,t){super(e),this.snapshot=t,rp(this,e)}toString(){return this.snapshot.toString()}}function sC(n,e){const t=function ex(n,e){const l=new Fc([],{},{},"",{},Rn,e,null,n.root,-1,{});return new oC("",new ds(l,[]))}(n,e),r=new di([new Al("",{})]),i=new di({}),o=new di({}),l=new di({}),c=new di(""),T=new vo(r,i,l,c,o,Rn,e,t.root);return T.snapshot=t.root,new iC(new ds(T,[]),t)}class vo{constructor(e,t,r,i,o,l,c,T){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=c,this._futureSnapshot=T}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(se(e=>po(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(se(e=>po(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function aC(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function tx(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Fc{constructor(e,t,r,i,o,l,c,T,j,q,he,Re){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=c,this.routeConfig=T,this._urlSegment=j,this._lastPathIndex=q,this._correctedLastPathIndex=Re??q,this._resolve=he}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=po(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=po(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class oC extends rC{constructor(e,t){super(t),this.url=e,rp(this,t)}toString(){return lC(this._root)}}function rp(n,e){e.value._routerState=n,e.children.forEach(t=>rp(n,t))}function lC(n){const e=n.children.length>0?` { ${n.children.map(lC).join(", ")} } `:"";return`${n.value}${e}`}function ip(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),zi(e.params,t.params)||n.params.next(t.params),function BF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),zi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function sp(n,e){const t=zi(n.params,e.params)&&function VF(n,e){return oa(n,e)&&n.every((t,r)=>zi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||sp(n.parent,e.parent))}function Rl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function rx(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Rl(n,r,i);return Rl(n,r)})}(n,e,t);return new ds(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(c=>Rl(n,c)),l}}const r=function ix(n){return new vo(new di(n.url),new di(n.params),new di(n.queryParams),new di(n.fragment),new di(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Rl(n,o));return new ds(r,i)}}function xc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ol(n){return"object"==typeof n&&null!=n&&n.outlets}function op(n,e,t,r,i){let o={};if(r&&Cr(r,(c,T)=>{o[T]=Array.isArray(c)?c.map(j=>`${j}`):`${c}`}),n===e)return new aa(t,o,i);const l=uC(n,e,t);return new aa(l,o,i)}function uC(n,e,t){const r={};return Cr(n.children,(i,o)=>{r[o]=i===e?t:uC(i,e,t)}),new Pn(n.segments,r)}class cC{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xc(r[0]))throw new At(4003,false);const i=r.find(Ol);if(i&&i!==YD(r))throw new At(4004,false)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function fC(n,e,t){if(n||(n=new Pn([],{})),0===n.segments.length&&n.hasChildren())return Bc(n,e,t);const r=function cx(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],c=t[r];if(Ol(c))break;const T=`${c}`,j=r<t.length-1?t[r+1]:null;if(i>0&&void 0===T)break;if(T&&j&&"object"==typeof j&&void 0===j.outlets){if(!hC(T,j,l))return o;r+=2}else{if(!hC(T,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Pn(n.segments.slice(0,r.pathIndex),{});return o.children[Rn]=new Pn(n.segments.slice(r.pathIndex),n.children),Bc(o,0,i)}return r.match&&0===i.length?new Pn(n.segments,{}):r.match&&!n.hasChildren()?up(n,e,t):r.match?Bc(n,0,i):up(n,e,t)}function Bc(n,e,t){if(0===t.length)return new Pn(n.segments,{});{const r=function ux(n){return Ol(n[0])?n[0].outlets:{[Rn]:n}}(t),i={};return Cr(r,(o,l)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[l]=fC(n.children[l],e,o))}),Cr(n.children,(o,l)=>{void 0===r[l]&&(i[l]=o)}),new Pn(n.segments,i)}}function up(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Ol(o)){const T=fx(o.outlets);return new Pn(r,T)}if(0===i&&xc(t[0])){r.push(new Al(n.segments[e].path,dC(t[0]))),i++;continue}const l=Ol(o)?o.outlets[Rn]:`${o}`,c=i<t.length-1?t[i+1]:null;l&&c&&xc(c)?(r.push(new Al(l,dC(c))),i+=2):(r.push(new Al(l,{})),i++)}return new Pn(r,{})}function fx(n){const e={};return Cr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=up(new Pn([],{}),0,t))}),e}function dC(n){const e={};return Cr(n,(t,r)=>e[r]=`${t}`),e}function hC(n,e,t){return n==t.path&&zi(e,t.parameters)}class dx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Pl,this.attachRef=null}}class Pl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new dx,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const Uc=!1;let cp=(()=>{class n{constructor(t,r,i,o,l){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new dr,this.deactivateEvents=new dr,this.attachEvents=new dr,this.detachEvents=new dr,this.name=i||Rn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new At(4012,Uc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new At(4012,Uc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new At(4012,Uc);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new At(4013,Uc);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,T=new hx(t,c,i.injector);if(r&&function gx(n){return!!n.resolveComponentFactory}(r)){const j=r.resolveComponentFactory(l);this.activated=i.createComponent(j,i.length,T)}else this.activated=i.createComponent(l,{index:i.length,injector:T,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(kt(Pl),kt(Pi),Oa("name"),kt(El),kt($s))},n.\u0275dir=nr({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class hx{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vo?this.route:e===Pl?this.childContexts:this.parent.get(e,t)}}let gC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Yr({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&is(0,"router-outlet")},dependencies:[cp],encapsulation:2}),n})();function pC(n,e){return n.providers&&!n._injector&&(n._injector=Xu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function dp(n){const e=n.children&&n.children.map(dp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rn&&(t.component=gC),t}function hi(n){return n.outlet||Rn}function mC(n,e){const t=n.filter(r=>hi(r)===e);return t.push(...n.filter(r=>hi(r)!==e)),t}function vC(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class _x{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ip(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=mo(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),Cr(i,(o,l)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=mo(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=mo(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=mo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new wF(o.value.snapshot))}),e.children.length&&this.forwardEvent(new PF(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(ip(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(c.contexts),l.attachRef=c.componentRef,l.route=c.route.value,l.outlet&&l.outlet.attach(c.componentRef,c.route.value),ip(c.route.value),this.activateChildRoutes(e,null,l.children)}else{const c=vC(i.snapshot),T=c?.get(ul)??null;l.attachRef=null,l.route=i,l.resolver=T,l.injector=c,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}function jc(n){return"function"==typeof n}function la(n){return n instanceof aa}const bl=Symbol("INITIAL_VALUE");function wl(){return ra(n=>Gg(n.map(e=>e.pipe(ht(1),Ic(bl)))).pipe(jD((e,t)=>{let r=!1;return t.reduce((i,o,l)=>i!==bl?i:(o===bl&&(r=!0),r||!1!==o&&l!==t.length-1&&!la(o)?i:o),e)},bl),Dr(e=>e!==bl),se(e=>la(e)?e:!0===e),ht(1)))}const EC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function kc(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...EC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||xF)(t,n,e);if(!i)return{...EC};const o={};Cr(i.posParams,(c,T)=>{o[T]=c.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Hc(n,e,t,r,i="corrected"){if(t.length>0&&function Ix(n,e,t){return t.some(r=>Vc(n,e,r)&&hi(r)!==Rn)}(n,t,r)){const l=new Pn(e,function Ax(n,e,t,r){const i={};i[Rn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&hi(o)!==Rn){const l=new Pn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[hi(o)]=l}return i}(n,e,r,new Pn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function Rx(n,e,t){return t.some(r=>Vc(n,e,r))}(n,t,r)){const l=new Pn(n.segments,function Sx(n,e,t,r,i,o){const l={};for(const c of r)if(Vc(n,t,c)&&!i[hi(c)]){const T=new Pn([],{});T._sourceSegment=n,T._segmentIndexShift="legacy"===o?n.segments.length:e.length,l[hi(c)]=T}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const o=new Pn(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Vc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function _C(n,e,t,r){return!!(hi(n)===r||r!==Rn&&Vc(e,t,n))&&("**"===n.path||kc(e,n,t).matched)}function yC(n,e,t){return 0===e.length&&!n.children[t]}const Kc=!1;class Wc{constructor(e){this.segmentGroup=e||null}}class TC{constructor(e){this.urlTree=e}}function Nl(n){return ho(new Wc(n))}function DC(n){return ho(new TC(n))}class wx{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=Hc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Pn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Rn).pipe(se(o=>this.createUrlTree(hp(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Os(o=>{if(o instanceof TC)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Wc?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Rn).pipe(se(i=>this.createUrlTree(hp(i),e.queryParams,e.fragment))).pipe(Os(i=>{throw i instanceof Wc?this.noMatchError(i):i}))}noMatchError(e){return new At(4002,Kc)}createUrlTree(e,t,r){const i=e.segments.length>0?new Pn([],{[Rn]:e}):e;return new aa(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(se(o=>new Pn([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return We(i).pipe(go(o=>{const l=r.children[o],c=mC(t,o);return this.expandSegmentGroup(e,c,l,o).pipe(se(T=>({segment:T,outlet:o})))}),jD((o,l)=>(o[l.outlet]=l.segment,o),{}),function TF(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Dr((i,o)=>n(i,o,r)):X,zg(1),t?$g(e):kD(()=>new Sl))}())}expandSegment(e,t,r,i,o,l){return We(r).pipe(go(c=>this.expandSegmentAgainstRoute(e,t,r,c,i,o,l).pipe(Os(j=>{if(j instanceof Wc)return dn(null);throw j}))),ia(c=>!!c),Os((c,T)=>{if(c instanceof Sl||"EmptyError"===c.name)return yC(t,i,o)?dn(new Pn([],{})):Nl(t);throw c}))}expandSegmentAgainstRoute(e,t,r,i,o,l,c){return _C(i,t,o,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,l):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l):Nl(t):Nl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?DC(o):this.lineralizeSegments(r,o).pipe(nt(l=>{const c=new Pn(l,{});return this.expandSegment(e,c,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:c,consumedSegments:T,remainingSegments:j,positionalParamSegments:q}=kc(t,i,o);if(!c)return Nl(t);const he=this.applyRedirectCommands(T,i.redirectTo,q);return i.redirectTo.startsWith("/")?DC(he):this.lineralizeSegments(i,he).pipe(nt(Re=>this.expandSegment(e,t,r,Re.concat(j),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){if("**"===r.path)return e=pC(r,e),r.loadChildren?(r._loadedRoutes?dn({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(se(he=>(r._loadedRoutes=he.routes,r._loadedInjector=he.injector,new Pn(i,{})))):dn(new Pn(i,{}));const{matched:l,consumedSegments:c,remainingSegments:T}=kc(t,r,i);return l?(e=pC(r,e),this.getChildConfig(e,r,i).pipe(nt(q=>{const he=q.injector??e,Re=q.routes,{segmentGroup:Ne,slicedSegments:Ve}=Hc(t,c,T,Re),qe=new Pn(Ne.segments,Ne.children);if(0===Ve.length&&qe.hasChildren())return this.expandChildren(he,Re,qe).pipe(se(vt=>new Pn(c,vt)));if(0===Re.length&&0===Ve.length)return dn(new Pn(c,{}));const mt=hi(r)===o;return this.expandSegment(he,qe,Re,Ve,mt?Rn:o,!0).pipe(se(xt=>new Pn(c.concat(xt.segments),xt.children)))}))):Nl(t)}getChildConfig(e,t,r){return t.children?dn({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?dn({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,r).pipe(nt(i=>i?this.configLoader.loadChildren(e,t).pipe(gr(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Px(n){return ho(qg(Kc))}())):dn({routes:[],injector:e})}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?dn(i.map(l=>{const c=e.get(l);return Ps(function Tx(n){return n&&jc(n.canLoad)}(c)?c.canLoad(t,r):c(t,r))})).pipe(wl(),gr(l=>{if(!la(l))return;const c=qg(Zg+this.urlSerializer.serialize(l));throw c.url=l,c}),se(l=>!0===l)):dn(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return dn(r);if(i.numberOfChildren>1||!i.children[Rn])return ho(new At(4e3,Kc));i=i.children[Rn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new aa(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Cr(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[o]=t[c]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return Cr(t.children,(c,T)=>{l[T]=this.createSegmentGroup(e,c,r,i)}),new Pn(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new At(4001,Kc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function hp(n){const e={};for(const r of Object.keys(n.children)){const o=hp(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Nx(n){if(1===n.numberOfChildren&&n.children[Rn]){const e=n.children[Rn];return new Pn(n.segments.concat(e.segments),e.children)}return n}(new Pn(n.segments,e))}class CC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Gc{constructor(e,t){this.component=e,this.route=t}}function Fx(n,e,t){const r=n._root;return Ll(r,e?e._root:null,t,[r.value])}function Yc(n,e,t){return(vC(e)??t).get(n)}function Ll(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=mo(e);return n.children.forEach(l=>{(function Bx(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const T=function Ux(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!oa(n.url,e.url);case"pathParamsOrQueryParamsChange":return!oa(n.url,e.url)||!zi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sp(n,e)||!zi(n.queryParams,e.queryParams);default:return!sp(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);T?i.canActivateChecks.push(new CC(r)):(o.data=l.data,o._resolvedData=l._resolvedData),Ll(n,e,o.component?c?c.children:null:t,r,i),T&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Gc(c.outlet.component,l))}else l&&Fl(e,c,i),i.canActivateChecks.push(new CC(r)),Ll(n,null,o.component?c?c.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),Cr(o,(l,c)=>Fl(l,t.getContext(c),i)),i}function Fl(n,e,t){const r=mo(n),i=n.value;Cr(r,(o,l)=>{Fl(o,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Gc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class zx{}function MC(n){return new ee(e=>e.error(n))}class Qx{constructor(e,t,r,i,o,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=l}recognize(){const e=Hc(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rn);if(null===t)return null;const r=new Fc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Rn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ds(r,t),o=new oC(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const t=e.value,r=aC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const o of Object.keys(t.children)){const l=t.children[o],c=mC(e,o),T=this.processSegmentGroup(c,l,o);if(null===T)return null;r.push(...T)}const i=SC(r);return function Xx(n){n.sort((e,t)=>e.value.outlet===Rn?-1:t.value.outlet===Rn?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const o of e){const l=this.processSegmentAgainstRoute(o,t,r,i);if(null!==l)return l}return yC(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!_C(e,t,r,i))return null;let o,l=[],c=[];if("**"===e.path){const Ne=r.length>0?YD(r).parameters:{},Ve=IC(t)+r.length;o=new Fc(r,Ne,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OC(e),hi(e),e.component??e._loadedComponent??null,e,AC(t),Ve,PC(e),Ve)}else{const Ne=kc(t,e,r);if(!Ne.matched)return null;l=Ne.consumedSegments,c=Ne.remainingSegments;const Ve=IC(t)+l.length;o=new Fc(l,Ne.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OC(e),hi(e),e.component??e._loadedComponent??null,e,AC(t),Ve,PC(e),Ve)}const T=function Zx(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:j,slicedSegments:q}=Hc(t,l,c,T.filter(Ne=>void 0===Ne.redirectTo),this.relativeLinkResolution);if(0===q.length&&j.hasChildren()){const Ne=this.processChildren(T,j);return null===Ne?null:[new ds(o,Ne)]}if(0===T.length&&0===q.length)return[new ds(o,[])];const he=hi(e)===i,Re=this.processSegment(T,j,q,he?Rn:i);return null===Re?null:[new ds(o,Re)]}}function qx(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function SC(n){const e=[],t=new Set;for(const r of n){if(!qx(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=SC(r.children);e.push(new ds(r.value,i))}return e.filter(r=>!t.has(r))}function AC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function IC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function OC(n){return n.data||{}}function PC(n){return n.resolve||{}}const pp=Symbol("RouteTitle");function bC(n){return"string"==typeof n.title||null===n.title}function mp(n){return ra(e=>{const t=n(e);return t?We(t).pipe(se(()=>e)):dn(e)})}class oB extends class aB{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const vp=new tn("ROUTES");let Ep=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return dn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ps(t.loadComponent()).pipe(gr(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Rc(()=>{this.componentLoaders.delete(t)})),i=new UD(r,()=>new me).pipe(Yg());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return dn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(se(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let T,j,q=!1;Array.isArray(c)?j=c:(T=c.create(t).injector,j=GD(T.get(vp,[],un.Self|un.Optional)));return{routes:j.map(dp),injector:T}}),Rc(()=>{this.childrenLoaders.delete(r)})),l=new UD(o,()=>new me).pipe(Yg());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ps(t()).pipe(nt(r=>r instanceof Ay||Array.isArray(r)?dn(r):We(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(St(Rr),St(og))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();class uB{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function cB(n){throw n}function fB(n,e,t){return e.parse("/")}const dB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pr=(()=>{class n{constructor(t,r,i,o,l,c,T){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=T,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new me,this.errorHandler=cB,this.malformedUriErrorHandler=fB,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>dn(void 0),this.urlHandlingStrategy=new uB,this.routeReuseStrategy=new oB,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Ep),this.configLoader.onLoadEndListener=Re=>this.triggerEvent(new RF(Re)),this.configLoader.onLoadStartListener=Re=>this.triggerEvent(new IF(Re)),this.ngModule=l.get(Ss),this.console=l.get(ag);const he=l.get(Bn);this.isNgZoneEnabled=he instanceof Bn&&Bn.isInAngularZone(),this.resetConfig(T),this.currentUrlTree=function UF(){return new aa(new Pn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=sC(this.currentUrlTree,this.rootComponentType),this.transitions=new di({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Dr(i=>0!==i.id),se(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ra(i=>{let o=!1,l=!1;return dn(i).pipe(gr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ra(c=>{const T=this.browserUrlTree.toString(),j=!this.navigated||c.extractedUrl.toString()!==T||T!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||j)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return LC(c.source)&&(this.browserUrlTree=c.extractedUrl),dn(c).pipe(ra(he=>{const Re=this.transitions.getValue();return r.next(new Xg(he.id,this.serializeUrl(he.extractedUrl),he.source,he.restoredState)),Re!==this.transitions.getValue()?Mt:Promise.resolve(he)}),function Lx(n,e,t,r){return ra(i=>function bx(n,e,t,r,i){return new wx(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(se(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),gr(he=>{this.currentNavigation={...this.currentNavigation,finalUrl:he.urlAfterRedirects}}),function Jx(n,e,t,r,i){return nt(o=>function $x(n,e,t,r,i="emptyOnly",o="legacy"){try{const l=new Qx(n,e,t,r,i,o).recognize();return null===l?MC(new zx):dn(l)}catch(l){return MC(l)}}(n,e,o.urlAfterRedirects,t(o.urlAfterRedirects),r,i).pipe(se(l=>({...o,targetSnapshot:l}))))}(this.rootComponentType,this.config,he=>this.serializeUrl(he),this.paramsInheritanceStrategy,this.relativeLinkResolution),gr(he=>{if("eager"===this.urlUpdateStrategy){if(!he.extras.skipLocationChange){const Ne=this.urlHandlingStrategy.merge(he.urlAfterRedirects,he.rawUrl);this.setBrowserUrl(Ne,he)}this.browserUrlTree=he.urlAfterRedirects}const Re=new DF(he.id,this.serializeUrl(he.extractedUrl),this.serializeUrl(he.urlAfterRedirects),he.targetSnapshot);r.next(Re)}));if(j&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Re,extractedUrl:Ne,source:Ve,restoredState:qe,extras:mt}=c,gt=new Xg(Re,this.serializeUrl(Ne),Ve,qe);r.next(gt);const xt=sC(Ne,this.rootComponentType).snapshot;return dn({...c,targetSnapshot:xt,urlAfterRedirects:Ne,extras:{...mt,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=c.rawUrl,c.resolve(null),Mt}),gr(c=>{const T=new CF(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(T)}),se(c=>({...c,guards:Fx(c.targetSnapshot,c.currentSnapshot,this.rootContexts)})),function jx(n,e){return nt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?dn({...t,guardsResult:!0}):function kx(n,e,t,r){return We(n).pipe(nt(i=>function Yx(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?dn(o.map(c=>{const T=Yc(c,e,i);return Ps(function Mx(n){return n&&jc(n.canDeactivate)}(T)?T.canDeactivate(n,e,t,r):T(n,e,t,r)).pipe(ia())})).pipe(wl()):dn(!0)}(i.component,i.route,t,e,r)),ia(i=>!0!==i,!0))}(l,r,i,n).pipe(nt(c=>c&&function yx(n){return"boolean"==typeof n}(c)?function Hx(n,e,t,r){return We(e).pipe(go(i=>Ac(function Kx(n,e){return null!==n&&e&&e(new OF(n)),dn(!0)}(i.route.parent,r),function Vx(n,e){return null!==n&&e&&e(new bF(n)),dn(!0)}(i.route,r),function Gx(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function xx(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>BD(()=>dn(l.guards.map(T=>{const j=Yc(T,l.node,t);return Ps(function Cx(n){return n&&jc(n.canActivateChild)}(j)?j.canActivateChild(r,n):j(r,n)).pipe(ia())})).pipe(wl())));return dn(o).pipe(wl())}(n,i.path,t),function Wx(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dn(!0);const i=r.map(o=>BD(()=>{const l=Yc(o,e,t);return Ps(function Dx(n){return n&&jc(n.canActivate)}(l)?l.canActivate(e,n):l(e,n)).pipe(ia())}));return dn(i).pipe(wl())}(n,i.route,t))),ia(i=>!0!==i,!0))}(r,o,n,e):dn(c)),se(c=>({...t,guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),gr(c=>{if(la(c.guardsResult)){const j=qg(`Redirecting to "${this.serializeUrl(c.guardsResult)}"`);throw j.url=c.guardsResult,j}const T=new MF(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(T)}),Dr(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,""),!1)),mp(c=>{if(c.guards.canActivateChecks.length)return dn(c).pipe(gr(T=>{const j=new SF(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);this.triggerEvent(j)}),ra(T=>{let j=!1;return dn(T).pipe(function eB(n,e){return nt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dn(t);let o=0;return We(i).pipe(go(l=>function tB(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!bC(i)&&(o[pp]=i.title),function nB(n,e,t,r){const i=function rB(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return dn({});const o={};return We(i).pipe(nt(l=>function iB(n,e,t,r){const i=Yc(n,e,r);return Ps(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe(ia(),gr(c=>{o[l]=c}))),zg(1),Qg(o),Os(l=>l instanceof Sl?Mt:ho(l)))}(o,n,e,r).pipe(se(l=>(n._resolvedData=l,n.data=aC(n,t).resolve,i&&bC(i)&&(n.data[pp]=i.title),null)))}(l.route,r,n,e)),gr(()=>o++),zg(1),nt(l=>o===i.length?dn(t):Mt))})}(this.paramsInheritanceStrategy,this.ngModule.injector),gr({next:()=>j=!0,complete:()=>{j||(this.restoreHistory(T),this.cancelNavigationTransition(T,"At least one route resolver didn't emit any value."))}}))}),gr(T=>{const j=new AF(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);this.triggerEvent(j)}))}),mp(c=>{const T=j=>{const q=[];j.routeConfig?.loadComponent&&!j.routeConfig._loadedComponent&&q.push(this.configLoader.loadComponent(j.routeConfig).pipe(gr(he=>{j.component=he}),se(()=>{})));for(const he of j.children)q.push(...T(he));return q};return Gg(T(c.targetSnapshot.root)).pipe($g(),ht(1))}),mp(()=>this.afterPreactivation()),se(c=>{const T=function nx(n,e,t){const r=Rl(n,e._root,t?t._root:void 0);return new iC(r,e)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return{...c,targetRouterState:T}}),gr(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>se(r=>(new _x(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),gr({next(){o=!0},complete(){o=!0}}),Rc(()=>{o||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Os(c=>{if(l=!0,function FF(n){return n&&n[KD]}(c)){const T=la(c.url);T||(this.navigated=!0,this.restoreHistory(i,!0));const j=new Oc(i.id,this.serializeUrl(i.extractedUrl),c.message);if(r.next(j),T){const q=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),he={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||LC(i.source)};this.scheduleNavigation(q,"imperative",null,he,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const T=new HD(i.id,this.serializeUrl(i.extractedUrl),c);r.next(T);try{i.resolve(this.errorHandler(c))}catch(j){i.reject(j)}}return Mt}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(dp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:c,preserveFragment:T}=r,j=i||this.routerState.root,q=T?this.currentUrlTree.fragment:l;let he=null;switch(c){case"merge":he={...this.currentUrlTree.queryParams,...o};break;case"preserve":he=this.currentUrlTree.queryParams;break;default:he=o||null}return null!==he&&(he=this.removeEmptyProps(he)),function sx(n,e,t,r,i){if(0===t.length)return op(e.root,e.root,e.root,r,i);const o=function ax(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cC(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const c={};return Cr(o.outlets,(T,j)=>{c[j]="string"==typeof T?T.split("/"):T}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((c,T)=>{0==T&&"."===c||(0==T&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,o]},[]);return new cC(t,e,r)}(t);return o.toRoot()?op(e.root,e.root,new Pn([],{}),r,i):function l(T){const j=function ox(n,e,t,r){return n.isAbsolute?new lp(e.root,!0,0):-1===r?new lp(t,t===e.root,0):function lx(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new At(4005,!1);i=r.segments.length}return new lp(r,!1,i-o)}(t,r+(xc(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,T),q=j.processChildren?Bc(j.segmentGroup,j.index,o.commands):fC(j.segmentGroup,j.index,o.commands);return op(e.root,j.segmentGroup,q,r,i)}(n.snapshot?._lastPathIndex)}(j,this.currentUrlTree,t,he,q??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=la(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function gB(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new At(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...dB}:!1===r?{...hB}:r,la(t))return $D(this.currentUrlTree,t,i);const o=this.parseUrl(t);return $D(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new sa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let c,T,j;l?(c=l.resolve,T=l.reject,j=l.promise):j=new Promise((Re,Ne)=>{c=Re,T=Ne});const q=++this.navigationId;let he;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),he=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):he=0,this.setTransition({id:q,targetPageId:he,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:c,reject:T,promise:j,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),j.catch(Re=>Promise.reject(Re))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Oc(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){Xd()},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();function LC(n){return"imperative"!==n}class FC{buildTitle(e){let t,r=e.root;for(;void 0!==r;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(i=>i.outlet===Rn);return t}getResolvedTitleForRoute(e){return e.data[pp]}}let vB=(()=>{class n extends FC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(St(RD))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class xC{}let BC=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Dr(t=>t instanceof sa),go(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=Xu(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,c=o._loadedInjector??l;o.loadChildren&&!o._loadedRoutes||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(l,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return We(i).pipe(Ot())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):dn(null);const o=i.pipe(nt(l=>null===l?dn(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));return r.loadComponent&&!r._loadedComponent?We([o,this.loader.loadComponent(r)]).pipe(Ot()):o})}}return n.\u0275fac=function(t){return new(t||n)(St(Pr),St(og),St($s),St(xC),St(Ep))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();const UC=new tn("");let EB=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof sa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof VD&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new VD(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Xd()},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();const Tp=new tn("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),jC=new tn("ROUTER_FORROOT_GUARD"),kC=new tn(""),_B=[Tg,{provide:qD,useClass:JD},{provide:Pr,useFactory:function SB(n,e,t,r,i,o,l={},c,T,j,q){const he=new Pr(null,n,e,t,r,i,GD(o));return j&&(he.urlHandlingStrategy=j),q&&(he.routeReuseStrategy=q),he.titleStrategy=T??c,function AB(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,he),he},deps:[qD,Pl,Tg,Rr,og,vp,Tp,vB,[FC,new li],[class lB{},new li],[class sB{},new li]]},Pl,{provide:vo,useFactory:function IB(n){return n.routerState.root},deps:[Pr]},Ep];function yB(){return new DT("Router",Pr)}let zc=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[_B,[],HC(t),{provide:jC,useFactory:MB,deps:[[Pr,new li,new Fa]]},{provide:Tp,useValue:r||{}},r?.useHash?{provide:na,useClass:iN}:{provide:na,useClass:YT},{provide:UC,useFactory:()=>{const n=Mi(Pr),e=Mi(ML),t=Mi(Tp);return t.scrollOffset&&e.setOffset(t.scrollOffset),new EB(n,e,t)}},r?.preloadingStrategy?LB(r.preloadingStrategy):[],{provide:DT,multi:!0,useFactory:yB},r?.initialNavigation?OB(r):[],[{provide:VC,useFactory:RB},{provide:pT,multi:!0,useExisting:VC}]]}}static forChild(t){return{ngModule:n,providers:[HC(t)]}}}return n.\u0275fac=function(t){return new(t||n)(St(jC,8),St(Pr,8))},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({}),n})();function MB(n){return"guarded"}function HC(n){return[{provide:AA,multi:!0,useValue:n},{provide:vp,multi:!0,useValue:n}]}function RB(){const n=Mi(Rr);return e=>{const t=n.get(vl);if(e!==t.components[0])return;const r=n.get(Pr),i=n.get(KC);null===n.get(Dp,null,un.Optional)&&r.initialNavigation(),n.get(kC,null,un.Optional)?.setUpPreloading(),n.get(UC,null,un.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const VC=new tn("");function OB(n){return["disabled"===n.initialNavigation?[{provide:tc,multi:!0,useFactory:()=>{const n=Mi(Pr);return()=>{n.setUpLocationChangeListener()}}},{provide:Dp,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:Dp,useValue:"enabledBlocking"},{provide:tc,multi:!0,deps:[Rr],useFactory:n=>{const e=n.get(tN,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const o=n.get(Pr),l=n.get(KC);(function r(i){const o=n.get(Pr);o.events.pipe(Dr(l=>l instanceof sa||l instanceof Oc||l instanceof HD),se(l=>{if(l instanceof sa)return!0;const c=o.navigationId!==l.id,T=l instanceof Oc&&-1!==l.reason.indexOf(Zg);return!(!c&&!T)&&null}),Dr(l=>null!==l),ht(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),o.afterPreactivation=()=>(i(!0),t||l.closed?dn(void 0):l),o.initialNavigation()}))}}]:[]]}const KC=new tn("",{factory:()=>new me}),Dp=new tn("");function LB(n){return[BC,{provide:kC,useExisting:BC},{provide:xC,useExisting:n}]}const FB=[{path:"",redirectTo:"/reddit",pathMatch:"full"}];let Cp,xB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({imports:[zc.forRoot(FB),zc]}),n})();try{Cp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Cp=!1}let xl,$c,ua,Sp,gs=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function CL(n){return n===cD}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Cp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(St(rc))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Mp(n){return function BB(){if(null==xl&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>xl=!0}))}finally{xl=xl||!1}return xl}()?n:!!n.capture}function Bl(){if("object"!=typeof document||!document)return 0;if(null==$c){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),$c=0,0===n.scrollLeft&&(n.scrollLeft=1,$c=0===n.scrollLeft?1:2),n.remove()}return $c}function Ul(n){return n.composedPath?n.composedPath()[0]:n.target}function GC(n){return Dr((e,t)=>n<=t)}function YC(n,e=X){return n=n??QB,fe((t,r)=>{let i,o=!0;t.subscribe(ce(r,l=>{const c=e(l);(o||!n(i,c))&&(o=!1,i=c,r.next(l))}))})}function QB(n,e){return n===e}function gi(n){return fe((e,t)=>{Ze(n).subscribe(ce(t,()=>t.complete(),F)),!t.closed&&e.subscribe(t)})}function _o(n){return null!=n&&"false"!=`${n}`}function zC(n){return Array.isArray(n)?n:[n]}function Qc(n){return n instanceof xr?n.nativeElement:n}class ZB extends y{constructor(e,t){super()}schedule(e,t=0){return this}}const Xc={setInterval(n,e,...t){const{delegate:r}=Xc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Xc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class Ap extends ZB{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return Xc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;Xc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,M(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const $C={now:()=>($C.delegate||Date).now(),delegate:void 0};class jl{constructor(e,t=jl.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}jl.now=$C.now;class Ip extends jl{constructor(e,t=jl.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Rp=new Ip(Ap),qB=Rp;function QC(n,e=Rp){return fe((t,r)=>{let i=null,o=null,l=null;const c=()=>{if(i){i.unsubscribe(),i=null;const j=o;o=null,r.next(j)}};function T(){const j=l+n,q=e.now();if(q<j)return i=this.schedule(void 0,j-q),void r.add(i);c()}t.subscribe(ce(r,j=>{o=j,l=e.now(),i||(i=e.schedule(T,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{o=i=null}))})}const XC=new Set;let yo,JB=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):tU}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function eU(n){if(!XC.has(n))try{yo||(yo=document.createElement("style"),yo.setAttribute("type","text/css"),document.head.appendChild(yo)),yo.sheet&&(yo.sheet.insertRule(`@media ${n} {body{ }}`,0),XC.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(St(gs))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tU(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let nU=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new me}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return ZC(zC(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=Gg(ZC(zC(t)).map(l=>this._registerQuery(l).observable));return o=Ac(o.pipe(ht(1)),o.pipe(GC(1),QC(0))),o.pipe(se(l=>{const c={matches:!1,breakpoints:{}};return l.forEach(({matches:T,query:j})=>{c.matches=c.matches||T,c.breakpoints[j]=T}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new ee(l=>{const c=T=>this._zone.run(()=>l.next(T));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(Ic(r),se(({matches:l})=>({query:t,matches:l})),gi(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(St(JB),St(Bn))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ZC(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let eM=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function aU(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function sU(n){try{return n.frameElement}catch{return null}}(function gU(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===nM(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=nM(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function dU(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function hU(n){return!function lU(n){return function cU(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function oU(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function uU(n){return function fU(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||tM(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(St(gs))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tM(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function nM(n){if(!tM(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class pU{constructor(e,t,r,i,o=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(ht(1)).subscribe(e)}}let mU=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new pU(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(St(eM),St(Bn),St(Nn))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _U=new tn("cdk-input-modality-detector-options"),yU={ignoreKeys:[18,17,224,91,16]},To=Mp({passive:!0,capture:!0});let TU=(()=>{class n{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new di(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(c=>c===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ul(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function vU(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(l)?"keyboard":"mouse"),this._mostRecentTarget=Ul(l))},this._onTouchstart=l=>{!function EU(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(l)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ul(l)):this._modality.next("keyboard")},this._options={...yU,...o},this.modalityDetected=this._modality.pipe(GC(1)),this.modalityChanged=this.modalityDetected.pipe(YC()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,To),i.addEventListener("mousedown",this._onMousedown,To),i.addEventListener("touchstart",this._onTouchstart,To)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,To),document.removeEventListener("mousedown",this._onMousedown,To),document.removeEventListener("touchstart",this._onTouchstart,To))}}return n.\u0275fac=function(t){return new(t||n)(St(gs),St(Bn),St(Nn),St(_U,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CU=new tn("cdk-focus-monitor-default-options"),Zc=Mp({passive:!0,capture:!0});let MU=(()=>{class n{constructor(t,r,i,o,l){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new me,this._rootNodeFocusAndBlurListener=c=>{const T=Ul(c),j="focus"===c.type?this._onFocus:this._onBlur;for(let q=T;q;q=q.parentElement)j.call(this,c,q)},this._document=o,this._detectionMode=l?.detectionMode||0}monitor(t,r=!1){const i=Qc(t);if(!this._platform.isBrowser||1!==i.nodeType)return dn(null);const o=function kB(n){if(function jB(){if(null==Sp){const n=typeof document<"u"?document.head:null;Sp=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Sp}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),l=this._elementInfo.get(i);if(l)return r&&(l.checkChildren=!0),l.subject;const c={checkChildren:r,subject:new me,rootNode:o};return this._elementInfo.set(i,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){const r=Qc(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=Qc(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([c,T])=>this._originChanged(c,r,T)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=Ul(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Zc),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Zc)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(gi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Zc),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Zc),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(St(Bn),St(gs),St(TU),St(Nn,8),St(CU,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const iM="cdk-high-contrast-black-on-white",sM="cdk-high-contrast-white-on-black",Op="cdk-high-contrast-active";let SU=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Mi(nU).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Op,iM,sM),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(Op,iM):2===r&&t.add(Op,sM)}}}return n.\u0275fac=function(t){return new(t||n)(St(gs),St(Nn))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AU=new tn("cdk-dir-doc",{providedIn:"root",factory:function IU(){return Mi(Nn)}}),RU=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let aM=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new dr,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function OU(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?RU.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(St(AU,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({}),n})();const bU=new tn("mat-sanity-checks",{providedIn:"root",factory:function PU(){return!0}});let Do=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function HB(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(St(SU),St(bU,8),St(Nn))},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({imports:[oM,oM]}),n})();function cM(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}const xU=["*",[["mat-toolbar-row"]]],BU=["*","mat-toolbar-row"],UU=cM(class{constructor(n){this._elementRef=n}});let jU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=nr({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),kU=(()=>{class n extends UU{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(kt(xr),kt(gs),kt(Nn))},n.\u0275cmp=Yr({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&oo(i,jU,5),2&t){let o;Wi(o=Gi())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&qs("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[el],ngContentSelectors:BU,decls:2,vars:0,template:function(t,r){1&t&&(eo(xU),as(0),as(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),HU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({imports:[Do,Do]}),n})();class gM{}class pM{}class ps{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(l):this.headers.set(o,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ps?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ps;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ps?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let l=this.headers.get(t);if(!l)return;l=l.filter(c=>-1===o.indexOf(c)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class KU{encodeKey(e){return mM(e)}encodeValue(e){return mM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const GU=/%(\d[a-f0-9])/gi,YU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mM(n){return encodeURIComponent(n).replace(GU,(e,t)=>YU[t]??e)}function qc(n){return`${n}`}class bs{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new KU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function WU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[l,c]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],T=t.get(l)||[];T.push(c),t.set(l,T)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(qc):[qc(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new bs({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(qc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(qc(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class zU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function vM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function EM(n){return typeof Blob<"u"&&n instanceof Blob}function _M(n){return typeof FormData<"u"&&n instanceof FormData}class Hl{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function $U(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new ps),this.context||(this.context=new zU),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const c=t.indexOf("?");this.urlWithParams=t+(-1===c?"?":c<t.length-1?"&":"")+l}}else this.params=new bs,this.urlWithParams=t}serializeBody(){return null===this.body?null:vM(this.body)||EM(this.body)||_M(this.body)||function QU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof bs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_M(this.body)?null:EM(this.body)?this.body.type||null:vM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof bs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,c=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let T=e.headers||this.headers,j=e.params||this.params;const q=e.context??this.context;return void 0!==e.setHeaders&&(T=Object.keys(e.setHeaders).reduce((he,Re)=>he.set(Re,e.setHeaders[Re]),T)),e.setParams&&(j=Object.keys(e.setParams).reduce((he,Re)=>he.set(Re,e.setParams[Re]),j)),new Hl(t,r,o,{params:j,headers:T,context:q,reportProgress:c,responseType:i,withCredentials:l})}}var ar=(()=>((ar=ar||{})[ar.Sent=0]="Sent",ar[ar.UploadProgress=1]="UploadProgress",ar[ar.ResponseHeader=2]="ResponseHeader",ar[ar.DownloadProgress=3]="DownloadProgress",ar[ar.Response=4]="Response",ar[ar.User=5]="User",ar))();class bp{constructor(e,t=200,r="OK"){this.headers=e.headers||new ps,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wp extends bp{constructor(e={}){super(e),this.type=ar.ResponseHeader}clone(e={}){return new wp({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Jc extends bp{constructor(e={}){super(e),this.type=ar.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Jc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class yM extends bp{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Np(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ef=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Hl)o=t;else{let T,j;T=i.headers instanceof ps?i.headers:new ps(i.headers),i.params&&(j=i.params instanceof bs?i.params:new bs({fromObject:i.params})),o=new Hl(t,r,void 0!==i.body?i.body:null,{headers:T,context:i.context,params:j,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=dn(o).pipe(go(T=>this.handler.handle(T)));if(t instanceof Hl||"events"===i.observe)return l;const c=l.pipe(Dr(T=>T instanceof Jc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(se(T=>{if(null!==T.body&&!(T.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return T.body}));case"blob":return c.pipe(se(T=>{if(null!==T.body&&!(T.body instanceof Blob))throw new Error("Response is not a Blob.");return T.body}));case"text":return c.pipe(se(T=>{if(null!==T.body&&"string"!=typeof T.body)throw new Error("Response is not a string.");return T.body}));default:return c.pipe(se(T=>T.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new bs).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Np(i,r))}post(t,r,i={}){return this.request("POST",t,Np(i,r))}put(t,r,i={}){return this.request("PUT",t,Np(i,r))}}return n.\u0275fac=function(t){return new(t||n)(St(gM))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();class TM{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const DM=new tn("HTTP_INTERCEPTORS");let XU=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();const ZU=/^\)\]\}',?\n/;let CM=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ee(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((Ne,Ve)=>i.setRequestHeader(Ne,Ve.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Ne=t.detectContentTypeHeader();null!==Ne&&i.setRequestHeader("Content-Type",Ne)}if(t.responseType){const Ne=t.responseType.toLowerCase();i.responseType="json"!==Ne?Ne:"text"}const o=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const Ne=i.statusText||"OK",Ve=new ps(i.getAllResponseHeaders()),qe=function qU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new wp({headers:Ve,status:i.status,statusText:Ne,url:qe}),l},T=()=>{let{headers:Ne,status:Ve,statusText:qe,url:mt}=c(),gt=null;204!==Ve&&(gt=typeof i.response>"u"?i.responseText:i.response),0===Ve&&(Ve=gt?200:0);let xt=Ve>=200&&Ve<300;if("json"===t.responseType&&"string"==typeof gt){const vt=gt;gt=gt.replace(ZU,"");try{gt=""!==gt?JSON.parse(gt):null}catch(Gt){gt=vt,xt&&(xt=!1,gt={error:Gt,text:gt})}}xt?(r.next(new Jc({body:gt,headers:Ne,status:Ve,statusText:qe,url:mt||void 0})),r.complete()):r.error(new yM({error:gt,headers:Ne,status:Ve,statusText:qe,url:mt||void 0}))},j=Ne=>{const{url:Ve}=c(),qe=new yM({error:Ne,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Ve||void 0});r.error(qe)};let q=!1;const he=Ne=>{q||(r.next(c()),q=!0);let Ve={type:ar.DownloadProgress,loaded:Ne.loaded};Ne.lengthComputable&&(Ve.total=Ne.total),"text"===t.responseType&&!!i.responseText&&(Ve.partialText=i.responseText),r.next(Ve)},Re=Ne=>{let Ve={type:ar.UploadProgress,loaded:Ne.loaded};Ne.lengthComputable&&(Ve.total=Ne.total),r.next(Ve)};return i.addEventListener("load",T),i.addEventListener("error",j),i.addEventListener("timeout",j),i.addEventListener("abort",j),t.reportProgress&&(i.addEventListener("progress",he),null!==o&&i.upload&&i.upload.addEventListener("progress",Re)),i.send(o),r.next({type:ar.Sent}),()=>{i.removeEventListener("error",j),i.removeEventListener("abort",j),i.removeEventListener("load",T),i.removeEventListener("timeout",j),t.reportProgress&&(i.removeEventListener("progress",he),null!==o&&i.upload&&i.upload.removeEventListener("progress",Re)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(St(dD))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();const Lp=new tn("XSRF_COOKIE_NAME"),Fp=new tn("XSRF_HEADER_NAME");class MM{}let JU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=nD(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(St(Nn),St(rc),St(Lp))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),xp=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const o=this.tokenService.getToken();return null!==o&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,o)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(St(MM),St(Fp))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),e1=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(DM,[]);this.chain=r.reduceRight((i,o)=>new TM(i,o),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(St(pM),St(Rr))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),t1=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:xp,useClass:XU}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Lp,useValue:t.cookieName}:[],t.headerName?{provide:Fp,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({providers:[xp,{provide:DM,useExisting:xp,multi:!0},{provide:MM,useClass:JU},{provide:Lp,useValue:"XSRF-TOKEN"},{provide:Fp,useValue:"X-XSRF-TOKEN"}]}),n})(),n1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({providers:[ef,{provide:gM,useClass:e1},CM,{provide:pM,useExisting:CM}],imports:[t1.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();const r1=["*"];let tf;function Vl(n){return function s1(){if(void 0===tf&&(tf=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(tf=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return tf}()?.createHTML(n)||n}function SM(n){return Error(`Unable to find icon with the name "${n}"`)}function AM(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function IM(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class ca{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let nf=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new ca(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const l=this._sanitizer.sanitize(Un.HTML,i);if(!l)throw IM(i);const c=Vl(l);return this._addSvgIconConfig(t,r,new ca("",c,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new ca(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(Un.HTML,r);if(!o)throw IM(r);const l=Vl(o);return this._addSvgIconSetConfig(t,new ca("",l,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Un.RESOURCE_URL,t);if(!r)throw AM(t);const i=this._cachedIconsByUrl.get(r);return i?dn(rf(i)):this._loadSvgIconFromConfig(new ca(t,null)).pipe(gr(o=>this._cachedIconsByUrl.set(r,o)),se(o=>rf(o)))}getNamedSvgIcon(t,r=""){const i=RM(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const l=this._iconSetConfigs.get(r);return l?this._getSvgFromIconSetConfigs(t,l):ho(SM(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?dn(rf(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(se(r=>rf(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?dn(i):function VU(...n){const e=Ae(n),{args:t,keys:r}=LD(n),i=new ee(o=>{const{length:l}=t;if(!l)return void o.complete();const c=new Array(l);let T=l,j=l;for(let q=0;q<l;q++){let he=!1;Ze(t[q]).subscribe(ce(o,Re=>{he||(he=!0,j--),c[q]=Re},()=>T--,void 0,()=>{(!T||!he)&&(j||o.next(r?FD(r,c):c),o.complete())}))}});return e?i.pipe(Wg(e)):i}(r.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(Os(c=>{const j=`Loading icon set URL: ${this._sanitizer.sanitize(Un.RESOURCE_URL,l.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(j)),dn(null)})))).pipe(se(()=>{const l=this._extractIconWithNameFromAnySet(t,r);if(!l)throw SM(t);return l}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(o),c=this._extractSvgIconFromSet(l,t,o.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(gr(r=>t.svgText=r),se(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?dn(null):this._fetchIcon(t).pipe(gr(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const l=o.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,i);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),i);const c=this._svgElementFromString(Vl("<svg></svg>"));return c.appendChild(l),this._setSvgAttributes(c,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Vl("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:l,value:c}=i[o];"id"!==l&&r.setAttribute(l,c)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function a1(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const l=this._sanitizer.sanitize(Un.RESOURCE_URL,r);if(!l)throw AM(r);const c=this._inProgressUrlFetches.get(l);if(c)return c;const T=this._httpClient.get(l,{responseType:"text",withCredentials:o}).pipe(se(j=>Vl(j)),Rc(()=>this._inProgressUrlFetches.delete(l)),Lt());return this._inProgressUrlFetches.set(l,T),T}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(RM(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return l1(o)?new ca(o.url,null,o.options):new ca(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(St(ef,8),St(Kg),St(Nn,8),St(Ji))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rf(n){return n.cloneNode(!0)}function RM(n,e){return n+":"+e}function l1(n){return!(!n.url||!n.options)}const u1=cM(class{constructor(n){this._elementRef=n}}),c1=new tn("MAT_ICON_DEFAULT_OPTIONS"),f1=new tn("mat-icon-location",{providedIn:"root",factory:function d1(){const n=Mi(Nn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),OM=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],h1=OM.map(n=>`[${n}]`).join(", "),g1=/^url\(['"]?#(.*?)['"]?\)$/;let p1=(()=>{class n extends u1{constructor(t,r,i,o,l,c){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=l,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=y.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=_o(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?[this._iconRegistry.classNameForFontAlias(this.fontSet)]:this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(l=>{o.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(h1),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)OM.forEach(l=>{const c=r[o],T=c.getAttribute(l),j=T?T.match(g1):null;if(j){let q=i.get(c);q||(q=[],i.set(c,q)),q.push({name:l,value:j[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(ht(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(kt(xr),kt(nf),Oa("aria-hidden"),kt(f1),kt(Ji),kt(c1,8))},n.\u0275cmp=Yr({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(rl("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),qs("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[el],ngContentSelectors:r1,decls:1,vars:0,template:function(t,r){1&t&&(eo(),as(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),m1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({imports:[Do,Do]}),n})();const v1=["addListener","removeListener"],E1=["addEventListener","removeEventListener"],_1=["on","off"];function Kl(n,e,t,r){if(u(t)&&(r=t,t=void 0),r)return Kl(n,e,t).pipe(Wg(r));const[i,o]=function D1(n){return u(n.addEventListener)&&u(n.removeEventListener)}(n)?E1.map(l=>c=>n[l](e,c,t)):function y1(n){return u(n.addListener)&&u(n.removeListener)}(n)?v1.map(PM(n,e)):function T1(n){return u(n.on)&&u(n.off)}(n)?_1.map(PM(n,e)):[];if(!i&&Dt(n))return nt(l=>Kl(l,e,t))(Ze(n));if(!i)throw new TypeError("Invalid event target");return new ee(l=>{const c=(...T)=>l.next(1<T.length?T:T[0]);return i(c),()=>o(c)})}function PM(n,e){return t=>r=>n[t](e,r)}const Wl={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Wl;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new y(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Wl;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Wl;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class M1 extends Ip{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class C1 extends Ap{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Wl.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Wl.cancelAnimationFrame(t),e._scheduled=void 0)}});let Bp,A1=1;const sf={};function bM(n){return n in sf&&(delete sf[n],!0)}const I1={setImmediate(n){const e=A1++;return sf[e]=!0,Bp||(Bp=Promise.resolve()),Bp.then(()=>bM(e)&&n()),e},clearImmediate(n){bM(n)}},{setImmediate:R1,clearImmediate:O1}=I1,af={setImmediate(...n){const{delegate:e}=af;return(e?.setImmediate||R1)(...n)},clearImmediate(n){const{delegate:e}=af;return(e?.clearImmediate||O1)(n)},delegate:void 0};new class b1 extends Ip{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class P1 extends Ap{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=af.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(af.clearImmediate(t),e._scheduled=void 0)}});function wM(n,e=Rp){return function N1(n){return fe((e,t)=>{let r=!1,i=null,o=null,l=!1;const c=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const j=i;i=null,t.next(j)}l&&t.complete()},T=()=>{o=null,l&&t.complete()};e.subscribe(ce(t,j=>{r=!0,i=j,o||Ze(n(j)).subscribe(o=ce(t,c,T))},()=>{l=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>function F1(n=0,e,t=qB){let r=-1;return null!=e&&(ct(e)?t=e:r=e),new ee(i=>{let o=function L1(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(n,e))}let NM=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new me,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new ee(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(wM(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):dn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Dr(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=Qc(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Kl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(St(Bn),St(gs),St(Nn,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Up=(()=>{class n{constructor(t,r,i,o){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=o,this._destroyed=new me,this._elementScrolled=new ee(l=>this.ngZone.runOutsideAngular(()=>Kl(this.elementRef.nativeElement,"scroll").pipe(gi(this._destroyed)).subscribe(l)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=Bl()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==Bl()?t.left=t.right:1==Bl()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;!function UB(){if(null==ua){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ua=!1,ua;if("scrollBehavior"in document.documentElement.style)ua=!0;else{const n=Element.prototype.scrollTo;ua=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ua}()?(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left)):r.scrollTo(t)}measureScrollOffset(t){const r="left",i="right",o=this.elementRef.nativeElement;if("top"==t)return o.scrollTop;if("bottom"==t)return o.scrollHeight-o.clientHeight-o.scrollTop;const l=this.dir&&"rtl"==this.dir.value;return"start"==t?t=l?i:r:"end"==t&&(t=l?r:i),l&&2==Bl()?t==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:l&&1==Bl()?t==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(kt(xr),kt(NM),kt(Bn),kt(aM,8))},n.\u0275dir=nr({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),U1=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new me,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(wM(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(St(gs),St(Bn),St(Nn,8))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({}),n})();class FM{}const ms="*";function k1(n,e){return{type:7,name:n,definitions:e,options:{}}}function xM(n,e=null){return{type:4,styles:e,timings:n}}function BM(n,e=null){return{type:2,steps:n,options:e}}function lf(n){return{type:6,styles:n,offset:null}}function UM(n,e,t){return{type:0,name:n,styles:e,options:t}}function jM(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function kM(n){Promise.resolve(null).then(n)}class Gl{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){kM(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class HM{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?kM(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==o&&this._onFinish()}),l.onDestroy(()=>{++r==o&&this._onDestroy()}),l.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((l,c)=>Math.max(l,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const VM=["*"],H1=["content"];function V1(n,e){if(1&n){const t=Ih();cr(0,"div",2),ss("click",function(){return Wf(t),Gf(Ja()._onBackdropClicked())}),Tr()}2&n&&qs("mat-drawer-shown",Ja()._isShowingBackdrop())}function K1(n,e){1&n&&(cr(0,"mat-drawer-content"),as(1,2),Tr())}const W1=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],G1=["mat-drawer","mat-drawer-content","*"],Y1={transformDrawer:k1("transform",[UM("open, open-instant",lf({transform:"none",visibility:"visible"})),UM("void",lf({"box-shadow":"none",visibility:"hidden"})),jM("void => open-instant",xM("0ms")),jM("void <=> open, open-instant => void",xM("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},z1=new tn("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function $1(){return!1}}),KM=new tn("MAT_DRAWER_CONTAINER");let uf=(()=>{class n extends Up{constructor(t,r,i,o,l){super(i,o,l),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(kt(El),kt(Ln(()=>GM)),kt(xr),kt(NM),kt(Bn))},n.\u0275cmp=Yr({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&bh("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[Hh([{provide:Up,useExisting:n}]),el],ngContentSelectors:VM,decls:1,vars:0,template:function(t,r){1&t&&(eo(),as(0))},encapsulation:2,changeDetection:0}),n})(),WM=(()=>{class n{constructor(t,r,i,o,l,c,T,j){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=o,this._ngZone=l,this._interactivityChecker=c,this._doc=T,this._container=j,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new me,this._animationEnd=new me,this._animationState="void",this.openedChange=new dr(!0),this._openedStream=this.openedChange.pipe(Dr(q=>q),se(()=>{})),this.openedStart=this._animationStarted.pipe(Dr(q=>q.fromState!==q.toState&&0===q.toState.indexOf("open")),Qg(void 0)),this._closedStream=this.openedChange.pipe(Dr(q=>!q),se(()=>{})),this.closedStart=this._animationStarted.pipe(Dr(q=>q.fromState!==q.toState&&"void"===q.toState),Qg(void 0)),this._destroyed=new me,this.onPositionChanged=new dr,this._modeChanged=new me,this.openedChange.subscribe(q=>{q?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Kl(this._elementRef.nativeElement,"keydown").pipe(Dr(q=>27===q.keyCode&&!this.disableClose&&!function $B(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(q)),gi(this._destroyed)).subscribe(q=>this._ngZone.run(()=>{this.close(),q.stopPropagation(),q.preventDefault()}))}),this._animationEnd.pipe(YC((q,he)=>q.fromState===he.fromState&&q.toState===he.toState)).subscribe(q=>{const{fromState:he,toState:Re}=q;(0===Re.indexOf("open")&&"void"===he||"void"===Re&&0===he.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=_o(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=_o(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(_o(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(ht(1)).subscribe(l=>o(l?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(kt(xr),kt(mU),kt(MU),kt(gs),kt(Bn),kt(eM),kt(Nn,8),kt(KM,8))},n.\u0275cmp=Yr({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&gl(H1,5),2&t){let i;Wi(i=Gi())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&Rh("@transform.start",function(o){return r._animationStarted.next(o)})("@transform.done",function(o){return r._animationEnd.next(o)}),2&t&&(rl("align",null),Lh("@transform",r._animationState),qs("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:VM,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(eo(),cr(0,"div",0,1),as(2),Tr())},dependencies:[Up],encapsulation:2,data:{animation:[Y1.transformDrawer]},changeDetection:0}),n})(),GM=(()=>{class n{constructor(t,r,i,o,l,c=!1,T){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=o,this._animationMode=T,this._drawers=new Zu,this.backdropClick=new dr,this._destroyed=new me,this._doCheckSubject=new me,this._contentMargins={left:null,right:null},this._contentMarginChanges=new me,t&&t.change.pipe(gi(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),l.change().pipe(gi(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=c}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=_o(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:_o(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Ic(this._allDrawers),gi(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Ic(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(QC(10),gi(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(Dr(r=>r.fromState!==r.toState),gi(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(gi(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(gi(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(ht(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(gi(ot(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(kt(aM,8),kt(xr),kt(Bn),kt(El),kt(U1),kt(z1),kt(sg,8))},n.\u0275cmp=Yr({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(oo(i,uf,5),oo(i,WM,5)),2&t){let o;Wi(o=Gi())&&(r._content=o.first),Wi(o=Gi())&&(r._allDrawers=o)}},viewQuery:function(t,r){if(1&t&&gl(uf,5),2&t){let i;Wi(i=Gi())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&qs("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Hh([{provide:KM,useExisting:n}])],ngContentSelectors:G1,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(eo(W1),Zs(0,V1,1,2,"div",0),as(1),as(2,1),Zs(3,K1,2,0,"mat-drawer-content",1)),2&t&&(Ii("ngIf",r.hasBackdrop),ts(3),Ii("ngIf",!r._content))},dependencies:[bg,uf],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),Q1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({imports:[yc,Do,LM,LM,Do]}),n})();const X1=["drawer"];let Z1=(()=>{class n{constructor(){this.title="sdLbog"}onSwipe(t){Math.abs(t.deltaX)>40&&(t.deltaX>0?this.sidenav.open():this.sidenav.close())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Yr({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(1&t&&gl(X1,5),2&t){let i;Wi(i=Gi())&&(r.sidenav=i.first)}},decls:20,vars:0,consts:[[1,"main-container",3,"swipe"],["mode","side",1,"main-sidenav"],["drawer",""],[1,"w-full","h-60","bg-red-400"],["color","primary"],["mat-icon-button","","aria-label","icon-button with menu icon",1,"menu",3,"click"],[1,"ml-5"],[1,"menu-spacer"],["mat-icon-button","","aria-label","icon-button with heart icon",1,"favorite-icon"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,""],[1,"p-2","w-full","h-full"]],template:function(t,r){if(1&t){const i=Ih();cr(0,"mat-drawer-container",0),ss("swipe",function(l){return r.onSwipe(l)}),cr(1,"mat-drawer",1,2),is(3,"div",3),Tr(),cr(4,"mat-drawer-content")(5,"mat-toolbar",4)(6,"button",5),ss("click",function(){return Wf(i),Gf(function s_(n){return function Ma(n,e){return n[e]}(function qS(){return En.lFrame.contextLView}(),22+n)}(2).toggle())}),cr(7,"mat-icon"),Js(8,"menu"),Tr()(),cr(9,"span",6),Js(10,"Meme"),Tr(),is(11,"span",7),cr(12,"button",8)(13,"mat-icon"),Js(14,"favorite"),Tr()(),cr(15,"button",9)(16,"mat-icon"),Js(17,"share"),Tr()()(),cr(18,"div",10),is(19,"router-outlet"),Tr()()()}},dependencies:[cp,kU,p1,WM,GM,uf],styles:[".menu-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0}.main-sidenav[_ngcontent-%COMP%]{min-width:20vw;width:25em;max-width:60vw}mat-drawer-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}"]}),n})(),q1=(()=>{class n{constructor(t){this.http=t}getJsonReddit(t="meme",r="hot",i){return this.http.get("https://www.reddit.com/r/"+t+"/"+r+".json?limit=20&after="+i)}}return n.\u0275fac=function(t){return new(t||n)(St(ef))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var J1=k(377);const ej=["videplayer"];let tj=(()=>{class n{constructor(){}ngOnInit(){}ngAfterViewInit(){if("dash"==this.item.formate){var t=this.item.url,r=J1.MediaPlayer().create();let i=document.getElementById(this.item.id)||this.input.nativeElement;r.initialize(i,t,!0)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Yr({type:n,selectors:[["app-video-player"]],viewQuery:function(t,r){if(1&t&&gl(ej,5),2&t){let i;Wi(i=Gi())&&(r.input=i.first)}},inputs:{item:"item"},decls:3,vars:3,consts:[["ngModel","","preload","auto","controls","",1,"video-player",3,"id"],["videplayer",""],[3,"src","type"]],template:function(t,r){1&t&&(cr(0,"video",0,1),is(2,"source",2),Tr()),2&t&&(Ii("id",r.item.id),ts(2),Ii("src",r.item.url,$o)("type",r.item.formateType))},styles:[".video-player[_ngcontent-%COMP%]{width:70vw;min-height:40vh;height:auto;max-height:70vh}"]}),n})();function nj(n,e){if(1&n&&(cr(0,"p",10),Js(1),Tr()),2&n){const t=Ja().$implicit;ts(1),Ku(t.text)}}function rj(n,e){1&n&&is(0,"img",11),2&n&&Oh("src",Ja().$implicit.url,$o)}function ij(n,e){1&n&&is(0,"app-video-player",12),2&n&&Ii("item",Ja().$implicit)}function sj(n,e){if(1&n&&(cr(0,"li",4)(1,"div",5)(2,"h2",6),Js(3),Tr(),Zs(4,nj,2,1,"p",7),Zs(5,rj,1,1,"img",8),Zs(6,ij,1,1,"app-video-player",9),Tr()()),2&n){const t=e.$implicit;ts(3),Ku(t.title),ts(1),Ii("ngIf",0==t.type),ts(1),Ii("ngIf",1==t.type),ts(1),Ii("ngIf",2==t.type)}}let YM=(()=>{class n{constructor(t){this.httpHandler=t,this.subreddit="pune",this.regexpImg=new RegExp("........i.redd.*"),this.regexpVid=new RegExp("........v.redd.*"),this.filterdData=[],this.count=0,this.updatecount=0,this.after=[],this.getNewData()}getNewData(){console.log("got http functuionm"),console.log(this.filterdData),this.count==this.updatecount&&(this.count++,this.httpHandler.getJsonReddit(this.subreddit,"hot",this.after[this.after.length-1]).subscribe(t=>{for(let r of t.data.children)this.regexpImg.test(r.data.url)?this.filterdData.push({id:r.data.id,title:r.data.title,type:1,text:"",url:r.data.url,formate:"",formateType:""}):this.regexpVid.test(r.data.url)&&1==r.data.is_video?this.filterdData.push({id:r.data.id,title:r.data.title,type:2,text:"",url:r.data.secure_media.reddit_video.dash_url,formate:"dash",formateType:"application/dash+xml"}):this.filterdData.push({id:r.data.id,title:r.data.title,type:0,text:r.data.selftext,url:r.data.url,formate:"",formateType:""});this.after.push(t.data.after),console.log(this.after,t.data.after),this.updatecount++}))}ngOnInit(){}isInViewport(t){const r=t.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)}scrollHandler(t){console.log("scoll triggerd");for(let r of document.getElementsByTagName("video"))this.isInViewport(r)?r.play().catch(i=>{console.log(i)}):r.pause();t.target.offsetHeight+t.target.scrollTop+50>=t.target.scrollHeight&&this.getNewData()}}return n.\u0275fac=function(t){return new(t||n)(kt(q1))},n.\u0275cmp=Yr({type:n,selectors:[["app-home"]],hostBindings:function(t,r){1&t&&ss("scroll",function(o){return r.scrollHandler(o)})},decls:4,vars:1,consts:[[1,"scroll-smooth","hover:scroll-auto",2,"overflow-y","scroll",3,"scroll"],[1,"scroll-view","grid","place-items-center","h-screen"],[1,"grid-col-1"],["class","p-2",4,"ngFor","ngForOf"],[1,"p-2"],[1,"containder","border-2","border-sky-500","w-max","p-4"],[1,"font-large","leading-tight","text-2xl","mt-0","mb-2","text-blue-600",2,"width","70vw"],["style","width: 70vw;overflow:auto ;",4,"ngIf"],["alt","Loading","class","p-2",3,"src",4,"ngIf"],[3,"item",4,"ngIf"],[2,"width","70vw","overflow","auto"],["alt","Loading",1,"p-2",3,"src"],[3,"item"]],template:function(t,r){1&t&&(cr(0,"div",0),ss("scroll",function(o){return r.scrollHandler(o)}),cr(1,"div",1)(2,"ul",2),Zs(3,sj,7,4,"li",3),Tr()()()),2&t&&(ts(3),Ii("ngForOf",r.filterdData))},dependencies:[sD,bg,tj],styles:[".scroll-view[_ngcontent-%COMP%]{height:calc(100vh - 64px);width:100%}img[_ngcontent-%COMP%]{min-width:70vw;min-height:40vw;width:70vw;height:auto;object-fit:cover;background-image:url(https://i.stack.imgur.com/kOnzy.gif);background-size:15vw;background-repeat:no-repeat;background-position:center}"]}),n})();const aj=[{path:"reddit",component:YM,children:[{path:"reddit",component:YM}]}];let oj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({imports:[zc.forChild(aj),zc]}),n})(),lj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({imports:[yc]}),n})(),uj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({imports:[yc,oj,lj]}),n})();function zM(n){return new At(3e3,!1)}function Wj(){return typeof window<"u"&&typeof window.document<"u"}function kp(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ws(n){switch(n.length){case 0:return new Gl;case 1:return n[0];default:return new HM(n)}}function $M(n,e,t,r,i=new Map,o=new Map){const l=[],c=[];let T=-1,j=null;if(r.forEach(q=>{const he=q.get("offset"),Re=he==T,Ne=Re&&j||new Map;q.forEach((Ve,qe)=>{let mt=qe,gt=Ve;if("offset"!==qe)switch(mt=e.normalizePropertyName(mt,l),gt){case"!":gt=i.get(qe);break;case ms:gt=o.get(qe);break;default:gt=e.normalizeStyleValue(qe,mt,gt,l)}Ne.set(mt,gt)}),Re||c.push(Ne),j=Ne,T=he}),l.length)throw function wj(n){return new At(3502,!1)}();return c}function Hp(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Vp(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Vp(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Vp(t,"destroy",n)))}}function Vp(n,e,t){const o=Kp(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(o._data=l),o}function Kp(n,e,t,r,i="",o=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!l}}function qr(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function QM(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Wp=(n,e)=>!1,XM=(n,e,t)=>[],ZM=null;function Gp(n){const e=n.parentNode||n.host;return e===ZM?null:e}(kp()||typeof Element<"u")&&(Wj()?(ZM=(()=>document.documentElement)(),Wp=(n,e)=>{for(;e;){if(e===n)return!0;e=Gp(e)}return!1}):Wp=(n,e)=>n.contains(e),XM=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let fa=null,qM=!1;const JM=Wp,eS=XM;let tS=(()=>{class n{validateStyleProperty(t){return function Yj(n){fa||(fa=function zj(){return typeof document<"u"?document.body:null}()||{},qM=!!fa.style&&"WebkitAppearance"in fa.style);let e=!0;return fa.style&&!function Gj(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in fa.style,!e&&qM&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in fa.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return JM(t,r)}getParentElement(t){return Gp(t)}query(t,r,i){return eS(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,l,c=[],T){return new Gl(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})(),Yp=(()=>{class n{}return n.NOOP=new tS,n})();const zp="ng-enter",cf="ng-leave",ff="ng-trigger",Yl=".ng-trigger",rS="ng-animating",$p=".ng-animating";function Ns(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Qp(parseFloat(e[1]),e[2])}function Qp(n,e){return"s"===e?1e3*n:n}function df(n,e,t){return n.hasOwnProperty("duration")?n:function Xj(n,e,t){let i,o=0,l="";if("string"==typeof n){const c=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return e.push(zM()),{duration:0,delay:0,easing:""};i=Qp(parseFloat(c[1]),c[2]);const T=c[3];null!=T&&(o=Qp(parseFloat(T),c[4]));const j=c[5];j&&(l=j)}else i=n;if(!t){let c=!1,T=e.length;i<0&&(e.push(function cj(){return new At(3100,!1)}()),c=!0),o<0&&(e.push(function fj(){return new At(3101,!1)}()),c=!0),c&&e.splice(T,0,zM())}return{duration:i,delay:o,easing:l}}(n,e,t)}function zl(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function iS(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ls(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function aS(n,e,t){return t?e+":"+t+";":""}function oS(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=aS(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=aS(0,ek(t),n.style[t]));n.setAttribute("style",e)}function $i(n,e,t){n.style&&(e.forEach((r,i)=>{const o=Zp(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),kp()&&oS(n))}function da(n,e){n.style&&(e.forEach((t,r)=>{const i=Zp(r);n.style[i]=""}),kp()&&oS(n))}function $l(n){return Array.isArray(n)?1==n.length?n[0]:BM(n):n}const Xp=new RegExp("{{\\s*(.+?)\\s*}}","g");function lS(n){let e=[];if("string"==typeof n){let t;for(;t=Xp.exec(n);)e.push(t[1]);Xp.lastIndex=0}return e}function hf(n,e,t){const r=n.toString(),i=r.replace(Xp,(o,l)=>{let c=e[l];return null==c&&(t.push(function hj(n){return new At(3003,!1)}()),c=""),c.toString()});return i==r?n:i}function gf(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Jj=/-+([a-z0-9])/g;function Zp(n){return n.replace(Jj,(...e)=>e[1].toUpperCase())}function ek(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Jr(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function gj(n){return new At(3004,!1)}()}}function uS(n,e){return window.getComputedStyle(n)[e]}function ak(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function ok(n,e,t){if(":"==n[0]){const T=function lk(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Rj(n){return new At(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof T)return void e.push(T);n=T}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Ij(n){return new At(3015,!1)}()),e;const i=r[1],o=r[2],l=r[3];e.push(cS(i,l));"<"==o[0]&&!("*"==i&&"*"==l)&&e.push(cS(l,i))}(r,t,e)):t.push(n),t}const Ef=new Set(["true","1"]),_f=new Set(["false","0"]);function cS(n,e){const t=Ef.has(n)||_f.has(n),r=Ef.has(e)||_f.has(e);return(i,o)=>{let l="*"==n||n==i,c="*"==e||e==o;return!l&&t&&"boolean"==typeof i&&(l=i?Ef.has(n):_f.has(n)),!c&&r&&"boolean"==typeof o&&(c=o?Ef.has(e):_f.has(e)),l&&c}}const uk=new RegExp("s*:selfs*,?","g");function qp(n,e,t,r){return new ck(n).build(e,t,r)}class ck{constructor(e){this._driver=e}build(e,t,r){const i=new hk(t);return this._resetContextStyleTimingState(i),Jr(this,$l(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function mj(){return new At(3006,!1)}()),e.definitions.forEach(c=>{if(this._resetContextStyleTimingState(t),0==c.type){const T=c,j=T.name;j.toString().split(/\s*,\s*/).forEach(q=>{T.name=q,o.push(this.visitState(T,t))}),T.name=j}else if(1==c.type){const T=this.visitTransition(c,t);r+=T.queryCount,i+=T.depCount,l.push(T)}else t.errors.push(function vj(){return new At(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,l=i||{};r.styles.forEach(c=>{c instanceof Map&&c.forEach(T=>{lS(T).forEach(j=>{l.hasOwnProperty(j)||o.add(j)})})}),o.size&&(gf(o.values()),t.errors.push(function Ej(n,e){return new At(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Jr(this,$l(e.animation),t);return{type:1,matchers:ak(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:ha(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Jr(this,r,t)),options:ha(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(l=>{t.currentTime=r;const c=Jr(this,l,t);return i=Math.max(i,t.currentTime),c});return t.currentTime=i,{type:3,steps:o,options:ha(e.options)}}visitAnimate(e,t){const r=function pk(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Jp(df(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=Jp(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=df(t,e);return Jp(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:lf({});if(5==o.type)i=this.visitKeyframes(o,t);else{let l=e.styles,c=!1;if(!l){c=!0;const j={};r.easing&&(j.easing=r.easing),l=lf(j)}t.currentTime+=r.duration+r.delay;const T=this.visitStyle(l,t);T.isEmptyStep=c,i=T}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let c of i)"string"==typeof c?c===ms?r.push(c):t.errors.push(new At(3002,!1)):r.push(iS(c));let o=!1,l=null;return r.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(l=c.get("easing"),c.delete("easing")),!o))for(let T of c.values())if(T.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((c,T)=>{const j=t.collectedStyles.get(t.currentQuerySelector),q=j.get(T);let he=!0;q&&(o!=i&&o>=q.startTime&&i<=q.endTime&&(t.errors.push(function yj(n,e,t,r,i){return new At(3010,!1)}()),he=!1),o=q.startTime),he&&j.set(T,{startTime:o,endTime:i}),t.options&&function qj(n,e,t){const r=e.params||{},i=lS(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function dj(n){return new At(3001,!1)}())})}(c,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Tj(){return new At(3011,!1)}()),r;let o=0;const l=[];let c=!1,T=!1,j=0;const q=e.steps.map(gt=>{const xt=this._makeStyleAst(gt,t);let vt=null!=xt.offset?xt.offset:function gk(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(xt.styles),Gt=0;return null!=vt&&(o++,Gt=xt.offset=vt),T=T||Gt<0||Gt>1,c=c||Gt<j,j=Gt,l.push(Gt),xt});T&&t.errors.push(function Dj(){return new At(3012,!1)}()),c&&t.errors.push(function Cj(){return new At(3200,!1)}());const he=e.steps.length;let Re=0;o>0&&o<he?t.errors.push(function Mj(){return new At(3202,!1)}()):0==o&&(Re=1/(he-1));const Ne=he-1,Ve=t.currentTime,qe=t.currentAnimateTimings,mt=qe.duration;return q.forEach((gt,xt)=>{const vt=Re>0?xt==Ne?1:Re*xt:l[xt],Gt=vt*mt;t.currentTime=Ve+qe.delay+Gt,qe.duration=Gt,this._validateStyleAst(gt,t),gt.offset=vt,r.styles.push(gt)}),r}visitReference(e,t){return{type:8,animation:Jr(this,$l(e.animation),t),options:ha(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ha(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ha(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,l]=function fk(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(uk,"")),n=n.replace(/@\*/g,Yl).replace(/@\w+/g,t=>Yl+"-"+t.slice(1)).replace(/:animating/g,$p),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,qr(t.collectedStyles,t.currentQuerySelector,new Map);const c=Jr(this,$l(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:c,originalSelector:e.selector,options:ha(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Sj(){return new At(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:df(e.timings,t.errors,!0);return{type:12,animation:Jr(this,$l(e.animation),t),timings:r,options:null}}}class hk{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set,this.nonAnimatableCSSPropertiesFound=new Set}}function ha(n){return n?(n=zl(n)).params&&(n.params=function dk(n){return n?zl(n):null}(n.params)):n={},n}function Jp(n,e,t){return{duration:n,delay:e,easing:t}}function em(n,e,t,r,i,o,l=null,c=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:l,subTimeline:c}}class yf{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Ek=new RegExp(":enter","g"),yk=new RegExp(":leave","g");function tm(n,e,t,r,i,o=new Map,l=new Map,c,T,j=[]){return(new Tk).buildKeyframes(n,e,t,r,i,o,l,c,T,j)}class Tk{buildKeyframes(e,t,r,i,o,l,c,T,j,q=[]){j=j||new yf;const he=new nm(e,t,j,i,o,q,[]);he.options=T;const Re=T.delay?Ns(T.delay):0;he.currentTimeline.delayNextStep(Re),he.currentTimeline.setStyles([l],null,he.errors,T),Jr(this,r,he);const Ne=he.timelines.filter(Ve=>Ve.containsAnimation());if(Ne.length&&c.size){let Ve;for(let qe=Ne.length-1;qe>=0;qe--){const mt=Ne[qe];if(mt.element===t){Ve=mt;break}}Ve&&!Ve.allowOnlyTimelineStyles()&&Ve.setStyles([c],null,he.errors,T)}return Ne.length?Ne.map(Ve=>Ve.buildKeyframes()):[em(t,[],[],[],0,Re,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);o!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const l=null!=r.duration?Ns(r.duration):null,c=null!=r.delay?Ns(r.delay):null;return 0!==l&&e.forEach(T=>{const j=t.appendInstructionToTimeline(T,l,c);o=Math.max(o,j.duration+j.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Jr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Tf);const l=Ns(o.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Jr(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Ns(e.options.delay):0;e.steps.forEach(l=>{const c=t.createSubContext(e.options);o&&c.delayNextStep(o),Jr(this,l,c),i=Math.max(i,c.currentTimeline.currentTime),r.push(c.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return df(t.params?hf(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,c=t.createSubContext().currentTimeline;c.easing=r.easing,e.styles.forEach(T=>{c.forwardTime((T.offset||0)*o),c.setStyles(T.styles,T.easing,t.errors,t.options),c.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(c),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Ns(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Tf);let l=r;const c=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=c.length;let T=null;c.forEach((j,q)=>{t.currentQueryIndex=q;const he=t.createSubContext(e.options,j);o&&he.delayNextStep(o),j===t.element&&(T=he.currentTimeline),Jr(this,e.animation,he),he.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,he.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),T&&(t.currentTimeline.mergeTimelineCollectedStyles(T),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,l=Math.abs(o.duration),c=l*(t.currentQueryTotal-1);let T=l*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":T=c-T;break;case"full":T=r.currentStaggerTime}const q=t.currentTimeline;T&&q.delayNextStep(T);const he=q.currentTime;Jr(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-he+(i.startTime-r.currentTimeline.startTime)}}const Tf={};class nm{constructor(e,t,r,i,o,l,c,T){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=l,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Tf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=T||new Df(this._driver,t,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ns(r.duration)),null!=r.delay&&(i.delay=Ns(r.delay));const o=r.params;if(o){let l=i.params;l||(l=this.options.params={}),Object.keys(o).forEach(c=>{(!t||!l.hasOwnProperty(c))&&(l[c]=hf(o[c],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new nm(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Tf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new Dk(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,l){let c=[];if(i&&c.push(this.element),e.length>0){e=(e=e.replace(Ek,"."+this._enterClassName)).replace(yk,"."+this._leaveClassName);let j=this._driver.query(this.element,e,1!=r);0!==r&&(j=r<0?j.slice(j.length+r,j.length):j.slice(0,r)),c.push(...j)}return!o&&0==c.length&&l.push(function Aj(n){return new At(3014,!1)}()),c}}class Df{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Df(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ms),this._currentKeyframe.set(t,ms);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},l=function Ck(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,ms)}else Ls(i,t)}),t}(e,this._globalTimelineStyles);for(let[c,T]of l){const j=hf(T,o,r);this._pendingStyles.set(c,j),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)||ms),this._updateStyle(c,j)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((c,T)=>{const j=Ls(c,new Map,this._backFill);j.forEach((q,he)=>{"!"===q?e.add(he):q===ms&&t.add(he)}),r||j.set("offset",T/this.duration),i.push(j)});const o=e.size?gf(e.values()):[],l=t.size?gf(t.values()):[];if(r){const c=i[0],T=new Map(c);c.set("offset",0),T.set("offset",1),i=[c,T]}return em(this.element,i,o,l,this.duration,this.startTime,this.easing,!1)}}class Dk extends Df{constructor(e,t,r,i,o,l,c=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=c,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],l=r+t,c=t/l,T=Ls(e[0]);T.set("offset",0),o.push(T);const j=Ls(e[0]);j.set("offset",hS(c)),o.push(j);const q=e.length-1;for(let he=1;he<=q;he++){let Re=Ls(e[he]);const Ne=Re.get("offset");Re.set("offset",hS((t+Ne*r)/l)),o.push(Re)}r=l,t=0,i="",e=o}return em(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function hS(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class rm{}const Mk=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Sk extends rm{normalizePropertyName(e,t){return Zp(e)}normalizeStyleValue(e,t,r,i){let o="";const l=r.toString().trim();if(Mk.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const c=r.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&i.push(function pj(n,e){return new At(3005,!1)}())}return l+o}}function gS(n,e,t,r,i,o,l,c,T,j,q,he,Re){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:l,timelines:c,queriedElements:T,preStyleProps:j,postStyleProps:q,totalTime:he,errors:Re}}const im={};class pS{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function Ak(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,l,c,T,j,q){const he=[],Re=this.ast.options&&this.ast.options.params||im,Ve=this.buildStyles(r,c&&c.params||im,he),qe=T&&T.params||im,mt=this.buildStyles(i,qe,he),gt=new Set,xt=new Map,vt=new Map,Gt="void"===i,vn={params:Ik(qe,Re),delay:this.ast.options?.delay},bn=q?[]:tm(e,t,this.ast.animation,o,l,Ve,mt,vn,j,he);let Qn=0;if(bn.forEach(ti=>{Qn=Math.max(ti.duration+ti.delay,Qn)}),he.length)return gS(t,this._triggerName,r,i,Gt,Ve,mt,[],[],xt,vt,Qn,he);bn.forEach(ti=>{const ni=ti.element,Mo=qr(xt,ni,new Set);ti.preStyleProps.forEach(Li=>Mo.add(Li));const vs=qr(vt,ni,new Set);ti.postStyleProps.forEach(Li=>vs.add(Li)),ni!==t&&gt.add(ni)});const ei=gf(gt.values());return gS(t,this._triggerName,r,i,Gt,Ve,mt,bn,ei,xt,vt,Qn)}}function Ik(n,e){const t=zl(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Rk{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=zl(this.defaultParams);return Object.keys(e).forEach(o=>{const l=e[o];null!==l&&(i[o]=l)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,c)=>{l&&(l=hf(l,i,t));const T=this.normalizer.normalizePropertyName(c,t);l=this.normalizer.normalizeStyleValue(c,T,l,t),r.set(T,l)})}),r}}class Pk{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Rk(i.style,i.options&&i.options.params||{},r))}),mS(this.states,"true","1"),mS(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new pS(e,i,this.states))}),this.fallbackTransition=function bk(n,e,t){return new pS(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,c)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function mS(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const wk=new yf;class Nk{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=qp(this._driver,t,r,[]);if(r.length)throw function Nj(n){return new At(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=$M(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let l;const c=new Map;if(o?(l=tm(this._driver,t,o,zp,cf,new Map,new Map,r,wk,i),l.forEach(q=>{const he=qr(c,q.element,new Map);q.postStyleProps.forEach(Re=>he.set(Re,null))})):(i.push(function Lj(){return new At(3300,!1)}()),l=[]),i.length)throw function Fj(n){return new At(3504,!1)}();c.forEach((q,he)=>{q.forEach((Re,Ne)=>{q.set(Ne,this._driver.computeStyle(he,Ne,ms))})});const j=ws(l.map(q=>{const he=c.get(q.element);return this._buildPlayer(q,new Map,he)}));return this._playersById.set(e,j),j.onDestroy(()=>this.destroy(e)),this.players.push(j),j}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function xj(n){return new At(3301,!1)}();return t}listen(e,t,r,i){const o=Kp(t,"","","");return Hp(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const vS="ng-animate-queued",sm="ng-animate-disabled",Uk=[],ES={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jk={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},pi="__ng_removed";class am{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Kk(n){return n??null}(r?e.value:e),r){const o=zl(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Ql="void",om=new am(Ql);class kk{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,mi(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Bj(n,e){return new At(3302,!1)}();if(null==r||0==r.length)throw function Uj(n){return new At(3303,!1)}();if(!function Wk(n){return"start"==n||"done"==n}(r))throw function jj(n,e){return new At(3400,!1)}();const o=qr(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};o.push(l);const c=qr(this._engine.statesByElement,e,new Map);return c.has(t)||(mi(e,ff),mi(e,ff+"-"+t),c.set(t,om)),()=>{this._engine.afterFlush(()=>{const T=o.indexOf(l);T>=0&&o.splice(T,1),this._triggers.has(t)||c.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function kj(n){return new At(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),l=new lm(this.id,t,e);let c=this._engine.statesByElement.get(e);c||(mi(e,ff),mi(e,ff+"-"+t),this._engine.statesByElement.set(e,c=new Map));let T=c.get(t);const j=new am(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&T&&j.absorbOptions(T.options),c.set(t,j),T||(T=om),j.value!==Ql&&T.value===j.value){if(!function zk(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(T.params,j.params)){const qe=[],mt=o.matchStyles(T.value,T.params,qe),gt=o.matchStyles(j.value,j.params,qe);qe.length?this._engine.reportError(qe):this._engine.afterFlush(()=>{da(e,mt),$i(e,gt)})}return}const Re=qr(this._engine.playersByElement,e,[]);Re.forEach(qe=>{qe.namespaceId==this.id&&qe.triggerName==t&&qe.queued&&qe.destroy()});let Ne=o.matchTransition(T.value,j.value,e,j.params),Ve=!1;if(!Ne){if(!i)return;Ne=o.fallbackTransition,Ve=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:Ne,fromState:T,toState:j,player:l,isFallbackTransition:Ve}),Ve||(mi(e,vS),l.onStart(()=>{Co(e,vS)})),l.onDone(()=>{let qe=this.players.indexOf(l);qe>=0&&this.players.splice(qe,1);const mt=this._engine.playersByElement.get(e);if(mt){let gt=mt.indexOf(l);gt>=0&&mt.splice(gt,1)}}),this.players.push(l),Re.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Yl,!0),i=e.shadowRoot?this._engine.driver.query(e.shadowRoot,Yl,!0):[];[...r,...i].forEach(o=>{if(o[pi])return;const l=this._engine.fetchNamespacesByElement(o);l.size?l.forEach(c=>c.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),l=new Map;if(o){const c=[];if(o.forEach((T,j)=>{if(l.set(j,T.value),this._triggers.has(j)){const q=this.trigger(e,j,Ql,i);q&&c.push(q)}}),c.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&ws(c).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const l=o.name;if(i.has(l))return;i.add(l);const T=this._triggers.get(l).fallbackTransition,j=r.get(l)||om,q=new am(Ql),he=new lm(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:T,fromState:j,toState:q,player:he,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if((!!e.childElementCount||!(!e.shadowRoot||!e.shadowRoot.childElementCount))&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let l=!1;if(r.totalAnimations){const c=r.players.length?r.playersByQueriedElement.get(e):[];if(c&&c.length)l=!0;else{let T=e;for(;T=T.parentNode;)if(r.statesByElement.get(T)){l=!0;break}}}if(this.prepareLeaveAnimationListeners(e),l)r.markElementAsRemoved(this.id,e,!1,t);else{const c=e[pi];(!c||c===ES)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){mi(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,l=this._elementListeners.get(o);l&&l.forEach(c=>{if(c.name==r.triggerName){const T=Kp(o,r.triggerName,r.fromState.value,r.toState.value);T._data=e,Hp(r.player,c.phase,T,c.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==o||0==l?o-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Hk{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new kk(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,c=this.driver.getParentElement(t);for(;c;){const T=i.get(c);if(T){const j=r.indexOf(T);r.splice(j+1,0,e),l=!0;break}c=this.driver.getParentElement(c)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(Cf(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Cf(t))return;const o=t[pi];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),mi(e,sm)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Co(e,sm))}removeNode(e,t,r,i){if(Cf(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[pi]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Cf(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Yl,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,$p,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ws(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[pi];if(t&&t.setForRemoval){if(e[pi]=ES,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(sm)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)mi(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ws(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Hj(n){return new At(3402,!1)}()}_flushAnimations(e,t){const r=new yf,i=[],o=new Map,l=[],c=new Map,T=new Map,j=new Map,q=new Set;this.disabledNodes.forEach(qt=>{q.add(qt);const cn=this.driver.query(qt,".ng-animate-queued",!0);for(let gn=0;gn<cn.length;gn++)q.add(cn[gn])});const he=this.bodyNode,Re=Array.from(this.statesByElement.keys()),Ne=TS(Re,this.collectedEnterElements),Ve=new Map;let qe=0;Ne.forEach((qt,cn)=>{const gn=zp+qe++;Ve.set(cn,gn),qt.forEach(xn=>mi(xn,gn))});const mt=[],gt=new Set,xt=new Set;for(let qt=0;qt<this.collectedLeaveElements.length;qt++){const cn=this.collectedLeaveElements[qt],gn=cn[pi];gn&&gn.setForRemoval&&(mt.push(cn),gt.add(cn),gn.hasAnimation?this.driver.query(cn,".ng-star-inserted",!0).forEach(xn=>gt.add(xn)):xt.add(cn))}const vt=new Map,Gt=TS(Re,Array.from(gt));Gt.forEach((qt,cn)=>{const gn=cf+qe++;vt.set(cn,gn),qt.forEach(xn=>mi(xn,gn))}),e.push(()=>{Ne.forEach((qt,cn)=>{const gn=Ve.get(cn);qt.forEach(xn=>Co(xn,gn))}),Gt.forEach((qt,cn)=>{const gn=vt.get(cn);qt.forEach(xn=>Co(xn,gn))}),mt.forEach(qt=>{this.processLeaveNode(qt)})});const vn=[],bn=[];for(let qt=this._namespaceList.length-1;qt>=0;qt--)this._namespaceList[qt].drainQueuedTransitions(t).forEach(gn=>{const xn=gn.player,_r=gn.element;if(vn.push(xn),this.collectedEnterElements.length){const br=_r[pi];if(br&&br.setForMove){if(br.previousTriggersValues&&br.previousTriggersValues.has(gn.triggerName)){const ga=br.previousTriggersValues.get(gn.triggerName),vi=this.statesByElement.get(gn.element);if(vi&&vi.has(gn.triggerName)){const If=vi.get(gn.triggerName);If.value=ga,vi.set(gn.triggerName,If)}}return void xn.destroy()}}const Qi=!he||!this.driver.containsElement(he,_r),ri=vt.get(_r),Fs=Ve.get(_r),Xn=this._buildInstruction(gn,r,Fs,ri,Qi);if(Xn.errors&&Xn.errors.length)return void bn.push(Xn);if(Qi)return xn.onStart(()=>da(_r,Xn.fromStyles)),xn.onDestroy(()=>$i(_r,Xn.toStyles)),void i.push(xn);if(gn.isFallbackTransition)return xn.onStart(()=>da(_r,Xn.fromStyles)),xn.onDestroy(()=>$i(_r,Xn.toStyles)),void i.push(xn);const PS=[];Xn.timelines.forEach(br=>{br.stretchStartingKeyframe=!0,this.disabledNodes.has(br.element)||PS.push(br)}),Xn.timelines=PS,r.append(_r,Xn.timelines),l.push({instruction:Xn,player:xn,element:_r}),Xn.queriedElements.forEach(br=>qr(c,br,[]).push(xn)),Xn.preStyleProps.forEach((br,ga)=>{if(br.size){let vi=T.get(ga);vi||T.set(ga,vi=new Set),br.forEach((If,cm)=>vi.add(cm))}}),Xn.postStyleProps.forEach((br,ga)=>{let vi=j.get(ga);vi||j.set(ga,vi=new Set),br.forEach((If,cm)=>vi.add(cm))})});if(bn.length){const qt=[];bn.forEach(cn=>{qt.push(function Vj(n,e){return new At(3505,!1)}())}),vn.forEach(cn=>cn.destroy()),this.reportError(qt)}const Qn=new Map,ei=new Map;l.forEach(qt=>{const cn=qt.element;r.has(cn)&&(ei.set(cn,cn),this._beforeAnimationBuild(qt.player.namespaceId,qt.instruction,Qn))}),i.forEach(qt=>{const cn=qt.element;this._getPreviousPlayers(cn,!1,qt.namespaceId,qt.triggerName,null).forEach(xn=>{qr(Qn,cn,[]).push(xn),xn.destroy()})});const ti=mt.filter(qt=>CS(qt,T,j)),ni=new Map;yS(ni,this.driver,xt,j,ms).forEach(qt=>{CS(qt,T,j)&&ti.push(qt)});const vs=new Map;Ne.forEach((qt,cn)=>{yS(vs,this.driver,new Set(qt),T,"!")}),ti.forEach(qt=>{const cn=ni.get(qt),gn=vs.get(qt);ni.set(qt,new Map([...Array.from(cn?.entries()??[]),...Array.from(gn?.entries()??[])]))});const Li=[],So=[],Ao={};l.forEach(qt=>{const{element:cn,player:gn,instruction:xn}=qt;if(r.has(cn)){if(q.has(cn))return gn.onDestroy(()=>$i(cn,xn.toStyles)),gn.disabled=!0,gn.overrideTotalTime(xn.totalTime),void i.push(gn);let _r=Ao;if(ei.size>1){let ri=cn;const Fs=[];for(;ri=ri.parentNode;){const Xn=ei.get(ri);if(Xn){_r=Xn;break}Fs.push(ri)}Fs.forEach(Xn=>ei.set(Xn,_r))}const Qi=this._buildAnimation(gn.namespaceId,xn,Qn,o,vs,ni);if(gn.setRealPlayer(Qi),_r===Ao)Li.push(gn);else{const ri=this.playersByElement.get(_r);ri&&ri.length&&(gn.parentPlayer=ws(ri)),i.push(gn)}}else da(cn,xn.fromStyles),gn.onDestroy(()=>$i(cn,xn.toStyles)),So.push(gn),q.has(cn)&&i.push(gn)}),So.forEach(qt=>{const cn=o.get(qt.element);if(cn&&cn.length){const gn=ws(cn);qt.setRealPlayer(gn)}}),i.forEach(qt=>{qt.parentPlayer?qt.syncPlayerEvents(qt.parentPlayer):qt.destroy()});for(let qt=0;qt<mt.length;qt++){const cn=mt[qt],gn=cn[pi];if(Co(cn,cf),gn&&gn.hasAnimation)continue;let xn=[];if(c.size){let Qi=c.get(cn);Qi&&Qi.length&&xn.push(...Qi);let ri=this.driver.query(cn,$p,!0);for(let Fs=0;Fs<ri.length;Fs++){let Xn=c.get(ri[Fs]);Xn&&Xn.length&&xn.push(...Xn)}}const _r=xn.filter(Qi=>!Qi.destroyed);_r.length?Gk(this,cn,_r):this.processLeaveNode(cn)}return mt.length=0,Li.forEach(qt=>{this.players.push(qt),qt.onDone(()=>{qt.destroy();const cn=this.players.indexOf(qt);this.players.splice(cn,1)}),qt.play()}),Li}elementContainsData(e,t){let r=!1;const i=t[pi];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let l=[];if(t){const c=this.playersByQueriedElement.get(e);c&&(l=c)}else{const c=this.playersByElement.get(e);if(c){const T=!o||o==Ql;c.forEach(j=>{j.queued||!T&&j.triggerName!=i||l.push(j)})}}return(r||i)&&(l=l.filter(c=>!(r&&r!=c.namespaceId||i&&i!=c.triggerName))),l}_beforeAnimationBuild(e,t,r){const o=t.element,l=t.isRemovalTransition?void 0:e,c=t.isRemovalTransition?void 0:t.triggerName;for(const T of t.timelines){const j=T.element,q=j!==o,he=qr(r,j,[]);this._getPreviousPlayers(j,q,l,c,t.toState).forEach(Ne=>{const Ve=Ne.getRealPlayer();Ve.beforeDestroy&&Ve.beforeDestroy(),Ne.destroy(),he.push(Ne)})}da(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,l){const c=t.triggerName,T=t.element,j=[],q=new Set,he=new Set,Re=t.timelines.map(Ve=>{const qe=Ve.element;q.add(qe);const mt=qe[pi];if(mt&&mt.removedBeforeQueried)return new Gl(Ve.duration,Ve.delay);const gt=qe!==T,xt=function Yk(n){const e=[];return DS(n,e),e}((r.get(qe)||Uk).map(Qn=>Qn.getRealPlayer())).filter(Qn=>!!Qn.element&&Qn.element===qe),vt=o.get(qe),Gt=l.get(qe),vn=$M(0,this._normalizer,0,Ve.keyframes,vt,Gt),bn=this._buildPlayer(Ve,vn,xt);if(Ve.subTimeline&&i&&he.add(qe),gt){const Qn=new lm(e,c,qe);Qn.setRealPlayer(bn),j.push(Qn)}return bn});j.forEach(Ve=>{qr(this.playersByQueriedElement,Ve.element,[]).push(Ve),Ve.onDone(()=>function Vk(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,Ve.element,Ve))}),q.forEach(Ve=>mi(Ve,rS));const Ne=ws(Re);return Ne.onDestroy(()=>{q.forEach(Ve=>Co(Ve,rS)),$i(T,t.toStyles)}),he.forEach(Ve=>{qr(i,Ve,[]).push(Ne)}),Ne}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Gl(e.duration,e.delay)}}class lm{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Gl,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Hp(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){qr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Cf(n){return n&&1===n.nodeType}function _S(n,e){const t=n.style.display;return n.style.display=e??"none",t}function yS(n,e,t,r,i){const o=[];t.forEach(T=>o.push(_S(T)));const l=[];r.forEach((T,j)=>{const q=new Map;T.forEach(he=>{const Re=e.computeStyle(j,he,i);q.set(he,Re),(!Re||0==Re.length)&&(j[pi]=jk,l.push(j))}),n.set(j,q)});let c=0;return t.forEach(T=>_S(T,o[c++])),l}function TS(n,e){const t=new Map;if(n.forEach(c=>t.set(c,[])),0==e.length)return t;const i=new Set(e),o=new Map;function l(c){if(!c)return 1;let T=o.get(c);if(T)return T;const j=c.parentNode;return T=t.has(j)?j:i.has(j)?1:l(j),o.set(c,T),T}return e.forEach(c=>{const T=l(c);1!==T&&t.get(T).push(c)}),t}function mi(n,e){n.classList?.add(e)}function Co(n,e){n.classList?.remove(e)}function Gk(n,e,t){ws(t).onDone(()=>n.processLeaveNode(e))}function DS(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof HM?DS(r.players,e):e.push(r)}}function CS(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class Mf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new Hk(e,t,r),this._timelineEngine=new Nk(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const l=e+"-"+i;let c=this._triggerCache[l];if(!c){const T=[],q=qp(this._driver,o,T,[]);if(T.length)throw function bj(n,e){return new At(3404,!1)}();c=function Ok(n,e,t){return new Pk(n,e,t)}(i,q,this._normalizer),this._triggerCache[l]=c}this._transitionEngine.registerTrigger(t,i,c)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,l]=QM(r);this._timelineEngine.command(o,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[l,c]=QM(r);return this._timelineEngine.listen(l,t,c,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Qk=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&$i(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($i(this._element,this._initialStyles),this._endStyles&&($i(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(da(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(da(this._element,this._endStyles),this._endStyles=null),$i(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function um(n){let e=null;return n.forEach((t,r)=>{(function Xk(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class MS{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:uS(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Zk{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return JM(e,t)}getParentElement(e){return Gp(e)}query(e,t,r){return eS(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,l=[]){const T={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(T.easing=o);const j=new Map,q=l.filter(Ne=>Ne instanceof MS);(function tk(n,e){return 0===n||0===e})(r,i)&&q.forEach(Ne=>{Ne.currentSnapshot.forEach((Ve,qe)=>j.set(qe,Ve))});let he=function Zj(n){return n.length?n[0]instanceof Map?n:n.map(e=>iS(e)):[]}(t).map(Ne=>Ls(Ne));he=function nk(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,l)=>{r.has(l)||i.push(l),r.set(l,o)}),i.length)for(let o=1;o<e.length;o++){let l=e[o];i.forEach(c=>l.set(c,uS(n,c)))}}return e}(e,he,j);const Re=function $k(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=um(e[0]),e.length>1&&(r=um(e[e.length-1]))):e instanceof Map&&(t=um(e)),t||r?new Qk(n,t,r):null}(e,he);return new MS(e,he,T,Re)}}let qk=(()=>{class n extends FM{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Gr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?BM(t):t;return SS(this._renderer,null,r,"register",[i]),new Jk(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(St(cl),St(Nn))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();class Jk extends class j1{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new eH(this._id,e,t||{},this._renderer)}}class eH{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return SS(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function SS(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const AS="@.disabled";let tH=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,l)=>{const c=l?.parentNode(o);c&&l.removeChild(c,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let q=this._rendererCache.get(o);return q||(q=new IS("",o,this.engine),this._rendererCache.set(o,q)),q}const l=r.id,c=r.id+"-"+this._currentId;this._currentId++,this.engine.register(c,t);const T=q=>{Array.isArray(q)?q.forEach(T):this.engine.registerTrigger(l,c,t,q.name,q)};return r.data.animation.forEach(T),new nH(this,c,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[l,c]=o;l(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(St(cl),St(Mf),St(Bn))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})();class IS{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==AS?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class nH extends IS{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==AS?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function rH(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),l="";return"@"!=o.charAt(0)&&([o,l]=function iH(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,l,c=>{this.factory.scheduleListenerCallback(c._data||-1,r,c)})}return this.delegate.listen(e,t,r)}}const RS=[{provide:FM,useClass:qk},{provide:rm,useFactory:function aH(){return new Sk}},{provide:Mf,useClass:(()=>{class n extends Mf{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(St(Nn),St(Yp),St(rm),St(vl))},n.\u0275prov=Bt({token:n,factory:n.\u0275fac}),n})()},{provide:cl,useFactory:function oH(n,e,t){return new tH(n,e,t)},deps:[Mc,Mf,Bn]}],OS=[{provide:Yp,useFactory:()=>new Zk},{provide:sg,useValue:"BrowserAnimations"},...RS],lH=[{provide:Yp,useClass:tS},{provide:sg,useValue:"NoopAnimations"},...RS];let uH=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?lH:OS}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n}),n.\u0275inj=yn({providers:OS,imports:[ID]}),n})();var Af=k(386);class cH extends wD{buildHammer(e){return new Af.Manager(e,{inputClass:Af.TouchInput,touchAction:"auto",recognizers:[[Af.Swipe,{direction:Af.DIRECTION_HORIZONTAL}]]})}}let fH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Zn({type:n,bootstrap:[Z1]}),n.\u0275inj=yn({providers:[{provide:Sc,useClass:cH}],imports:[ID,xB,n1,uj,uH,HU,m1,Q1,lF]}),n})();(function Lw(){bT=!1})(),XL().bootstrapModule(fH).catch(n=>console.error(n))},377:Es=>{window,Es.exports=function(we){var k={};function u(B){if(k[B])return k[B].exports;var _=k[B]={i:B,l:!1,exports:{}};return we[B].call(_.exports,_,_.exports,u),_.l=!0,_.exports}return u.m=we,u.c=k,u.d=function(B,_,M){u.o(B,_)||Object.defineProperty(B,_,{enumerable:!0,get:M})},u.r=function(B){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})},u.t=function(B,_){if(1&_&&(B=u(B)),8&_||4&_&&"object"==typeof B&&B&&B.__esModule)return B;var M=Object.create(null);if(u.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:B}),2&_&&"string"!=typeof B)for(var y in B)u.d(M,y,function(D){return B[D]}.bind(null,y));return M},u.n=function(B){var _=B&&B.__esModule?function(){return B.default}:function(){return B};return u.d(_,"a",_),_},u.o=function(B,_){return Object.prototype.hasOwnProperty.call(B,_)},u.p="/dist/",u(u.s="./index.js")}({"./externals/base64.js":function(we,k,u){var M,y,D,d,v,B_encode=function(M){for(var y=[],D=0;D<M.length;++D){var d=M.charCodeAt(D);d<128?y.push(d):d<2048?(y.push(192|d>>6),y.push(128|63&d)):d<65536?(y.push(224|d>>12),y.push(128|63&d>>6),y.push(128|63&d)):(y.push(240|d>>18),y.push(128|63&d>>12),y.push(128|63&d>>6),y.push(128|63&d))}return y},B_decode=function(M){for(var y=[],D=0;D<M.length;){var d=M[D++];d<128||(d<224?(d=(31&d)<<6,d|=63&M[D++]):d<240?(d=(15&d)<<12,d|=(63&M[D++])<<6,d|=63&M[D++]):(d=(7&d)<<18,d|=(63&M[D++])<<12,d|=(63&M[D++])<<6,d|=63&M[D++])),y.push(String.fromCharCode(d))}return y.join("")},_={};M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=function(L){for(var b=0,F=[],m=0|L.length/3;0<m--;){var h=(L[b]<<16)+(L[b+1]<<8)+L[b+2];b+=3,F.push(M.charAt(63&h>>18)),F.push(M.charAt(63&h>>12)),F.push(M.charAt(63&h>>6)),F.push(M.charAt(63&h))}return L.length-b==2?(F.push(M.charAt(63&(h=(L[b]<<16)+(L[b+1]<<8))>>18)),F.push(M.charAt(63&h>>12)),F.push(M.charAt(63&h>>6)),F.push("=")):L.length-b==1&&(F.push(M.charAt(63&(h=L[b]<<16)>>18)),F.push(M.charAt(63&h>>12)),F.push("==")),F.join("")},D=function(){for(var p=[],L=0;L<M.length;++L)p[M.charCodeAt(L)]=L;return p["=".charCodeAt(0)]=0,p}(),d=function(L){for(var b=0,F=[],m=0|L.length/4;0<m--;){var h=(D[L.charCodeAt(b)]<<18)+(D[L.charCodeAt(b+1)]<<12)+(D[L.charCodeAt(b+2)]<<6)+D[L.charCodeAt(b+3)];F.push(255&h>>16),F.push(255&h>>8),F.push(255&h),b+=4}return F&&("="==L.charAt(b-2)?(F.pop(),F.pop()):"="==L.charAt(b-1)&&F.pop()),F},v={encode:function(p){for(var L=[],b=0;b<p.length;++b)L.push(p.charCodeAt(b));return L},decode:function(p){for(var L=0;L<s.length;++L)a[L]=String.fromCharCode(a[L]);return a.join("")}},_.decodeArray=function(p){var L=d(p);return new Uint8Array(L)},_.encodeASCII=function(p){var L=v.encode(p);return y(L)},_.decodeASCII=function(p){var L=d(p);return v.decode(L)},_.encode=function(p){var L=B_encode(p);return y(L)},_.decode=function(p){var L=d(p);return B_decode(L)},k.decode=_.decode,k.decodeArray=_.decodeArray,k.encode=_.encode,k.encodeASCII=_.encodeASCII},"./externals/cea608-parser.js":function(we,k,u){!function(B){"use strict";var _={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},M=function(f){var R=f;return _.hasOwnProperty(f)&&(R=_[f]),String.fromCharCode(R)},y=15,D=32,d={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},v={17:2,18:4,21:6,22:8,23:10,19:13,20:15},p={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},L={25:2,26:4,29:6,30:8,31:10,27:13,28:15},b=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],F={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(f){this.time=f},log:function(f,R){this.verboseLevel>=this.verboseFilter[f]&&console.log(this.time+" ["+f+"] "+R)}},m=function(f){for(var R=[],V=0;V<f.length;V++)R.push(f[V].toString(16));return R},h=function(f,R,V,Q,$){this.foreground=f||"white",this.underline=R||!1,this.italics=V||!1,this.background=Q||"black",this.flash=$||!1};h.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(f){for(var R=["foreground","underline","italics","background","flash"],V=0;V<R.length;V++){var Q=R[V];f.hasOwnProperty(Q)&&(this[Q]=f[Q])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(f){return this.foreground===f.foreground&&this.underline===f.underline&&this.italics===f.italics&&this.background===f.background&&this.flash===f.flash},copy:function(f){this.foreground=f.foreground,this.underline=f.underline,this.italics=f.italics,this.background=f.background,this.flash=f.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var g=function(f,R,V,Q,$,J){this.uchar=f||" ",this.penState=new h(R,V,Q,$,J)};g.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(f,R){this.uchar=f,this.penState.copy(R)},setPenState:function(f){this.penState.copy(f)},equals:function(f){return this.uchar===f.uchar&&this.penState.equals(f.penState)},copy:function(f){this.uchar=f.uchar,this.penState.copy(f.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var S=function(){this.chars=[];for(var f=0;f<D;f++)this.chars.push(new g);this.pos=0,this.currPenState=new h};S.prototype={equals:function(f){for(var R=!0,V=0;V<D;V++)if(!this.chars[V].equals(f.chars[V])){R=!1;break}return R},copy:function(f){for(var R=0;R<D;R++)this.chars[R].copy(f.chars[R])},isEmpty:function(){for(var f=!0,R=0;R<D;R++)if(!this.chars[R].isEmpty()){f=!1;break}return f},setCursor:function(f){this.pos!==f&&(this.pos=f),this.pos<0?(F.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>D&&(F.log("ERROR","Too large cursor position "+this.pos),this.pos=D)},moveCursor:function(f){var R=this.pos+f;if(f>1)for(var V=this.pos+1;V<R+1;V++)this.chars[V].setPenState(this.currPenState);this.setCursor(R)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(f){f>=144&&this.backSpace();var R=M(f);this.pos>=D?F.log("ERROR","Cannot insert "+f.toString(16)+" ("+R+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(R,this.currPenState),this.moveCursor(1))},clearFromPos:function(f){var R;for(R=f;R<D;R++)this.chars[R].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var f=[],R=!0,V=0;V<D;V++){var Q=this.chars[V].uchar;" "!==Q&&(R=!1),f.push(Q)}return R?"":f.join("")},setPenStyles:function(f){this.currPenState.setStyles(f),this.chars[this.pos].setPenState(this.currPenState)}};var C=function(){this.rows=[];for(var f=0;f<y;f++)this.rows.push(new S);this.currRow=14,this.nrRollUpRows=null,this.reset()};C.prototype={reset:function(){for(var f=0;f<y;f++)this.rows[f].clear();this.currRow=14},equals:function(f){for(var R=!0,V=0;V<y;V++)if(!this.rows[V].equals(f.rows[V])){R=!1;break}return R},copy:function(f){for(var R=0;R<y;R++)this.rows[R].copy(f.rows[R])},isEmpty:function(){for(var f=!0,R=0;R<y;R++)if(!this.rows[R].isEmpty()){f=!1;break}return f},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(f){this.rows[this.currRow].insertChar(f)},setPen:function(f){this.rows[this.currRow].setPenStyles(f)},moveCursor:function(f){this.rows[this.currRow].moveCursor(f)},setCursor:function(f){F.log("INFO","setCursor: "+f),this.rows[this.currRow].setCursor(f)},setPAC:function(f){F.log("INFO","pacData = "+JSON.stringify(f));var R=f.row-1;this.nrRollUpRows&&R<this.nrRollUpRows-1&&(R=this.nrRollUpRows-1),this.currRow=R;var V=this.rows[this.currRow];if(null!==f.indent){var $=Math.max(f.indent-1,0);V.setCursor(f.indent),f.color=V.chars[$].penState.foreground}this.setPen({foreground:f.color,underline:f.underline,italics:f.italics,background:"black",flash:!1})},setBkgData:function(f){F.log("INFO","bkgData = "+JSON.stringify(f)),this.backSpace(),this.setPen(f),this.insertChar(32)},setRollUpRows:function(f){this.nrRollUpRows=f},rollUp:function(){if(null!==this.nrRollUpRows){F.log("TEXT",this.getDisplayText());var R=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];R.clear(),this.rows.splice(this.currRow,0,R),F.log("INFO","Rolling up")}else F.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(f){f=f||!1;for(var R=[],V="",$=0;$<y;$++){var J=this.rows[$].getTextString();J&&R.push(f?"Row "+($+1)+': "'+J+'"':J.trim())}return R.length>0&&(V=f?"["+R.join(" | ")+"]":R.join("\n")),V},getTextAndFormat:function(){return this.rows}};var x=function(f,R){this.chNr=f,this.outputFilter=R,this.mode=null,this.verbose=0,this.displayedMemory=new C,this.nonDisplayedMemory=new C,this.lastOutputScreen=new C,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};x.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(f){this.outputFilter=f},setPAC:function(f){this.writeScreen.setPAC(f)},setBkgData:function(f){this.writeScreen.setBkgData(f)},setMode:function(f){f!==this.mode&&(this.mode=f,F.log("INFO","MODE="+f),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=f)},insertChars:function(f){for(var R=0;R<f.length;R++)this.writeScreen.insertChar(f[R]);F.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(F.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){F.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){F.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){F.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(f){F.log("INFO","RU("+f+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(f)},cc_FON:function(){F.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){F.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){F.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){F.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){F.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){F.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){F.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(F.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var f=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=f,this.writeScreen=this.nonDisplayedMemory,F.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(f){F.log("INFO","TO("+f+") - Tab Offset"),this.writeScreen.moveCursor(f)},cc_MIDROW:function(f){var R={flash:!1};if(R.underline=f%2==1,R.italics=f>=46,R.italics)R.foreground="white";else{var V=Math.floor(f/2)-16;R.foreground=["white","green","blue","cyan","red","yellow","magenta"][V]}F.log("INFO","MIDROW: "+JSON.stringify(R)),this.writeScreen.setPen(R)},outputDataUpdate:function(){var f=F.time;null!==f&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(f,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,f,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:f):this.cueStartTime=f,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(f){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,f,this.displayedMemory),this.cueStartTime=f))}};var O=function(f,R,V){this.field=f||1,this.outputs=[R,V],this.channels=[new x(1,R),new x(2,V)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};O.prototype={getHandler:function(f){return this.channels[f].getHandler()},setHandler:function(f,R){this.channels[f].setHandler(R)},addData:function(f,R){var V,Q,$,J=!1;this.lastTime=f,F.setTime(f);for(var te=0;te<R.length;te+=2)$=127&R[te+1],(Q=127&R[te])>=16&&Q<=31&&Q===this.lastCmdA&&$===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,F.log("DEBUG","Repeated command ("+m([Q,$])+") is dropped")):0!==Q||0!==$?(F.log("DATA","["+m([R[te],R[te+1]])+"] -> ("+m([Q,$])+")"),(V=this.parseCmd(Q,$))||(V=this.parseMidrow(Q,$)),V||(V=this.parsePAC(Q,$)),V||(V=this.parseBackgroundAttributes(Q,$)),!V&&(J=this.parseChars(Q,$))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(J):F.log("WARNING","No channel found yet. TEXT-MODE?")),V?this.dataCounters.cmd+=2:J?this.dataCounters.char+=2:(this.dataCounters.other+=2,F.log("WARNING","Couldn't parse cleaned data "+m([Q,$])+" orig: "+m([R[te],R[te+1]])))):this.dataCounters.padding+=2},parseCmd:function(f,R){var V;if(!((20===f||21===f||28===f||29===f)&&32<=R&&R<=47||(23===f||31===f)&&33<=R&&R<=35))return!1;var J=this.channels[(V=20===f||21===f||23===f?1:2)-1];return 20===f||21===f||28===f||29===f?32===R?J.cc_RCL():33===R?J.cc_BS():34===R?J.cc_AOF():35===R?J.cc_AON():36===R?J.cc_DER():37===R?J.cc_RU(2):38===R?J.cc_RU(3):39===R?J.cc_RU(4):40===R?J.cc_FON():41===R?J.cc_RDC():42===R?J.cc_TR():43===R?J.cc_RTD():44===R?J.cc_EDM():45===R?J.cc_CR():46===R?J.cc_ENM():47===R&&J.cc_EOC():J.cc_TO(R-32),this.lastCmdA=f,this.lastCmdB=R,this.currChNr=V,!0},parseMidrow:function(f,R){var V=null;if((17===f||25===f)&&32<=R&&R<=47){if((V=17===f?1:2)!==this.currChNr)return F.log("ERROR","Mismatch channel in midrow parsing"),!1;var Q=this.channels[V-1];return Q.insertChars([32]),Q.cc_MIDROW(R),F.log("DEBUG","MIDROW ("+m([f,R])+")"),this.lastCmdA=f,this.lastCmdB=R,!0}return!1},parsePAC:function(f,R){var V;if(!((17<=f&&f<=23||25<=f&&f<=31)&&64<=R&&R<=127||(16===f||24===f)&&64<=R&&R<=95))return!1;V=f<=23?1:2;var te=this.interpretPAC(64<=R&&R<=95?1===V?d[f]:p[f]:1===V?v[f]:L[f],R);return this.channels[V-1].setPAC(te),this.lastCmdA=f,this.lastCmdB=R,this.currChNr=V,!0},interpretPAC:function(f,R){var V,Q={color:null,italics:!1,indent:null,underline:!1,row:f};return Q.underline=1==(1&(V=R>95?R-96:R-64)),V<=13?Q.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(V/2)]:V<=15?(Q.italics=!0,Q.color="white"):Q.indent=4*Math.floor((V-16)/2),Q},parseChars:function(f,R){var V=null,Q=null,$=null;if(f>=25?(V=2,$=f-8):(V=1,$=f),17<=$&&$<=19){var te;F.log("INFO","Special char '"+M(te=17===$?R+80:18===$?R+112:R+144)+"' in channel "+V),Q=[te],this.lastCmdA=f,this.lastCmdB=R}else 32<=f&&f<=127&&(Q=0===R?[f]:[f,R],this.lastCmdA=null,this.lastCmdB=null);if(Q){var X=m(Q);F.log("DEBUG","Char codes =  "+X.join(","))}return Q},parseBackgroundAttributes:function(f,R){var V,Q;return!!((16===f||24===f)&&32<=R&&R<=47||(23===f||31===f)&&45<=R&&R<=47)&&(V={},16===f||24===f?(Q=Math.floor((R-32)/2),V.background=b[Q],R%2==1&&(V.background=V.background+"_semi")):45===R?V.background="transparent":(V.foreground="black",47===R&&(V.underline=!0)),this.channels[(f<24?1:2)-1].setBkgData(V),this.lastCmdA=f,this.lastCmdB=R,!0)},reset:function(){for(var f=0;f<this.channels.length;f++)this.channels[f]&&this.channels[f].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(f){for(var R=0;R<this.channels.length;R++)this.channels[R]&&this.channels[R].cueSplitAtTime(f)}};B.logger=F,B.PenState=h,B.CaptionScreen=C,B.Cea608Parser=O,B.findCea608Nalus=function(f,R,V){for(var Q=0,$=R,te=[],X=function(_e,ie,me,ae){if(4!==_e||ie<8)return null;var ge=me.getUint8(ae),fe=me.getUint16(ae+1),ce=me.getUint32(ae+3),de=me.getUint8(ae+7);return 181==ge&&49==fe&&1195456820==ce&&3==de};$<R+V;){if(Q=f.getUint32($),6==(31&f.getUint8($+4)))for(var K=$+5,oe=-1;K<$+4+Q-1;){oe=0;for(var ee=255;255===ee;)oe+=ee=f.getUint8(K),K++;var ue=0;for(ee=255;255===ee;)ue+=ee=f.getUint8(K),K++;X(oe,ue,f,K)&&te.push([K,ue]),K+=ue}$+=Q+4}return te},B.extractCea608DataFromRange=function(f,R){var V=R[0],Q=[[],[]],$=31&f.getUint8(V+=8);V+=2;for(var J=0;J<$;J++){var te=f.getUint8(V),X=4&te,K=3&te;V++;var oe=f.getUint8(V);V++;var ee=f.getUint8(V);V++,X&&(127&oe)+(127&ee)!=0&&(0===K?(Q[0].push(oe),Q[0].push(ee)):1===K&&(Q[1].push(oe),Q[1].push(ee)))}return Q}}(k)},"./externals/xml2json.js":function(we,k,u){"use strict";u.r(k),k.default=function B(_){_=_||{},function y(){void 0===_.escapeMode&&(_.escapeMode=!0),void 0===_.attributePrefix&&(_.attributePrefix="_"),_.arrayAccessForm=_.arrayAccessForm||"none",_.emptyNodeForm=_.emptyNodeForm||"text",void 0===_.enableToStringFunc&&(_.enableToStringFunc=!0),_.arrayAccessFormPaths=_.arrayAccessFormPaths||[],void 0===_.skipEmptyTextNodesForObj&&(_.skipEmptyTextNodesForObj=!0),void 0===_.stripWhitespaces&&(_.stripWhitespaces=!0),_.datetimeAccessFormPaths=_.datetimeAccessFormPaths||[],void 0===_.useDoubleQuotes&&(_.useDoubleQuotes=!1),_.xmlElementsFilter=_.xmlElementsFilter||[],_.jsonPropertiesFilter=_.jsonPropertiesFilter||[],void 0===_.keepCData&&(_.keepCData=!1),void 0===_.ignoreRoot&&(_.ignoreRoot=!1)}();var D_ELEMENT_NODE=1,D_TEXT_NODE=3,D_CDATA_SECTION_NODE=4,D_COMMENT_NODE=8,D_DOCUMENT_NODE=9;function v(X){var K=X.localName;return null==K&&(K=X.baseName),(null==K||""==K)&&(K=X.nodeName),K}function L(X){return"string"==typeof X?X.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):X}function F(X,K,oe,ee){for(var ue=0;ue<X.length;ue++){var pe=X[ue];if("string"==typeof pe){if(pe==ee)break}else if(pe instanceof RegExp){if(pe.test(ee))break}else if("function"==typeof pe&&pe(K,oe,ee))break}return ue!=X.length}function m(X,K,oe){"property"===_.arrayAccessForm&&(X[K+"_asArray"]=X[K]instanceof Array?X[K]:[X[K]]),!(X[K]instanceof Array)&&_.arrayAccessFormPaths.length>0&&F(_.arrayAccessFormPaths,X,K,oe)&&(X[K]=[X[K]])}function h(X){var K=X.split(/[-T:+Z]/g),oe=new Date(K[0],K[1]-1,K[2]),ee=K[5].split(".");if(oe.setHours(K[3],K[4],ee[0]),ee.length>1&&oe.setMilliseconds(ee[1]),K[6]&&K[7]){var ue=60*K[6]+Number(K[7]);ue=0+("-"==(/\d\d-\d\d:\d\d$/.test(X)?"-":"+")?-1*ue:ue),oe.setMinutes(oe.getMinutes()-ue-oe.getTimezoneOffset())}else-1!==X.indexOf("Z",X.length-1)&&(oe=new Date(Date.UTC(oe.getFullYear(),oe.getMonth(),oe.getDate(),oe.getHours(),oe.getMinutes(),oe.getSeconds(),oe.getMilliseconds())));return oe}function S(X,K,oe,ee){return!(K==D_ELEMENT_NODE&&_.xmlElementsFilter.length>0)||F(_.xmlElementsFilter,X,oe,ee)}function C(X,K){if(X.nodeType==D_DOCUMENT_NODE){for(var oe=new Object,ee=X.childNodes,ue=0;ue<ee.length;ue++)(pe=ee[ue]).nodeType==D_ELEMENT_NODE&&(_.ignoreRoot?oe=C(pe):(oe={})[_e=v(pe)]=C(pe));return oe}if(X.nodeType==D_ELEMENT_NODE){(oe=new Object).__cnt=0;var ie=[];for(ee=X.childNodes,ue=0;ue<ee.length;ue++){var pe,_e=v(pe=ee[ue]);if(pe.nodeType!=D_COMMENT_NODE){var me=K+"."+_e;if(S(oe,pe.nodeType,_e,me))if(oe.__cnt++,null==oe[_e]){var ae=C(pe,me);("#text"!=_e||/[^\s]/.test(ae))&&((ge={})[_e]=ae,ie.push(ge)),oe[_e]=ae,m(oe,_e,me)}else{var ge;null!=oe[_e]&&(oe[_e]instanceof Array||(oe[_e]=[oe[_e]],m(oe,_e,me))),ae=C(pe,me),("#text"!=_e||/[^\s]/.test(ae))&&((ge={})[_e]=ae,ie.push(ge)),oe[_e][oe[_e].length]=ae}}}oe.__children=ie;for(var fe=v(X),ce=0;ce<X.attributes.length;ce++){var de=X.attributes[ce];oe.__cnt++;for(var se=de.value,ve=0,ne=_.matchers.length;ve<ne;ve++){var Y=_.matchers[ve];Y.test(de,fe)&&(se=Y.converter(de.value))}oe[_.attributePrefix+de.name]=se}var H=function p(X){return X.prefix}(X);return null!=H&&""!=H&&(oe.__cnt++,oe.__prefix=H),null!=oe["#text"]&&(oe.__text=oe["#text"],oe.__text instanceof Array&&(oe.__text=oe.__text.join("\n")),_.stripWhitespaces&&(oe.__text=oe.__text.trim()),delete oe["#text"],"property"==_.arrayAccessForm&&delete oe["#text_asArray"],oe.__text=function g(X,K,oe){if(_.datetimeAccessFormPaths.length>0){var ee=oe.split(".#")[0];return F(_.datetimeAccessFormPaths,X,K,ee)?h(X):X}return X}(oe.__text,_e,K+"."+_e)),null!=oe["#cdata-section"]&&(oe.__cdata=oe["#cdata-section"],delete oe["#cdata-section"],"property"==_.arrayAccessForm&&delete oe["#cdata-section_asArray"]),0==oe.__cnt&&"text"==_.emptyNodeForm?oe="":1==oe.__cnt&&null!=oe.__text?oe=oe.__text:1!=oe.__cnt||null==oe.__cdata||_.keepCData?oe.__cnt>1&&null!=oe.__text&&_.skipEmptyTextNodesForObj&&(_.stripWhitespaces&&""==oe.__text||""==oe.__text.trim())&&delete oe.__text:oe=oe.__cdata,delete oe.__cnt,_.enableToStringFunc&&(null!=oe.__text||null!=oe.__cdata)&&(oe.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),oe}if(X.nodeType==D_TEXT_NODE||X.nodeType==D_CDATA_SECTION_NODE)return X.nodeValue}function x(X,K,oe,ee){var ue="<"+(null!=X&&null!=X.__prefix?X.__prefix+":":"")+K;if(null!=oe)for(var pe=0;pe<oe.length;pe++){var _e=oe[pe],ie=X[_e];_.escapeMode&&(ie=L(ie)),ue+=" "+_e.substr(_.attributePrefix.length)+"=",ue+=_.useDoubleQuotes?'"'+ie+'"':"'"+ie+"'"}return ue+(ee?"/>":">")}function O(X,K){return"</"+(null!=X.__prefix?X.__prefix+":":"")+K+">"}function w(X,K){return!!("property"==_.arrayAccessForm&&function N(X,K){return-1!==X.indexOf(K,X.length-K.length)}(K.toString(),"_asArray")||0==K.toString().indexOf(_.attributePrefix)||0==K.toString().indexOf("__")||X[K]instanceof Function)}function P(X){var K=0;if(X instanceof Object)for(var oe in X)w(X,oe)||K++;return K}function f(X,K,oe){return 0==_.jsonPropertiesFilter.length||""==oe||F(_.jsonPropertiesFilter,X,K,oe)}function R(X){var K=[];if(X instanceof Object)for(var oe in X)-1==oe.toString().indexOf("__")&&0==oe.toString().indexOf(_.attributePrefix)&&K.push(oe);return K}function Q(X){var K="";return X instanceof Object?K+=function V(X){var K="";return null!=X.__cdata&&(K+="<![CDATA["+X.__cdata+"]]>"),null!=X.__text&&(K+=_.escapeMode?L(X.__text):X.__text),K}(X):null!=X&&(K+=_.escapeMode?L(X):X),K}function $(X,K){return""===X?K:X+"."+K}function J(X,K,oe,ee){var ue="";if(0==X.length)ue+=x(X,K,oe,!0);else for(var pe=0;pe<X.length;pe++)ue+=x(X[pe],K,R(X[pe]),!1),ue+=te(X[pe],$(ee,K)),ue+=O(X[pe],K);return ue}function te(X,K){var oe="";if(P(X)>0)for(var ue in X)if(!w(X,ue)&&(""==K||f(X,ue,$(K,ue)))){var pe=X[ue],_e=R(pe);null==pe||null==pe?oe+=x(pe,ue,_e,!0):pe instanceof Object?pe instanceof Array?oe+=J(pe,ue,_e,K):pe instanceof Date?(oe+=x(pe,ue,_e,!1),oe+=pe.toISOString(),oe+=O(pe,ue)):P(pe)>0||null!=pe.__text||null!=pe.__cdata?(oe+=x(pe,ue,_e,!1),oe+=te(pe,$(K,ue)),oe+=O(pe,ue)):oe+=x(pe,ue,_e,!0):(oe+=x(pe,ue,_e,!1),oe+=Q(pe),oe+=O(pe,ue))}return oe+Q(X)}this.parseXmlString=function(X){var oe;if(window.ActiveXObject||window,void 0===X)return null;if(window.DOMParser){var ee=new window.DOMParser;try{(oe=ee.parseFromString(X,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(oe=null)}catch{oe=null}}else 0==X.indexOf("<?")&&(X=X.substr(X.indexOf("?>")+2)),(oe=new ActiveXObject("Microsoft.XMLDOM")).async="false",oe.loadXML(X);return oe},this.asArray=function(X){return void 0===X||null==X?[]:X instanceof Array?X:[X]},this.toXmlDateTime=function(X){return X instanceof Date?X.toISOString():"number"==typeof X?new Date(X).toISOString():null},this.asDateTime=function(X){return"string"==typeof X?h(X):X},this.xml2json=function(X){return C(X)},this.xml_str2json=function(X){var K=this.parseXmlString(X);return null!=K?this.xml2json(K):null},this.json2xml_str=function(X){return te(X,"")},this.json2xml=function(X){var K=this.json2xml_str(X);return this.parseXmlString(K)},this.getVersion=function(){return"1.2.0"}}},"./index.js":function(we,k,u){"use strict";u.r(k);var B=u("./index_mediaplayerOnly.js");u.d(k,"MediaPlayer",function(){return B.MediaPlayer});var _=u("./src/streaming/utils/Capabilities.js");u.d(k,"supportsMediaSource",function(){return _.supportsMediaSource});var M=u("./src/streaming/metrics/MetricsReporting.js");u.d(k,"MetricsReporting",function(){return M.default});var y=u("./src/streaming/protection/Protection.js");u.d(k,"Protection",function(){return y.default});var D=u("./src/streaming/MediaPlayerFactory.js");u.d(k,"MediaPlayerFactory",function(){return D.default});var d=u("./src/core/Debug.js");u.d(k,"Debug",function(){return d.default}),dashjs.Protection=y.default,dashjs.MetricsReporting=M.default,dashjs.MediaPlayerFactory=D.default,dashjs.Debug=d.default,dashjs.supportsMediaSource=_.supportsMediaSource,k.default=dashjs},"./index_mediaplayerOnly.js":function(we,k,u){"use strict";u.r(k),function(B){var _=u("./src/streaming/MediaPlayer.js");u.d(k,"MediaPlayer",function(){return _.default});var M=u("./src/core/FactoryMaker.js");u.d(k,"FactoryMaker",function(){return M.default});var y=u("./src/core/Debug.js");u.d(k,"Debug",function(){return y.default});var D=u("./src/core/Version.js"),p=(u("./node_modules/es6-promise/auto.js"),typeof window<"u"&&window||B),L=p.dashjs;L||(L=p.dashjs={}),L.MediaPlayer=_.default,L.FactoryMaker=M.default,L.Debug=y.default,L.Version=Object(D.getVersionString)(),k.default=L}.call(this,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(we,k,u){"use strict";k.byteLength=function p(g){var S=v(g),x=S[1];return 3*(S[0]+x)/4-x},k.toByteArray=function b(g){for(var S,C=v(g),x=C[0],O=C[1],N=new M(function L(g,S,C){return 3*(S+C)/4-C}(0,x,O)),w=0,P=O>0?x-4:x,f=0;f<P;f+=4)S=_[g.charCodeAt(f)]<<18|_[g.charCodeAt(f+1)]<<12|_[g.charCodeAt(f+2)]<<6|_[g.charCodeAt(f+3)],N[w++]=S>>16&255,N[w++]=S>>8&255,N[w++]=255&S;return 2===O&&(S=_[g.charCodeAt(f)]<<2|_[g.charCodeAt(f+1)]>>4,N[w++]=255&S),1===O&&(S=_[g.charCodeAt(f)]<<10|_[g.charCodeAt(f+1)]<<4|_[g.charCodeAt(f+2)]>>2,N[w++]=S>>8&255,N[w++]=255&S),N},k.fromByteArray=function h(g){for(var S,C=g.length,x=C%3,O=[],N=16383,w=0,P=C-x;w<P;w+=N)O.push(m(g,w,w+N>P?P:w+N));return 1===x?O.push(B[(S=g[C-1])>>2]+B[S<<4&63]+"=="):2===x&&O.push(B[(S=(g[C-2]<<8)+g[C-1])>>10]+B[S>>4&63]+B[S<<2&63]+"="),O.join("")};for(var B=[],_=[],M=typeof Uint8Array<"u"?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=0,d=y.length;D<d;++D)B[D]=y[D],_[y.charCodeAt(D)]=D;function v(g){var S=g.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=g.indexOf("=");return-1===C&&(C=S),[C,C===S?0:4-C%4]}function F(g){return B[g>>18&63]+B[g>>12&63]+B[g>>6&63]+B[63&g]}function m(g,S,C){for(var O=[],N=S;N<C;N+=3)O.push(F((g[N]<<16&16711680)+(g[N+1]<<8&65280)+(255&g[N+2])));return O.join("")}_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(we,k,u){var B={parseBuffer:function(y){return new _(y).parse()},addBoxProcessor:function(y,D){"string"!=typeof y||"function"!=typeof D||(M.prototype._boxProcessors[y]=D)},createFile:function(){return new _},createBox:function(y,D,d){var v=M.create(y);return D&&D.append(v,d),v},createFullBox:function(y,D,d){var v=B.createBox(y,D,d);return v.version=0,v.flags=0,v},Utils:{}};B.Utils.dataViewToString=function(y,D){var d=D||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(d).decode(y);var v=[],p=0;if("utf-8"===d)for(;p<y.byteLength;){var L=y.getUint8(p++);L<128||(L<224?(L=(31&L)<<6,L|=63&y.getUint8(p++)):L<240?(L=(15&L)<<12,L|=(63&y.getUint8(p++))<<6,L|=63&y.getUint8(p++)):(L=(7&L)<<18,L|=(63&y.getUint8(p++))<<12,L|=(63&y.getUint8(p++))<<6,L|=63&y.getUint8(p++))),v.push(String.fromCharCode(L))}else for(;p<y.byteLength;)v.push(String.fromCharCode(y.getUint8(p++)));return v.join("")},B.Utils.utf8ToByteArray=function(y){var D,d;if(typeof TextEncoder<"u")D=(new TextEncoder).encode(y);else for(D=[],d=0;d<y.length;++d){var v=y.charCodeAt(d);v<128?D.push(v):v<2048?(D.push(192|v>>6),D.push(128|63&v)):v<65536?(D.push(224|v>>12),D.push(128|63&v>>6),D.push(128|63&v)):(D.push(240|v>>18),D.push(128|63&v>>12),D.push(128|63&v>>6),D.push(128|63&v))}return D},B.Utils.appendBox=function(y,D,d){if(D._offset=y._cursor.offset,D._root=y._root?y._root:y,D._raw=y._raw,D._parent=y,-1!==d){if(null==d)return void y.boxes.push(D);var p,v=-1;if("number"==typeof d)v=d;else{if("string"==typeof d)p=d;else{if("object"!=typeof d||!d.type)return void y.boxes.push(D);p=d.type}for(var L=0;L<y.boxes.length;L++)if(p===y.boxes[L].type){v=L+1;break}}y.boxes.splice(v,0,D)}},k.parseBuffer=B.parseBuffer,k.addBoxProcessor=B.addBoxProcessor,k.createFile=B.createFile,k.createBox=B.createBox,k.createFullBox=B.createFullBox,k.Utils=B.Utils,B.Cursor=function(y){this.offset=typeof y>"u"?0:y};var _=function(y){this._cursor=new B.Cursor,this.boxes=[],y&&(this._raw=new DataView(y))};_.prototype.fetch=function(y){var D=this.fetchAll(y,!0);return D.length?D[0]:null},_.prototype.fetchAll=function(y,D){var d=[];return _._sweep.call(this,y,d,D),d},_.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var y=M.parse(this);if(typeof y.type>"u")break;this.boxes.push(y)}return this},_._sweep=function(y,D,d){for(var v in this.type&&this.type==y&&D.push(this),this.boxes){if(D.length&&d)return;_._sweep.call(this.boxes[v],y,D,d)}},_.prototype.write=function(){var D,y=0;for(D=0;D<this.boxes.length;D++)y+=this.boxes[D].getLength(!1);var d=new Uint8Array(y);for(this._rawo=new DataView(d.buffer),this.bytes=d,this._cursor.offset=0,D=0;D<this.boxes.length;D++)this.boxes[D].write();return d.buffer},_.prototype.append=function(y,D){B.Utils.appendBox(this,y,D)};var M=function(){this._cursor=new B.Cursor};M.parse=function(y){var D=new M;return D._offset=y._cursor.offset,D._root=y._root?y._root:y,D._raw=y._raw,D._parent=y,D._parseBox(),y._cursor.offset=D._raw.byteOffset+D._raw.byteLength,D},M.create=function(y){var D=new M;return D.type=y,D.boxes=[],D},M.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],M.prototype._boxProcessors={},M.prototype._procField=function(y,D,d){this._parsing?this[y]=this._readField(D,d):this._writeField(D,d,this[y])},M.prototype._procFieldArray=function(y,D,d,v){var p;if(this._parsing)for(this[y]=[],p=0;p<D;p++)this[y][p]=this._readField(d,v);else for(p=0;p<this[y].length;p++)this._writeField(d,v,this[y][p])},M.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},M.prototype._procEntries=function(y,D,d){var v;if(this._parsing)for(this[y]=[],v=0;v<D;v++)this[y].push({}),d.call(this,this[y][v]);else for(v=0;v<D;v++)d.call(this,this[y][v])},M.prototype._procSubEntries=function(y,D,d,v){var p;if(this._parsing)for(y[D]=[],p=0;p<d;p++)y[D].push({}),v.call(this,y[D][p]);else for(p=0;p<d;p++)v.call(this,y[D][p])},M.prototype._procEntryField=function(y,D,d,v){this._parsing?y[D]=this._readField(d,v):this._writeField(d,v,y[D])},M.prototype._procSubBoxes=function(y,D){var d;if(this._parsing)for(this[y]=[],d=0;d<D;d++)this[y].push(M.parse(this));else for(d=0;d<D;d++)this._rawo?this[y][d].write():this.size+=this[y][d].getLength()},M.prototype._readField=function(y,D){switch(y){case"uint":return this._readUint(D);case"int":return this._readInt(D);case"template":return this._readTemplate(D);case"string":return-1===D?this._readTerminatedString():this._readString(D);case"data":return this._readData(D);case"utf8":return this._readUTF8String();default:return-1}},M.prototype._readInt=function(y){var D=null,d=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:D=this._raw.getInt8(d);break;case 16:D=this._raw.getInt16(d);break;case 32:D=this._raw.getInt32(d);break;case 64:var v=this._raw.getInt32(d),p=this._raw.getInt32(d+4);D=v*Math.pow(2,32)+p}return this._cursor.offset+=y>>3,D},M.prototype._readUint=function(y){var v,p,D=null,d=this._cursor.offset-this._raw.byteOffset;switch(y){case 8:D=this._raw.getUint8(d);break;case 16:D=this._raw.getUint16(d);break;case 24:D=((v=this._raw.getUint16(d))<<8)+(p=this._raw.getUint8(d+2));break;case 32:D=this._raw.getUint32(d);break;case 64:v=this._raw.getUint32(d),p=this._raw.getUint32(d+4),D=v*Math.pow(2,32)+p}return this._cursor.offset+=y>>3,D},M.prototype._readString=function(y){for(var D="",d=0;d<y;d++){var v=this._readUint(8);D+=String.fromCharCode(v)}return D},M.prototype._readTemplate=function(y){return this._readUint(y/2)+this._readUint(y/2)/Math.pow(2,y/2)},M.prototype._readTerminatedString=function(){for(var y="";this._cursor.offset-this._offset<this._raw.byteLength;){var D=this._readUint(8);if(0===D)break;y+=String.fromCharCode(D)}return y},M.prototype._readData=function(y){var D=y>0?y:this._raw.byteLength-(this._cursor.offset-this._offset);if(D>0){var d=new Uint8Array(this._raw.buffer,this._cursor.offset,D);return this._cursor.offset+=D,d}return null},M.prototype._readUTF8String=function(){var y=this._raw.byteLength-(this._cursor.offset-this._offset),D=null;return y>0&&(D=new DataView(this._raw.buffer,this._cursor.offset,y),this._cursor.offset+=y),D&&B.Utils.dataViewToString(D)},M.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},M.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},M.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(M.parse(this))},M.prototype.append=function(y,D){B.Utils.appendBox(this,y,D)},M.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var y=0;y<this.boxes.length;y++)this.size+=this.boxes[y].getLength();return this._data&&this._writeData(this._data),this.size},M.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var y=0;y<this.boxes.length;y++)this.boxes[y].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},M.prototype._writeInt=function(y,D){if(this._rawo){var d=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setInt8(d,D);break;case 16:this._rawo.setInt16(d,D);break;case 32:this._rawo.setInt32(d,D);break;case 64:var v=Math.floor(D/Math.pow(2,32)),p=D-v*Math.pow(2,32);this._rawo.setUint32(d,v),this._rawo.setUint32(d+4,p)}this._cursor.offset+=y>>3}else this.size+=y>>3},M.prototype._writeUint=function(y,D){if(this._rawo){var v,p,d=this._cursor.offset-this._rawo.byteOffset;switch(y){case 8:this._rawo.setUint8(d,D);break;case 16:this._rawo.setUint16(d,D);break;case 24:p=255&D,this._rawo.setUint16(d,v=(16776960&D)>>8),this._rawo.setUint8(d+2,p);break;case 32:this._rawo.setUint32(d,D);break;case 64:p=D-(v=Math.floor(D/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(d,v),this._rawo.setUint32(d+4,p)}this._cursor.offset+=y>>3}else this.size+=y>>3},M.prototype._writeString=function(y,D){for(var d=0;d<y;d++)this._writeUint(8,D.charCodeAt(d))},M.prototype._writeTerminatedString=function(y){if(0!==y.length){for(var D=0;D<y.length;D++)this._writeUint(8,y.charCodeAt(D));this._writeUint(8,0)}},M.prototype._writeTemplate=function(y,D){var d=Math.floor(D),v=(D-d)*Math.pow(2,y/2);this._writeUint(y/2,d),this._writeUint(y/2,v)},M.prototype._writeData=function(y){if(y)if(this._rawo){if(y instanceof Array){for(var d=this._cursor.offset-this._rawo.byteOffset,D=0;D<y.length;D++)this._rawo.setInt8(d+D,y[D]);this._cursor.offset+=y.length}y instanceof Uint8Array&&(this._root.bytes.set(y,this._cursor.offset),this._cursor.offset+=y.length)}else this.size+=y.length},M.prototype._writeUTF8String=function(y){var D=B.Utils.utf8ToByteArray(y);if(this._rawo)for(var d=new DataView(this._rawo.buffer,this._cursor.offset,D.length),v=0;v<D.length;v++)d.setUint8(v,D[v]);else this.size+=D.length},M.prototype._writeField=function(y,D,d){switch(y){case"uint":this._writeUint(D,d);break;case"int":this._writeInt(D,d);break;case"template":this._writeTemplate(D,d);break;case"string":-1==D?this._writeTerminatedString(d):this._writeString(D,d);break;case"data":this._writeData(d);break;case"utf8":this._writeUTF8String(d)}},M.prototype._boxProcessors.avc1=M.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},M.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},M.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"segment_duration","uint",1===this.version?64:32),this._procEntryField(y,"media_time","int",1===this.version?64:32),this._procEntryField(y,"media_rate_integer","int",16),this._procEntryField(y,"media_rate_fraction","int",16)})},M.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},M.prototype._boxProcessors.free=M.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},M.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},M.prototype._boxProcessors.ftyp=M.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var y=-1;this._parsing&&(y=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",y,"string",4)},M.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},M.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},M.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),!this._parsing&&"string"==typeof this.language&&(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},M.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},M.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},M.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},M.prototype._boxProcessors.mp4a=M.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},M.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},M.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},M.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},M.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},M.prototype._boxProcessors.sdtp=function(){this._procFullBox();var y=-1;this._parsing&&(y=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",y,"uint",8)},M.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(y){this._parsing||(y.reference=(1&y.reference_type)<<31,y.reference|=2147483647&y.referenced_size,y.sap=(1&y.starts_with_SAP)<<31,y.sap|=(3&y.SAP_type)<<28,y.sap|=268435455&y.SAP_delta_time),this._procEntryField(y,"reference","uint",32),this._procEntryField(y,"subsegment_duration","uint",32),this._procEntryField(y,"sap","uint",32),this._parsing&&(y.reference_type=y.reference>>31&1,y.referenced_size=2147483647&y.reference,y.starts_with_SAP=y.sap>>31&1,y.SAP_type=y.sap>>28&7,y.SAP_delta_time=268435455&y.sap)})},M.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},M.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(y){this._procEntryField(y,"ranges_count","uint",32),this._procSubEntries(y,"ranges",y.ranges_count,function(D){this._procEntryField(D,"level","uint",8),this._procEntryField(D,"range_size","uint",24)})})},M.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},M.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(y){this._procEntryField(y,"sample_delta","uint",32),this._procEntryField(y,"subsample_count","uint",16),this._procSubEntries(y,"subsamples",y.subsample_count,function(D){this._procEntryField(D,"subsample_size","uint",1===this.version?32:16),this._procEntryField(D,"subsample_priority","uint",8),this._procEntryField(D,"discardable","uint",8),this._procEntryField(D,"codec_specific_parameters","uint",32)})})},M.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},M.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},M.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},M.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(y){this._procEntryField(y,"time","uint",1===this.version?64:32),this._procEntryField(y,"moof_offset","uint",1===this.version?64:32),this._procEntryField(y,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(y,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(y,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},M.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},M.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},M.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(y){256&this.flags&&this._procEntryField(y,"sample_duration","uint",32),512&this.flags&&this._procEntryField(y,"sample_size","uint",32),1024&this.flags&&this._procEntryField(y,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(y,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},M.prototype._boxProcessors["url "]=M.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},M.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},M.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},M.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},M.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(we,k,u){(function(B){function C(x){return Object.prototype.toString.call(x)}k.isArray=function _(x){return Array.isArray?Array.isArray(x):"[object Array]"===C(x)},k.isBoolean=function M(x){return"boolean"==typeof x},k.isNull=function y(x){return null===x},k.isNullOrUndefined=function D(x){return null==x},k.isNumber=function d(x){return"number"==typeof x},k.isString=function v(x){return"string"==typeof x},k.isSymbol=function p(x){return"symbol"==typeof x},k.isUndefined=function L(x){return void 0===x},k.isRegExp=function b(x){return"[object RegExp]"===C(x)},k.isObject=function F(x){return"object"==typeof x&&null!==x},k.isDate=function m(x){return"[object Date]"===C(x)},k.isError=function h(x){return"[object Error]"===C(x)||x instanceof Error},k.isFunction=function g(x){return"function"==typeof x},k.isPrimitive=function S(x){return null===x||"boolean"==typeof x||"number"==typeof x||"string"==typeof x||"symbol"==typeof x||typeof x>"u"},k.isBuffer=B.isBuffer}).call(this,u("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/es6-promise/auto.js":function(we,k,u){"use strict";we.exports=u("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(we,k,u){(function(B,_){var y;y=function(){"use strict";function y(Ee){return"function"==typeof Ee}var d=Array.isArray?Array.isArray:function(Ee){return"[object Array]"===Object.prototype.toString.call(Ee)},v=0,p=void 0,L=void 0,b=function(Ce,Fe){R[v]=Ce,R[v+1]=Fe,2===(v+=2)&&(L?L(V):$())};var h=typeof window<"u"?window:void 0,g=h||{},S=g.MutationObserver||g.WebKitMutationObserver,C=typeof self>"u"&&typeof B<"u"&&"[object process]"==={}.toString.call(B),x=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function f(){var Ee=setTimeout;return function(){return Ee(V,1)}}var R=new Array(1e3);function V(){for(var Ee=0;Ee<v;Ee+=2)(0,R[Ee])(R[Ee+1]),R[Ee]=void 0,R[Ee+1]=void 0;v=0}var $=void 0;function J(Ee,Ce){var Fe=this,Oe=new this.constructor(K);void 0===Oe[X]&&U(Oe);var Le=Fe._state;if(Le){var He=arguments[Le-1];b(function(){return Y(Le,Oe,He,Fe._result)})}else ve(Fe,Oe,Ee,Ce);return Oe}function te(Ee){if(Ee&&"object"==typeof Ee&&Ee.constructor===this)return Ee;var Fe=new this(K);return fe(Fe,Ee),Fe}$=C?function O(){return function(){return B.nextTick(V)}}():S?function w(){var Ee=0,Ce=new S(V),Fe=document.createTextNode("");return Ce.observe(Fe,{characterData:!0}),function(){Fe.data=Ee=++Ee%2}}():x?function P(){var Ee=new MessageChannel;return Ee.port1.onmessage=V,function(){return Ee.port2.postMessage(0)}}():void 0===h?function Q(){try{var Ee=Function("return this")().require("vertx");return p=Ee.runOnLoop||Ee.runOnContext,function N(){return typeof p<"u"?function(){p(V)}:f()}()}catch{return f()}}():f();var X=Math.random().toString(36).substring(2);function K(){}var oe=void 0;function ge(Ee,Ce,Fe){Ce.constructor===Ee.constructor&&Fe===J&&Ce.constructor.resolve===te?function ae(Ee,Ce){1===Ce._state?de(Ee,Ce._result):2===Ce._state?se(Ee,Ce._result):ve(Ce,void 0,function(Fe){return fe(Ee,Fe)},function(Fe){return se(Ee,Fe)})}(Ee,Ce):void 0===Fe?de(Ee,Ce):y(Fe)?function me(Ee,Ce,Fe){b(function(Oe){var Le=!1,He=function ie(Ee,Ce,Fe,Oe){try{Ee.call(Ce,Fe,Oe)}catch(Le){return Le}}(Fe,Ce,function(Pe){Le||(Le=!0,Ce!==Pe?fe(Oe,Pe):de(Oe,Pe))},function(Pe){Le||(Le=!0,se(Oe,Pe))});!Le&&He&&(Le=!0,se(Oe,He))},Ee)}(Ee,Ce,Fe):de(Ee,Ce)}function fe(Ee,Ce){if(Ee===Ce)se(Ee,function pe(){return new TypeError("You cannot resolve a promise with itself")}());else if(function M(Ee){var Ce=typeof Ee;return null!==Ee&&("object"===Ce||"function"===Ce)}(Ce)){var Fe=void 0;try{Fe=Ce.then}catch(Oe){return void se(Ee,Oe)}ge(Ee,Ce,Fe)}else de(Ee,Ce)}function ce(Ee){Ee._onerror&&Ee._onerror(Ee._result),ne(Ee)}function de(Ee,Ce){Ee._state===oe&&(Ee._result=Ce,Ee._state=1,0!==Ee._subscribers.length&&b(ne,Ee))}function se(Ee,Ce){Ee._state===oe&&(Ee._state=2,Ee._result=Ce,b(ce,Ee))}function ve(Ee,Ce,Fe,Oe){var Le=Ee._subscribers,He=Le.length;Ee._onerror=null,Le[He]=Ce,Le[He+1]=Fe,Le[He+2]=Oe,0===He&&Ee._state&&b(ne,Ee)}function ne(Ee){var Ce=Ee._subscribers,Fe=Ee._state;if(0!==Ce.length){for(var Oe=void 0,Le=void 0,He=Ee._result,Pe=0;Pe<Ce.length;Pe+=3)Le=Ce[Pe+Fe],(Oe=Ce[Pe])?Y(Fe,Oe,Le,He):Le(He);Ee._subscribers.length=0}}function Y(Ee,Ce,Fe,Oe){var Le=y(Fe),He=void 0,Pe=void 0,Ue=!0;if(Le){try{He=Fe(Oe)}catch(Qe){Ue=!1,Pe=Qe}if(Ce===He)return void se(Ce,function _e(){return new TypeError("A promises callback cannot return that same promise.")}())}else He=Oe;Ce._state!==oe||(Le&&Ue?fe(Ce,He):!1===Ue?se(Ce,Pe):1===Ee?de(Ce,He):2===Ee&&se(Ce,He))}var E=0;function U(Ee){Ee[X]=E++,Ee._state=void 0,Ee._result=void 0,Ee._subscribers=[]}var re=function(){function Ee(Ce,Fe){this._instanceConstructor=Ce,this.promise=new Ce(K),this.promise[X]||U(this.promise),d(Fe)?(this.length=Fe.length,this._remaining=Fe.length,this._result=new Array(this.length),0===this.length?de(this.promise,this._result):(this.length=this.length||0,this._enumerate(Fe),0===this._remaining&&de(this.promise,this._result))):se(this.promise,function W(){return new Error("Array Methods must be provided an Array")}())}return Ee.prototype._enumerate=function(Fe){for(var Oe=0;this._state===oe&&Oe<Fe.length;Oe++)this._eachEntry(Fe[Oe],Oe)},Ee.prototype._eachEntry=function(Fe,Oe){var Le=this._instanceConstructor,He=Le.resolve;if(He===te){var Pe=void 0,Ue=void 0,Qe=!1;try{Pe=Fe.then}catch(lt){Qe=!0,Ue=lt}if(Pe===J&&Fe._state!==oe)this._settledAt(Fe._state,Oe,Fe._result);else if("function"!=typeof Pe)this._remaining--,this._result[Oe]=Fe;else if(Le===Te){var ft=new Le(K);Qe?se(ft,Ue):ge(ft,Fe,Pe),this._willSettleAt(ft,Oe)}else this._willSettleAt(new Le(function(lt){return lt(Fe)}),Oe)}else this._willSettleAt(He(Fe),Oe)},Ee.prototype._settledAt=function(Fe,Oe,Le){var He=this.promise;He._state===oe&&(this._remaining--,2===Fe?se(He,Le):this._result[Oe]=Le),0===this._remaining&&de(He,this._result)},Ee.prototype._willSettleAt=function(Fe,Oe){var Le=this;ve(Fe,void 0,function(He){return Le._settledAt(1,Oe,He)},function(He){return Le._settledAt(2,Oe,He)})},Ee}();var Te=function(){function Ee(Ce){this[X]=function I(){return E++}(),this._result=this._state=void 0,this._subscribers=[],K!==Ce&&("function"!=typeof Ce&&function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Ee?function H(Ee,Ce){try{Ce(function(Oe){fe(Ee,Oe)},function(Oe){se(Ee,Oe)})}catch(Fe){se(Ee,Fe)}}(this,Ce):function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Ee.prototype.catch=function(Fe){return this.then(null,Fe)},Ee.prototype.finally=function(Fe){var Le=this.constructor;return y(Fe)?this.then(function(He){return Le.resolve(Fe()).then(function(){return He})},function(He){return Le.resolve(Fe()).then(function(){throw He})}):this.then(Fe,Fe)},Ee}();return Te.prototype.then=J,Te.all=function De(Ee){return new re(this,Ee).promise},Te.race=function Ie(Ee){var Ce=this;return d(Ee)?new Ce(function(Fe,Oe){for(var Le=Ee.length,He=0;He<Le;He++)Ce.resolve(Ee[He]).then(Fe,Oe)}):new Ce(function(Fe,Oe){return Oe(new TypeError("You must pass an array to race."))})},Te.resolve=te,Te.reject=function le(Ee){var Fe=new this(K);return se(Fe,Ee),Fe},Te._setScheduler=function F(Ee){L=Ee},Te._setAsap=function m(Ee){b=Ee},Te._asap=b,Te.polyfill=function ye(){var Ee=void 0;if(typeof _<"u")Ee=_;else if(typeof self<"u")Ee=self;else try{Ee=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Ce=Ee.Promise;if(Ce){var Fe=null;try{Fe=Object.prototype.toString.call(Ce.resolve())}catch{}if("[object Promise]"===Fe&&!Ce.cast)return}Ee.Promise=Te},Te.Promise=Te,Te},we.exports=y()}).call(this,u("./node_modules/process/browser.js"),u("./node_modules/webpack/buildin/global.js"))},"./node_modules/fast-deep-equal/index.js":function(we,k,u){"use strict";var B=Array.isArray,_=Object.keys,M=Object.prototype.hasOwnProperty;we.exports=function y(D,d){if(D===d)return!0;if(D&&d&&"object"==typeof D&&"object"==typeof d){var L,b,F,v=B(D),p=B(d);if(v&&p){if((b=D.length)!=d.length)return!1;for(L=b;0!=L--;)if(!y(D[L],d[L]))return!1;return!0}if(v!=p)return!1;var m=D instanceof Date,h=d instanceof Date;if(m!=h)return!1;if(m&&h)return D.getTime()==d.getTime();var g=D instanceof RegExp,S=d instanceof RegExp;if(g!=S)return!1;if(g&&S)return D.toString()==d.toString();var C=_(D);if((b=C.length)!==_(d).length)return!1;for(L=b;0!=L--;)if(!M.call(d,C[L]))return!1;for(L=b;0!=L--;)if(!y(D[F=C[L]],d[F]))return!1;return!0}return D!=D&&d!=d}},"./node_modules/ieee754/index.js":function(we,k){k.read=function(u,B,_,M,y){var D,d,v=8*y-M-1,p=(1<<v)-1,L=p>>1,b=-7,F=_?y-1:0,m=_?-1:1,h=u[B+F];for(F+=m,D=h&(1<<-b)-1,h>>=-b,b+=v;b>0;D=256*D+u[B+F],F+=m,b-=8);for(d=D&(1<<-b)-1,D>>=-b,b+=M;b>0;d=256*d+u[B+F],F+=m,b-=8);if(0===D)D=1-L;else{if(D===p)return d?NaN:1/0*(h?-1:1);d+=Math.pow(2,M),D-=L}return(h?-1:1)*d*Math.pow(2,D-M)},k.write=function(u,B,_,M,y,D){var d,v,p,L=8*D-y-1,b=(1<<L)-1,F=b>>1,m=23===y?Math.pow(2,-24)-Math.pow(2,-77):0,h=M?0:D-1,g=M?1:-1,S=B<0||0===B&&1/B<0?1:0;for(B=Math.abs(B),isNaN(B)||B===1/0?(v=isNaN(B)?1:0,d=b):(d=Math.floor(Math.log(B)/Math.LN2),B*(p=Math.pow(2,-d))<1&&(d--,p*=2),(B+=d+F>=1?m/p:m*Math.pow(2,1-F))*p>=2&&(d++,p/=2),d+F>=b?(v=0,d=b):d+F>=1?(v=(B*p-1)*Math.pow(2,y),d+=F):(v=B*Math.pow(2,F-1)*Math.pow(2,y),d=0));y>=8;u[_+h]=255&v,h+=g,v/=256,y-=8);for(d=d<<y|v,L+=y;L>0;u[_+h]=255&d,h+=g,d/=256,L-=8);u[_+h-g]|=128*S}},"./node_modules/imsc/src/main/js/doc.js":function(we,k,u){!function(B,_,M,y,D){function d(E,I,U,W){var re=W&&"seq"===W.timeContainer,De=0;W&&(De=re&&U?U.end:W.begin),I.begin=I.explicit_begin?I.explicit_begin+De:De;var Ie=I.begin,le=null;for(var z in I.sets)d(E,I.sets[z],le,I),Ie="seq"===I.timeContainer?I.sets[z].end:Math.max(Ie,I.sets[z].end),le=I.sets[z];if("contents"in I)for(var G in I.contents)d(E,I.contents[G],le,I),Ie="seq"===I.timeContainer?I.contents[G].end:Math.max(Ie,I.contents[G].end),le=I.contents[G];else Ie=re?I.begin:Number.POSITIVE_INFINITY;I.end=null!==I.explicit_end&&null!==I.explicit_dur?Math.min(I.begin+I.explicit_dur,De+I.explicit_end):null===I.explicit_end&&null!==I.explicit_dur?I.begin+I.explicit_dur:null!==I.explicit_end&&null===I.explicit_dur?De+I.explicit_end:Ie,delete I.explicit_begin,delete I.explicit_dur,delete I.explicit_end,E._registerEvent(I)}function v(E){this.node=E}function p(){this.events=[],this.head=null,this.body=null}function L(){this.styling=null,this.layout=null}function b(){this.styles={}}function F(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function m(){this.regions={}}function h(E){this.kind=E}function g(E){this.id=E}function S(E){this.regionID=E}function C(E){this.styleAttrs=E}function x(E){this.sets=E}function O(E){this.contents=E}function N(E,I,U){this.explicit_begin=E,this.explicit_end=I,this.explicit_dur=U}function w(){h.call(this,"body")}function P(){h.call(this,"div")}function f(){h.call(this,"p")}function R(){h.call(this,"span")}function V(){h.call(this,"span")}function Q(){h.call(this,"br")}function $(){}function J(){}function te(E){return E&&"xml:id"in E.attributes&&E.attributes["xml:id"].value||null}function oe(E){return E&&"style"in E.attributes?E.attributes.style.value.split(" "):[]}function ee(E,I){var U={};if(null!==E)for(var W in E.attributes){var re=E.attributes[W].uri+" "+E.attributes[W].local,De=y.byQName[re];if(void 0!==De){var Ie=De.parse(E.attributes[W].value);null!==Ie?(U[re]=Ie,De===y.byName.zIndex&&ve(I,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):ne(I,"Cannot parse styling attribute "+re+" --\x3e "+E.attributes[W].value)}}return U}function ue(E,I,U){for(var W in E.attributes)if(E.attributes[W].uri===I&&E.attributes[W].local===U)return E.attributes[W].value;return null}function ae(E,I,U){var ye,Ee=null;return null!==(ye=/^(\d+(?:\.\d+)?)f$/.exec(U))?null!==I&&(Ee=parseFloat(ye[1])/I):null!==(ye=/^(\d+(?:\.\d+)?)t$/.exec(U))?null!==E&&(Ee=parseFloat(ye[1])/E):null!==(ye=/^(\d+(?:\.\d+)?)ms$/.exec(U))?Ee=parseFloat(ye[1])/1e3:null!==(ye=/^(\d+(?:\.\d+)?)s$/.exec(U))?Ee=parseFloat(ye[1]):null!==(ye=/^(\d+(?:\.\d+)?)h$/.exec(U))?Ee=3600*parseFloat(ye[1]):null!==(ye=/^(\d+(?:\.\d+)?)m$/.exec(U))?Ee=60*parseFloat(ye[1]):null!==(ye=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(U))?Ee=3600*parseInt(ye[1])+60*parseInt(ye[2])+parseFloat(ye[3]):null!==(ye=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(U))&&null!==I&&(Ee=3600*parseInt(ye[1])+60*parseInt(ye[2])+parseInt(ye[3])+(null===ye[4]?0:parseInt(ye[4])/I)),Ee}function fe(E,I,U){for(;I.styleRefs.length>0;){var W=I.styleRefs.pop();W in E.styles?(fe(E,E.styles[W],U),de(E.styles[W].styleAttrs,I.styleAttrs)):ne(U,"Non-existant style id referenced")}}function ce(E,I,U,W){for(var re=I.length-1;re>=0;re--){var De=I[re];De in E.styles?de(E.styles[De].styleAttrs,U):ne(W,"Non-existant style id referenced")}}function de(E,I){for(var U in E)U in I||(I[U]=E[U])}function ve(E,I){if(E&&E.warn&&E.warn(I))throw I}function ne(E,I){if(E&&E.error&&E.error(I))throw I}function Y(E,I){throw E&&E.fatal&&E.fatal(I),I}function H(E,I){for(var re,U=0,W=E.length-1;U<=W;){var De=E[re=Math.floor((U+W)/2)];if(De<I)U=re+1;else{if(!(De>I))return{found:!0,index:re};W=re-1}}return{found:!1,index:U}}B.fromXML=function(E,I,U){var W=_.parser(!0,{xmlns:!0}),re=[],De=[],Ie=[],le=0,z=null;W.onclosetag=function(Ce){if(re[0]instanceof b)for(var Fe in re[0].styles)fe(re[0],re[0].styles[Fe],I);else if(re[0]instanceof f||re[0]instanceof R){if(re[0].contents.length>1){var Le,Oe=[re[0].contents[0]];for(Le=1;Le<re[0].contents.length;Le++)re[0].contents[Le]instanceof V&&Oe[Oe.length-1]instanceof V?Oe[Oe.length-1].text+=re[0].contents[Le].text:Oe.push(re[0].contents[Le]);re[0].contents=Oe}re[0]instanceof R&&1===re[0].contents.length&&re[0].contents[0]instanceof V&&(re[0].text=re[0].contents[0].text,delete re[0].contents)}else re[0]instanceof v&&(re[0].node.uri===M.ns_tt&&"metadata"===re[0].node.local?le--:le>0&&U&&"onCloseTag"in U&&U.onCloseTag());Ie.shift(),De.shift(),re.shift()},W.ontext=function(Ce){if(void 0!==re[0])if(re[0]instanceof R||re[0]instanceof f){var Fe=new V;Fe.initFromText(z,re[0],Ce,Ie[0],I),re[0].contents.push(Fe)}else re[0]instanceof v&&le>0&&U&&"onText"in U&&U.onText(Ce)},W.onopentag=function(Ce){var Fe=Ce.attributes["xml:space"];Ie.unshift(Fe?Fe.value:0===Ie.length?"default":Ie[0]);var Oe=Ce.attributes["xml:lang"];if(De.unshift(Oe?Oe.value:0===De.length?"":De[0]),Ce.uri===M.ns_tt)if("tt"===Ce.local)null!==z&&Y(I,"Two <tt> elements at ("+this.line+","+this.column+")"),(z=new p).initFromNode(Ce,I),re.unshift(z);else if("head"===Ce.local)re[0]instanceof p||Y(I,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==z.head&&Y("Second <head> element at ("+this.line+","+this.column+")"),z.head=new L,re.unshift(z.head);else if("styling"===Ce.local)re[0]instanceof L||Y(I,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==z.head.styling&&Y("Second <styling> element at ("+this.line+","+this.column+")"),z.head.styling=new b,re.unshift(z.head.styling);else if("style"===Ce.local){var Le;re[0]instanceof b?((Le=new F).initFromNode(Ce,I),Le.id?z.head.styling.styles[Le.id]=Le:ne(I,"<style> element missing @id attribute"),re.unshift(Le)):re[0]instanceof $?((Le=new F).initFromNode(Ce,I),de(Le.styleAttrs,re[0].styleAttrs),re.unshift(Le)):Y(I,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===Ce.local)re[0]instanceof L||Y(I,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==z.head.layout&&Y(I,"Second <layout> element at "+this.line+","+this.column+")"),z.head.layout=new m,re.unshift(z.head.layout);else if("region"===Ce.local){re[0]instanceof m||Y(I,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var He=new $;He.initFromNode(z,Ce,I),!He.id||He.id in z.head.layout.regions?ne(I,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):z.head.layout.regions[He.id]=He,re.unshift(He)}else if("body"===Ce.local){re[0]instanceof p||Y(I,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==z.body&&Y(I,"Second <body> element at "+this.line+","+this.column+")");var Pe=new w;Pe.initFromNode(z,Ce,I),z.body=Pe,re.unshift(Pe)}else if("div"===Ce.local){re[0]instanceof P||re[0]instanceof w||Y(I,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Ue=new P;Ue.initFromNode(z,re[0],Ce,I),re[0].contents.push(Ue),re.unshift(Ue)}else if("p"===Ce.local){re[0]instanceof P||Y(I,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Qe=new f;Qe.initFromNode(z,re[0],Ce,I),re[0].contents.push(Qe),re.unshift(Qe)}else if("span"===Ce.local){re[0]instanceof R||re[0]instanceof f||Y(I,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var ft=new R;ft.initFromNode(z,re[0],Ce,Ie[0],I),re[0].contents.push(ft),re.unshift(ft)}else if("br"===Ce.local){re[0]instanceof R||re[0]instanceof f||Y(I,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var lt=new Q;lt.initFromNode(z,re[0],Ce,I),re[0].contents.push(lt),re.unshift(lt)}else if("set"===Ce.local){re[0]instanceof R||re[0]instanceof f||re[0]instanceof P||re[0]instanceof w||re[0]instanceof $||re[0]instanceof Q||Y(I,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Dt=new J;Dt.initFromNode(z,re[0],Ce,I),re[0].sets.push(Dt),re.unshift(Dt)}else re.unshift(new v(Ce));else re.unshift(new v(Ce));if(re[0]instanceof v)if(Ce.uri===M.ns_tt&&"metadata"===Ce.local)le++;else if(le>0&&U&&"onOpenTag"in U){var Ft=[];for(var Ht in Ce.attributes)Ft[Ce.attributes[Ht].uri+" "+Ce.attributes[Ht].local]={uri:Ce.attributes[Ht].uri,local:Ce.attributes[Ht].local,value:Ce.attributes[Ht].value};U.onOpenTag(Ce.uri,Ce.local,Ft)}},W.write(E).close(),null!==z.head?delete z.head.styling:z.head=new L,null===z.head.layout&&(z.head.layout=new m);var G=!1;for(var Te in z.head.layout.regions){G=!0;break}if(!G){var ye=$.prototype.createDefaultRegion();z.head.layout.regions[ye.id]=ye}for(var Ee in z.head.layout.regions)d(z,z.head.layout.regions[Ee],null,null);return z.body&&d(z,z.body,null,null),z},p.prototype.initFromNode=function(E,I){this.cellResolution=function _e(E,I){var U=ue(E,M.ns_ttp,"cellResolution"),W=15,re=32;if(null!==U){var Ie=/(\d+) (\d+)/.exec(U);null!==Ie?(re=parseInt(Ie[1]),W=parseInt(Ie[2])):ve(I,"Malformed cellResolution value (using initial value instead)")}return{w:re,h:W}}(E,I);var U=function ie(E,I){var re,U=ue(E,M.ns_ttp,"frameRate"),W=30;null!==U&&(null!==(re=/(\d+)/.exec(U))?W=parseInt(re[1]):ve(I,"Malformed frame rate attribute (using initial value instead)"));var Ie=ue(E,M.ns_ttp,"frameRateMultiplier"),le=1;null!==Ie&&(null!==(re=/(\d+) (\d+)/.exec(Ie))?le=parseInt(re[1])/parseInt(re[2]):ve(I,"Malformed frame rate multiplier attribute (using initial value instead)"));var G=le*W,Te=1,ye=ue(E,M.ns_ttp,"tickRate");return null===ye?null!==U&&(Te=G):null!==(re=/(\d+)/.exec(ye))?Te=parseInt(re[1]):ve(I,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:G,tickRate:Te}}(E,I);this.effectiveFrameRate=U.effectiveFrameRate,this.tickRate=U.tickRate,this.aspectRatio=function pe(E,I){var U=ue(E,M.ns_ittp,"aspectRatio"),W=null;if(null!==U){var De=/(\d+) (\d+)/.exec(U);if(null!==De){var Ie=parseInt(De[1]),le=parseInt(De[2]);0!==Ie&&0!==le?W=Ie/le:ne(I,"Illegal aspectRatio values (ignoring)")}else ne(I,"Malformed aspectRatio attribute (ignoring)")}return W}(E,I);var W=ue(E,M.ns_ttp,"timeBase");null!==W&&"media"!==W&&Y(I,"Unsupported time base");var re=function me(E,I){var U=ue(E,M.ns_tts,"extent");if(null===U)return null;var W=U.split(" ");if(2!==W.length)return ve(I,"Malformed extent (ignoring)"),null;var re=D.parseLength(W[0]),De=D.parseLength(W[1]);return De&&re?{h:De,w:re}:(ve(I,"Malformed extent values (ignoring)"),null)}(E,I);null===re?this.pxDimensions={h:480,w:640}:(("px"!==re.h.unit||"px"!==re.w.unit)&&Y(I,"Extent on TT must be in px or absent"),this.pxDimensions={h:re.h.value,w:re.w.value})},p.prototype._registerEvent=function(E){if(!(E.end<=E.begin)){var I=H(this.events,E.begin);if(I.found||this.events.splice(I.index,0,E.begin),E.end!==Number.POSITIVE_INFINITY){var U=H(this.events,E.end);U.found||this.events.splice(U.index,0,E.end)}}},p.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},p.prototype.getMediaTimeEvents=function(){return this.events},F.prototype.initFromNode=function(E,I){this.id=te(E),this.styleAttrs=ee(E,I),this.styleRefs=oe(E)},g.prototype.initFromNode=function(E,I,U,W){this.id=te(U)},S.prototype.initFromNode=function(E,I,U,W){this.regionID=function X(E){return E&&"region"in E.attributes?E.attributes.region.value:""}(U)},C.prototype.initFromNode=function(E,I,U,W){this.styleAttrs=ee(U,W),null!==E.head&&null!==E.head.styling&&ce(E.head.styling,oe(U),this.styleAttrs,W)},x.prototype.initFromNode=function(E,I,U,W){this.sets=[]},O.prototype.initFromNode=function(E,I,U,W){this.contents=[]},N.prototype.initFromNode=function(E,I,U,W){var re=function ge(E,I,U,W){var re=null;U&&"begin"in U.attributes&&null===(re=ae(E.tickRate,E.effectiveFrameRate,U.attributes.begin.value))&&ve(W,"Malformed begin value "+U.attributes.begin.value+" (using 0)");var De=null;U&&"dur"in U.attributes&&null===(De=ae(E.tickRate,E.effectiveFrameRate,U.attributes.dur.value))&&ve(W,"Malformed dur value "+U.attributes.dur.value+" (ignoring)");var Ie=null;return U&&"end"in U.attributes&&null===(Ie=ae(E.tickRate,E.effectiveFrameRate,U.attributes.end.value))&&ve(W,"Malformed end value (ignoring)"),{explicit_begin:re,explicit_end:Ie,explicit_dur:De}}(E,0,U,W);this.explicit_begin=re.explicit_begin,this.explicit_end=re.explicit_end,this.explicit_dur=re.explicit_dur,this.timeContainer=function K(E,I){var U=E&&"timeContainer"in E.attributes?E.attributes.timeContainer.value:null;return U&&"par"!==U?"seq"===U?"seq":(ne(I,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(U,W)},w.prototype.initFromNode=function(E,I,U){C.prototype.initFromNode.call(this,E,null,I,U),N.prototype.initFromNode.call(this,E,null,I,U),x.prototype.initFromNode.call(this,E,null,I,U),S.prototype.initFromNode.call(this,E,null,I,U),O.prototype.initFromNode.call(this,E,null,I,U)},P.prototype.initFromNode=function(E,I,U,W){C.prototype.initFromNode.call(this,E,I,U,W),N.prototype.initFromNode.call(this,E,I,U,W),x.prototype.initFromNode.call(this,E,I,U,W),S.prototype.initFromNode.call(this,E,I,U,W),O.prototype.initFromNode.call(this,E,I,U,W)},f.prototype.initFromNode=function(E,I,U,W){C.prototype.initFromNode.call(this,E,I,U,W),N.prototype.initFromNode.call(this,E,I,U,W),x.prototype.initFromNode.call(this,E,I,U,W),S.prototype.initFromNode.call(this,E,I,U,W),O.prototype.initFromNode.call(this,E,I,U,W)},R.prototype.initFromNode=function(E,I,U,W,re){C.prototype.initFromNode.call(this,E,I,U,re),N.prototype.initFromNode.call(this,E,I,U,re),x.prototype.initFromNode.call(this,E,I,U,re),S.prototype.initFromNode.call(this,E,I,U,re),O.prototype.initFromNode.call(this,E,I,U,re),this.space=W},V.prototype.initFromText=function(E,I,U,W,re){N.prototype.initFromNode.call(this,E,I,null,re),this.text=U,this.space=W},Q.prototype.initFromNode=function(E,I,U,W){S.prototype.initFromNode.call(this,E,I,U,W),N.prototype.initFromNode.call(this,E,I,U,W)},$.prototype.createDefaultRegion=function(){var E=new $;return g.call(E,""),C.call(E,{}),x.call(E,[]),N.call(E,0,Number.POSITIVE_INFINITY,null),E},$.prototype.initFromNode=function(E,I,U){g.prototype.initFromNode.call(this,E,null,I,U),C.prototype.initFromNode.call(this,E,null,I,U),N.prototype.initFromNode.call(this,E,null,I,U),x.prototype.initFromNode.call(this,E,null,I,U),null!==E.head&&null!==E.head.styling&&ce(E.head.styling,oe(I),this.styleAttrs,U)},J.prototype.initFromNode=function(E,I,U,W){N.prototype.initFromNode.call(this,E,I,U,W);var re=ee(U,W);for(var De in this.qname=null,this.value=null,re){if(this.qname){ne(W,"More than one style specified on set");break}this.qname=De,this.value=re[De]}}}(k,typeof sax>"u"?u("./node_modules/sax/lib/sax.js"):sax,typeof imscNames>"u"?u("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscStyles>"u"?u("./node_modules/imsc/src/main/js/styles.js"):imscStyles,typeof imscUtils>"u"?u("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(we,k,u){!function(B,_,M){function y(O,N,w){var P;if("region"===w.kind?(P=document.createElement("div")).style.position="absolute":"body"===w.kind||"div"===w.kind?P=document.createElement("div"):"p"===w.kind?P=document.createElement("p"):"span"===w.kind?P=document.createElement("span"):"br"===w.kind&&(P=document.createElement("br")),P){for(var f in P.style.margin="0",g){var R=g[f],V=w.styleAttrs[R.qname];void 0!==V&&null!==R.map&&R.map(O,P,w,V)}var Q=P;if("region"===w.kind){var $=w.styleAttrs[M.byName.writingMode.qname];"lrtb"===$||"lr"===$?(O.ipd="lr",O.bpd="tb"):"rltb"===$||"rl"===$?(O.ipd="rl",O.bpd="tb"):"tblr"===$?(O.ipd="tb",O.bpd="lr"):("tbrl"===$||"tb"===$)&&(O.ipd="tb",O.bpd="rl")}var J=w.styleAttrs[M.byName.linePadding.qname];if(J&&J>0){var te=Math.ceil(J*O.h)+"px";"tb"===O.bpd?(Q.style.paddingLeft=te,Q.style.paddingRight=te):(Q.style.paddingTop=te,Q.style.paddingBottom=te),O.lp=J}var X=w.styleAttrs[M.byName.multiRowAlign.qname];if(X&&"auto"!==X){var K=document.createElement("span");K.style.display="inline-block",K.style.textAlign=X,P.appendChild(K),Q=K,O.mra=X}if(w.styleAttrs[M.byName.fillLineGap.qname]&&(O.flg=!0),"span"===w.kind&&w.text)if(O.lp||O.mra||O.flg)for(var oe="",ee=0;ee<w.text.length;ee++){oe+=w.text.charAt(ee);var ue=w.text.charCodeAt(ee);if(ue<55296||ue>56319||ee===w.text.length){var pe=document.createElement("span");pe.textContent=oe,P.appendChild(pe),oe=""}}else P.textContent=w.text;for(var _e in N.appendChild(P),w.contents)y(O,Q,w.contents[_e]);var ie=[];if((O.lp||O.mra||O.flg)&&"p"===w.kind&&(F(O,Q,ie,null),O.mra&&(function d(O){for(var N=0;N<O.length-1;N++){var w=O[N].elements.length;if(0!==w&&!1===O[N].br){var P=document.createElement("br"),f=O[N].elements[w-1].node;f.parentElement.insertBefore(P,f.nextSibling)}}}(ie),O.mra=null),O.lp&&(function D(O,N,w){for(var P in O){var f=O[P].elements.length,R=O[P].elements[O[P].start_elem],V=O[P].elements[O[P].end_elem],Q=Math.ceil(N)+"px",$="-"+Math.ceil(N)+"px";0!==f&&("lr"===w.ipd?(R.node.style.borderLeftColor=R.bgcolor||"#00000000",R.node.style.borderLeftStyle="solid",R.node.style.borderLeftWidth=Q,R.node.style.marginLeft=$):"rl"===w.ipd?(R.node.style.borderRightColor=R.bgcolor||"#00000000",R.node.style.borderRightStyle="solid",R.node.style.borderRightWidth=Q,R.node.style.marginRight=$):"tb"===w.ipd&&(R.node.style.borderTopColor=R.bgcolor||"#00000000",R.node.style.borderTopStyle="solid",R.node.style.borderTopWidth=Q,R.node.style.marginTop=$),"lr"===w.ipd?(V.node.style.borderRightColor=V.bgcolor||"#00000000",V.node.style.borderRightStyle="solid",V.node.style.borderRightWidth=Q,V.node.style.marginRight=$):"rl"===w.ipd?(V.node.style.borderLeftColor=V.bgcolor||"#00000000",V.node.style.borderLeftStyle="solid",V.node.style.borderLeftWidth=Q,V.node.style.marginLeft=$):"tb"===w.ipd&&(V.node.style.borderBottomColor=V.bgcolor||"#00000000",V.node.style.borderBottomStyle="solid",V.node.style.borderBottomWidth=Q,V.node.style.marginBottom=$))}}(ie,O.lp*O.h,O),O.lp=null),O.flg)){var me=b(Q.getBoundingClientRect(),O);(function v(O,N,w,P){for(var f=Math.sign(w-N),R=0;R<=O.length;R++){var V,Q,$;if(V=0===R?N:R===O.length?w:(O[R].before+O[R-1].after)/2,R>0)for(var J=0;J<O[R-1].elements.length;J++)null!==O[R-1].elements[J].bgcolor&&f*(($=O[R-1].elements[J]).after-V)<0&&(Q=Math.ceil(Math.abs(V-$.after))+"px",$.node.style.backgroundColor=$.bgcolor,"lr"===P.bpd?$.node.style.paddingRight=Q:"rl"===P.bpd?$.node.style.paddingLeft=Q:"tb"===P.bpd&&($.node.style.paddingBottom=Q));if(R<O.length)for(var te=0;te<O[R].elements.length;te++)null!==($=O[R].elements[te]).bgcolor&&f*($.before-V)>0&&(Q=Math.ceil(Math.abs($.before-V))+"px",$.node.style.backgroundColor=$.bgcolor,"lr"===P.bpd?$.node.style.paddingLeft=Q:"rl"===P.bpd?$.node.style.paddingRight=Q:"tb"===P.bpd&&($.node.style.paddingTop=Q))}})(ie,me.before,me.after,O),O.flg=null}if("region"===w.kind&&(F(O,Q,ie),"tb"===O.bpd&&O.enableRollUp&&w.contents.length>0&&"after"===w.styleAttrs[M.byName.displayAlign.qname])){var ge=new p(""===w.id?"_":w.id,ie);if(O.currentISDState[ge.id]=ge,O.previousISDState&&ge.id in O.previousISDState&&O.previousISDState[ge.id].plist.length>0&&ge.plist.length>1&&ge.plist[ge.plist.length-2].text===O.previousISDState[ge.id].plist[O.previousISDState[ge.id].plist.length-1].text){var fe=P.firstElementChild,ce=ge.plist[ge.plist.length-1].after-ge.plist[ge.plist.length-1].before;fe.style.bottom="-"+ce+"px",fe.style.transition="transform 0.4s",fe.style.position="relative",fe.style.transform="translateY(-"+ce+"px)"}}}else!function x(O,N){if(O&&O.error&&O.error(N))throw N}(O.errorHandler,"Error processing ISD element kind: "+w.kind)}function p(O,N){this.id=O,this.plist=N}function b(O,N){var w={before:null,after:null,start:null,end:null};return"tb"===N.bpd?(w.before=O.top,w.after=O.bottom,"lr"===N.ipd?(w.start=O.left,w.end=O.right):(w.start=O.right,w.end=O.left)):"lr"===N.bpd?(w.before=O.left,w.after=O.right,w.start=O.top,w.end=O.bottom):"rl"===N.bpd&&(w.before=O.right,w.after=O.left,w.start=O.top,w.end=O.bottom),w}function F(O,N,w,P){var f=N.style.backgroundColor||P;if(0===N.childElementCount)if("span"===N.localName){var R=N.getBoundingClientRect();if(0===R.height||0===R.width)return;var V=b(R,O);if(0!==w.length&&function m(O,N,w,P){return N<P&&O>w||P<=N&&w>=O}(V.before,V.after,w[w.length-1].before,w[w.length-1].after)){var Q=Math.sign(V.after-V.before),$=Math.sign(V.end-V.start);Q*(V.before-w[w.length-1].before)<0&&(w[w.length-1].before=V.before),Q*(V.after-w[w.length-1].after)>0&&(w[w.length-1].after=V.after),$*(V.start-w[w.length-1].start)<0&&(w[w.length-1].start=V.start,w[w.length-1].start_elem=w[w.length-1].elements.length),$*(V.end-w[w.length-1].end)>0&&(w[w.length-1].end=V.end,w[w.length-1].end_elem=w[w.length-1].elements.length)}else w.push({before:V.before,after:V.after,start:V.start,end:V.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1});w[w.length-1].text+=N.textContent,w[w.length-1].elements.push({node:N,bgcolor:f,before:V.before,after:V.after})}else"br"===N.localName&&0!==w.length&&(w[w.length-1].br=!0);else for(var J=N.firstChild;J;)J.nodeType===Node.ELEMENT_NODE&&F(O,J,w,f),J=J.nextSibling}function h(O,N){this.qname=O,this.map=N}B.render=function(O,N,w,P,f,R,V,Q,$){var J=P||N.clientHeight,te=f||N.clientWidth;if(null!==O.aspectRatio){var X=J*O.aspectRatio;X>te?J=Math.round(te/O.aspectRatio):te=X}var K=document.createElement("div");K.style.position="relative",K.style.width=te+"px",K.style.height=J+"px",K.style.margin="auto",K.style.top=0,K.style.bottom=0,K.style.left=0,K.style.right=0,K.style.zIndex=0;var oe={h:J,w:te,regionH:null,regionW:null,imgResolver:w,displayForcedOnlyMode:R||!1,isd:O,errorHandler:V,previousISDState:Q,enableRollUp:$||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var ee in N.appendChild(K),O.contents)y(oe,K,O.contents[ee]);return oe.currentISDState};var g=[new h("http://www.w3.org/ns/ttml#styling backgroundColor",function(O,N,w,P){0!==P[3]&&(N.style.backgroundColor="rgba("+P[0].toString()+","+P[1].toString()+","+P[2].toString()+","+(P[3]/255).toString()+")")}),new h("http://www.w3.org/ns/ttml#styling color",function(O,N,w,P){N.style.color="rgba("+P[0].toString()+","+P[1].toString()+","+P[2].toString()+","+(P[3]/255).toString()+")"}),new h("http://www.w3.org/ns/ttml#styling direction",function(O,N,w,P){N.style.direction=P}),new h("http://www.w3.org/ns/ttml#styling display",function(O,N,w,P){}),new h("http://www.w3.org/ns/ttml#styling displayAlign",function(O,N,w,P){N.style.display="flex",N.style.flexDirection="column","before"===P?N.style.justifyContent="flex-start":"center"===P?N.style.justifyContent="center":"after"===P&&(N.style.justifyContent="flex-end")}),new h("http://www.w3.org/ns/ttml#styling extent",function(O,N,w,P){O.regionH=P.h*O.h,O.regionW=P.w*O.w;var f=0,R=0,V=w.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];V&&(f=(V[0]+V[2])*O.h,R=(V[1]+V[3])*O.w),N.style.height=O.regionH-f+"px",N.style.width=O.regionW-R+"px"}),new h("http://www.w3.org/ns/ttml#styling fontFamily",function(O,N,w,P){var f=[];for(var R in P)"monospaceSerif"===P[R]?(f.push("Courier New"),f.push('"Liberation Mono"'),f.push("Courier"),f.push("monospace")):"proportionalSansSerif"===P[R]?(f.push("Arial"),f.push("Helvetica"),f.push('"Liberation Sans"'),f.push("sans-serif")):"monospace"===P[R]?f.push("monospace"):"sansSerif"===P[R]?f.push("sans-serif"):"serif"===P[R]?f.push("serif"):"monospaceSansSerif"===P[R]?(f.push("Consolas"),f.push("monospace")):f.push("proportionalSerif"===P[R]?"serif":P[R]);N.style.fontFamily=f.join(",")}),new h("http://www.w3.org/ns/ttml#styling fontSize",function(O,N,w,P){N.style.fontSize=P*O.h+"px"}),new h("http://www.w3.org/ns/ttml#styling fontStyle",function(O,N,w,P){N.style.fontStyle=P}),new h("http://www.w3.org/ns/ttml#styling fontWeight",function(O,N,w,P){N.style.fontWeight=P}),new h("http://www.w3.org/ns/ttml#styling lineHeight",function(O,N,w,P){N.style.lineHeight="normal"===P?"normal":P*O.h+"px"}),new h("http://www.w3.org/ns/ttml#styling opacity",function(O,N,w,P){N.style.opacity=P}),new h("http://www.w3.org/ns/ttml#styling origin",function(O,N,w,P){N.style.top=P.h*O.h+"px",N.style.left=P.w*O.w+"px"}),new h("http://www.w3.org/ns/ttml#styling overflow",function(O,N,w,P){N.style.overflow=P}),new h("http://www.w3.org/ns/ttml#styling padding",function(O,N,w,P){var f=[];f[0]=P[0]*O.h+"px",f[1]=P[3]*O.w+"px",f[2]=P[2]*O.h+"px",f[3]=P[1]*O.w+"px",N.style.padding=f.join(" ")}),new h("http://www.w3.org/ns/ttml#styling showBackground",null),new h("http://www.w3.org/ns/ttml#styling textAlign",function(O,N,w,P){var R=w.styleAttrs[M.byName.direction.qname];N.style.textAlign="start"===P?"rtl"===R?"right":"left":"end"===P?"rtl"===R?"left":"right":P}),new h("http://www.w3.org/ns/ttml#styling textDecoration",function(O,N,w,P){N.style.textDecoration=P.join(" ").replace("lineThrough","line-through")}),new h("http://www.w3.org/ns/ttml#styling textOutline",function(O,N,w,P){N.style.textShadow="none"===P?"":"rgba("+P.color[0].toString()+","+P.color[1].toString()+","+P.color[2].toString()+","+(P.color[3]/255).toString()+") 0px 0px "+P.thickness*O.h+"px"}),new h("http://www.w3.org/ns/ttml#styling unicodeBidi",function(O,N,w,P){N.style.unicodeBidi="bidiOverride"===P?"bidi-override":P}),new h("http://www.w3.org/ns/ttml#styling visibility",function(O,N,w,P){N.style.visibility=P}),new h("http://www.w3.org/ns/ttml#styling wrapOption",function(O,N,w,P){N.style.whiteSpace="wrap"===P?"preserve"===w.space?"pre-wrap":"normal":"preserve"===w.space?"pre":"noWrap"}),new h("http://www.w3.org/ns/ttml#styling writingMode",function(O,N,w,P){"lrtb"===P||"lr"===P||"rltb"===P||"rl"===P?N.style.writingMode="horizontal-tb":"tblr"===P?N.style.writingMode="vertical-lr":("tbrl"===P||"tb"===P)&&(N.style.writingMode="vertical-rl")}),new h("http://www.w3.org/ns/ttml#styling zIndex",function(O,N,w,P){N.style.zIndex=P}),new h("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(O,N,w,P){if(null!==O.imgResolver&&null!==P){var f=document.createElement("img"),R=O.imgResolver(P,f);R&&(f.src=R),f.height=O.regionH,f.width=O.regionW,N.appendChild(f)}}),new h("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(O,N,w,P){O.displayForcedOnlyMode&&!1===P&&(N.style.visibility="hidden")})],S={};for(var C in g)S[g[C].qname]=g[C]}(k,typeof imscNames>"u"?u("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscStyles>"u"?u("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/isd.js":function(we,k,u){!function(B,_,M){function y(h,g,S,C,x,O,N,w,P){if(g<N.begin||g>=N.end)return null;var f="regionID"in N&&""!==N.regionID?N.regionID:O;if(null!==x&&f!==S.id&&(!("contents"in N)||"contents"in N&&0===N.contents.length||""!==f))return null;var R=new p(N);for(var V in N.sets)g<N.sets[V].begin||g>=N.sets[V].end||(R.styleAttrs[N.sets[V].qname]=N.sets[V].value);var ae,Q={};for(var $ in R.styleAttrs)if(Q[$]=!0,$===M.byName.writingMode.qname&&!(M.byName.direction.qname in R.styleAttrs)){var J=R.styleAttrs[$];"lrtb"===J||"lr"===J?R.styleAttrs[M.byName.direction.qname]="ltr":("rltb"===J||"rl"===J)&&(R.styleAttrs[M.byName.direction.qname]="rtl")}if(null!==x)for(var te in M.all){var X=M.all[te];if(X.qname===M.byName.textDecoration.qname){var K=x.styleAttrs[X.qname],oe=R.styleAttrs[X.qname],ee=[];void 0===oe?ee=K:-1===oe.indexOf("none")?((-1===oe.indexOf("noUnderline")&&-1!==K.indexOf("underline")||-1!==oe.indexOf("underline"))&&ee.push("underline"),(-1===oe.indexOf("noLineThrough")&&-1!==K.indexOf("lineThrough")||-1!==oe.indexOf("lineThrough"))&&ee.push("lineThrough"),(-1===oe.indexOf("noOverline")&&-1!==K.indexOf("overline")||-1!==oe.indexOf("overline"))&&ee.push("overline")):ee.push("none"),R.styleAttrs[X.qname]=ee}else X.inherit&&X.qname in x.styleAttrs&&!(X.qname in R.styleAttrs)&&(R.styleAttrs[X.qname]=x.styleAttrs[X.qname])}for(var ue in M.all){var pe=M.all[ue];pe.qname in R.styleAttrs||("region"===R.kind||!1===pe.inherit&&null!==pe.initial)&&(R.styleAttrs[pe.qname]=pe.parse(pe.initial),Q[pe.qname]=!0)}for(var _e in M.all){var ie=M.all[_e];if(ie.qname in Q&&null!==ie.compute){var me=ie.compute(h,x,R,R.styleAttrs[ie.qname],P);null!==me?R.styleAttrs[ie.qname]=me:F(w,"Style '"+ie.qname+"' on element '"+R.kind+"' cannot be computed")}}if("none"===R.styleAttrs[M.byName.display.qname])return null;for(var ge in null===x?ae=null===C?[]:[C]:"contents"in N&&(ae=N.contents),ae){var fe=y(h,g,S,C,R,f,ae[ge],w,P);null!==fe&&R.contents.push(fe.element)}for(var ce in R.styleAttrs)-1===M.byQName[ce].applies.indexOf(R.kind)&&delete R.styleAttrs[ce];if("span"===R.kind&&R.text&&"default"===R.space){var se=R.text.replace(/\s+/g," ");R.text=se}if("p"===R.kind){var ve=[];D(R,ve);for(var ne=0,Y="after_br",H=0;;)if("after_br"===Y)ne>=ve.length||"br"===ve[ne].kind?(Y="before_br",H=ne,ne--):("preserve"!==ve[ne].space&&(ve[ne].text=ve[ne].text.replace(/^\s+/g,"")),ve[ne].text.length>0?(Y="looking_br",ne++):ve.splice(ne,1));else if("before_br"===Y)if(ne<0||"br"===ve[ne].kind){if(Y="after_br",(ne=H+1)>=ve.length)break}else if("preserve"!==ve[ne].space&&(ve[ne].text=ve[ne].text.replace(/\s+$/g,"")),ve[ne].text.length>0){if(Y="after_br",(ne=H+1)>=ve.length)break}else ve.splice(ne,1),ne--;else ne>=ve.length||"br"===ve[ne].kind?(Y="before_br",H=ne,ne--):ne++;d(R)}return"div"===R.kind&&M.byName.backgroundImage.qname in R.styleAttrs||"br"===R.kind||"contents"in R&&R.contents.length>0||"span"===R.kind&&null!==R.text||"region"===R.kind&&"always"===R.styleAttrs[M.byName.showBackground.qname]?{region_id:f,element:R}:null}function D(h,g){if("contents"in h)for(var S in h.contents)D(h.contents[S],g);else g.push(h)}function d(h){if("br"===h.kind)return!1;if("text"in h)return 0===h.text.length;if("contents"in h){for(var g=h.contents.length;g--;)d(h.contents[g])&&h.contents.splice(g,1);return 0===h.contents.length}}function v(h){this.contents=[],this.aspectRatio=h.aspectRatio}function p(h){for(var g in this.kind=h.kind||"region",h.id&&(this.id=h.id),this.styleAttrs={},h.styleAttrs)this.styleAttrs[g]=h.styleAttrs[g];"text"in h?this.text=h.text:"br"!==h.kind&&(this.contents=[]),"space"in h&&(this.space=h.space)}function F(h,g){if(h&&h.error&&h.error(g))throw g}B.generateISD=function(h,g,S){var C=new v(h),x={};for(var O in h.head.layout.regions){var N=y(h,g,h.head.layout.regions[O],h.body,null,"",h.head.layout.regions[O],S,x);null!==N&&C.contents.push(N.element)}return C}}(k,typeof imscNames>"u"?u("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscStyles>"u"?u("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/main.js":function(we,k,u){k.generateISD=u("./node_modules/imsc/src/main/js/isd.js").generateISD,k.fromXML=u("./node_modules/imsc/src/main/js/doc.js").fromXML,k.renderHTML=u("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(we,k,u){var B;(B=k).ns_tt="http://www.w3.org/ns/ttml",B.ns_tts="http://www.w3.org/ns/ttml#styling",B.ns_ttp="http://www.w3.org/ns/ttml#parameter",B.ns_xml="http://www.w3.org/XML/1998/namespace",B.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",B.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",B.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",B.ns_ebutts="urn:ebu:tt:style"},"./node_modules/imsc/src/main/js/styles.js":function(we,k,u){!function(B,_,M){function y(v,p,L,b,F,m,h,g){this.name=p,this.ns=v,this.qname=v+" "+p,this.inherit=F,this.animatable=m,this.initial=L,this.applies=b,this.parse=h,this.compute=g}for(var D in B.all=[new y(_.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,M.parseColor,null),new y(_.ns_tts,"color","white",["span"],!0,!0,M.parseColor,null),new y(_.ns_tts,"direction","ltr",["p","span"],!0,!0,function(v){return v},null),new y(_.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(v){return v},null),new y(_.ns_tts,"displayAlign","before",["region"],!1,!0,function(v){return v},null),new y(_.ns_tts,"extent","auto",["tt","region"],!1,!0,function(v){if("auto"===v)return v;var p=v.split(" ");if(2!==p.length)return null;var L=M.parseLength(p[0]),b=M.parseLength(p[1]);return b&&L?{h:b,w:L}:null},function(v,p,L,b,F){var m,h;if("auto"===b)m=1;else if("%"===b.h.unit)m=b.h.value/100;else{if("px"!==b.h.unit)return null;m=b.h.value/v.pxDimensions.h}if("auto"===b)h=1;else if("%"===b.w.unit)h=b.w.value/100;else{if("px"!==b.w.unit)return null;h=b.w.value/v.pxDimensions.w}return{h:m,w:h}}),new y(_.ns_tts,"fontFamily","default",["span"],!0,!0,function(v){var p=v.split(","),L=[];for(var b in p)"'"!==p[b].charAt(0)&&'"'!==p[b].charAt(0)&&"default"===p[b]?L.push("monospaceSerif"):L.push(p[b]);return L},null),new y(_.ns_tts,"fontSize","1c",["span"],!0,!0,M.parseLength,function(v,p,L,b,F){var m;if("%"===b.unit)m=null!==p?p.styleAttrs[B.byName.fontSize.qname]*b.value/100:b.value/100/v.cellResolution.h;else if("em"===b.unit)m=null!==p?p.styleAttrs[B.byName.fontSize.qname]*b.value:b.value/v.cellResolution.h;else if("c"===b.unit)m=b.value/v.cellResolution.h;else{if("px"!==b.unit)return null;m=b.value/v.pxDimensions.h}return m}),new y(_.ns_tts,"fontStyle","normal",["span"],!0,!0,function(v){return v},null),new y(_.ns_tts,"fontWeight","normal",["span"],!0,!0,function(v){return v},null),new y(_.ns_tts,"lineHeight","normal",["p"],!0,!0,function(v){return"normal"===v?v:M.parseLength(v)},function(v,p,L,b,F){var m;if("normal"===b)m=b;else if("%"===b.unit)m=L.styleAttrs[B.byName.fontSize.qname]*b.value/100;else if("em"===b.unit)m=L.styleAttrs[B.byName.fontSize.qname]*b.value;else if("c"===b.unit)m=b.value/v.cellResolution.h;else{if("px"!==b.unit)return null;m=b.value/v.pxDimensions.h}return m}),new y(_.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new y(_.ns_tts,"origin","auto",["region"],!1,!0,function(v){if("auto"===v)return v;var p=v.split(" ");if(2!==p.length)return null;var L=M.parseLength(p[0]),b=M.parseLength(p[1]);return b&&L?{h:b,w:L}:null},function(v,p,L,b,F){var m,h;if("auto"===b)m=0;else if("%"===b.h.unit)m=b.h.value/100;else{if("px"!==b.h.unit)return null;m=b.h.value/v.pxDimensions.h}if("auto"===b)h=0;else if("%"===b.w.unit)h=b.w.value/100;else{if("px"!==b.w.unit)return null;h=b.w.value/v.pxDimensions.w}return{h:m,w:h}}),new y(_.ns_tts,"overflow","hidden",["region"],!1,!0,function(v){return v},null),new y(_.ns_tts,"padding","0px",["region"],!1,!0,function(v){var p=v.split(" ");if(p.length>4)return null;var L=[];for(var b in p){var F=M.parseLength(p[b]);if(!F)return null;L.push(F)}return L},function(v,p,L,b,F){var m;if(1===b.length)m=[b[0],b[0],b[0],b[0]];else if(2===b.length)m=[b[0],b[1],b[0],b[1]];else if(3===b.length)m=[b[0],b[1],b[2],b[1]];else{if(4!==b.length)return null;m=[b[0],b[1],b[2],b[3]]}var h=L.styleAttrs[B.byName.writingMode.qname];if("lrtb"===h||"lr"===h)m=[m[0],m[3],m[2],m[1]];else if("rltb"===h||"rl"===h)m=[m[0],m[1],m[2],m[3]];else if("tblr"===h)m=[m[3],m[0],m[1],m[2]];else{if("tbrl"!==h&&"tb"!==h)return null;m=[m[3],m[2],m[1],m[0]]}var g=[];for(var S in m)if(0===m[S].value)g[S]=0;else if("%"===m[S].unit)g[S]="0"===S||"2"===S?L.styleAttrs[B.byName.extent.qname].h*m[S].value/100:L.styleAttrs[B.byName.extent.qname].w*m[S].value/100;else if("em"===m[S].unit)g[S]=L.styleAttrs[B.byName.fontSize.qname]*m[S].value;else if("c"===m[S].unit)g[S]=m[S].value/v.cellResolution.h;else{if("px"!==m[S].unit)return null;g[S]="0"===S||"2"===S?m[S].value/v.pxDimensions.h:m[S].value/v.pxDimensions.w}return g}),new y(_.ns_tts,"showBackground","always",["region"],!1,!0,function(v){return v},null),new y(_.ns_tts,"textAlign","start",["p"],!0,!0,function(v){return v},function(v,p,L,b,F){return"left"===b?"start":"right"===b?"end":b}),new y(_.ns_tts,"textDecoration","none",["span"],!0,!0,function(v){return v.split(" ")},null),new y(_.ns_tts,"textOutline","none",["span"],!0,!0,function(v){if("none"===v)return v;var p={},L=v.split(" ");if(0===L.length||L.length>2)return null;var b=M.parseColor(L[0]);if(p.color=b,null!==b&&L.shift(),1!==L.length)return null;var F=M.parseLength(L[0]);return F?(p.thickness=F,p):null},function(v,p,L,b,F){if("none"===b)return b;var m={};if(m.color=null===b.color?L.styleAttrs[B.byName.color.qname]:b.color,"%"===b.thickness.unit)m.thickness=L.styleAttrs[B.byName.fontSize.qname]*b.thickness.value/100;else if("em"===b.thickness.unit)m.thickness=L.styleAttrs[B.byName.fontSize.qname]*b.thickness.value;else if("c"===b.thickness.unit)m.thickness=b.thickness.value/v.cellResolution.h;else{if("px"!==b.thickness.unit)return null;m.thickness=b.thickness.value/v.pxDimensions.h}return m}),new y(_.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(v){return v},null),new y(_.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(v){return v},null),new y(_.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(v){return v},null),new y(_.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(v){return v},null),new y(_.ns_tts,"zIndex","auto",["region"],!1,!0,function(v){var p;return"auto"===v?p=v:(p=parseInt(v),isNaN(p)&&(p=null)),p},null),new y(_.ns_ebutts,"linePadding","0c",["p"],!0,!1,M.parseLength,function(v,p,L,b,F){return"c"===b.unit?b.value/v.cellResolution.h:null}),new y(_.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(v){return v},null),new y(_.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(v){return v},null),new y(_.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(v){return"true"===v},null),new y(_.ns_itts,"fillLineGap","false",["p"],!0,!0,function(v){return"true"===v},null)],B.byQName={},B.all)B.byQName[B.all[D].qname]=B.all[D];for(var d in B.byName={},B.all)B.byName[B.all[d].name]=B.all[d]}(k,typeof imscNames>"u"?u("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscUtils>"u"?u("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(we,k,u){!function(B){var _=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,M=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,D={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};B.parseColor=function(v){var p,L=null,b=D[v.toLowerCase()];return void 0!==b?L=b:null!==(p=_.exec(v))?L=[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16),void 0!==p[4]?parseInt(p[4],16):255]:null!==(p=M.exec(v))?L=[parseInt(p[1]),parseInt(p[2]),parseInt(p[3]),255]:null!==(p=y.exec(v))&&(L=[parseInt(p[1]),parseInt(p[2]),parseInt(p[3]),parseInt(p[4])]),L};var d=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;B.parseLength=function(v){var p,L=null;return null!==(p=d.exec(v))&&(L={value:parseFloat(p[1]),unit:p[2]}),L}}(k)},"./node_modules/inherits/inherits_browser.js":function(we,k){we.exports="function"==typeof Object.create?function(B,_){B.super_=_,B.prototype=Object.create(_.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}})}:function(B,_){B.super_=_;var M=function(){};M.prototype=_.prototype,B.prototype=new M,B.prototype.constructor=B}},"./node_modules/isarray/index.js":function(we,k){var u={}.toString;we.exports=Array.isArray||function(B){return"[object Array]"==u.call(B)}},"./node_modules/node-libs-browser/node_modules/buffer/index.js":function(we,k,u){"use strict";(function(B){var _=u("./node_modules/base64-js/index.js"),M=u("./node_modules/ieee754/index.js"),y=u("./node_modules/isarray/index.js");function d(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function v(le,z){if(d()<z)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(le=new Uint8Array(z)).__proto__=p.prototype:(null===le&&(le=new p(z)),le.length=z),le}function p(le,z,G){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(le,z,G);if("number"==typeof le){if("string"==typeof z)throw new Error("If encoding is specified then the first argument must be a string");return m(this,le)}return L(this,le,z,G)}function L(le,z,G,Te){if("number"==typeof z)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&z instanceof ArrayBuffer?function S(le,z,G,Te){if(G<0||z.byteLength<G)throw new RangeError("'offset' is out of bounds");if(z.byteLength<G+(Te||0))throw new RangeError("'length' is out of bounds");return z=void 0===G&&void 0===Te?new Uint8Array(z):void 0===Te?new Uint8Array(z,G):new Uint8Array(z,G,Te),p.TYPED_ARRAY_SUPPORT?(le=z).__proto__=p.prototype:le=g(le,z),le}(le,z,G,Te):"string"==typeof z?function h(le,z,G){if(("string"!=typeof G||""===G)&&(G="utf8"),!p.isEncoding(G))throw new TypeError('"encoding" must be a valid string encoding');var Te=0|N(z,G),ye=(le=v(le,Te)).write(z,G);return ye!==Te&&(le=le.slice(0,ye)),le}(le,z,G):function C(le,z){if(p.isBuffer(z)){var G=0|x(z.length);return 0===(le=v(le,G)).length||z.copy(le,0,0,G),le}if(z){if(typeof ArrayBuffer<"u"&&z.buffer instanceof ArrayBuffer||"length"in z)return"number"!=typeof z.length||function Ie(le){return le!=le}(z.length)?v(le,0):g(le,z);if("Buffer"===z.type&&y(z.data))return g(le,z.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(le,z)}function b(le){if("number"!=typeof le)throw new TypeError('"size" argument must be a number');if(le<0)throw new RangeError('"size" argument must not be negative')}function m(le,z){if(b(z),le=v(le,z<0?0:0|x(z)),!p.TYPED_ARRAY_SUPPORT)for(var G=0;G<z;++G)le[G]=0;return le}function g(le,z){var G=z.length<0?0:0|x(z.length);le=v(le,G);for(var Te=0;Te<G;Te+=1)le[Te]=255&z[Te];return le}function x(le){if(le>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|le}function N(le,z){if(p.isBuffer(le))return le.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(le)||le instanceof ArrayBuffer))return le.byteLength;"string"!=typeof le&&(le=""+le);var G=le.length;if(0===G)return 0;for(var Te=!1;;)switch(z){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":case void 0:return I(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return re(le).length;default:if(Te)return I(le).length;z=(""+z).toLowerCase(),Te=!0}}function w(le,z,G){var Te=!1;if((void 0===z||z<0)&&(z=0),z>this.length||((void 0===G||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(z>>>=0))return"";for(le||(le="utf8");;)switch(le){case"hex":return ie(this,z,G);case"utf8":case"utf-8":return oe(this,z,G);case"ascii":return pe(this,z,G);case"latin1":case"binary":return _e(this,z,G);case"base64":return K(this,z,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,z,G);default:if(Te)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),Te=!0}}function P(le,z,G){var Te=le[z];le[z]=le[G],le[G]=Te}function f(le,z,G,Te,ye){if(0===le.length)return-1;if("string"==typeof G?(Te=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,isNaN(G)&&(G=ye?0:le.length-1),G<0&&(G=le.length+G),G>=le.length){if(ye)return-1;G=le.length-1}else if(G<0){if(!ye)return-1;G=0}if("string"==typeof z&&(z=p.from(z,Te)),p.isBuffer(z))return 0===z.length?-1:R(le,z,G,Te,ye);if("number"==typeof z)return z&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?ye?Uint8Array.prototype.indexOf.call(le,z,G):Uint8Array.prototype.lastIndexOf.call(le,z,G):R(le,[z],G,Te,ye);throw new TypeError("val must be string, number or Buffer")}function R(le,z,G,Te,ye){var Le,Ee=1,Ce=le.length,Fe=z.length;if(void 0!==Te&&("ucs2"===(Te=String(Te).toLowerCase())||"ucs-2"===Te||"utf16le"===Te||"utf-16le"===Te)){if(le.length<2||z.length<2)return-1;Ee=2,Ce/=2,Fe/=2,G/=2}function Oe(Qe,ft){return 1===Ee?Qe[ft]:Qe.readUInt16BE(ft*Ee)}if(ye){var He=-1;for(Le=G;Le<Ce;Le++)if(Oe(le,Le)===Oe(z,-1===He?0:Le-He)){if(-1===He&&(He=Le),Le-He+1===Fe)return He*Ee}else-1!==He&&(Le-=Le-He),He=-1}else for(G+Fe>Ce&&(G=Ce-Fe),Le=G;Le>=0;Le--){for(var Pe=!0,Ue=0;Ue<Fe;Ue++)if(Oe(le,Le+Ue)!==Oe(z,Ue)){Pe=!1;break}if(Pe)return Le}return-1}function V(le,z,G,Te){G=Number(G)||0;var ye=le.length-G;Te?(Te=Number(Te))>ye&&(Te=ye):Te=ye;var Ee=z.length;if(Ee%2!=0)throw new TypeError("Invalid hex string");Te>Ee/2&&(Te=Ee/2);for(var Ce=0;Ce<Te;++Ce){var Fe=parseInt(z.substr(2*Ce,2),16);if(isNaN(Fe))return Ce;le[G+Ce]=Fe}return Ce}function Q(le,z,G,Te){return De(I(z,le.length-G),le,G,Te)}function $(le,z,G,Te){return De(function U(le){for(var z=[],G=0;G<le.length;++G)z.push(255&le.charCodeAt(G));return z}(z),le,G,Te)}function J(le,z,G,Te){return $(le,z,G,Te)}function te(le,z,G,Te){return De(re(z),le,G,Te)}function X(le,z,G,Te){return De(function W(le,z){for(var G,Te,Ee=[],Ce=0;Ce<le.length&&!((z-=2)<0);++Ce)Te=(G=le.charCodeAt(Ce))>>8,Ee.push(G%256),Ee.push(Te);return Ee}(z,le.length-G),le,G,Te)}function K(le,z,G){return _.fromByteArray(0===z&&G===le.length?le:le.slice(z,G))}function oe(le,z,G){G=Math.min(le.length,G);for(var Te=[],ye=z;ye<G;){var Oe,Le,He,Pe,Ee=le[ye],Ce=null,Fe=Ee>239?4:Ee>223?3:Ee>191?2:1;if(ye+Fe<=G)switch(Fe){case 1:Ee<128&&(Ce=Ee);break;case 2:128==(192&(Oe=le[ye+1]))&&(Pe=(31&Ee)<<6|63&Oe)>127&&(Ce=Pe);break;case 3:Le=le[ye+2],128==(192&(Oe=le[ye+1]))&&128==(192&Le)&&(Pe=(15&Ee)<<12|(63&Oe)<<6|63&Le)>2047&&(Pe<55296||Pe>57343)&&(Ce=Pe);break;case 4:Le=le[ye+2],He=le[ye+3],128==(192&(Oe=le[ye+1]))&&128==(192&Le)&&128==(192&He)&&(Pe=(15&Ee)<<18|(63&Oe)<<12|(63&Le)<<6|63&He)>65535&&Pe<1114112&&(Ce=Pe)}null===Ce?(Ce=65533,Fe=1):Ce>65535&&(Te.push((Ce-=65536)>>>10&1023|55296),Ce=56320|1023&Ce),Te.push(Ce),ye+=Fe}return function ue(le){var z=le.length;if(z<=4096)return String.fromCharCode.apply(String,le);for(var G="",Te=0;Te<z;)G+=String.fromCharCode.apply(String,le.slice(Te,Te+=4096));return G}(Te)}k.Buffer=p,k.SlowBuffer=function O(le){return+le!=le&&(le=0),p.alloc(+le)},k.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=void 0!==B.TYPED_ARRAY_SUPPORT?B.TYPED_ARRAY_SUPPORT:function D(){try{var le=new Uint8Array(1);return le.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===le.foo()&&"function"==typeof le.subarray&&0===le.subarray(1,1).byteLength}catch{return!1}}(),k.kMaxLength=d(),p.poolSize=8192,p._augment=function(le){return le.__proto__=p.prototype,le},p.from=function(le,z,G){return L(null,le,z,G)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(le,z,G){return function F(le,z,G,Te){return b(z),z<=0?v(le,z):void 0!==G?"string"==typeof Te?v(le,z).fill(G,Te):v(le,z).fill(G):v(le,z)}(null,le,z,G)},p.allocUnsafe=function(le){return m(null,le)},p.allocUnsafeSlow=function(le){return m(null,le)},p.isBuffer=function(z){return!(null==z||!z._isBuffer)},p.compare=function(z,G){if(!p.isBuffer(z)||!p.isBuffer(G))throw new TypeError("Arguments must be Buffers");if(z===G)return 0;for(var Te=z.length,ye=G.length,Ee=0,Ce=Math.min(Te,ye);Ee<Ce;++Ee)if(z[Ee]!==G[Ee]){Te=z[Ee],ye=G[Ee];break}return Te<ye?-1:ye<Te?1:0},p.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(z,G){if(!y(z))throw new TypeError('"list" argument must be an Array of Buffers');if(0===z.length)return p.alloc(0);var Te;if(void 0===G)for(G=0,Te=0;Te<z.length;++Te)G+=z[Te].length;var ye=p.allocUnsafe(G),Ee=0;for(Te=0;Te<z.length;++Te){var Ce=z[Te];if(!p.isBuffer(Ce))throw new TypeError('"list" argument must be an Array of Buffers');Ce.copy(ye,Ee),Ee+=Ce.length}return ye},p.byteLength=N,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var z=this.length;if(z%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var G=0;G<z;G+=2)P(this,G,G+1);return this},p.prototype.swap32=function(){var z=this.length;if(z%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var G=0;G<z;G+=4)P(this,G,G+3),P(this,G+1,G+2);return this},p.prototype.swap64=function(){var z=this.length;if(z%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var G=0;G<z;G+=8)P(this,G,G+7),P(this,G+1,G+6),P(this,G+2,G+5),P(this,G+3,G+4);return this},p.prototype.toString=function(){var z=0|this.length;return 0===z?"":0===arguments.length?oe(this,0,z):w.apply(this,arguments)},p.prototype.equals=function(z){if(!p.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z||0===p.compare(this,z)},p.prototype.inspect=function(){var z="",G=k.INSPECT_MAX_BYTES;return this.length>0&&(z=this.toString("hex",0,G).match(/.{2}/g).join(" "),this.length>G&&(z+=" ... ")),"<Buffer "+z+">"},p.prototype.compare=function(z,G,Te,ye,Ee){if(!p.isBuffer(z))throw new TypeError("Argument must be a Buffer");if(void 0===G&&(G=0),void 0===Te&&(Te=z?z.length:0),void 0===ye&&(ye=0),void 0===Ee&&(Ee=this.length),G<0||Te>z.length||ye<0||Ee>this.length)throw new RangeError("out of range index");if(ye>=Ee&&G>=Te)return 0;if(ye>=Ee)return-1;if(G>=Te)return 1;if(this===z)return 0;for(var Ce=(Ee>>>=0)-(ye>>>=0),Fe=(Te>>>=0)-(G>>>=0),Oe=Math.min(Ce,Fe),Le=this.slice(ye,Ee),He=z.slice(G,Te),Pe=0;Pe<Oe;++Pe)if(Le[Pe]!==He[Pe]){Ce=Le[Pe],Fe=He[Pe];break}return Ce<Fe?-1:Fe<Ce?1:0},p.prototype.includes=function(z,G,Te){return-1!==this.indexOf(z,G,Te)},p.prototype.indexOf=function(z,G,Te){return f(this,z,G,Te,!0)},p.prototype.lastIndexOf=function(z,G,Te){return f(this,z,G,Te,!1)},p.prototype.write=function(z,G,Te,ye){if(void 0===G)ye="utf8",Te=this.length,G=0;else if(void 0===Te&&"string"==typeof G)ye=G,Te=this.length,G=0;else{if(!isFinite(G))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");G|=0,isFinite(Te)?(Te|=0,void 0===ye&&(ye="utf8")):(ye=Te,Te=void 0)}var Ee=this.length-G;if((void 0===Te||Te>Ee)&&(Te=Ee),z.length>0&&(Te<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");for(var Ce=!1;;)switch(ye){case"hex":return V(this,z,G,Te);case"utf8":case"utf-8":return Q(this,z,G,Te);case"ascii":return $(this,z,G,Te);case"latin1":case"binary":return J(this,z,G,Te);case"base64":return te(this,z,G,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,z,G,Te);default:if(Ce)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),Ce=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function pe(le,z,G){var Te="";G=Math.min(le.length,G);for(var ye=z;ye<G;++ye)Te+=String.fromCharCode(127&le[ye]);return Te}function _e(le,z,G){var Te="";G=Math.min(le.length,G);for(var ye=z;ye<G;++ye)Te+=String.fromCharCode(le[ye]);return Te}function ie(le,z,G){var Te=le.length;(!z||z<0)&&(z=0),(!G||G<0||G>Te)&&(G=Te);for(var ye="",Ee=z;Ee<G;++Ee)ye+=E(le[Ee]);return ye}function me(le,z,G){for(var Te=le.slice(z,G),ye="",Ee=0;Ee<Te.length;Ee+=2)ye+=String.fromCharCode(Te[Ee]+256*Te[Ee+1]);return ye}function ae(le,z,G){if(le%1!=0||le<0)throw new RangeError("offset is not uint");if(le+z>G)throw new RangeError("Trying to access beyond buffer length")}function ge(le,z,G,Te,ye,Ee){if(!p.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>ye||z<Ee)throw new RangeError('"value" argument is out of bounds');if(G+Te>le.length)throw new RangeError("Index out of range")}function fe(le,z,G,Te){z<0&&(z=65535+z+1);for(var ye=0,Ee=Math.min(le.length-G,2);ye<Ee;++ye)le[G+ye]=(z&255<<8*(Te?ye:1-ye))>>>8*(Te?ye:1-ye)}function ce(le,z,G,Te){z<0&&(z=4294967295+z+1);for(var ye=0,Ee=Math.min(le.length-G,4);ye<Ee;++ye)le[G+ye]=z>>>8*(Te?ye:3-ye)&255}function de(le,z,G,Te,ye,Ee){if(G+Te>le.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function se(le,z,G,Te,ye){return ye||de(le,0,G,4),M.write(le,z,G,Te,23,4),G+4}function ve(le,z,G,Te,ye){return ye||de(le,0,G,8),M.write(le,z,G,Te,52,8),G+8}p.prototype.slice=function(z,G){var ye,Te=this.length;if((z=~~z)<0?(z+=Te)<0&&(z=0):z>Te&&(z=Te),(G=void 0===G?Te:~~G)<0?(G+=Te)<0&&(G=0):G>Te&&(G=Te),G<z&&(G=z),p.TYPED_ARRAY_SUPPORT)(ye=this.subarray(z,G)).__proto__=p.prototype;else{var Ee=G-z;ye=new p(Ee,void 0);for(var Ce=0;Ce<Ee;++Ce)ye[Ce]=this[Ce+z]}return ye},p.prototype.readUIntLE=function(z,G,Te){z|=0,G|=0,Te||ae(z,G,this.length);for(var ye=this[z],Ee=1,Ce=0;++Ce<G&&(Ee*=256);)ye+=this[z+Ce]*Ee;return ye},p.prototype.readUIntBE=function(z,G,Te){z|=0,G|=0,Te||ae(z,G,this.length);for(var ye=this[z+--G],Ee=1;G>0&&(Ee*=256);)ye+=this[z+--G]*Ee;return ye},p.prototype.readUInt8=function(z,G){return G||ae(z,1,this.length),this[z]},p.prototype.readUInt16LE=function(z,G){return G||ae(z,2,this.length),this[z]|this[z+1]<<8},p.prototype.readUInt16BE=function(z,G){return G||ae(z,2,this.length),this[z]<<8|this[z+1]},p.prototype.readUInt32LE=function(z,G){return G||ae(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+16777216*this[z+3]},p.prototype.readUInt32BE=function(z,G){return G||ae(z,4,this.length),16777216*this[z]+(this[z+1]<<16|this[z+2]<<8|this[z+3])},p.prototype.readIntLE=function(z,G,Te){z|=0,G|=0,Te||ae(z,G,this.length);for(var ye=this[z],Ee=1,Ce=0;++Ce<G&&(Ee*=256);)ye+=this[z+Ce]*Ee;return ye>=(Ee*=128)&&(ye-=Math.pow(2,8*G)),ye},p.prototype.readIntBE=function(z,G,Te){z|=0,G|=0,Te||ae(z,G,this.length);for(var ye=G,Ee=1,Ce=this[z+--ye];ye>0&&(Ee*=256);)Ce+=this[z+--ye]*Ee;return Ce>=(Ee*=128)&&(Ce-=Math.pow(2,8*G)),Ce},p.prototype.readInt8=function(z,G){return G||ae(z,1,this.length),128&this[z]?-1*(255-this[z]+1):this[z]},p.prototype.readInt16LE=function(z,G){G||ae(z,2,this.length);var Te=this[z]|this[z+1]<<8;return 32768&Te?4294901760|Te:Te},p.prototype.readInt16BE=function(z,G){G||ae(z,2,this.length);var Te=this[z+1]|this[z]<<8;return 32768&Te?4294901760|Te:Te},p.prototype.readInt32LE=function(z,G){return G||ae(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},p.prototype.readInt32BE=function(z,G){return G||ae(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},p.prototype.readFloatLE=function(z,G){return G||ae(z,4,this.length),M.read(this,z,!0,23,4)},p.prototype.readFloatBE=function(z,G){return G||ae(z,4,this.length),M.read(this,z,!1,23,4)},p.prototype.readDoubleLE=function(z,G){return G||ae(z,8,this.length),M.read(this,z,!0,52,8)},p.prototype.readDoubleBE=function(z,G){return G||ae(z,8,this.length),M.read(this,z,!1,52,8)},p.prototype.writeUIntLE=function(z,G,Te,ye){z=+z,G|=0,Te|=0,ye||ge(this,z,G,Te,Math.pow(2,8*Te)-1,0);var Ce=1,Fe=0;for(this[G]=255&z;++Fe<Te&&(Ce*=256);)this[G+Fe]=z/Ce&255;return G+Te},p.prototype.writeUIntBE=function(z,G,Te,ye){z=+z,G|=0,Te|=0,ye||ge(this,z,G,Te,Math.pow(2,8*Te)-1,0);var Ce=Te-1,Fe=1;for(this[G+Ce]=255&z;--Ce>=0&&(Fe*=256);)this[G+Ce]=z/Fe&255;return G+Te},p.prototype.writeUInt8=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,1,255,0),p.TYPED_ARRAY_SUPPORT||(z=Math.floor(z)),this[G]=255&z,G+1},p.prototype.writeUInt16LE=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[G]=255&z,this[G+1]=z>>>8):fe(this,z,G,!0),G+2},p.prototype.writeUInt16BE=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[G]=z>>>8,this[G+1]=255&z):fe(this,z,G,!1),G+2},p.prototype.writeUInt32LE=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[G+3]=z>>>24,this[G+2]=z>>>16,this[G+1]=z>>>8,this[G]=255&z):ce(this,z,G,!0),G+4},p.prototype.writeUInt32BE=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[G]=z>>>24,this[G+1]=z>>>16,this[G+2]=z>>>8,this[G+3]=255&z):ce(this,z,G,!1),G+4},p.prototype.writeIntLE=function(z,G,Te,ye){if(z=+z,G|=0,!ye){var Ee=Math.pow(2,8*Te-1);ge(this,z,G,Te,Ee-1,-Ee)}var Ce=0,Fe=1,Oe=0;for(this[G]=255&z;++Ce<Te&&(Fe*=256);)z<0&&0===Oe&&0!==this[G+Ce-1]&&(Oe=1),this[G+Ce]=(z/Fe>>0)-Oe&255;return G+Te},p.prototype.writeIntBE=function(z,G,Te,ye){if(z=+z,G|=0,!ye){var Ee=Math.pow(2,8*Te-1);ge(this,z,G,Te,Ee-1,-Ee)}var Ce=Te-1,Fe=1,Oe=0;for(this[G+Ce]=255&z;--Ce>=0&&(Fe*=256);)z<0&&0===Oe&&0!==this[G+Ce+1]&&(Oe=1),this[G+Ce]=(z/Fe>>0)-Oe&255;return G+Te},p.prototype.writeInt8=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,1,127,-128),p.TYPED_ARRAY_SUPPORT||(z=Math.floor(z)),z<0&&(z=255+z+1),this[G]=255&z,G+1},p.prototype.writeInt16LE=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[G]=255&z,this[G+1]=z>>>8):fe(this,z,G,!0),G+2},p.prototype.writeInt16BE=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[G]=z>>>8,this[G+1]=255&z):fe(this,z,G,!1),G+2},p.prototype.writeInt32LE=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[G]=255&z,this[G+1]=z>>>8,this[G+2]=z>>>16,this[G+3]=z>>>24):ce(this,z,G,!0),G+4},p.prototype.writeInt32BE=function(z,G,Te){return z=+z,G|=0,Te||ge(this,z,G,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),p.TYPED_ARRAY_SUPPORT?(this[G]=z>>>24,this[G+1]=z>>>16,this[G+2]=z>>>8,this[G+3]=255&z):ce(this,z,G,!1),G+4},p.prototype.writeFloatLE=function(z,G,Te){return se(this,z,G,!0,Te)},p.prototype.writeFloatBE=function(z,G,Te){return se(this,z,G,!1,Te)},p.prototype.writeDoubleLE=function(z,G,Te){return ve(this,z,G,!0,Te)},p.prototype.writeDoubleBE=function(z,G,Te){return ve(this,z,G,!1,Te)},p.prototype.copy=function(z,G,Te,ye){if(Te||(Te=0),!ye&&0!==ye&&(ye=this.length),G>=z.length&&(G=z.length),G||(G=0),ye>0&&ye<Te&&(ye=Te),ye===Te||0===z.length||0===this.length)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(Te<0||Te>=this.length)throw new RangeError("sourceStart out of bounds");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),z.length-G<ye-Te&&(ye=z.length-G+Te);var Ce,Ee=ye-Te;if(this===z&&Te<G&&G<ye)for(Ce=Ee-1;Ce>=0;--Ce)z[Ce+G]=this[Ce+Te];else if(Ee<1e3||!p.TYPED_ARRAY_SUPPORT)for(Ce=0;Ce<Ee;++Ce)z[Ce+G]=this[Ce+Te];else Uint8Array.prototype.set.call(z,this.subarray(Te,Te+Ee),G);return Ee},p.prototype.fill=function(z,G,Te,ye){if("string"==typeof z){if("string"==typeof G?(ye=G,G=0,Te=this.length):"string"==typeof Te&&(ye=Te,Te=this.length),1===z.length){var Ee=z.charCodeAt(0);Ee<256&&(z=Ee)}if(void 0!==ye&&"string"!=typeof ye)throw new TypeError("encoding must be a string");if("string"==typeof ye&&!p.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye)}else"number"==typeof z&&(z&=255);if(G<0||this.length<G||this.length<Te)throw new RangeError("Out of range index");if(Te<=G)return this;var Ce;if(G>>>=0,Te=void 0===Te?this.length:Te>>>0,z||(z=0),"number"==typeof z)for(Ce=G;Ce<Te;++Ce)this[Ce]=z;else{var Fe=p.isBuffer(z)?z:I(new p(z,ye).toString()),Oe=Fe.length;for(Ce=0;Ce<Te-G;++Ce)this[Ce+G]=Fe[Ce%Oe]}return this};var ne=/[^+\/0-9A-Za-z-_]/g;function E(le){return le<16?"0"+le.toString(16):le.toString(16)}function I(le,z){z=z||1/0;for(var G,Te=le.length,ye=null,Ee=[],Ce=0;Ce<Te;++Ce){if((G=le.charCodeAt(Ce))>55295&&G<57344){if(!ye){if(G>56319){(z-=3)>-1&&Ee.push(239,191,189);continue}if(Ce+1===Te){(z-=3)>-1&&Ee.push(239,191,189);continue}ye=G;continue}if(G<56320){(z-=3)>-1&&Ee.push(239,191,189),ye=G;continue}G=65536+(ye-55296<<10|G-56320)}else ye&&(z-=3)>-1&&Ee.push(239,191,189);if(ye=null,G<128){if((z-=1)<0)break;Ee.push(G)}else if(G<2048){if((z-=2)<0)break;Ee.push(G>>6|192,63&G|128)}else if(G<65536){if((z-=3)<0)break;Ee.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((z-=4)<0)break;Ee.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return Ee}function re(le){return _.toByteArray(function Y(le){if((le=function H(le){return le.trim?le.trim():le.replace(/^\s+|\s+$/g,"")}(le).replace(ne,"")).length<2)return"";for(;le.length%4!=0;)le+="=";return le}(le))}function De(le,z,G,Te){for(var ye=0;ye<Te&&!(ye+G>=z.length||ye>=le.length);++ye)z[ye+G]=le[ye];return ye}}).call(this,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/events/events.js":function(we,k,u){"use strict";var M,B="object"==typeof Reflect?Reflect:null,_=B&&"function"==typeof B.apply?B.apply:function(f,R,V){return Function.prototype.apply.call(f,R,V)};M=B&&"function"==typeof B.ownKeys?B.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var D=Number.isNaN||function(f){return f!=f};function d(){d.init.call(this)}we.exports=d,we.exports.once=function O(P,f){return new Promise(function(R,V){function Q(J){P.removeListener(f,$),V(J)}function $(){"function"==typeof P.removeListener&&P.removeListener("error",Q),R([].slice.call(arguments))}w(P,f,$,{once:!0}),"error"!==f&&function N(P,f,R){"function"==typeof P.on&&w(P,"error",f,R)}(P,Q,{once:!0})})},d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var v=10;function p(P){if("function"!=typeof P)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}function L(P){return void 0===P._maxListeners?d.defaultMaxListeners:P._maxListeners}function b(P,f,R,V){var Q,$,J;if(p(R),void 0===($=P._events)?($=P._events=Object.create(null),P._eventsCount=0):(void 0!==$.newListener&&(P.emit("newListener",f,R.listener?R.listener:R),$=P._events),J=$[f]),void 0===J)J=$[f]=R,++P._eventsCount;else if("function"==typeof J?J=$[f]=V?[R,J]:[J,R]:V?J.unshift(R):J.push(R),(Q=L(P))>0&&J.length>Q&&!J.warned){J.warned=!0;var te=new Error("Possible EventEmitter memory leak detected. "+J.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");te.name="MaxListenersExceededWarning",te.emitter=P,te.type=f,te.count=J.length,function y(P){console&&console.warn&&console.warn(P)}(te)}return P}function F(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(P,f,R){var V={fired:!1,wrapFn:void 0,target:P,type:f,listener:R},Q=F.bind(V);return Q.listener=R,V.wrapFn=Q,Q}function h(P,f,R){var V=P._events;if(void 0===V)return[];var Q=V[f];return void 0===Q?[]:"function"==typeof Q?R?[Q.listener||Q]:[Q]:R?function x(P){for(var f=new Array(P.length),R=0;R<f.length;++R)f[R]=P[R].listener||P[R];return f}(Q):S(Q,Q.length)}function g(P){var f=this._events;if(void 0!==f){var R=f[P];if("function"==typeof R)return 1;if(void 0!==R)return R.length}return 0}function S(P,f){for(var R=new Array(f),V=0;V<f;++V)R[V]=P[V];return R}function w(P,f,R,V){if("function"==typeof P.on)V.once?P.once(f,R):P.on(f,R);else{if("function"!=typeof P.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P);P.addEventListener(f,function Q($){V.once&&P.removeEventListener(f,Q),R($)})}}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(P){if("number"!=typeof P||P<0||D(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");v=P}}),d.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(f){if("number"!=typeof f||f<0||D(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},d.prototype.getMaxListeners=function(){return L(this)},d.prototype.emit=function(f){for(var R=[],V=1;V<arguments.length;V++)R.push(arguments[V]);var Q="error"===f,$=this._events;if(void 0!==$)Q=Q&&void 0===$.error;else if(!Q)return!1;if(Q){var J;if(R.length>0&&(J=R[0]),J instanceof Error)throw J;var te=new Error("Unhandled error."+(J?" ("+J.message+")":""));throw te.context=J,te}var X=$[f];if(void 0===X)return!1;if("function"==typeof X)_(X,this,R);else{var K=X.length,oe=S(X,K);for(V=0;V<K;++V)_(oe[V],this,R)}return!0},d.prototype.on=d.prototype.addListener=function(f,R){return b(this,f,R,!1)},d.prototype.prependListener=function(f,R){return b(this,f,R,!0)},d.prototype.once=function(f,R){return p(R),this.on(f,m(this,f,R)),this},d.prototype.prependOnceListener=function(f,R){return p(R),this.prependListener(f,m(this,f,R)),this},d.prototype.off=d.prototype.removeListener=function(f,R){var V,Q,$,J,te;if(p(R),void 0===(Q=this._events))return this;if(void 0===(V=Q[f]))return this;if(V===R||V.listener===R)0==--this._eventsCount?this._events=Object.create(null):(delete Q[f],Q.removeListener&&this.emit("removeListener",f,V.listener||R));else if("function"!=typeof V){for($=-1,J=V.length-1;J>=0;J--)if(V[J]===R||V[J].listener===R){te=V[J].listener,$=J;break}if($<0)return this;0===$?V.shift():function C(P,f){for(;f+1<P.length;f++)P[f]=P[f+1];P.pop()}(V,$),1===V.length&&(Q[f]=V[0]),void 0!==Q.removeListener&&this.emit("removeListener",f,te||R)}return this},d.prototype.removeAllListeners=function(f){var R,V,Q;if(void 0===(V=this._events))return this;if(void 0===V.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==V[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete V[f]),this;if(0===arguments.length){var J,$=Object.keys(V);for(Q=0;Q<$.length;++Q)"removeListener"!==(J=$[Q])&&this.removeAllListeners(J);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(R=V[f]))this.removeListener(f,R);else if(void 0!==R)for(Q=R.length-1;Q>=0;Q--)this.removeListener(f,R[Q]);return this},d.prototype.listeners=function(f){return h(this,f,!0)},d.prototype.rawListeners=function(f){return h(this,f,!1)},d.listenerCount=function(P,f){return"function"==typeof P.listenerCount?P.listenerCount(f):g.call(P,f)},d.prototype.listenerCount=g,d.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]}},"./node_modules/node-libs-browser/node_modules/timers-browserify/main.js":function(we,k,u){(function(B){var _=typeof B<"u"&&B||typeof self<"u"&&self||window,M=Function.prototype.apply;function y(D,d){this._id=D,this._clearFn=d}k.setTimeout=function(){return new y(M.call(setTimeout,_,arguments),clearTimeout)},k.setInterval=function(){return new y(M.call(setInterval,_,arguments),clearInterval)},k.clearTimeout=k.clearInterval=function(D){D&&D.close()},y.prototype.unref=y.prototype.ref=function(){},y.prototype.close=function(){this._clearFn.call(_,this._id)},k.enroll=function(D,d){clearTimeout(D._idleTimeoutId),D._idleTimeout=d},k.unenroll=function(D){clearTimeout(D._idleTimeoutId),D._idleTimeout=-1},k._unrefActive=k.active=function(D){clearTimeout(D._idleTimeoutId);var d=D._idleTimeout;d>=0&&(D._idleTimeoutId=setTimeout(function(){D._onTimeout&&D._onTimeout()},d))},u("./node_modules/setimmediate/setImmediate.js"),k.setImmediate=typeof self<"u"&&self.setImmediate||typeof B<"u"&&B.setImmediate||this&&this.setImmediate,k.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof B<"u"&&B.clearImmediate||this&&this.clearImmediate}).call(this,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/path-browserify/index.js":function(we,k,u){(function(B){function _(d,v){for(var p=0,L=d.length-1;L>=0;L--){var b=d[L];"."===b?d.splice(L,1):".."===b?(d.splice(L,1),p++):p&&(d.splice(L,1),p--)}if(v)for(;p--;p)d.unshift("..");return d}function y(d,v){if(d.filter)return d.filter(v);for(var p=[],L=0;L<d.length;L++)v(d[L],L,d)&&p.push(d[L]);return p}k.resolve=function(){for(var d="",v=!1,p=arguments.length-1;p>=-1&&!v;p--){var L=p>=0?arguments[p]:B.cwd();if("string"!=typeof L)throw new TypeError("Arguments to path.resolve must be strings");L&&(d=L+"/"+d,v="/"===L.charAt(0))}return(v?"/":"")+(d=_(y(d.split("/"),function(b){return!!b}),!v).join("/"))||"."},k.normalize=function(d){var v=k.isAbsolute(d),p="/"===D(d,-1);return!(d=_(y(d.split("/"),function(L){return!!L}),!v).join("/"))&&!v&&(d="."),d&&p&&(d+="/"),(v?"/":"")+d},k.isAbsolute=function(d){return"/"===d.charAt(0)},k.join=function(){var d=Array.prototype.slice.call(arguments,0);return k.normalize(y(d,function(v,p){if("string"!=typeof v)throw new TypeError("Arguments to path.join must be strings");return v}).join("/"))},k.relative=function(d,v){function p(S){for(var C=0;C<S.length&&""===S[C];C++);for(var x=S.length-1;x>=0&&""===S[x];x--);return C>x?[]:S.slice(C,x-C+1)}d=k.resolve(d).substr(1),v=k.resolve(v).substr(1);for(var L=p(d.split("/")),b=p(v.split("/")),F=Math.min(L.length,b.length),m=F,h=0;h<F;h++)if(L[h]!==b[h]){m=h;break}var g=[];for(h=m;h<L.length;h++)g.push("..");return(g=g.concat(b.slice(m))).join("/")},k.sep="/",k.delimiter=":",k.dirname=function(d){if("string"!=typeof d&&(d+=""),0===d.length)return".";for(var v=d.charCodeAt(0),p=47===v,L=-1,b=!0,F=d.length-1;F>=1;--F)if(47===(v=d.charCodeAt(F))){if(!b){L=F;break}}else b=!1;return-1===L?p?"/":".":p&&1===L?"/":d.slice(0,L)},k.basename=function(d,v){var p=function M(d){"string"!=typeof d&&(d+="");var b,v=0,p=-1,L=!0;for(b=d.length-1;b>=0;--b)if(47===d.charCodeAt(b)){if(!L){v=b+1;break}}else-1===p&&(L=!1,p=b+1);return-1===p?"":d.slice(v,p)}(d);return v&&p.substr(-1*v.length)===v&&(p=p.substr(0,p.length-v.length)),p},k.extname=function(d){"string"!=typeof d&&(d+="");for(var v=-1,p=0,L=-1,b=!0,F=0,m=d.length-1;m>=0;--m){var h=d.charCodeAt(m);if(47!==h)-1===L&&(b=!1,L=m+1),46===h?-1===v?v=m:1!==F&&(F=1):-1!==v&&(F=-1);else if(!b){p=m+1;break}}return-1===v||-1===L||0===F||1===F&&v===L-1&&v===p+1?"":d.slice(v,L)};var D=function(d,v,p){return d.substr(v,p)}}).call(this,u("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(we,k,u){"use strict";(function(B){we.exports=!B.version||0===B.version.indexOf("v0.")||0===B.version.indexOf("v1.")&&0!==B.version.indexOf("v1.8.")?{nextTick:function _(M,y,D,d){if("function"!=typeof M)throw new TypeError('"callback" argument must be a function');var p,L,v=arguments.length;switch(v){case 0:case 1:return B.nextTick(M);case 2:return B.nextTick(function(){M.call(null,y)});case 3:return B.nextTick(function(){M.call(null,y,D)});case 4:return B.nextTick(function(){M.call(null,y,D,d)});default:for(p=new Array(v-1),L=0;L<p.length;)p[L++]=arguments[L];return B.nextTick(function(){M.apply(null,p)})}}}:B}).call(this,u("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(we,k){var B,_,u=we.exports={};function M(){throw new Error("setTimeout has not been defined")}function y(){throw new Error("clearTimeout has not been defined")}function D(S){if(B===setTimeout)return setTimeout(S,0);if((B===M||!B)&&setTimeout)return B=setTimeout,setTimeout(S,0);try{return B(S,0)}catch{try{return B.call(null,S,0)}catch{return B.call(this,S,0)}}}!function(){try{B="function"==typeof setTimeout?setTimeout:M}catch{B=M}try{_="function"==typeof clearTimeout?clearTimeout:y}catch{_=y}}();var L,v=[],p=!1,b=-1;function F(){!p||!L||(p=!1,L.length?v=L.concat(v):b=-1,v.length&&m())}function m(){if(!p){var S=D(F);p=!0;for(var C=v.length;C;){for(L=v,v=[];++b<C;)L&&L[b].run();b=-1,C=v.length}L=null,p=!1,function d(S){if(_===clearTimeout)return clearTimeout(S);if((_===y||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(S);try{return _(S)}catch{try{return _.call(null,S)}catch{return _.call(this,S)}}}(S)}}function h(S,C){this.fun=S,this.array=C}function g(){}u.nextTick=function(S){var C=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)C[x-1]=arguments[x];v.push(new h(S,C)),1===v.length&&!p&&D(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=g,u.addListener=g,u.once=g,u.off=g,u.removeListener=g,u.removeAllListeners=g,u.emit=g,u.prependListener=g,u.prependOnceListener=g,u.listeners=function(S){return[]},u.binding=function(S){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(S){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(we,k,u){we.exports=u("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(we,k,u){"use strict";var B=u("./node_modules/process-nextick-args/index.js"),_=Object.keys||function(m){var h=[];for(var g in m)h.push(g);return h};we.exports=L;var M=u("./node_modules/core-util-is/lib/util.js");M.inherits=u("./node_modules/inherits/inherits_browser.js");var y=u("./node_modules/readable-stream/lib/_stream_readable.js"),D=u("./node_modules/readable-stream/lib/_stream_writable.js");M.inherits(L,y);for(var d=_(D.prototype),v=0;v<d.length;v++){var p=d[v];L.prototype[p]||(L.prototype[p]=D.prototype[p])}function L(m){if(!(this instanceof L))return new L(m);y.call(this,m),D.call(this,m),m&&!1===m.readable&&(this.readable=!1),m&&!1===m.writable&&(this.writable=!1),this.allowHalfOpen=!0,m&&!1===m.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",b)}function b(){this.allowHalfOpen||this._writableState.ended||B.nextTick(F,this)}function F(m){m.end()}Object.defineProperty(L.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(L.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),L.prototype._destroy=function(m,h){this.push(null),this.end(),B.nextTick(h,m)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(we,k,u){"use strict";we.exports=M;var B=u("./node_modules/readable-stream/lib/_stream_transform.js"),_=u("./node_modules/core-util-is/lib/util.js");function M(y){if(!(this instanceof M))return new M(y);B.call(this,y)}_.inherits=u("./node_modules/inherits/inherits_browser.js"),_.inherits(M,B),M.prototype._transform=function(y,D,d){d(null,y)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(we,k,u){"use strict";(function(B,_){var M=u("./node_modules/process-nextick-args/index.js");we.exports=f;var D,y=u("./node_modules/isarray/index.js");f.ReadableState=P,u("./node_modules/node-libs-browser/node_modules/events/events.js");var v=function(H,E){return H.listeners(E).length},p=u("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),L=u("./node_modules/safe-buffer/index.js").Buffer,b=B.Uint8Array||function(){};var h=u("./node_modules/core-util-is/lib/util.js");h.inherits=u("./node_modules/inherits/inherits_browser.js");var g=u(0),S=void 0;S=g&&g.debuglog?g.debuglog("stream"):function(){};var O,C=u("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),x=u("./node_modules/readable-stream/lib/internal/streams/destroy.js");h.inherits(f,p);var N=["error","close","destroy","pause","resume"];function P(H,E){var I=E instanceof(D=D||u("./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!(H=H||{}).objectMode,I&&(this.objectMode=this.objectMode||!!H.readableObjectMode);var U=H.highWaterMark,W=H.readableHighWaterMark;this.highWaterMark=U||0===U?U:I&&(W||0===W)?W:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new C,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=H.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,H.encoding&&(O||(O=u("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new O(H.encoding),this.encoding=H.encoding)}function f(H){if(D=D||u("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof f))return new f(H);this._readableState=new P(H,this),this.readable=!0,H&&("function"==typeof H.read&&(this._read=H.read),"function"==typeof H.destroy&&(this._destroy=H.destroy)),p.call(this)}function R(H,E,I,U,W){var De,re=H._readableState;return null===E?(re.reading=!1,function K(H,E){if(!E.ended){if(E.decoder){var I=E.decoder.end();I&&I.length&&(E.buffer.push(I),E.length+=E.objectMode?1:I.length)}E.ended=!0,oe(H)}}(H,re)):(W||(De=function Q(H,E){var I;return!function m(H){return L.isBuffer(H)||H instanceof b}(E)&&"string"!=typeof E&&void 0!==E&&!H.objectMode&&(I=new TypeError("Invalid non-string/buffer chunk")),I}(re,E)),De?H.emit("error",De):re.objectMode||E&&E.length>0?("string"!=typeof E&&!re.objectMode&&Object.getPrototypeOf(E)!==L.prototype&&(E=function F(H){return L.from(H)}(E)),U?re.endEmitted?H.emit("error",new Error("stream.unshift() after end event")):V(H,re,E,!0):re.ended?H.emit("error",new Error("stream.push() after EOF")):(re.reading=!1,re.decoder&&!I?(E=re.decoder.write(E),re.objectMode||0!==E.length?V(H,re,E,!1):ue(H,re)):V(H,re,E,!1))):U||(re.reading=!1)),function $(H){return!H.ended&&(H.needReadable||H.length<H.highWaterMark||0===H.length)}(re)}function V(H,E,I,U){E.flowing&&0===E.length&&!E.sync?(H.emit("data",I),H.read(0)):(E.length+=E.objectMode?1:I.length,U?E.buffer.unshift(I):E.buffer.push(I),E.needReadable&&oe(H)),ue(H,E)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(H){!this._readableState||(this._readableState.destroyed=H)}}),f.prototype.destroy=x.destroy,f.prototype._undestroy=x.undestroy,f.prototype._destroy=function(H,E){this.push(null),E(H)},f.prototype.push=function(H,E){var U,I=this._readableState;return I.objectMode?U=!0:"string"==typeof H&&((E=E||I.defaultEncoding)!==I.encoding&&(H=L.from(H,E),E=""),U=!0),R(this,H,E,!1,U)},f.prototype.unshift=function(H){return R(this,H,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(H){return O||(O=u("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new O(H),this._readableState.encoding=H,this};var J=8388608;function X(H,E){return H<=0||0===E.length&&E.ended?0:E.objectMode?1:H!=H?E.flowing&&E.length?E.buffer.head.data.length:E.length:(H>E.highWaterMark&&(E.highWaterMark=function te(H){return H>=J?H=J:(H--,H|=H>>>1,H|=H>>>2,H|=H>>>4,H|=H>>>8,H|=H>>>16,H++),H}(H)),H<=E.length?H:E.ended?E.length:(E.needReadable=!0,0))}function oe(H){var E=H._readableState;E.needReadable=!1,E.emittedReadable||(S("emitReadable",E.flowing),E.emittedReadable=!0,E.sync?M.nextTick(ee,H):ee(H))}function ee(H){S("emit readable"),H.emit("readable"),ge(H)}function ue(H,E){E.readingMore||(E.readingMore=!0,M.nextTick(pe,H,E))}function pe(H,E){for(var I=E.length;!E.reading&&!E.flowing&&!E.ended&&E.length<E.highWaterMark&&(S("maybeReadMore read 0"),H.read(0),I!==E.length);)I=E.length;E.readingMore=!1}function ie(H){S("readable nexttick read 0"),H.read(0)}function ae(H,E){E.reading||(S("resume read 0"),H.read(0)),E.resumeScheduled=!1,E.awaitDrain=0,H.emit("resume"),ge(H),E.flowing&&!E.reading&&H.read(0)}function ge(H){var E=H._readableState;for(S("flow",E.flowing);E.flowing&&null!==H.read(););}function fe(H,E){return 0===E.length?null:(E.objectMode?I=E.buffer.shift():!H||H>=E.length?(I=E.decoder?E.buffer.join(""):1===E.buffer.length?E.buffer.head.data:E.buffer.concat(E.length),E.buffer.clear()):I=function ce(H,E,I){var U;return H<E.head.data.length?(U=E.head.data.slice(0,H),E.head.data=E.head.data.slice(H)):U=H===E.head.data.length?E.shift():I?function de(H,E){var I=E.head,U=1,W=I.data;for(H-=W.length;I=I.next;){var re=I.data,De=H>re.length?re.length:H;if(W+=De===re.length?re:re.slice(0,H),0==(H-=De)){De===re.length?(++U,E.head=I.next?I.next:E.tail=null):(E.head=I,I.data=re.slice(De));break}++U}return E.length-=U,W}(H,E):function se(H,E){var I=L.allocUnsafe(H),U=E.head,W=1;for(U.data.copy(I),H-=U.data.length;U=U.next;){var re=U.data,De=H>re.length?re.length:H;if(re.copy(I,I.length-H,0,De),0==(H-=De)){De===re.length?(++W,E.head=U.next?U.next:E.tail=null):(E.head=U,U.data=re.slice(De));break}++W}return E.length-=W,I}(H,E),U}(H,E.buffer,E.decoder),I);var I}function ve(H){var E=H._readableState;if(E.length>0)throw new Error('"endReadable()" called on non-empty stream');E.endEmitted||(E.ended=!0,M.nextTick(ne,E,H))}function ne(H,E){!H.endEmitted&&0===H.length&&(H.endEmitted=!0,E.readable=!1,E.emit("end"))}function Y(H,E){for(var I=0,U=H.length;I<U;I++)if(H[I]===E)return I;return-1}f.prototype.read=function(H){S("read",H),H=parseInt(H,10);var E=this._readableState,I=H;if(0!==H&&(E.emittedReadable=!1),0===H&&E.needReadable&&(E.length>=E.highWaterMark||E.ended))return S("read: emitReadable",E.length,E.ended),0===E.length&&E.ended?ve(this):oe(this),null;if(0===(H=X(H,E))&&E.ended)return 0===E.length&&ve(this),null;var W,U=E.needReadable;return S("need readable",U),(0===E.length||E.length-H<E.highWaterMark)&&S("length less than watermark",U=!0),E.ended||E.reading?S("reading or ended",U=!1):U&&(S("do read"),E.reading=!0,E.sync=!0,0===E.length&&(E.needReadable=!0),this._read(E.highWaterMark),E.sync=!1,E.reading||(H=X(I,E))),null===(W=H>0?fe(H,E):null)?(E.needReadable=!0,H=0):E.length-=H,0===E.length&&(E.ended||(E.needReadable=!0),I!==H&&E.ended&&ve(this)),null!==W&&this.emit("data",W),W},f.prototype._read=function(H){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(H,E){var I=this,U=this._readableState;switch(U.pipesCount){case 0:U.pipes=H;break;case 1:U.pipes=[U.pipes,H];break;default:U.pipes.push(H)}U.pipesCount+=1,S("pipe count=%d opts=%j",U.pipesCount,E);var re=E&&!1===E.end||H===_.stdout||H===_.stderr?Oe:Ie;function De(Le,He){S("onunpipe"),Le===I&&He&&!1===He.hasUnpiped&&(He.hasUnpiped=!0,function G(){S("cleanup"),H.removeListener("close",Ce),H.removeListener("finish",Fe),H.removeListener("drain",le),H.removeListener("error",Ee),H.removeListener("unpipe",De),I.removeListener("end",Ie),I.removeListener("end",Oe),I.removeListener("data",ye),z=!0,U.awaitDrain&&(!H._writableState||H._writableState.needDrain)&&le()}())}function Ie(){S("onend"),H.end()}U.endEmitted?M.nextTick(re):I.once("end",re),H.on("unpipe",De);var le=function _e(H){return function(){var E=H._readableState;S("pipeOnDrain",E.awaitDrain),E.awaitDrain&&E.awaitDrain--,0===E.awaitDrain&&v(H,"data")&&(E.flowing=!0,ge(H))}}(I);H.on("drain",le);var z=!1;var Te=!1;function ye(Le){S("ondata"),Te=!1,!1===H.write(Le)&&!Te&&((1===U.pipesCount&&U.pipes===H||U.pipesCount>1&&-1!==Y(U.pipes,H))&&!z&&(S("false write response, pause",I._readableState.awaitDrain),I._readableState.awaitDrain++,Te=!0),I.pause())}function Ee(Le){S("onerror",Le),Oe(),H.removeListener("error",Ee),0===v(H,"error")&&H.emit("error",Le)}function Ce(){H.removeListener("finish",Fe),Oe()}function Fe(){S("onfinish"),H.removeListener("close",Ce),Oe()}function Oe(){S("unpipe"),I.unpipe(H)}return I.on("data",ye),function w(H,E,I){if("function"==typeof H.prependListener)return H.prependListener(E,I);H._events&&H._events[E]?y(H._events[E])?H._events[E].unshift(I):H._events[E]=[I,H._events[E]]:H.on(E,I)}(H,"error",Ee),H.once("close",Ce),H.once("finish",Fe),H.emit("pipe",I),U.flowing||(S("pipe resume"),I.resume()),H},f.prototype.unpipe=function(H){var E=this._readableState,I={hasUnpiped:!1};if(0===E.pipesCount)return this;if(1===E.pipesCount)return H&&H!==E.pipes||(H||(H=E.pipes),E.pipes=null,E.pipesCount=0,E.flowing=!1,H&&H.emit("unpipe",this,I)),this;if(!H){var U=E.pipes,W=E.pipesCount;E.pipes=null,E.pipesCount=0,E.flowing=!1;for(var re=0;re<W;re++)U[re].emit("unpipe",this,I);return this}var De=Y(E.pipes,H);return-1===De||(E.pipes.splice(De,1),E.pipesCount-=1,1===E.pipesCount&&(E.pipes=E.pipes[0]),H.emit("unpipe",this,I)),this},f.prototype.addListener=f.prototype.on=function(H,E){var I=p.prototype.on.call(this,H,E);if("data"===H)!1!==this._readableState.flowing&&this.resume();else if("readable"===H){var U=this._readableState;!U.endEmitted&&!U.readableListening&&(U.readableListening=U.needReadable=!0,U.emittedReadable=!1,U.reading?U.length&&oe(this):M.nextTick(ie,this))}return I},f.prototype.resume=function(){var H=this._readableState;return H.flowing||(S("resume"),H.flowing=!0,function me(H,E){E.resumeScheduled||(E.resumeScheduled=!0,M.nextTick(ae,H,E))}(this,H)),this},f.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(H){var E=this,I=this._readableState,U=!1;for(var W in H.on("end",function(){if(S("wrapped end"),I.decoder&&!I.ended){var De=I.decoder.end();De&&De.length&&E.push(De)}E.push(null)}),H.on("data",function(De){S("wrapped data"),I.decoder&&(De=I.decoder.write(De)),I.objectMode&&null==De||!(I.objectMode||De&&De.length)||E.push(De)||(U=!0,H.pause())}),H)void 0===this[W]&&"function"==typeof H[W]&&(this[W]=function(De){return function(){return H[De].apply(H,arguments)}}(W));for(var re=0;re<N.length;re++)H.on(N[re],this.emit.bind(this,N[re]));return this._read=function(De){S("wrapped _read",De),U&&(U=!1,H.resume())},this},Object.defineProperty(f.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),f._fromList=fe}).call(this,u("./node_modules/webpack/buildin/global.js"),u("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(we,k,u){"use strict";we.exports=y;var B=u("./node_modules/readable-stream/lib/_stream_duplex.js"),_=u("./node_modules/core-util-is/lib/util.js");function M(v,p){var L=this._transformState;L.transforming=!1;var b=L.writecb;if(!b)return this.emit("error",new Error("write callback called multiple times"));L.writechunk=null,L.writecb=null,null!=p&&this.push(p),b(v);var F=this._readableState;F.reading=!1,(F.needReadable||F.length<F.highWaterMark)&&this._read(F.highWaterMark)}function y(v){if(!(this instanceof y))return new y(v);B.call(this,v),this._transformState={afterTransform:M.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&("function"==typeof v.transform&&(this._transform=v.transform),"function"==typeof v.flush&&(this._flush=v.flush)),this.on("prefinish",D)}function D(){var v=this;"function"==typeof this._flush?this._flush(function(p,L){d(v,p,L)}):d(this,null,null)}function d(v,p,L){if(p)return v.emit("error",p);if(null!=L&&v.push(L),v._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(v._transformState.transforming)throw new Error("Calling transform done when still transforming");return v.push(null)}_.inherits=u("./node_modules/inherits/inherits_browser.js"),_.inherits(y,B),y.prototype.push=function(v,p){return this._transformState.needTransform=!1,B.prototype.push.call(this,v,p)},y.prototype._transform=function(v,p,L){throw new Error("_transform() is not implemented")},y.prototype._write=function(v,p,L){var b=this._transformState;if(b.writecb=L,b.writechunk=v,b.writeencoding=p,!b.transforming){var F=this._readableState;(b.needTransform||F.needReadable||F.length<F.highWaterMark)&&this._read(F.highWaterMark)}},y.prototype._read=function(v){var p=this._transformState;null!==p.writechunk&&p.writecb&&!p.transforming?(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform)):p.needTransform=!0},y.prototype._destroy=function(v,p){var L=this;B.prototype._destroy.call(this,v,function(b){p(b),L.emit("close")})}},"./node_modules/readable-stream/lib/_stream_writable.js":function(we,k,u){"use strict";(function(B,_,M){var y=u("./node_modules/process-nextick-args/index.js");function d(ae){var ge=this;this.next=null,this.entry=null,this.finish=function(){!function me(ae,ge,fe){var ce=ae.entry;for(ae.entry=null;ce;){var de=ce.callback;ge.pendingcb--,de(fe),ce=ce.next}ge.corkedRequestsFree?ge.corkedRequestsFree.next=ae:ge.corkedRequestsFree=ae}(ge,ae)}}we.exports=w;var p,v=!B.browser&&["v0.10","v0.9."].indexOf(B.version.slice(0,5))>-1?_:y.nextTick;w.WritableState=O;var L=u("./node_modules/core-util-is/lib/util.js");L.inherits=u("./node_modules/inherits/inherits_browser.js");var b={deprecate:u("./node_modules/util-deprecate/browser.js")},F=u("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),m=u("./node_modules/safe-buffer/index.js").Buffer,h=M.Uint8Array||function(){};var N,C=u("./node_modules/readable-stream/lib/internal/streams/destroy.js");function x(){}function O(ae,ge){p=p||u("./node_modules/readable-stream/lib/_stream_duplex.js");var fe=ge instanceof p;this.objectMode=!!(ae=ae||{}).objectMode,fe&&(this.objectMode=this.objectMode||!!ae.writableObjectMode);var ce=ae.highWaterMark,de=ae.writableHighWaterMark;this.highWaterMark=ce||0===ce?ce:fe&&(de||0===de)?de:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===ae.decodeStrings),this.defaultEncoding=ae.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ne){!function te(ae,ge){var fe=ae._writableState,ce=fe.sync,de=fe.writecb;if(function J(ae){ae.writing=!1,ae.writecb=null,ae.length-=ae.writelen,ae.writelen=0}(fe),ge)!function $(ae,ge,fe,ce,de){--ge.pendingcb,fe?(y.nextTick(de,ce),y.nextTick(_e,ae,ge),ae._writableState.errorEmitted=!0,ae.emit("error",ce)):(de(ce),ae._writableState.errorEmitted=!0,ae.emit("error",ce),_e(ae,ge))}(ae,fe,ce,ge,de);else{var se=ee(fe);!se&&!fe.corked&&!fe.bufferProcessing&&fe.bufferedRequest&&oe(ae,fe),ce?v(X,ae,fe,se,de):X(ae,fe,se,de)}}(ge,ne)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function w(ae){if(p=p||u("./node_modules/readable-stream/lib/_stream_duplex.js"),!(N.call(w,this)||this instanceof p))return new w(ae);this._writableState=new O(ae,this),this.writable=!0,ae&&("function"==typeof ae.write&&(this._write=ae.write),"function"==typeof ae.writev&&(this._writev=ae.writev),"function"==typeof ae.destroy&&(this._destroy=ae.destroy),"function"==typeof ae.final&&(this._final=ae.final)),F.call(this)}function V(ae,ge,fe,ce,de,se){if(!fe){var ve=function R(ae,ge,fe){return!ae.objectMode&&!1!==ae.decodeStrings&&"string"==typeof ge&&(ge=m.from(ge,fe)),ge}(ge,ce,de);ce!==ve&&(fe=!0,de="buffer",ce=ve)}var ne=ge.objectMode?1:ce.length;ge.length+=ne;var Y=ge.length<ge.highWaterMark;if(Y||(ge.needDrain=!0),ge.writing||ge.corked){var H=ge.lastBufferedRequest;ge.lastBufferedRequest={chunk:ce,encoding:de,isBuf:fe,callback:se,next:null},H?H.next=ge.lastBufferedRequest:ge.bufferedRequest=ge.lastBufferedRequest,ge.bufferedRequestCount+=1}else Q(ae,ge,!1,ne,ce,de,se);return Y}function Q(ae,ge,fe,ce,de,se,ve){ge.writelen=ce,ge.writecb=ve,ge.writing=!0,ge.sync=!0,fe?ae._writev(de,ge.onwrite):ae._write(de,se,ge.onwrite),ge.sync=!1}function X(ae,ge,fe,ce){fe||function K(ae,ge){0===ge.length&&ge.needDrain&&(ge.needDrain=!1,ae.emit("drain"))}(ae,ge),ge.pendingcb--,ce(),_e(ae,ge)}function oe(ae,ge){ge.bufferProcessing=!0;var fe=ge.bufferedRequest;if(ae._writev&&fe&&fe.next){var de=new Array(ge.bufferedRequestCount),se=ge.corkedRequestsFree;se.entry=fe;for(var ve=0,ne=!0;fe;)de[ve]=fe,fe.isBuf||(ne=!1),fe=fe.next,ve+=1;de.allBuffers=ne,Q(ae,ge,!0,ge.length,de,"",se.finish),ge.pendingcb++,ge.lastBufferedRequest=null,se.next?(ge.corkedRequestsFree=se.next,se.next=null):ge.corkedRequestsFree=new d(ge),ge.bufferedRequestCount=0}else{for(;fe;){var Y=fe.chunk;if(Q(ae,ge,!1,ge.objectMode?1:Y.length,Y,fe.encoding,fe.callback),fe=fe.next,ge.bufferedRequestCount--,ge.writing)break}null===fe&&(ge.lastBufferedRequest=null)}ge.bufferedRequest=fe,ge.bufferProcessing=!1}function ee(ae){return ae.ending&&0===ae.length&&null===ae.bufferedRequest&&!ae.finished&&!ae.writing}function ue(ae,ge){ae._final(function(fe){ge.pendingcb--,fe&&ae.emit("error",fe),ge.prefinished=!0,ae.emit("prefinish"),_e(ae,ge)})}function _e(ae,ge){var fe=ee(ge);return fe&&(function pe(ae,ge){!ge.prefinished&&!ge.finalCalled&&("function"==typeof ae._final?(ge.pendingcb++,ge.finalCalled=!0,y.nextTick(ue,ae,ge)):(ge.prefinished=!0,ae.emit("prefinish")))}(ae,ge),0===ge.pendingcb&&(ge.finished=!0,ae.emit("finish"))),fe}L.inherits(w,F),O.prototype.getBuffer=function(){for(var ge=this.bufferedRequest,fe=[];ge;)fe.push(ge),ge=ge.next;return fe},function(){try{Object.defineProperty(O.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(ae){return!!N.call(this,ae)||this===w&&ae&&ae._writableState instanceof O}})):N=function(ae){return ae instanceof this},w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},w.prototype.write=function(ae,ge,fe){var ce=this._writableState,de=!1,se=!ce.objectMode&&function S(ae){return m.isBuffer(ae)||ae instanceof h}(ae);return se&&!m.isBuffer(ae)&&(ae=function g(ae){return m.from(ae)}(ae)),"function"==typeof ge&&(fe=ge,ge=null),se?ge="buffer":ge||(ge=ce.defaultEncoding),"function"!=typeof fe&&(fe=x),ce.ended?function P(ae,ge){var fe=new Error("write after end");ae.emit("error",fe),y.nextTick(ge,fe)}(this,fe):(se||function f(ae,ge,fe,ce){var de=!0,se=!1;return null===fe?se=new TypeError("May not write null values to stream"):"string"!=typeof fe&&void 0!==fe&&!ge.objectMode&&(se=new TypeError("Invalid non-string/buffer chunk")),se&&(ae.emit("error",se),y.nextTick(ce,se),de=!1),de}(this,ce,ae,fe))&&(ce.pendingcb++,de=V(this,ce,se,ae,ge,fe)),de},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var ae=this._writableState;ae.corked&&(ae.corked--,!ae.writing&&!ae.corked&&!ae.finished&&!ae.bufferProcessing&&ae.bufferedRequest&&oe(this,ae))},w.prototype.setDefaultEncoding=function(ge){if("string"==typeof ge&&(ge=ge.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ge+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+ge);return this._writableState.defaultEncoding=ge,this},Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(ae,ge,fe){fe(new Error("_write() is not implemented"))},w.prototype._writev=null,w.prototype.end=function(ae,ge,fe){var ce=this._writableState;"function"==typeof ae?(fe=ae,ae=null,ge=null):"function"==typeof ge&&(fe=ge,ge=null),null!=ae&&this.write(ae,ge),ce.corked&&(ce.corked=1,this.uncork()),!ce.ending&&!ce.finished&&function ie(ae,ge,fe){ge.ending=!0,_e(ae,ge),fe&&(ge.finished?y.nextTick(fe):ae.once("finish",fe)),ge.ended=!0,ae.writable=!1}(this,ce,fe)},Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ae){!this._writableState||(this._writableState.destroyed=ae)}}),w.prototype.destroy=C.destroy,w.prototype._undestroy=C.undestroy,w.prototype._destroy=function(ae,ge){this.end(),ge(ae)}}).call(this,u("./node_modules/process/browser.js"),u("./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(we,k,u){"use strict";var _=u("./node_modules/safe-buffer/index.js").Buffer,M=u(1);function y(D,d,v){D.copy(d,v)}we.exports=function(){function D(){(function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this.head=null,this.tail=null,this.length=0}return D.prototype.push=function(v){var p={data:v,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length},D.prototype.unshift=function(v){var p={data:v,next:this.head};0===this.length&&(this.tail=p),this.head=p,++this.length},D.prototype.shift=function(){if(0!==this.length){var v=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,v}},D.prototype.clear=function(){this.head=this.tail=null,this.length=0},D.prototype.join=function(v){if(0===this.length)return"";for(var p=this.head,L=""+p.data;p=p.next;)L+=v+p.data;return L},D.prototype.concat=function(v){if(0===this.length)return _.alloc(0);if(1===this.length)return this.head.data;for(var p=_.allocUnsafe(v>>>0),L=this.head,b=0;L;)y(L.data,p,b),b+=L.data.length,L=L.next;return p},D}(),M&&M.inspect&&M.inspect.custom&&(we.exports.prototype[M.inspect.custom]=function(){var D=M.inspect({length:this.length});return this.constructor.name+" "+D})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(we,k,u){"use strict";var B=u("./node_modules/process-nextick-args/index.js");function y(D,d){D.emit("error",d)}we.exports={destroy:function _(D,d){var v=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(d?d(D):D&&(!this._writableState||!this._writableState.errorEmitted)&&B.nextTick(y,this,D),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(D||null,function(b){!d&&b?(B.nextTick(y,v,b),v._writableState&&(v._writableState.errorEmitted=!0)):d&&d(b)}),this)},undestroy:function M(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(we,k,u){we.exports=u("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/passthrough.js":function(we,k,u){we.exports=u("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(we,k,u){(k=we.exports=u("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=k,k.Readable=k,k.Writable=u("./node_modules/readable-stream/lib/_stream_writable.js"),k.Duplex=u("./node_modules/readable-stream/lib/_stream_duplex.js"),k.Transform=u("./node_modules/readable-stream/lib/_stream_transform.js"),k.PassThrough=u("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(we,k,u){we.exports=u("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(we,k,u){we.exports=u("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(we,k,u){var B=u("./node_modules/node-libs-browser/node_modules/buffer/index.js"),_=B.Buffer;function M(D,d){for(var v in D)d[v]=D[v]}function y(D,d,v){return _(D,d,v)}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?we.exports=B:(M(B,k),k.Buffer=y),M(_,y),y.from=function(D,d,v){if("number"==typeof D)throw new TypeError("Argument must not be a number");return _(D,d,v)},y.alloc=function(D,d,v){if("number"!=typeof D)throw new TypeError("Argument must be a number");var p=_(D);return void 0!==d?"string"==typeof v?p.fill(d,v):p.fill(d):p.fill(0),p},y.allocUnsafe=function(D){if("number"!=typeof D)throw new TypeError("Argument must be a number");return _(D)},y.allocUnsafeSlow=function(D){if("number"!=typeof D)throw new TypeError("Argument must be a number");return B.SlowBuffer(D)}},"./node_modules/sax/lib/sax.js":function(we,k,u){(function(B){!function(_){_.parser=function(E,I){return new y(E,I)},_.SAXParser=y,_.SAXStream=F,_.createStream=function b(E,I){return new F(E,I)},_.MAX_BUFFER_LENGTH=65536;var p,M=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function y(E,I){if(!(this instanceof y))return new y(E,I);var U=this;(function d(E){for(var I=0,U=M.length;I<U;I++)E[M[I]]=""})(U),U.q=U.c="",U.bufferCheckPosition=_.MAX_BUFFER_LENGTH,U.opt=I||{},U.opt.lowercase=U.opt.lowercase||U.opt.lowercasetags,U.looseCase=U.opt.lowercase?"toLowerCase":"toUpperCase",U.tags=[],U.closed=U.closedRoot=U.sawRoot=!1,U.tag=U.error=null,U.strict=!!E,U.noscript=!(!E&&!U.opt.noscript),U.state=K.BEGIN,U.strictEntities=U.opt.strictEntities,U.ENTITIES=Object.create(U.strictEntities?_.XML_ENTITIES:_.ENTITIES),U.attribList=[],U.opt.xmlns&&(U.ns=Object.create(P)),U.trackPosition=!1!==U.opt.position,U.trackPosition&&(U.position=U.line=U.column=0),ee(U,"onready")}_.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(E){function I(){}return I.prototype=E,new I}),Object.keys||(Object.keys=function(E){var I=[];for(var U in E)E.hasOwnProperty(U)&&I.push(U);return I}),y.prototype={end:function(){me(this)},write:function H(E){var I=this;if(this.error)throw this.error;if(I.closed)return ie(I,"Cannot write after close. Assign an onready handler.");if(null===E)return me(I);"object"==typeof E&&(E=E.toString());for(var U=0,W="";W=Y(E,U++),I.c=W,W;)switch(I.trackPosition&&(I.position++,"\n"===W?(I.line++,I.column=0):I.column++),I.state){case K.BEGIN:if(I.state=K.BEGIN_WHITESPACE,"\ufeff"===W)continue;ne(I,W);continue;case K.BEGIN_WHITESPACE:ne(I,W);continue;case K.TEXT:if(I.sawRoot&&!I.closedRoot){for(var re=U-1;W&&"<"!==W&&"&"!==W;)(W=Y(E,U++))&&I.trackPosition&&(I.position++,"\n"===W?(I.line++,I.column=0):I.column++);I.textNode+=E.substring(re,U-1)}"<"!==W||I.sawRoot&&I.closedRoot&&!I.strict?(X(m,W)&&(!I.sawRoot||I.closedRoot)&&ae(I,"Text data outside of root node."),"&"===W?I.state=K.TEXT_ENTITY:I.textNode+=W):(I.state=K.OPEN_WAKA,I.startTagPosition=I.position);continue;case K.SCRIPT:"<"===W?I.state=K.SCRIPT_ENDING:I.script+=W;continue;case K.SCRIPT_ENDING:"/"===W?I.state=K.CLOSE_TAG:(I.script+="<"+W,I.state=K.SCRIPT);continue;case K.OPEN_WAKA:"!"===W?(I.state=K.SGML_DECL,I.sgmlDecl=""):te(m,W)||(te(f,W)?(I.state=K.OPEN_TAG,I.tagName=W):"/"===W?(I.state=K.CLOSE_TAG,I.tagName=""):"?"===W?(I.state=K.PROC_INST,I.procInstName=I.procInstBody=""):(ae(I,"Unencoded <"),I.startTagPosition+1<I.position&&(W=new Array(I.position-I.startTagPosition).join(" ")+W),I.textNode+="<"+W,I.state=K.TEXT));continue;case K.SGML_DECL:"[CDATA["===(I.sgmlDecl+W).toUpperCase()?(ue(I,"onopencdata"),I.state=K.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+W==="--"?(I.state=K.COMMENT,I.comment="",I.sgmlDecl=""):"DOCTYPE"===(I.sgmlDecl+W).toUpperCase()?(I.state=K.DOCTYPE,(I.doctype||I.sawRoot)&&ae(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):">"===W?(ue(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=K.TEXT):(te(S,W)&&(I.state=K.SGML_DECL_QUOTED),I.sgmlDecl+=W);continue;case K.SGML_DECL_QUOTED:W===I.q&&(I.state=K.SGML_DECL,I.q=""),I.sgmlDecl+=W;continue;case K.DOCTYPE:">"===W?(I.state=K.TEXT,ue(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=W,"["===W?I.state=K.DOCTYPE_DTD:te(S,W)&&(I.state=K.DOCTYPE_QUOTED,I.q=W));continue;case K.DOCTYPE_QUOTED:I.doctype+=W,W===I.q&&(I.q="",I.state=K.DOCTYPE);continue;case K.DOCTYPE_DTD:I.doctype+=W,"]"===W?I.state=K.DOCTYPE:te(S,W)&&(I.state=K.DOCTYPE_DTD_QUOTED,I.q=W);continue;case K.DOCTYPE_DTD_QUOTED:I.doctype+=W,W===I.q&&(I.state=K.DOCTYPE_DTD,I.q="");continue;case K.COMMENT:"-"===W?I.state=K.COMMENT_ENDING:I.comment+=W;continue;case K.COMMENT_ENDING:"-"===W?(I.state=K.COMMENT_ENDED,I.comment=_e(I.opt,I.comment),I.comment&&ue(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+W,I.state=K.COMMENT);continue;case K.COMMENT_ENDED:">"!==W?(ae(I,"Malformed comment"),I.comment+="--"+W,I.state=K.COMMENT):I.state=K.TEXT;continue;case K.CDATA:"]"===W?I.state=K.CDATA_ENDING:I.cdata+=W;continue;case K.CDATA_ENDING:"]"===W?I.state=K.CDATA_ENDING_2:(I.cdata+="]"+W,I.state=K.CDATA);continue;case K.CDATA_ENDING_2:">"===W?(I.cdata&&ue(I,"oncdata",I.cdata),ue(I,"onclosecdata"),I.cdata="",I.state=K.TEXT):"]"===W?I.cdata+="]":(I.cdata+="]]"+W,I.state=K.CDATA);continue;case K.PROC_INST:"?"===W?I.state=K.PROC_INST_ENDING:te(m,W)?I.state=K.PROC_INST_BODY:I.procInstName+=W;continue;case K.PROC_INST_BODY:if(!I.procInstBody&&te(m,W))continue;"?"===W?I.state=K.PROC_INST_ENDING:I.procInstBody+=W;continue;case K.PROC_INST_ENDING:">"===W?(ue(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=K.TEXT):(I.procInstBody+="?"+W,I.state=K.PROC_INST_BODY);continue;case K.OPEN_TAG:te(R,W)?I.tagName+=W:(ge(I),">"===W?de(I):"/"===W?I.state=K.OPEN_TAG_SLASH:(X(m,W)&&ae(I,"Invalid character in tag name"),I.state=K.ATTRIB));continue;case K.OPEN_TAG_SLASH:">"===W?(de(I,!0),se(I)):(ae(I,"Forward-slash in opening tag not followed by >"),I.state=K.ATTRIB);continue;case K.ATTRIB:if(te(m,W))continue;">"===W?de(I):"/"===W?I.state=K.OPEN_TAG_SLASH:te(f,W)?(I.attribName=W,I.attribValue="",I.state=K.ATTRIB_NAME):ae(I,"Invalid attribute name");continue;case K.ATTRIB_NAME:"="===W?I.state=K.ATTRIB_VALUE:">"===W?(ae(I,"Attribute without value"),I.attribValue=I.attribName,ce(I),de(I)):te(m,W)?I.state=K.ATTRIB_NAME_SAW_WHITE:te(R,W)?I.attribName+=W:ae(I,"Invalid attribute name");continue;case K.ATTRIB_NAME_SAW_WHITE:if("="===W)I.state=K.ATTRIB_VALUE;else{if(te(m,W))continue;ae(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",ue(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",">"===W?de(I):te(f,W)?(I.attribName=W,I.state=K.ATTRIB_NAME):(ae(I,"Invalid attribute name"),I.state=K.ATTRIB)}continue;case K.ATTRIB_VALUE:if(te(m,W))continue;te(S,W)?(I.q=W,I.state=K.ATTRIB_VALUE_QUOTED):(ae(I,"Unquoted attribute value"),I.state=K.ATTRIB_VALUE_UNQUOTED,I.attribValue=W);continue;case K.ATTRIB_VALUE_QUOTED:if(W!==I.q){"&"===W?I.state=K.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=W;continue}ce(I),I.q="",I.state=K.ATTRIB_VALUE_CLOSED;continue;case K.ATTRIB_VALUE_CLOSED:te(m,W)?I.state=K.ATTRIB:">"===W?de(I):"/"===W?I.state=K.OPEN_TAG_SLASH:te(f,W)?(ae(I,"No whitespace between attributes"),I.attribName=W,I.attribValue="",I.state=K.ATTRIB_NAME):ae(I,"Invalid attribute name");continue;case K.ATTRIB_VALUE_UNQUOTED:if(X(C,W)){"&"===W?I.state=K.ATTRIB_VALUE_ENTITY_U:I.attribValue+=W;continue}ce(I),">"===W?de(I):I.state=K.ATTRIB;continue;case K.CLOSE_TAG:if(I.tagName)">"===W?se(I):te(R,W)?I.tagName+=W:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=K.SCRIPT):(X(m,W)&&ae(I,"Invalid tagname in closing tag"),I.state=K.CLOSE_TAG_SAW_WHITE);else{if(te(m,W))continue;X(f,W)?I.script?(I.script+="</"+W,I.state=K.SCRIPT):ae(I,"Invalid tagname in closing tag."):I.tagName=W}continue;case K.CLOSE_TAG_SAW_WHITE:if(te(m,W))continue;">"===W?se(I):ae(I,"Invalid characters in closing tag");continue;case K.TEXT_ENTITY:case K.ATTRIB_VALUE_ENTITY_Q:case K.ATTRIB_VALUE_ENTITY_U:var Ie,le;switch(I.state){case K.TEXT_ENTITY:Ie=K.TEXT,le="textNode";break;case K.ATTRIB_VALUE_ENTITY_Q:Ie=K.ATTRIB_VALUE_QUOTED,le="attribValue";break;case K.ATTRIB_VALUE_ENTITY_U:Ie=K.ATTRIB_VALUE_UNQUOTED,le="attribValue"}";"===W?(I[le]+=ve(I),I.entity="",I.state=Ie):te(I.entity.length?Q:V,W)?I.entity+=W:(ae(I,"Invalid character in entity name"),I[le]+="&"+I.entity+W,I.entity="",I.state=Ie);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&function D(E){for(var I=Math.max(_.MAX_BUFFER_LENGTH,10),U=0,W=0,re=M.length;W<re;W++){var De=E[M[W]].length;if(De>I)switch(M[W]){case"textNode":pe(E);break;case"cdata":ue(E,"oncdata",E.cdata),E.cdata="";break;case"script":ue(E,"onscript",E.script),E.script="";break;default:ie(E,"Max buffer length exceeded: "+M[W])}U=Math.max(U,De)}E.bufferCheckPosition=_.MAX_BUFFER_LENGTH-U+E.position}(I),I},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function v(E){pe(E),""!==E.cdata&&(ue(E,"oncdata",E.cdata),E.cdata=""),""!==E.script&&(ue(E,"onscript",E.script),E.script="")}(this)}};try{p=u("./node_modules/stream-browserify/index.js").Stream}catch{p=function(){}}var L=_.EVENTS.filter(function(E){return"error"!==E&&"end"!==E});function F(E,I){if(!(this instanceof F))return new F(E,I);p.apply(this),this._parser=new y(E,I),this.writable=!0,this.readable=!0;var U=this;this._parser.onend=function(){U.emit("end")},this._parser.onerror=function(W){U.emit("error",W),U._parser.error=null},this._decoder=null,L.forEach(function(W){Object.defineProperty(U,"on"+W,{get:function(){return U._parser["on"+W]},set:function(re){if(!re)return U.removeAllListeners(W),U._parser["on"+W]=re,re;U.on(W,re)},enumerable:!0,configurable:!1})})}(F.prototype=Object.create(p.prototype,{constructor:{value:F}})).write=function(E){if("function"==typeof B&&"function"==typeof B.isBuffer&&B.isBuffer(E)){if(!this._decoder){var I=u("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new I("utf8")}E=this._decoder.write(E)}return this._parser.write(E.toString()),this.emit("data",E),!0},F.prototype.end=function(E){return E&&E.length&&this.write(E),this._parser.end(),!0},F.prototype.on=function(E,I){var U=this;return!U._parser["on"+E]&&-1!==L.indexOf(E)&&(U._parser["on"+E]=function(){var W=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);W.splice(0,0,E),U.emit.apply(U,W)}),p.prototype.on.call(U,E,I)};var m="\r\n\t ",h="0124356789",g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",S="'\"",C=m+">",N="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/2000/xmlns/",P={xml:N,xmlns:w};m=$(m),h=$(h),g=$(g);var f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,R=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Q=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function $(E){return E.split("").reduce(function(I,U){return I[U]=!0,I},{})}function te(E,I){return function J(E){return"[object RegExp]"===Object.prototype.toString.call(E)}(E)?!!I.match(E):E[I]}function X(E,I){return!te(E,I)}S=$(S),C=$(C);var E,I,U,K=0;for(var oe in _.STATE={BEGIN:K++,BEGIN_WHITESPACE:K++,TEXT:K++,TEXT_ENTITY:K++,OPEN_WAKA:K++,SGML_DECL:K++,SGML_DECL_QUOTED:K++,DOCTYPE:K++,DOCTYPE_QUOTED:K++,DOCTYPE_DTD:K++,DOCTYPE_DTD_QUOTED:K++,COMMENT_STARTING:K++,COMMENT:K++,COMMENT_ENDING:K++,COMMENT_ENDED:K++,CDATA:K++,CDATA_ENDING:K++,CDATA_ENDING_2:K++,PROC_INST:K++,PROC_INST_BODY:K++,PROC_INST_ENDING:K++,OPEN_TAG:K++,OPEN_TAG_SLASH:K++,ATTRIB:K++,ATTRIB_NAME:K++,ATTRIB_NAME_SAW_WHITE:K++,ATTRIB_VALUE:K++,ATTRIB_VALUE_QUOTED:K++,ATTRIB_VALUE_CLOSED:K++,ATTRIB_VALUE_UNQUOTED:K++,ATTRIB_VALUE_ENTITY_Q:K++,ATTRIB_VALUE_ENTITY_U:K++,CLOSE_TAG:K++,CLOSE_TAG_SAW_WHITE:K++,SCRIPT:K++,SCRIPT_ENDING:K++},_.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},_.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(_.ENTITIES).forEach(function(E){var I=_.ENTITIES[E],U="number"==typeof I?String.fromCharCode(I):I;_.ENTITIES[E]=U}),_.STATE)_.STATE[_.STATE[oe]]=oe;function ee(E,I,U){E[I]&&E[I](U)}function ue(E,I,U){E.textNode&&pe(E),ee(E,I,U)}function pe(E){E.textNode=_e(E.opt,E.textNode),E.textNode&&ee(E,"ontext",E.textNode),E.textNode=""}function _e(E,I){return E.trim&&(I=I.trim()),E.normalize&&(I=I.replace(/\s+/g," ")),I}function ie(E,I){return pe(E),E.trackPosition&&(I+="\nLine: "+E.line+"\nColumn: "+E.column+"\nChar: "+E.c),I=new Error(I),E.error=I,ee(E,"onerror",I),E}function me(E){return E.sawRoot&&!E.closedRoot&&ae(E,"Unclosed root tag"),E.state!==K.BEGIN&&E.state!==K.BEGIN_WHITESPACE&&E.state!==K.TEXT&&ie(E,"Unexpected end"),pe(E),E.c="",E.closed=!0,ee(E,"onend"),y.call(E,E.strict,E.opt),E}function ae(E,I){if("object"!=typeof E||!(E instanceof y))throw new Error("bad call to strictFail");E.strict&&ie(E,I)}function ge(E){E.strict||(E.tagName=E.tagName[E.looseCase]());var I=E.tags[E.tags.length-1]||E,U=E.tag={name:E.tagName,attributes:{}};E.opt.xmlns&&(U.ns=I.ns),E.attribList.length=0,ue(E,"onopentagstart",U)}function fe(E,I){var W=E.indexOf(":")<0?["",E]:E.split(":"),re=W[0],De=W[1];return I&&"xmlns"===E&&(re="xmlns",De=""),{prefix:re,local:De}}function ce(E){if(E.strict||(E.attribName=E.attribName[E.looseCase]()),-1!==E.attribList.indexOf(E.attribName)||E.tag.attributes.hasOwnProperty(E.attribName))E.attribName=E.attribValue="";else{if(E.opt.xmlns){var I=fe(E.attribName,!0),W=I.local;if("xmlns"===I.prefix)if("xml"===W&&E.attribValue!==N)ae(E,"xml: prefix must be bound to "+N+"\nActual: "+E.attribValue);else if("xmlns"===W&&E.attribValue!==w)ae(E,"xmlns: prefix must be bound to "+w+"\nActual: "+E.attribValue);else{var re=E.tag,De=E.tags[E.tags.length-1]||E;re.ns===De.ns&&(re.ns=Object.create(De.ns)),re.ns[W]=E.attribValue}E.attribList.push([E.attribName,E.attribValue])}else E.tag.attributes[E.attribName]=E.attribValue,ue(E,"onattribute",{name:E.attribName,value:E.attribValue});E.attribName=E.attribValue=""}}function de(E,I){if(E.opt.xmlns){var U=E.tag,W=fe(E.tagName);U.prefix=W.prefix,U.local=W.local,U.uri=U.ns[W.prefix]||"",U.prefix&&!U.uri&&(ae(E,"Unbound namespace prefix: "+JSON.stringify(E.tagName)),U.uri=W.prefix),U.ns&&(E.tags[E.tags.length-1]||E).ns!==U.ns&&Object.keys(U.ns).forEach(function(Oe){ue(E,"onopennamespace",{prefix:Oe,uri:U.ns[Oe]})});for(var De=0,Ie=E.attribList.length;De<Ie;De++){var le=E.attribList[De],z=le[0],G=le[1],Te=fe(z,!0),ye=Te.prefix,Ce=""===ye?"":U.ns[ye]||"",Fe={name:z,value:G,prefix:ye,local:Te.local,uri:Ce};ye&&"xmlns"!==ye&&!Ce&&(ae(E,"Unbound namespace prefix: "+JSON.stringify(ye)),Fe.uri=ye),E.tag.attributes[z]=Fe,ue(E,"onattribute",Fe)}E.attribList.length=0}E.tag.isSelfClosing=!!I,E.sawRoot=!0,E.tags.push(E.tag),ue(E,"onopentag",E.tag),I||(E.state=E.noscript||"script"!==E.tagName.toLowerCase()?K.TEXT:K.SCRIPT,E.tag=null,E.tagName=""),E.attribName=E.attribValue="",E.attribList.length=0}function se(E){if(!E.tagName)return ae(E,"Weird empty close tag."),E.textNode+="</>",void(E.state=K.TEXT);if(E.script){if("script"!==E.tagName)return E.script+="</"+E.tagName+">",E.tagName="",void(E.state=K.SCRIPT);ue(E,"onscript",E.script),E.script=""}var I=E.tags.length,U=E.tagName;E.strict||(U=U[E.looseCase]());for(var W=U;I--&&E.tags[I].name!==W;)ae(E,"Unexpected close tag");if(I<0)return ae(E,"Unmatched closing tag: "+E.tagName),E.textNode+="</"+E.tagName+">",void(E.state=K.TEXT);E.tagName=U;for(var De=E.tags.length;De-- >I;){var Ie=E.tag=E.tags.pop();E.tagName=E.tag.name,ue(E,"onclosetag",E.tagName);var le={};for(var z in Ie.ns)le[z]=Ie.ns[z];E.opt.xmlns&&Ie.ns!==(E.tags[E.tags.length-1]||E).ns&&Object.keys(Ie.ns).forEach(function(Te){ue(E,"onclosenamespace",{prefix:Te,uri:Ie.ns[Te]})})}0===I&&(E.closedRoot=!0),E.tagName=E.attribValue=E.attribName="",E.attribList.length=0,E.state=K.TEXT}function ve(E){var W,I=E.entity,U=I.toLowerCase(),re="";return E.ENTITIES[I]?E.ENTITIES[I]:E.ENTITIES[U]?E.ENTITIES[U]:("#"===(I=U).charAt(0)&&("x"===I.charAt(1)?(I=I.slice(2),re=(W=parseInt(I,16)).toString(16)):(I=I.slice(1),re=(W=parseInt(I,10)).toString(10))),I=I.replace(/^0+/,""),re.toLowerCase()!==I?(ae(E,"Invalid character entity"),"&"+E.entity+";"):String.fromCodePoint(W))}function ne(E,I){"<"===I?(E.state=K.OPEN_WAKA,E.startTagPosition=E.position):X(m,I)&&(ae(E,"Non-whitespace before first tag."),E.textNode=I,E.state=K.TEXT)}function Y(E,I){var U="";return I<E.length&&(U=E.charAt(I)),U}K=_.STATE,String.fromCodePoint||(E=String.fromCharCode,I=Math.floor,U=function(){var W=16384,re=[],le=-1,z=arguments.length;if(!z)return"";for(var G="";++le<z;){var Te=Number(arguments[le]);if(!isFinite(Te)||Te<0||Te>1114111||I(Te)!==Te)throw RangeError("Invalid code point: "+Te);Te<=65535?re.push(Te):re.push(55296+((Te-=65536)>>10),Te%1024+56320),(le+1===z||re.length>W)&&(G+=E.apply(null,re),re.length=0)}return G},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:U,configurable:!0,writable:!0}):String.fromCodePoint=U)}(k)}).call(this,u("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(we,k,u){(function(B,_){!function(M,y){"use strict";if(!M.setImmediate){var L,D=1,d={},v=!1,p=M.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(M);w=w&&w.setTimeout?w:M,"[object process]"==={}.toString.call(M.process)?function g(){L=function(P){_.nextTick(function(){h(P)})}}():function S(){if(M.postMessage&&!M.importScripts){var P=!0,f=M.onmessage;return M.onmessage=function(){P=!1},M.postMessage("","*"),M.onmessage=f,P}}()?function C(){var P="setImmediate$"+Math.random()+"$",f=function(R){R.source===M&&"string"==typeof R.data&&0===R.data.indexOf(P)&&h(+R.data.slice(P.length))};M.addEventListener?M.addEventListener("message",f,!1):M.attachEvent("onmessage",f),L=function(R){M.postMessage(P+R,"*")}}():M.MessageChannel?function x(){var P=new MessageChannel;P.port1.onmessage=function(f){h(f.data)},L=function(f){P.port2.postMessage(f)}}():p&&"onreadystatechange"in p.createElement("script")?function O(){var P=p.documentElement;L=function(f){var R=p.createElement("script");R.onreadystatechange=function(){h(f),R.onreadystatechange=null,P.removeChild(R),R=null},P.appendChild(R)}}():function N(){L=function(P){setTimeout(h,0,P)}}(),w.setImmediate=function b(P){"function"!=typeof P&&(P=new Function(""+P));for(var f=new Array(arguments.length-1),R=0;R<f.length;R++)f[R]=arguments[R+1];return d[D]={callback:P,args:f},L(D),D++},w.clearImmediate=F}function F(P){delete d[P]}function h(P){if(v)setTimeout(h,0,P);else{var f=d[P];if(f){v=!0;try{!function m(P){var f=P.callback,R=P.args;switch(R.length){case 0:f();break;case 1:f(R[0]);break;case 2:f(R[0],R[1]);break;case 3:f(R[0],R[1],R[2]);break;default:f.apply(void 0,R)}}(f)}finally{F(P),v=!1}}}}}(typeof self>"u"?typeof B>"u"?this:B:self)}).call(this,u("./node_modules/webpack/buildin/global.js"),u("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(we,k,u){we.exports=M;var B=u("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;function M(){B.call(this)}u("./node_modules/inherits/inherits_browser.js")(M,B),M.Readable=u("./node_modules/readable-stream/readable-browser.js"),M.Writable=u("./node_modules/readable-stream/writable-browser.js"),M.Duplex=u("./node_modules/readable-stream/duplex-browser.js"),M.Transform=u("./node_modules/readable-stream/transform.js"),M.PassThrough=u("./node_modules/readable-stream/passthrough.js"),M.Stream=M,M.prototype.pipe=function(y,D){var d=this;function v(g){y.writable&&!1===y.write(g)&&d.pause&&d.pause()}function p(){d.readable&&d.resume&&d.resume()}d.on("data",v),y.on("drain",p),!y._isStdio&&(!D||!1!==D.end)&&(d.on("end",b),d.on("close",F));var L=!1;function b(){L||(L=!0,y.end())}function F(){L||(L=!0,"function"==typeof y.destroy&&y.destroy())}function m(g){if(h(),0===B.listenerCount(this,"error"))throw g}function h(){d.removeListener("data",v),y.removeListener("drain",p),d.removeListener("end",b),d.removeListener("close",F),d.removeListener("error",m),y.removeListener("error",m),d.removeListener("end",h),d.removeListener("close",h),y.removeListener("close",h)}return d.on("error",m),y.on("error",m),d.on("end",h),d.on("close",h),y.on("close",h),y.emit("pipe",d),y}},"./node_modules/string_decoder/lib/string_decoder.js":function(we,k,u){"use strict";var B=u("./node_modules/safe-buffer/index.js").Buffer,_=B.isEncoding||function(O){switch((O=""+O)&&O.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function D(O){var N;switch(this.encoding=function y(O){var N=function M(O){if(!O)return"utf8";for(var N;;)switch(O){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return O;default:if(N)return;O=(""+O).toLowerCase(),N=!0}}(O);if("string"!=typeof N&&(B.isEncoding===_||!_(O)))throw new Error("Unknown encoding: "+O);return N||O}(O),this.encoding){case"utf16le":this.text=m,this.end=h,N=4;break;case"utf8":this.fillLast=L,N=4;break;case"base64":this.text=g,this.end=S,N=3;break;default:return this.write=C,void(this.end=x)}this.lastNeed=0,this.lastTotal=0,this.lastChar=B.allocUnsafe(N)}function d(O){return O<=127?0:O>>5==6?2:O>>4==14?3:O>>3==30?4:O>>6==2?-1:-2}function L(O){var N=this.lastTotal-this.lastNeed,w=function p(O,N,w){if(128!=(192&N[0]))return O.lastNeed=0,"\ufffd";if(O.lastNeed>1&&N.length>1){if(128!=(192&N[1]))return O.lastNeed=1,"\ufffd";if(O.lastNeed>2&&N.length>2&&128!=(192&N[2]))return O.lastNeed=2,"\ufffd"}}(this,O);return void 0!==w?w:this.lastNeed<=O.length?(O.copy(this.lastChar,N,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(O.copy(this.lastChar,N,0,O.length),void(this.lastNeed-=O.length))}function m(O,N){if((O.length-N)%2==0){var w=O.toString("utf16le",N);if(w){var P=w.charCodeAt(w.length-1);if(P>=55296&&P<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=O[O.length-1],O.toString("utf16le",N,O.length-1)}function h(O){var N=O&&O.length?this.write(O):"";return this.lastNeed?N+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):N}function g(O,N){var w=(O.length-N)%3;return 0===w?O.toString("base64",N):(this.lastNeed=3-w,this.lastTotal=3,1===w?this.lastChar[0]=O[O.length-1]:(this.lastChar[0]=O[O.length-2],this.lastChar[1]=O[O.length-1]),O.toString("base64",N,O.length-w))}function S(O){var N=O&&O.length?this.write(O):"";return this.lastNeed?N+this.lastChar.toString("base64",0,3-this.lastNeed):N}function C(O){return O.toString(this.encoding)}function x(O){return O&&O.length?this.write(O):""}k.StringDecoder=D,D.prototype.write=function(O){if(0===O.length)return"";var N,w;if(this.lastNeed){if(void 0===(N=this.fillLast(O)))return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<O.length?N?N+this.text(O,w):this.text(O,w):N||""},D.prototype.end=function F(O){var N=O&&O.length?this.write(O):"";return this.lastNeed?N+"\ufffd":N},D.prototype.text=function b(O,N){var w=function v(O,N,w){var P=N.length-1;if(P<w)return 0;var f=d(N[P]);return f>=0?(f>0&&(O.lastNeed=f-1),f):--P<w||-2===f?0:(f=d(N[P]))>=0?(f>0&&(O.lastNeed=f-2),f):--P<w||-2===f?0:(f=d(N[P]))>=0?(f>0&&(2===f?f=0:O.lastNeed=f-3),f):0}(this,O,N);if(!this.lastNeed)return O.toString("utf8",N);this.lastTotal=w;var P=O.length-(w-this.lastNeed);return O.copy(this.lastChar,0,P),O.toString("utf8",N,P)},D.prototype.fillLast=function(O){if(this.lastNeed<=O.length)return O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);O.copy(this.lastChar,this.lastTotal-this.lastNeed,0,O.length),this.lastNeed-=O.length}},"./node_modules/util-deprecate/browser.js":function(we,k,u){(function(B){function M(y){try{if(!B.localStorage)return!1}catch{return!1}var D=B.localStorage[y];return null!=D&&"true"===String(D).toLowerCase()}we.exports=function _(y,D){if(M("noDeprecation"))return y;var d=!1;return function v(){if(!d){if(M("throwDeprecation"))throw new Error(D);M("traceDeprecation")?console.trace(D):console.warn(D),d=!0}return y.apply(this,arguments)}}}).call(this,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(we,k){var u;u=function(){return this}();try{u=u||new Function("return this")()}catch{"object"==typeof window&&(u=window)}we.exports=u},"./src/core/Debug.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/EventBus.js"),_=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js"),D=1,d=2,v=3,p=4,L=5;function b(m){m=m||{};var x,O,N,w,h=this.context,g=Object(B.default)(h).getInstance(),S=m.settings,C=[];function f(ee){return ee&&ee.bind?ee.bind(window.console):window.console.log.bind(window.console)}function $(){for(var ee=arguments.length,ue=new Array(ee),pe=0;pe<ee;pe++)ue[pe]=arguments[pe];oe.apply(void 0,[D,this].concat(ue))}function J(){for(var ee=arguments.length,ue=new Array(ee),pe=0;pe<ee;pe++)ue[pe]=arguments[pe];oe.apply(void 0,[d,this].concat(ue))}function te(){for(var ee=arguments.length,ue=new Array(ee),pe=0;pe<ee;pe++)ue[pe]=arguments[pe];oe.apply(void 0,[v,this].concat(ue))}function X(){for(var ee=arguments.length,ue=new Array(ee),pe=0;pe<ee;pe++)ue[pe]=arguments[pe];oe.apply(void 0,[p,this].concat(ue))}function K(){for(var ee=arguments.length,ue=new Array(ee),pe=0;pe<ee;pe++)ue[pe]=arguments[pe];oe.apply(void 0,[L,this].concat(ue))}function oe(ee,ue){var pe="",_e=null;O&&(_e=(new Date).getTime(),pe+="["+(_e-w)+"]"),N&&ue&&ue.getClassName&&(pe+="["+ue.getClassName()+"]",ue.getType&&(pe+="["+ue.getType()+"]")),pe.length>0&&(pe+=" ");for(var ie=arguments.length,me=new Array(ie>2?ie-2:0),ae=2;ae<ie;ae++)me[ae-2]=arguments[ae];Array.apply(null,me).forEach(function(ge){pe+=ge+" "}),C[ee]&&S.get().debug.logLevel>=ee&&C[ee](pe),S&&S.get().debug.dispatchEvent&&g.trigger(_.default.LOG,{message:pe,level:ee})}return x={getLogger:function R(ee){return{fatal:$.bind(ee),error:J.bind(ee),warn:te.bind(ee),info:X.bind(ee),debug:K.bind(ee)}},setLogTimestampVisible:function V(ee){O=ee},setCalleeNameVisible:function Q(ee){N=ee}},function P(){O=!0,N=!0,w=(new Date).getTime(),typeof window<"u"&&window.console&&(C[D]=f(window.console.error),C[d]=f(window.console.error),C[v]=f(window.console.warn),C[p]=f(window.console.info),C[L]=f(window.console.debug))}(),x}b.__dashjs_factory_name="Debug";var F=M.default.getSingletonFactory(b);F.LOG_LEVEL_NONE=0,F.LOG_LEVEL_FATAL=D,F.LOG_LEVEL_ERROR=d,F.LOG_LEVEL_WARNING=v,F.LOG_LEVEL_INFO=p,F.LOG_LEVEL_DEBUG=L,M.default.updateSingletonFactory(b.__dashjs_factory_name,F),k.default=F},"./src/core/EventBus.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/MediaPlayerEvents.js");function D(){var v={};function F(g,S,C){var x=-1;return v[g]&&v[g].some(function(O,N){if(O&&O.callback===S&&(!C||C===O.scope))return x=N,!0}),x}return{on:function p(g,S,C){var x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!g)throw new Error("event type cannot be null or undefined");if(!S||"function"!=typeof S)throw new Error("listener must be a function: "+S);var O=x.priority||0;if(!(F(g,S,C)>=0)){v[g]=v[g]||[];var N={callback:S,scope:C,priority:O};C&&C.getStreamId&&(N.streamId=C.getStreamId()),C&&C.getType&&(N.mediaType=C.getType()),x&&x.mode&&(N.mode=x.mode),v[g].some(function(P,f){if(P&&O>P.priority)return v[g].splice(f,0,N),!0})||v[g].push(N)}},off:function L(g,S,C){if(g&&S&&v[g]){var x=F(g,S,C);x<0||(v[g][x]=null)}},trigger:function b(g){var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(g&&v[g]){if((S=S||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");S.type=g,C.streamId&&(S.streamId=C.streamId),C.mediaType&&(S.mediaType=C.mediaType),v[g].filter(function(x){return!(!x||C.streamId&&x.streamId&&x.streamId!==C.streamId||C.mediaType&&x.mediaType&&x.mediaType!==C.mediaType||C.mode&&x.mode&&x.mode!==C.mode||!x.mode&&C.mode&&C.mode===_.default.EVENT_MODE_ON_RECEIVE)}).forEach(function(x){return x&&x.callback.call(x.scope,S)})}},reset:function m(){v={}}}}D.__dashjs_factory_name="EventBus";var d=B.default.getSingletonFactory(D);d.EVENT_PRIORITY_LOW=0,d.EVENT_PRIORITY_HIGH=5e3,B.default.updateSingletonFactory(D.__dashjs_factory_name,d),k.default=d},"./src/core/FactoryMaker.js":function(we,k,u){"use strict";u.r(k);var B=function(){var _,M=[],y={},D={};function v(N,w){for(var P in M){var f=M[P];if(f.context===N&&f.name===w)return f.instance}return null}function b(N,w){return w[N]}function F(N,w,P){N in P&&(P[N]=w)}function O(N,w,P){var f,R=N.__dashjs_factory_name,V=w[R];if(V){var Q=V.instance;if(!V.override)return Q.apply({context:w,factory:_},P);for(var $ in f=N.apply({context:w},P),Q=Q.apply({context:w,factory:_,parent:f},P))f.hasOwnProperty($)&&(f[$]=Q[$])}else f=N.apply({context:w},P);return f.getClassName=function(){return R},f}return _={extend:function d(N,w,P,f){!f[N]&&w&&(f[N]={instance:w,override:P})},getSingletonInstance:v,setSingletonInstance:function p(N,w,P){for(var f in M){var R=M[f];if(R.context===N&&R.name===w)return void(M[f].instance=P)}M.push({name:w,context:N,instance:P})},deleteSingletonInstances:function L(N){M=M.filter(function(w){return w.context!==N})},getSingletonFactory:function x(N){var w=b(N.__dashjs_factory_name,y);return w||(w=function(f){var R;return void 0===f&&(f={}),{getInstance:function(){return R||(R=v(f,N.__dashjs_factory_name)),R||(R=O(N,f,arguments),M.push({name:N.__dashjs_factory_name,context:f,instance:R})),R}}},y[N.__dashjs_factory_name]=w),w},getSingletonFactoryByName:function C(N){return b(N,y)},updateSingletonFactory:function S(N,w){F(N,w,y)},getClassFactory:function g(N){var w=b(N.__dashjs_factory_name,D);return w||(w=function(f){return void 0===f&&(f={}),{create:function(){return O(N,f,arguments)}}},D[N.__dashjs_factory_name]=w),w},getClassFactoryByName:function h(N){return b(N,D)},updateClassFactory:function m(N,w){F(N,w,D)}}}();k.default=B},"./src/core/Settings.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Utils.js"),M=u("./src/core/Debug.js"),y=u("./src/streaming/constants/Constants.js"),D=u("./src/streaming/vo/metrics/HTTPRequest.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js");function p(m){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function L(m,h,g){return h in m?Object.defineProperty(m,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[h]=g,m}function b(){var m,h,S=this.context,C=Object(d.default)(S).getInstance(),x={"streaming.delay.liveDelay":v.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":v.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":v.default.SETTING_UPDATED_CATCHUP_ENABLED},O={debug:{logLevel:M.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,eventControllerRefreshDelay:150,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0},liveCatchup:{maxDrift:NaN,playbackRate:NaN,playbackBufferMin:.5,enabled:null,latencyThreshold:60,mode:y.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:y.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:y.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:y.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:1e4,retryIntervals:(m={},L(m,D.HTTPRequest.MPD_TYPE,500),L(m,D.HTTPRequest.XLINK_EXPANSION_TYPE,500),L(m,D.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),L(m,D.HTTPRequest.INIT_SEGMENT_TYPE,1e3),L(m,D.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),L(m,D.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),L(m,D.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),L(m,D.HTTPRequest.LICENSE,1e3),L(m,D.HTTPRequest.OTHER_TYPE,1e3),L(m,"lowLatencyReductionFactor",10),m),retryAttempts:(h={},L(h,D.HTTPRequest.MPD_TYPE,3),L(h,D.HTTPRequest.XLINK_EXPANSION_TYPE,1),L(h,D.HTTPRequest.MEDIA_SEGMENT_TYPE,3),L(h,D.HTTPRequest.INIT_SEGMENT_TYPE,3),L(h,D.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),L(h,D.HTTPRequest.INDEX_SEGMENT_TYPE,3),L(h,D.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),L(h,D.HTTPRequest.LICENSE,3),L(h,D.HTTPRequest.OTHER_TYPE,3),L(h,"lowLatencyMultiplyFactor",5),h),abr:{movingAverageMethod:y.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:y.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!1},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:y.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:y.default.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},N=_.default.clone(O);function w(V,Q,$){for(var J in V)V.hasOwnProperty(J)&&(Q.hasOwnProperty(J)?"object"!==p(V[J])||V[J]instanceof Array||null===V[J]?(Q[J]=_.default.clone(V[J]),x[$+J]&&C.trigger(x[$+J])):w(V[J],Q[J],$.slice()+J+"."):console.error("Settings parameter "+$+J+" is not supported"))}return{get:function P(){return N},update:function f(V){"object"===p(V)&&w(V,N,"")},reset:function R(){N=_.default.clone(O)}}}b.__dashjs_factory_name="Settings";var F=B.default.getSingletonFactory(b);k.default=F},"./src/core/Utils.js":function(we,k,u){"use strict";u.r(k);var B=u("./node_modules/path-browserify/index.js"),_=u.n(B);function M(p){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b})(p)}function D(p,L){for(var b=0;b<L.length;b++){var F=L[b];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(p,F.key,F)}}k.default=function(){function p(){!function y(p,L){if(!(p instanceof L))throw new TypeError("Cannot call a class as a function")}(this,p)}return function d(p,L,b){return L&&D(p.prototype,L),b&&D(p,b),p}(p,null,[{key:"mixin",value:function(b,F,m){var h,g={};if(b)for(var S in F)F.hasOwnProperty(S)&&(h=F[S],(!(S in b)||b[S]!==h&&(!(S in g)||g[S]!==h))&&(b[S]="object"===M(b[S])&&null!==b[S]?p.mixin(b[S],h,m):m(h)));return b}},{key:"clone",value:function(b){if(!b||"object"!==M(b))return b;var F;if(b instanceof Array){F=[];for(var m=0,h=b.length;m<h;++m)m in b&&F.push(p.clone(b[m]))}else F={};return p.mixin(F,b,p.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(b,F){try{if(!F||0===F.length)return b;var m=new URL(b);return F.forEach(function(h){h.key&&h.value&&m.searchParams.set(h.key,h.value)}),m.href}catch{return b}}},{key:"parseHttpHeaders",value:function(b){var F={};if(!b)return F;for(var m=b.trim().split("\r\n"),h=0,g=m.length;h<g;h++){var S=m[h],C=S.indexOf(": ");C>0&&(F[S.substring(0,C)]=S.substring(C+2))}return F}},{key:"generateUuid",value:function(){var b=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(m){var h=(b+16*Math.random())%16|0;return b=Math.floor(b/16),("x"==m?h:3&h|8).toString(16)})}},{key:"generateHashCode",value:function(b){var F=0;if(0===b.length)return F;for(var m=0;m<b.length;m++)F=(F<<5)-F+b.charCodeAt(m),F|=0;return F}},{key:"getRelativeUrl",value:function(b,F){try{var m=new URL(b),h=new URL(F);if(m.protocol=h.protocol,m.origin!==h.origin)return F;var g=_.a.relative(m.pathname.substr(0,m.pathname.lastIndexOf("/")),h.pathname.substr(0,h.pathname.lastIndexOf("/"))),S=0===g.length?1:0;return g+=h.pathname.substr(h.pathname.lastIndexOf("/")+S,h.pathname.length-1),h.pathname.length<g.length?h.pathname:g}catch{return F}}}]),p}()},"./src/core/Version.js":function(we,k,u){"use strict";u.r(k),u.d(k,"getVersionString",function(){return _});function _(){return"4.4.0"}},"./src/core/errors/Errors.js":function(we,k,u){"use strict";function _(h){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function y(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function d(h){var g=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=b(h);if(g){var O=b(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return v(this,x)}}function v(h,g){return!g||"object"!==_(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function b(h){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){y(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,C.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,C.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,C.SEGMENT_BASE_LOADER_ERROR_CODE=15,C.TIME_SYNC_FAILED_ERROR_CODE=16,C.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,C.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,C.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,C.APPEND_ERROR_CODE=20,C.REMOVE_ERROR_CODE=21,C.DATA_UPDATE_FAILED_ERROR_CODE=22,C.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,C.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,C.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,C.DOWNLOAD_ERROR_ID_SIDX_CODE=26,C.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,C.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,C.DOWNLOAD_ERROR_ID_XLINK_CODE=29,C.MANIFEST_ERROR_ID_PARSE_CODE=31,C.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,C.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,C.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,C.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,C.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",C.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",C.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",C.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",C.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",C.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",C.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",C.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",C.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",C.APPEND_ERROR_MESSAGE="chunk is not defined",C.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",C.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",C.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",C.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",C.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",C.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",C}return S}(u("./src/core/errors/ErrorsBase.js").default));k.default=m},"./src/core/errors/ErrorsBase.js":function(we,k,u){"use strict";function _(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(){!function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D)}return function M(D,d,v){return d&&_(D.prototype,d),v&&_(D,v),D}(D,[{key:"extend",value:function(v,p){if(v){var L=!!p&&p.override,b=!!p&&p.publicOnly;for(var F in v)!v.hasOwnProperty(F)||this[F]&&!L||b&&-1===v[F].indexOf("public_")||(this[F]=v[F])}}}]),D}()},"./src/core/events/CoreEvents.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/events/EventsBase.js");function _(m){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function y(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),h&&D(m,h)}function D(m,h){return(D=Object.setPrototypeOf||function(S,C){return S.__proto__=C,S})(m,h)}function d(m){var h=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var C,S=b(m);if(h){var x=b(this).constructor;C=Reflect.construct(S,arguments,x)}else C=S.apply(this,arguments);return v(this,C)}}function v(m,h){return!h||"object"!==_(h)&&"function"!=typeof h?function p(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(m):h}function b(m){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}k.default=function(m){y(g,m);var h=d(g);function g(){var S;return function M(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}(this,g),(S=h.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",S.BUFFERING_COMPLETED="bufferingCompleted",S.BUFFER_CLEARED="bufferCleared",S.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",S.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",S.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",S.CURRENT_TRACK_CHANGED="currentTrackChanged",S.DATA_UPDATE_COMPLETED="dataUpdateCompleted",S.INBAND_EVENTS="inbandEvents",S.INITIAL_STREAM_SWITCH="initialStreamSwitch",S.INIT_FRAGMENT_LOADED="initFragmentLoaded",S.INIT_FRAGMENT_NEEDED="initFragmentNeeded",S.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",S.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",S.LOADING_COMPLETED="loadingCompleted",S.LOADING_PROGRESS="loadingProgress",S.LOADING_DATA_PROGRESS="loadingDataProgress",S.LOADING_ABANDONED="loadingAborted",S.MANIFEST_UPDATED="manifestUpdated",S.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",S.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",S.QUOTA_EXCEEDED="quotaExceeded",S.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",S.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",S.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",S.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",S.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",S.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",S.SOURCE_BUFFER_ERROR="sourceBufferError",S.STREAMS_COMPOSED="streamsComposed",S.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",S.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",S.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",S.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",S.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",S.URL_RESOLUTION_FAILED="urlResolutionFailed",S.VIDEO_CHUNK_RECEIVED="videoChunkReceived",S.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",S.XLINK_ELEMENT_LOADED="xlinkElementLoaded",S.XLINK_READY="xlinkReady",S.SEEK_TARGET="seekTarget",S.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",S.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",S.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",S}return g}(B.default)},"./src/core/events/Events.js":function(we,k,u){"use strict";function _(h){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function y(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function d(h){var g=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=b(h);if(g){var O=b(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return v(this,x)}}function v(h,g){return!g||"object"!==_(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function b(h){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var F=function(h){y(S,h);var g=d(S);function S(){return M(this,S),g.apply(this,arguments)}return S}(u("./src/core/events/CoreEvents.js").default),m=new F;k.default=m},"./src/core/events/EventsBase.js":function(we,k,u){"use strict";function _(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(){!function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D)}return function M(D,d,v){return d&&_(D.prototype,d),v&&_(D,v),D}(D,[{key:"extend",value:function(v,p){if(v){var L=!!p&&p.override,b=!!p&&p.publicOnly;for(var F in v)!v.hasOwnProperty(F)||this[F]&&!L||b&&-1===v[F].indexOf("public_")||(this[F]=v[F])}}}]),D}()},"./src/dash/DashAdapter.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/constants/DashConstants.js"),_=u("./src/dash/vo/RepresentationInfo.js"),M=u("./src/dash/vo/MediaInfo.js"),y=u("./src/dash/vo/StreamInfo.js"),D=u("./src/dash/vo/ManifestInfo.js"),d=u("./src/dash/vo/Event.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/dash/models/DashManifestModel.js"),L=u("./src/dash/models/PatchManifestModel.js");function b(){var F,m,h,g,S,C,x,O=this.context;function V(je){return m.getRolesForAdaptation(je).filter(function(xe){return xe.value===B.default.MAIN})[0]}function Q(je,xe,Se){var ke=m.getAdaptationsForType(g[0].mpd.manifest,je,xe);if(!ke||0===ke.length)return null;if(ke.length>1&&Se){var Ze=te(Se,xe);if(S[Se.id]&&S[Se.id][xe])for(var at=0,dt=ke.length;at<dt;at++)if($(S[Se.id][xe],Ze[at]))return ke[at];for(var et=0,pt=ke.length;et<pt;et++)if(V(ke[et]))return ke[et]}return ke[0]}function $(je,xe){if(!je||!xe)return!1;var Se=je.id===xe.id,ke=je.codec===xe.codec,Ze=je.viewpoint===xe.viewpoint,at=je.lang===xe.lang,dt=je.roles.toString()===xe.roles.toString(),et=je.accessibility.toString()===xe.accessibility.toString(),pt=je.audioChannelConfiguration.toString()===xe.audioChannelConfiguration.toString();return Se&&ke&&Ze&&at&&dt&&et&&pt}function J(je,xe,Se,ke,Ze,at){var pt,jt,Rt,Yt,Be,dt=[];if(!ke||0===ke.length)return[];var $e=m.getAdaptationsForPeriod(xe);for(Rt=0,Be=ke.length;Rt<Be;Rt++)if(pt=Ue($e[jt=m.getIndexForAdaptation(ke[Rt],je,Se.index)]),at){var nt=pt.accessibility.length;for(Yt=0;Yt<nt;Yt++)if(pt){var Ot=pt.accessibility[Yt];if(0===Ot.indexOf("cea-608:")){var wt=Ot.substring(8).split(";");if("CC"===wt[0].substring(0,2))for(Yt=0;Yt<wt.length;Yt++)pt||(pt=Ue.call(this,$e[jt])),Qe(pt,wt[Yt].substring(0,3),wt[Yt].substring(4)),dt.push(pt),pt=null;else for(Yt=0;Yt<wt.length;Yt++)pt||(pt=Ue.call(this,$e[jt])),Qe(pt,"CC"+(Yt+1),wt[Yt]),dt.push(pt),pt=null}else 0===Ot.indexOf("cea-608")&&(Qe(pt,C.CC1,"eng"),dt.push(pt),pt=null)}}else Ze===C.IMAGE?(ft(pt),dt.push(pt),pt=null):pt&&dt.push(pt);return dt}function te(je,xe,Se){var ke=g,Ze=Se,at=[];if(Ze)Ft(),ke=ne(Ze);else{if(!(g.length>0))return at;Ze=g[0].mpd.manifest}var dt=Pe(je,ke),et=m.getAdaptationsForType(Ze,je?je.index:null,xe);return at=J(Ze,dt,je,et,xe),xe===C.TEXT&&(et=m.getAdaptationsForType(Ze,je?je.index:null,C.VIDEO),at=at.concat(J(Ze,dt,je,et,xe,!0))),at}function ne(je){var xe=Y(je);return m.getRegularPeriods(xe)}function Y(je){var xe=Le(je);return m.getMpd(xe)}function Ce(){g=[],S={}}function Le(je){return je||(g.length>0?g[0].mpd.manifest:null)}function He(je){try{var xe=Pe(je.streamInfo,g),Se=m.getAdaptationsForPeriod(xe);return je&&je.streamInfo&&void 0!==je.streamInfo.id&&Se?Se[je.index]:null}catch{return null}}function Pe(je,xe){for(var Se=xe.length,ke=0;ke<Se;ke++){var Ze=xe[ke];if(je&&je.id===Ze.id)return Ze}return null}function Ue(je){if(!je)return null;var ke,xe=new M.default,Se=je.period.mpd.manifest.Period_asArray[je.period.index].AdaptationSet_asArray[je.index];if(xe.id=je.id,xe.index=je.index,xe.type=je.type,xe.streamInfo=lt(je.period),xe.representationCount=m.getRepresentationCount(Se),xe.labels=m.getLabelsForAdaptation(Se),xe.lang=m.getLanguageForAdaptation(Se),ke=m.getViewpointForAdaptation(Se),xe.viewpoint=ke?ke.value:void 0,xe.accessibility=m.getAccessibilityForAdaptation(Se).map(function(dt){var et=dt.value,pt=et;return dt.schemeIdUri&&dt.schemeIdUri.search("cea-608")>=0&&typeof x<"u"&&(pt=et?"cea-608:"+et:"cea-608",xe.embeddedCaptions=!0),pt}),xe.audioChannelConfiguration=m.getAudioChannelConfigurationForAdaptation(Se).map(function(dt){return dt.value}),0===xe.audioChannelConfiguration.length&&Array.isArray(Se.Representation_asArray)&&Se.Representation_asArray.length>0&&(xe.audioChannelConfiguration=m.getAudioChannelConfigurationForRepresentation(Se.Representation_asArray[0]).map(function(dt){return dt.value})),xe.roles=m.getRolesForAdaptation(Se).map(function(dt){return dt.value}),xe.codec=m.getCodec(Se),xe.mimeType=m.getMimeType(Se),xe.contentProtection=m.getContentProtectionData(Se),xe.bitrateList=m.getBitrateListForAdaptation(Se),xe.selectionPriority=m.getSelectionPriority(Se),xe.contentProtection){var Ze=xe.contentProtection.map(function(dt){return m.getKID(dt)}).filter(function(dt){return null!==dt});if(Ze.length){var at=Ze[0];xe.contentProtection.forEach(function(dt){dt.keyId=at})}}return xe.isText=m.getIsText(Se),xe.supplementalProperties=m.getSupplementalProperties(Se),xe.isFragmented=m.getIsFragmented(Se),xe.isEmbedded=!1,xe}function Qe(je,xe,Se){je.id=xe,je.index=100+parseInt(xe.substring(2,3)),je.type=C.TEXT,je.codec="cea-608-in-SEI",je.isEmbedded=!0,je.isFragmented=!1,je.lang=Se,je.roles=["caption"]}function ft(je){je.type=C.IMAGE}function lt(je){var xe=new y.default;return xe.id=je.id,xe.index=je.index,xe.start=je.start,xe.duration=je.duration,xe.manifestInfo=function Dt(je){var xe=new D.default;return xe.dvrWindowSize=je.timeShiftBufferDepth,xe.loadedTime=je.manifest.loadedTime,xe.availableFrom=je.availabilityStartTime,xe.minBufferTime=je.manifest.minBufferTime,xe.maxFragmentDuration=je.maxSegmentDuration,xe.duration=m.getDuration(je.manifest),xe.isDynamic=m.getIsDynamic(je.manifest),xe.serviceDescriptions=m.getServiceDescriptions(je.manifest),xe.protocol=je.manifest.protocol,xe}(je.mpd),xe.isLast=1===je.mpd.manifest.Period_asArray.length||Math.abs(xe.start+xe.duration-xe.manifestInfo.duration)<1,xe}function Ft(){if(!C)throw new Error("setConfig function has to be called previously")}function Ht(je){return g.length>0?g[0].mpd.manifest.Period_asArray[je]:null}function sn(je,xe,Se){var Ze,at,dt,et,pt;if(je)for(Ze=je.AdaptationSet_asArray,et=0;et<Ze.length;et+=1)for(dt=Ze[et].Representation_asArray,pt=0;pt<dt.length;pt+=1)if(xe===(at=dt[pt]).id)return Se?pt:at;return null}return F={getBandwidthForRepresentation:function z(je,xe){var Se;return(Se=sn(Ht(xe),je))?Se.bandwidth:null},getIndexForRepresentation:function G(je,xe){return function Jt(je,xe){var Se=sn(je,xe,!0);return null!==Se?Se:-1}(Ht(xe),je)},getMaxIndexForBufferType:function Te(je,xe){return function on(je,xe){var Se,ke,Ze,at;if(!je||!xe)return-1;for(ke=je.AdaptationSet_asArray,at=0;at<ke.length;at+=1)if(Ze=(Se=ke[at]).Representation_asArray,m.getIsTypeOf(Se,xe))return Ze.length;return-1}(Ht(xe),je)},convertRepresentationToRepresentationInfo:function f(je){if(je){var xe=new _.default,ke=m.getRepresentationFor(je.index,je.adaptation.period.mpd.manifest.Period_asArray[je.adaptation.period.index].AdaptationSet_asArray[je.adaptation.index]);return xe.id=je.id,xe.quality=je.index,xe.bandwidth=m.getBandwidth(ke),xe.fragmentDuration=je.segmentDuration||(je.segments&&je.segments.length>0?je.segments[0].duration:NaN),xe.MSETimeOffset=je.MSETimeOffset,xe.mediaInfo=Ue(je.adaptation),xe}return null},getStreamsInfo:function K(je,xe){var Se=[],ke=g;if(je&&(Ft(),ke=ne(je)),ke.length>0){(!xe||xe>ke.length)&&(xe=ke.length);for(var Ze=0;Ze<xe;Ze++)Se.push(lt(ke[Ze]))}return Se},getMediaInfoForType:function R(je,xe){if(0===g.length||!je)return null;var Se=Pe(je,g);if(!Se)return null;var ke=m.getAdaptationsForPeriod(Se),Ze=Q(je.index,xe,je);return Ze?Ue(ke[m.getIndexForAdaptation(Ze,g[0].mpd.manifest,je.index)]):null},getAllMediaInfoForType:te,getAdaptationForType:Q,getRealAdaptation:function oe(je,xe){var Se,ke,Ze=Pe(je,g);return Se=xe?xe.id:null,g.length>0&&Ze&&(ke=Se?m.getAdaptationForId(Se,g[0].mpd.manifest,Ze.index):m.getAdaptationForIndex(xe?xe.index:null,g[0].mpd.manifest,Ze.index)),ke},getProducerReferenceTimes:function ee(je,xe){var Se,ke,Ze=Pe(je,g);return Se=xe?xe.id:null,g.length>0&&Ze&&(ke=Se?m.getAdaptationForId(Se,g[0].mpd.manifest,Ze.index):m.getAdaptationForIndex(xe?xe.index:null,g[0].mpd.manifest,Ze.index)),ke?m.getProducerReferenceTimesForAdaptation(ke):[]},getRealPeriodByIndex:function pe(je){return m.getRealPeriodForIndex(je,g[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function ue(je){try{return m.getEssentialPropertiesForRepresentation(je)}catch{return[]}},getVoRepresentations:function _e(je){var Se=He(je);return m.getRepresentationsForAdaptation(Se)},getEventsFor:function me(je,xe){var Se=[];if(g.length>0){var ke=g[0].mpd.manifest;je instanceof y.default?Se=m.getEventsForPeriod(Pe(je,g)):je instanceof M.default?Se=m.getEventStreamForAdaptationSet(ke,He(je)):je instanceof _.default&&(Se=m.getEventStreamForRepresentation(ke,xe))}return Se},getEvent:function ie(je,xe,Se,ke){try{if(!je||!xe||isNaN(Se)||!ke)return null;var Ze=je.scheme_id_uri,at=je.value;if(!xe[Ze+"/"+at])return null;var Be,dt=new d.default,et=je.timescale||1,pt=ke.adaptation.period.start,jt=xe[Ze+"/"+at],Rt=isNaN(ke.presentationTimeOffset)?isNaN(jt.presentationTimeOffset)?0:jt.presentationTimeOffset:ke.presentationTimeOffset,Yt=je.presentation_time_delta/et;Be=0===je.version?pt+Se-Rt+Yt:pt-Rt+Yt;var $e=je.event_duration,nt=je.id,Ot=je.message_data;return dt.eventStream=jt,dt.eventStream.value=at,dt.eventStream.timescale=et,dt.duration=$e,dt.id=nt,dt.calculatedPresentationTime=Be,dt.messageData=Ot,dt.presentationTimeDelta=Yt,dt}catch{return null}},getMpd:Y,setConfig:function P(je){!je||(je.constants&&(C=je.constants),je.cea608parser&&(x=je.cea608parser),je.errHandler&&m.setConfig({errHandler:je.errHandler}),je.BASE64&&m.setConfig({BASE64:je.BASE64}))},updatePeriods:function X(je){if(!je)return null;Ft(),g=ne(je)},getIsTextTrack:function ge(je){return m.getIsText(je)},getUTCTimingSources:function fe(){var je=Le();return m.getUTCTimingSources(je)},getSuggestedPresentationDelay:function ce(){return m.getSuggestedPresentationDelay(g.length>0?g[0].mpd:null)},getAvailabilityStartTime:function de(je){var xe=Y(je);return m.getAvailabilityStartTime(xe)},getIsTypeOf:function Ee(je,xe){return m.getIsTypeOf(je,xe)},getIsDynamic:function se(je){var xe=Le(je);return m.getIsDynamic(xe)},getDuration:function ve(je){var xe=Le(je);return m.getDuration(xe)},getRegularPeriods:ne,getLocation:function H(je){return m.getLocation(je)},getPatchLocation:function U(je){var xe=m.getPatchLocation(je),Se=m.getPublishTime(je);if(!xe||!Se)return null;if(xe.hasOwnProperty("ttl")&&Se){var ke=1e3*parseFloat(xe.ttl);if(Se.getTime()+ke<=(new Date).getTime())return null}return xe.__text},getManifestUpdatePeriod:function E(je){return m.getManifestUpdatePeriod(je,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function I(je){return m.getPublishTime(je)},getIsDVB:function W(je){return m.hasProfile(je,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function re(je){return h.getIsPatch(je)},getBaseURLsFromElement:function De(je){return m.getBaseURLsFromElement(je)},getRepresentationSortFunction:function Ie(){return m.getRepresentationSortFunction()},getCodec:function le(je,xe,Se){return m.getCodec(je,xe,Se)},getPeriodById:function ye(je){if(!je||0===g.length)return null;var xe=g.filter(function(Se){return Se.id===je});return xe&&xe.length>0?xe[0]:null},setCurrentMediaInfo:function ae(je,xe,Se){S[je]=S[je]||{},S[je][xe]=S[je][xe]||{},S[je][xe]=Se},isPatchValid:function Fe(je,xe){var Se=m.getId(je),ke=h.getMpdId(xe),Ze=m.getPublishTime(je),at=h.getPublishTime(xe),dt=h.getOriginalPublishTime(xe);return!!(Se&&ke&&Se==ke&&Ze&&dt&&Ze.getTime()==dt.getTime()&&at&&Ze.getTime()<at.getTime())},applyPatchToManifest:function Oe(je,xe){h.getPatchOperations(xe).forEach(function(Se){var ke=Se.getMpdTarget(je);if(null!==ke){var Ze=ke.name,at=ke.target,dt=ke.leaf;if(Se.xpath.findsAttribute()){switch(Se.action){case"add":case"replace":at[Ze]=Se.value;break;case"remove":delete at[Ze]}return}var et=(at[Ze+"_asArray"]||[]).indexOf(dt),pt="prepend"===Se.position||"before"===Se.position;if(("remove"===Se.action||"replace"===Se.action)&&(delete at[Ze],-1!=et)){var jt=at[Ze+"_asArray"];jt.splice(et,1),jt.length>1?at[Ze]=jt:1==jt.length?at[Ze]=jt[0]:delete at[Ze+"_asArray"]}("add"===Se.action||"replace"===Se.action)&&Object.keys(Se.value).forEach(function(Rt){var Yt=Se.value[Rt],Be=at[Rt+"_asArray"]||[];0===Be.length&&at[Rt]&&Be.push(at[Rt]),0===Be.length?Be=Yt:Be.splice.apply(Be,[Rt==Ze&&-1!=et?et+(pt?0:1)+("replace"==Se.action?-1:0):pt?0:Be.length,0].concat(Yt)),at[Rt+"_asArray"]=Be,at[Rt]=1==Be.length?Be[0]:Be})}})},areMediaInfosEqual:$,reset:Ce},function w(){m=Object(p.default)(O).getInstance(),h=Object(L.default)(O).getInstance(),Ce()}(),F}b.__dashjs_factory_name="DashAdapter",k.default=v.default.getSingletonFactory(b)},"./src/dash/DashHandler.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/vo/FragmentRequest.js"),_=u("./src/streaming/vo/metrics/HTTPRequest.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/MediaPlayerEvents.js"),D=u("./src/dash/utils/SegmentsUtils.js"),d=u("./src/dash/constants/DashConstants.js");function p(L){var O,N,w,P,f,b=(L=L||{}).eventBus,F=L.debug,m=L.urlUtils,h=L.type,g=L.streamInfo,S=L.segmentsController,C=L.timelineConverter,x=L.baseURLController;function $(){return h}function te(){w=null}function K(de,se,ve){var Y,H,ne=x.resolve(ve.path);return ne&&se!==ne.url&&m.isRelative(se)?(Y=ne.url,H=ne.serviceLocation,se&&(Y=m.resolve(se,Y))):Y=se,!m.isRelative(Y)&&(de.url=Y,de.serviceLocation=H,!0)}function ue(de,se){if(null==se)return null;var ve=new B.default,ne=se.representation,Y=ne.adaptation.period.mpd.manifest.Period_asArray[ne.adaptation.period.index].AdaptationSet_asArray[ne.adaptation.index].Representation_asArray[ne.index].bandwidth,H=se.media;return H=Object(D.replaceTokenForTemplate)(H,"Number",se.replacementNumber),H=Object(D.replaceTokenForTemplate)(H,"Time",se.replacementTime),H=Object(D.replaceTokenForTemplate)(H,"Bandwidth",Y),H=Object(D.replaceIDForTemplate)(H,ne.id),H=Object(D.unescapeDollarsInTemplate)(H),ve.mediaType=$(),ve.type=_.HTTPRequest.MEDIA_SEGMENT_TYPE,ve.range=se.mediaRange,ve.startTime=se.presentationStartTime,ve.mediaStartTime=se.mediaStartTime,ve.duration=se.duration,ve.timescale=ne.timescale,ve.availabilityStartTime=se.availabilityStartTime,ve.availabilityEndTime=se.availabilityEndTime,ve.availabilityTimeComplete=ne.availabilityTimeComplete,ve.wallStartTime=se.wallStartTime,ve.quality=ne.index,ve.index=se.index,ve.mediaInfo=de,ve.adaptationIndex=ne.adaptation.index,ve.representationId=ne.id,K(ve,H,ne)?ve:void 0}function _e(de,se,ve){var ne=null;if(!se||!se.segmentInfoType)return ne;var Y=S.getSegmentByTime(se,ve);return Y&&(w=Y,N.debug("Index for time "+ve+" is "+Y.index),ne=ue(de,Y)),ne}function ce(){N.debug("Dynamic stream complete"),f=!0}return O={initialize:function V(de){P=de,f=!1,S.initialize(de)},getStreamId:function Q(){return g.id},getType:$,getStreamInfo:function J(){return g},getInitRequest:function oe(de,se){return se?function ee(de,se,ve){var ne=new B.default,Y=se.adaptation.period,H=Y.start;if(ne.mediaType=ve,ne.type=_.HTTPRequest.INIT_SEGMENT_TYPE,ne.range=se.range,ne.availabilityStartTime=C.calcAvailabilityStartTimeFromPresentationTime(H,se,P),ne.availabilityEndTime=C.calcAvailabilityEndTimeFromPresentationTime(H+Y.duration,se,P),ne.quality=se.index,ne.mediaInfo=de,ne.representationId=se.id,K(ne,se.initialization,se))return ne.url=Object(D.replaceTokenForTemplate)(ne.url,"Bandwidth",se.bandwidth),ne}(de,se,$()):null},getSegmentRequestForTime:_e,getCurrentIndex:function fe(){return w?w.index:-1},getNextSegmentRequest:function me(de,se){var ve=null;if(!se||!se.segmentInfoType)return null;var ne=w?w.index+1:0,Y=S.getSegmentByIndex(se,ne,w?w.mediaStartTime:-1);if(Y)ve=ue(de,Y),w=Y;else{if(P&&!f)return N.debug($()+" No segment found at index: "+ne+". Wait for next loop"),null;f=!0}return ve},isLastSegmentRequested:function pe(de,se){if(!de||!w)return!1;if(f)return!0;if(!isFinite(de.adaptation.period.duration)||w.presentationStartTime+w.duration>se)return!1;if(de.mediaFinishedInformation&&!isNaN(de.mediaFinishedInformation.numberOfSegments)&&!isNaN(w.index)&&w.index>=de.mediaFinishedInformation.numberOfSegments-1){if(!P||de.segmentInfoType===d.default.SEGMENT_TEMPLATE)return!0;if(P&&de.segmentInfoType===d.default.SEGMENT_LIST&&de.adaptation.period.nextPeriodId)return!0}return!!(P&&de.adaptation.period.nextPeriodId&&de.segmentInfoType===d.default.SEGMENT_TIMELINE&&de.mediaFinishedInformation&&!isNaN(de.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&w&&!isNaN(w.mediaStartTime)&&!isNaN(w.duration)&&w.mediaStartTime+w.duration>=de.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function X(){te(),b.off(y.default.DYNAMIC_TO_STATIC,ce,O)},getNextSegmentRequestIdempotent:function ie(de,se){var Y=S.getSegmentByIndex(se,w?w.index+1:0,w?w.mediaStartTime:-1);return Y?ue(de,Y):null},getValidTimeCloseToTargetTime:function ae(de,se,ve,ne){try{if(isNaN(de)||!se||!ve)return NaN;if(de<0&&(de=0),isNaN(ne)&&(ne=.5),_e(se,ve,de))return de;for(var Y=ve.adaptation.period.start,H=ve.adaptation.period.start+ve.adaptation.period.duration,E=Math.min(de+ne,H),I=Math.max(de-ne,Y),U=NaN,W=null;E<=H||I>=Y;){var re=null,De=null;if(E<=H&&(re=_e(se,ve,E)),I>=Y&&(De=_e(se,ve,I)),De){U=I,W=De;break}if(re){U=E,W=re;break}E+=ne,I-=ne}if(W){var Ie=W.startTime+W.duration;return de>=W.startTime&&Ie-de>ne?de:de<W.startTime?W.startTime:Math.min(Ie-ne,U)}return U}catch{return NaN}},getValidTimeAheadOfTargetTime:function ge(de,se,ve,ne){try{if(isNaN(de)||!se||!ve)return NaN;if(de<0&&(de=0),isNaN(ne)&&(ne=.5),_e(se,ve,de))return de;if(ve.adaptation.period.start+ve.adaptation.period.duration<de)return NaN;for(var Y=Math.min(ve.adaptation.period.start+ve.adaptation.period.duration,de+30),H=Math.min(de+ne,Y),E=NaN,I=null;H<=Y;){var U=null;if(H<=Y&&(U=_e(se,ve,H)),U){E=H,I=U;break}H+=ne}if(I){var W=I.startTime+I.duration;return de>=I.startTime&&W-de>ne?de:de<I.startTime?I.startTime:Math.min(W-ne,E)}return E}catch{return NaN}}},function R(){N=F.getLogger(O),te(),b.on(y.default.DYNAMIC_TO_STATIC,ce,O)}(),O}p.__dashjs_factory_name="DashHandler",k.default=M.default.getClassFactory(p)},"./src/dash/DashMetrics.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/streaming/vo/metrics/HTTPRequest.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/constants/MetricsConstants.js"),D=u("./src/dash/utils/Round10.js"),d=u("./src/streaming/models/MetricsModel.js"),v=u("./src/core/Utils.js"),p=u("./src/streaming/vo/metrics/PlayList.js");function L(b){var m,h,g,S,F=this.context,C=(b=b||{}).metricsModel;function $(U){var W=C.getMetricsFor(U,!0);if(!W)return null;var Ie,re=W.HttpList,De=null;if(!re||re.length<=0)return null;for(Ie=re.length-1;Ie>=0;){if(re[Ie].responsecode){De=re[Ie];break}Ie--}return De}function J(U){var W=C.getMetricsFor(U,!0);return W&&W.HttpList?W.HttpList:[]}function X(U,W){if(!U)return null;var re=U[W];return re&&0!==re.length?re[re.length-1]:null}return m={getCurrentRepresentationSwitch:function N(U){return X(C.getMetricsFor(U,!0),y.default.TRACK_SWITCH)},getCurrentBufferState:function P(U){return X(C.getMetricsFor(U,!0),y.default.BUFFER_STATE)},getCurrentBufferLevel:function f(U){var re=X(C.getMetricsFor(U,!0),y.default.BUFFER_LEVEL);return re?D.default.round10(re.level/1e3,-3):0},getCurrentHttpRequest:$,getHttpRequests:J,getCurrentDroppedFrames:function K(){return X(C.getMetricsFor(B.default.VIDEO,!0),y.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function ee(U){return X(C.getMetricsFor(U,!0),y.default.SCHEDULING_INFO)},getCurrentDVRInfo:function fe(U){return X(U?C.getMetricsFor(U,!0):C.getMetricsFor(B.default.VIDEO,!0)||C.getMetricsFor(B.default.AUDIO,!0),y.default.DVR_INFO)},getCurrentManifestUpdate:function pe(){return X(C.getMetricsFor(B.default.STREAM),y.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function se(U,W){if(!W)return null;var re={},De=$(U);De&&(re=v.default.parseHttpHeaders(De._responseHeaders));var Ie=re[W.toLowerCase()];return void 0===Ie?null:Ie},getLatestMPDRequestHeaderValueByID:function de(U){if(!U)return null;var re,De,Ie,W={};for(Ie=(re=J(B.default.STREAM)).length-1;Ie>=0;Ie--)if((De=re[Ie]).type===_.HTTPRequest.MPD_TYPE){W=v.default.parseHttpHeaders(De._responseHeaders);break}var le=W[U.toLowerCase()];return void 0===le?null:le},addRepresentationSwitch:function w(U,W,re,De,Ie){C.addRepresentationSwitch(U,W,re,De,Ie)},addDVRInfo:function ce(U,W,re,De){C.addDVRInfo(U,W,re,De)},updateManifestUpdateInfo:function _e(U){var W=this.getCurrentManifestUpdate();C.updateManifestUpdateInfo(W,U)},addManifestUpdateStreamInfo:function ie(U){if(U){var W=this.getCurrentManifestUpdate();C.addManifestUpdateStreamInfo(W,U.id,U.index,U.start,U.duration)}},addManifestUpdateRepresentationInfo:function ge(U,W){if(U){var re=this.getCurrentManifestUpdate();C.addManifestUpdateRepresentationInfo(re,U.id,U.index,U.streamIndex,W,U.presentationTimeOffset,U.startNumber,U.fragmentInfoType)}},addManifestUpdate:function me(U){C.addManifestUpdate(B.default.STREAM,U.type,U.requestStartDate,U.requestEndDate)},addHttpRequest:function ae(U,W,re,De,Ie){C.addHttpRequest(U.mediaType,null,U.type,U.url,U.quality,W,U.serviceLocation||null,U.range||null,U.requestStartDate,U.firstByteDate,U.requestEndDate,re,U.duration,De,Ie,U.fileLoaderType)},addSchedulingInfo:function ue(U,W){C.addSchedulingInfo(U.mediaType,new Date,U.type,U.startTime,U.availabilityStartTime,U.duration,U.quality,U.range,W)},addRequestsQueue:function te(U,W,re){C.addRequestsQueue(U,W,re)},addBufferLevel:function R(U,W,re){C.addBufferLevel(U,W,re)},addBufferState:function V(U,W,re){C.addBufferState(U,W,re)},addDroppedFrames:function oe(U){C.addDroppedFrames(B.default.VIDEO,U)},addPlayList:function ve(){S&&(C.addPlayList(S),S=null)},addDVBErrors:function I(U){C.addDVBErrors(U)},createPlaylistMetrics:function ne(U,W){(S=new p.PlayList).start=new Date,S.mstart=U,S.starttype=W},createPlaylistTraceMetrics:function Y(U,W,re){!0===h&&(h=!1,(g=new p.PlayListTrace).representationid=U,g.start=new Date,g.mstart=W,g.playbackspeed=null!==re?re.toString():null)},updatePlayListTraceMetrics:function H(U){if(g)for(var W in g)g[W]=U[W]},pushPlayListTraceMetrics:function E(U,W){if(!1===h&&S&&g&&g.start){var re=g.start,De=U.getTime()-re.getTime();g.duration=De,g.stopreason=W,S.trace.push(g),h=!0}},clearAllCurrentMetrics:function Q(){C.clearAllCurrentMetrics()}},function x(){C=C||Object(d.default)(F).getInstance({settings:b.settings}),function O(){h=!0,g=null,S=null}()}(),m}L.__dashjs_factory_name="DashMetrics",k.default=M.default.getSingletonFactory(L)},"./src/dash/SegmentBaseLoader.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/vo/Segment.js"),_=u("./src/streaming/vo/DashJSError.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/vo/FragmentRequest.js"),D=u("./src/streaming/net/URLLoader.js");function d(){var p,L,b,F,m,h,g,S,C,x,O,N,w,v=this.context;function Q(ee,ue,pe,_e){var ie=null,me=ee?w.resolve(ee.path):null,ae=_e||{init:!0,url:me?me.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:ue};L.debug("Start searching for initialization.");var ge=oe(ae);S.load({request:ge,success:function(se){if(ae.bytesLoaded=ae.range.end,!(ie=F.findInitRange(se)))return ae.range.end=ae.bytesLoaded+ae.bytesToLoad,Q(ee,ue,pe,ae);ee.range=ie,pe(ee)},error:function(){pe(ee)}}),L.debug("Perform init search: "+ae.url)}function J(ee,ue,pe,_e,ie,me){if(pe&&(void 0===pe.start||void 0===pe.end)){var ae=pe?pe.toString().split("-"):null;pe=ae?{start:parseFloat(ae[0]),end:parseFloat(ae[1])}:null}ie=ie||te;var ge=null,fe=null,ce=!!pe,de=ee?w.resolve(ee.path):null,se={init:!1,url:de?de.url:void 0,range:ce?pe:{start:0,end:1500},searching:!ce,bytesLoaded:me?me.bytesLoaded:0,bytesToLoad:1500,mediaType:ue},ve=oe(se);S.load({request:ve,success:function(E){var I=se.bytesToLoad,U=E.byteLength;if(se.bytesLoaded=se.range.end-se.range.start,ge=F.parse(E),(fe=ge.getBox("sidx"))&&fe.isComplete){var De,Ie,re=fe.references;if(null!=re&&re.length>0&&(De=1===re[0].reference_type),De){L.debug("Initiate multiple SIDX load."),se.range.end=se.range.start+fe.size;var le,z,G,Te,Ee=[],Ce=0,Fe=(fe.offset||se.range.start)+fe.size,Oe=function(He){He?(Ee=Ee.concat(He),++Ce>=z&&(Ee.sort(function(Pe,Ue){return Pe.startTime-Ue.startTime<0?-1:0}),ie(Ee,ee,_e))):ie(null,ee,_e)};for(le=0,z=re.length;le<z;le++)G=Fe,Te=Fe+re[le].referenced_size-1,Fe+=re[le].referenced_size,J(ee,ue,{start:G,end:Te},_e,Oe,se)}else L.debug("Parsing segments from SIDX. representation "+ue+" - id: "+ee.id+" for range : "+se.range.start+" - "+se.range.end),Ie=function K(ee,ue){for(var fe,de,se,pe=ee.references,_e=pe.length,ie=ee.timescale,me=ee.earliest_presentation_time,ae=ue.range.start+ee.offset+ee.first_offset+ee.size,ge=[],ve=0;ve<_e;ve++)de=pe[ve].subsegment_duration,se=pe[ve].referenced_size,(fe=new B.default).duration=de,fe.startTime=me,fe.timescale=ie,fe.mediaRange=ae+"-"+(ae+se-1),ge.push(fe),me+=de,ae+=se;return ge}(fe,se),ie(Ie,ee,_e)}else{if(fe)se.range.start=fe.offset||se.range.start,se.range.end=se.range.start+(fe.size||I);else{if(U<se.bytesLoaded)return void ie(null,ee,_e);var W=ge.getLastBox();W&&W.size?(se.range.start=W.offset+W.size,se.range.end=se.range.start+I):se.range.end+=I}J(ee,ue,se.range,_e,null,se)}},error:function(){ie(null,ee,_e)}}),L.debug("Perform SIDX load for type ".concat(ue," : ").concat(se.url," with range ").concat(se.range.start," - ").concat(se.range.end))}function te(ee,ue,pe){pe({segments:ee,representation:ue,error:ee?void 0:new _.default(C.SEGMENT_BASE_LOADER_ERROR_CODE,C.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function oe(ee){if(ee.url){var ue=new y.default;return ue.setInfo(ee),ue}}return p={setConfig:function R(ee){ee.baseURLController&&(w=ee.baseURLController),ee.dashMetrics&&(h=ee.dashMetrics),ee.mediaPlayerModel&&(g=ee.mediaPlayerModel),ee.errHandler&&(b=ee.errHandler),ee.boxParser&&(F=ee.boxParser),ee.debug&&(L=ee.debug.getLogger(p)),ee.requestModifier&&(m=ee.requestModifier),ee.errors&&(C=ee.errors),ee.urlUtils&&(N=ee.urlUtils),ee.constants&&(x=ee.constants),ee.dashConstants&&(O=ee.dashConstants)},initialize:function f(){S=Object(D.default)(v).create({errHandler:b,dashMetrics:h,mediaPlayerModel:g,requestModifier:m,boxParser:F,errors:C,urlUtils:N,constants:x,dashConstants:O})},loadInitialization:function V(ee,ue){return new Promise(function(pe){Q(ee,ue,pe)})},loadSegments:function $(ee,ue,pe){return new Promise(function(_e){J(ee,ue,pe,_e)})},reset:function X(){S&&(S.abort(),S=null)}}}d.__dashjs_factory_name="SegmentBaseLoader",k.default=M.default.getSingletonFactory(d)},"./src/dash/WebmSegmentBaseLoader.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/utils/EBMLParser.js"),_=u("./src/streaming/constants/Constants.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/dash/vo/Segment.js"),D=u("./src/streaming/vo/FragmentRequest.js"),d=u("./src/streaming/net/URLLoader.js"),v=u("./src/streaming/vo/DashJSError.js");function p(){var b,F,m,h,g,S,C,x,O,N,L=this.context;function V(K,oe,ee,ue){var _e,ie,me,ae,ge;for(ie=[],ae=0,ge=(_e=function R(K){var ue,pe,oe=[],ee=Object(B.default)(L).create({data:K});for(ee.consumeTagAndSize(m.Segment.Cues);ee.moreData()&&ee.consumeTagAndSize(m.Segment.Cues.CuePoint,!0);){for((ue={}).CueTime=ee.parseTag(m.Segment.Cues.CuePoint.CueTime),ue.CueTracks=[];ee.moreData()&&ee.consumeTag(m.Segment.Cues.CuePoint.CueTrackPositions,!0);){var _e=ee.getMatroskaCodedNum(),ie=ee.getPos();if((pe={}).Track=ee.parseTag(m.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===pe.Track)throw new Error("Cue track cannot be 0");pe.ClusterPosition=ee.parseTag(m.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),ue.CueTracks.push(pe),ee.setPos(ie+_e)}if(0===ue.CueTracks.length)throw new Error("Mandatory cuetrack not found");oe.push(ue)}if(0===oe.length)throw new Error("mandatory cuepoint not found");return oe}(K)).length;ae<ge;ae+=1)(me=new y.default).duration=ae<_e.length-1?_e[ae+1].CueTime-_e[ae].CueTime:ue-_e[ae].CueTime,me.startTime=_e[ae].CueTime,me.timescale=1e3,me.mediaRange=_e[ae].CueTracks[0].ClusterPosition+oe+"-"+(ae<_e.length-1?_e[ae+1].CueTracks[0].ClusterPosition+oe-1:ee-1),ie.push(me);return F.debug("Parsed cues: "+ie.length+" cues."),ie}function te(K){var oe=new D.default;return oe.setInfo(K),oe}return b={setConfig:function f(K){if(!(K.baseURLController&&K.dashMetrics&&K.mediaPlayerModel&&K.errHandler))throw new Error(_.default.MISSING_CONFIG_ERROR);N=K.baseURLController,S=K.dashMetrics,C=K.mediaPlayerModel,h=K.errHandler,O=K.errors,F=K.debug.getLogger(b),g=K.requestModifier},initialize:function P(){x=Object(d.default)(L).create({errHandler:h,dashMetrics:S,mediaPlayerModel:C,requestModifier:g,errors:O})},loadInitialization:function $(K,oe){return new Promise(function(ee){var ue=null,pe=K?N.resolve(K.path):null,_e=K?K.range.split("-"):null,ie={range:{start:_e?parseFloat(_e[0]):null,end:_e?parseFloat(_e[1]):null},request:ue,url:pe?pe.url:void 0,init:!0,mediaType:oe};F.info("Start loading initialization."),ue=te(ie),x.load({request:ue,success:function(){ee(K)},error:function(){ee(K)}}),F.debug("Perform init load: "+ie.url)})},loadSegments:function J(K,oe,ee){return new Promise(function(ue){var pe=null,_e=K?N.resolve(K.path):null,ie=_e?_e.url:void 0;pe=te({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:pe,url:ie,init:!1,mediaType:oe}),F.debug("Parsing ebml header"),x.load({request:pe,success:function(de){!function Q(K,oe,ee,ue){if(K&&0!==K.byteLength){var _e,ie,me,ae,pe=Object(B.default)(L).create({data:K}),ge=ee?ee.split("-"):null,fe=null,ce={url:oe,range:{start:ge?parseFloat(ge[0]):null,end:ge?parseFloat(ge[1]):null},request:fe};for(F.debug("Parse EBML header: "+ce.url),pe.skipOverElement(m.EBML),pe.consumeTag(m.Segment),me=pe.getMatroskaCodedNum(),me+=pe.getPos(),ae=pe.getPos();pe.moreData()&&!pe.consumeTagAndSize(m.Segment.Info,!0);)if(!(pe.skipOverElement(m.Segment.SeekHead,!0)||pe.skipOverElement(m.Segment.Tracks,!0)||pe.skipOverElement(m.Segment.Cues,!0)||pe.skipOverElement(m.Void,!0)))throw new Error("no valid top level element found");for(;void 0===_e;){var de=pe.getMatroskaCodedNum(!0),se=pe.getMatroskaCodedNum();de===m.Segment.Info.Duration.tag?_e=pe[m.Segment.Info.Duration.parse](se):pe.setPos(pe.getPos()+se)}fe=te(ce),x.load({request:fe,success:function(H){ie=V(H,ae,me,_e),ue(ie)},error:function(){F.error("Download Error: Cues "+ce.url),ue(null)}}),F.debug("Perform cues load: "+ce.url+" bytes="+ce.range.start+"-"+ce.range.end)}else ue(null)}(de,ie,ee,function(se){ue({segments:se,representation:K,error:se?void 0:new v.default(O.SEGMENT_BASE_LOADER_ERROR_CODE,O.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){ue({representation:K,error:new v.default(O.SEGMENT_BASE_LOADER_ERROR_CODE,O.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function X(){x&&(x.abort(),x=null)}},function w(){m={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}}}(),b}p.__dashjs_factory_name="WebmSegmentBaseLoader",k.default=M.default.getSingletonFactory(p)},"./src/dash/constants/DashConstants.js":function(we,k,u){"use strict";function _(d,v){for(var p=0;p<v.length;p++){var L=v[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,L.key,L)}}u.r(k);var D=new(function(){function d(){(function B(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.init()}return function M(d,v,p){return v&&_(d.prototype,v),p&&_(d,p),d}(d,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime"}}]),d}());k.default=D},"./src/dash/controllers/RepresentationController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/core/FactoryMaker.js"),M=u("./src/streaming/MediaPlayerEvents.js"),y=u("./src/dash/utils/SegmentsUtils.js");function D(d){var O,N,w,P,f,v=(d=d||{}).eventBus,p=d.events,L=d.abrController,b=d.dashMetrics,F=d.playbackController,m=d.timelineConverter,h=d.type,g=d.streamInfo,S=d.dashConstants,C=d.segmentsController,x=d.isDynamic;function Q(){return h}function $(){if(!(L&&b&&F&&m))throw new Error(B.default.MISSING_CONFIG_ERROR)}function te(){return w}function X(){return f}function K(){N=null,w=!0,P=[]}function ue(Y){return new Promise(function(H,E){var I=Y.hasInitialization(),U=Y.hasSegments(),W=[];W.push(C.updateInitData(Y,I)),W.push(C.updateSegmentData(Y,U)),Promise.all(W).then(function(re){re[0]&&!re[0].error&&(Y=function _e(Y,H){return H&&!H.error&&H.representation?H.representation:Y}(Y,re[0])),re[1]&&!re[1].error&&(Y=function ie(Y,H){if(H&&!H.error){var W,re,De,Ie,E=H.segments,I=[],U=0;for(W=0,re=E?E.length:0;W<re;W++)De=E[W],(Ie=Object(y.getTimeBasedSegment)(m,x,Y,De.startTime,De.duration,De.timescale,De.media,De.mediaRange,U))&&(I.push(Ie),Ie=null,U++);return I.length>0&&(Y.segments=I),Y}}(Y,re[1])),function pe(Y){Y.mediaFinishedInformation=C.getMediaFinishedInformation(Y)}(Y),function de(Y){if(te()){var I,H=b.getCurrentManifestUpdate(),E=!1;if(H){for(var W=0;W<H.representationInfo.length;W++)if((I=H.representationInfo[W]).index===Y.index&&I.mediaType===Q()){E=!0;break}E||b.addManifestUpdateRepresentationInfo(Y,Q())}if(function fe(){for(var Y=0,H=P.length;Y<H;Y++){var E=P[Y].segmentInfoType;if(!P[Y].hasInitialization()||(E===S.SEGMENT_BASE||E===S.BASE_URL)&&!P[Y].segments)return!1}return!0}()){L.setPlaybackQuality(h,g,function ge(Y){return P.indexOf(Y)}(f));var re=b.getCurrentDVRInfo(h);re&&b.updateManifestUpdateInfo({latency:re.range.end-F.getTime()}),b.getCurrentRepresentationSwitch(X().adaptation.type)||me(),ce()}}}(Y),H()}).catch(function(re){E(re)})})}function me(){$();var Y=new Date,H=X(),E=1e3*F.getTime();H&&b.addRepresentationSwitch(H.adaptation.type,Y,E,H.id),v.trigger(M.default.REPRESENTATION_SWITCH,{mediaType:h,streamId:g.id,currentRepresentation:H,numberOfRepresentations:P.length},{streamId:g.id,mediaType:h})}function ae(Y){return null==Y||Y>=P.length?null:P[Y]}function ce(Y){w=!1,v.trigger(p.DATA_UPDATE_COMPLETED,{data:N,currentRepresentation:f,error:Y},{streamId:g.id,mediaType:h})}function ve(Y){f=Y}function ne(Y){if(Y.newDuration){var H=X();H&&H.adaptation.period&&(H.adaptation.period.duration=Y.newDuration)}}return O={getStreamId:function V(){return g.id},getType:Q,getData:function J(){return N},isUpdating:te,updateData:function ee(Y,H,E,I,U){if($(),w=!0,P=H,ve(ae(U)),N=Y,E!==B.default.VIDEO&&E!==B.default.AUDIO&&(E!==B.default.TEXT||!I))return ce(),Promise.resolve();for(var re=[],De=0,Ie=P.length;De<Ie;De++)re.push(ue(P[De]));return Promise.all(re)},getCurrentRepresentation:X,getRepresentationForQuality:ae,prepareQualityChange:function se(Y){ve(ae(Y)),me()},reset:function oe(){v.off(M.default.MANIFEST_VALIDITY_CHANGED,ne,O),K()}},function R(){K(),v.on(M.default.MANIFEST_VALIDITY_CHANGED,ne,O)}(),O}D.__dashjs_factory_name="RepresentationController",k.default=_.default.getClassFactory(D)},"./src/dash/controllers/SegmentBaseController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/dash/SegmentBaseLoader.js"),M=u("./src/dash/WebmSegmentBaseLoader.js");function y(d){var O,N,w,v=this.context,p=(d=d||{}).eventBus,L=d.events,b=d.dashMetrics,F=d.mediaPlayerModel,m=d.errHandler,h=d.baseURLController,g=d.debug,S=d.boxParser,C=d.requestModifier,x=d.errors;function f(J){return"webm"===(J?J.split("/")[1]:"").toLowerCase()}return O={initialize:function R(){N.initialize(),w.initialize()},getSegmentBaseInitSegment:function V(J){return f(J.representation.mimeType)?w.loadInitialization(J.representation,J.mediaType):N.loadInitialization(J.representation,J.mediaType)},getSegmentList:function Q(J){return f(J.mimeType)?w.loadSegments(J.representation,J.mediaType,J.representation?J.representation.indexRange:null):N.loadSegments(J.representation,J.mediaType,J.representation?J.representation.indexRange:null)},reset:function $(){N.reset(),w.reset()}},function P(){N=Object(_.default)(v).getInstance(),w=Object(M.default)(v).getInstance(),N.setConfig({baseURLController:h,dashMetrics:b,mediaPlayerModel:F,errHandler:m,eventBus:p,events:L,errors:x,debug:g,boxParser:S,requestModifier:C}),w.setConfig({baseURLController:h,dashMetrics:b,mediaPlayerModel:F,errHandler:m,eventBus:p,events:L,errors:x,debug:g,requestModifier:C})}(),O}y.__dashjs_factory_name="SegmentBaseController";var D=B.default.getSingletonFactory(y);k.default=D},"./src/dash/controllers/SegmentsController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/dash/utils/TimelineSegmentsGetter.js"),M=u("./src/dash/utils/TemplateSegmentsGetter.js"),y=u("./src/dash/utils/ListSegmentsGetter.js"),D=u("./src/dash/utils/SegmentBaseGetter.js");function d(p){var h,g,L=this.context,b=(p=p||{}).dashConstants,F=p.type,m=p.segmentBaseController;function N(R){return R?R.segments?g[b.SEGMENT_BASE]:g[R.segmentInfoType]:null}return h={initialize:function C(R){g[b.SEGMENT_TIMELINE]=Object(_.default)(L).create(p,R),g[b.SEGMENT_TEMPLATE]=Object(M.default)(L).create(p,R),g[b.SEGMENT_LIST]=Object(y.default)(L).create(p,R),g[b.SEGMENT_BASE]=Object(D.default)(L).create(p,R)},updateInitData:function x(R,V){return V?Promise.resolve():m.getSegmentBaseInitSegment({representation:R,mediaType:F})},updateSegmentData:function O(R,V){return V?Promise.resolve():m.getSegmentList({mimeType:R.mimeType,representation:R,mediaType:F})},getSegmentByIndex:function w(R,V,Q){var $=N(R);return $?$.getSegmentByIndex(R,V,Q):null},getSegmentByTime:function P(R,V){var Q=N(R);return Q?Q.getSegmentByTime(R,V):null},getMediaFinishedInformation:function f(R){var V=N(R);return V?V.getMediaFinishedInformation(R):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},function S(){g={}}(),h}d.__dashjs_factory_name="SegmentsController";var v=B.default.getClassFactory(d);k.default=v},"./src/dash/models/DashManifestModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/dash/constants/DashConstants.js"),M=u("./src/dash/vo/Representation.js"),y=u("./src/dash/vo/AdaptationSet.js"),D=u("./src/dash/vo/Period.js"),d=u("./src/dash/vo/Mpd.js"),v=u("./src/dash/vo/UTCTiming.js"),p=u("./src/dash/vo/Event.js"),L=u("./src/dash/vo/BaseURL.js"),b=u("./src/dash/vo/EventStream.js"),F=u("./src/dash/vo/ProducerReferenceTime.js"),m=u("./src/streaming/utils/ObjectUtils.js"),h=u("./src/streaming/utils/URLUtils.js"),g=u("./src/core/FactoryMaker.js"),S=u("./src/core/Debug.js"),C=u("./src/streaming/vo/DashJSError.js"),x=u("./src/core/errors/Errors.js"),O=u("./src/streaming/thumbnail/ThumbnailTracks.js");function N(J,te){var X;if(typeof Symbol>"u"||null==J[Symbol.iterator]){if(Array.isArray(J)||(X=f(J))||te&&J&&"number"==typeof J.length){X&&(J=X);var K=0,oe=function(){};return{s:oe,n:function(){return K>=J.length?{done:!0}:{done:!1,value:J[K++]}},e:function(ie){throw ie},f:oe}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var pe,ee=!0,ue=!1;return{s:function(){X=J[Symbol.iterator]()},n:function(){var ie=X.next();return ee=ie.done,ie},e:function(ie){ue=!0,pe=ie},f:function(){try{!ee&&null!=X.return&&X.return()}finally{if(ue)throw pe}}}}function w(J){return function V(J){if(Array.isArray(J))return Q(J)}(J)||function R(J){if(typeof Symbol<"u"&&Symbol.iterator in Object(J))return Array.from(J)}(J)||f(J)||function P(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(J,te){if(J){if("string"==typeof J)return Q(J,te);var X=Object.prototype.toString.call(J).slice(8,-1);if("Object"===X&&J.constructor&&(X=J.constructor.name),"Map"===X||"Set"===X)return Array.from(J);if("Arguments"===X||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return Q(J,te)}}function Q(J,te){(null==te||te>J.length)&&(te=J.length);for(var X=0,K=new Array(te);X<te;X++)K[X]=J[X];return K}function $(){var J,te,X,K,oe=this.context,ee=Object(h.default)(oe).getInstance(),ue=Number.isInteger||function(Ae){return"number"==typeof Ae&&isFinite(Ae)&&Math.floor(Ae)===Ae};function _e(Ae,Xe){if(!Ae)throw new Error("adaptation is not defined");if(!Xe)throw new Error("type is not defined");if(Ae.Representation_asArray&&Ae.Representation_asArray.length){var Et=Ht(Ae.Representation_asArray[0]);if(Et&&Et.length>0&&O.THUMBNAILS_SCHEME_ID_URIS.indexOf(Et[0].schemeIdUri)>=0)return Xe===B.default.IMAGE}if(Ae.ContentComponent_asArray&&Ae.ContentComponent_asArray.length>0){if(Ae.ContentComponent_asArray.length>1)return Xe===B.default.MUXED;if(Ae.ContentComponent_asArray[0].contentType===Xe)return!0}var tt=Xe===B.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(Xe);if(Ae.Representation_asArray&&Ae.Representation_asArray.length&&tt.test(Ae.Representation_asArray[0].codecs))return!0;if(Ae.hasOwnProperty(_.default.MIME_TYPE))return tt.test(Ae.mimeType);if(Ae.Representation_asArray)for(var yt,$t=0;$t<Ae.Representation_asArray.length;$t++)if((yt=Ae.Representation_asArray[$t]).hasOwnProperty(_.default.MIME_TYPE))return tt.test(yt.mimeType);return!1}function ie(Ae){if(!Ae)throw new Error("adaptation is not defined");if(Ae.hasOwnProperty(_.default.SEGMENT_TEMPLATE)||Ae.hasOwnProperty(_.default.SEGMENT_TIMELINE)||Ae.hasOwnProperty(_.default.SEGMENT_LIST)||Ae.hasOwnProperty(_.default.SEGMENT_BASE))return!0;if(Ae.Representation_asArray&&Ae.Representation_asArray.length>0){var Xe=Ae.Representation_asArray[0];if(Xe.hasOwnProperty(_.default.SEGMENT_TEMPLATE)||Xe.hasOwnProperty(_.default.SEGMENT_TIMELINE)||Xe.hasOwnProperty(_.default.SEGMENT_LIST)||Xe.hasOwnProperty(_.default.SEGMENT_BASE))return!0}return!1}function me(Ae){return _e(Ae,B.default.AUDIO)}function ae(Ae){return _e(Ae,B.default.VIDEO)}function ge(Ae){return _e(Ae,B.default.TEXT)}function fe(Ae){return _e(Ae,B.default.MUXED)}function ce(Ae){return _e(Ae,B.default.IMAGE)}function I(){return function(Ae,Xe){return Ae.bandwidth-Xe.bandwidth}}function U(Ae){return Ae&&Array.isArray(Ae.Representation_asArray)&&Ae.Representation_asArray.sort(function(Ae,Xe){return Ae.bandwidth-Xe.bandwidth}),Ae}function W(Ae,Xe){return Ae&&Ae.Period_asArray&&ue(Xe)&&Ae.Period_asArray[Xe]?Ae.Period_asArray[Xe].AdaptationSet_asArray:[]}function re(Ae){return Ae&&Ae.Period_asArray?Ae.Period_asArray:[]}function Oe(Ae){var Xe=!1;return Ae&&Ae.hasOwnProperty("type")&&(Xe=Ae.type===_.default.DYNAMIC),Xe}function Ht(Ae){return Ae&&Ae.EssentialProperty_asArray&&Ae.EssentialProperty_asArray.length?Ae.EssentialProperty_asArray.map(function(Xe){return{schemeIdUri:Xe.schemeIdUri,value:Xe.value}}):null}function je(Ae){if(!Ae||!Ae.S_asArray)return NaN;var Xe=Ae.S_asArray[0],Et=Ae.S_asArray[1];return Xe.hasOwnProperty("d")?Xe.d:Et.t-Xe.t}function xe(Ae){return Ae.adaptation.period.start-Ae.presentationTimeOffset}function Ze(Ae,Xe){if(!Ae)throw new Error("Period cannot be null or undefined");var Et=D.default.DEFAULT_ID+"_"+Xe;return Ae.hasOwnProperty(_.default.ID)&&Ae.id.length>0&&"__proto__"!==Ae.id&&(Et=Ae.id),Et}function jt(Ae,Xe){var tt,Et=[];if(!Ae)return Et;for(tt=0;tt<Ae.length;tt++){var rt=new b.default;if(rt.timescale=1,rt.representation=Xe,!Ae[tt].hasOwnProperty(B.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");rt.schemeIdUri=Ae[tt].schemeIdUri,Ae[tt].hasOwnProperty(_.default.TIMESCALE)&&(rt.timescale=Ae[tt].timescale),Ae[tt].hasOwnProperty(_.default.VALUE)&&(rt.value=Ae[tt].value),Et.push(rt)}return Et}function $e(Ae){var Xe=[],tt=!1;return(Ae.BaseURL_asArray||[Ae.baseUri]).some(function(rt){if(rt){var yt=new L.default,$t=rt.__text||rt;return ee.isRelative($t)&&(tt=!0,Ae.baseUri&&($t=ee.resolve($t,Ae.baseUri))),yt.url=$t,yt.serviceLocation=rt.hasOwnProperty(_.default.SERVICE_LOCATION)&&rt.serviceLocation.length?rt.serviceLocation:$t,rt.hasOwnProperty(_.default.DVB_PRIORITY)&&(yt.dvb_priority=rt[_.default.DVB_PRIORITY]),rt.hasOwnProperty(_.default.DVB_WEIGHT)&&(yt.dvb_weight=rt[_.default.DVB_WEIGHT]),rt.hasOwnProperty(_.default.AVAILABILITY_TIME_OFFSET)&&(yt.availabilityTimeOffset=rt[_.default.AVAILABILITY_TIME_OFFSET]),rt.hasOwnProperty(_.default.AVAILABILITY_TIME_COMPLETE)&&(yt.availabilityTimeComplete="false"!==rt[_.default.AVAILABILITY_TIME_COMPLETE]),Xe.push(yt),tt}}),Xe}return J={getIsTypeOf:_e,getIsText:ge,getIsFragmented:ie,getProducerReferenceTimesForAdaptation:function de(Ae){var Xe=Ae&&Ae.hasOwnProperty(_.default.PRODUCERREFERENCETIME_ASARRAY)?Ae[_.default.PRODUCERREFERENCETIME_ASARRAY]:[];(Ae&&Ae.hasOwnProperty(_.default.REPRESENTATION_ASARRAY)?Ae[_.default.REPRESENTATION_ASARRAY]:[]).forEach(function(rt){rt.hasOwnProperty(_.default.PRODUCERREFERENCETIME_ASARRAY)&&Xe.push.apply(Xe,w(rt[_.default.PRODUCERREFERENCETIME_ASARRAY]))});var tt=[];return Xe.forEach(function(rt){var yt=new F.default;rt.hasOwnProperty(_.default.ID)&&(yt[_.default.ID]=rt[_.default.ID],rt.hasOwnProperty(_.default.WALL_CLOCK_TIME)&&(yt[_.default.WALL_CLOCK_TIME]=rt[_.default.WALL_CLOCK_TIME],rt.hasOwnProperty(_.default.PRESENTATION_TIME)&&(yt[_.default.PRESENTATION_TIME]=rt[_.default.PRESENTATION_TIME],tt.push(yt))))}),tt},getLanguageForAdaptation:function se(Ae){var Xe="";return Ae&&Ae.hasOwnProperty(_.default.LANG)&&(Xe=Ae.lang.replace(/[^A-Za-z0-9-]/g,"")),Xe},getViewpointForAdaptation:function ve(Ae){return Ae&&Ae.hasOwnProperty(_.default.VIEWPOINT)?Ae.Viewpoint:null},getRolesForAdaptation:function ne(Ae){return Ae&&Ae.hasOwnProperty(_.default.ROLE_ASARRAY)?Ae.Role_asArray:[]},getAccessibilityForAdaptation:function Y(Ae){return Ae&&Ae.hasOwnProperty(_.default.ACCESSIBILITY_ASARRAY)?Ae.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function H(Ae){return Ae&&Ae.hasOwnProperty(_.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?Ae.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function E(Ae){return Ae&&Ae.hasOwnProperty(_.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?Ae.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function le(Ae,Xe,Et){var tt=W(Xe,Et);return tt.length>0&&ue(Ae)?tt[Ae]:null},getIndexForAdaptation:function z(Ae,Xe,Et){if(!Ae)return-1;for(var tt=W(Xe,Et),rt=0;rt<tt.length;rt++)if(Object(m.default)(oe).getInstance().areEqual(tt[rt],Ae))return rt;return-1},getAdaptationForId:function Ie(Ae,Xe,Et){var rt,yt,tt=W(Xe,Et);for(rt=0,yt=tt.length;rt<yt;rt++)if(tt[rt].hasOwnProperty(_.default.ID)&&tt[rt].id===Ae)return tt[rt];return null},getAdaptationsForType:function G(Ae,Xe,Et){var rt,yt,tt=W(Ae,Xe),$t=[];for(rt=0,yt=tt.length;rt<yt;rt++)_e(tt[rt],Et)&&$t.push(U(tt[rt]));return $t},getRealPeriods:re,getRealPeriodForIndex:function De(Ae,Xe){var Et=re(Xe);return Et.length>0&&ue(Ae)?Et[Ae]:null},getCodec:function Te(Ae,Xe,Et){var tt=null;if(Ae&&Ae.Representation_asArray&&Ae.Representation_asArray.length>0){var rt=ue(Xe)&&Xe>=0&&Xe<Ae.Representation_asArray.length?Ae.Representation_asArray[Xe]:Ae.Representation_asArray[0];rt&&(tt=rt.mimeType+';codecs="'+rt.codecs+'"',Et&&void 0!==rt.width&&(tt+=';width="'+rt.width+'";height="'+rt.height+'"'))}return tt&&(tt=tt.replace(/\sprofiles=[^;]*/g,"")),tt},getSelectionPriority:function Ft(Ae){try{var Xe=Ae&&typeof Ae.selectionPriority<"u"?parseInt(Ae.selectionPriority):1;return isNaN(Xe)?1:Xe}catch{return 1}},getMimeType:function ye(Ae){return Ae&&Ae.Representation_asArray&&Ae.Representation_asArray.length>0?Ae.Representation_asArray[0].mimeType:null},getKID:function Ee(Ae){return Ae&&Ae.hasOwnProperty(_.default.CENC_DEFAULT_KID)?Ae[_.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function Ce(Ae){if(!Ae||!Array.isArray(Ae.Label_asArray))return[];for(var Xe=[],Et=0;Et<Ae.Label_asArray.length;Et++)Xe.push({lang:Ae.Label_asArray[Et].lang,text:Ae.Label_asArray[Et].__text||Ae.Label_asArray[Et]});return Xe},getContentProtectionData:function Fe(Ae){return Ae&&Ae.hasOwnProperty(_.default.CONTENTPROTECTION_ASARRAY)&&0!==Ae.ContentProtection_asArray.length?Ae.ContentProtection_asArray:null},getIsDynamic:Oe,getId:function Le(Ae){return Ae&&Ae[_.default.ID]||null},hasProfile:function He(Ae,Xe){var Et=!1;return Ae&&Ae.profiles&&Ae.profiles.length>0&&(Et=-1!==Ae.profiles.indexOf(Xe)),Et},getDuration:function Pe(Ae){return Ae&&Ae.hasOwnProperty(_.default.MEDIA_PRESENTATION_DURATION)?Ae.mediaPresentationDuration:Ae&&"dynamic"==Ae.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function Ue(Ae){return Ae&&Ae.bandwidth?Ae.bandwidth:NaN},getManifestUpdatePeriod:function Qe(Ae){var Xe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Et=NaN;return Ae&&Ae.hasOwnProperty(_.default.MINIMUM_UPDATE_PERIOD)&&(Et=Ae.minimumUpdatePeriod),isNaN(Et)?Et:Math.max(Et-Xe,1)},getPublishTime:function ft(Ae){return Ae&&Ae.hasOwnProperty(_.default.PUBLISH_TIME)?new Date(Ae[_.default.PUBLISH_TIME]):null},getRepresentationCount:function lt(Ae){return Ae&&Array.isArray(Ae.Representation_asArray)?Ae.Representation_asArray.length:0},getBitrateListForAdaptation:function Dt(Ae){var Xe=U(Ae);return(Xe&&Array.isArray(Xe.Representation_asArray)?Xe.Representation_asArray:[]).map(function(tt){return{bandwidth:tt.bandwidth,width:tt.width||0,height:tt.height||0,scanType:tt.scanType||null,id:tt.id||null}})},getRepresentationFor:function Jt(Ae,Xe){return Xe&&Xe.Representation_asArray&&Xe.Representation_asArray.length>0&&ue(Ae)?Xe.Representation_asArray[Ae]:null},getRepresentationsForAdaptation:function on(Ae){var tt,rt,Xe=[],Et=function sn(Ae){if(Ae&&Ae.period&&ue(Ae.period.index)){var Xe=Ae.period.mpd.manifest.Period_asArray[Ae.period.index];if(Xe&&Xe.AdaptationSet_asArray&&ue(Ae.index))return U(Xe.AdaptationSet_asArray[Ae.index])}}(Ae);if(Et&&Et.Representation_asArray){if(Ae&&Ae.period&&ue(Ae.period.index)){var yt=$e(Ae.period.mpd.manifest);yt&&(rt=yt[0])}for(var $t=0,ln=Et.Representation_asArray.length;$t<ln;++$t){var Qt=Et.Representation_asArray[$t],Wt=new M.default;if(Wt.index=$t,Wt.adaptation=Ae,Qt.hasOwnProperty(_.default.ID)&&(Wt.id=Qt.id),Qt.hasOwnProperty(_.default.CODECS)&&(Wt.codecs=Qt.codecs),Qt.hasOwnProperty(_.default.MIME_TYPE)&&(Wt.mimeType=Qt[_.default.MIME_TYPE]),Qt.hasOwnProperty(_.default.CODEC_PRIVATE_DATA)&&(Wt.codecPrivateData=Qt.codecPrivateData),Qt.hasOwnProperty(_.default.BANDWITH)&&(Wt.bandwidth=Qt.bandwidth),Qt.hasOwnProperty(_.default.WIDTH)&&(Wt.width=Qt.width),Qt.hasOwnProperty(_.default.HEIGHT)&&(Wt.height=Qt.height),Qt.hasOwnProperty(_.default.SCAN_TYPE)&&(Wt.scanType=Qt.scanType),Qt.hasOwnProperty(_.default.MAX_PLAYOUT_RATE)&&(Wt.maxPlayoutRate=Qt.maxPlayoutRate),Qt.hasOwnProperty(_.default.SEGMENT_BASE)?(tt=Qt.SegmentBase,Wt.segmentInfoType=_.default.SEGMENT_BASE):Qt.hasOwnProperty(_.default.SEGMENT_LIST)?Wt.segmentInfoType=(tt=Qt.SegmentList).hasOwnProperty(_.default.SEGMENT_TIMELINE)?_.default.SEGMENT_TIMELINE:_.default.SEGMENT_LIST:Qt.hasOwnProperty(_.default.SEGMENT_TEMPLATE)?(Wt.segmentInfoType=(tt=Qt.SegmentTemplate).hasOwnProperty(_.default.SEGMENT_TIMELINE)?_.default.SEGMENT_TIMELINE:_.default.SEGMENT_TEMPLATE,tt.hasOwnProperty(_.default.INITIALIZATION_MINUS)&&(Wt.initialization=tt.initialization.split("$Bandwidth$").join(Qt.bandwidth).split("$RepresentationID$").join(Qt.id))):Wt.segmentInfoType=_.default.BASE_URL,Wt.essentialProperties=Ht(Qt),tt){if(tt.hasOwnProperty(_.default.INITIALIZATION)){var Je=tt.Initialization;Je.hasOwnProperty(_.default.SOURCE_URL)&&(Wt.initialization=Je.sourceURL),Je.hasOwnProperty(_.default.RANGE)&&(Wt.range=Je.range)}else ge(Et)&&ie(Et)&&Et.mimeType&&-1===Et.mimeType.indexOf("application/mp4")&&(Wt.range=0);tt.hasOwnProperty(_.default.TIMESCALE)&&(Wt.timescale=tt.timescale),tt.hasOwnProperty(_.default.DURATION)?Wt.segmentDuration=tt.duration/Wt.timescale:Qt.hasOwnProperty(_.default.SEGMENT_TEMPLATE)&&(tt=Qt.SegmentTemplate).hasOwnProperty(_.default.SEGMENT_TIMELINE)&&(Wt.segmentDuration=je(tt.SegmentTimeline)/Wt.timescale),tt.hasOwnProperty(_.default.MEDIA)&&(Wt.media=tt.media),tt.hasOwnProperty(_.default.START_NUMBER)&&(Wt.startNumber=tt.startNumber),tt.hasOwnProperty(_.default.INDEX_RANGE)&&(Wt.indexRange=tt.indexRange),tt.hasOwnProperty(_.default.PRESENTATION_TIME_OFFSET)&&(Wt.presentationTimeOffset=tt.presentationTimeOffset/Wt.timescale),tt.hasOwnProperty(_.default.AVAILABILITY_TIME_OFFSET)?Wt.availabilityTimeOffset=tt.availabilityTimeOffset:rt&&void 0!==rt.availabilityTimeOffset&&(Wt.availabilityTimeOffset=rt.availabilityTimeOffset),tt.hasOwnProperty(_.default.AVAILABILITY_TIME_COMPLETE)?Wt.availabilityTimeComplete="false"!==tt.availabilityTimeComplete:rt&&void 0!==rt.availabilityTimeComplete&&(Wt.availabilityTimeComplete=rt.availabilityTimeComplete)}Wt.MSETimeOffset=xe(Wt),Wt.path=[Ae.period.index,Ae.index,$t],Xe.push(Wt)}}return Xe},getAdaptationsForPeriod:function Se(Ae){var tt,rt,yt,Xe=Ae&&ue(Ae.index)?Ae.mpd.manifest.Period_asArray[Ae.index]:null,Et=[];if(Xe&&Xe.AdaptationSet_asArray)for(yt=0;yt<Xe.AdaptationSet_asArray.length;yt++)rt=Xe.AdaptationSet_asArray[yt],tt=new y.default,rt.hasOwnProperty(_.default.ID)&&(tt.id=rt.id),tt.index=yt,tt.period=Ae,fe(rt)?tt.type=B.default.MUXED:me(rt)?tt.type=B.default.AUDIO:ae(rt)?tt.type=B.default.VIDEO:ge(rt)?tt.type=B.default.TEXT:ce(rt)?tt.type=B.default.IMAGE:te.warn("Unknown Adaptation stream type"),Et.push(tt);return Et},getRegularPeriods:function ke(Ae){var ln,Qt,Xe=!!Ae&&Oe(Ae.manifest),Et=[],tt=null,rt=null,yt=null,$t=null;for(Qt=0,ln=Ae&&Ae.manifest&&Ae.manifest.Period_asArray?Ae.manifest.Period_asArray.length:0;Qt<ln;Qt++)(rt=Ae.manifest.Period_asArray[Qt]).hasOwnProperty(_.default.START)?($t=new D.default).start=rt.start:null!==tt&&tt.hasOwnProperty(_.default.DURATION)&&null!==yt?($t=new D.default).start=parseFloat((yt.start+yt.duration).toFixed(5)):0===Qt&&!Xe&&(($t=new D.default).start=0),null!==yt&&isNaN(yt.duration)&&(null!==$t?yt.duration=parseFloat(($t.start-yt.start).toFixed(5)):te.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==$t&&($t.id=Ze(rt,Qt),$t.index=Qt,$t.mpd=Ae,rt.hasOwnProperty(_.default.DURATION)&&($t.duration=rt.duration),yt&&(yt.nextPeriodId=$t.id),Et.push($t),tt=rt,yt=$t),rt=null,$t=null;return 0===Et.length||null!==yt&&isNaN(yt.duration)&&(yt.duration=parseFloat((function et(Ae){!function dt(){if(!X||!X.hasOwnProperty("error"))throw new Error(B.default.MISSING_CONFIG_ERROR)}();var Et,Xe=Oe(Ae.mpd.manifest);return Ae.mpd.manifest.mediaPresentationDuration?Et=Ae.mpd.manifest.mediaPresentationDuration:Ae.duration?Et=Ae.duration:Xe?Et=Number.POSITIVE_INFINITY:X.error(new C.default(x.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",Ae)),Et}(yt)-yt.start).toFixed(5))),Et},getMpd:function at(Ae){var Xe=new d.default;return Ae&&(Xe.manifest=Ae,Ae.hasOwnProperty(_.default.AVAILABILITY_START_TIME)?Xe.availabilityStartTime=new Date(Ae.availabilityStartTime.getTime()):Ae.loadedTime&&(Xe.availabilityStartTime=new Date(Ae.loadedTime.getTime())),Ae.hasOwnProperty(_.default.AVAILABILITY_END_TIME)&&(Xe.availabilityEndTime=new Date(Ae.availabilityEndTime.getTime())),Ae.hasOwnProperty(_.default.MINIMUM_UPDATE_PERIOD)&&(Xe.minimumUpdatePeriod=Ae.minimumUpdatePeriod),Ae.hasOwnProperty(_.default.MEDIA_PRESENTATION_DURATION)&&(Xe.mediaPresentationDuration=Ae.mediaPresentationDuration),Ae.hasOwnProperty(_.default.SUGGESTED_PRESENTATION_DELAY)&&(Xe.suggestedPresentationDelay=Ae.suggestedPresentationDelay),Ae.hasOwnProperty(_.default.TIMESHIFT_BUFFER_DEPTH)&&(Xe.timeShiftBufferDepth=Ae.timeShiftBufferDepth),Ae.hasOwnProperty(_.default.MAX_SEGMENT_DURATION)&&(Xe.maxSegmentDuration=Ae.maxSegmentDuration),Ae.hasOwnProperty(_.default.PUBLISH_TIME)&&(Xe.publishTime=new Date(Ae.publishTime))),Xe},getEventsForPeriod:function pt(Ae){var yt,$t,Xe=Ae&&Ae.mpd&&Ae.mpd.manifest?Ae.mpd.manifest:null,Et=Xe?Xe.Period_asArray:null,tt=Et&&Ae&&ue(Ae.index)?Et[Ae.index].EventStream_asArray:null,rt=[];if(tt)for(yt=0;yt<tt.length;yt++){var ln=new b.default;if(ln.period=Ae,ln.timescale=1,!tt[yt].hasOwnProperty(B.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ln.schemeIdUri=tt[yt][B.default.SCHEME_ID_URI],tt[yt].hasOwnProperty(_.default.TIMESCALE)&&(ln.timescale=tt[yt][_.default.TIMESCALE]),tt[yt].hasOwnProperty(_.default.VALUE)&&(ln.value=tt[yt][_.default.VALUE]),tt[yt].hasOwnProperty(_.default.PRESENTATION_TIME_OFFSET)&&(ln.presentationTimeOffset=tt[yt][_.default.PRESENTATION_TIME_OFFSET]),$t=0;tt[yt].Event_asArray&&$t<tt[yt].Event_asArray.length;$t++){var Qt=tt[yt].Event_asArray[$t],Wt=new p.default;Wt.presentationTime=0,Wt.eventStream=ln,Qt.hasOwnProperty(_.default.PRESENTATION_TIME)&&(Wt.presentationTime=Qt.presentationTime),Wt.calculatedPresentationTime=Wt.presentationTime/ln.timescale+Ae.start-(ln.presentationTimeOffset?ln.presentationTimeOffset/ln.timescale:0),Qt.hasOwnProperty(_.default.DURATION)&&(Wt.duration=Qt.duration/ln.timescale),Wt.id=Qt.hasOwnProperty(_.default.ID)?Qt.id:null,Wt.messageData=Qt.Signal&&Qt.Signal.Binary?K.decodeArray(Qt.Signal.Binary.toString()):Qt.messageData||Qt.__cdata||Qt.__text,rt.push(Wt)}}return rt},getEssentialPropertiesForRepresentation:Ht,getEventStreamForAdaptationSet:function Rt(Ae,Xe){var Et,tt,rt;return Ae&&Ae.Period_asArray&&Xe&&Xe.period&&ue(Xe.period.index)&&(tt=Ae.Period_asArray[Xe.period.index])&&tt.AdaptationSet_asArray&&ue(Xe.index)&&(rt=tt.AdaptationSet_asArray[Xe.index])&&(Et=rt.InbandEventStream_asArray),jt(Et,null)},getEventStreamForRepresentation:function Yt(Ae,Xe){var Et,tt,rt,yt;return Ae&&Ae.Period_asArray&&Xe&&Xe.adaptation&&Xe.adaptation.period&&ue(Xe.adaptation.period.index)&&(tt=Ae.Period_asArray[Xe.adaptation.period.index])&&tt.AdaptationSet_asArray&&ue(Xe.adaptation.index)&&(rt=tt.AdaptationSet_asArray[Xe.adaptation.index])&&rt.Representation_asArray&&ue(Xe.index)&&(yt=rt.Representation_asArray[Xe.index])&&(Et=yt.InbandEventStream_asArray),jt(Et,Xe)},getUTCTimingSources:function Be(Ae){var Xe=Oe(Ae),Et=!!Ae&&Ae.hasOwnProperty(_.default.AVAILABILITY_START_TIME),tt=Ae?Ae.UTCTiming_asArray:null,rt=[];return(Xe||Et)&&tt&&tt.forEach(function(yt){var $t=new v.default;yt.hasOwnProperty(B.default.SCHEME_ID_URI)&&($t.schemeIdUri=yt.schemeIdUri,yt.hasOwnProperty(_.default.VALUE)&&($t.value=yt.value.toString(),rt.push($t)))}),rt},getBaseURLsFromElement:$e,getRepresentationSortFunction:I,getLocation:function nt(Ae){if(Ae&&Ae.hasOwnProperty(B.default.LOCATION))return Ae.Location=Ae.Location_asArray[0],Ae.Location},getPatchLocation:function Ot(Ae){if(Ae&&Ae.hasOwnProperty(_.default.PATCH_LOCATION))return Ae.PatchLocation=Ae.PatchLocation_asArray[0],Ae.PatchLocation},getSuggestedPresentationDelay:function Mt(Ae){return Ae&&Ae.hasOwnProperty(_.default.SUGGESTED_PRESENTATION_DELAY)?Ae.suggestedPresentationDelay:null},getAvailabilityStartTime:function wt(Ae){return Ae&&Ae.hasOwnProperty(_.default.AVAILABILITY_START_TIME)&&null!==Ae.availabilityStartTime?Ae.availabilityStartTime.getTime():null},getServiceDescriptions:function an(Ae){var Xe=[];if(Ae&&Ae.hasOwnProperty(_.default.SERVICE_DESCRIPTION)){var tt,Et=N(Ae.ServiceDescription_asArray);try{for(Et.s();!(tt=Et.n()).done;){var rt=tt.value,yt=null,$t=null,ln=null,Qt=null,Wt=null,Je=null;for(var ut in rt)rt.hasOwnProperty(ut)&&(ut===_.default.ID?yt=rt[ut]:ut===_.default.SERVICE_DESCRIPTION_SCOPE?$t=rt[ut].schemeIdUri:ut===_.default.SERVICE_DESCRIPTION_LATENCY?ln={target:parseInt(rt[ut].target),max:parseInt(rt[ut].max),min:parseInt(rt[ut].min),referenceId:parseInt(rt[ut].referenceId)}:ut===_.default.SERVICE_DESCRIPTION_PLAYBACK_RATE?Qt={max:parseFloat(rt[ut].max),min:parseFloat(rt[ut].min)}:ut===_.default.SERVICE_DESCRIPTION_OPERATING_QUALITY?Wt={mediaType:rt[ut].mediaType,max:parseInt(rt[ut].max),min:parseInt(rt[ut].min),target:parseInt(rt[ut].target),type:rt[ut].type,maxQualityDifference:parseInt(rt[ut].maxQualityDifference)}:ut===_.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH&&(Je={mediaType:rt[ut].mediaType,max:parseInt(rt[ut].max),min:parseInt(rt[ut].min),target:parseInt(rt[ut].target)}));Xe.push({id:yt,schemeIdUri:$t,latency:ln,playbackRate:Qt,operatingQuality:Wt,operatingBandwidth:Je})}}catch(We){Et.e(We)}finally{Et.f()}}return Xe},getSupplementalProperties:function ct(Ae){var Xe={};if(Ae&&Ae.hasOwnProperty(_.default.SUPPLEMENTAL_PROPERTY)){var tt,Et=N(Ae.SupplementalProperty_asArray);try{for(Et.s();!(tt=Et.n()).done;){var rt=tt.value;rt.hasOwnProperty(B.default.SCHEME_ID_URI)&&rt.hasOwnProperty(_.default.VALUE)&&(Xe[rt[B.default.SCHEME_ID_URI]]=rt[_.default.VALUE])}}catch(yt){Et.e(yt)}finally{Et.f()}}return Xe},setConfig:function Vt(Ae){!Ae||(Ae.errHandler&&(X=Ae.errHandler),Ae.BASE64&&(K=Ae.BASE64))}},function pe(){te=Object(S.default)(oe).getInstance().getLogger(J)}(),J}$.__dashjs_factory_name="DashManifestModel",k.default=g.default.getSingletonFactory($)},"./src/dash/models/PatchManifestModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/constants/DashConstants.js"),_=u("./src/core/FactoryMaker.js"),M=u("./src/core/Debug.js"),y=u("./src/dash/vo/SimpleXPath.js"),D=u("./src/dash/vo/PatchOperation.js");function d(){var v,p,L=this.context;return v={getIsPatch:function F(C){return C&&C.hasOwnProperty(B.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function m(C){return C&&C.hasOwnProperty(B.default.PUBLISH_TIME)?new Date(C[B.default.PUBLISH_TIME]):null},getOriginalPublishTime:function h(C){return C&&C.hasOwnProperty(B.default.ORIGINAL_PUBLISH_TIME)?new Date(C[B.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function g(C){return C&&C[B.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function S(C){return C?(C.__children||[]).map(function(x){var O=Object.keys(x)[0];if("add"!==O&&"remove"!==O&&"replace"!==O)return p.warn("Ignoring node of invalid action: ".concat(O)),null;var N=x[O],w=N.sel;if("add"===O&&N.type){if(!N.type.startsWith("@"))return p.warn("Ignoring add action for prefixed namespace declaration: ".concat(N.type,"=").concat(N.__text)),null;w="".concat(w,"/").concat(N.type)}var P=new y.default(w);if(!P.isValid())return p.warn("Ignoring action with invalid selector: ".concat(O," - ").concat(w)),null;var f=null;P.findsAttribute()?f=N.__text||"":"remove"!==O&&(f=N.__children.reduce(function(V,Q){var $=Object.keys(Q)[0];return"#text"!==$&&(V[$]=V[$]||[],V[$].push(Q[$])),V},{}));var R=new D.default(O,P,f);return"add"===O&&(R.position=N.pos),R}).filter(function(x){return!!x}):[]}},function b(){p=Object(M.default)(L).getInstance().getLogger(v)}(),v}d.__dashjs_factory_name="PatchManifestModel",k.default=_.default.getSingletonFactory(d)},"./src/dash/parser/DashParser.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/dash/parser/objectiron.js"),M=u("./externals/xml2json.js"),y=u("./src/dash/parser/matchers/StringMatcher.js"),D=u("./src/dash/parser/matchers/DurationMatcher.js"),d=u("./src/dash/parser/matchers/DateTimeMatcher.js"),v=u("./src/dash/parser/matchers/NumericMatcher.js"),p=u("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),L=u("./src/dash/parser/maps/SegmentValuesMap.js");function b(F){var g,S,C,x,O,m=this.context,h=(F=F||{}).debug;return g={parse:function f(R){var V,Q=window.performance.now();if(!(V=x.xml_str2json(R)))throw new Error("parsing the manifest failed");var $=window.performance.now();V.Patch?((V=V.Patch).add_asArray&&V.add_asArray.forEach(function(te){return O.run(te)}),V.replace_asArray&&V.replace_asArray.forEach(function(te){return O.run(te)})):O.run(V=V.MPD);var J=window.performance.now();return S.info("Parsing complete: ( xml2json: "+($-Q).toPrecision(3)+"ms, objectiron: "+(J-$).toPrecision(3)+"ms, total: "+((J-Q)/1e3).toPrecision(3)+"s)"),V.protocol="DASH",V},getMatchers:function w(){return C},getIron:function P(){return O}},function N(){S=h.getLogger(g),C=[new D.default,new d.default,new v.default,new y.default],x=new M.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:C}),O=Object(_.default)(m).create({adaptationset:new p.default,period:new L.default})}(),g}b.__dashjs_factory_name="DashParser",k.default=B.default.getClassFactory(b)},"./src/dash/parser/maps/CommonProperty.js":function(we,k,u){"use strict";function _(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d){!function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D);var L;this._name=d,this._merge=(L=d)&&L.length&&L.charAt(0)===L.charAt(0).toUpperCase()}return function M(D,d,v){return d&&_(D.prototype,d),v&&_(D,v),D}(D,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),D}()},"./src/dash/parser/maps/MapNode.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/parser/maps/CommonProperty.js");function M(d,v){for(var p=0;p<v.length;p++){var L=v[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,L.key,L)}}k.default=function(){function d(v,p,L){var b=this;(function _(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this._name=v||"",this._properties=[],this._children=L||[],Array.isArray(p)&&p.forEach(function(F){b._properties.push(new B.default(F))})}return function y(d,v,p){return v&&M(d.prototype,v),p&&M(d,p),d}(d,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),d}()},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/parser/maps/MapNode.js"),_=u("./src/dash/constants/DashConstants.js");function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function D(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&d(h,g)}function d(h,g){return(d=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function v(h){var g=function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=F(h);if(g){var O=F(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return p(this,x)}}function p(h,g){return!g||"object"!==M(g)&&"function"!=typeof g?function L(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function F(h){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}k.default=function(h){D(S,h);var g=v(S);function S(){!function y(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S);var C=[_.default.PROFILES,_.default.WIDTH,_.default.HEIGHT,_.default.SAR,_.default.FRAMERATE,_.default.AUDIO_SAMPLING_RATE,_.default.MIME_TYPE,_.default.SEGMENT_PROFILES,_.default.CODECS,_.default.MAXIMUM_SAP_PERIOD,_.default.START_WITH_SAP,_.default.MAX_PLAYOUT_RATE,_.default.CODING_DEPENDENCY,_.default.SCAN_TYPE,_.default.FRAME_PACKING,_.default.AUDIO_CHANNEL_CONFIGURATION,_.default.CONTENT_PROTECTION,_.default.ESSENTIAL_PROPERTY,_.default.SUPPLEMENTAL_PROPERTY,_.default.INBAND_EVENT_STREAM];return g.call(this,_.default.ADAPTATION_SET,C,[new B.default(_.default.REPRESENTATION,C,[new B.default(_.default.SUB_REPRESENTATION,C)])])}return S}(B.default)},"./src/dash/parser/maps/SegmentValuesMap.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/parser/maps/MapNode.js"),_=u("./src/dash/constants/DashConstants.js");function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function D(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&d(h,g)}function d(h,g){return(d=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function v(h){var g=function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=F(h);if(g){var O=F(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return p(this,x)}}function p(h,g){return!g||"object"!==M(g)&&"function"!=typeof g?function L(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function F(h){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}k.default=function(h){D(S,h);var g=v(S);function S(){!function y(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S);var C=[_.default.SEGMENT_BASE,_.default.SEGMENT_TEMPLATE,_.default.SEGMENT_LIST];return g.call(this,_.default.PERIOD,C,[new B.default(_.default.ADAPTATION_SET,C,[new B.default(_.default.REPRESENTATION,C)])])}return S}(B.default)},"./src/dash/parser/matchers/BaseMatcher.js":function(we,k,u){"use strict";function _(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d,v){(function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this._test=d,this._converter=v}return function M(D,d,v){return d&&_(D.prototype,d),v&&_(D,v),D}(D,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),D}()},"./src/dash/parser/matchers/DateTimeMatcher.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/parser/matchers/BaseMatcher.js");function _(C){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(O){return typeof O}:function(O){return O&&"function"==typeof Symbol&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(C)}function y(C,x){if("function"!=typeof x&&null!==x)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(x&&x.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),x&&D(C,x)}function D(C,x){return(D=Object.setPrototypeOf||function(N,w){return N.__proto__=w,N})(C,x)}function d(C){var x=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var w,N=b(C);if(x){var P=b(this).constructor;w=Reflect.construct(N,arguments,P)}else w=N.apply(this,arguments);return v(this,w)}}function v(C,x){return!x||"object"!==_(x)&&"function"!=typeof x?function p(C){if(void 0===C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}(C):x}function b(C){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(O){return O.__proto__||Object.getPrototypeOf(O)})(C)}var g=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;k.default=function(C){y(O,C);var x=d(O);function O(){return function M(C,x){if(!(C instanceof x))throw new TypeError("Cannot call a class as a function")}(this,O),x.call(this,function(N){return g.test(N.value)},function(N){var P,w=g.exec(N);if(P=Date.UTC(parseInt(w[1],10),parseInt(w[2],10)-1,parseInt(w[3],10),parseInt(w[4],10),parseInt(w[5],10),w[6]&&parseInt(w[6],10)||0,w[7]&&1e3*parseFloat(w[7])||0),w[9]&&w[10]){var f=60*parseInt(w[9],10)+parseInt(w[10],10);P+=("+"===w[8]?-1:1)*f*60*1e3}return new Date(P)})}return O}(B.default)},"./src/dash/parser/matchers/DurationMatcher.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/parser/matchers/BaseMatcher.js"),_=u("./src/streaming/constants/Constants.js"),M=u("./src/dash/constants/DashConstants.js");function y(w){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(w)}function d(w,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(P&&P.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),P&&v(w,P)}function v(w,P){return(v=Object.setPrototypeOf||function(R,V){return R.__proto__=V,R})(w,P)}function p(w){var P=function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var V,R=m(w);if(P){var Q=m(this).constructor;V=Reflect.construct(R,arguments,Q)}else V=R.apply(this,arguments);return L(this,V)}}function L(w,P){return!P||"object"!==y(P)&&"function"!=typeof P?function b(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}(w):P}function m(w){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(w)}var h=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;k.default=function(w){d(f,w);var P=p(f);function f(){return function D(w,P){if(!(w instanceof P))throw new TypeError("Cannot call a class as a function")}(this,f),P.call(this,function(R){for(var V=[M.default.MIN_BUFFER_TIME,M.default.MEDIA_PRESENTATION_DURATION,M.default.MINIMUM_UPDATE_PERIOD,M.default.TIMESHIFT_BUFFER_DEPTH,M.default.MAX_SEGMENT_DURATION,M.default.MAX_SUBSEGMENT_DURATION,M.default.SUGGESTED_PRESENTATION_DELAY,M.default.START,_.default.START_TIME,M.default.DURATION],Q=V.length,$=0;$<Q;$++)if(R.nodeName===V[$])return h.test(R.value);return!1},function(R){var V=h.exec(R),Q=31536e3*parseFloat(V[3]||0)+2592e3*parseFloat(V[5]||0)+86400*parseFloat(V[7]||0)+3600*parseFloat(V[9]||0)+60*parseFloat(V[11]||0)+parseFloat(V[13]||0);return void 0!==V[1]&&(Q=-Q),Q})}return f}(B.default)},"./src/dash/parser/matchers/NumericMatcher.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/parser/matchers/BaseMatcher.js");function _(h){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function y(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function d(h){var g=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=b(h);if(g){var O=b(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return v(this,x)}}function v(h,g){return!g||"object"!==_(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function b(h){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}var F=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;k.default=function(h){y(S,h);var g=d(S);function S(){return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),g.call(this,function(C){return F.test(C.value)},function(C){return parseFloat(C)})}return S}(B.default)},"./src/dash/parser/matchers/StringMatcher.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/parser/matchers/BaseMatcher.js"),_=u("./src/dash/constants/DashConstants.js");function M(g){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(g)}function y(g,S,C){return S in g?Object.defineProperty(g,S,{value:C,enumerable:!0,configurable:!0,writable:!0}):g[S]=C,g}function d(g,S){if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(S&&S.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),S&&v(g,S)}function v(g,S){return(v=Object.setPrototypeOf||function(x,O){return x.__proto__=O,x})(g,S)}function p(g){var S=function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var O,x=m(g);if(S){var N=m(this).constructor;O=Reflect.construct(x,arguments,N)}else O=x.apply(this,arguments);return L(this,O)}}function L(g,S){return!S||"object"!==M(S)&&"function"!=typeof S?function b(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g):S}function m(g){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)})(g)}k.default=function(g){d(C,g);var S=p(C);function C(){return function D(g,S){if(!(g instanceof S))throw new TypeError("Cannot call a class as a function")}(this,C),S.call(this,function(x,O){var N,w=(y(N={},_.default.MPD,[_.default.ID,_.default.PROFILES]),y(N,_.default.PERIOD,[_.default.ID]),y(N,_.default.BASE_URL,[_.default.SERVICE_LOCATION,_.default.BYTE_RANGE]),y(N,_.default.SEGMENT_BASE,[_.default.INDEX_RANGE]),y(N,_.default.INITIALIZATION,[_.default.RANGE]),y(N,_.default.REPRESENTATION_INDEX,[_.default.RANGE]),y(N,_.default.SEGMENT_LIST,[_.default.INDEX_RANGE]),y(N,_.default.BITSTREAM_SWITCHING,[_.default.RANGE]),y(N,_.default.SEGMENT_URL,[_.default.MEDIA_RANGE,_.default.INDEX_RANGE]),y(N,_.default.SEGMENT_TEMPLATE,[_.default.INDEX_RANGE,_.default.MEDIA,_.default.INDEX,_.default.INITIALIZATION_MINUS,_.default.BITSTREAM_SWITCHING_MINUS]),y(N,_.default.ASSET_IDENTIFIER,[_.default.VALUE,_.default.ID]),y(N,_.default.EVENT_STREAM,[_.default.VALUE]),y(N,_.default.ADAPTATION_SET,[_.default.PROFILES,_.default.MIME_TYPE,_.default.SEGMENT_PROFILES,_.default.CODECS,_.default.CONTENT_TYPE]),y(N,_.default.FRAME_PACKING,[_.default.VALUE,_.default.ID]),y(N,_.default.AUDIO_CHANNEL_CONFIGURATION,[_.default.VALUE,_.default.ID]),y(N,_.default.CONTENT_PROTECTION,[_.default.VALUE,_.default.ID]),y(N,_.default.ESSENTIAL_PROPERTY,[_.default.VALUE,_.default.ID]),y(N,_.default.SUPPLEMENTAL_PROPERTY,[_.default.VALUE,_.default.ID]),y(N,_.default.INBAND_EVENT_STREAM,[_.default.VALUE,_.default.ID]),y(N,_.default.ACCESSIBILITY,[_.default.VALUE,_.default.ID]),y(N,_.default.ROLE,[_.default.VALUE,_.default.ID]),y(N,_.default.RATING,[_.default.VALUE,_.default.ID]),y(N,_.default.VIEWPOINT,[_.default.VALUE,_.default.ID]),y(N,_.default.CONTENT_COMPONENT,[_.default.CONTENT_TYPE]),y(N,_.default.REPRESENTATION,[_.default.ID,_.default.DEPENDENCY_ID,_.default.MEDIA_STREAM_STRUCTURE_ID]),y(N,_.default.SUBSET,[_.default.ID]),y(N,_.default.METRICS,[_.default.METRICS_MINUS]),y(N,_.default.REPORTING,[_.default.VALUE,_.default.ID]),N);if(w.hasOwnProperty(O)){var P=w[O];return void 0!==P&&P.indexOf(x.name)>=0}return!1},function(x){return String(x)})}return C}(B.default)},"./src/dash/parser/objectiron.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(D){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(D)}function M(D){function d(b,F){for(var m in b)F.hasOwnProperty(m)||(F[m]=b[m])}function v(b,F,m){for(var h=0,g=b.length;h<g;++h){var S=b[h];if(F[S.name])if(m[S.name]){if(S.merge){var C=F[S.name],x=m[S.name];"object"===_(C)&&"object"===_(x)?d(C,x):m[S.name]=C+x}}else m[S.name]=F[S.name]}}function p(b,F){for(var m=0,h=b.children.length;m<h;++m){var g=b.children[m],S=F[g.name+"_asArray"];if(S)for(var C=0,x=S.length;C<x;++C){var O=S[C];v(b.properties,F,O),p(g,O)}}}return{run:function L(b){if(null===b||"object"!==_(b))return b;if(b.Period_asArray&&"period"in D)for(var F=D.period,m=b.Period_asArray,h=0,g=m.length;h<g;++h){var S=m[h];if(p(F,S),"adaptationset"in D){var C=S.AdaptationSet_asArray;if(C)for(var x=D.adaptationset,O=0,N=C.length;O<N;++O)p(x,C[O])}}return b}}}M.__dashjs_factory_name="ObjectIron";var y=B.default.getClassFactory(M);k.default=y},"./src/dash/utils/ListSegmentsGetter.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/constants/Constants.js"),M=u("./src/dash/utils/SegmentsUtils.js");function y(d,v){var p=(d=d||{}).timelineConverter;function b(){if(!p||!p.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(_.default.MISSING_CONFIG_ERROR)}function m(g,S){if(b(),!g)return null;var C=g.adaptation.period.mpd.manifest.Period_asArray[g.adaptation.period.index].AdaptationSet_asArray[g.adaptation.index].Representation_asArray[g.index].SegmentList,x=C.SegmentURL_asArray.length,O=g&&!isNaN(g.startNumber)?g.startNumber:1,N=Math.max(O-1,0),w=Math.max(S-N,0),P=null;if(w<x){var f=C.SegmentURL_asArray[w];(P=Object(M.getIndexBasedSegment)(p,v,g,S))&&(P.replacementTime=(O+S-1)*g.segmentDuration,P.media=f.media?f.media:"",P.mediaRange=f.mediaRange,P.indexRange=f.indexRange)}return P}return{getSegmentByIndex:m,getSegmentByTime:function h(g,S){if(b(),!g)return null;var C=g.segmentDuration;if(isNaN(C))return null;var x=p.calcPeriodRelativeTimeFromMpdRelativeTime(g,S);return m(g,Math.floor(x/C))},getMediaFinishedInformation:function F(g){var S={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!g)return S;var C=g.adaptation.period.mpd.manifest.Period_asArray[g.adaptation.period.index].AdaptationSet_asArray[g.adaptation.index].Representation_asArray[g.index].SegmentList,x=g&&!isNaN(g.startNumber)?g.startNumber:1,O=Math.max(x-1,0);return S.numberOfSegments=O+C.SegmentURL_asArray.length,S}}}y.__dashjs_factory_name="ListSegmentsGetter";var D=B.default.getClassFactory(y);k.default=D},"./src/dash/utils/Round10.js":function(we,k,u){"use strict";function _(d,v){for(var p=0;p<v.length;p++){var L=v[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,L.key,L)}}u.r(k),u.d(k,"default",function(){return y});var y=function(){function d(){!function B(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")}(this,d)}return function M(d,v,p){return v&&_(d.prototype,v),p&&_(d,p),d}(d,null,[{key:"round10",value:function(p,L){return function D(d,v,p){return typeof p>"u"||0==+p?Math[d](v):(p=+p,null===(v=+v)||isNaN(v)||"number"!=typeof p||p%1!=0?NaN:(v=v.toString().split("e"),+((v=(v=Math[d](+(v[0]+"e"+(v[1]?+v[1]-p:-p)))).toString().split("e"))[0]+"e"+(v[1]?+v[1]+p:p))))}("round",p,L)}}]),d}()},"./src/dash/utils/SegmentBaseGetter.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/constants/Constants.js");function M(D){var d=(D=D||{}).timelineConverter;function p(){if(!d||!d.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(_.default.MISSING_CONFIG_ERROR)}function b(h,g){if(p(),!h)return null;var C,S=h.segments?h.segments.length:-1;if(g<S&&(C=h.segments[g])&&C.index===g)return C;for(var x=0;x<S;x++)if((C=h.segments[x])&&C.index===g)return C;return null}return{getSegmentByIndex:b,getSegmentByTime:function F(h,g){return p(),b(h,function m(h,g){if(!h)return-1;var O,N,w,P,f,S=h.segments,C=S?S.length:null,x=-1;if(S&&C>0)for(f=0;f<C;f++)if(g+(O=(P=(N=S[f]).duration)/2)>=(w=N.presentationStartTime)&&g-O<w+P){x=N.index;break}return x}(h,g))},getMediaFinishedInformation:function L(h){var g={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return!h||!h.segments||(g.numberOfSegments=h.segments.length),g}}}M.__dashjs_factory_name="SegmentBaseGetter";var y=B.default.getClassFactory(M);k.default=y},"./src/dash/utils/SegmentsUtils.js":function(we,k,u){"use strict";u.r(k),u.d(k,"unescapeDollarsInTemplate",function(){return y}),u.d(k,"replaceIDForTemplate",function(){return D}),u.d(k,"replaceTokenForTemplate",function(){return d}),u.d(k,"getIndexBasedSegment",function(){return L}),u.d(k,"getTimeBasedSegment",function(){return b});var B=u("./src/dash/vo/Segment.js");function _(F,m){for(;F.length<m;)F="0"+F;return F}function y(F){return F&&F.split("$$").join("$")}function D(F,m){if(!m||!F||-1===F.indexOf("$RepresentationID$"))return F;var h=m.toString();return F.split("$RepresentationID$").join(h)}function d(F,m,h){var S,C,x,O,N,w,P=m.length,f="%0".length;if(!F)return F;for(;;){if((S=F.indexOf("$"+m))<0||(C=F.indexOf("$",S+P))<0)return F;if((x=F.indexOf("%0",S+P))>S&&x<C)switch(O=F.charAt(C-1),N=parseInt(F.substring(x+f,C-1),10),O){case"d":case"i":case"u":w=_(h.toString(),N);break;case"x":w=_(h.toString(16),N);break;case"X":w=_(h.toString(16),N).toUpperCase();break;case"o":w=_(h.toString(8),N);break;default:return F}else w=h;F=F.substring(0,S)+w+F.substring(C+1)}}function v(F,m,h,g,S,C,x,O){var N=new B.default;return N.representation=F,N.duration=m,N.presentationStartTime=h,N.mediaStartTime=g,N.availabilityStartTime=S.calcAvailabilityStartTimeFromPresentationTime(C,F,x),N.availabilityEndTime=S.calcAvailabilityEndTimeFromPresentationTime(C+m,F,x),N.wallStartTime=S.calcWallTimeForSegment(N,x),N.replacementNumber=function M(F,m){return F.representation.startNumber+m}(N,O),N.index=O,N}function p(F,m,h,g){var S=m.adaptation.period;if(isFinite(S.duration)&&S.start+S.duration<=h.presentationStartTime)return!1;if(g){if("INF"===m.availabilityTimeOffset)return!0;var C=F.getClientReferenceTime();return h.availabilityStartTime.getTime()<=C&&(!isFinite(h.availabilityEndTime)||h.availabilityEndTime.getTime()>=C)}return!0}function L(F,m,h,g){var S,C,x;S=h.segmentDuration,isNaN(S)&&(S=h.adaptation.period.duration),C=parseFloat((h.adaptation.period.start+g*S).toFixed(5)),x=parseFloat((C+S).toFixed(5));var N=v(h,S,C,F.calcMediaTimeFromPresentationTime(C,h),F,x,m,g);return p(F,h,N,m)?N:null}function b(F,m,h,g,S,C,x,O,N,w){var R,Q,P=g/C,f=S/C;return R=F.calcPresentationTimeFromMediaTime(P,h),p(F,h,Q=v(h,f,R,P,F,R+f,m,N),m)?(Q.replacementTime=w||g,x=d(x,"Number",Q.replacementNumber),x=d(x,"Time",Q.replacementTime),Q.media=x,Q.mediaRange=O,Q):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/constants/Constants.js"),M=u("./src/dash/utils/SegmentsUtils.js");function y(d,v){var p=(d=d||{}).timelineConverter;function b(){if(!p||!p.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(_.default.MISSING_CONFIG_ERROR)}function m(g,S){if(b(),!g)return null;var C=g.adaptation.period.mpd.manifest.Period_asArray[g.adaptation.period.index].AdaptationSet_asArray[g.adaptation.index].Representation_asArray[g.index].SegmentTemplate;S=Math.max(S,0);var x=Object(M.getIndexBasedSegment)(p,v,g,S);if(x){x.replacementTime=Math.round((S-1)*g.segmentDuration*g.timescale,10);var O=C.media;O=Object(M.replaceTokenForTemplate)(O,"Number",x.replacementNumber),O=Object(M.replaceTokenForTemplate)(O,"Time",x.replacementTime),x.media=O}return x}return{getSegmentByIndex:m,getSegmentByTime:function h(g,S){if(b(),!g)return null;var C=g.segmentDuration;if(isNaN(C))return null;var x=p.calcPeriodRelativeTimeFromMpdRelativeTime(g,S);return m(g,Math.floor(x/C))},getMediaFinishedInformation:function F(g){var S={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!g)return S;var C=g.segmentDuration;return S.numberOfSegments=isNaN(C)?1:Math.ceil(g.adaptation.period.duration/C),S}}}y.__dashjs_factory_name="TemplateSegmentsGetter";var D=B.default.getClassFactory(y);k.default=D},"./src/dash/utils/TimelineConverter.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/EventBus.js"),_=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/dash/constants/DashConstants.js"),D=u("./src/dash/models/DashManifestModel.js"),d=u("./src/core/Settings.js"),v=u("./src/streaming/constants/Constants.js"),p=u("./src/streaming/MediaPlayerEvents.js"),L=u("./src/streaming/constants/ConformanceViolationConstants.js");function b(){var g,S,C,x,F=this.context,m=Object(B.default)(F).getInstance(),h=Object(d.default)(F).getInstance();function P(ce){x=ce}function R(ce,de,se,ve){var ne,Y=de.adaptation.period.mpd,H=Y.availabilityStartTime;if(ve)ne=se&&Y.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(H.getTime()+1e3*(ce+Y.timeShiftBufferDepth)):Y.availabilityEndTime;else if(se){var E=de.availabilityTimeOffset;ne=new Date(H.getTime()+1e3*(ce-E))}else ne=H;return ne}function $(ce,de){return(ce.getTime()-de.mpd.availabilityStartTime.getTime()+1e3*x)/1e3}function J(ce,de){return ce+(de.adaptation.period.start-de.presentationTimeOffset)}function ue(ce){var de={start:NaN,end:NaN},se=ce[0].getAdapter().getRegularPeriods()[0],ve=$(new Date,se);if(!ce||0===ce.length)return{range:de,now:ve};ce.forEach(function(Y){var H=Y.getAdapter(),E=H.getMediaInfoForType(Y.getStreamInfo(),v.default.VIDEO)||H.getMediaInfoForType(Y.getStreamInfo(),v.default.AUDIO),U=H.getVoRepresentations(E)[0],W={start:NaN,end:NaN};if(U)if(U.segmentInfoType===y.default.SEGMENT_TIMELINE)W=function ie(ce){var I,U,W,re,se=S.getRepresentationFor(ce.index,ce.adaptation.period.mpd.manifest.Period_asArray[ce.adaptation.period.index].AdaptationSet_asArray[ce.adaptation.index]),ne=se.SegmentTemplate.timescale,Y=se.SegmentTemplate.SegmentTimeline.S_asArray,H={start:0,end:0},E=0;for(H.start=J(Y[0].t/ne,ce),W=0,re=Y.length;W<re;W++)U=0,(I=Y[W]).hasOwnProperty("r")&&(U=I.r),E+=I.d/ne*(1+U);return H.end=H.start+E,H}(U);else{var re=U.adaptation.period;W.start=re.start,W.end=Math.max(ve,re.start+re.duration)}!isNaN(W.start)&&(isNaN(de.start)||de.start>W.start)&&(de.start=W.start),!isNaN(W.end)&&(isNaN(de.end)||de.end<W.end)&&(de.end=W.end)}),de.end=Math.min(ve,de.end);var ne=_e(ce,de.end,!0);return de.end=isNaN(ne)?de.end:ne,de.start=se&&se.mpd&&se.mpd.timeShiftBufferDepth&&!isNaN(se.mpd.timeShiftBufferDepth)&&!isNaN(de.end)?Math.max(de.end-se.mpd.timeShiftBufferDepth,de.start):de.start,de.start=_e(ce,de.start),{range:de,now:ve}}function pe(ce,de){C=ce-de.end}function _e(ce,de){var se=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var ve=0,ne=!1,Y=NaN;!ne&&ve<ce.length;){var H=ce[ve].getStreamInfo();H.start<=de&&(!isFinite(H.duration)||H.start+H.duration>=de)?(Y=de,ne=!0):!se&&H.start>de&&(isNaN(Y)||H.start<Y)?Y=H.start:se&&H.start+H.duration<de&&(isNaN(Y)||H.start+H.duration>Y)&&(Y=H.start+H.duration),ve+=1}return Y}catch{return de}}function ae(ce){void 0!==ce.offset&&!isNaN(ce.offset)&&P(ce.offset/1e3)}function ge(){x=0,C=0}function fe(){m.off(_.default.UPDATE_TIME_SYNC_OFFSET,ae,this),ge()}return g={initialize:function N(){ge(),m.on(_.default.UPDATE_TIME_SYNC_OFFSET,ae,this)},getClientTimeOffset:function w(){return x},setClientTimeOffset:P,getClientReferenceTime:function f(){return Date.now()-1e3*C+1e3*x},calcAvailabilityStartTimeFromPresentationTime:function V(ce,de,se){return R(ce,de,se)},calcAvailabilityEndTimeFromPresentationTime:function Q(ce,de,se){return R(ce,de,se,!0)},calcPresentationTimeFromWallTime:$,calcPresentationTimeFromMediaTime:J,calcPeriodRelativeTimeFromMpdRelativeTime:function me(ce,de){return de-ce.adaptation.period.start},calcMediaTimeFromPresentationTime:function te(ce,de){return ce-de.adaptation.period.start+de.presentationTimeOffset},calcWallTimeForSegment:function X(ce,de){var ve,ne;return de&&(ve=ce.presentationStartTime+ce.representation.adaptation.period.mpd.suggestedPresentationDelay,ne=new Date(ce.availabilityStartTime.getTime()+1e3*ve)),ne},calcTimeShiftBufferWindow:function K(ce,de){if(!de)return function oe(ce){var de={start:NaN,end:NaN},se=0,ve=NaN;return ce.forEach(function(ne){var Y=ne.getStreamInfo();se+=Y.duration,(isNaN(ve)||Y.start<ve)&&(ve=Y.start)}),de.start=ve,de.end=ve+se,de}(ce);if(h.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var se=ue(ce);return pe(se.now,se.range),se.range}return function ee(ce){var de={start:NaN,end:NaN};if(!ce||0===ce.length)return de;var se=ce[0].getAdapter().getRegularPeriods()[0],ve=$(new Date,se),ne=se.mpd.timeShiftBufferDepth,Y=isNaN(ne)?0:ve-ne;if(de.start=_e(ce,Y),de.end=!isNaN(de.start)&&ve<de.start?ve:_e(ce,ve,!0),!isNaN(ne)&&de.end<ve-ne&&(de.end=NaN),h.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var H=ue(ce);if(H.range.end<de.start)return m.trigger(p.default.CONFORMANCE_VIOLATION,{level:L.default.LEVELS.WARNING,event:L.default.EVENTS.INVALID_DVR_WINDOW}),pe(H.now,H.range),H.range}return de}(ce)},reset:fe},function O(){S=Object(D.default)(F).getInstance(),fe()}(),g}b.__dashjs_factory_name="TimelineConverter",k.default=M.default.getSingletonFactory(b)},"./src/dash/utils/TimelineSegmentsGetter.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/constants/Constants.js"),M=u("./src/dash/utils/SegmentsUtils.js");function y(d,v){var p=(d=d||{}).timelineConverter,L=d.dashMetrics;function F(){if(!p)throw new Error(_.default.MISSING_CONFIG_ERROR)}function h(x,O){var Q,$,J,te,X,K,oe,N=x.adaptation.period.mpd.manifest.Period_asArray[x.adaptation.period.index].AdaptationSet_asArray[x.adaptation.index].Representation_asArray[x.index].SegmentTemplate||x.adaptation.period.mpd.manifest.Period_asArray[x.adaptation.period.index].AdaptationSet_asArray[x.adaptation.index].Representation_asArray[x.index].SegmentList,P=N.SegmentURL_asArray,f=0,R=0,V=-1;oe=x.timescale;var ee=!1;for(J=0,te=(Q=N.SegmentTimeline.S_asArray).length;J<te&&!ee;J++)for(K=0,($=Q[J]).hasOwnProperty("r")&&(K=$.r),$.hasOwnProperty("t")&&(R=(f=$.t)/oe),K<0&&(K=g(x,Q[J+1],$,oe,R)),X=0;X<=K&&!ee;X++)(ee=O(f,R,N,P,$,oe,++V,J))&&(x.segmentDuration=$.d/oe),R=(f+=$.d)/oe}function g(x,O,N,w,P){var f;if(O&&O.hasOwnProperty("t"))f=O.t/w;else try{var R=0;if(isNaN(x.adaptation.period.start)||isNaN(x.adaptation.period.duration)||!isFinite(x.adaptation.period.duration)){var V=L.getCurrentDVRInfo();R=isNaN(V.end)?0:V.end}else R=x.adaptation.period.start+x.adaptation.period.duration;f=p.calcMediaTimeFromPresentationTime(R,x),x.segmentDuration=N.d/w}catch{f=0}return Math.max(Math.ceil((f-P)/(N.d/w))-1,0)}return{getSegmentByIndex:function S(x,O,N){if(F(),!x)return null;var w=null,P=!1;return h(x,function(f,R,V,Q,$,J,te,X){if(P||N<0){var K=V.media,oe=$.mediaRange;return Q&&(K=Q[X].media||"",oe=Q[X].mediaRange),w=Object(M.getTimeBasedSegment)(p,v,x,f,$.d,J,K,oe,te,$.tManifest),!0}return R>=N-.5*$.d/J&&(P=!0),!1}),w},getSegmentByTime:function C(x,O){if(F(),!x)return null;void 0===O&&(O=null);var N=null,w=p.calcMediaTimeFromPresentationTime(O,x);return h(x,function(P,f,R,V,Q,$,J,te){if(w<f+Q.d/$&&w>=f){var X=R.media,K=Q.mediaRange;return V&&(X=V[te].media||"",K=V[te].mediaRange),N=Object(M.getTimeBasedSegment)(p,v,x,P,Q.d,$,X,K,J,Q.tManifest),!0}return!1}),N},getMediaFinishedInformation:function m(x){if(!x)return 0;var R,V,Q,$,J,te,X,w=0,P=0,f=0;for(X=x.timescale,$=(R=(x.adaptation.period.mpd.manifest.Period_asArray[x.adaptation.period.index].AdaptationSet_asArray[x.adaptation.index].Representation_asArray[x.index].SegmentTemplate||x.adaptation.period.mpd.manifest.Period_asArray[x.adaptation.period.index].AdaptationSet_asArray[x.adaptation.index].Representation_asArray[x.index].SegmentList).SegmentTimeline.S_asArray).length,Q=0;Q<$;Q++)for(te=0,(V=R[Q]).hasOwnProperty("r")&&(te=V.r),V.hasOwnProperty("t")&&(P=(w=V.t)/X),te<0&&(te=g(x,R[Q+1],V,X,P)),J=0;J<=te;J++)f++,P=(w+=V.d)/X;return{numberOfSegments:f,mediaTimeOfLastSignaledSegment:P}}}}y.__dashjs_factory_name="TimelineSegmentsGetter";var D=B.default.getClassFactory(y);k.default=D},"./src/dash/vo/AdaptationSet.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.period=null,this.index=-1,this.type=null}},"./src/dash/vo/BaseURL.js":function(we,k,u){"use strict";u.r(k);var y=function D(d,v,p,L){(function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this.url=d||"",this.serviceLocation=v||d||"",this.dvb_priority=p||1,this.dvb_weight=L||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};y.DEFAULT_DVB_PRIORITY=1,y.DEFAULT_DVB_WEIGHT=1,k.default=y},"./src/dash/vo/Event.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}},"./src/dash/vo/EventStream.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},"./src/dash/vo/ManifestInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}},"./src/dash/vo/MediaInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1}},"./src/dash/vo/Mpd.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}},"./src/dash/vo/PatchOperation.js":function(we,k,u){"use strict";function _(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d,v,p){(function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this.action=d,this.xpath=v,this.value=p,this.position=null}return function M(D,d,v){return d&&_(D.prototype,d),v&&_(D,v),D}(D,[{key:"getMpdTarget",value:function(v){return this.xpath.getMpdTarget(v,"remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position)}}]),D}()},"./src/dash/vo/Period.js":function(we,k,u){"use strict";u.r(k);var _=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};_.DEFAULT_ID="defaultId",k.default=_},"./src/dash/vo/ProducerReferenceTime.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},"./src/dash/vo/Representation.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/constants/DashConstants.js");function M(d,v){for(var p=0;p<v.length;p++){var L=v[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,L.key,L)}}k.default=function(){function d(){(function _(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return function y(d,v,p){return v&&M(d.prototype,v),p&&M(d,p),d}(d,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==B.default.BASE_URL&&this.segmentInfoType!==B.default.SEGMENT_BASE&&!this.indexRange}}]),d}()},"./src/dash/vo/RepresentationInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}},"./src/dash/vo/Segment.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},"./src/dash/vo/SimpleXPath.js":function(we,k,u){"use strict";function _(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d){var v=this;(function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this.valid="/"==d[0],this.path=d.split("/").filter(function(p){return 0!==p.length}).map(function(p){var L={name:p},b=p.indexOf("[");if(-1!=b){L.name=p.substring(0,b);var F=p.substring(b+1,p.length-1);v.valid=v.valid&&-1==F.indexOf("[");var m=F.indexOf("=");-1!=m?(L.attribute={name:F.substring(1,m),value:F.substring(m+1)},-1!=["'",'"'].indexOf(L.attribute.value[0])&&(L.attribute.value=L.attribute.value.substring(1,L.attribute.value.length-1))):L.position=parseInt(F,10)-1}return L})}return function M(D,d,v){return d&&_(D.prototype,d),v&&_(D,v),D}(D,[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(v,p){for(var L=null,b=v,F=1,m="MPD";F<this.path.length&&null!==b;){L=b;var h=this.path[F];if(m=h.name,F!==this.path.length-1||!m.startsWith("@")){var g=L[m+"_asArray"]||[];0===g.length&&L[m]&&g.push(L[m]),h.position?b=g[h.position]||null:h.attribute?function(){var S=h.attribute;b=g.filter(function(C){return C[S.name]==S.value})[0]||null}():b=g[0]||null}F++}return null===b?null:m.startsWith("@")?{name:m.substring(1),leaf:b,target:b}:{name:m,leaf:b,target:p?L:b}}}]),D}()},"./src/dash/vo/StreamInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}},"./src/dash/vo/UTCTiming.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.schemeIdUri="",this.value=""}},"./src/streaming/FragmentLoader.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/streaming/net/URLLoader.js"),M=u("./src/streaming/vo/HeadRequest.js"),y=u("./src/streaming/vo/DashJSError.js"),D=u("./src/core/FactoryMaker.js");function d(v){var g,S,p=this.context,L=(v=v||{}).eventBus,b=v.events,F=v.urlUtils,m=v.errors,h=v.streamId;return g={checkForExistence:function x(P){var f=function(Q){L.trigger(b.CHECK_FOR_EXISTENCE_COMPLETED,{request:P,exists:Q})};if(P){var R=new M.default(P.url);S.load({request:R,success:function(){f(!0)},error:function(){f(!1)}})}else f(!1)},load:function O(P){var f=function(V,Q){L.trigger(b.LOADING_COMPLETED,{request:P,response:V||null,error:Q||null,sender:g})};P?S.load({request:P,progress:function(V){L.trigger(b.LOADING_PROGRESS,{request:P,stream:V.stream,streamId:h}),V.data&&L.trigger(b.LOADING_DATA_PROGRESS,{request:P,response:V.data||null,error:null,sender:g})},success:function(V){f(V)},error:function(V,Q,$){f(void 0,new y.default(m.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,$,Q))},abort:function(V){V&&L.trigger(b.LOADING_ABANDONED,{mediaType:V.mediaType,request:V,sender:g})}}):f(void 0,new y.default(m.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,m.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function N(){S&&S.abort()},reset:function w(){S&&(S.abort(),S=null)}},function C(){S=Object(_.default)(p).create({errHandler:v.errHandler,errors:m,dashMetrics:v.dashMetrics,mediaPlayerModel:v.mediaPlayerModel,requestModifier:v.requestModifier,urlUtils:F,constants:B.default,boxParser:v.boxParser,dashConstants:v.dashConstants,requestTimeout:v.settings.get().streaming.fragmentRequestTimeout})}(),g}d.__dashjs_factory_name="FragmentLoader",k.default=D.default.getClassFactory(d)},"./src/streaming/ManifestLoader.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/dash/constants/DashConstants.js"),M=u("./src/streaming/controllers/XlinkController.js"),y=u("./src/streaming/net/URLLoader.js"),D=u("./src/streaming/utils/URLUtils.js"),d=u("./src/streaming/vo/TextRequest.js"),v=u("./src/streaming/vo/DashJSError.js"),p=u("./src/streaming/vo/metrics/HTTPRequest.js"),L=u("./src/core/EventBus.js"),b=u("./src/core/events/Events.js"),F=u("./src/core/errors/Errors.js"),m=u("./src/core/FactoryMaker.js"),h=u("./src/dash/parser/DashParser.js");function g(C){var P,f,R,V,Q,x=this.context,O=(C=C||{}).debug,N=Object(L.default)(x).getInstance(),w=Object(D.default)(x).getInstance(),$=C.mssHandler,J=C.errHandler;function X(ue){N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:ue.manifest})}return P={load:function oe(ue){var pe=new d.default(ue,p.HTTPRequest.MPD_TYPE);R.load({request:pe,success:function(ie,me,ae){if(V){var ge,fe,ce;if(ae&&ae!==ue?(fe=w.parseBaseUrl(ae),ge=ae):(w.isRelative(ue)&&(ue=w.resolve(ue,window.location.href)),fe=w.parseBaseUrl(ue)),"No Content"==me)return void N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null});if(null===Q&&(Q=function K(ue){var pe=null;return ue.indexOf("SmoothStreamingMedia")>-1?($&&(pe=$.createMssParser(),$.registerEvents()),pe):ue.indexOf("MPD")>-1||ue.indexOf("Patch")>-1?Object(h.default)(x).create({debug:O}):pe}(ie)),null===Q)return void N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(F.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,F.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ue))});V.setMatchers(Q.getMatchers()),V.setIron(Q.getIron());try{ce=Q.parse(ie)}catch{return void N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(F.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,F.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ue))})}ce?(ce.url=ge||ue,ce.originalUrl||(ce.originalUrl=ce.url),ce.hasOwnProperty(B.default.LOCATION)&&(fe=w.parseBaseUrl(ce.Location_asArray[0]),f.debug("BaseURI set by Location to: "+fe)),ce.baseUri=fe,ce.loadedTime=new Date,V.resolveManifestOnLoad(ce),N.trigger(b.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:ie})):N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(F.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,F.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(ue))})}},error:function(ie,me,ae){N.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(F.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,F.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(ue,", ").concat(ae))})}})},reset:function ee(){N.off(b.default.XLINK_READY,X,P),$&&$.reset(),V&&(V.reset(),V=null),R&&(R.abort(),R=null)}},function te(){f=O.getLogger(P),N.on(b.default.XLINK_READY,X,P),R=Object(y.default)(x).create({errHandler:C.errHandler,dashMetrics:C.dashMetrics,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,urlUtils:w,constants:B.default,dashConstants:_.default,errors:F.default}),V=Object(M.default)(x).create({errHandler:J,dashMetrics:C.dashMetrics,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,settings:C.settings}),Q=null}(),P}g.__dashjs_factory_name="ManifestLoader";var S=m.default.getClassFactory(g);k.default=S},"./src/streaming/ManifestUpdater.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/EventBus.js"),_=u("./src/core/events/Events.js"),M=u("./src/streaming/MediaPlayerEvents.js"),y=u("./src/core/FactoryMaker.js"),D=u("./src/core/Debug.js"),d=u("./src/core/errors/Errors.js"),v=u("./src/dash/constants/DashConstants.js"),p=u("./src/streaming/utils/URLUtils.js");function L(){var h,g,S,C,x,O,N,w,P,f,R,V,b=this.context,F=Object(B.default)(b).getInstance(),m=Object(p.default)(b).getInstance();function X(){S=NaN,N=!1,x=!0,O=!1,oe()}function oe(){null!==C&&(clearTimeout(C),C=null)}function ee(ce){oe(),!O&&(isNaN(ce)&&!isNaN(S)&&(ce=1e3*S),isNaN(ce)||(g.debug("Refresh manifest in "+ce+" milliseconds."),C=setTimeout(_e,ce)))}function ue(){var ce=arguments.length>0&&void 0!==arguments[0]&&arguments[0];N=!0;var de=P.getValue(),se=de.url,ve=f.getPatchLocation(de),ne=f.getLocation(de);ve&&!ce?se=ve:ne&&(se=ne),m.isRelative(se)&&(se=m.resolve(se,de.url)),w.load(se)}function pe(ce){if(ce){if(f.getIsPatch(ce)){var de=ce;ce=P.getValue();var se=f.isPatchValid(ce,de),ve=se;if(se){var ne=f.getPublishTime(ce);ve=f.applyPatchToManifest(ce,de);var Y=f.getPublishTime(ce);ve=ne.getTime()!=Y.getTime()}if(!ve)return g.debug("Patch provided is invalid, performing full manifest refresh"),void ue(!0);ce.loadedTime=new Date}}else(ce=P.getValue()).loadedTime=new Date;if(P.getValue()&&P.getValue().type===v.default.DYNAMIC&&ce.type===v.default.STATIC)return F.trigger(_.default.DYNAMIC_TO_STATIC),N=!1,void(O=!0);P.setValue(ce);var H=new Date,E=(H.getTime()-ce.loadedTime.getTime())/1e3;1e3*(S=f.getManifestUpdatePeriod(ce,E))>2147483647&&(S=2147483.647),F.trigger(_.default.MANIFEST_UPDATED,{manifest:ce}),g.info("Manifest has been refreshed at "+H+"["+H.getTime()/1e3+"] "),x||ee()}function _e(){if(!x){if(N)return void ee(V.get().streaming.manifestUpdateRetryInterval);ue()}}function ie(ce){ce.error?ce.error.code===d.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&R.error(ce.error):pe(ce.manifest)}function me(){x=!1,ee()}function ae(){(x=!V.get().streaming.scheduling.scheduleWhilePaused)&&oe()}function ge(){N=!1}return h={initialize:function J(){X(),F.on(_.default.STREAMS_COMPOSED,ge,this),F.on(M.default.PLAYBACK_STARTED,me,this),F.on(M.default.PLAYBACK_PAUSED,ae,this),F.on(_.default.INTERNAL_MANIFEST_LOADED,ie,this)},setManifest:function te(ce){pe(ce)},refreshManifest:ue,getIsUpdating:function fe(){return N},setConfig:function $(ce){!ce||(ce.manifestModel&&(P=ce.manifestModel),ce.adapter&&(f=ce.adapter),ce.manifestLoader&&(w=ce.manifestLoader),ce.errHandler&&(R=ce.errHandler),ce.settings&&(V=ce.settings))},reset:function K(){F.off(M.default.PLAYBACK_STARTED,me,this),F.off(M.default.PLAYBACK_PAUSED,ae,this),F.off(_.default.STREAMS_COMPOSED,ge,this),F.off(_.default.INTERNAL_MANIFEST_LOADED,ie,this),X()}},function Q(){g=Object(D.default)(b).getInstance().getLogger(h)}(),h}L.__dashjs_factory_name="ManifestUpdater",k.default=y.default.getClassFactory(L)},"./src/streaming/MediaPlayer.js":function(we,k,u){"use strict";u.r(k);var B=u("./externals/cea608-parser.js"),_=u.n(B),M=u("./src/streaming/constants/Constants.js"),y=u("./src/dash/constants/DashConstants.js"),D=u("./src/streaming/constants/MetricsConstants.js"),d=u("./src/streaming/controllers/PlaybackController.js"),v=u("./src/streaming/controllers/StreamController.js"),p=u("./src/streaming/controllers/GapController.js"),L=u("./src/streaming/controllers/CatchupController.js"),b=u("./src/streaming/controllers/ServiceDescriptionController.js"),F=u("./src/streaming/controllers/MediaController.js"),m=u("./src/streaming/controllers/BaseURLController.js"),h=u("./src/streaming/ManifestLoader.js"),g=u("./src/streaming/utils/ErrorHandler.js"),S=u("./src/streaming/utils/Capabilities.js"),C=u("./src/streaming/utils/CapabilitiesFilter.js"),x=u("./src/streaming/utils/RequestModifier.js"),O=u("./src/streaming/models/URIFragmentModel.js"),N=u("./src/streaming/models/ManifestModel.js"),w=u("./src/streaming/models/MediaPlayerModel.js"),P=u("./src/streaming/controllers/AbrController.js"),f=u("./src/streaming/net/SchemeLoaderFactory.js"),R=u("./src/streaming/models/VideoModel.js"),V=u("./src/streaming/models/CmcdModel.js"),Q=u("./src/streaming/utils/DOMStorage.js"),$=u("./src/core/Debug.js"),J=u("./src/core/errors/Errors.js"),te=u("./src/core/EventBus.js"),X=u("./src/core/events/Events.js"),K=u("./src/streaming/MediaPlayerEvents.js"),oe=u("./src/core/FactoryMaker.js"),ee=u("./src/core/Settings.js"),ue=u("./src/core/Version.js"),pe=u("./src/dash/controllers/SegmentBaseController.js"),_e=u("./src/dash/DashAdapter.js"),ie=u("./src/dash/DashMetrics.js"),me=u("./src/dash/utils/TimelineConverter.js"),ae=u("./src/streaming/vo/metrics/HTTPRequest.js"),ge=u("./externals/base64.js"),fe=u.n(ge),ce=u("./node_modules/codem-isoboxer/dist/iso_boxer.js"),de=u.n(ce),se=u("./src/streaming/vo/DashJSError.js"),ve=u("./src/streaming/utils/SupervisorTools.js"),ne=u("./src/streaming/ManifestUpdater.js"),Y=u("./src/streaming/utils/URLUtils.js"),H=u("./src/streaming/utils/BoxParser.js"),E=u("./src/streaming/text/TextController.js"),I=u("./src/streaming/models/CustomParametersModel.js");function U(){var Ce,Fe,Oe,Le,He,Pe,Ue,Qe,ft,lt,Dt,Ft,Ht,Jt,sn,on,je,xe,Se,ke,Ze,at,dt,et,pt,jt,Rt,Yt,Be,$e,nt,Ot,Mt,wt,an,ct,re="You must first call initialize() and set a source before calling this method",De="You must first call initialize() and set a valid source and view before calling this method",Ie="You must first call attachView() to set the video element before calling this method",z="MediaPlayer not initialized!",G=this.context,Te=Object(te.default)(G).getInstance(),ye=Object(ee.default)(G).getInstance(),Ee=Object($.default)(G).getInstance({settings:ye});function Et(){Bs(null),pa(null),Le=null,Ht&&(Ht.reset(),Ht=null),Jt&&(Jt.reset(),Jt=null),Se&&(Se.reset(),Se=null),ye.reset(),on&&(on.reset(),on=null)}function rt(){return!!Oe&&!!Mt.getElement()}function ln(){return Object(ue.getVersionString)()}function ut(){if(!Ue)throw De;return Rt.isPaused()}function In(ze){var Pt=et&&et.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,_t=$e.getCurrentDVRInfo(Pt);if(!_t)return 0;var Zt=Rt.getLiveDelay(),mn=_t.range.start+ze;return mn>_t.range.end-Zt&&(mn=_t.range.end-Zt),mn}function At(ze){if(!Ue)throw De;var Pt=er().currentTime;if(void 0!==ze)Pt=et.getTimeRelativeToStreamId(Pt,ze);else if(Rt.getIsDynamic()){var _t=et&&et.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,Zt=$e.getCurrentDVRInfo(_t);Pt=null===Zt||0===Pt?0:Math.max(0,Pt-Zt.range.start)}return Pt}function Kn(){if(!Ue)throw De;var ze=er().duration;if(Rt.getIsDynamic()){var Pt=et&&et.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,_t=$e.getCurrentDVRInfo(Pt);ze=_t?_t.range.end-_t.range.start:0}return ze}function Me(ze){Object(ve.checkParameterType)(ze,"boolean"),Qe=ze}function yr(){Se.restoreDefaultUTCTimingSources()}function en(){return $e}function er(){if(!Mt.getElement())throw Ie;return Mt.getElement()}function pa(ze){if(!He)throw z;Mt.setElement(ze),ze&&(_a(),function nr(){if(!Jt){var ze=dashjs.MetricsReporting;if("function"==typeof ze){var Pt=ze(G).create();Jt=Pt.createMetricsReporting({debug:Ee,eventBus:Te,mediaElement:er(),adapter:je,dashMetrics:$e,mediaPlayerModel:xe,events:X.default,constants:M.default,metricsConstants:D.default})}}}(),function Mr(){if(!sn){var ze=dashjs.MssHandler;"function"==typeof ze&&(J.default.extend(ze.errors),sn=ze(G).create({eventBus:Te,mediaPlayerModel:xe,dashMetrics:$e,manifestModel:nt,playbackController:Rt,streamController:et,protectionController:Ht,baseURLController:Ze,errHandler:ke,events:X.default,constants:M.default,debug:Ee,initSegmentType:ae.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:fe.a,ISOBoxer:de.a,settings:ye}))}}(),et&&et.switchToVideoElement()),Ue&&tu(),vr()}function va(ze){if(!Pe)throw re;var Pt=et.getActiveStreamInfo();return Pt?Ft.getTracksFor(ze,Pt.id):[]}function Bs(ze){if(!He)throw z;"string"==typeof ze&&wt.initialize(ze),Oe=ze,(Pe||Ue)&&tu(),rt()&&vr()}function js(){if(!Pe)throw re;var ze=et.getActiveStreamInfo();return ze?et.getStreamById(ze.id):null}function tu(){Ue=!1,Pe=!1,je.reset(),et.reset(),jt.reset(),Be.reset(),Rt.reset(),Yt.reset(),ft.reset(),Ft.reset(),ct.reset(),Ht&&(ye.get().streaming.protection.keepProtectionMediaKeys?Ht.stop():(Ht.reset(),Ht=null,_a())),pt.reset(),Ot.reset()}function Oo(){return Object(h.default)(G).create({debug:Ee,errHandler:ke,dashMetrics:$e,mediaPlayerModel:xe,requestModifier:Object(x.default)(G).getInstance(),mssHandler:sn,settings:ye})}function _a(){if(Ht)return Ht;var ze=dashjs.Protection;if("function"==typeof ze){var Pt=ze(G).create();return X.default.extend(ze.events),K.default.extend(ze.events,{publicOnly:!0}),J.default.extend(ze.errors),at||(at=Object(S.default)(G).getInstance()),Ht=Pt.createProtectionSystem({debug:Ee,errHandler:ke,videoModel:Mt,customParametersModel:Se,capabilities:at,eventBus:Te,events:X.default,BASE64:fe.a,constants:M.default,cmcdModel:Ot,settings:ye})}return null}function kn(){if(!He)throw z;if(on)return on;var ze=dashjs.OfflineController;if("function"==typeof ze){X.default.extend(ze.events),K.default.extend(ze.events,{publicOnly:!0}),J.default.extend(ze.errors);var Pt=Oo(),_t=Object(ne.default)(G).create();return _t.setConfig({manifestModel:nt,adapter:je,manifestLoader:Pt,errHandler:ke}),on=ze(G).create({debug:Ee,manifestUpdater:_t,baseURLController:Ze,manifestLoader:Pt,manifestModel:nt,mediaPlayerModel:xe,abrController:ft,playbackController:Rt,adapter:je,errHandler:ke,dashMetrics:$e,timelineConverter:Dt,segmentBaseController:ct,schemeLoaderFactory:lt,eventBus:Te,events:X.default,errors:J.default,constants:M.default,settings:ye,dashConstants:y.default,urlUtils:Object(Y.default)(G).getInstance()})}return null}function mr(ze){var Pt=et&&et.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,_t=$e.getCurrentDVRInfo(Pt);return _t?ze+(_t.manifestInfo.availableFrom.getTime()/1e3+_t.range.start):0}function vr(){on&&on.resetRecords(),!Pe&&Oe&&(Pe=!0,Fe.info("Streaming Initialized"),function Zn(){var ze=Oo();et||(et=Object(v.default)(G).getInstance()),pt||(pt=Object(E.default)(G).create({errHandler:ke,manifestModel:nt,adapter:je,mediaController:Ft,videoModel:Mt,settings:ye})),dt.setConfig({capabilities:at,customParametersModel:Se,adapter:je,settings:ye,manifestModel:nt,errHandler:ke}),et.setConfig({capabilities:at,capabilitiesFilter:dt,manifestLoader:ze,manifestModel:nt,mediaPlayerModel:xe,customParametersModel:Se,protectionController:Ht,textController:pt,adapter:je,dashMetrics:$e,errHandler:ke,timelineConverter:Dt,videoModel:Mt,playbackController:Rt,serviceDescriptionController:Yt,abrController:ft,mediaController:Ft,settings:ye,baseURLController:Ze,uriFragmentModel:wt,segmentBaseController:ct}),jt.setConfig({settings:ye,playbackController:Rt,streamController:et,videoModel:Mt,timelineConverter:Dt,adapter:je}),Rt.setConfig({streamController:et,serviceDescriptionController:Yt,dashMetrics:$e,adapter:je,videoModel:Mt,timelineConverter:Dt,settings:ye}),Be.setConfig({streamController:et,playbackController:Rt,mediaPlayerModel:xe,dashMetrics:$e,videoModel:Mt,settings:ye}),ft.setConfig({streamController:et,domStorage:an,mediaPlayerModel:xe,customParametersModel:Se,dashMetrics:$e,adapter:je,videoModel:Mt,settings:ye}),Ot.setConfig({abrController:ft,dashMetrics:$e,playbackController:Rt}),ft.initialize(),et.initialize(Qe,Le),pt.initialize(),jt.initialize(),Be.initialize(),Ot.initialize(),ct.initialize()}(),"string"==typeof Oe?et.load(Oe):et.loadWithManifest(Oe)),!Ue&&rt()&&(Ue=!0,Fe.info("Playback Initialized"))}return Ce={initialize:function Xe(ze,Pt,_t){at||(at=Object(S.default)(G).getInstance()).setConfig({settings:ye}),ke||(ke=Object(g.default)(G).getInstance()),at.supportsMediaSource()?(He||(He=!0,Dt=Object(me.default)(G).getInstance(),ft||(ft=Object(P.default)(G).getInstance()).setConfig({settings:ye}),lt||(lt=Object(f.default)(G).getInstance()),Rt||(Rt=Object(d.default)(G).getInstance()),Ft||(Ft=Object(F.default)(G).getInstance()),et||(et=Object(v.default)(G).getInstance()),jt||(jt=Object(p.default)(G).getInstance()),Be||(Be=Object(L.default)(G).getInstance()),Yt||(Yt=Object(b.default)(G).getInstance()),dt||(dt=Object(C.default)(G).getInstance()),je=Object(_e.default)(G).getInstance(),nt=Object(N.default)(G).getInstance(),Ot=Object(V.default)(G).getInstance(),$e=Object(ie.default)(G).getInstance({settings:ye}),an=Object(Q.default)(G).getInstance({settings:ye}),je.setConfig({constants:M.default,cea608parser:_.a,errHandler:ke,BASE64:fe.a}),Ze||(Ze=Object(m.default)(G).create()),Ze.setConfig({adapter:je}),Yt.setConfig({adapter:je}),ct||(ct=Object(pe.default)(G).getInstance({dashMetrics:$e,mediaPlayerModel:xe,errHandler:ke,baseURLController:Ze,events:X.default,eventBus:Te,debug:Ee,boxParser:Object(H.default)(G).getInstance(),requestModifier:Object(x.default)(G).getInstance(),errors:J.default})),Ft.setConfig({domStorage:an,settings:ye,customParametersModel:Se}),xe.setConfig({playbackController:Rt,serviceDescriptionController:Yt}),yr(),Me(void 0===_t||_t),kn()),ze&&pa(ze),Pt&&Bs(Pt),Fe.info("[dash.js "+ln()+"] MediaPlayer has been initialized")):ke.error(new se.default(J.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,J.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function Ae(ze){!ze||(ze.capabilities&&(at=ze.capabilities),ze.capabilitiesFilter&&(dt=ze.capabilitiesFilter),ze.streamController&&(et=ze.streamController),ze.textController&&(pt=ze.textController),ze.gapController&&(jt=ze.gapController),ze.playbackController&&(Rt=ze.playbackController),ze.serviceDescriptionController&&(Yt=ze.serviceDescriptionController),ze.catchupController&&(Be=ze.catchupController),ze.mediaPlayerModel&&(xe=ze.mediaPlayerModel),ze.customParametersModel&&(Se=ze.customParametersModel),ze.abrController&&(ft=ze.abrController),ze.schemeLoaderFactory&&(lt=ze.schemeLoaderFactory),ze.mediaController&&(Ft=ze.mediaController),ze.settings&&(ye=ze.settings))},on:function yt(ze,Pt,_t,Zt){Te.on(ze,Pt,_t,Zt)},off:function $t(ze,Pt,_t){Te.off(ze,Pt,_t)},extend:function Nf(ze,Pt,_t){oe.default.extend(ze,Pt,_t,G)},attachView:pa,attachSource:Bs,isReady:rt,play:function Wt(){if(!Ue)throw De;(!Qe||ut()&&Ue)&&Rt.play()},isPaused:ut,pause:function Je(){if(!Ue)throw De;Rt.pause()},isSeeking:function ot(){if(!Ue)throw De;return Rt.isSeeking()},isDynamic:function ht(){if(!Ue)throw De;return Rt.getIsDynamic()},getLowLatencyModeEnabled:function Lt(){if(!Ue)throw De;return Rt.getLowLatencyModeEnabled()},seek:function We(ze){if(!Ue)throw De;if(Object(ve.checkParameterType)(ze,"number"),isNaN(ze))throw M.default.BAD_ARGUMENT_ERROR;var Pt=Rt.getIsDynamic()?In(ze):ze;Rt.seek(Pt)},setPlaybackRate:function Ut(ze){er().playbackRate=ze},getPlaybackRate:function Ge(){return er().playbackRate},setMute:function Nt(ze){Object(ve.checkParameterType)(ze,"boolean"),er().muted=ze},isMuted:function Tt(){return er().muted},setVolume:function nn(ze){if("number"!=typeof ze||isNaN(ze)||ze<0||ze>1)throw M.default.BAD_ARGUMENT_ERROR;er().volume=ze},getVolume:function Mn(){return er().volume},time:At,duration:Kn,timeAsUTC:function rn(){if(!Ue)throw De;return At()<0?NaN:mr(At())},durationAsUTC:function Dn(){if(!Ue)throw De;return mr(Kn())},getActiveStream:js,getDVRWindowSize:function Kt(){var ze=et&&et.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,Pt=$e.getCurrentDVRInfo(ze);return Pt?Pt.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:In,getTargetLiveDelay:function pr(){if(!Ue)throw De;return Rt.getLiveDelay()},convertToTimeCode:function Yr(ze){ze=Math.max(ze,0);var Pt=Math.floor(ze/3600),_t=Math.floor(ze%3600/60),Zt=Math.floor(ze%3600%60);return(0===Pt?"":Pt<10?"0"+Pt.toString()+":":Pt.toString()+":")+(_t<10?"0"+_t.toString():_t.toString())+":"+(Zt<10?"0"+Zt.toString():Zt.toString())},formatUTC:function wf(ze,Pt,_t){var Zt=arguments.length>3&&void 0!==arguments[3]&&arguments[3],mn=new Date(1e3*ze),or=mn.toLocaleDateString(Pt),kr=mn.toLocaleTimeString(Pt,{hour12:_t});return Zt?kr+" "+or:kr},getVersion:ln,getDebug:function Qt(){return Ee},getBufferLength:function Ln(ze){var Pt=[M.default.VIDEO,M.default.AUDIO,M.default.TEXT];if(ze)return-1!==Pt.indexOf(ze)?en().getCurrentBufferLevel(ze)||NaN:(Fe.warn("getBufferLength requested for invalid type"),NaN);var _t=Pt.map(function(mn){return va(mn).length>0?en().getCurrentBufferLevel(mn):Number.MAX_VALUE}).reduce(function(mn,or){return Math.min(mn,or)});return _t===Number.MAX_VALUE?NaN:_t},getTTMLRenderingDiv:function Rf(){return Mt?Mt.getTTMLRenderingDiv():null},getVideoElement:er,getSource:function Ea(){if(!Oe)throw"You must first call attachSource() with a valid source before calling this method";return Oe},updateSource:function Ro(ze){et.load(Oe=ze)},getCurrentLiveLatency:function Ke(){if(!He)throw z;return Ue?Rt.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function Ei(ze){if(!Pe)throw re;return ft.getTopBitrateInfoFor(ze)},setAutoPlay:Me,getAutoPlay:function be(){return Qe},getDashMetrics:en,getQualityFor:function Ur(ze){if(!Pe)throw re;if(ze===M.default.IMAGE){var Pt=js();if(!Pt)return-1;var _t=Pt.getThumbnailController();return _t?_t.getCurrentTrackIndex():-1}return ft.getQualityFor(ze)},setQualityFor:function _i(ze,Pt){var _t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Pe)throw re;if(ze===M.default.IMAGE){var Zt=js();if(!Zt)return;var mn=Zt.getThumbnailController();mn&&mn.setTrackByIndex(Pt)}ft.setPlaybackQuality(ze,et.getActiveStreamInfo(),Pt,{forceReplace:_t})},updatePortalSize:function ii(){ft.setElementSize(),ft.setWindowResizeEventCalled(!0)},enableText:function pn(ze){var Pt=et.getActiveStreamInfo();return!(!Pt||!pt)&&pt.enableText(Pt.id,ze)},enableForcedTextStreaming:function Sn(ze){return!(!et.getActiveStreamInfo()||!pt)&&pt.enableForcedTextStreaming(ze)},isTextEnabled:function Bt(){var ze=et.getActiveStreamInfo();return!(!ze||!pt)&&pt.isTextEnabled(ze)},setTextTrack:function jr(ze){if(!Ue)throw De;var Pt=et.getActiveStreamInfo();!Pt||!pt||pt.setTextTrack(Pt.id,ze)},getBitrateInfoListFor:function Xl(ze){if(!Pe)throw re;var Pt=js();return Pt?Pt.getBitrateListFor(ze):[]},getStreamsFromManifest:function ma(ze){if(!Pe)throw re;return je.getStreamsInfo(ze)},getTracksFor:va,getTracksForTypeFromManifest:function Zl(ze,Pt,_t){if(!Pe)throw re;return(_t=_t||je.getStreamsInfo(Pt,1)[0])?je.getAllMediaInfoForType(_t,ze,Pt):[]},getCurrentTrackFor:function Pf(ze){if(!Pe)throw re;var Pt=et.getActiveStreamInfo();return Ft.getCurrentTrackFor(ze,Pt.id)},setInitialMediaSettingsFor:function un(ze,Pt){if(!He)throw z;Ft.setInitialSettings(ze,Pt)},getInitialMediaSettingsFor:function Io(ze){if(!He)throw z;return Ft.getInitialSettings(ze)},setCurrentTrack:function bf(ze){if(!Pe)throw re;Ft.setTrack(ze)},addABRCustomRule:function it(ze,Pt,_t){Se.addAbrCustomRule(ze,Pt,_t)},removeABRCustomRule:function It(ze){Se.removeAbrCustomRule(ze)},removeAllABRCustomRule:function zt(){Se.removeAllAbrCustomRule()},getABRCustomRules:function Tn(){return Se.getAbrCustomRules()},getAverageThroughput:function xs(ze){var Pt=ft.getThroughputHistory(),_t=Rt.getIsDynamic();return Pt?Pt.getAverageThroughput(ze,_t):0},retrieveManifest:function Fn(ze,Pt){var _t=Oo(),Zt=this;Te.on(X.default.INTERNAL_MANIFEST_LOADED,function or(kr){kr.error?Pt(null,kr.error):Pt(kr.manifest),Te.off(X.default.INTERNAL_MANIFEST_LOADED,or,Zt),_t.reset()},Zt),wt.initialize(ze),_t.load(ze)},addUTCTimingSource:function Gn(ze,Pt){Se.addUTCTimingSource(ze,Pt)},removeUTCTimingSource:function Yn(ze,Pt){Se.removeUTCTimingSource(ze,Pt)},clearDefaultUTCTimingSources:function Wn(){Se.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:yr,setXHRWithCredentialsForType:function Ye(ze,Pt){Se.setXHRWithCredentialsForType(ze,Pt)},getXHRWithCredentialsForType:function st(ze){return Se.getXHRWithCredentialsForType(ze)},getProtectionController:function jn(){return _a()},attachProtectionController:function gm(ze){Ht=ze},setProtectionData:function pm(ze){Le=ze,et&&et.setProtectionData(Le)},registerLicenseRequestFilter:function Wr(ze){Se.registerLicenseRequestFilter(ze)},registerLicenseResponseFilter:function dm(ze){Se.registerLicenseResponseFilter(ze)},unregisterLicenseRequestFilter:function hm(ze){Se.unregisterLicenseRequestFilter(ze)},unregisterLicenseResponseFilter:function Gr(ze){Se.unregisterLicenseResponseFilter(ze)},registerCustomCapabilitiesFilter:function si(ze){Se.registerCustomCapabilitiesFilter(ze)},unregisterCustomCapabilitiesFilter:function ql(ze){Se.unregisterCustomCapabilitiesFilter(ze)},setCustomInitialTrackSelectionFunction:function fm(ze){Se.setCustomInitialTrackSelectionFunction(ze)},resetCustomInitialTrackSelectionFunction:function Fi(){Se.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function Of(ze){if(!Mt.getElement())throw Ie;Mt.setTTMLRenderingDiv(ze)},getCurrentTextTrackIndex:function yn(){var Pt=et.getActiveStreamInfo();if(Pt&&pt)return pt.getCurrentTrackIdx(Pt.id)},provideThumbnail:function _s(ze,Pt){if("function"==typeof Pt){if(ze<0)return void Pt(null);var _t=Rt.getIsDynamic()?In(ze):ze,Zt=et.getStreamForTime(_t);if(null===Zt)return void Pt(null);var mn=Zt.getThumbnailController();return mn?mn.provide(_t,Pt):void Pt(null)}},getDashAdapter:function eu(){return je},getOfflineController:function Ct(){return kn()},getSettings:function Jl(){return ye.get()},updateSettings:function yi(ze){ye.update(ze)},resetSettings:function Us(){ye.reset()},reset:Et,destroy:function tt(){Et(),oe.default.deleteSingletonInstances(G)}},function Vt(){Fe=Ee.getLogger(Ce),He=!1,Ue=!1,Pe=!1,Qe=!0,Ht=null,on=null,Le=null,je=null,ct=null,X.default.extend(K.default),xe=Object(w.default)(G).getInstance(),Se=Object(I.default)(G).getInstance(),Mt=Object(R.default)(G).getInstance(),wt=Object(O.default)(G).getInstance()}(),Ce}U.__dashjs_factory_name="MediaPlayer";var W=oe.default.getClassFactory(U);W.events=K.default,W.errors=J.default,oe.default.updateClassFactory(U.__dashjs_factory_name,W),k.default=W},"./src/streaming/MediaPlayerEvents.js":function(we,k,u){"use strict";function _(h){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function y(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function d(h){var g=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=b(h);if(g){var O=b(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return v(this,x)}}function v(h,g){return!g||"object"!==_(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function b(h){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){y(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).AST_IN_FUTURE="astInFuture",C.BUFFER_EMPTY="bufferStalled",C.BUFFER_LOADED="bufferLoaded",C.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",C.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",C.DYNAMIC_TO_STATIC="dynamicToStatic",C.ERROR="error",C.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",C.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",C.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",C.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",C.LOG="log",C.MANIFEST_LOADED="manifestLoaded",C.METRICS_CHANGED="metricsChanged",C.METRIC_CHANGED="metricChanged",C.METRIC_ADDED="metricAdded",C.METRIC_UPDATED="metricUpdated",C.PERIOD_SWITCH_STARTED="periodSwitchStarted",C.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",C.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",C.QUALITY_CHANGE_RENDERED="qualityChangeRendered",C.TRACK_CHANGE_RENDERED="trackChangeRendered",C.STREAM_INITIALIZING="streamInitializing",C.STREAM_UPDATED="streamUpdated",C.STREAM_ACTIVATED="streamActivated",C.STREAM_DEACTIVATED="streamDeactivated",C.STREAM_INITIALIZED="streamInitialized",C.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",C.TEXT_TRACKS_ADDED="allTextTracksAdded",C.TEXT_TRACK_ADDED="textTrackAdded",C.TTML_PARSED="ttmlParsed",C.TTML_TO_PARSE="ttmlToParse",C.CAPTION_RENDERED="captionRendered",C.CAPTION_CONTAINER_RESIZE="captionContainerResize",C.CAN_PLAY="canPlay",C.CAN_PLAY_THROUGH="canPlayThrough",C.PLAYBACK_ENDED="playbackEnded",C.PLAYBACK_ERROR="playbackError",C.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",C.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",C.PLAYBACK_LOADED_DATA="playbackLoadedData",C.PLAYBACK_PAUSED="playbackPaused",C.PLAYBACK_PLAYING="playbackPlaying",C.PLAYBACK_PROGRESS="playbackProgress",C.PLAYBACK_RATE_CHANGED="playbackRateChanged",C.PLAYBACK_SEEKED="playbackSeeked",C.PLAYBACK_SEEKING="playbackSeeking",C.PLAYBACK_STALLED="playbackStalled",C.PLAYBACK_STARTED="playbackStarted",C.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",C.PLAYBACK_WAITING="playbackWaiting",C.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",C.EVENT_MODE_ON_START="eventModeOnStart",C.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",C.CONFORMANCE_VIOLATION="conformanceViolation",C.REPRESENTATION_SWITCH="representationSwitch",C.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",C}return S}(u("./src/core/events/EventsBase.js").default));k.default=m},"./src/streaming/MediaPlayerFactory.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/MediaPlayer.js");var y,M=function _(){var L,p="application/dash+xml";function b(h,g,S){if(!h||!/^VIDEO$/i.test(h.nodeName))return null;if(h._dashjs_player)return h._dashjs_player;var C,x=h.id||h.name||"video element";if(!(g=g||[].slice.call(h.querySelectorAll("source")).filter(function(O){return O.type==p})[0])&&h.src)(g=document.createElement("source")).src=h.src;else if(!g&&!h.src)return null;return S=S||{},(C=Object(B.default)(S).create()).initialize(h,g.src,h.autoplay),L||(L=C.getDebug().getLogger()),L.debug("Converted "+x+" to dash.js player and added content: "+g.src),h._dashjs_player=C,C}function m(h){return/^VIDEO$/i.test(h.nodeName)?h:m(h.parentNode)}return{create:b,createAll:function F(h,g){var S=[];h=h||"[data-dashjs-player]";for(var C=(g=g||document).querySelectorAll(h),x=0;x<C.length;x++){var O=b(C[x],null);S.push(O)}for(var N=g.querySelectorAll('source[type="'+p+'"]'),w=0;w<N.length;w++){var f=b(m(N[w]),null);S.push(f)}return S}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?M.createAll():y=window.setInterval(function d(){window.dashjs&&(window.clearInterval(y),M.createAll())},500):window.addEventListener("load",function D(){window.removeEventListener("load",D),M.createAll()})),k.default=M},"./src/streaming/SourceBufferSink.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/Debug.js"),_=u("./src/streaming/vo/DashJSError.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/core/errors/Errors.js"),D=u("./src/core/Settings.js"),d=u("./src/streaming/constants/Constants.js"),v=u("./src/streaming/vo/metrics/HTTPRequest.js"),p=u("./src/core/events/Events.js");function m(g){var N,w,P,f,R,V,S=this.context,C=Object(D.default)(S).getInstance(),x=g.textController,O=g.eventBus,Q=[],$=[],J=!1,te=g.mediaSource,X=null;function ee(Ie){return new Promise(function(le){De(function(){f.changeType&&f.changeType(Ie),le()})})}function _e(Ie){return f=x.getTextSourceBuffer(Ie),Promise.resolve()}function ie(){if("function"==typeof f.addEventListener)try{f.addEventListener("updateend",U,!1),f.addEventListener("error",W,!1),f.addEventListener("abort",W,!1)}catch{V=setInterval(U,50)}else V=setInterval(U,50)}function ge(Ie){return new Promise(function(le){f&&C.get().streaming.buffer.useAppendWindow?De(function(){try{if(!f)return void le();var z=te.duration,G=0;Ie&&!isNaN(Ie.start)&&!isNaN(Ie.duration)&&isFinite(Ie.duration)&&(z=Ie.start+Ie.duration),Ie&&!isNaN(Ie.start)&&(G=Ie.start),(f.appendWindowEnd!==z||f.appendWindowStart!==G)&&(f.appendWindowStart=0,f.appendWindowEnd=z+.01,f.appendWindowStart=Math.max(G-.1,0),P.debug("Updated append window for ".concat(R.type,". Set start to ").concat(f.appendWindowStart," and end to ").concat(f.appendWindowEnd))),le()}catch{P.warn("Failed to set append window"),le()}}):le()})}function fe(Ie){return new Promise(function(le){f?De(function(){try{f.timestampOffset!==Ie&&!isNaN(Ie)&&(f.timestampOffset=Ie,P.debug("Set MSE timestamp offset to ".concat(Ie))),le()}catch{le()}}):le()})}function ne(){return new Promise(function(Ie){De(function(){var le=f.appendWindowStart,z=f.appendWindowEnd;f&&(f.abort(),f.appendWindowStart=le,f.appendWindowEnd=z),Ie()})})}function H(){if(!J&&$.length>0){J=!0;var Ie=$[0];$.splice(0,1);var le=function(){J=!1,$.length>0&&H.call(this),Ie&&Ie.data&&Ie.data.segmentType&&Ie.data.segmentType!==v.HTTPRequest.INIT_SEGMENT_TYPE&&delete Ie.data.bytes,Ie.promise.resolve({chunk:Ie.data})};try{X=Ie.request,0===Ie.data.bytes.byteLength?le.call(this):(f.appendBuffer?f.appendBuffer(Ie.data.bytes):f.append(Ie.data.bytes,Ie.data),De(le.bind(this)))}catch(z){P.fatal('SourceBuffer append failed "'+z+'"'),$.length>0?H():J=!1,delete Ie.data.bytes,Ie.promise.reject({chunk:Ie.data,error:new _.default(z.code,z.message)})}}}function I(){Q.length>0&&!f.updating&&(Q.shift()(),I())}function U(){f.updating||I()}function W(Ie){!function re(Ie,le){O.trigger(Ie,le||{},{streamId:R.streamInfo.id,mediaType:w})}(p.default.SOURCE_BUFFER_ERROR,{error:Ie.target||{},lastRequestAppended:X})}function De(Ie){Q.push(Ie),f.updating||I()}return N={getType:function me(){return w},getAllBufferRanges:function se(){try{return f.buffered}catch(Ie){return P.error("getAllBufferRanges exception: "+Ie.message),null}},getBuffer:function de(){return f},append:function ve(Ie){var le=this,z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(G,Te){Ie?($.push({data:Ie,promise:{resolve:G,reject:Te},request:z}),De(H.bind(le))):Te({chunk:Ie,error:new _.default(y.default.APPEND_ERROR_CODE,y.default.APPEND_ERROR_MESSAGE)})})},remove:function Y(Ie){return new Promise(function(le,z){var G=Ie.start,Te=Ie.end;G>=0&&Te>G?De(function(){try{f.remove(G,Te),De(function(){le({from:G,to:Te,unintended:!1}),Ie.resolve&&Ie.resolve()})}catch(ye){z({from:G,to:Te,unintended:!1,error:new _.default(y.default.REMOVE_ERROR_CODE,y.default.REMOVE_ERROR_MESSAGE)}),Ie.reject&&Ie.reject(ye)}}):le()})},abort:function E(){return new Promise(function(Ie){try{$=[],"open"===te.readyState?De(function(){try{f&&f.abort(),Ie()}catch{Ie()}}):(f&&f.setTextTrack&&"ended"===te.readyState&&f.abort(),Ie())}catch{Ie()}})},reset:function ce(){if(f){try{Q=[],function ae(){try{"function"==typeof f.removeEventListener&&(f.removeEventListener("updateend",U,!1),f.removeEventListener("error",W,!1),f.removeEventListener("abort",W,!1)),clearInterval(V)}catch(Ie){P.error(Ie)}}(),J=!1,$=[],(!f.getClassName||"TextSourceBuffer"!==f.getClassName())&&(P.debug("Removing sourcebuffer from media source"),te.removeSourceBuffer(f))}catch{}f=null}X=null},updateTimestampOffset:fe,initializeForStreamSwitch:function oe(Ie,le,z){w=(R=Ie).type;var G=R.codec;(function ue(Ie){f=Ie.getBuffer()})(z),ie();var Te=[];return Te.push(ne),Te.push(ge(R.streamInfo)),Te.push(ee(G)),le&&void 0!==le.MSETimeOffset&&Te.push(fe(le.MSETimeOffset)),Promise.all(Te)},initializeForFirstUse:function pe(Ie,le,z){w=(R=le).type;var G=R.codec;try{if(G.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return _e(Ie);f=te.addSourceBuffer(G),ie();var Te=[];return Te.push(ge(R.streamInfo)),z&&void 0!==z.MSETimeOffset&&Te.push(fe(z.MSETimeOffset)),Promise.all(Te)}catch(ye){return R.type==d.default.TEXT&&!R.isFragmented||-1!==G.indexOf('codecs="stpp')||-1!==G.indexOf('codecs="vtt')?_e(Ie):Promise.reject(ye)}},updateAppendWindow:ge,changeType:ee},function K(){P=Object(B.default)(S).getInstance().getLogger(N)}(),N}m.__dashjs_factory_name="SourceBufferSink";var h=M.default.getClassFactory(m);k.default=h},"./src/streaming/Stream.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/dash/constants/DashConstants.js"),M=u("./src/streaming/StreamProcessor.js"),y=u("./src/streaming/controllers/FragmentController.js"),D=u("./src/streaming/thumbnail/ThumbnailController.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js"),p=u("./src/core/Debug.js"),L=u("./src/core/errors/Errors.js"),b=u("./src/core/FactoryMaker.js"),F=u("./src/streaming/vo/DashJSError.js"),m=u("./src/streaming/utils/BoxParser.js"),h=u("./src/streaming/utils/URLUtils.js"),g=u("./src/streaming/controllers/BlacklistController.js"),S=[B.default.VIDEO,B.default.AUDIO,B.default.TEXT,B.default.MUXED,B.default.IMAGE];function C(x){x=x||{};var ae,ge,fe,ce,de,se,ve,ne,Y,H,E,I,U,W,re,De,Ie,le,O=this.context,N=Object(d.default)(O).getInstance(),w=Object(h.default)(O).getInstance(),P=x.manifestModel,f=x.mediaPlayerModel,R=x.dashMetrics,V=x.manifestUpdater,Q=x.adapter,$=x.timelineConverter,J=x.capabilities,te=x.errHandler,X=x.abrController,K=x.playbackController,oe=x.eventController,ee=x.mediaController,ue=x.protectionController,pe=x.textController,_e=x.videoModel,ie=x.streamInfo,me=x.settings;function Pe(We,ot){return new Promise(function(ht,Lt){pt(),H=!0,$e();var Ut=_e.getElement();S.forEach(function(Ge){(Ge!==B.default.VIDEO||!Ut||Ut&&/^VIDEO$/i.test(Ut.nodeName))&&function Ue(We,ot){var Ge,ht=Q.getAllMediaInfoForType(ie,We),Lt=[],Ut=null;if(ht&&0!==ht.length){We===B.default.VIDEO&&(ve=!0),We===B.default.AUDIO&&(ne=!0);for(var Nt=0,Tt=ht.length;Nt<Tt;Nt++)Ut=ht[Nt],We===B.default.TEXT&&!!Ut.isEmbedded&&(pe.addEmbeddedTrack(ie,Ut),Lt.push(Ut)),Qe(Ut)&&ee.addTrack(Ut);if(Lt.length>0&&(ee.setInitialMediaSettingsForType(We,ie),pe.setInitialSettings(ee.getInitialSettings(We)),pe.addMediaInfosToBuffer(ie,We,Lt)),0!==(ht=ht.filter(function(Mn){return!Mn.isEmbedded})).length){if(We===B.default.IMAGE)return void(I=Object(D.default)(O).create({streamInfo:ie,adapter:Q,baseURLController:x.baseURLController,timelineConverter:x.timelineConverter,debug:De,eventBus:N,events:v.default,dashConstants:_.default,dashMetrics:x.dashMetrics,segmentBaseController:x.segmentBaseController})).initialize();N.trigger(v.default.STREAM_INITIALIZING,{streamInfo:ie,mediaInfo:Ut}),ee.setInitialMediaSettingsForType(We,ie);var nn=function ft(We,ot){var ht=We&&We.length>0?We[0]:null,Lt=E.getModel(ht?ht.type:null),Ut=ht?ht.type:null,Ge=ht?ht.mimeType:null,Nt=ht?ht.isFragmented:null,Tt=Object(M.default)(O).create({streamInfo:ie,type:Ut,mimeType:Ge,timelineConverter:$,adapter:Q,manifestModel:P,mediaPlayerModel:f,fragmentModel:Lt,dashMetrics:x.dashMetrics,baseURLController:x.baseURLController,segmentBaseController:x.segmentBaseController,abrController:X,playbackController:K,mediaController:ee,textController:pe,errHandler:te,settings:me,boxParser:re,segmentBlacklistController:U});Tt.initialize(ot,ve,Nt),fe.push(Tt);for(var nn=0;nn<We.length;nn++)Tt.addMediaInfo(We[nn]);return Ut===B.default.TEXT&&pe.addMediaInfosToBuffer(ie,Ut,We,Lt),Tt}(ht,ot);(Ge=ee.getCurrentTrackFor(We,ie.id))&&(X.updateTopQualityIndex(Ge),nn.selectMediaInfo(We===B.default.TEXT&&Ge.isEmbedded?ht[0]:Ge))}}else ge.info("No "+We+" data.")}(Ge,We)}),function lt(We){return new Promise(function(ot){var ht={},Lt=fe.map(function(Ut){return Ut.createBufferSinks(We)});Promise.all(Lt).then(function(Ut){Ut.forEach(function(Ge){Ge&&(ht[Ge.getType()]=Ge)}),ot(ht)}).catch(function(){ot(ht)})})}(ot).then(function(Ge){if(H=!1,0===fe.length){var Nt="No streams to play.";te.error(new F.default(L.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Nt,P.getValue())),ge.fatal(Nt)}else nt();pe.createTracks(ie),ht(Ge)}).catch(function(Ge){Lt(Ge)})})}function Qe(We){var ot=We?We.type:null;return ot===B.default.MUXED?(ge.fatal("Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),te.error(new F.default(L.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",P.getValue())),!1):!(ot!==B.default.TEXT&&ot!==B.default.IMAGE&&We.contentProtection&&!J.supportsEncryptedMedia()&&(te.error(new F.default(L.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,L.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Dt(We){for(var ot=fe?fe.length:0,Lt=0;Lt<ot;Lt++){var Ut=fe[Lt].getFragmentModel();Ut.abortRequests(),Ut.resetInitialSettings(),fe[Lt].reset(false,We)}pe&&pe.deactivateStream(ie),fe=[],de=!1,se=!1,Qt(!1),xe(!1),N.trigger(v.default.STREAM_DEACTIVATED,{streamInfo:ie})}function Jt(We){Dt(We),ce=!1,ve=!1,ne=!1,Y={},H=!1,Ie=!1,le=[]}function xe(We){Ie=We}function Se(){return ie?ie.start:NaN}function ke(){return ie?ie.id:null}function Ze(){return ie}function pt(){if(!_e||!X)throw new Error(B.default.MISSING_CONFIG_ERROR)}function Rt(We){We.error&&(te.error(We.error),ge.fatal(We.error.message))}function $e(){if(oe){var We=Q.getEventsFor(ie);oe.addInlineEvents(We)}}function nt(){for(var We=fe.length,ht=Y.audio||Y.video?new F.default(L.default.DATA_UPDATE_FAILED_ERROR_CODE,L.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Lt=0;Lt<We;Lt++)if(fe[Lt].isUpdating()||H)return;if(ue){ue.clearMediaInfoArray();for(var Ut=0;Ut<We&&fe[Ut];Ut++){var Ge=fe[Ut].getType(),Nt=fe[Ut].getMediaInfo();if(Ge===B.default.AUDIO||Ge===B.default.VIDEO||Ge===B.default.TEXT&&Nt.isFragmented){var Tt=fe[Ut].getMediaInfo();Tt&&ue.initializeForMedia(Tt)}}}ht?te.error(ht):ce||(ce=!0,_e.waitForReadyState(B.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){N.trigger(v.default.STREAM_INITIALIZED,{streamInfo:ie})}))}function Mt(){var We=Ae(),ot=We.length;if(0!==ot){for(var ht=0;ht<ot;ht++)if(!We[ht].isBufferingCompleted()&&(We[ht].getType()===B.default.AUDIO||We[ht].getType()===B.default.VIDEO))return void ge.debug("onBufferingCompleted - One streamProcessor has finished but",We[ht].getType(),"one is not buffering completed");ge.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),se=!0,N.trigger(v.default.STREAM_BUFFERING_COMPLETED,{streamInfo:ie},{streamInfo:ie})}else ge.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function wt(We){Y[We.mediaType]=We.error,nt()}function an(We){oe&&oe.addInbandEvents(We.events)}function ct(We){return We&&We.type?Vt(We.type):null}function Vt(We){return We?Ae().filter(function(ht){return ht.getType()===We})[0]:null}function Ae(){for(var ot,ht,We=[],Lt=0;Lt<fe.length;Lt++)((ot=(ht=fe[Lt]).getType())===B.default.AUDIO||ot===B.default.VIDEO||ot===B.default.TEXT)&&We.push(ht);return We}function yt(We,ot){var ht=Ze(),Lt=ot.getStreamInfo();if(!Lt||!ht)return!0;var Ut=Q.getAdaptationForType(Lt.index,We,Lt),Ge=Q.getAdaptationForType(ht.index,We,ht);return Ut&&Ge?!(!$t(Ge)&&$t(Ut)):!Ut&&!Ge}function $t(We){return!!We&&!!(We.ContentProtection||We.Representation&&We.Representation.length>0&&We.Representation[0].ContentProtection)}function ln(We,ot){var ht=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!We||!We.hasOwnProperty("getStreamInfo"))return!1;var Lt=We.getStreamInfo(),Ut=ht?ht.getStreamInfo():Ze();if(!Lt||!Ut)return!1;var Ge=Q.getAdaptationForType(Lt.index,ot,Lt),Nt=Q.getAdaptationForType(Ut.index,ot,Ut);if(!Ge||!Nt)return!Ge&&!Nt;var Tt=Ge&&Nt&&Ge.mimeType===Nt.mimeType,nn=Nt.Representation_asArray.map(function(In){return In.codecs}),Mn=Ge.Representation_asArray.map(function(In){return In.codecs}),Ln=Mn.some(function(In){return nn.indexOf(In)>-1}),Kt=Mn.some(function(In){return nn.some(function(pr){return J.codecRootCompatibleWithCodec(pr,In)})});return Ln||Kt&&Tt}function Qt(We){W=We}function Wt(){return W}return ae={initialize:function G(){(function Te(){N.on(v.default.BUFFERING_COMPLETED,Mt,ae),N.on(v.default.DATA_UPDATE_COMPLETED,wt,ae),N.on(v.default.INBAND_EVENTS,an,ae)})(),function Ee(){ue&&(N.on(v.default.KEY_ERROR,Rt,ae),N.on(v.default.SERVER_CERTIFICATE_UPDATED,Rt,ae),N.on(v.default.LICENSE_REQUEST_COMPLETE,Rt,ae),N.on(v.default.KEY_SYSTEM_SELECTED,Rt,ae),N.on(v.default.KEY_SESSION_CREATED,Rt,ae),N.on(v.default.KEY_STATUSES_CHANGED,Rt,ae))}(),pe.initializeForStream(ie),N.trigger(v.default.STREAM_UPDATED,{streamInfo:ie})},getStreamId:function Fe(){return ie?ie.id:null},activate:function Oe(We,ot){return new Promise(function(ht,Lt){if(!de)return Wt()?(de=!0,N.trigger(v.default.STREAM_ACTIVATED,{streamInfo:ie}),void ht(ot)):void function Le(We,ot){return Pe(We,ot)}(We,ot).then(function(Ut){de=!0,N.trigger(v.default.STREAM_ACTIVATED,{streamInfo:ie}),ht(Ut)}).catch(function(Ut){Lt(Ut)});ht(ot)})},deactivate:Dt,getIsActive:function Ft(){return de},getDuration:function on(){return ie?ie.duration:NaN},getStartTime:Se,getId:ke,getStreamInfo:Ze,getHasAudioTrack:function at(){return ne},getHasVideoTrack:function dt(){return ve},startPreloading:function He(We,ot){return new Promise(function(ht,Lt){Wt()?Lt():(ge.info("[startPreloading] Preloading next stream with id ".concat(ke())),Qt(!0),Pe(We,ot).then(function(){for(var Ut=0;Ut<fe.length&&fe[Ut];Ut++)fe[Ut].setExplicitBufferingTime(Se()),fe[Ut].getScheduleController().startScheduleTimer();ht()}).catch(function(){Qt(!1),Lt()}))})},getThumbnailController:function et(){return I},getBitrateListFor:function jt(We){if(pt(),We===B.default.IMAGE)return I?I.getBitrateList():[];var ot=function Ot(We){for(var ot=null,ht=0;ht<fe.length;ht++)if((ot=fe[ht]).getType()===We)return ot.getMediaInfo();return null}(We);return X.getBitrateList(ot)},updateData:function Et(We){return new Promise(function(ot){H=!0,ie=We,oe&&$e();for(var ht=[],Lt=0,Ut=fe.length;Lt<Ut;Lt++){var Ge=fe[Lt],Nt=Ge.getMediaInfo();ht.push(Ge.updateStreamInfo(ie));var Tt=Q.getAllMediaInfoForType(ie,Ge.getType());if(Tt){Ge.clearMediaInfoArray();for(var nn=0;nn<Tt.length;nn++){var Mn=Tt[nn];Ge.addMediaInfo(Tt[nn]),Q.areMediaInfosEqual(Nt,Mn)&&(X.updateTopQualityIndex(Mn),ht.push(Ge.selectMediaInfo(Mn)))}}}Promise.all(ht).then(function(){for(ht=[];le.length>0;){var Ln=le.pop(),Kt=Ln.newMediaInfo,In=ct(Ln.oldMediaInfo);if(!In)return;ht.push(In.prepareTrackSwitch()),In.selectMediaInfo(Kt)}return Promise.all(ht)}).then(function(){H=!1,nt(),N.trigger(v.default.STREAM_UPDATED,{streamInfo:ie}),ot()})})},reset:function sn(We){E&&(E.reset(),E=null),X&&ie&&X.clearDataForStream(ie.id),U&&(U.reset(),U=null),Jt(We),ie=null,function ye(){N.off(v.default.DATA_UPDATE_COMPLETED,wt,ae),N.off(v.default.BUFFERING_COMPLETED,Mt,ae),N.off(v.default.INBAND_EVENTS,an,ae)}(),function Ce(){ue&&(N.off(v.default.KEY_ERROR,Rt,ae),N.off(v.default.SERVER_CERTIFICATE_UPDATED,Rt,ae),N.off(v.default.LICENSE_REQUEST_COMPLETE,Rt,ae),N.off(v.default.KEY_SYSTEM_SELECTED,Rt,ae),N.off(v.default.KEY_SESSION_CREATED,Rt,ae),N.off(v.default.KEY_STATUSES_CHANGED,Rt,ae))}()},getProcessors:Ae,setMediaSource:function Ht(We){for(var ot=0;ot<fe.length;)Qe(fe[ot].getMediaInfo())?(fe[ot].setMediaSource(We),ot++):(fe[ot].reset(),fe.splice(ot,1));if(0===fe.length){var ht="No streams to play.";te.error(new F.default(L.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,ht+"nostreams",P.getValue())),ge.fatal(ht)}},isMediaCodecCompatible:function tt(We){var ot=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return ln(We,B.default.VIDEO,ot)&&ln(We,B.default.AUDIO,ot)},isProtectionCompatible:function rt(We){return!We||yt(B.default.VIDEO,We)&&yt(B.default.AUDIO,We)},getPreloaded:Wt,getIsEndedEventSignaled:function je(){return Ie},setIsEndedEventSignaled:xe,getAdapter:function ut(){return Q},getHasFinishedBuffering:function Je(){return se},setPreloaded:Qt,startScheduleControllers:function Xe(){for(var We=fe.length,ot=0;ot<We&&fe[ot];ot++)fe[ot].getScheduleController().startScheduleTimer()},prepareTrackChange:function Yt(We){if(de&&ie){se=!1;var ot=We.newMediaInfo,ht=P.getValue();Q.setCurrentMediaInfo(ie.id,ot.type,ot);var Lt=ct(ot);if(Lt){var Ut=K.getTime();ge.info("Stream -  Process track changed at current time "+Ut),ht.refreshManifestOnSwitchTrack?(le.push(We),V.getIsUpdating()||(ge.debug("Stream -  Refreshing manifest for switch track"),V.refreshManifest())):Lt.selectMediaInfo(ot).then(function(){(ot.type===B.default.VIDEO||ot.type===B.default.AUDIO)&&X.updateTopQualityIndex(ot),Lt.prepareTrackSwitch()})}}},prepareQualityChange:function Be(We){var ot=Vt(We.mediaType);ot&&ot.prepareQualityChange(We)}},function z(){try{De=Object(p.default)(O).getInstance(),ge=De.getLogger(ae),Jt(),re=Object(m.default)(O).getInstance(),U=Object(g.default)(O).create({updateEventName:v.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:v.default.SEGMENT_LOCATION_BLACKLIST_ADD}),E=Object(y.default)(O).create({streamInfo:ie,mediaPlayerModel:f,dashMetrics:R,errHandler:te,settings:me,boxParser:re,dashConstants:_.default,urlUtils:w})}catch(We){throw We}}(),ae}C.__dashjs_factory_name="Stream",k.default=b.default.getClassFactory(C)},"./src/streaming/StreamProcessor.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/dash/constants/DashConstants.js"),M=u("./src/streaming/constants/MetricsConstants.js"),y=u("./src/streaming/models/FragmentModel.js"),D=u("./src/streaming/controllers/BufferController.js"),d=u("./src/streaming/text/NotFragmentedTextBufferController.js"),v=u("./src/streaming/controllers/ScheduleController.js"),p=u("./src/dash/controllers/RepresentationController.js"),L=u("./src/core/FactoryMaker.js"),b=u("./src/streaming/utils/SupervisorTools.js"),F=u("./src/core/EventBus.js"),m=u("./src/core/events/Events.js"),h=u("./src/dash/DashHandler.js"),g=u("./src/core/errors/Errors.js"),S=u("./src/streaming/vo/DashJSError.js"),C=u("./src/core/Debug.js"),x=u("./src/streaming/utils/RequestModifier.js"),O=u("./src/streaming/utils/URLUtils.js"),N=u("./src/streaming/utils/BoxParser.js"),w=u("./src/streaming/vo/metrics/PlayList.js"),P=u("./src/dash/controllers/SegmentsController.js"),f=u("./src/streaming/vo/metrics/HTTPRequest.js");function R(V){V=V||{};var ve,ne,Y,H,E,I,U,W,re,De,Ie,le,z,Q=this.context,$=Object(F.default)(Q).getInstance(),J=V.streamInfo,te=V.type,X=V.errHandler,K=V.mimeType,oe=V.timelineConverter,ee=V.adapter,ue=V.manifestModel,pe=V.mediaPlayerModel,_e=V.fragmentModel,ie=V.abrController,me=V.playbackController,ae=V.mediaController,ge=V.textController,fe=V.dashMetrics,ce=V.settings,de=V.boxParser,se=V.segmentBlacklistController;function ye(){return J.id}function Ee(){return te}function Ce(){return ee.getIsTextTrack(W.getData())}function Fe(){E=[],H=null,z=0,re=!1,De=!1}function Ue(Ge){var Nt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Ge.sender){if(me.getIsManifestUpdateInProgress())return void Ht();if((!Ce()||ge.isTextEnabled())&&I&&Ge.representationId&&!I.appendInitSegmentFromCache(Ge.representationId)){var Tt=W.getCurrentRepresentation();if(0===Tt.range)return void Qe();var nn=Ie?Ie.getInitRequest(H,Tt):null;nn?_e.executeRequest(nn):Nt&&(U.setInitSegmentRequired(!0),Ht())}}}function Qe(Ge){var Nt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(me.getIsManifestUpdateInProgress()||I.getIsPruningInProgress())Ht();else{var Tt=Ft();Tt?(re=!1,ft(Tt)):lt(Nt)}}function ft(Ge){isNaN(Ge.startTime+Ge.duration)||(z=Ge.startTime+Ge.duration),Ge.delayLoadingTime=(new Date).getTime()+U.getTimeToLoadDelay(),U.setTimeToLoadDelay(0),function Dt(Ge){var Nt=Ge.url;return Ge.range&&(Nt=Nt.concat("_",Ge.range)),se.contains(Nt)}(Ge)?(ne.warn("Fragment request url ".concat(Ge.url," for stream id ").concat(J.id," and media type ").concat(te," is on the ignore list and will be skipped")),Ht()):(ne.debug("Next fragment request url for stream id ".concat(J.id," and media type ").concat(te," is ").concat(Ge.url)),_e.executeRequest(Ge))}function lt(Ge){var Tt,Nt=W.getCurrentRepresentation();if(!ce.get().streaming.gaps.enableSeekFix||!re&&0!==me.getTime()||(Y?Y&&Nt.segmentInfoType===_.default.SEGMENT_TIMELINE&&(Tt=Ie.getValidTimeAheadOfTargetTime(z,H,Nt,ce.get().streaming.gaps.threshold)):Tt=Ie.getValidTimeAheadOfTargetTime(z,H,Nt,ce.get().streaming.gaps.threshold),isNaN(Tt)||Tt===z)){if(Ie.isLastSegmentRequested(Nt,z)){var Mn=Ie.getCurrentIndex();return ne.debug("Segment requesting for stream ".concat(J.id," has finished")),$.trigger(m.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:Mn},{streamId:J.id,mediaType:te}),I.segmentRequestingCompleted(Mn),void U.clearScheduleTimer()}Ge&&Ht()}else me.isSeeking()||0===me.getTime()?(ne.warn("Adjusting playback time ".concat(Tt," because of gap in the manifest. Seeking by ").concat(Tt-z)),me.seek(Tt,!1,!1)):(ne.warn("Adjusting buffering time ".concat(Tt," because of gap in the manifest. Adjusting time by ").concat(Tt-z)),Lt(Tt),Ge&&Ht())}function Ft(){var Nt,Ge=tt();if(isNaN(z)||Ee()===B.default.TEXT&&!ge.isTextEnabled())return null;var Tt=re;if(Ie){var nn=W&&Ge?W.getRepresentationForQuality(Ge.quality):null;Nt=Tt?Ie.getSegmentRequestForTime(H,nn,z):Ie.getNextSegmentRequest(H,nn)}return Nt}function Ht(){U.startScheduleTimer(me.getLowLatencyModeEnabled()?ce.get().streaming.scheduling.lowLatencyTimeout:ce.get().streaming.scheduling.defaultTimeout)}function Jt(Ge){Ge.error||(U.setCurrentRepresentation(ee.convertRepresentationToRepresentationInfo(Ge.currentRepresentation)),I.getIsBufferingCompleted()||I.updateBufferTimestampOffset(Ge.currentRepresentation))}function sn(Ge){fe.addBufferState(te,Ge.state,U.getBufferTarget()),Ge.state===M.default.BUFFER_EMPTY&&!me.isSeeking()&&(ne.info("Buffer is empty! Stalling!"),fe.pushPlayListTraceMetrics(new Date,w.PlayListTrace.REBUFFERING_REASON))}function on(Ge){_e.syncExecutedRequestsWithBufferedRange(I.getBuffer().getAllBufferRanges(),J.duration),Ge.quotaExceeded&&Ge.from>me.getTime()&&Lt(Ge.from),Ge.hasEnoughSpaceToAppend&&Ge.quotaExceeded&&U.startScheduleTimer()}function je(Ge){if(Ge&&Ge.lastRequestAppended&&Ge.lastRequestAppended.url){var Nt=Ge.lastRequestAppended.url;Ge.lastRequestAppended.range&&(Nt=Nt.concat("_",Ge.lastRequestAppended.range)),ne.warn("Blacklisting segment with url ".concat(Nt)),se.add(Nt)}}function Ze(){We(),De=!1}function at(Ge){ne.info("onFragmentLoadingAbandoned request: "+Ge.request.url+" has been aborted"),!me.isSeeking()&&!U.getSwitchStrack()&&!De&&(ne.info("onFragmentLoadingAbandoned request: "+Ge.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ge.request&&Ge.request.isInitializationRequest()?U.setInitSegmentRequired(!0):Lt(Ge.request.startTime+Ge.request.duration/2),U.startScheduleTimer(0))}function dt(Ge){ne.info("OnFragmentLoadingCompleted for stream id "+J.id+" and media type "+te+" - Url:",Ge.request?Ge.request.url:"undefined",Ge.request.range?", Range:"+Ge.request.range:""),Ce()&&U.startScheduleTimer(0),Ge.error&&Ge.request.serviceLocation&&function et(Ge){ne.info("Fragment loading completed with an error"),Ge&&Ge.request&&Ge.request.type&&(Ge.request.type===f.HTTPRequest.INIT_SEGMENT_TYPE?Ue({representationId:Ge.request.representationId,sender:{}},!1):Ge.request.type===f.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Lt(Ge.request.startTime+Ge.request.duration/2),Qe({},!1)))}(Ge)}function pt(){Lt(me.getTime()),Et().startScheduleTimer()}function jt(Ge){var Nt=Ge.currentTrackInfo;if(Nt){var Tt=E.find(function(nn){return nn.index===Nt.index&&nn.lang===Nt.lang});Tt&&wt(Tt).then(function(){I.setIsBufferingCompleted(!1),Lt(me.getTime()),U.setInitSegmentRequired(!0),U.startScheduleTimer()})}}function Rt(Ge){Lt(Ge.quotaExceededTime),U.clearScheduleTimer()}function Be(){return I?I.getBuffer():null}function wt(Ge){Ge!==H&&(!Ge||!H||Ge.type===H.type)&&(H=Ge);var Nt=ee.getRealAdaptation(J,H),Tt=ee.getVoRepresentations(H);if(W){var Kt,nn=W.getData(),Mn=ie.getMaxAllowedIndexFor(te,J.id),Ln=ie.getMinAllowedIndexFor(te,J.id),pr=null;return null!==nn&&nn.id===Nt.id||te===B.default.TEXT?Kt=ie.getQualityFor(te,J.id):(pr=ie.getThroughputHistory().getAverageThroughput(te,Y)||ie.getInitialBitrateFor(te,J.id),Kt=ie.getQualityForBitrate(H,pr,J.id)),void 0!==Ln&&Kt<Ln&&(Kt=Ln),Kt>Mn&&(Kt=Mn),W.updateData(Nt,Tt,te,H.isFragmented,Kt)}return Promise.resolve()}function Et(){return U}function tt(Ge){var Nt;return void 0!==Ge?(Object(b.checkInteger)(Ge),Nt=W?W.getRepresentationForQuality(Ge):null):Nt=W?W.getCurrentRepresentation():null,ee.convertRepresentationToRepresentationInfo(Nt)}function rt(){return!!I&&I.getIsBufferingCompleted()}function ln(Ge){var Nt=Ge.chunk,Tt=Nt.bytes,nn=Nt.quality,Mn=tt(nn),Ln=W&&Mn?W.getRepresentationForQuality(Mn.quality):null;if(Mn&&Ln){var Kt=ee.getEventsFor(Mn.mediaInfo),In=ee.getEventsFor(Mn,Ln);if(Kt&&Kt.length>0||In&&In.length>0){var At=function Qt(Ge,Nt,Tt,nn){try{for(var Mn={},Ln=[],Kt=Tt.concat(nn),In=0,pr=Kt.length;In<pr;In++)Mn[Kt[In].schemeIdUri+"/"+Kt[In].value]=Kt[In];var At=Object(N.default)(Q).getInstance().parse(Ge),Kn=At.getBoxes("emsg");if(!Kn||0===Kn.length)return Ln;for(var rn=At.getBox("sidx"),Dn=!rn||isNaN(rn.earliest_presentation_time)||isNaN(rn.timescale)?Nt&&!isNaN(Nt.mediaStartTime)?Nt.mediaStartTime:0:rn.earliest_presentation_time/rn.timescale,Ei=Math.max(Dn,0),Ur=W.getCurrentRepresentation(),_i=0,ii=Kn.length;_i<ii;_i++){var Me=ee.getEvent(Kn[_i],Mn,Ei,Ur);Me&&Ln.push(Me)}return Ln}catch{return[]}}(Tt,_e.getRequests({state:y.default.FRAGMENT_MODEL_EXECUTED,quality:nn,index:Nt.index})[0],Kt,In);$.trigger(m.default.INBAND_EVENTS,{events:At},{streamId:J.id})}}}function ut(){var Ge=me.getTime();ce.get().streaming.buffer.flushBufferAtTrackSwitch&&me.seek(Ge+.001,!1,!0),Lt(Ge),I.setSeekTarget(Ge),U.startScheduleTimer()}function We(){var Ge=me.getTime(),Nt=I.getContinuousBufferTimeForTargetTime(Ge);Lt(isNaN(Nt)?Ge:Nt),U.startScheduleTimer()}function ht(Ge){Ge&&!isNaN(Ge.time)&&(Lt(Ge.time),I.setSeekTarget(Ge.time))}function Lt(Ge){z=Ge,re=!0}return ve={initialize:function Te(Ge,Nt,Tt){le=Object(P.default)(Q).create({events:m.default,eventBus:$,streamInfo:J,timelineConverter:oe,dashConstants:_.default,segmentBaseController:V.segmentBaseController,type:te}),(Ie=Object(h.default)(Q).create({streamInfo:J,type:te,timelineConverter:oe,dashMetrics:fe,mediaPlayerModel:pe,baseURLController:V.baseURLController,errHandler:X,segmentsController:le,settings:ce,boxParser:de,events:m.default,eventBus:$,errors:g.default,debug:Object(C.default)(Q).getInstance(),requestModifier:Object(x.default)(Q).getInstance(),dashConstants:_.default,constants:B.default,urlUtils:Object(O.default)(Q).getInstance()})).initialize(Y=J.manifestInfo.isDynamic),ie.registerStreamType(te,ve),W=Object(p.default)(Q).create({streamInfo:J,type:te,abrController:ie,dashMetrics:fe,playbackController:me,timelineConverter:oe,dashConstants:_.default,events:m.default,eventBus:$,errors:g.default,isDynamic:Y,segmentsController:le}),(I=function ot(Ge,Nt){return Ge?Ge!==B.default.TEXT||Nt?Object(D.default)(Q).create({streamInfo:J,type:Ge,mediaPlayerModel:pe,manifestModel:ue,fragmentModel:_e,errHandler:X,mediaController:ae,representationController:W,adapter:ee,textController:ge,abrController:ie,playbackController:me,settings:ce}):Object(d.default)(Q).create({streamInfo:J,type:Ge,mimeType:K,fragmentModel:_e,textController:ge,errHandler:X,settings:ce}):(X.error(new S.default(g.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,g.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(te,Tt))&&I.initialize(Ge),(U=Object(v.default)(Q).create({streamInfo:J,type:te,mimeType:K,adapter:ee,dashMetrics:fe,mediaPlayerModel:pe,fragmentModel:_e,abrController:ie,playbackController:me,textController:ge,mediaController:ae,bufferController:I,settings:ce})).initialize(Nt),z=0,re=!1},getStreamId:ye,getType:Ee,isUpdating:function Le(){return!!W&&W.isUpdating()},getBufferController:function $e(){return I},getFragmentModel:function nt(){return _e},getScheduleController:Et,getRepresentationController:function Yt(){return W},getRepresentationInfo:tt,getBufferLevel:function yt(){return I?I.getBufferLevel():0},isBufferingCompleted:rt,createBufferSinks:function Wt(Ge){var Nt=Be();return Nt?Promise.resolve(Nt):I?I.createBufferSink(H,Ge):Promise.resolve(null)},updateStreamInfo:function Ot(Ge){return J=Ge,rt()?Promise.resolve():I.updateAppendWindow()},getStreamInfo:function Mt(){return J},selectMediaInfo:wt,clearMediaInfoArray:function ct(){E=[]},addMediaInfo:function an(Ge){-1===E.indexOf(Ge)&&E.push(Ge)},prepareTrackSwitch:function Je(){return new Promise(function(Ge){ne.debug("Preparing track switch for type ".concat(te));var Nt=te===B.default.TEXT||ce.get().streaming.trackSwitchMode[te]===B.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&me.getTimeToStreamEnd(J)>ce.get().streaming.buffer.stallThreshold;if(I.getIsBufferingCompleted()&&!Nt)return I.prepareForNonReplacementTrackSwitch(H.codec).then(function(){$.trigger(m.default.BUFFERING_COMPLETED,{},{streamId:J.id,mediaType:te})}).catch(function(){$.trigger(m.default.BUFFERING_COMPLETED,{},{streamId:J.id,mediaType:te})}),void Ge();U.clearScheduleTimer(),U.setSwitchTrack(!0),Nt?($.trigger(m.default.BUFFER_REPLACEMENT_STARTED,{mediaType:te,streamId:J.id},{mediaType:te,streamId:J.id}),_e.abortRequests(),I.prepareForReplacementTrackSwitch(H.codec).then(function(){var Tt=tt();return I.updateBufferTimestampOffset(Tt)}).then(function(){ut(),Ge()}).catch(function(){ut(),Ge()})):I.prepareForNonReplacementTrackSwitch(H.codec).then(function(){We(),Ge()}).catch(function(){We(),Ge()})})},prepareQualityChange:function xe(Ge){ne.debug("Preparing quality switch for type ".concat(te));var Nt=Ge.newQuality;De=!0,U.clearScheduleTimer();var Tt=tt(Nt);U.setCurrentRepresentation(Tt),W.prepareQualityChange(Nt),_e.abortRequests(),I.updateBufferTimestampOffset(Tt).then(function(){Ge.reason&&Ge.reason.forceReplace?function Se(){$.trigger(m.default.BUFFER_REPLACEMENT_STARTED,{mediaType:te,streamId:J.id},{mediaType:te,streamId:J.id}),I.prepareForReplacementQualitySwitch().then(function(){ut(),De=!1}).catch(function(){ut(),De=!1})}():ce.get().streaming.buffer.fastSwitchEnabled?function ke(Ge){var Nt=me.getTime(),Tt=1.5,nn=_e.getRequests({state:y.default.FRAGMENT_MODEL_EXECUTED,time:Nt+Tt,threshold:0})[0];if(nn&&!Ce()){var Mn=I.getBufferLevel(),Ln=ie.getAbandonmentStateFor(J.id,te);nn.quality<Ge.quality&&Mn>=Tt&&Ln!==M.default.ABANDON_LOAD?(Lt(Nt+Tt),U.setCheckPlaybackQuality(!1),U.startScheduleTimer()):Ze()}else U.startScheduleTimer();De=!1}(Tt):Ze(),fe.pushPlayListTraceMetrics(new Date,w.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),fe.createPlaylistTraceMetrics(Tt.id,1e3*me.getTime(),me.getPlaybackRate())})},getMediaInfo:function Vt(){return H},getMediaSource:function Ae(){return I.getMediaSource()},setMediaSource:function Xe(Ge){I.setMediaSource(Ge)},getBuffer:Be,setExplicitBufferingTime:Lt,finalisePlayList:function Ut(Ge,Nt){fe.pushPlayListTraceMetrics(Ge,Nt)},probeNextRequest:function $t(){var Ge=tt(),Nt=W&&Ge?W.getRepresentationForQuality(Ge.quality):null;return Ie.getNextSegmentRequestIdempotent(H,Nt)},prepareInnerPeriodPlaybackSeeking:function He(Ge){return new Promise(function(Nt){U.clearScheduleTimer(),_e.abortRequests(),I.prepareForPlaybackSeek().then(function(){var Tt=I.getAllRangesWithSafetyFactor(Ge.seekTime);return I.clearBuffers(Tt)}).then(function(){var Tt=I.getContinuousBufferTimeForTargetTime(Ge.seekTime);if(!isNaN(Tt)&&!isNaN(J.duration)&&isFinite(J.duration)&&Tt>=J.start+J.duration)I.setIsBufferingCompleted(!0),Nt();else{var nn=isNaN(Tt)?Ge.seekTime:Tt;Lt(nn),I.setSeekTarget(nn);var Mn=[];Mn.push(I.updateAppendWindow());var Ln=tt();Mn.push(I.updateBufferTimestampOffset(Ln)),Promise.all(Mn).then(function(){U.setInitSegmentRequired(!0),U.setCheckPlaybackQuality(!1),U.startScheduleTimer(),Nt()})}}).catch(function(Tt){ne.error(Tt)})})},prepareOuterPeriodPlaybackSeeking:function Pe(){return new Promise(function(Ge,Nt){try{U.clearScheduleTimer(),_e.abortRequests(),I.prepareForPlaybackSeek().then(function(){return I.pruneAllSafely()}).then(function(){Ge()})}catch(Tt){Nt(Tt)}})},reset:function Oe(Ge,Nt){Ie&&Ie.reset(),I&&(I.reset(Ge,Nt),I=null),U&&(U.reset(),U=null),W&&(W.reset(),W=null),le&&(le=null),ie&&ie.unRegisterStreamType(ye(),te),$.off(m.default.DATA_UPDATE_COMPLETED,Jt,ve),$.off(m.default.INIT_FRAGMENT_NEEDED,Ue,ve),$.off(m.default.MEDIA_FRAGMENT_NEEDED,Qe,ve),$.off(m.default.MEDIA_FRAGMENT_LOADED,ln,ve),$.off(m.default.BUFFER_LEVEL_STATE_CHANGED,sn,ve),$.off(m.default.BUFFER_CLEARED,on,ve),$.off(m.default.SEEK_TARGET,ht,ve),$.off(m.default.FRAGMENT_LOADING_ABANDONED,at,ve),$.off(m.default.FRAGMENT_LOADING_COMPLETED,dt,ve),$.off(m.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,pt,ve),$.off(m.default.SET_NON_FRAGMENTED_TEXT,jt,ve),$.off(m.default.QUOTA_EXCEEDED,Rt,ve),$.off(m.default.SOURCE_BUFFER_ERROR,je,ve),Fe(),te=null,J=null}},function G(){ne=Object(C.default)(Q).getInstance().getLogger(ve),Fe(),$.on(m.default.DATA_UPDATE_COMPLETED,Jt,ve,{priority:F.default.EVENT_PRIORITY_HIGH}),$.on(m.default.INIT_FRAGMENT_NEEDED,Ue,ve),$.on(m.default.MEDIA_FRAGMENT_NEEDED,Qe,ve),$.on(m.default.MEDIA_FRAGMENT_LOADED,ln,ve),$.on(m.default.BUFFER_LEVEL_STATE_CHANGED,sn,ve),$.on(m.default.BUFFER_CLEARED,on,ve),$.on(m.default.SEEK_TARGET,ht,ve),$.on(m.default.FRAGMENT_LOADING_ABANDONED,at,ve),$.on(m.default.FRAGMENT_LOADING_COMPLETED,dt,ve),$.on(m.default.QUOTA_EXCEEDED,Rt,ve),$.on(m.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,pt,ve),$.on(m.default.SET_NON_FRAGMENTED_TEXT,jt,ve),$.on(m.default.SOURCE_BUFFER_ERROR,je,ve)}(),ve}R.__dashjs_factory_name="StreamProcessor",k.default=L.default.getClassFactory(R)},"./src/streaming/XlinkLoader.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/vo/DashJSError.js"),_=u("./src/streaming/net/URLLoader.js"),M=u("./src/streaming/vo/metrics/HTTPRequest.js"),y=u("./src/streaming/vo/TextRequest.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/core/errors/Errors.js");function L(b){b=b||{};var m=this.context,h=Object(D.default)(m).getInstance(),g=Object(_.default)(m).create({errHandler:b.errHandler,dashMetrics:b.dashMetrics,mediaPlayerModel:b.mediaPlayerModel,requestModifier:b.requestModifier,errors:p.default});return{load:function C(O,N,w){var P=function(V,Q){N.resolved=!0,N.resolvedContent=V||null,h.trigger(d.default.XLINK_ELEMENT_LOADED,{element:N,resolveObject:w,error:V||Q?null:new B.default(p.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,p.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+O)})};if("urn:mpeg:dash:resolve-to-zero:2013"===O)P(null,!0);else{var f=new y.default(O,M.HTTPRequest.XLINK_EXPANSION_TYPE);g.load({request:f,success:function(V){P(V)},error:function(){P(null)}})}},reset:function x(){g&&(g.abort(),g=null)}}}L.__dashjs_factory_name="XlinkLoader",k.default=v.default.getClassFactory(L)},"./src/streaming/constants/ConformanceViolationConstants.js":function(we,k,u){"use strict";u.r(k),k.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(we,k,u){"use strict";function _(d,v){for(var p=0;p<v.length;p++){var L=v[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,L.key,L)}}u.r(k);var D=new(function(){function d(){(function B(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.init()}return function M(d,v,p){return v&&_(d.prototype,v),p&&_(d,p),d}(d,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}]),d}());k.default=D},"./src/streaming/constants/MetricsConstants.js":function(we,k,u){"use strict";function _(d,v){for(var p=0;p<v.length;p++){var L=v[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,L.key,L)}}u.r(k);var D=new(function(){function d(){(function B(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.init()}return function M(d,v,p){return v&&_(d.prototype,v),p&&_(d,p),d}(d,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}]),d}());k.default=D},"./src/streaming/constants/ProtectionConstants.js":function(we,k,u){"use strict";function _(d,v){for(var p=0;p<v.length;p++){var L=v[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,L.key,L)}}u.r(k);var D=new(function(){function d(){(function B(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.init()}return function M(d,v,p){return v&&_(d.prototype,v),p&&_(d,p),d}(d,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}]),d}());k.default=D},"./src/streaming/controllers/AbrController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/rules/abr/ABRRulesCollection.js"),_=u("./src/streaming/constants/Constants.js"),M=u("./src/streaming/constants/MetricsConstants.js"),y=u("./src/streaming/vo/BitrateInfo.js"),D=u("./src/streaming/models/FragmentModel.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js"),p=u("./src/core/FactoryMaker.js"),L=u("./src/streaming/rules/RulesContext.js"),b=u("./src/streaming/rules/SwitchRequest.js"),F=u("./src/streaming/rules/SwitchRequestHistory.js"),m=u("./src/streaming/rules/DroppedFramesHistory.js"),h=u("./src/streaming/rules/ThroughputHistory.js"),g=u("./src/core/Debug.js"),S=u("./src/streaming/vo/metrics/HTTPRequest.js"),C=u("./src/streaming/utils/SupervisorTools.js"),x=u("./src/streaming/MediaPlayerEvents.js");function P(){var $,J,te,X,K,oe,ee,ue,pe,_e,ie,me,ae,ge,fe,ce,de,se,ve,ne,Y,H,E,I,U,W,R=this.context,V=Object(g.default)(R).getInstance(),Q=Object(d.default)(R).getInstance();function G(){K={},oe={},ue={},ee={},ve={},H={},E={},I={},void 0===_e&&(_e=!1),ne&&ne.reset(),se=void 0,ne=void 0,Y=void 0,clearTimeout(pe),pe=null}function Ce(Be){var $e=Be.request.mediaType,nt=Be.streamId;if($e&&nt&&ee[nt]&&W.get().streaming.abr.autoSwitchBitrate[$e]){var Ot=ee[nt][$e];if(Ot){var Mt=Object(L.default)(R).create({abrController:$,streamProcessor:Ot,currentRequest:Be.request,useBufferOccupancyABR:H[$e],useL2AABR:E[$e],useLoLPABR:I[$e],videoModel:ge}),wt=te.shouldAbandonFragment(Mt,nt);if(wt.quality>b.default.NO_CHANGE){var an=Ot.getFragmentModel();an.getRequests({state:D.default.FRAGMENT_MODEL_LOADING,index:Be.request.index})[0]&&(an.abortRequests(),ue[nt][$e].state=M.default.ABANDON_LOAD,ve[nt][$e].reset(),ve[nt][$e].push({oldValue:Jt($e,nt),newValue:wt.quality,confidence:1,reason:wt.reason}),sn($e,X.getActiveStreamInfo(),wt.quality,wt.reason),clearTimeout(pe),pe=setTimeout(function(){ue[nt][$e].state=M.default.ALLOW_LOAD,pe=null},W.get().streaming.abandonLoadTimeout))}}}}function Fe(Be){Be.mediaType===_.default.VIDEO&&(void 0!==se&&ne.push(Be.streamId,se,ge.getPlaybackQuality()),se=Be.newQuality)}function Oe(Be){Be.metric===M.default.HTTP_REQUEST&&Be.value&&Be.value.type===S.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Be.mediaType===_.default.AUDIO||Be.mediaType===_.default.VIDEO)&&Y.push(Be.mediaType,Be.value,W.get().streaming.abr.useDeadTimeLatency),Be.metric===M.default.BUFFER_LEVEL&&(Be.mediaType===_.default.AUDIO||Be.mediaType===_.default.VIDEO)&&function Ze(Be,$e){W.get().streaming.abr.ABRStrategy===_.default.ABR_STRATEGY_DYNAMIC&&function at(Be,$e){try{var nt=fe.getStableBufferTime(),wt=H[Be],an=$e>(wt?.5*nt:nt);H[Be]=an,an!==wt&&J.info(an?"["+Be+"] switching from throughput to buffer occupancy ABR rule (buffer: "+$e.toFixed(3)+").":"["+Be+"] switching from buffer occupancy to throughput ABR rule (buffer: "+$e.toFixed(3)+").")}catch(ct){J.error(ct)}}(Be,$e)}(Be.mediaType,.001*Be.value.level)}function Le(Be,$e){try{return K[$e]=K[$e]||{},K[$e].hasOwnProperty(Be)||(K[$e][Be]=0),function lt(Be,$e,nt){if($e!==_.default.VIDEO||!W.get().streaming.abr.limitBitrateByPortal||!ee[nt]||!ee[nt][$e])return Be;_e||Rt();var Ot=ee[nt][$e].getStreamInfo(),Mt=ae.getAdaptationForType(Ot.index,$e,Ot).Representation,wt=Be;if(ie>0&&me>0){for(;wt>0&&Mt[wt]&&ie<Mt[wt].width&&ie-Mt[wt-1].width<Mt[wt].width-ie;)wt-=1;for(;wt<Mt.length-1&&Mt[wt].width===Mt[wt+1].width;)wt+=1}return wt}(function ft(Be,$e,nt){var Ot=K[nt][$e],Mt=W.get().streaming.abr.maxRepresentationRatio[$e];return isNaN(Mt)||Mt>=1||Mt<0?Be:Math.min(Be,Math.round(Ot*Mt))}(function Qe(Be,$e){var nt=K[$e][Be],Ot=nt;if(!ee[$e]||!ee[$e][Be])return Ot;var Mt=He(Be,$e);void 0!==Mt&&(Ot=Math.max(nt,Mt));var wt=function Pe(Be,$e){try{var nt=fe.getAbrBitrateParameter("maxBitrate",Be);return nt>-1?Se(ee[$e][Be].getMediaInfo(),nt,$e):void 0}catch{return}}(Be,$e);return void 0!==wt&&(Ot=Math.min(Ot,wt)),Ot}(Be,$e),Be,$e),Be,$e)}catch{return}}function He(Be,$e){try{return function Ue(Be,$e){try{var nt=fe.getAbrBitrateParameter("minBitrate",Be);if(nt>-1){var Ot=ee[$e][Be].getMediaInfo(),Mt=ke(Ot),wt=Se(Ot,nt,$e);return Mt[wt]&&wt<Mt.length-1&&Mt[wt].bitrate<1e3*nt&&wt++,wt}return}catch{return}}(Be,$e)}catch{return}}function Jt(Be){var $e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return $e||($e=X.getActiveStreamInfo().id),Be&&ee[$e]&&ee[$e][Be]&&$e?(oe[$e]=oe[$e]||{},oe[$e].hasOwnProperty(Be)||(oe[$e][Be]=0),oe[$e][Be]):0}catch{return 0}}function sn(Be,$e,nt){var Ot=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if($e&&$e.id&&Be){var Mt=$e.id,wt=Jt(Be,Mt);Object(C.checkInteger)(nt);var an=Le(Be,Mt);nt!==wt&&nt>=0&&nt<=an&&je(Be,wt,nt,an,Ot,Mt)}}function je(Be,$e,nt,Ot,Mt,wt){if(Be&&ee[wt]&&ee[wt][Be]){var an=ee[wt][Be].getStreamInfo(),ct=an&&an.manifestInfo&&an.manifestInfo.isDynamic,Vt=U.getCurrentBufferLevel(Be);J.info("Stream ID: "+wt+" ["+Be+"] switch from "+$e+" to "+nt+"/"+Ot+" (buffer: "+Vt+") "+(Mt?JSON.stringify(Mt):".")),oe[wt]=oe[wt]||{},oe[wt][Be]=nt;var Ae=function xe(Be,$e,nt){if($e&&ee&&ee[Be]&&ee[Be][$e]){var Ot=ke(ee[Be][$e].getMediaInfo());return Ot[nt]?Ot[nt]:null}return null}(wt,Be,nt);Q.trigger(v.default.QUALITY_CHANGE_REQUESTED,{oldQuality:$e,newQuality:nt,reason:Mt,streamInfo:an,bitrateInfo:Ae,maxIdx:Ot,mediaType:Be},{streamId:an.id,mediaType:Be});var Xe=Y.getAverageThroughput(Be,ct);isNaN(Xe)||de.setSavedBitrateSettings(Be,Xe)}}function Se(Be,$e,nt){var Ot=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,Mt=Be&&Be.type?ee[nt][Be.type].getRepresentationInfo():null;if(W.get().streaming.abr.useDeadTimeLatency&&Ot&&Mt&&Mt.fragmentDuration){var wt=Mt.fragmentDuration;if((Ot/=1e3)>wt)return 0;$e*=1-Ot/wt}for(var ct=ke(Be),Vt=ct.length-1;Vt>=0;Vt--)if(1e3*$e>=ct[Vt].bitrate)return Vt;return 0}function ke(Be){var $e=[];if(!Be||!Be.bitrateList)return $e;for(var Mt,nt=Be.bitrateList,Ot=Be.type,wt=0,an=nt.length;wt<an;wt++)(Mt=new y.default).mediaType=Ot,Mt.qualityIndex=wt,Mt.bitrate=nt[wt].bandwidth,Mt.width=nt[wt].width,Mt.height=nt[wt].height,Mt.scanType=nt[wt].scanType,$e.push(Mt);return $e}function Rt(){if(ge){var $e=W.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;ie=ge.getClientWidth()*$e,me=ge.getClientHeight()*$e}}return $={initialize:function De(){ne=Object(m.default)(R).create(),Y=Object(h.default)(R).create({settings:W}),(te=Object(B.default)(R).create({dashMetrics:U,customParametersModel:ce,mediaPlayerModel:fe,settings:W})).initialize(),Q.on(x.default.QUALITY_CHANGE_RENDERED,Fe,$),Q.on(x.default.METRIC_ADDED,Oe,$),Q.on(v.default.LOADING_PROGRESS,Ce,$)},isPlayingAtTopQuality:function pt(Be){var $e=Be?Be.id:null,nt=Jt(_.default.AUDIO,$e),Ot=Jt(_.default.VIDEO,$e);return nt===Le(_.default.AUDIO,$e)&&Ot===Le(_.default.VIDEO,$e)},updateTopQualityIndex:function et(Be){var $e=Be.type,nt=Be.streamInfo.id,Ot=Be.representationCount-1;return K[nt]=K[nt]||{},K[nt][$e]=Ot,Ot},clearDataForStream:function Yt(Be){ne&&ne.clearForStream(Be),ee[Be]&&delete ee[Be],ve[Be]&&delete ve[Be],ue[Be]&&delete ue[Be]},getThroughputHistory:function dt(){return Y},getBitrateList:ke,getQualityForBitrate:Se,getTopBitrateInfoFor:function Dt(Be){var $e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if($e||($e=X.getActiveStreamInfo().id),Be&&ee&&ee[$e]&&ee[$e][Be]){var nt=Le(Be,$e),Ot=ke(ee[$e][Be].getMediaInfo());return Ot[nt]?Ot[nt]:null}return null},getMinAllowedIndexFor:He,getMaxAllowedIndexFor:Le,getInitialBitrateFor:function Ft(Be,$e){if(function Ee(){if(!de||!de.hasOwnProperty("getSavedBitrateSettings"))throw new Error(_.default.MISSING_CONFIG_ERROR)}(),Be===_.default.TEXT)return NaN;var nt=de.getSavedBitrateSettings(Be),Ot=fe.getAbrBitrateParameter("initialBitrate",Be),Mt=W.get().streaming.abr.initialRepresentationRatio[Be];if(-1===Ot)if(Mt>-1){var wt=ee[$e][Be].getStreamInfo(),an=ae.getAdaptationForType(wt.index,Be,wt).Representation;Ot=Array.isArray(an)?an[Math.max(Math.round(an.length*Mt)-1,0)].bandwidth/1e3:0}else Ot=isNaN(nt)?Be===_.default.VIDEO?1e3:100:nt;return Ot},getQualityFor:Jt,getAbandonmentStateFor:function on(Be,$e){return ue[Be]&&ue[Be][$e]?ue[Be][$e].state:null},setPlaybackQuality:sn,checkPlaybackQuality:function Ht(Be,$e){try{if(!(Be&&ee&&ee[$e]&&ee[$e][Be]))return!1;if(ne){var nt=ge.getPlaybackQuality();nt&&ne.push($e,se,nt)}if(!W.get().streaming.abr.autoSwitchBitrate[Be])return!1;var Ot=Jt(Be,$e),Mt=Object(L.default)(R).create({abrController:$,switchHistory:ve[$e][Be],droppedFramesHistory:ne,streamProcessor:ee[$e][Be],currentValue:Ot,useBufferOccupancyABR:H[Be],useL2AABR:E[Be],useLoLPABR:I[Be],videoModel:ge}),wt=He(Be,$e),an=Le(Be,$e),ct=te.getMaxQuality(Mt),Vt=ct.quality;return void 0!==wt&&(Vt>b.default.NO_CHANGE?Vt:Ot)<wt&&(Vt=wt),Vt>an&&(Vt=an),ve[$e][Be].push({oldValue:Ot,newValue:Vt}),Vt>b.default.NO_CHANGE&&Vt!==Ot&&(ue[$e][Be].state===M.default.ALLOW_LOAD||Vt>Ot)&&(je(Be,Ot,Vt,an,ct.reason,$e),!0)}catch{return!1}},setElementSize:Rt,setWindowResizeEventCalled:function jt(Be){_e=Be},registerStreamType:function Ie(Be,$e){var nt=$e.getStreamInfo().id;ee[nt]||(ee[nt]={}),ve[nt]||(ve[nt]={}),ue[nt]||(ue[nt]={}),ve[nt][Be]=Object(F.default)(R).create(),ee[nt][Be]=$e,ue[nt][Be]={},ue[nt][Be].state=M.default.ALLOW_LOAD,function le(Be){var $e=W.get().streaming.abr.ABRStrategy;$e===_.default.ABR_STRATEGY_L2A?(H[Be]=!1,I[Be]=!1,E[Be]=!0):$e===_.default.ABR_STRATEGY_LoLP?(H[Be]=!1,I[Be]=!0,E[Be]=!1):$e===_.default.ABR_STRATEGY_BOLA?(H[Be]=!0,I[Be]=!1,E[Be]=!1):$e===_.default.ABR_STRATEGY_THROUGHPUT?(H[Be]=!1,I[Be]=!1,E[Be]=!1):$e===_.default.ABR_STRATEGY_DYNAMIC&&(H[Be]=!(!H||!H[Be])&&H[Be],I[Be]=!1,E[Be]=!1)}(Be),Be===_.default.VIDEO&&Rt()},unRegisterStreamType:function z(Be,$e){try{ee[Be]&&ee[Be][$e]&&delete ee[Be][$e],ve[Be]&&ve[Be][$e]&&delete ve[Be][$e],ue[Be]&&ue[Be][$e]&&delete ue[Be][$e]}catch{}},setConfig:function ye(Be){!Be||(Be.streamController&&(X=Be.streamController),Be.domStorage&&(de=Be.domStorage),Be.mediaPlayerModel&&(fe=Be.mediaPlayerModel),Be.customParametersModel&&(ce=Be.customParametersModel),Be.dashMetrics&&(U=Be.dashMetrics),Be.adapter&&(ae=Be.adapter),Be.videoModel&&(ge=Be.videoModel),Be.settings&&(W=Be.settings))},reset:function Te(){G(),Q.off(v.default.LOADING_PROGRESS,Ce,$),Q.off(x.default.QUALITY_CHANGE_RENDERED,Fe,$),Q.off(x.default.METRIC_ADDED,Oe,$),te&&te.reset()}},function re(){J=V.getLogger($),G()}(),$}P.__dashjs_factory_name="AbrController";var f=p.default.getSingletonFactory(P);f.QUALITY_DEFAULT=0,p.default.updateSingletonFactory(P.__dashjs_factory_name,f),k.default=f},"./src/streaming/controllers/BaseURLController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/models/BaseURLTreeModel.js"),_=u("./src/streaming/utils/BaseURLSelector.js"),M=u("./src/streaming/utils/URLUtils.js"),y=u("./src/dash/vo/BaseURL.js"),D=u("./src/core/FactoryMaker.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js");function p(){var L,b,g,S,F=this.context,m=Object(d.default)(F).getInstance(),h=Object(M.default)(F).getInstance();function C(R){g.invalidateSelectedIndexes(R.entry)}return L={reset:function P(){g.reset(),S.reset()},initialize:function f(R){g.setConfig({adapter:b}),function N(R){g.update(R),S.chooseSelector(b.getIsDVB(R))}(R)},resolve:function w(R){var Q=g.getForPath(R).reduce(function($,J){var te=S.select(J);return te?(h.isRelative(te.url)?$.url=h.resolve(te.url,$.url):($.url=te.url,$.serviceLocation=te.serviceLocation),$.availabilityTimeOffset=te.availabilityTimeOffset,$.availabilityTimeComplete=te.availabilityTimeComplete,$):new y.default},new y.default);if(!h.isRelative(Q.url))return Q},setConfig:function O(R){R.baseURLTreeModel&&(g=R.baseURLTreeModel),R.baseURLSelector&&(S=R.baseURLSelector),R.adapter&&(b=R.adapter)}},function x(){g=Object(B.default)(F).create(),S=Object(_.default)(F).create(),m.on(v.default.SERVICE_LOCATION_BLACKLIST_CHANGED,C,L)}(),L}p.__dashjs_factory_name="BaseURLController",k.default=D.default.getClassFactory(p)},"./src/streaming/controllers/BlacklistController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/EventBus.js");function M(y){y=y||{};var D,d=[],v=Object(_.default)(this.context).getInstance(),p=y.updateEventName,L=y.addBlacklistEventName;function F(S){-1===d.indexOf(S)&&(d.push(S),v.trigger(p,{entry:S}))}function m(S){F(S.entry)}return D={add:F,contains:function b(S){return!!(d.length&&S&&S.length)&&-1!==d.indexOf(S)},reset:function g(){d=[]}},function h(){L&&v.on(L,m,D)}(),D}M.__dashjs_factory_name="BlackListController",k.default=B.default.getClassFactory(M)},"./src/streaming/controllers/BufferController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/streaming/constants/MetricsConstants.js"),M=u("./src/streaming/models/FragmentModel.js"),y=u("./src/streaming/SourceBufferSink.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/core/Debug.js"),L=u("./src/streaming/utils/InitCache.js"),b=u("./src/streaming/vo/DashJSError.js"),F=u("./src/core/errors/Errors.js"),m=u("./src/streaming/vo/metrics/HTTPRequest.js"),h=u("./src/streaming/MediaPlayerEvents.js"),S=.01,x="BufferController";function O(N){N=N||{};var ee,ue,pe,_e,ie,me,ae,ge,fe,ce,de,se,ve,ne,Y,H,E,I,w=this.context,P=Object(D.default)(w).getInstance(),f=N.errHandler,R=N.fragmentModel,V=N.representationController,Q=N.adapter,$=N.textController,J=N.abrController,te=N.playbackController,X=N.streamInfo,K=N.type,oe=N.settings;function le(Je){me=Je}function z(Je){return Q.convertRepresentationToRepresentationInfo(V.getRepresentationForQuality(Je))}function Te(Je,ut,We){var ot=z(We);return ut&&ut[K]&&(K===B.default.VIDEO||K===B.default.AUDIO)?fe.initializeForStreamSwitch(Je,ot,ut[K]):fe.initializeForFirstUse(X,Je,ot)}function ye(Je){oe.get().streaming.cacheInitSegments&&(ue.info("Init fragment finished loading saving to",K+"'s init cache"),Y.save(Je.chunk)),ue.debug("Append Init fragment",K," with representationId:",Je.chunk.representationId," and quality:",Je.chunk.quality,", data size:",Je.chunk.bytes.byteLength),Fe(Je.chunk)}function Ce(Je){Fe(Je.chunk,Je.request)}function Fe(Je){fe.append(Je,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).then(function(We){Le(We)}).catch(function(We){Le(We)}),Je.mediaInfo.type===B.default.VIDEO&&ln(d.default.VIDEO_CHUNK_RECEIVED,{chunk:Je})}function Oe(Je){if(Je&&Je.length>0)for(var ut=0,We=Je.length;ut<We;ut++)ue.debug("Buffered range: "+Je.start(ut)+" - "+Je.end(ut)+", currentTime = ",te.getTime())}function Le(Je){if(Je.error)return 22===Je.error.code&&function Pe(){if(ne=!0,ie=.8*tt(),ue.warn("Quota exceeded, Critical Buffer: "+ie),ie>0){var Je=Math.max(.2*ie,1),ut=ie-Je,We=Math.min(oe.get().streaming.buffer.bufferTimeAtTopQuality,.9*ut),ot=Math.min(oe.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*ut),ht={streaming:{buffer:{bufferToKeep:parseFloat(Je.toFixed(5)),bufferTimeAtTopQuality:parseFloat(We.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(ot.toFixed(5))}}};oe.update(ht)}}(),void((22===Je.error.code||!yt())&&(ue.warn("Clearing playback buffer to overcome quota exceed situation"),ln(d.default.QUOTA_EXCEEDED,{criticalBufferLevel:ie,quotaExceededTime:Je.chunk.start}),jt(pt())));if(fe&&(ke(),ne=!1,(de=Je.chunk)&&de.endFragment)){de&&!isNaN(de.index)&&(ae=Math.max(de.index,ae),Ze());var ut=fe.getAllBufferRanges();de.segmentType===m.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Oe(ut),sn(),function He(){if(!isNaN(I)){if(K!==B.default.AUDIO&&K!==B.default.VIDEO)return void(I=NaN);var Je=te.getTime(),ut=xe(Je,0),We=xe(I,0);if(ut&&We&&ut.start===We.start)return void(I=NaN);var ot=V.getCurrentRepresentation().segmentDuration,ht=xe(I,ot);!ht||(oe.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Je-I)>ot?I<=ht.end&&te.seek(Math.max(I,ht.start),!1,!0):Je<ht.start&&te.seek(ht.start,!1,!0))}}()),de&&ln(d.default.BYTES_APPENDED_END_FRAGMENT,{quality:de.quality,startTime:de.start,index:de.index,bufferedRanges:ut,segmentType:de.segmentType,mediaType:K})}}function Dt(){return new Promise(function(Je,ut){var We=Ft();if(!We||0===We.length)return sn(),void Je();jt(We).then(function(){Je()}).catch(function(ot){ut(ot)})})}function Ft(Je){var ut=[],We=fe.getAllBufferRanges();if(!We||0===We.length)return ut;if(!Je&&0!==Je||isNaN(Je))ut.push({start:We.start(0),end:We.end(We.length-1)+.5});else{var ot=function Ht(Je,ut){var We=oe.get().streaming.buffer.bufferToKeep,ot=ut.start(0);if(Je-ot>We){var Lt=Math.max(0,Je-We),Ut=R.getRequests({state:M.default.FRAGMENT_MODEL_EXECUTED,time:Je,threshold:S})[0];if(Ut&&(Lt=Math.min(Ut.startTime,Lt)),Lt>0)return{start:ot,end:Lt}}return null}(Je,We),ht=function Jt(Je,ut){var We=ut.end(ut.length-1)+.5,ht=X.manifestInfo.duration>=oe.get().streaming.buffer.longFormContentDurationThreshold?oe.get().streaming.buffer.bufferTimeAtTopQualityLongForm:oe.get().streaming.buffer.bufferTimeAtTopQuality;if(We-Je>ht){var Ut=Je+ht,Ge=R.getRequests({state:M.default.FRAGMENT_MODEL_EXECUTED,time:Je,threshold:S})[0];if(Ge&&(Ut=Math.max(Ge.startTime+Ge.duration,Ut)),Ut<We)return{start:Ut,end:We}}return null}(Je,We);ot&&ut.push(ot),ht&&ut.push(ht)}return ut}function sn(){(!E||K===B.default.TEXT&&$.isTextEnabled())&&ke()}function on(){at()}function je(){at(),I=NaN}function xe(Je,ut){var Nt,Tt,We=fe.getAllBufferRanges(),ot=0,ht=0,Lt=null,Ut=null,Ge=0,nn=isNaN(ut)?.15:ut;if(null!=We){for(Tt=0,Nt=We.length;Tt<Nt;Tt++)if(ot=We.start(Tt),ht=We.end(Tt),null===Lt)Ge=Math.abs(ot-Je),(Je>=ot&&Je<ht||Ge<=nn)&&(Lt=ot,Ut=ht);else{if(!((Ge=ot-Ut)<=nn))break;Ut=ht}if(null!==Lt)return{start:Lt,end:Ut}}return null}function ke(){if(te){var Je=oe.get().streaming.gaps.jumpGaps&&!isNaN(oe.get().streaming.gaps.smallGapLimit)?oe.get().streaming.gaps.smallGapLimit:NaN;_e=Math.max(function Se(Je,ut){var We;return oe.get().streaming.gaps.jumpGaps&&(ut=oe.get().streaming.gaps.smallGapLimit),null===(We=xe(Je,ut))?0:We.end-Je}(te.getTime()||0,Je),0),ln(d.default.BUFFER_LEVEL_UPDATED,{mediaType:K,bufferLevel:_e}),at()}}function Ze(){var Je=ae>=ge-1,ut=te.getTimeToStreamEnd(X)-_e<=0;(Je||ut)&&!pe&&(Xe(!0),ue.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(X.id," and type ").concat(K)))}function at(){K!==B.default.AUDIO&&K!==B.default.VIDEO||((!te.getLowLatencyModeEnabled()&&_e<oe.get().streaming.buffer.stallThreshold||0===_e)&&!pe?dt(_.default.BUFFER_EMPTY):(pe||_e>=oe.get().streaming.buffer.stallThreshold||te.getLowLatencyModeEnabled()&&_e>0)&&dt(_.default.BUFFER_LOADED))}function dt(Je){ce===Je||Je===_.default.BUFFER_EMPTY&&0===te.getTime()||K===B.default.TEXT&&!$.isTextEnabled()||(ce=Je,ln(d.default.BUFFER_LEVEL_STATE_CHANGED,{state:Je}),ln(Je===_.default.BUFFER_LOADED?d.default.BUFFER_LOADED:d.default.BUFFER_EMPTY),ue.debug(Je===_.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function pt(){var Je=[],ut=fe.getAllBufferRanges();if(!ut||0===ut.length)return Je;var We=te.getTime(),ot=Math.max(0,We-oe.get().streaming.buffer.bufferToKeep),ht=R.getRequests({state:M.default.FRAGMENT_MODEL_EXECUTED,time:We,threshold:S})[0];if(ht)ot=Math.min(ht.startTime,ot);else if(0===We&&te.getIsDynamic())return[];if(ut.start(0)<=ot){for(var Lt={start:0,end:ot},Ut=0;Ut<ut.length&&ut.end(Ut)<=ot;Ut++)Lt.end=ut.end(Ut);Lt.start<Lt.end&&Je.push(Lt)}return Je}function jt(Je){return new Promise(function(ut,We){if(Je&&fe&&0!==Je.length){var ot=[];Je.forEach(function(ht){ot.push(function Rt(Je){return new Promise(function(ut,We){Je.resolve=ut,Je.reject=We,H.push(Je)})}(ht))}),ve||Yt(),Promise.all(ot).then(function(){ut()}).catch(function(ht){We(ht)})}else ut()})}function Yt(){try{if(0===H.length||!fe)return ue.debug("Nothing to prune, halt pruning"),H=[],void(ve=!1);var Je=fe.getBuffer();if(!Je||!Je.buffered||0===Je.buffered.length)return ue.debug("SourceBuffer is empty (or does not exist), halt pruning"),H=[],void(ve=!1);var ut=H.shift();ue.debug("".concat(K,": Removing buffer from: ").concat(ut.start," to ").concat(ut.end)),ve=!0,te.getTime()<ut.end&&Xe(!1),fe.remove(ut).then(function(ot){Be(ot)}).catch(function(ot){Be(ot)})}catch{ve=!1}}function Be(Je){ue.debug("onRemoved buffer from:",Je.from,"to",Je.to),Oe(fe.getAllBufferRanges()),0===H.length&&(ve=!1,ke()),Je.unintended&&(ue.warn("Detected unintended removal from:",Je.from,"to",Je.to,"setting streamprocessor time to",Je.from),ln(d.default.SEEK_TARGET,{time:Je.from})),ve?Yt():(E?E=!1:ke(),ln(d.default.BUFFER_CLEARED,{from:Je.from,to:Je.to,unintended:Je.unintended,hasEnoughSpaceToAppend:yt(),quotaExceeded:ne}))}function $e(Je){return new Promise(function(ut){Je&&void 0!==Je.MSETimeOffset&&fe&&fe.updateTimestampOffset?fe.updateTimestampOffset(Je.MSETimeOffset).then(function(){ut()}).catch(function(){ut()}):ut()})}function nt(){return fe&&!pe?fe.updateAppendWindow(X):Promise.resolve()}function Mt(){++se*(oe.get().streaming.wallclockTimeUpdateInterval/1e3)>=oe.get().streaming.buffer.bufferPruningInterval&&(se=0,function et(){!fe||K===B.default.TEXT||pe||jt(pt())}())}function wt(){at()}function Xe(Je){pe!==Je&&((pe=Je)?ln(d.default.BUFFERING_COMPLETED):ge=Number.POSITIVE_INFINITY)}function tt(){try{var We,ot,Je=fe.getAllBufferRanges(),ut=0;if(!Je)return ut;for(ot=0,We=Je.length;ot<We;ot++)ut+=Je.end(ot)-Je.start(ot);return ut}catch{return 0}}function yt(){var Je=tt();return isNaN(Je)||Je<ie}function ln(Je,ut){P.trigger(Je,ut||{},{streamId:X.id,mediaType:K})}function Qt(Je,ut){if(ie=Number.POSITIVE_INFINITY,ce=void 0,ge=Number.POSITIVE_INFINITY,ae=0,de=null,pe=!1,ve=!1,ne=!1,_e=0,se=0,H=[],I=NaN,fe){var We=fe;fe=null,!Je&&!ut&&We.abort().then(function(){We.reset(ut),We=null})}E=!1}return ee={initialize:function W(Je){le(Je),P.on(d.default.INIT_FRAGMENT_LOADED,ye,ee),P.on(d.default.MEDIA_FRAGMENT_LOADED,Ce,ee),P.on(d.default.WALLCLOCK_TIME_UPDATED,Mt,ee),P.on(h.default.PLAYBACK_PLAYING,je,ee),P.on(h.default.PLAYBACK_PROGRESS,sn,ee),P.on(h.default.PLAYBACK_TIME_UPDATED,sn,ee),P.on(h.default.PLAYBACK_RATE_CHANGED,wt,ee),P.on(h.default.PLAYBACK_STALLED,on,ee)},getStreamId:function re(){return X.id},getType:function De(){return K},getBufferControllerType:function Ie(){return x},createBufferSink:function G(Je){var ut=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(We,ot){if(Y&&Je&&me){var ht=J.getQualityFor(K,X.id);fe=Object(y.default)(w).create({mediaSource:me,textController:$,eventBus:P}),Te(Je,ut,ht).then(function(){return $e(z(ht))}).then(function(){We(fe)}).catch(function(Lt){ue.fatal("Caught error on create SourceBuffer: "+Lt),f.error(new b.default(F.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,F.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+K)),ot(Lt)})}else We(null)})},getBuffer:function an(){return fe},getBufferLevel:function ct(){return _e},getRangeAt:xe,setMediaSource:le,getMediaSource:function Vt(){return me},appendInitSegmentFromCache:function Ee(Je){var ut=Y.extract(X.id,Je);return!!ut&&(ue.info("Append Init fragment",K," with representationId:",ut.representationId," and quality:",ut.quality,", data size:",ut.bytes.byteLength),Fe(ut),!0)},getIsBufferingCompleted:function Ae(){return pe},setIsBufferingCompleted:Xe,getIsPruningInProgress:function Et(){return ve},reset:function Wt(Je,ut){P.off(d.default.INIT_FRAGMENT_LOADED,ye,this),P.off(d.default.MEDIA_FRAGMENT_LOADED,Ce,this),P.off(d.default.WALLCLOCK_TIME_UPDATED,Mt,this),P.off(h.default.PLAYBACK_PLAYING,je,this),P.off(h.default.PLAYBACK_PROGRESS,sn,this),P.off(h.default.PLAYBACK_TIME_UPDATED,sn,this),P.off(h.default.PLAYBACK_RATE_CHANGED,wt,this),P.off(h.default.PLAYBACK_STALLED,on,this),Qt(Je,ut)},prepareForPlaybackSeek:function Ue(){return pe&&Xe(!1),fe.abort()},prepareForReplacementTrackSwitch:function Qe(Je){return new Promise(function(ut,We){fe.abort().then(function(){return nt()}).then(function(){return fe.changeType(Je)}).then(function(){return Dt()}).then(function(){Xe(!1),ut()}).catch(function(ot){We(ot)})})},prepareForNonReplacementTrackSwitch:function lt(Je){return new Promise(function(ut,We){nt().then(function(){return fe.changeType(Je)}).then(function(){ut()}).catch(function(ot){We(ot)})})},prepareForReplacementQualitySwitch:function ft(){return new Promise(function(Je,ut){fe.abort().then(function(){return nt()}).then(function(){return Dt()}).then(function(){Xe(!1),Je()}).catch(function(We){ut(We)})})},updateAppendWindow:nt,getAllRangesWithSafetyFactor:Ft,getContinuousBufferTimeForTargetTime:function rt(Je){try{var ut=Je,We=fe.getAllBufferRanges();if(!We||0===We.length)return NaN;for(var ot=0;ut===Je&&ot<We.length;){var ht=We.start(ot),Lt=We.end(ot);ut>=ht&&ut<=Lt&&(ut=Lt),ot+=1}return ut===Je?NaN:ut}catch{}},clearBuffers:jt,pruneAllSafely:Dt,updateBufferTimestampOffset:$e,setSeekTarget:function $t(Je){I=Je},segmentRequestingCompleted:function Ot(Je){isNaN(Je)||(ge=Je,Ze())}},function U(){ue=Object(p.default)(w).getInstance().getLogger(ee),Y=Object(L.default)(w).getInstance(),Qt()}(),ee}O.__dashjs_factory_name=x,k.default=v.default.getClassFactory(O)},"./src/streaming/controllers/CatchupController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js"),M=u("./src/core/EventBus.js"),y=u("./src/streaming/constants/Constants.js"),D=u("./src/streaming/MediaPlayerEvents.js"),d=u("./src/core/events/Events.js"),v=u("./src/streaming/constants/MetricsConstants.js");function p(){var F,m,h,g,S,C,x,O,N,w,P,L=this.context,b=Object(M.default)(L).getInstance();function te(){m=!1;var se=typeof navigator<"u"?navigator.userAgent.toLowerCase():"",ve=/safari/.test(se)&&!/chrome/.test(se);h=ve?.25:.02}function X(){m=!1}function K(se){if(se.streamId===C.getActiveStreamInfo().id&&w){var ve=x.getLiveDelay();x.getBufferLevel()>ve/2&&(w=!1)}}function oe(se){se.streamId===C.getActiveStreamInfo().id&&(w=se.state===v.default.BUFFER_EMPTY)}function ee(){O.getCatchupModeEnabled()||g.setPlaybackRate(1)}function ue(){x.getIsDynamic()&&O.getCatchupModeEnabled()&&O.getCatchupPlaybackRate()>0&&!x.isPaused()&&!x.isSeeking()&&function ie(){try{var se=O.getLiveCatchupLatencyThreshold();return!(!x.getTime()>0||m||!isNaN(se)&&x.getCurrentLiveLatency()>=se)&&(me()===y.default.LIVE_CATCHUP_MODE_LOLP?function ge(se,ve){try{return Math.abs(_e())>0||se<ve}catch{return!1}}(x.getBufferLevel(),S.get().streaming.liveCatchup.playbackBufferMin):function ae(){try{return Math.abs(_e())>0}catch{return!1}}())}catch{return!1}}()&&function pe(){if(!m&&g){var se,ve=g.getPlaybackRate(),ne=O.getCatchupPlaybackRate(),Y=x.getBufferLevel(),H=_e(),E=O.getCatchupMaxDrift();if(!isNaN(E)&&E>0&&H>E)P.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),m=!0,function de(){var se=C&&C.hasVideoTrack()?y.default.VIDEO:y.default.AUDIO,ve=N.getCurrentDVRInfo(se),ne=ve?ve.range:null;ne&&!isNaN(ne.end)&&x.seek(ne.end-x.getLiveDelay(),!0,!1)}();else{var I=x.getCurrentLiveLatency(),U=x.getLiveDelay();(se=me()===y.default.LIVE_CATCHUP_MODE_LOLP?function ce(se,ve,ne,Y,H,E){var U,I=se;if(H<Y){var De=2*I/(1+Math.pow(Math.E,-5*(H-Y)));P.debug("[LoL+ playback control_buffer-based] bufferLevel: "+H+", newRate: "+(U=1-I+De))}else{var Ie=.02;U=Math.abs(ve-ne)<=Ie*ne?1:1-I+2*I/(1+Math.pow(Math.E,-5*(ve-ne))),P.debug("[LoL+ playback control_latency-based] latency: "+ve+", newRate: "+U)}return Math.abs(E-U)<=h&&(U=null),U}(ne,I,U,S.get().streaming.liveCatchup.playbackBufferMin,Y,ve):function fe(se,ve,ne,Y,H){if(w)return 1;var I=ve-ne,re=1-se+2*se/(1+Math.pow(Math.E,-5*I));return x.getPlaybackStalled()&&Y<=ne/2&&I>0&&(re=1),Math.abs(H-re)<=h&&(re=null),re}(ne,I,U,Y,ve))&&(P.debug("[CatchupController]: Setting playback rate to ".concat(se)),g.setPlaybackRate(se))}}}()}function _e(){return x.getCurrentLiveLatency()-x.getLiveDelay()}function me(){var se=S.get().streaming.liveCatchup.playbackBufferMin;return S.get().streaming.liveCatchup.mode!==y.default.LIVE_CATCHUP_MODE_LOLP||null===se||isNaN(se)?y.default.LIVE_CATCHUP_MODE_DEFAULT:y.default.LIVE_CATCHUP_MODE_LOLP}return F={reset:function J(){(function Q(){b.off(D.default.BUFFER_LEVEL_UPDATED,K,F),b.off(D.default.BUFFER_LEVEL_STATE_CHANGED,oe,F),b.off(D.default.PLAYBACK_PROGRESS,ue,F),b.off(D.default.PLAYBACK_TIME_UPDATED,ue,F),b.off(D.default.PLAYBACK_SEEKED,ue,F),b.off(d.default.SETTING_UPDATED_CATCHUP_ENABLED,ee,F)})(),te(),g.setPlaybackRate(1,!0)},setConfig:function R(se){!se||(se.settings&&(S=se.settings),se.videoModel&&(g=se.videoModel),se.streamController&&(C=se.streamController),se.playbackController&&(x=se.playbackController),se.dashMetrics&&(N=se.dashMetrics),se.mediaPlayerModel&&(O=se.mediaPlayerModel))},initialize:function f(){!function V(){b.on(D.default.BUFFER_LEVEL_UPDATED,K,F),b.on(D.default.BUFFER_LEVEL_STATE_CHANGED,oe,F),b.on(D.default.PLAYBACK_PROGRESS,ue,F),b.on(D.default.PLAYBACK_TIME_UPDATED,ue,F),b.on(D.default.PLAYBACK_SEEKED,X,F),b.on(d.default.SETTING_UPDATED_CATCHUP_ENABLED,ee,F)}()}},function $(){P=Object(_.default)(L).getInstance().getLogger(F),te()}(),F}p.__dashjs_factory_name="CatchupController",k.default=B.default.getSingletonFactory(p)},"./src/streaming/controllers/EventController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js"),M=u("./src/core/EventBus.js"),y=u("./src/streaming/MediaPlayerEvents.js"),D=u("./src/streaming/net/XHRLoader.js");function d(){var S,C,x,O,N,w,P,f,R,V,Q,v="urn:mpeg:dash:event:2012",m_DISCARDED="discarded",m_UPDATED="updated",m_ADDED="added",h=this.context,g=Object(M.default)(h).getInstance();function J(){if(!P||!f)throw new Error("setConfig function has to be called previously")}function te(){Q=!1,x={},O={},N=null,V=!1,w=Date.now()/1e3}function X(){try{null!==N&&Q&&(clearInterval(N),N=null,Q=!1,function ie(){try{ae(O),ae(x)}catch{}}())}catch(U){throw U}}function ue(U,W){var re=arguments.length>2&&void 0!==arguments[2]&&arguments[2],De=U.eventStream.schemeIdUri,Ie=U.eventStream.value,le=U.id,z=m_DISCARDED;W[De]||(W[De]=[]);var G=W[De].findIndex(function(Te){return(!Ie||Te.eventStream.value&&Te.eventStream.value===Ie)&&Te.id===le});return-1===G?(W[De].push(U),z=m_ADDED):re&&(W[De][G]=U,z=m_UPDATED),z}function pe(U){try{1==U.eventStream.value&&g.trigger(y.default.MANIFEST_VALIDITY_CHANGED,{id:U.id,validUntil:U.calculatedPresentationTime,newDuration:4294967295==U.calculatedPresentationTime?NaN:U.calculatedPresentationTime+U.duration,newManifestValidAfter:NaN},{mode:y.default.EVENT_MODE_ON_START})}catch{}}function _e(){try{if(!V){V=!0;var U=f.getTime(),W=U-w;W=w>0?Math.max(0,W):0,me(O,W,U),me(x,W,U),w=U,V=!1}}catch{V=!1}}function me(U,W,re){try{ge(U,function(le){if(void 0!==le){var z=isNaN(le.duration)?0:le.duration;le.calculatedPresentationTime<=re&&le.calculatedPresentationTime+W+z>=re?de(le,U,y.default.EVENT_MODE_ON_START):(function fe(U,W,re){try{return U-W>re}catch{return!1}}(re,z+W,le.calculatedPresentationTime)||function ce(U){try{return U.calculatedPresentationTime>U.eventStream.period.start+U.eventStream.period.duration}catch{return!1}}(le))&&(C.debug("Deleting event ".concat(le.id," as it is expired or invalid")),se(U,le))}})}catch{}}function ae(U){try{var W=f.getTime();ge(U,function(Ie){var le=Ie.eventStream&&Ie.eventStream.period&&!isNaN(Ie.eventStream.period.duration)?Ie.eventStream.period.duration:NaN,z=Ie.eventStream&&Ie.eventStream.period&&!isNaN(Ie.eventStream.period.start)?Ie.eventStream.period.start:NaN;isNaN(le)||isNaN(z)||Math.abs(Ie.calculatedPresentationTime-W)<300&&de(Ie,U,y.default.EVENT_MODE_ON_START)})}catch{}}function ge(U,W){try{if(U)for(var re=Object.keys(U),De=0;De<re.length;De++)U[re[De]].forEach(function(le){void 0!==le&&W(le)})}catch{}}function de(U,W,re){try{var De=f.getTime(),Ie=U.id;if(re===y.default.EVENT_MODE_ON_RECEIVE)return C.debug("Received event ".concat(Ie)),void g.trigger(U.eventStream.schemeIdUri,{event:U},{mode:re});U.eventStream.schemeIdUri===v&&1==U.eventStream.value?(0!==U.duration||0!==U.presentationTimeDelta)&&(C.debug("Starting manifest refresh event ".concat(Ie," at ").concat(De)),se(W,U),function ve(){try{J(),P.refreshManifest()}catch{}}()):"urn:mpeg:dash:event:callback:2015"===U.eventStream.schemeIdUri&&1==U.eventStream.value?(C.debug("Starting callback event ".concat(Ie," at ").concat(De)),se(W,U),function ne(U){try{Object(D.default)(h).create({}).load({method:"get",url:U,request:{responseType:"arraybuffer"}})}catch(re){throw re}}(U.messageData)):(C.debug("Starting event ".concat(Ie," at ").concat(De)),se(W,U),g.trigger(U.eventStream.schemeIdUri,{event:U},{mode:re}))}catch{}}function se(U,W){var re=W.eventStream.schemeIdUri,De=W.eventStream.value,Ie=W.id;U[re]=U[re].filter(function(le){return De&&le.eventStream.value&&le.eventStream.value!==De||le.id!==Ie}),0===U[re].length&&delete U[re]}return S={addInlineEvents:function oe(U){try{if(J(),U)for(var W=0;W<U.length;W++){var re=U[W],De=ue(re,x,!0);De===m_ADDED?(C.debug("Added inline event with id ".concat(re.id)),de(re,U,y.default.EVENT_MODE_ON_RECEIVE)):De===m_UPDATED&&C.debug("Updated inline event with id ".concat(re.id))}}catch(Ie){throw Ie}},addInbandEvents:function ee(U){try{J();for(var W=0;W<U.length;W++){var re=U[W];ue(re,O,!1)===m_ADDED?(re.eventStream.schemeIdUri===v&&void 0===O[re.id]&&pe(re),C.debug("Added inband event with id "+re.id),de(re,U,y.default.EVENT_MODE_ON_RECEIVE)):C.debug("Inband event with scheme_id_uri ".concat(re.eventStream.schemeIdUri,", value ").concat(re.eventStream.value," and id ").concat(re.id," was ignored because it has been added before."))}_e()}catch(Ie){throw Ie}},getInbandEvents:function E(){return O},getInlineEvents:function H(){return x},start:function K(){try{J(),C.debug("Start Event Controller");var U=R.get().streaming.eventControllerRefreshDelay;!Q&&!isNaN(U)&&(Q=!0,N=setInterval(_e,U))}catch(W){throw W}},setConfig:function Y(U){try{if(!U)return;U.manifestUpdater&&(P=U.manifestUpdater),U.playbackController&&(f=U.playbackController),U.settings&&(R=U.settings)}catch(W){throw W}},reset:function I(){X(),te()}},function $(){C=Object(_.default)(h).getInstance().getLogger(S),te()}(),S}d.__dashjs_factory_name="EventController",k.default=B.default.getSingletonFactory(d)},"./src/streaming/controllers/FragmentController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/streaming/vo/DataChunk.js"),M=u("./src/streaming/models/FragmentModel.js"),y=u("./src/streaming/FragmentLoader.js"),D=u("./src/streaming/utils/RequestModifier.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js"),p=u("./src/streaming/MediaPlayerEvents.js"),L=u("./src/core/errors/Errors.js"),b=u("./src/core/FactoryMaker.js"),F=u("./src/core/Debug.js");function m(h){h=h||{};var P,f,R,g=this.context,S=Object(d.default)(g).getInstance(),C=h.errHandler,x=h.mediaPlayerModel,O=h.dashMetrics,N=Object(F.default)(g).getInstance(),w=h.streamInfo;function Q(){return w.id}function J(){for(var oe in R)R[oe].reset();R={}}function K(oe){if(oe.sender){var ee=oe.request,ue=oe.response,pe=ee.isInitializationRequest(),_e=ee.mediaInfo.streamInfo;if(oe.error&&(ee.mediaType===B.default.AUDIO||ee.mediaType===B.default.VIDEO||ee.mediaType===B.default.TEXT&&ee.mediaInfo.isFragmented)&&S.trigger(v.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:oe.request.serviceLocation}),!ue||!_e)return void f.warn("No "+ee.mediaType+" bytes to push or stream is inactive.");var ie=function X(oe,ee,ue,pe){var _e=new _.default;return _e.streamId=ue,_e.mediaInfo=ee.mediaInfo,_e.segmentType=ee.type,_e.start=ee.startTime,_e.duration=ee.duration,_e.end=_e.start+_e.duration,_e.bytes=oe,_e.index=ee.index,_e.quality=ee.quality,_e.representationId=ee.representationId,_e.endFragment=pe,_e}(ue,ee,w.id,oe.type!==v.default.FRAGMENT_LOADING_PROGRESS);S.trigger(pe?v.default.INIT_FRAGMENT_LOADED:v.default.MEDIA_FRAGMENT_LOADED,{chunk:ie,request:ee},{streamId:_e.id,mediaType:ee.mediaType})}}return P={getStreamId:Q,getModel:function $(oe){var ee=R[oe];return ee||(ee=Object(M.default)(g).create({streamInfo:w,type:oe,dashMetrics:O,fragmentLoader:Object(y.default)(g).create({dashMetrics:O,mediaPlayerModel:x,errHandler:C,requestModifier:Object(D.default)(g).getInstance(),settings:h.settings,boxParser:h.boxParser,eventBus:S,events:v.default,errors:L.default,dashConstants:h.dashConstants,urlUtils:h.urlUtils,streamId:Q()}),debug:N,eventBus:S,events:v.default}),R[oe]=ee),ee},reset:function te(){S.off(p.default.FRAGMENT_LOADING_COMPLETED,K,this),S.off(p.default.FRAGMENT_LOADING_PROGRESS,K,this),J()}},function V(){f=N.getLogger(P),J(),S.on(p.default.FRAGMENT_LOADING_COMPLETED,K,P),S.on(p.default.FRAGMENT_LOADING_PROGRESS,K,P)}(),P}m.__dashjs_factory_name="FragmentController",k.default=b.default.getClassFactory(m)},"./src/streaming/controllers/GapController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js"),M=u("./src/core/events/Events.js"),y=u("./src/core/EventBus.js");function p(){var F,m,h,g,S,C,x,O,N,w,P,f,L=this.context,b=Object(y.default)(L).getInstance();function Q(){(function fe(){f.debug("Stopping the gap controller"),S&&(clearInterval(S),S=null)})(),function X(){b.off(M.default.WALLCLOCK_TIME_UPDATED,pe,this),b.off(M.default.INITIAL_STREAM_SWITCH,ue,this),b.off(M.default.PLAYBACK_SEEKING,K,this),b.off(M.default.BUFFER_REPLACEMENT_STARTED,oe,F),b.off(M.default.TRACK_CHANGE_RENDERED,ee,F)}(),function $(){S=null,C=NaN,g=0,w=null,P={}}()}function K(){w&&(clearTimeout(w),w=null)}function oe(de){try{if(de.streamId!==O.getActiveStreamInfo().id||!de.mediaType)return;de.streamId===O.getActiveStreamInfo().id&&(P[de.mediaType]=!0)}catch(se){f.error(se)}}function ee(de){!de||!de.mediaType||(P[de.mediaType]=!1)}function ue(){S||function ge(){try{S||(f.debug("Starting the gap controller"),S=setInterval(function(){_e()&&ce(x.getTime())},100))}catch{}}()}function pe(){if(_e(h.get().streaming.gaps.enableSeekFix)&&++g>=10){var de=x.getTime();m===de?ce(de,!0):(m=de,C=NaN),g=0}}function _e(){var de=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!O.getActiveStream())return!1;var se=Object.keys(P).some(function(ne){return P[ne]}),ve=!!de&&ie();return!se&&h.get().streaming.gaps.jumpGaps&&O.getActiveStreamProcessors().length>0&&(!x.isSeeking()||ve)&&!x.isPaused()&&!O.getIsStreamSwitchInProgress()&&!O.getHasMediaOrInitialisationError()}function ie(){var de=O.getActiveStream(),se=parseFloat((de.getStartTime()+de.getDuration()).toFixed(5));return x.getTime()+h.get().streaming.gaps.threshold>=se}function me(de,se){try{if(!de||de.length<=1&&se>0)return NaN;for(var ve=NaN,ne=0;isNaN(ve)&&ne<de.length;){var Y=ne>0?de.end(ne-1):0;se<de.start(ne)&&Y-se<h.get().streaming.gaps.threshold&&(ve=ne),ne+=1}return ve}catch{return null}}function ae(de,se){for(var ve=0,ne=de.length;ve<ne;ve++)if(se>=de.start(ve)&&se<=de.end(ve))return!0;return!1}function ce(de){var I,se=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ve=h.get().streaming.gaps.enableStallFix,ne=h.get().streaming.gaps.stallSeek,Y=h.get().streaming.gaps.smallGapLimit,H=h.get().streaming.gaps.jumpLargeGaps,E=N.getBufferRange(),U=NaN,W=!1;if(I=me(E,de),!isNaN(I)){var re=E.start(I),De=re-de;De>0&&(De<=Y||H)&&(U=re)}var Ie=x.getTimeToStreamEnd();if(isNaN(U)&&se&&isFinite(Ie)&&!isNaN(Ie)&&Ie<Y&&(U=parseFloat(x.getStreamEndTime().toFixed(5)),W=!0),ve&&isNaN(U)&&se&&isNaN(I)&&ae(E,de)&&(0===ne?(f.warn("Toggle play pause to break stall"),N.pause(),N.play()):(f.warn("Jumping ".concat(ne,"s to break stall")),U=de+ne)),U>0&&C!==U&&U>de&&!w){var le=U-de;if(W){var z=O.getStreamForTime(U),G=z&&!!z.getPreloaded();f.warn("Jumping to end of stream because of gap from ".concat(de," to ").concat(U,". Gap duration: ").concat(le)),x.seek(U,!0,G)}else{var Te=x.getIsDynamic(),ye=I>0?E.end(I-1):de,Ee=Te?1e3*Math.max(0,le-.1):0;w=window.setTimeout(function(){x.seek(U,!0,!0),f.warn("Jumping gap occuring in period ".concat(O.getActiveStream().getStreamId()," starting at ").concat(ye," and ending at ").concat(U,". Jumping by: ").concat(U-ye)),w=null},Ee)}C=U}}return F={reset:Q,setConfig:function J(de){!de||(de.settings&&(h=de.settings),de.playbackController&&(x=de.playbackController),de.streamController&&(O=de.streamController),de.videoModel&&(N=de.videoModel))},initialize:function R(){!function te(){b.on(M.default.WALLCLOCK_TIME_UPDATED,pe,this),b.on(M.default.INITIAL_STREAM_SWITCH,ue,this),b.on(M.default.PLAYBACK_SEEKING,K,this),b.on(M.default.BUFFER_REPLACEMENT_STARTED,oe,F),b.on(M.default.TRACK_CHANGE_RENDERED,ee,F)}()}},function V(){f=Object(_.default)(L).getInstance().getLogger(F),Q()}(),F}p.__dashjs_factory_name="GapController",k.default=B.default.getSingletonFactory(p)},"./src/streaming/controllers/MediaController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/core/events/Events.js"),M=u("./src/core/EventBus.js"),y=u("./src/core/FactoryMaker.js"),D=u("./src/core/Debug.js");function d(){var b,F,m,h,g,S,C,x,p=this.context,L=Object(M.default)(p).getInstance();function P(Y,H){return Y&&m[H]&&m[H][Y]?m[H][Y].list:[]}function f(Y,H){return Y&&m[H]&&m[H][Y]?m[H][Y].current:null}function V(Y){var H=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Y&&Y.streamInfo){var E=Y.type,U=Y.streamInfo.id,W=f(E,U);if(m[U]&&m[U][E]&&!X(Y,W)&&(m[U][E].current=Y,m[U][E].current&&(E!==B.default.TEXT||E===B.default.TEXT&&Y.isFragmented)&&L.trigger(_.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:W,newMediaInfo:Y,switchMode:h.get().streaming.trackSwitchMode[E]},{streamId:U}),!H)){var re=ee(Y);if(!re||!m[U][E].storeLastSettings)return;re.roles&&(re.role=re.roles[0],delete re.roles),re.accessibility&&(re.accessibility=re.accessibility[0]),re.audioChannelConfiguration&&(re.audioChannelConfiguration=re.audioChannelConfiguration[0]),S[E]=re,x.setSavedMediaSettings(E,re)}}}function Q(Y,H){!Y||!H||(g[Y]=H)}function $(Y){return Y?g[Y]:null}function X(Y,H){if(!Y&&!H)return!0;if(!Y||!H)return!1;var E=Y.id===H.id,I=Y.viewpoint===H.viewpoint,U=Y.lang===H.lang,W=Y.codec===H.codec,re=Y.roles.toString()===H.roles.toString(),De=Y.accessibility.toString()===H.accessibility.toString(),Ie=Y.audioChannelConfiguration.toString()===H.audioChannelConfiguration.toString();return E&&W&&I&&U&&re&&De&&Ie}function oe(){m={},S={},function pe(){g={audio:null,video:null,text:null}}()}function ee(Y){var H={lang:Y.lang,viewpoint:Y.viewpoint,roles:Y.roles,accessibility:Y.accessibility,audioChannelConfiguration:Y.audioChannelConfiguration};return H.lang||H.viewpoint||H.role&&H.role.length>0||H.accessibility&&H.accessibility.length>0||H.audioChannelConfiguration&&H.audioChannelConfiguration.length>0?H:null}function ue(Y,H){var E=arguments.length>2&&void 0!==arguments[2]&&arguments[2],I=!Y.lang||H.lang.match(Y.lang),U=null==Y.index||H.index===Y.index,W=!Y.viewpoint||Y.viewpoint===H.viewpoint,re=!Y.role||!!H.roles.filter(function(le){return le===Y.role})[0],De=!Y.accessibility||!!H.accessibility.filter(function(le){return le===Y.accessibility})[0],Ie=!Y.audioChannelConfiguration||!!H.audioChannelConfiguration.filter(function(le){return le===Y.audioChannelConfiguration})[0];return I&&U&&W&&(re||H.type===B.default.AUDIO&&E)&&De&&Ie}function ie(Y){var I,H=0,E=[];return Y.forEach(function(U){(I=Math.max.apply(Math,U.bitrateList.map(function(W){return W.bandwidth})))>H?(H=I,E=[U]):I===H&&E.push(U)}),E}function me(Y){var I,H=1/0,E=[];return Y.forEach(function(U){var W=U.bitrateList.reduce(function(re,De){var Ie=Math.max(1,De.width*De.height);return re+De.bandwidth/Ie},0);(I=W/U.bitrateList.length)<H?(H=I,E=[U]):I===H&&E.push(U)}),E}function ae(Y){var I,H=0,E=[];return Y.forEach(function(U){(I=U.representationCount)>H?(H=I,E=[U]):I===H&&E.push(U)}),E}function ge(Y,H){if(Y===B.default.TEXT)return H[0];var I,E=h.get().streaming.selectionModeForInitialTrack,U=C.getCustomInitialTrackSelectionFunction();if(U&&"function"==typeof U)I=U(H);else switch(E){case B.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:I=function fe(Y){var H=function _e(Y){var H=0,E=[];return Y.forEach(function(I){isNaN(I.selectionPriority)||(I.selectionPriority>H?(H=I.selectionPriority,E=[I]):I.selectionPriority===H&&E.push(I))}),E}(Y);return H.length>1&&(H=ie(H)),H.length>1&&(H=ae(H)),H}(H);break;case B.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:I=function ce(Y){var H=ie(Y);return H.length>1&&(H=ae(H)),H}(H);break;case B.default.TRACK_SELECTION_MODE_FIRST_TRACK:I=de(H);break;case B.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:I=function se(Y){var H=me(Y);return H.length>1&&(H=ie(H)),H}(H);break;case B.default.TRACK_SELECTION_MODE_WIDEST_RANGE:I=function ve(Y){var H=ae(Y);return H.length>1&&(H=ie(Y)),H}(H);break;default:F.warn("Track selection mode ".concat(E," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),I=de(H)}return I.length>0?I[0]:H[0]}function de(Y){return Y[0]}return b={setInitialMediaSettingsForType:function N(Y,H){var E=S[Y]||$(Y),I=P(Y,H.id),U=[];E||(E=x.getSavedMediaSettings(Y),Q(Y,E)),I&&0!==I.length&&(E&&I.forEach(function(W){ue(E,W,!!S[Y])&&U.push(W)}),0===U.length?V(ge(Y,I),!0):V(U.length>1?ge(Y,U):U[0]))},addTrack:function w(Y){if(Y){var H=Y.type;if(function te(Y){return Y===B.default.AUDIO||Y===B.default.VIDEO||Y===B.default.TEXT||Y===B.default.IMAGE}(H)){var E=Y.streamInfo.id;m[E]||(m[E]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var I=m[E][H].list,U=0,W=I.length;U<W;++U)if(X(I[U],Y))return;I.push(Y)}}},getTracksFor:P,getCurrentTrackFor:f,isCurrentTrack:function R(Y){if(!Y)return!1;var H=Y.type,E=Y.streamInfo.id;return m[E]&&m[E][H]&&X(m[E][H].current,Y)},setTrack:V,selectInitialTrack:ge,setInitialSettings:Q,getInitialSettings:$,getTracksWithHighestBitrate:ie,getTracksWithHighestEfficiency:me,getTracksWithWidestRange:ae,isTracksEqual:X,matchSettings:ue,saveTextSettingsDisabled:function J(){x.setSavedMediaSettings(B.default.TEXT,null)},setConfig:function K(Y){!Y||(Y.domStorage&&(x=Y.domStorage),Y.settings&&(h=Y.settings),Y.customParametersModel&&(C=Y.customParametersModel))},reset:oe},function O(){F=Object(D.default)(p).getInstance().getLogger(b),oe()}(),b}d.__dashjs_factory_name="MediaController";var v=y.default.getSingletonFactory(d);y.default.updateSingletonFactory(d.__dashjs_factory_name,v),k.default=v},"./src/streaming/controllers/MediaSourceController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js");function M(){var y,D,d,v=this.context;return y={createMediaSource:function L(){var C="WebKitMediaSource"in window;return"MediaSource"in window?D=new MediaSource:C&&(D=new WebKitMediaSource),D},attachMediaSource:function b(C){var x=window.URL.createObjectURL(D);return C.setSource(x),x},detachMediaSource:function F(C){C.setSource(null)},setDuration:function m(C){!D||"open"!==D.readyState||null===C&&isNaN(C)||D.duration!==C&&(function S(C){for(var x=C.sourceBuffers,O=0;O<x.length;O++)if(x[O].updating)return!0;return!1}(D)?setTimeout(m.bind(null,C),50):(d.info("Set MediaSource duration:"+C),D.duration=C))},setSeekable:function h(C,x){D&&"function"==typeof D.setLiveSeekableRange&&"function"==typeof D.clearLiveSeekableRange&&"open"===D.readyState&&C>=0&&C<x&&(D.clearLiveSeekableRange(),D.setLiveSeekableRange(C,x))},signalEndOfStream:function g(C){if(C&&"open"===C.readyState){for(var x=C.sourceBuffers,O=0;O<x.length;O++)if(x[O].updating||0===x[O].buffered.length)return;d.info("call to mediaSource endOfStream"),C.endOfStream()}}},function p(){d=Object(_.default)(v).getInstance().getLogger(y)}(),y}M.__dashjs_factory_name="MediaSourceController",k.default=B.default.getSingletonFactory(M)},"./src/streaming/controllers/PlaybackController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),y=u("./src/core/FactoryMaker.js"),D=u("./src/core/Debug.js"),d=u("./src/streaming/MediaPlayerEvents.js"),v=u("./src/streaming/constants/MetricsConstants.js");function L(){var m,h,g,S,C,x,O,N,w,P,f,R,V,Q,$,te,X,K,oe,ee,ue,pe,b=this.context,F=Object(_.default)(b).getInstance();function ie(){se(),V=!1,P=0,$=0,ee=!1,te=!1,ue=!1,X=NaN,O&&(F.off(M.default.DATA_UPDATE_COMPLETED,Le,m),F.off(M.default.LOADING_PROGRESS,jt,m),F.off(M.default.MANIFEST_UPDATED,nt,m),F.off(M.default.STREAMS_COMPOSED,Ot,m),F.off(d.default.PLAYBACK_ENDED,ke,m),F.off(d.default.STREAM_INITIALIZING,Yt,m),F.off(d.default.REPRESENTATION_SWITCH,Be,m),F.off(d.default.BUFFER_LEVEL_STATE_CHANGED,Ue,m),Oe(),function an(){O.removeEventListener("canplay",He),O.removeEventListener("canplaythrough",Pe),O.removeEventListener("play",Qe),O.removeEventListener("waiting",ft),O.removeEventListener("playing",lt),O.removeEventListener("pause",Dt),O.removeEventListener("error",Ze),O.removeEventListener("seeking",Ft),O.removeEventListener("seeked",Ht),O.removeEventListener("timeupdate",Jt),O.removeEventListener("progress",sn),O.removeEventListener("ratechange",on),O.removeEventListener("loadedmetadata",je),O.removeEventListener("loadeddata",xe),O.removeEventListener("stalled",Rt),O.removeEventListener("ended",Se)}()),w=null,O=null,f=null,R=null}function fe(){return parseFloat((ce(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)-ne()).toFixed(5))}function ce(ct){var Vt=ct||f;return Vt.start+Vt.duration}function de(){f&&O&&O.getElement()?O.play():V=!0}function se(){f&&O&&O.pause()}function ve(ct,Vt,Ae){f&&O&&ct!==(isNaN(X)?O.getTime():X)&&((K=!0===Ae)||(X=ct),h.info("Requesting seek to time: "+ct+(K?" (internal)":"")),O.setCurrentTime(ct,Vt))}function ne(){return f&&O?O.getTime():null}function Y(){return f&&O?O.isPaused():null}function H(){return f&&O?O.isSeeking():null}function E(){return f&&O?O.isStalled():null}function I(){return f&&O?O.getPlaybackRate():null}function W(){return f&&O?O.getEnded():null}function re(){return R}function Ee(){var ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!Y()&&R&&0!==O.getReadyState()&&!H()&&!ee){ct||(ct=g.hasVideoTrack()?B.default.VIDEO:B.default.AUDIO);var Vt=ne(),Ae=Ce(Vt,ct);!isNaN(Ae)&&Ae!==Vt&&!H()&&(E()||oe||1===O.getReadyState())&&(h.debug("UpdateCurrentTime: Seek to actual time: ".concat(Ae," from currentTime: ").concat(Vt)),ve(Ae,!1,!1))}}function Ce(ct,Vt){var Ae=C.getCurrentDVRInfo(Vt),Xe=Ae?Ae.range:null;return Xe?ct>Xe.end?Math.max(Xe.end-P,Xe.start):ct>0&&ct+.25<Xe.start&&Math.abs(ct-Xe.start)<31536e4?te?Math.max(Xe.end-P,Xe.start):Xe.start:ct:NaN}function Fe(){null===w&&(w=setInterval(function(){!function at(){F.trigger(M.default.WALLCLOCK_TIME_UPDATED,{isDynamic:R,time:new Date}),re()&&(g.addDVRMetric(),Y()?function dt(){var ct=Date.now();(!Q||ct>Q+500)&&(Q=ct,Jt())}():Ee())}()},pe.get().streaming.wallclockTimeUpdateInterval))}function Oe(){clearInterval(w),w=null}function Le(ct){var Vt=x.convertRepresentationToRepresentationInfo(ct.currentRepresentation),Ae=Vt?Vt.mediaInfo.streamInfo:null;null===Ae||f.id!==Ae.id||(f=Ae)}function He(){F.trigger(M.default.CAN_PLAY)}function Pe(){F.trigger(M.default.CAN_PLAY_THROUGH)}function Ue(ct){ct.streamId===g.getActiveStreamInfo().id&&(oe=ct.state===v.default.BUFFER_EMPTY,pe.get().streaming.buffer.setStallState&&O.setStallState(ct.mediaType,ct.state===v.default.BUFFER_EMPTY))}function Qe(){h.info("Native video element event: play"),Ee(),Fe(),F.trigger(M.default.PLAYBACK_STARTED,{startTime:ne()})}function ft(){h.info("Native video element event: waiting"),F.trigger(M.default.PLAYBACK_WAITING,{playingTime:ne()})}function lt(){h.info("Native video element event: playing"),K=!1,F.trigger(M.default.PLAYBACK_PLAYING,{playingTime:ne()})}function Dt(){h.info("Native video element event: pause"),F.trigger(M.default.PLAYBACK_PAUSED,{ended:W()})}function Ft(){if(!K){var ct=ne();!isNaN(X)&&X!==ct&&(ct=X),X=NaN,h.info("Seeking to: "+ct),Fe(),F.trigger(M.default.PLAYBACK_SEEKING,{seekTime:ct,streamId:f.id})}}function Ht(){h.info("Native video element event: seeked"),K=!1,F.trigger(M.default.PLAYBACK_SEEKED)}function Jt(){f&&F.trigger(M.default.PLAYBACK_TIME_UPDATED,{timeToEnd:fe(),time:ne(),streamId:f.id})}function sn(){F.trigger(M.default.PLAYBACK_PROGRESS,{streamId:f.id})}function on(){var ct=I();h.info("Native video element event: ratechange: ",ct),F.trigger(M.default.PLAYBACK_RATE_CHANGED,{playbackRate:ct})}function je(){h.info("Native video element event: loadedmetadata"),F.trigger(M.default.PLAYBACK_METADATA_LOADED),Fe()}function xe(){h.info("Native video element event: loadeddata"),F.trigger(M.default.PLAYBACK_LOADED_DATA)}function Se(){h.info("Native video element event: ended"),se(),Oe();var ct=g?g.getActiveStreamInfo():null;!ct||F.trigger(M.default.PLAYBACK_ENDED,{isLast:ct.isLast})}function ke(ct){if(w&&ct.isLast){h.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var Vt=ct.seekTime?ct.seekTime:ce();O.setCurrentTime(Vt),se(),Oe()}}function Ze(ct){F.trigger(M.default.PLAYBACK_ERROR,{error:(ct.target||ct.srcElement).error})}function jt(ct){if(!1===ct.stream&&te&&!isNaN(ct.request.duration)){var Vt=1.2*ct.request.duration;Vt>P&&(h.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",Vt.toFixed(2)),P=Vt)}}function Rt(ct){F.trigger(M.default.PLAYBACK_STALLED,{e:ct})}function Yt(ct){!function Mt(ct){ct&&ct.supplementalProperties&&"true"===ct.supplementalProperties[B.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&(h.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),te=!0)}(ct.mediaInfo)}function Be(ct){var Vt=g.getActiveStreamInfo();!ct||!Vt||!ct.currentRepresentation||!ct.streamId||ct.streamId!==Vt.id||!ct.mediaType||ct.mediaType!==B.default.VIDEO&&ct.mediaType!==B.default.AUDIO||(te=!ct.currentRepresentation.availabilityTimeComplete)&&!ue&&(ue=!0)}function nt(){ee=!0}function Ot(){ee=!1}return m={initialize:function me(ct,Vt){f=ct,!0!==Vt&&function ae(){(function wt(){O.addEventListener("canplay",He),O.addEventListener("canplaythrough",Pe),O.addEventListener("play",Qe),O.addEventListener("waiting",ft),O.addEventListener("playing",lt),O.addEventListener("pause",Dt),O.addEventListener("error",Ze),O.addEventListener("seeking",Ft),O.addEventListener("seeked",Ht),O.addEventListener("timeupdate",Jt),O.addEventListener("progress",sn),O.addEventListener("ratechange",on),O.addEventListener("loadedmetadata",je),O.addEventListener("loadeddata",xe),O.addEventListener("stalled",Rt),O.addEventListener("ended",Se)})(),R=f.manifestInfo.isDynamic,oe=!1,K=!1,F.on(M.default.DATA_UPDATE_COMPLETED,Le,m),F.on(M.default.LOADING_PROGRESS,jt,m),F.on(M.default.MANIFEST_UPDATED,nt,m),F.on(M.default.STREAMS_COMPOSED,Ot,m),F.on(d.default.PLAYBACK_ENDED,ke,m,{priority:_.default.EVENT_PRIORITY_HIGH}),F.on(d.default.STREAM_INITIALIZING,Yt,m),F.on(d.default.REPRESENTATION_SWITCH,Be,m),F.on(d.default.BUFFER_LEVEL_STATE_CHANGED,Ue,m),V&&(V=!1,de())}()},setConfig:function ye(ct){!ct||(ct.streamController&&(g=ct.streamController),ct.serviceDescriptionController&&(S=ct.serviceDescriptionController),ct.dashMetrics&&(C=ct.dashMetrics),ct.adapter&&(x=ct.adapter),ct.videoModel&&(O=ct.videoModel),ct.timelineConverter&&(N=ct.timelineConverter),ct.settings&&(pe=ct.settings))},getTimeToStreamEnd:fe,getBufferLevel:function et(){var ct=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,Vt=null;return g.getActiveStreamProcessors().forEach(function(Ae){if(!ct||0===ct.length||-1===ct.indexOf(Ae.getType())){var Xe=Ae.getBufferLevel();Vt=null===Vt?Xe:Math.min(Vt,Xe)}}),Vt},getPlaybackStalled:function ge(){return oe},getTime:ne,getLowLatencyModeEnabled:function pt(){return te},getInitialCatchupModeActivated:function $e(){return ue},getIsManifestUpdateInProgress:function Ie(){return ee},getPlaybackRate:I,getPlayedRanges:function U(){return f&&O?O.getPlayedRanges():null},getEnded:W,getIsDynamic:re,getStreamController:function De(){return g},computeAndSetLiveDelay:function Te(ct,Vt){var Ae,Xe,Et,yt=!isNaN(ct)&&isFinite(ct)?ct:NaN,$t=x.getSuggestedPresentationDelay(),ln=S.getServiceDescriptionSettings();return Ae=isNaN(pe.get().streaming.delay.liveDelay)?null===pe.get().streaming.delay.liveDelayFragmentCount||isNaN(pe.get().streaming.delay.liveDelayFragmentCount)||isNaN(yt)?ln&&!isNaN(ln.liveDelay)&&ln.liveDelay>0?ln.liveDelay:!0===pe.get().streaming.delay.useSuggestedPresentationDelay&&null!==$t&&!isNaN($t)&&$t>0?$t:isNaN(yt)?Vt&&!isNaN(Vt.minBufferTime)?4*Vt.minBufferTime:4*f.manifestInfo.minBufferTime:4*yt:yt*pe.get().streaming.delay.liveDelayFragmentCount:pe.get().streaming.delay.liveDelay,null!==(Et=x.getAvailabilityStartTime())&&($=Et),Xe=Vt&&Vt.dvrWindowSize>0?Math.min(Ae,Vt.dvrWindowSize):Ae,P=Xe,Xe},getLiveDelay:function z(){return P},getCurrentLiveLatency:function G(){if(!R||isNaN($))return NaN;var ct=ne();if(isNaN(ct)||0===ct)return 0;var Vt=(new Date).getTime()+1e3*N.getClientTimeOffset();return Math.max(((Vt-$-1e3*ct)/1e3).toFixed(3),0)},play:de,isPaused:Y,isStalled:E,pause:se,isSeeking:H,getStreamEndTime:ce,seek:ve,reset:ie,updateCurrentTime:Ee,getAvailabilityStartTime:function le(){return $}},function _e(){h=Object(D.default)(b).getInstance().getLogger(m),ie()}(),m}L.__dashjs_factory_name="PlaybackController",k.default=y.default.getSingletonFactory(L)},"./src/streaming/controllers/ScheduleController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/streaming/models/FragmentModel.js"),M=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),D=u("./src/core/FactoryMaker.js"),d=u("./src/core/Debug.js"),v=u("./src/streaming/constants/MetricsConstants.js"),p=u("./src/streaming/MediaPlayerEvents.js");function L(b){b=b||{};var f,R,V,Q,$,J,te,X,K,oe,ee,ue,pe,F=this.context,m=Object(M.default)(F).getInstance(),h=b.dashMetrics,g=b.mediaPlayerModel,S=b.fragmentModel,C=b.abrController,x=b.playbackController,O=b.textController,N=b.type,w=b.bufferController,P=b.settings;function fe(Ue){if(!w.getIsBufferingCompleted()){ce();var Qe=isNaN(Ue)?0:Ue;J=setTimeout(se,Qe)}}function ce(){J&&(clearTimeout(J),J=null)}function se(){try{if(function ne(){try{return N===B.default.TEXT&&!O.isTextEnabled()||x.isPaused()&&(!x.getStreamController().getInitialPlayback()||!x.getStreamController().getAutoPlay())&&!P.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void ce();if(function Y(){try{return Q&&(isNaN(oe)||ee||function de(){var Qe=C.getMaxAllowedIndexFor(N,R.id);return!(!isNaN(K)&&K==Qe||(V.info("Top quality "+N+" index has changed from "+K+" to "+Qe),K=Qe,0))}()||function H(){return!N||!Q||h.getCurrentBufferLevel(N)<E()}())}catch{return!1}}()){var Ue=!1;pe&&(Ue=C.checkPlaybackQuality(N,R.id)),Ue||function ve(){ue||Q.quality!==oe||ee?(ee?(V.debug("Switch track for "+N+", representation id = "+Q.id),ee=!1):V.debug("Quality has changed, get init request for representationid = "+Q.id),m.trigger(y.default.INIT_FRAGMENT_NEEDED,{representationId:Q.id,sender:f},{streamId:R.id,mediaType:N}),pe=!1,ue=!1):(V.debug("Media segment needed for ".concat(N," and stream id ").concat(R.id)),m.trigger(y.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:R.id,mediaType:N}),pe=!0)}()}else fe(x.getLowLatencyModeEnabled()?P.get().streaming.scheduling.lowLatencyTimeout:P.get().streaming.scheduling.defaultTimeout)}catch{fe(x.getLowLatencyModeEnabled()?P.get().streaming.scheduling.lowLatencyTimeout:P.get().streaming.scheduling.defaultTimeout)}}function E(){var Ue=NaN;return!N||!Q||(Ue=N===B.default.TEXT?function I(){try{if(O.isTextEnabled()){if(isNaN(Q.fragmentDuration)){var Ue=h.getCurrentSchedulingInfo(v.default.SCHEDULING_INFO);return Ue?Ue.duration:0}return Q.fragmentDuration}return 0}catch{return 0}}():N===B.default.AUDIO&&te?function U(){try{var Ue=h.getCurrentBufferLevel(B.default.VIDEO);return isNaN(Q.fragmentDuration)?Ue+1:Math.max(Ue+1,Q.fragmentDuration)}catch{return 0}}():function W(){try{var Ue=Q.mediaInfo.streamInfo;return C.isPlayingAtTopQuality(Ue)?Ue.manifestInfo.duration>=P.get().streaming.buffer.longFormContentDurationThreshold?P.get().streaming.buffer.bufferTimeAtTopQualityLongForm:P.get().streaming.buffer.bufferTimeAtTopQuality:g.getStableBufferTime()}catch{return g.getStableBufferTime()}}()),Ue}function Ie(){le(!0)}function le(Ue){if(x&&S){var Qe=S.getRequests({state:_.default.FRAGMENT_MODEL_EXECUTED,time:x.getTime(),threshold:0})[0];Qe&&x.getTime()>=Qe.startTime&&((!X.mediaInfo||Qe.mediaInfo.type===X.mediaInfo.type&&Qe.mediaInfo.id!==X.mediaInfo.id)&&Ue&&m.trigger(y.default.TRACK_CHANGE_RENDERED,{mediaType:N,oldMediaInfo:X.mediaInfo,newMediaInfo:Qe.mediaInfo,streamId:R.id}),(Qe.quality!==X.quality||Qe.adaptationIndex!==X.adaptationIndex)&&Ue&&(V.debug("Quality change rendered for streamId ".concat(R.id," and type ").concat(N)),m.trigger(y.default.QUALITY_CHANGE_RENDERED,{mediaType:N,oldQuality:X.quality,newQuality:Qe.quality,streamId:R.id})),X={mediaInfo:Qe.mediaInfo,quality:Qe.quality,adaptationIndex:Qe.adaptationIndex})}}function z(Ue){V.debug("Appended bytes for ".concat(Ue.mediaType," and stream id ").concat(R.id)),(isNaN(Ue.index)||isNaN(oe))&&(oe=Ue.quality,V.info("["+N+"] lastInitializedRepresentationInfo changed to "+Ue.quality)),fe(0)}function G(){S.abortRequests(),ce()}function Te(){P.get().streaming.scheduling.scheduleWhilePaused||fe()}function ye(Ue){h.updatePlayListTraceMetrics({playbackspeed:Ue.playbackRate.toString()})}function Le(){pe=!0,$=0,oe=NaN,X={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},K=NaN,ee=!1,ue=!1}return f={initialize:function ie(Ue){te=Ue,m.on(y.default.BYTES_APPENDED_END_FRAGMENT,z,f),m.on(y.default.URL_RESOLUTION_FAILED,G,f),m.on(p.default.PLAYBACK_STARTED,Te,f),m.on(p.default.PLAYBACK_RATE_CHANGED,ye,f),m.on(p.default.PLAYBACK_TIME_UPDATED,Ie,f)},getType:function me(){return N},getStreamId:function ae(){return R.id},setCurrentRepresentation:function ge(Ue){Q=Ue},setTimeToLoadDelay:function Ee(Ue){$=Ue},getTimeToLoadDelay:function Ce(){return $},setSwitchTrack:function re(Ue){ee=Ue},getSwitchStrack:function De(){return ee},startScheduleTimer:fe,clearScheduleTimer:ce,reset:function He(){m.off(y.default.BYTES_APPENDED_END_FRAGMENT,z,f),m.off(y.default.URL_RESOLUTION_FAILED,G,f),m.off(p.default.PLAYBACK_STARTED,Te,f),m.off(p.default.PLAYBACK_RATE_CHANGED,ye,f),m.off(p.default.PLAYBACK_TIME_UPDATED,Ie,f),ce(),le(!1),Le(),R=null},getBufferTarget:E,getPlaybackController:function Pe(){return x},setCheckPlaybackQuality:function Fe(Ue){pe=Ue},setInitSegmentRequired:function Oe(Ue){ue=Ue}},function _e(){V=Object(d.default)(F).getInstance().getLogger(f),Le(),R=b.streamInfo}(),f}L.__dashjs_factory_name="ScheduleController",k.default=D.default.getClassFactory(L)},"./src/streaming/controllers/ServiceDescriptionController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js"),M=u("./src/streaming/constants/Constants.js"),y=u("./src/dash/constants/DashConstants.js"),D=[M.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],d_VIDEO="video",d_AUDIO="audio",d_ANY="any",d_ALL="all";function v(){var L,b,F,m,h,p=this.context;function x(){b={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:NaN},minBitrate:{},maxBitrate:{},initialBitrate:{}},F=[]}function $(K,oe,ee){try{b[K][oe]=ee/1e3}catch(ue){m.error(ue)}}return L={getServiceDescriptionSettings:function O(){return b},getProducerReferenceTimeOffsets:function J(){return F},calculateProducerReferenceTimeOffsets:function te(K){try{var oe=[];if(K&&K.length>0){var ee=[M.default.VIDEO,M.default.AUDIO,M.default.TEXT],ue=h.getAvailabilityStartTime()/1e3;K.forEach(function(pe){var _e=ee.reduce(function(ie,me){return ie.concat(h.getAllMediaInfoForType(pe,me))},[]).reduce(function(ie,me){return h.getProducerReferenceTimes(pe,me).forEach(function(ge){var fe=h.getVoRepresentations(me);if(fe&&fe.length>0&&fe[0].adaptation&&fe[0].segmentInfoType===y.default.SEGMENT_TEMPLATE){var ce=fe[0],se=new Date(ge[y.default.WALL_CLOCK_TIME]).getTime()/1e3;ie.push({id:ge[y.default.ID],to:ue-(se-(ge[y.default.PRESENTATION_TIME]/ce[y.default.TIMESCALE]-ce[y.default.PRESENTATION_TIME_OFFSET]+pe.start))})}}),ie},[]);oe=oe.concat(_e)})}F=oe}catch(pe){m.error(pe),F=[]}},applyServiceDescription:function N(K){if(K&&K.serviceDescriptions){var oe=K.serviceDescriptions.filter(function(pe){return D.includes(pe.schemeIdUri)}),ee=K.serviceDescriptions.filter(function(pe){return null==pe.schemeIdUri}),ue=oe.length>0?oe[oe.length-1]:ee[ee.length-1];!ue||(ue.latency&&ue.latency.target>0&&function w(K){var oe;if(oe=K.schemeIdUri===M.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME?function f(K){return{liveDelay:K.latency.target/1e3,maxDrift:!isNaN(K.latency.max)&&K.latency.max>K.latency.target?(K.latency.max-K.latency.target+500)/1e3:NaN,referenceId:K.latency.referenceId||NaN}}(K):function P(K){return{liveDelay:K.latency.target/1e3,maxDrift:!isNaN(K.latency.max)&&K.latency.max>K.latency.target?(K.latency.max-K.latency.target+500)/1e3:NaN,referenceId:K.latency.referenceId||NaN}}(K),F.length>0){var ee=function X(K){var ee,oe=0,ue=F.filter(function(pe){return pe.id===K.referenceId});return 0===ue.length?(oe=F.length>0?F[0].to:0,ee=F[0].id||NaN):(oe=ue[0].to||0,ee=ue[0].id||NaN),{to:oe,id:ee}}(oe),ue=ee.to,pe=ee.id;b.liveDelay=oe.liveDelay-ue,b.liveCatchup.maxDrift=oe.maxDrift,m.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(ue," from ProducerReferenceTime element with id ").concat(pe,".\n                Live Delay: ").concat(oe.liveDelay-ue,", Live catchup max drift: ").concat(oe.maxDrift,"\n            "))}else b.liveDelay=oe.liveDelay,b.liveCatchup.maxDrift=oe.maxDrift,m.debug("Found latency properties coming from service description: Live Delay: ".concat(oe.liveDelay,", Live catchup max drift: ").concat(oe.maxDrift))}(ue),ue.playbackRate&&ue.playbackRate.max>1&&function R(K){var oe=Math.round(1e3*(K.playbackRate.max-1))/1e3;b.liveCatchup.playbackRate=oe,m.debug("Found latency properties coming from service description: Live catchup playback rate: ".concat(oe))}(ue),ue.operatingBandwidth&&function Q(K){if(K&&K.operatingBandwidth&&K.operatingBandwidth.mediaType&&K.operatingBandwidth.mediaType!==d_ALL){var oe={};oe.minBandwidth=K.operatingBandwidth.min,oe.maxBandwidth=K.operatingBandwidth.max,oe.targetBandwidth=K.operatingBandwidth.target;var ee=[];K.operatingBandwidth.mediaType===d_VIDEO||K.operatingBandwidth.mediaType===d_AUDIO?ee.push(K.operatingBandwidth.mediaType):K.operatingBandwidth.mediaType===d_ANY&&(ee.push(d_AUDIO),ee.push(d_VIDEO)),ee.forEach(function(ue){isNaN(oe.minBandwidth)||$("minBitrate",ue,oe.minBandwidth),isNaN(oe.maxBandwidth)||$("maxBitrate",ue,oe.maxBandwidth),isNaN(oe.targetBandwidth)||$("initialBitrate",ue,oe.targetBandwidth)})}}(ue))}},reset:function C(){x()},setConfig:function S(K){!K||K.adapter&&(h=K.adapter)}},function g(){m=Object(_.default)(p).getInstance().getLogger(L),x()}(),L}v.__dashjs_factory_name="ServiceDescriptionController",k.default=B.default.getSingletonFactory(v)},"./src/streaming/controllers/StreamController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/streaming/constants/MetricsConstants.js"),M=u("./src/streaming/Stream.js"),y=u("./src/streaming/ManifestUpdater.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/streaming/vo/metrics/PlayList.js"),L=u("./src/core/Debug.js"),b=u("./src/streaming/utils/InitCache.js"),F=u("./src/streaming/utils/URLUtils.js"),m=u("./src/streaming/MediaPlayerEvents.js"),h=u("./src/streaming/controllers/TimeSyncController.js"),g=u("./src/streaming/controllers/MediaSourceController.js"),S=u("./src/streaming/vo/DashJSError.js"),C=u("./src/core/errors/Errors.js"),x=u("./src/streaming/controllers/EventController.js"),O=u("./src/streaming/constants/ConformanceViolationConstants.js");function N(te){return function R(te){if(Array.isArray(te))return V(te)}(te)||function f(te){if(typeof Symbol<"u"&&Symbol.iterator in Object(te))return Array.from(te)}(te)||function P(te,X){if(te){if("string"==typeof te)return V(te,X);var K=Object.prototype.toString.call(te).slice(8,-1);if("Object"===K&&te.constructor&&(K=te.constructor.name),"Map"===K||"Set"===K)return Array.from(te);if("Arguments"===K||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(K))return V(te,X)}}(te)||function w(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(te,X){(null==X||X>te.length)&&(X=te.length);for(var K=0,oe=new Array(X);K<X;K++)oe[K]=te[K];return oe}function J(){var K,oe,ee,ue,pe,_e,ie,me,ae,ge,fe,ce,de,se,ve,ne,Y,H,E,I,U,W,re,De,Ie,le,z,G,Te,ye,Ee,Ce,Fe,Oe,Le,He,Pe,Ue,Qe,ft,lt,Dt,Ft,Ht,Jt,sn,te=this.context,X=Object(D.default)(te).getInstance();function ke(){!function at(){try{var Ye=me.getStreamsInfo();if(!re&&0===Ye.length)throw new Error("There are no periods in the MPD");re&&Ye.length>0&&ae.updateManifestUpdateInfo({currentTime:Fe.getTime(),buffered:Ce.getBufferRange(),presentationStartTime:Ye[0].start,clientTimeOffset:U.getClientTimeOffset()}),W.length>0&&function Mn(Ye){0!==Ye.length?W=W.filter(function(st){var en=Ye.filter(function(pn){return pn.id===st.getId()}).length>0||st.getId()===re.getId();return en||(oe.debug("Removing stream ".concat(st.getId())),st.reset(!0)),en}):oe.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Ye);for(var st=[],Ct=0,en=Ye.length;Ct<en;Ct++){var pn=Ye[Ct];st.push(dt(pn)),ae.addManifestUpdateStreamInfo(pn)}Promise.all(st).then(function(){re||et(Ye),X.trigger(d.default.STREAMS_COMPOSED),ln()}).catch(function(Sn){throw Sn})}catch(Sn){I.error(new S.default(C.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Sn.message+" nostreamscomposed",ie.getValue())),ye=!0,Wn()}}()}function Ze(){Ht=!0}function dt(Ye){var st=Me(Ye.id);return st?st.updateData(Ye):(st=Object(M.default)(te).create({manifestModel:ie,mediaPlayerModel:Le,dashMetrics:ae,manifestUpdater:pe,adapter:me,timelineConverter:U,capabilities:ee,capabilitiesFilter:ue,errHandler:I,baseURLController:ce,segmentBaseController:de,textController:Ie,abrController:ve,playbackController:Fe,eventController:Y,mediaController:ne,protectionController:De,videoModel:Ce,streamInfo:Ye,settings:Ft}),W.push(st),st.initialize(),Promise.resolve())}function et(Ye){Vt();var st=ae.getCurrentDVRInfo().range;if(st.end<st.start){Jt&&clearTimeout(Jt);var Ct=Math.min(1e3*(-1*(st.end-st.start)+2),2147483647);return oe.debug("Waiting for ".concat(Ct," ms before playback can start")),X.trigger(d.default.AST_IN_FUTURE,{delay:Ct}),void(Jt=setTimeout(function(){et(Ye)},Ct))}Ft.get().streaming.applyProducerReferenceTime&&Oe.calculateProducerReferenceTimeOffsets(Ye);var en=Ye[0].manifestInfo;if(Ft.get().streaming.applyServiceDescription&&Oe.applyServiceDescription(en),me.getIsDynamic()){var pn=Ln(Ye,en);Fe.computeAndSetLiveDelay(pn,en)}var Sn=function Tt(){var Ye;if(me.getIsDynamic()){var st=ae.getCurrentDVRInfo();Ye=(st&&st.range?st.range.end:0)-Fe.getLiveDelay();var en=st?st.range:null;if(en){var pn=nn(!0);if(!isNaN(pn)){oe.info("Start time from URI parameters: "+pn);var Sn=Ft.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Ye=Math.max(Math.min(Ye,pn),en.start+Sn)}}}else{Ye=xs()[0].getStreamInfo().start;var yn=nn(!1);isNaN(yn)||(oe.info("Start time from URI parameters: "+yn),Ye=Math.max(Ye,yn))}return Ye}(),Bt=ct(Sn),jr=null!==Bt?Bt:W[0];X.trigger(d.default.INITIAL_STREAM_SWITCH,{startTime:Sn}),pt(jr,null,Sn),function Qt(){Qe||(Qe=setInterval(function(){!G&&Fe.getTimeToStreamEnd()<=0&&!Fe.isSeeking()&&X.trigger(d.default.PLAYBACK_ENDED,{isLast:Ur().isLast})},200))}()}function pt(Ye,st,Ct){try{if(G||!Ye||st===Ye&&Ye.getIsActive())return;G=!0,X.trigger(d.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:st?st.getStreamInfo():null,toStreamInfo:Ye.getStreamInfo()});var en=!1;re=Ye,st&&(en=wt(Ye,st),st.deactivate(en)),Ct=isNaN(Ct)?!en&&st?Ye.getStreamInfo().start:NaN:Ct,oe.info("Switch to stream ".concat(Ye.getId(),". Seektime is ").concat(Ct,", current playback time is ").concat(Fe.getTime(),". Seamless period switch is set to ").concat(en)),lt=lt.filter(function(pn){return pn.getId()!==re.getId()}),Fe.initialize(Ur(),!!st),Ce.getElement()&&jt(Ct,en)}catch{G=!1}}function jt(Ye,st){var Ct;function en(){if(Ee&&"open"===Ee.readyState){oe.debug("MediaSource is open!"),window.URL.revokeObjectURL(Ct),Ee.removeEventListener("sourceopen",en),Ee.removeEventListener("webkitsourceopen",en),Lt();var Sn=ae.getCurrentDVRInfo();ge.setSeekable(Sn.range.start,Sn.range.end),Rt(Ye,st)}}function pn(){Ee.addEventListener("sourceopen",en,!1),Ee.addEventListener("webkitsourceopen",en,!1),Ct=ge.attachMediaSource(Ce),oe.debug("MediaSource attached to element.  Waiting on open...")}Ee?st?Rt(Ye,st):(ge.detachMediaSource(Ce),pn()):(Ee=ge.createMediaSource(),pn())}function Rt(Ye,st){re.activate(Ee,st?ft:void 0,Ye).then(function(Ct){if(Ct){var en=Object.keys(Ct);en.length>0&&Ct[en[0]].getBuffer().changeType&&(Dt=!0),ft=Ct}isNaN(Ye)||(X.trigger(d.default.SEEK_TARGET,{time:Ye},{streamId:re.getId()}),Fe.seek(Ye,!1,!0),re.startScheduleControllers()),G=!1,X.trigger(d.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Ur()})})}function Yt(Ye){var st=Fe.getTime(),Ct=Ye.seekTime,en=ct(Ct);en&&en!==re?en&&en!==re&&(Be(st,Ct),function Ot(Ye,st){var Ct=Ye&&!isNaN(Ye.seekTime)?Ye.seekTime:NaN,pn=re.getProcessors().map(function(Sn){return Sn.prepareOuterPeriodPlaybackSeeking(Ye)});Promise.all(pn).then(function(){pt(st,re,Ct)}).catch(function(Sn){I.error(Sn)})}(Ye,en)):(Be(st,Ct),function nt(Ye){re.getProcessors().forEach(function(Ct){return Ct.prepareInnerPeriodPlaybackSeeking(Ye)}),Kn(p.PlayListTrace.USER_REQUEST_STOP_REASON)}(Ye)),rn(p.PlayList.SEEK_START_REASON)}function Be(Ye,st){$e()}function $e(){lt&&lt.length>0&&(lt.forEach(function(Ye){Ye.deactivate(!0)}),lt=[])}function Mt(Ye){Ye.newMediaInfo.streamInfo.id===re.getId()&&($e(),re.prepareTrackChange(Ye))}function wt(Ye,st){try{return Ft.get().streaming.buffer.reuseExistingSourceBuffers&&(st.isProtectionCompatible(Ye)||Ht)&&(Dt||st.isMediaCodecCompatible(Ye,st))}catch{return!1}}function an(Ye){var st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ee&&!Ye.getPreloaded()&&wt(Ye,st)&&Ye.startPreloading(Ee,ft).then(function(){lt.push(Ye)})}function ct(Ye){if(isNaN(Ye))return null;for(var st=W.length,Ct=0;Ct<st;Ct++){var en=W[Ct];if(Ye<parseFloat((en.getStartTime()+en.getDuration()).toFixed(5)))return en}return null}function Vt(){try{var Ye=me.getIsDynamic(),Ct=me.getStreamsInfo()[0].manifestInfo,en=Fe.getTime(),pn=U.calcTimeShiftBufferWindow(W,Ye),Sn=ut();if(typeof pn.start>"u"||typeof pn.end>"u")return;Sn&&0!==Sn.length?Sn.forEach(function(Bt){ae.addDVRInfo(Bt.getType(),en,Ct,pn)}):ae.addDVRInfo(B.default.VIDEO,en,Ct,pn)}catch{}}function Ae(Ye){if(Ue&&z){var st=Le.getInitialBufferLevel(),Ct=[B.default.TEXT];(isNaN(st)||st<=Fe.getBufferLevel(Ct)||me.getIsDynamic()&&st>Fe.getLiveDelay())&&(Ue=!1,rn(p.PlayList.INITIAL_PLAYOUT_START_REASON),Fe.play())}Ye&&Ye.mediaType&&ae.addBufferLevel(Ye.mediaType,new Date,1e3*Ye.bufferLevel)}function Xe(Ye){Ye.streamInfo.id===re.getId()&&Ye.reason&&Ye.reason.forceReplace&&$e(),Me(Ye.streamInfo.id).prepareQualityChange(Ye)}function Et(){if(me.getIsDynamic()&&0!==Fe.getLiveDelay()){var Ye=me.getStreamsInfo();if(Ye.length>0){var st=Ye[0].manifestInfo,Ct=Ln(Ye,st);Fe.computeAndSetLiveDelay(Ct,st)}}}function tt(){if(In()){var Ye=Ce.getPlaybackQuality();Ye&&ae.addDroppedFrames(Ye)}}function rt(){oe.debug("[onPlaybackStarted]"),!Ue&&Pe&&rn(p.PlayList.RESUME_FROM_PAUSE_START_REASON),Ue&&(Ue=!1),Pe=!1}function yt(Ye){oe.debug("[onPlaybackPaused]"),Ye.ended||(Pe=!0,Kn(p.PlayListTrace.USER_REQUEST_STOP_REASON))}function $t(Ye){oe.debug("Stream with id ".concat(Ye.streamInfo.id," finished buffering")),Ee&&Ye.streamInfo.isLast?(oe.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),ge.signalEndOfStream(Ee)):ln()}function ln(){if(re&&re.getHasFinishedBuffering())for(var Ye=function ht(){var Ye=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var st=Ye||re||null;if(st){var Ct=st.getStreamInfo();return W.filter(function(en){var pn=en.getStreamInfo();return pn.start>Ct.start&&Ct.id!==pn.id})}}catch{return[]}}(re),st=0;st<Ye.length;){var Ct=Ye[st],en=0===st?re:Ye[st-1];!Ct.getPreloaded()&&en.getHasFinishedBuffering()&&Ee&&an(Ct,en),st+=1}}function Wt(){Qe&&(clearInterval(Qe),Qe=null)}function ut(){return re?re.getProcessors():[]}function We(Ye){if(re&&!re.getIsEndedEventSignaled()){re.setIsEndedEventSignaled(!0);var st=function ot(){var st=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||re||null;if(!st)return null;for(var Ct=st.getStreamInfo(),en=Ct.start,pn=0,Sn=-1,Bt=NaN;pn<W.length;){var yn=W[pn].getStreamInfo(),er=yn.start-en;er>0&&(isNaN(Bt)||er<Bt)&&Ct.id!==yn.id&&(Bt=er,Sn=pn),pn+=1}return Sn>=0?W[Sn]:null}();st?(oe.debug("StreamController onEnded, found next stream with id ".concat(st.getStreamInfo().id,". Switching from ").concat(re.getStreamInfo().id," to ").concat(st.getStreamInfo().id)),pt(st,re,NaN)):(oe.debug("StreamController no next stream found"),re.setIsEndedEventSignaled(!1)),Kn(st?p.PlayListTrace.END_OF_PERIOD_STOP_REASON:p.PlayListTrace.END_OF_CONTENT_STOP_REASON)}Ye&&Ye.isLast&&Wt()}function Lt(Ye){var st=Ye||Ur().manifestInfo.duration;ge.setDuration(st)}function nn(Ye){var st=se.getURIFragmentData();if(!st||!st.t)return NaN;var en=xs()[0].getStreamInfo().start;st.t=st.t.split(",")[0];var pn=-1!==st.t.indexOf("posix:")?"now"===st.t.substring(6)?Date.now()/1e3:parseInt(st.t.substring(6)):NaN;return Ye&&!isNaN(pn)?pn-Fe.getAvailabilityStartTime()/1e3:parseInt(st.t)+en}function Ln(Ye,st){try{var Ct=NaN;if(st&&!isNaN(st.maxFragmentDuration)&&isFinite(st.maxFragmentDuration))return st.maxFragmentDuration;if(Ye&&1===Ye.length){var en=Ye[0],Sn=[B.default.VIDEO,B.default.AUDIO,B.default.TEXT].reduce(function(Bt,jr){var yn=me.getMediaInfoForType(en,jr);return yn&&!1!==yn.isFragmented&&Bt.push(yn),Bt},[]).reduce(function(Bt,jr){var yn=me.getVoRepresentations(jr);return yn&&yn.length>0&&yn.forEach(function(er){er&&Bt.push(er)}),Bt},[]).reduce(function(Bt,jr){var yn=me.convertRepresentationToRepresentationInfo(jr);return yn&&yn.fragmentDuration&&!isNaN(yn.fragmentDuration)&&Bt.push(yn.fragmentDuration),Bt},[]);Ct=Math.max.apply(Math,N(Sn))}return isFinite(Ct)?Ct:NaN}catch{return NaN}}function Kt(Ye){if(Ye.error)ye=!0,Wn();else{oe.info("Manifest updated... updating data system wide.");var st=Ye.manifest;me.updatePeriods(st);var Ct=me.getUTCTimingSources();me.getIsDynamic()&&(!Ct||0===Ct.length)&&X.trigger(m.default.CONFORMANCE_VIOLATION,{level:O.default.LEVELS.WARNING,event:O.default.EVENTS.NO_UTC_TIMING_ELEMENT});var en=me.getIsDynamic()?Ct.concat(He.getUTCTimingSources()):Ct,pn=E.isHTTPS(Ye.manifest.url);en.forEach(function(Sn){Sn.value.replace(/.*?:\/\//g,"")===Ft.get().streaming.utcSynchronization.defaultTimingSource.value.replace(/.*?:\/\//g,"")&&(Sn.value=Sn.value.replace(pn?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),pn?"https://":"http://"),oe.debug("Matching default timing source protocol to manifest protocol: ",Sn.value))}),ue.filterUnsupportedFeatures(st).then(function(){ce.initialize(st),fe.attemptSync(en,me.getIsDynamic())})}}function In(){return!!re&&re.getHasVideoTrack()}function pr(){return!!re&&re.getHasAudioTrack()}function Kn(Ye,st){st=st||new Date,ut().forEach(function(Ct){Ct.finalisePlayList(st,Ye)}),ae.addPlayList()}function rn(Ye){ae.createPlaylistMetrics(1e3*Fe.getTime(),Ye)}function Dn(Ye){if(Ye.error){var st="";switch(Ye.error.code){case 1:st="MEDIA_ERR_ABORTED";break;case 2:st="MEDIA_ERR_NETWORK";break;case 3:st="MEDIA_ERR_DECODE",sn.counts.mediaErrorDecode+=1;break;case 4:st="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:st="MEDIA_ERR_ENCRYPTED";break;default:st="UNKNOWN"}if("MEDIA_ERR_DECODE"===st&&Ft.get().errors.recoverAttempts.mediaErrorDecode>=sn.counts.mediaErrorDecode)return void function Ei(){oe.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Ye=Fe.getTime();re.deactivate(!1),oe.warn("MediaSource has been resetted. Resuming playback from time ".concat(Ye)),jt(Ye,!1)}();Te=!0,Ye.error.message&&(st+=" ("+Ye.error.message+")"),Ye.error.msExtendedCode&&(st+=" (0x"+(Ye.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),oe.fatal("Video Element Error: "+st),Ye.error&&oe.fatal(Ye.error),I.error(new S.default(Ye.error.code,st)),Wn()}}function Ur(){return re?re.getStreamInfo():null}function Me(Ye){for(var st=0,Ct=W.length;st<Ct;st++)if(W[st].getId()===Ye)return W[st];return null}function be(){if(!(_e&&_e.hasOwnProperty("load")&&U&&U.hasOwnProperty("initialize")&&U.hasOwnProperty("reset")&&U.hasOwnProperty("getClientTimeOffset")&&ie&&I&&ae&&Fe))throw new Error(B.default.MISSING_CONFIG_ERROR)}function zt(Ye){isNaN(Ye.newDuration)||Lt(Ye.newDuration)}function Yn(){W=[],De=null,G=!1,re=null,Te=!1,ye=!1,Ue=!0,Pe=!1,z=!0,Qe=null,Ht=!1,Dt=!1,lt=[],Jt=null,sn={counts:{mediaErrorDecode:0}}}function Wn(){be(),fe.reset(),Kn(Te||ye?p.PlayListTrace.FAILURE_STOP_REASON:p.PlayListTrace.USER_REQUEST_STOP_REASON);for(var Ye=0,st=W?W.length:0;Ye<st;Ye++)W[Ye].reset(Te);(function Se(){X.off(m.default.PLAYBACK_TIME_UPDATED,tt,K),X.off(m.default.PLAYBACK_SEEKING,Yt,K),X.off(m.default.PLAYBACK_ERROR,Dn,K),X.off(m.default.PLAYBACK_STARTED,rt,K),X.off(m.default.PLAYBACK_PAUSED,yt,K),X.off(m.default.PLAYBACK_ENDED,We,K),X.off(m.default.METRIC_ADDED,yr,K),X.off(m.default.MANIFEST_VALIDITY_CHANGED,zt,K),X.off(m.default.BUFFER_LEVEL_UPDATED,Ae,K),X.off(m.default.QUALITY_CHANGE_REQUESTED,Xe,K),d.default.KEY_SESSION_UPDATED&&X.off(d.default.KEY_SESSION_UPDATED,Ze,K),X.off(d.default.MANIFEST_UPDATED,Kt,K),X.off(d.default.STREAM_BUFFERING_COMPLETED,$t,K),X.off(d.default.TIME_SYNCHRONIZATION_COMPLETED,ke,K),X.off(d.default.CURRENT_TRACK_CHANGED,Mt,K),X.off(d.default.SETTING_UPDATED_LIVE_DELAY,Et,K),X.off(d.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Et,K)})(),ce.reset(),pe.reset(),Y.reset(),ae.clearAllCurrentMetrics(),ie.setValue(null),_e.reset(),U.reset(),H.reset(),Ee&&(ge.detachMediaSource(Ce),Ee=null),Ce=null,De&&(De=null,le=null,ie.getValue()&&X.trigger(d.default.PROTECTION_DESTROYED,{data:ie.getValue().url})),Wt(),X.trigger(d.default.STREAM_TEARDOWN_COMPLETE),Yn()}function yr(Ye){if(Ye.metric===_.default.DVR_INFO){var st=pr()?B.default.AUDIO:B.default.VIDEO;Ye.mediaType===st&&ge.setSeekable(Ye.value.range.start,Ye.value.range.end)}}function xs(){return W}return K={initialize:function je(Ye,st){be(),z=Ye,le=st,U.initialize(),(pe=Object(y.default)(te).create()).setConfig({manifestModel:ie,adapter:me,manifestLoader:_e,errHandler:I,settings:Ft}),pe.initialize(),(Y=Object(x.default)(te).getInstance()).setConfig({manifestUpdater:pe,playbackController:Fe,settings:Ft}),Y.start(),fe.setConfig({dashMetrics:ae,baseURLController:ce,errHandler:I,settings:Ft}),fe.initialize(),De&&(X.trigger(d.default.PROTECTION_CREATED,{controller:De}),De.setMediaElement(Ce.getElement()),le&&De.setProtectionData(le)),function xe(){X.on(m.default.PLAYBACK_TIME_UPDATED,tt,K),X.on(m.default.PLAYBACK_SEEKING,Yt,K),X.on(m.default.PLAYBACK_ERROR,Dn,K),X.on(m.default.PLAYBACK_STARTED,rt,K),X.on(m.default.PLAYBACK_PAUSED,yt,K),X.on(m.default.PLAYBACK_ENDED,We,K),X.on(m.default.METRIC_ADDED,yr,K),X.on(m.default.MANIFEST_VALIDITY_CHANGED,zt,K),X.on(m.default.BUFFER_LEVEL_UPDATED,Ae,K),X.on(m.default.QUALITY_CHANGE_REQUESTED,Xe,K),d.default.KEY_SESSION_UPDATED&&X.on(d.default.KEY_SESSION_UPDATED,Ze,K),X.on(d.default.MANIFEST_UPDATED,Kt,K),X.on(d.default.STREAM_BUFFERING_COMPLETED,$t,K),X.on(d.default.TIME_SYNCHRONIZATION_COMPLETED,ke,K),X.on(d.default.CURRENT_TRACK_CHANGED,Mt,K),X.on(d.default.SETTING_UPDATED_LIVE_DELAY,Et,K),X.on(d.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Et,K)}()},getActiveStreamInfo:Ur,addDVRMetric:Vt,hasVideoTrack:In,hasAudioTrack:pr,getStreamById:Me,getStreamForTime:ct,getTimeRelativeToStreamId:function Je(Ye,st){for(var Ct=null,en=0,pn=0,Sn=null,Bt=0;Bt<W.length;Bt++){if(pn=(Ct=W[Bt]).getStartTime(),Sn=Ct.getDuration(),Number.isFinite(pn)&&(en=pn),Ct.getId()===st)return Ye-en;Number.isFinite(Sn)&&(en+=Sn)}return null},load:function it(Ye){be(),_e.load(Ye)},loadWithManifest:function It(Ye){(function Ke(){if(!pe||!pe.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),pe.setManifest(Ye)},getActiveStreamProcessors:ut,setConfig:function Tn(Ye){!Ye||(Ye.capabilities&&(ee=Ye.capabilities),Ye.capabilitiesFilter&&(ue=Ye.capabilitiesFilter),Ye.manifestLoader&&(_e=Ye.manifestLoader),Ye.manifestModel&&(ie=Ye.manifestModel),Ye.mediaPlayerModel&&(Le=Ye.mediaPlayerModel),Ye.customParametersModel&&(He=Ye.customParametersModel),Ye.protectionController&&(De=Ye.protectionController),Ye.adapter&&(me=Ye.adapter),Ye.dashMetrics&&(ae=Ye.dashMetrics),Ye.errHandler&&(I=Ye.errHandler),Ye.timelineConverter&&(U=Ye.timelineConverter),Ye.videoModel&&(Ce=Ye.videoModel),Ye.playbackController&&(Fe=Ye.playbackController),Ye.serviceDescriptionController&&(Oe=Ye.serviceDescriptionController),Ye.textController&&(Ie=Ye.textController),Ye.abrController&&(ve=Ye.abrController),Ye.mediaController&&(ne=Ye.mediaController),Ye.settings&&(Ft=Ye.settings),Ye.baseURLController&&(ce=Ye.baseURLController),Ye.uriFragmentModel&&(se=Ye.uriFragmentModel),Ye.segmentBaseController&&(de=Ye.segmentBaseController))},setProtectionData:function Gn(Ye){le=Ye,De&&De.setProtectionData(le)},getIsStreamSwitchInProgress:function _i(){return G},switchToVideoElement:function At(Ye){re&&(Fe.initialize(Ur()),jt(Ye,!1))},getHasMediaOrInitialisationError:function ii(){return Te||ye},getStreams:xs,getActiveStream:function Ut(){return re},getInitialPlayback:function Ge(){return Ue},getAutoPlay:function Nt(){return z},reset:Wn},function on(){oe=Object(L.default)(te).getInstance().getLogger(K),fe=Object(h.default)(te).getInstance(),ge=Object(g.default)(te).getInstance(),H=Object(b.default)(te).getInstance(),E=Object(F.default)(te).getInstance(),Yn()}(),K}J.__dashjs_factory_name="StreamController",k.default=v.default.getSingletonFactory(J)},"./src/streaming/controllers/TimeSyncController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/vo/DashJSError.js"),_=u("./src/streaming/vo/metrics/HTTPRequest.js"),M=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),D=u("./src/core/errors/Errors.js"),d=u("./src/core/FactoryMaker.js"),v=u("./src/core/Debug.js"),p=u("./src/streaming/utils/URLUtils.js");function x(){var f,R,V,Q,$,J,te,X,K,oe,ee,ue,pe,_e,ie,me,N=this.context,w=Object(M.default)(N).getInstance(),P=Object(p.default)(N).getInstance();function fe(){X=[],K=[],oe=null,ee=null,pe=null,ue=NaN,V=!1,Q=!1,_e=$.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function se(){!$.get().streaming.utcSynchronization.enabled||V||Q||!pe||!pe.value||!pe.schemeIdUri||isNaN(ue)||isNaN($.get().streaming.utcSynchronization.backgroundAttempts)||ee&&(Date.now()-ee)/1e3<30||(X=[],Q=!0,ve(isNaN($.get().streaming.utcSynchronization.backgroundAttempts)?2:$.get().streaming.utcSynchronization.backgroundAttempts))}function ve(Oe){try{if(Oe<=0)return void Ee();var Le=Date.now();J[pe.schemeIdUri](pe.value,function(He){var Pe=Date.now(),Ue=Y(Le,Pe,He);X.push(Ue),ve(Oe-1)},function(){Ee()})}catch{Ee()}}function ne(){var Le=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||0;if(!K||0===K.length||Le>=K.length)E();else{var He=K[Le];if(He)if(J.hasOwnProperty(He.schemeIdUri)){var Pe=(new Date).getTime();J[He.schemeIdUri](He.value,function(Ue){var Qe=(new Date).getTime(),ft=Y(Pe,Qe,Ue);pe=He,E(ft)},function(){ne(Le+1)})}else ne(Le+1);else E()}}function Y(Oe,Le,He){return He-(Le-(Le-Oe)/2)}function E(){var Oe=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,Le=isNaN(Oe);Le&&$.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?G():Te(Le,Oe)}function U(Oe){var Le=Date.parse(Oe);return isNaN(Le)&&(Le=function I(Oe){var Qe,ft,lt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Oe);return Qe=Date.UTC(parseInt(lt[1],10),parseInt(lt[2],10)-1,parseInt(lt[3],10),parseInt(lt[4],10),parseInt(lt[5],10),lt[6]&&(parseInt(lt[6],10)||0),lt[7]&&1e3*parseFloat(lt[7])||0),lt[9]&&lt[10]&&(ft=60*parseInt(lt[9],10)+parseInt(lt[10],10),Qe+=("+"===lt[8]?-1:1)*ft*60*1e3),new Date(Qe).getTime()}(Oe)),Le}function W(Oe){return Date.parse(Oe)}function re(Oe){return Date.parse(Oe)}function De(Oe,Le,He){He()}function Ie(Oe,Le,He){var Pe=U(Oe);isNaN(Pe)?He():Le(Pe)}function le(Oe,Le,He,Pe,Ue){var Qe,ft,lt=!1,Dt=new XMLHttpRequest,Ft=Ue?_.HTTPRequest.HEAD:_.HTTPRequest.GET,Ht=Le.match(/\S+/g);if(Le=Ht.shift(),Qe=function(){lt||(lt=!0,Ht.length?le(Oe,Ht.join(" "),He,Pe,Ue):Pe())},ft=function(){var on,je;200===Dt.status&&(on=Ue?Dt.getResponseHeader("Date"):Dt.response,je=Oe(on),isNaN(je)||(He(je),lt=!0))},P.isRelative(Le)){var Jt=me.resolve();Jt&&(Le=P.resolve(Le,Jt.url))}Dt.open(Ft,Le),Dt.timeout=5e3,Dt.onload=ft,Dt.onloadend=Qe,Dt.send()}function z(Oe,Le,He){le(re,Oe,Le,He,!0)}function G(){var Oe=te.getLatestMPDRequestHeaderValueByID("Date"),Le=null!==Oe?new Date(Oe).getTime():Number.NaN;isNaN(Le)?Te(!0):Te(!1,Le-Date.now())}function Te(Oe,Le){if(!isNaN(ue)&&!isNaN(Le)&&!Oe&&function ye(Oe){try{var ft,Le=Ce(Oe),He=isNaN(_e)?30:_e,Pe=isNaN($.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:$.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Ue=isNaN($.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:$.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Qe=isNaN($.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:$.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;Le?(ft=Math.min(He*Pe,Ue),R.debug("Increasing timeBetweenSyncAttempts to ".concat(ft))):(ft=Math.max(He/Pe,Qe),R.debug("Decreasing timeBetweenSyncAttempts to ".concat(ft))),_e=ft}catch{}}(Le),!Oe&&!isNaN(Le)){oe=Date.now(),V=!1;var He=isNaN(ue);ue=Le,He&&se(),R.debug("Completed UTC sync. Setting client - server offset to ".concat(Le))}Oe&&(pe=null,V=!1,ie.error(new B.default(D.default.TIME_SYNC_FAILED_ERROR_CODE,D.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),w.trigger(y.default.UPDATE_TIME_SYNC_OFFSET,{offset:Le}),w.trigger(y.default.TIME_SYNCHRONIZATION_COMPLETED)}function Ee(){if(X&&0!==X.length){var Oe=X.reduce(function(Le,He){return Le+He},0)/X.length;Ce(Oe)?R.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(R.debug("Completed background UTC sync. Setting client - server offset to ".concat(Oe)),w.trigger(y.default.UPDATE_TIME_SYNC_OFFSET,{offset:ue=Oe})),Q=!1,ee=Date.now()}}function Ce(Oe){try{if(isNaN(ue))return!0;var Le=$.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN($.get().streaming.utcSynchronization.maximumAllowedDrift)?$.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Oe>=ue-Le&&Oe<=ue+Le}catch{return!0}}return f={initialize:function ce(){fe(),J={"urn:mpeg:dash:utc:http-head:2014":z,"urn:mpeg:dash:utc:http-xsdate:2014":le.bind(null,U),"urn:mpeg:dash:utc:http-iso:2014":le.bind(null,W),"urn:mpeg:dash:utc:direct:2014":Ie,"urn:mpeg:dash:utc:http-head:2012":z,"urn:mpeg:dash:utc:http-xsdate:2012":le.bind(null,U),"urn:mpeg:dash:utc:http-iso:2012":le.bind(null,W),"urn:mpeg:dash:utc:direct:2012":Ie,"urn:mpeg:dash:utc:http-ntp:2014":De,"urn:mpeg:dash:utc:ntp:2014":De,"urn:mpeg:dash:utc:sntp:2014":De}},attemptSync:function de(Oe,Le){if(K=Oe,!V){if(!function H(Oe){try{if(!Oe||!$.get().streaming.utcSynchronization.enabled)return!1;var Le=isNaN(_e)?30:_e;return!(oe&&Le&&!isNaN(Le))||(Date.now()-oe)/1e3>=Le}catch{return!0}}(Le))return void w.trigger(y.default.TIME_SYNCHRONIZATION_COMPLETED);V=!0,ne()}},setConfig:function ge(Oe){!Oe||(Oe.dashMetrics&&(te=Oe.dashMetrics),Oe.baseURLController&&(me=Oe.baseURLController),Oe.errHandler&&(ie=Oe.errHandler),Oe.settings&&($=Oe.settings))},reset:function Fe(){fe(),w.off(y.default.ATTEMPT_BACKGROUND_SYNC,se,f)}},function ae(){R=Object(v.default)(N).getInstance().getLogger(f),w.on(y.default.ATTEMPT_BACKGROUND_SYNC,se,f)}(),f}x.__dashjs_factory_name="TimeSyncController";var O=d.default.getSingletonFactory(x);O.HTTP_TIMEOUT_MS=5e3,d.default.updateSingletonFactory(x.__dashjs_factory_name,O),k.default=O},"./src/streaming/controllers/XlinkController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/XlinkLoader.js"),_=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),y=u("./src/core/FactoryMaker.js"),D=u("./externals/xml2json.js"),d=u("./src/streaming/utils/URLUtils.js"),v=u("./src/dash/constants/DashConstants.js"),p="onLoad";function F(m){m=m||{};var C,x,O,N,w,P,h=this.context,g=Object(_.default)(h).getInstance(),S=Object(d.default)(h).getInstance();function J(_e,ie,me){var ge,fe,ae={};ae.elements=_e,ae.type=ie,ae.resolveType=me,0===ae.elements.length&&X(ae);for(var ce=0;ce<ae.elements.length;ce++)fe=S.isHTTPURL((ge=ae.elements[ce]).url)?ge.url:ge.originalContent.BaseURL+ge.url,P.load(fe,ge,ae)}function te(_e){var ie,me,fe="";if(me=_e.resolveObject,(ie=_e.element).resolvedContent){var ce=0;0===ie.resolvedContent.indexOf("<?xml")&&(ce=ie.resolvedContent.indexOf("?>")+2),fe=ie.resolvedContent.substr(0,ce)+"<response>"+ie.resolvedContent.substr(ce)+"</response>",ie.resolvedContent=w.xml_str2json(fe)}(function ue(_e){var ie;for(ie=0;ie<_e.elements.length;ie++)if(!1===_e.elements[ie].resolved)return!1;return!0})(me)&&X(me)}function X(_e){var me,ae,ie=[];if(function oe(_e){var me,ae,fe,ce,de,ie=[];for(fe=_e.elements.length-1;fe>=0;fe--){if(ae=(me=_e.elements[fe]).type+"_asArray",me.resolvedContent){if(me.resolvedContent)for(ce=0;ce<me.resolvedContent[ae].length;ce++)ie.push(me.resolvedContent[ae][ce])}else delete me.originalContent["xlink:actuate"],delete me.originalContent["xlink:href"],ie.push(me.originalContent);for(me.parentElement[ae].splice(me.index,1),de=0;de<ie.length;de++)me.parentElement[ae].splice(me.index+de,0,ie[de]);ie=[]}_e.elements.length>0&&O.run(N)}(_e),"onActuate"===_e.resolveType&&g.trigger(M.default.XLINK_READY,{manifest:N}),_e.resolveType===p)switch(_e.type){case v.default.PERIOD:for(me=0;me<N[v.default.PERIOD+"_asArray"].length;me++)(ae=N[v.default.PERIOD+"_asArray"][me]).hasOwnProperty(v.default.ADAPTATION_SET+"_asArray")&&(ie=ie.concat(K(ae[v.default.ADAPTATION_SET+"_asArray"],ae,v.default.ADAPTATION_SET,p))),ae.hasOwnProperty(v.default.EVENT_STREAM+"_asArray")&&(ie=ie.concat(K(ae[v.default.EVENT_STREAM+"_asArray"],ae,v.default.EVENT_STREAM,p)));J(ie,v.default.ADAPTATION_SET,p);break;case v.default.ADAPTATION_SET:g.trigger(M.default.XLINK_READY,{manifest:N})}}function K(_e,ie,me,ae){var fe,ce,de,ge=[];for(ce=_e.length-1;ce>=0;ce--)(fe=_e[ce]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===fe["xlink:href"]&&_e.splice(ce,1);for(ce=0;ce<_e.length;ce++)(fe=_e[ce]).hasOwnProperty("xlink:href")&&fe.hasOwnProperty("xlink:actuate")&&fe["xlink:actuate"]===ae&&(de=ee(fe["xlink:href"],ie,me,ce,ae,fe),ge.push(de));return ge}function ee(_e,ie,me,ae,ge,fe){return{url:_e,parentElement:ie,type:me,index:ae,resolveType:ge,originalContent:fe,resolvedContent:null,resolved:!1}}return C={resolveManifestOnLoad:function Q(_e){w=new D.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:x}),(N=_e).Period_asArray?J(K(N.Period_asArray,N,v.default.PERIOD,p),v.default.PERIOD,p):g.trigger(M.default.XLINK_READY,{manifest:N})},setMatchers:function R(_e){_e&&(x=_e)},setIron:function V(_e){_e&&(O=_e)},reset:function $(){g.off(M.default.XLINK_ELEMENT_LOADED,te,C),P&&(P.reset(),P=null)}},function f(){g.on(M.default.XLINK_ELEMENT_LOADED,te,C),P=Object(B.default)(h).create({errHandler:m.errHandler,dashMetrics:m.dashMetrics,mediaPlayerModel:m.mediaPlayerModel,requestModifier:m.requestModifier,settings:m.settings})}(),C}F.__dashjs_factory_name="XlinkController",k.default=y.default.getClassFactory(F)},"./src/streaming/metrics/MetricsReporting.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),_=u("./src/streaming/metrics/MetricsReportingEvents.js"),M=u("./src/streaming/metrics/controllers/MetricsCollectionController.js"),y=u("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),D=u("./src/streaming/metrics/reporting/ReportingFactory.js");function d(){var p=this.context;return{createMetricsReporting:function F(g){return Object(B.default)(p).getInstance({eventBus:g.eventBus,dashMetrics:g.dashMetrics,metricsConstants:g.metricsConstants,events:g.events}).initialise(),Object(M.default)(p).create(g)},getReportingFactory:function m(){return Object(D.default)(p).getInstance()},getMetricsHandlerFactory:function h(){return Object(y.default)(p).getInstance()}}}d.__dashjs_factory_name="MetricsReporting";var v=dashjs.FactoryMaker.getClassFactory(d);v.events=_.default,dashjs.FactoryMaker.updateClassFactory(d.__dashjs_factory_name,v),k.default=v},"./src/streaming/metrics/MetricsReportingEvents.js":function(we,k,u){"use strict";function _(h){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function y(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function d(h){var g=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=b(h);if(g){var O=b(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return v(this,x)}}function v(h,g){return!g||"object"!==_(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function b(h){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){y(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",C.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",C.CMCD_DATA_GENERATED="cmcdDataGenerated",C}return S}(u("./src/core/events/EventsBase.js").default));k.default=m},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/controllers/MetricsController.js"),_=u("./src/streaming/metrics/utils/ManifestParsing.js"),M=u("./src/streaming/metrics/MetricsReportingEvents.js");function y(D){var d,v={},p=this.context,L=(D=D||{}).eventBus,b=D.events;function F(S){if(!S.error){var C=Object.keys(v);Object(_.default)(p).getInstance({adapter:D.adapter,constants:D.constants}).getMetrics(S.manifest).forEach(function(O){var N=JSON.stringify(O);if(v.hasOwnProperty(N))C.splice(N,1);else try{var w=Object(B.default)(p).create(D);w.initialize(O),v[N]=w}catch{}}),C.forEach(function(O){v[O].reset(),delete v[O]}),L.trigger(M.default.METRICS_INITIALISATION_COMPLETE)}}function m(){Object.keys(v).forEach(function(S){v[S].reset()}),v={}}return d={reset:function g(){L.off(b.MANIFEST_UPDATED,F,d),L.off(b.STREAM_TEARDOWN_COMPLETE,m,d)}},function h(){L.on(b.MANIFEST_UPDATED,F,d),L.on(b.STREAM_TEARDOWN_COMPLETE,m,d)}(),d}y.__dashjs_factory_name="MetricsCollectionController",k.default=dashjs.FactoryMaker.getClassFactory(y)},"./src/streaming/metrics/controllers/MetricsController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/controllers/RangeController.js"),_=u("./src/streaming/metrics/controllers/ReportingController.js"),M=u("./src/streaming/metrics/controllers/MetricsHandlersController.js");function y(D){D=D||{};var d,v,p,b=this.context;function m(){d&&d.reset(),v&&v.reset(),p&&p.reset()}return{initialize:function F(h){try{(p=Object(B.default)(b).create({mediaElement:D.mediaElement})).initialize(h.Range),(v=Object(_.default)(b).create({debug:D.debug,metricsConstants:D.metricsConstants,mediaPlayerModel:D.mediaPlayerModel})).initialize(h.Reporting,p),(d=Object(M.default)(b).create({debug:D.debug,eventBus:D.eventBus,metricsConstants:D.metricsConstants,events:D.events})).initialize(h.metrics,v)}catch(g){throw m(),g}},reset:m}}y.__dashjs_factory_name="MetricsController",k.default=dashjs.FactoryMaker.getClassFactory(y)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function _(M){var D,y=[],d=this.context,v=(M=M||{}).eventBus,p=M.events,L=Object(B.default)(d).getInstance({debug:M.debug,eventBus:M.eventBus,metricsConstants:M.metricsConstants});function b(h){y.forEach(function(g){g.handleNewMetric(h.metric,h.value,h.mediaType)})}return D={initialize:function F(h,g){h.split(",").forEach(function(S,C,x){var O;if(-1!==S.indexOf("(")&&-1===S.indexOf(")")){var N=x[C+1];N&&-1===N.indexOf("(")&&-1!==N.indexOf(")")&&(S+=","+N,delete x[C+1])}(O=L.create(S,g))&&y.push(O)}),v.on(p.METRIC_ADDED,b,D),v.on(p.METRIC_UPDATED,b,D)},reset:function m(){v.off(p.METRIC_ADDED,b,D),v.off(p.METRIC_UPDATED,b,D),y.forEach(function(h){return h.reset()}),y=[]}}}_.__dashjs_factory_name="MetricsHandlersController",k.default=dashjs.FactoryMaker.getClassFactory(_)},"./src/streaming/metrics/controllers/RangeController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/utils/CustomTimeRanges.js");function _(M){var d,v,y=!1,D=this.context,p=(M=M||{}).mediaElement;return d={initialize:function L(h){h&&h.length&&(h.forEach(function(g){var S=g.starttime;v.add(S,S+g.duration)}),y=!!h[0]._useWallClockTime)},reset:function b(){v.clear()},isEnabled:function m(){var g,h=v.length;if(!h)return!0;g=y?(new Date).getTime()/1e3:p.currentTime;for(var S=0;S<h;S+=1){var C=v.start(S),x=v.end(S);if(C<=g&&g<x)return!0}return!1}},function F(){v=Object(B.default)(D).create()}(),d}_.__dashjs_factory_name="RangeController",k.default=dashjs.FactoryMaker.getClassFactory(_)},"./src/streaming/metrics/controllers/ReportingController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/reporting/ReportingFactory.js");function _(M){var y=[],d=Object(B.default)(this.context).getInstance(M);return{initialize:function v(b,F){b.some(function(m){var h=d.create(m,F);if(h)return y.push(h),!0})},reset:function p(){y.forEach(function(b){return b.reset()}),y=[]},report:function L(b,F){y.forEach(function(m){return m.report(b,F)})}}}_.__dashjs_factory_name="ReportingController",k.default=dashjs.FactoryMaker.getClassFactory(_)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),_=u("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),M=u("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),y=u("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function D(d){var v,p=(d=d||{}).debug?d.debug.getLogger(v):{},L=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,b=this.context,F={BufferLevel:B.default,DVBErrors:_.default,HttpList:M.default,PlayList:y.default,RepSwitchList:y.default,TcpList:y.default};return{create:function m(S,C){var O,x=S.match(L);if(x){try{(O=F[x[1]](b).create({eventBus:d.eventBus,metricsConstants:d.metricsConstants})).initialize(x[1],C,x[3],x[5])}catch(N){O=null,p.error("MetricsHandlerFactory: Could not create handler for type ".concat(x[1]," with args ").concat(x[3],", ").concat(x[5]," (").concat(N.message,")"))}return O}},register:function h(S,C){F[S]=C},unregister:function g(S){delete F[S]}}}D.__dashjs_factory_name="MetricsHandlerFactory",k.default=dashjs.FactoryMaker.getSingletonFactory(D)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/utils/HandlerHelpers.js");function _(M){M=M||{};var D,d,v,p,L,b=this.context,F=Object(B.default)(b).getInstance(),m=[],h=M.metricsConstants;function S(){var N=function g(){try{return Object.keys(m).map(function(N){return m[N]}).reduce(function(N,w){return N.level<w.level?N:w})}catch{return}}();N&&L!==N.t&&(L=N.t,D.report(v,N))}return{initialize:function C(N,w,P){w&&(d=F.validateN(P),D=w,v=F.reconstructFullMetricName(N,P),p=setInterval(S,d))},reset:function x(){clearInterval(p),p=null,d=0,D=null,L=null},handleNewMetric:function O(N,w,P){N===h.BUFFER_LEVEL&&(m[P]=w)}}}_.__dashjs_factory_name="BufferLevelHandler",k.default=dashjs.FactoryMaker.getClassFactory(_)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/MetricsReportingEvents.js");k.default=dashjs.FactoryMaker.getClassFactory(function _(M){var D,d=(M=M||{}).eventBus,v=M.metricsConstants;function p(){d.off(B.default.METRICS_INITIALISATION_COMPLETE,p,this),d.trigger(B.default.BECAME_REPORTING_PLAYER)}return{initialize:function L(m,h){h&&(D=h,d.on(B.default.METRICS_INITIALISATION_COMPLETE,p,this))},reset:function b(){D=null},handleNewMetric:function F(m,h){m===v.DVB_ERRORS&&D&&D.report(m,h)}}})},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(we,k,u){"use strict";function B(){var M,y;return{initialize:function D(p,L){M=p,y=L},reset:function d(){y=null,M=void 0},handleNewMetric:function v(p,L){p===M&&y&&y.report(M,L)}}}u.r(k),B.__dashjs_factory_name="GenericMetricHandler",k.default=dashjs.FactoryMaker.getClassFactory(B)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/utils/HandlerHelpers.js");function _(M){M=M||{};var D,d,v,p,L,b=[],F=Object(B.default)(this.context).getInstance(),m=M.metricsConstants;function h(){b.length&&D&&D.report(p,b),b=[]}return{initialize:function g(x,O,N,w){O&&(d=F.validateN(N),D=O,w&&w.length&&(v=w),p=F.reconstructFullMetricName(x,N,w),L=setInterval(h,d))},reset:function S(){clearInterval(L),L=null,d=null,v=null,b=[],D=null},handleNewMetric:function C(x,O){x===m.HTTP_REQUEST&&(!v||v===O.type)&&b.push(O)}}}_.__dashjs_factory_name="HttpListHandler",k.default=dashjs.FactoryMaker.getClassFactory(_)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function _(M){var d,y={"urn:dvb:dash:reporting:2014":B.default},D=this.context,v=(M=M||{}).debug?M.debug.getLogger(d):{},p=M.metricsConstants,L=M.mediaPlayerModel||{};return{create:function b(h,g){var S;try{(S=y[h.schemeIdUri](D).create({metricsConstants:p,mediaPlayerModel:L})).initialize(h,g)}catch(C){S=null,v.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(h.schemeIdUri," (").concat(C.message,")"))}return S},register:function F(h,g){y[h]=g},unregister:function m(h){delete y[h]}}}_.__dashjs_factory_name="ReportingFactory",k.default=dashjs.FactoryMaker.getSingletonFactory(_)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/utils/MetricSerialiser.js"),_=u("./src/streaming/metrics/utils/RNG.js"),M=u("./src/streaming/models/CustomParametersModel.js");function y(D){var d,p,L,b,F,m,h,g,v=this.context,x=[],O=(D=D||{}).metricsConstants;function R(){F=!1,m=!1,h=null,g=null}return d={report:function P(Q,$){Array.isArray($)||($=[$]),m&&g.isEnabled()&&$.forEach(function(J){var te=p.serialise(J);Q!==O.DVB_ERRORS&&(te="metricname=".concat(Q,"&").concat(te)),function w(Q,$,J){var te=new XMLHttpRequest;te.withCredentials=L.getXHRWithCredentialsForType(O.HTTP_REQUEST_DVB_REPORTING_TYPE);var X=function(){var oe=x.indexOf(te);-1!==oe&&(x.splice(oe,1),te.status>=200&&te.status<300?$&&$():J&&J())};x.push(te);try{te.open("GET",Q),te.onloadend=X,te.onerror=X,te.send()}catch{te.onerror()}}(te="".concat(h,"?").concat(te),null,function(){m=!1})})},initialize:function f(Q,$){var J;if(g=$,!(h=Q.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");F||((J=Q.dvb_probability)&&(1e3===J||J/1e3>=b.random())&&(m=!0),F=!0)},reset:function V(){R()}},function N(){p=Object(B.default)(v).getInstance(),b=Object(_.default)(v).getInstance(),L=Object(M.default)(v).getInstance(),R()}(),d}y.__dashjs_factory_name="DVBReporting",k.default=dashjs.FactoryMaker.getClassFactory(y)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/vo/DVBErrors.js"),_=u("./src/streaming/metrics/MetricsReportingEvents.js");function M(y){var D,d,v=(y=y||{}).eventBus,p=y.dashMetrics,L=y.metricsConstants,b=y.events;function F(w){var P=new B.default;if(d){for(var f in w)w.hasOwnProperty(f)&&(P[f]=w[f]);P.mpdurl||(P.mpdurl=d.originalUrl||d.url),P.terror||(P.terror=new Date),p.addDVBErrors(P)}}function m(w){w.error||(d=w.manifest)}function h(w){F({errorcode:B.default.BASE_URL_CHANGED,servicelocation:w.entry})}function g(){F({errorcode:B.default.BECAME_REPORTER})}function C(w){w.metric===L.HTTP_REQUEST&&function S(w){(0===w.responsecode||null==w.responsecode||w.responsecode>=400||w.responsecode<100||w.responsecode>=600)&&F({errorcode:w.responsecode||B.default.CONNECTION_ERROR,url:w.url,terror:w.tresponse,servicelocation:w._serviceLocation})}(w.value)}function x(w){var f;switch(w.error?w.error.code:0){case MediaError.MEDIA_ERR_NETWORK:f=B.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:f=B.default.CORRUPT_MEDIA_OTHER;break;default:return}F({errorcode:f})}return D={initialise:function O(){v.on(b.MANIFEST_UPDATED,m,D),v.on(b.SERVICE_LOCATION_BLACKLIST_CHANGED,h,D),v.on(b.METRIC_ADDED,C,D),v.on(b.METRIC_UPDATED,C,D),v.on(b.PLAYBACK_ERROR,x,D),v.on(_.default.BECAME_REPORTING_PLAYER,g,D)},reset:function N(){v.off(b.MANIFEST_UPDATED,m,D),v.off(b.SERVICE_LOCATION_BLACKLIST_CHANGED,h,D),v.off(b.METRIC_ADDED,C,D),v.off(b.METRIC_UPDATED,C,D),v.off(b.PLAYBACK_ERROR,x,D),v.off(_.default.BECAME_REPORTING_PLAYER,g,D)}}}M.__dashjs_factory_name="DVBErrorsTranslator",k.default=dashjs.FactoryMaker.getSingletonFactory(M)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(we,k,u){"use strict";function B(){return{reconstructFullMetricName:function(M,y,D){var d=M;return y&&(d+="("+y,D&&D.length&&(d+=","+D),d+=")"),d},validateN:function(M){if(!M)throw new Error("missing n");if(isNaN(M))throw new Error("n is NaN");if(M<0)throw new Error("n must be positive");return M}}}u.r(k),B.__dashjs_factory_name="HandlerHelpers",k.default=dashjs.FactoryMaker.getSingletonFactory(B)},"./src/streaming/metrics/utils/ManifestParsing.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/metrics/vo/Metrics.js"),_=u("./src/streaming/metrics/vo/Range.js"),M=u("./src/streaming/metrics/vo/Reporting.js");function y(D){var v=(D=D||{}).adapter,p=D.constants;return{getMetrics:function b(F){var m=[];return F&&F.Metrics_asArray&&F.Metrics_asArray.forEach(function(h){var g=new B.default,S=v.getIsDynamic(F);h.hasOwnProperty("metrics")&&(g.metrics=h.metrics,h.Range_asArray&&h.Range_asArray.forEach(function(C){var x=new _.default;x.starttime=function L(F,m,h){var g,S,C=0;return m?C=v.getAvailabilityStartTime(F)/1e3:(g=v.getRegularPeriods(F)).length&&(C=g[0].start),S=C,h&&h.hasOwnProperty(p.START_TIME)&&(S+=h.starttime),S}(F,S,C),x.duration=C.hasOwnProperty("duration")?C.duration:v.getDuration(F),x._useWallClockTime=S,g.Range.push(x)}),h.Reporting_asArray&&(h.Reporting_asArray.forEach(function(C){var x=new M.default;C.hasOwnProperty(p.SCHEME_ID_URI)&&(x.schemeIdUri=C.schemeIdUri,C.hasOwnProperty("value")&&(x.value=C.value),C.hasOwnProperty(p.DVB_REPORTING_URL)&&(x.dvb_reportingUrl=C[p.DVB_REPORTING_URL]),C.hasOwnProperty(p.DVB_PROBABILITY)&&(x.dvb_probability=C[p.DVB_PROBABILITY]),g.Reporting.push(x))}),m.push(g)))}),m}}}y.__dashjs_factory_name="ManifestParsing",k.default=dashjs.FactoryMaker.getSingletonFactory(y)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(we,k,u){"use strict";function B(){return{serialise:function _(M){var d,v,y=[],D=[];for(d in M)if(M.hasOwnProperty(d)&&0!==d.indexOf("_")){if(null==(v=M[d])&&(v=""),Array.isArray(v)){if(!v.length)continue;D=[],v.forEach(function(p){var L="Object"!==Object.prototype.toString.call(p).slice(8,-1);D.push(L?p:_(p))}),v=D.map(encodeURIComponent).join(",")}else"string"==typeof v?v=encodeURIComponent(v):v instanceof Date?v=v.toISOString():"number"==typeof v&&(v=Math.round(v));y.push(d+"="+v)}return y.join("&")}}}u.r(k),B.__dashjs_factory_name="MetricSerialiser",k.default=dashjs.FactoryMaker.getSingletonFactory(B)},"./src/streaming/metrics/utils/RNG.js":function(we,k,u){"use strict";function B(){var d,v,p,_=window.crypto||window.msCrypto,M=Uint32Array,y=Math.pow(2,8*M.BYTES_PER_ELEMENT)-1;function L(){_&&(d||(d=new M(10)),_.getRandomValues(d),v=0)}return p={random:function b(F,m){var h;return F||(F=0),m||(m=1),_?(v===d.length&&L(),h=d[v]/y,v+=1):h=Math.random(),h*(m-F)+F}},L(),p}u.r(k),B.__dashjs_factory_name="RNG",k.default=dashjs.FactoryMaker.getSingletonFactory(B)},"./src/streaming/metrics/vo/DVBErrors.js":function(we,k,u){"use strict";u.r(k);var _=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};_.SSL_CONNECTION_FAILED_PREFIX="SSL",_.DNS_RESOLUTION_FAILED="C00",_.HOST_UNREACHABLE="C01",_.CONNECTION_REFUSED="C02",_.CONNECTION_ERROR="C03",_.CORRUPT_MEDIA_ISOBMFF="M00",_.CORRUPT_MEDIA_OTHER="M01",_.BASE_URL_CHANGED="F00",_.BECAME_REPORTER="S00",k.default=_},"./src/streaming/metrics/vo/Metrics.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.metrics="",this.Range=[],this.Reporting=[]}},"./src/streaming/metrics/vo/Range.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},"./src/streaming/metrics/vo/Reporting.js":function(we,k,u){"use strict";u.r(k);k.default=function y(){(function B(y,D){if(!(y instanceof D))throw new TypeError("Cannot call a class as a function")})(this,y),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3}},"./src/streaming/models/BaseURLTreeModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/utils/ObjectUtils.js"),_=u("./src/core/FactoryMaker.js");var y=NaN,D=function v(p,L){(function M(v,p){if(!(v instanceof p))throw new TypeError("Cannot call a class as a function")})(this,v),this.data={baseUrls:p||null,selectedIdx:L||y},this.children=[]};function d(){var v,p,L,b=this.context,F=Object(B.default)(b).getInstance();function S(f,R,V){var Q=L.getBaseURLsFromElement(V);f[R]?F.areEqual(Q,f[R].data.baseUrls)||(f[R].data.baseUrls=Q,f[R].data.selectedIdx=y):f[R]=new D(Q)}function C(f){!function g(){if(!L||!L.hasOwnProperty("getBaseURLsFromElement")||!L.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var R=L.getBaseURLsFromElement(f);F.areEqual(R,p.data.baseUrls)||(p.data.baseUrls=R,p.data.selectedIdx=y),f&&f.Period_asArray&&f.Period_asArray.forEach(function(V,Q){S(p.children,Q,V),V.AdaptationSet_asArray&&V.AdaptationSet_asArray.forEach(function($,J){S(p.children[Q].children,J,$),$.Representation_asArray&&$.Representation_asArray.sort(L.getRepresentationSortFunction()).forEach(function(te,X){S(p.children[Q].children[J].children,X,te)})})})}function x(f,R){var V=R||p;f(V.data),V.children&&V.children.forEach(function(Q){return x(f,Q)})}function w(){p=new D}return v={reset:w,update:function N(f){C(f)},getForPath:function P(f){var R=p,V=[R.data];return f&&f.forEach(function(Q){(R=R.children[Q])&&V.push(R.data)}),V.filter(function(Q){return Q.baseUrls.length})},invalidateSelectedIndexes:function O(f){x(function(R){isNaN(R.selectedIdx)||f===R.baseUrls[R.selectedIdx].serviceLocation&&(R.selectedIdx=y)})},setConfig:function h(f){f.adapter&&(L=f.adapter)}},function m(){w()}(),v}d.__dashjs_factory_name="BaseURLTreeModel",k.default=_.default.getClassFactory(d)},"./src/streaming/models/CmcdModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/EventBus.js"),_=u("./src/streaming/MediaPlayerEvents.js"),M=u("./src/streaming/metrics/MetricsReportingEvents.js"),y=u("./src/core/FactoryMaker.js"),D=u("./src/core/Settings.js"),d=u("./src/streaming/constants/Constants.js"),v=u("./src/streaming/vo/metrics/HTTPRequest.js"),p=u("./src/dash/models/DashManifestModel.js"),L=u("./src/core/Utils.js");function b(w,P){var f;if(typeof Symbol>"u"||null==w[Symbol.iterator]){if(Array.isArray(w)||(f=function F(w,P){if(w){if("string"==typeof w)return m(w,P);var f=Object.prototype.toString.call(w).slice(8,-1);if("Object"===f&&w.constructor&&(f=w.constructor.name),"Map"===f||"Set"===f)return Array.from(w);if("Arguments"===f||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return m(w,P)}}(w))||P&&w&&"number"==typeof w.length){f&&(w=f);var R=0,V=function(){};return{s:V,n:function(){return R>=w.length?{done:!0}:{done:!1,value:w[R++]}},e:function(X){throw X},f:V}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var J,Q=!0,$=!1;return{s:function(){f=w[Symbol.iterator]()},n:function(){var X=f.next();return Q=X.done,X},e:function(X){$=!0,J=X},f:function(){try{!Q&&null!=f.return&&f.return()}finally{if($)throw J}}}}function m(w,P){(null==P||P>w.length)&&(P=w.length);for(var f=0,R=new Array(P);f<P;f++)R[f]=w[f];return R}var S_MANIFEST="m",S_AUDIO="a",S_VIDEO="v",S_INIT="i",S_CAPTION="c",S_ISOBMFF_TEXT_TRACK="tt",S_ENCRYPTION_KEY="k",S_OTHER="o",C_DASH="d",C_MSS="s",x_VOD="v",x_LIVE="l";function N(){var w,P,f,R,V,Q,$,J,te,X,K=this.context,oe=Object(B.default)(K).getInstance(),ee=Object(D.default)(K).getInstance();function ie(){f={pr:1,nor:null,st:null,sf:null,sid:"".concat(L.default.generateUuid()),cid:null},te={},J={},X={},ae()}function me(){ae()}function ae(){if(Q){var Pe=Q.getStreamController();if(Pe&&"function"==typeof Pe.getActiveStream){var Ue=Pe.getActiveStream();!Ue||($=Ue.getProcessors())}}}function ce(Pe,Ue){var lt,Qe={},ft=b(Ue);try{for(ft.s();!(lt=ft.n()).done;){var Dt=lt.value;Pe[Dt]&&(Qe[Dt]=Pe[Dt])}}catch(Ft){ft.e(Ft)}finally{ft.f()}return Qe}function se(Pe){var Ue=ee.get().streaming.cmcd.enabledKeys;return Pe.filter(function(Qe){return Ue.includes(Qe)})}function ve(Pe){try{return Pe.type===v.HTTPRequest.MPD_TYPE?function Y(){var Pe=W();return Pe.ot=S_MANIFEST,Pe}():Pe.type===v.HTTPRequest.MEDIA_SEGMENT_TYPE?(function E(Pe){X.hasOwnProperty(Pe)||(X[Pe]=!1),J.hasOwnProperty(Pe)||(J[Pe]=!1),te.hasOwnProperty(Pe)||(te[Pe]=!1)}(Pe.mediaType),function H(Pe){var on,Ue=W(),Qe=function re(Pe){try{return parseInt(Pe.mediaInfo.bitrateList[Pe.quality].bandwidth/1e3)}catch{return null}}(Pe),ft=function Ie(Pe){try{return isNaN(Pe.duration)?null:Math.round(1e3*Pe.duration)}catch{return null}}(Pe),lt=function le(Pe){try{return 100*parseInt(R.getThroughputHistory().getSafeAverageThroughput(Pe)/100)}catch{return null}}(Pe.mediaType),Dt=function z(Pe){try{var Ue=f.pr,Qe=V.getCurrentBufferLevel(Pe);return isNaN(Ue)||isNaN(Qe)?null:100*parseInt(Qe/Ue*10)}catch{return null}}(Pe.mediaType),Ft=G(Pe.mediaType),Ht=function De(Pe){try{var Ue=R.getTopBitrateInfoFor(Pe);return Math.round(Ue.bitrate/1e3)}catch{return null}}(Pe.mediaType),Jt=f.pr,sn=function Oe(Pe){if($&&0!==$.length){var Qe,Ue=b($);try{for(Ue.s();!(Qe=Ue.n()).done;){var ft=Qe.value;if(ft.getType()===Pe)return ft.probeNextRequest()}}catch(lt){Ue.e(lt)}finally{Ue.f()}}}(Pe.mediaType);Pe.mediaType===d.default.VIDEO&&(on=S_VIDEO),Pe.mediaType===d.default.AUDIO&&(on=S_AUDIO),Pe.mediaType===d.default.TEXT&&(on="application/mp4"===Pe.mediaInfo.mimeType?S_ISOBMFF_TEXT_TRACK:S_CAPTION);var je=ee.get().streaming.cmcd.rtp;return je||(je=function Le(Pe){var Ue=Q.getPlaybackRate();Ue||(Ue=1);var Qe=Pe.quality,lt=Pe.mediaInfo,Dt=Pe.duration,Ft=G(Pe.mediaType);0===Ft&&(Ft=500);var on=lt.bitrateList[Qe].bandwidth*Dt/1e3/(Ft/Ue/1e3),je=ee.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(ee.get().streaming.cmcd.rtpSafetyFactor)?ee.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(on*je/100)+1)}(Pe)),Ue.rtp=je,sn&&(Pe.url!==sn.url?Ue.nor=encodeURIComponent(L.default.getRelativeUrl(Pe.url,sn.url)):sn.range&&(Ue.nrr=sn.range)),Qe&&(Ue.br=Qe),on&&(Ue.ot=on),isNaN(ft)||(Ue.d=ft),isNaN(lt)||(Ue.mtp=lt),isNaN(Dt)||(Ue.dl=Dt),isNaN(Ft)||(Ue.bl=Ft),isNaN(Ht)||(Ue.tb=Ht),!isNaN(Jt)&&1!==Jt&&(Ue.pr=Jt),te[Pe.mediaType]&&(Ue.bs=!0,te[Pe.mediaType]=!1),(J[Pe.mediaType]||!X[Pe.mediaType])&&(Ue.su=!0,J[Pe.mediaType]=!1,X[Pe.mediaType]=!0),Ue}(Pe)):Pe.type===v.HTTPRequest.INIT_SEGMENT_TYPE?function I(){var Pe=W();return Pe.ot=S_INIT,Pe.su=!0,Pe}():Pe.type===v.HTTPRequest.OTHER_TYPE||Pe.type===v.HTTPRequest.XLINK_EXPANSION_TYPE?function U(){var Pe=W();return Pe.ot=S_OTHER,Pe}():Pe.type===v.HTTPRequest.LICENSE?function ne(Pe){var Ue=W();return Ue.ot=S_ENCRYPTION_KEY,Ue}():null}catch{return null}}function W(){var Pe={},Ue=ee.get().streaming.cmcd.cid?ee.get().streaming.cmcd.cid:f.cid;return Pe.v=1,Pe.sid=ee.get().streaming.cmcd.sid?ee.get().streaming.cmcd.sid:f.sid,Pe.sid="".concat(Pe.sid),Ue&&(Pe.cid="".concat(Ue)),!isNaN(f.pr)&&1!==f.pr&&null!==f.pr&&(Pe.pr=f.pr),f.st&&(Pe.st=f.st),f.sf&&(Pe.sf=f.sf),Pe}function G(Pe){try{var Ue=V.getCurrentBufferLevel(Pe);return isNaN(Ue)?null:100*parseInt(10*Ue)}catch{return null}}function Te(Pe){try{f.pr=Pe.playbackRate}catch{}}function ye(Pe){try{var Ue=w.getIsDynamic(Pe.data),ft=Pe.protocol&&"MSS"===Pe.protocol?C_MSS:C_DASH;f.st="".concat(Ue?x_LIVE:x_VOD),f.sf="".concat(ft)}catch{}}function Ee(Pe){try{Pe.state&&Pe.mediaType&&Pe.state===_.default.BUFFER_EMPTY&&(te[Pe.mediaType]||(te[Pe.mediaType]=!0),J[Pe.mediaType]||(J[Pe.mediaType]=!0))}catch{}}function Ce(){for(var Pe in te)te.hasOwnProperty(Pe)&&(te[Pe]=!0);for(var Ue in J)J.hasOwnProperty(Ue)&&(J[Ue]=!0)}function Fe(Pe){try{if(!Pe)return null;var Ue=Object.keys(Pe).sort(function(lt,Dt){return lt.localeCompare(Dt)}),Qe=Ue.length,ft=Ue.reduce(function(lt,Dt,Ft){return"v"===Dt&&1===Pe[Dt]||(lt+="string"==typeof Pe[Dt]&&"ot"!==Dt&&"sf"!==Dt&&"st"!==Dt?"".concat(Dt,"=").concat(JSON.stringify(Pe[Dt])):"".concat(Dt,"=").concat(Pe[Dt]),Ft<Qe-1&&(lt+=",")),lt},"");return(ft=ft.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return P={getQueryParameter:function ge(Pe){try{if(ee.get().streaming.cmcd&&ee.get().streaming.cmcd.enabled){var Ue=ve(Pe),ft=Fe(function fe(Pe){try{var Ue=ee.get().streaming.cmcd.enabledKeys;return Object.keys(Pe).filter(function(Qe){return Ue.includes(Qe)}).reduce(function(Qe,ft){return Qe[ft]=Pe[ft],Qe},{})}catch{return Pe}}(Ue));return oe.trigger(M.default.CMCD_DATA_GENERATED,{url:Pe.url,mediaType:Pe.mediaType,cmcdData:Ue,cmcdString:ft}),{key:"CMCD",value:ft}}return null}catch{return null}},getHeaderParameters:function de(Pe){try{if(ee.get().streaming.cmcd&&ee.get().streaming.cmcd.enabled){var Ue=ve(Pe),Qe=ce(Ue,se(["br","d","ot","tb"])),ft=ce(Ue,se(["bl","dl","mtp","nor","nrr","su"])),lt=ce(Ue,se(["bs","rtp"])),Dt=ce(Ue,se(["cid","pr","sf","sid","st","v"])),Ft={"CMCD-Object":Fe(Qe),"CMCD-Request":Fe(ft),"CMCD-Status":Fe(lt),"CMCD-Session":Fe(Dt)};return oe.trigger(M.default.CMCD_DATA_GENERATED,{url:Pe.url,mediaType:Pe.mediaType,cmcdData:Ue,headers:Ft}),Ft}return null}catch{return null}},setConfig:function _e(Pe){!Pe||(Pe.abrController&&(R=Pe.abrController),Pe.dashMetrics&&(V=Pe.dashMetrics),Pe.playbackController&&(Q=Pe.playbackController))},reset:function He(){oe.off(_.default.PLAYBACK_RATE_CHANGED,Te,this),oe.off(_.default.MANIFEST_LOADED,ye,this),oe.off(_.default.BUFFER_LEVEL_STATE_CHANGED,Ee,P),oe.off(_.default.PLAYBACK_SEEKED,Ce,P),ie()},initialize:function pe(){oe.on(_.default.PLAYBACK_RATE_CHANGED,Te,P),oe.on(_.default.MANIFEST_LOADED,ye,P),oe.on(_.default.BUFFER_LEVEL_STATE_CHANGED,Ee,P),oe.on(_.default.PLAYBACK_SEEKED,Ce,P),oe.on(_.default.PERIOD_SWITCH_COMPLETED,me,P)}},function ue(){w=Object(p.default)(K).getInstance(),ie()}(),P}N.__dashjs_factory_name="CmcdModel",k.default=y.default.getSingletonFactory(N)},"./src/streaming/models/CustomParametersModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/vo/UTCTiming.js"),_=u("./src/core/FactoryMaker.js"),M=u("./src/core/Settings.js"),y=u("./src/streaming/utils/SupervisorTools.js"),D=u("./src/streaming/rules/abr/ABRRulesCollection.js"),d=u("./src/streaming/constants/Constants.js");function p(){var L,b,F,m,h,g,S,C,x=this.context,O=Object(M.default)(x).getInstance();function w(){m=[],h=[],g=[],C=[],S=null,b=[]}function _e(E,I){var U=-1;E.some(function(W,re){if(W===I)return U=re,!0}),!(U<0)&&E.splice(U,1)}function ie(E){var I;for(I=0;I<C.length;I++)if(C[I].rulename===E)return I;return-1}function ce(E,I){se(E,I);var U=new B.default;U.schemeIdUri=E,U.value=I,b.push(U)}function se(E,I){Object(y.checkParameterType)(E,"string"),Object(y.checkParameterType)(I,"string"),b.forEach(function(U,W){U.schemeIdUri===E&&U.value===I&&b.splice(W,1)})}return L={getCustomInitialTrackSelectionFunction:function Q(){return S},setCustomInitialTrackSelectionFunction:function R(E){S=E},resetCustomInitialTrackSelectionFunction:function V(){S=null},getLicenseResponseFilters:function J(){return h},getLicenseRequestFilters:function $(){return m},getCustomCapabilitiesFilters:function ee(){return g},registerCustomCapabilitiesFilter:function ue(E){g.push(E)},registerLicenseResponseFilter:function X(E){h.push(E)},registerLicenseRequestFilter:function te(E){m.push(E)},unregisterCustomCapabilitiesFilter:function pe(E){_e(g,E)},unregisterLicenseResponseFilter:function oe(E){_e(h,E)},unregisterLicenseRequestFilter:function K(E){_e(m,E)},addAbrCustomRule:function me(E,I,U){if("string"!=typeof E||E!==D.default.ABANDON_FRAGMENT_RULES&&E!==D.default.QUALITY_SWITCH_RULES||"string"!=typeof I)throw d.default.BAD_ARGUMENT_ERROR;var W=ie(I);-1===W?C.push({type:E,rulename:I,rule:U}):(C[W].type=E,C[W].rule=U)},removeAllAbrCustomRule:function ge(){C=[]},removeAbrCustomRule:function ae(E){if(E){var I=ie(E);-1!==I&&C.splice(I,1)}else C=[]},getAbrCustomRules:function fe(){return C},addUTCTimingSource:ce,removeUTCTimingSource:se,getUTCTimingSources:function de(){return b},clearDefaultUTCTimingSources:function ve(){b=[]},restoreDefaultUTCTimingSources:function ne(){var E=O.get().streaming.utcSynchronization.defaultTimingSource;ce(E.scheme,E.value)},setXHRWithCredentialsForType:function Y(E,I){E?F[E]=!!I:Object.keys(F).forEach(function(U){Y(U,I)})},getXHRWithCredentialsForType:function H(E){var I=F[E];return void 0===I?F.default:I},setConfig:function f(){},reset:function P(){w()}},function N(){F={default:false},w()}(),L}p.__dashjs_factory_name="CustomParametersModel",k.default=_.default.getSingletonFactory(p)},"./src/streaming/models/FragmentModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/vo/FragmentRequest.js"),M="loading",y="executed",d="failed";function v(L){var x,O,N,w,b=(L=L||{}).eventBus,F=L.events,m=L.dashMetrics,h=L.fragmentLoader,g=L.debug,S=L.streamInfo,C=L.type;function V(ne){var re;return!!ne&&(re=!1,N.some(function(De){if(function(W,re){return!isNaN(W.index)&&W.startTime===re.startTime&&W.adaptationIndex===re.adaptationIndex&&W.type===re.type}(ne,De)||function(W,re){return isNaN(W.index)&&isNaN(re.index)&&W.quality===re.quality}(ne,De)||function(W,re){return W.action===_.default.ACTION_COMPLETE&&W.action===re.action}(ne,De))return re=!0}),re)}function J(ne){return isNaN(ne.duration)?.25:Math.min(ne.duration/8,.5)}function te(ne){N=N.filter(function(Y){var H=J(Y);return isNaN(Y.startTime)||void 0!==ne&&Y.startTime>=ne-H})}function K(ne,Y){Y<=ne+.5||(N=N.filter(function(H){var E=J(H);return isNaN(H.startTime)||H.startTime>=Y-E||isNaN(H.duration)||H.startTime+H.duration<=ne+E}))}function _e(ne,Y,H){for(var I=ne.length-1;I>=0;I--){var U=ne[I],W=U.startTime,re=W+U.duration;if(H=isNaN(H)?J(U):H,!isNaN(W)&&!isNaN(re)&&Y+H>=W&&Y-H<re||isNaN(W)&&isNaN(Y))return U}return null}function ae(ne,Y){m.addSchedulingInfo(ne,Y),m.addRequestsQueue(ne.mediaType,w,N)}function ge(ne){ne.sender===h&&(w.splice(w.indexOf(ne.request),1),ne.response&&!ne.error&&N.push(ne.request),ae(ne.request,ne.error?d:y),b.trigger(F.FRAGMENT_LOADING_COMPLETED,{request:ne.request,response:ne.response,error:ne.error,sender:this},{streamId:S.id,mediaType:C}))}function fe(ne){ne.sender===h&&b.trigger(F.FRAGMENT_LOADING_PROGRESS,{request:ne.request,response:ne.response,error:ne.error,sender:this},{streamId:S.id,mediaType:C})}function ce(ne){ne.sender===h&&b.trigger(F.FRAGMENT_LOADING_ABANDONED,{request:ne.request},{streamId:S.id,mediaType:C})}function de(){N=[],w=[]}return x={getStreamId:function f(){return S.id},getType:function R(){return C},getRequests:function $(ne){var H=[];return(ne?ne.state instanceof Array?ne.state:[ne.state]:[]).forEach(function(E){var I=function me(ne){var Y;switch(ne){case M:Y=w;break;case y:Y=N;break;default:Y=[]}return Y}(E);H=H.concat(function ie(ne,Y){return Y.hasOwnProperty("time")?[_e(ne,Y.time,Y.threshold)]:ne.filter(function(H){for(var E in Y)if("state"!==E&&Y.hasOwnProperty(E)&&H[E]!=Y[E])return!1;return!0})}(I,ne))}),H},isFragmentLoaded:V,isFragmentLoadedOrPending:function Q(ne){var E,Y=!1,H=0;if(!(Y=V(ne)))for(H=0;H<w.length;H++)ne.url===(E=w[H]).url&&ne.startTime===E.startTime&&(Y=!0);return Y},removeExecutedRequestsBeforeTime:te,removeExecutedRequestsAfterTime:function X(ne){N=N.filter(function(Y){return isNaN(Y.startTime)||void 0!==ne&&Y.startTime<ne})},syncExecutedRequestsWithBufferedRange:function oe(ne,Y){if(ne&&0!==ne.length){for(var H=0,E=0,I=ne.length;E<I;E++)K(H,ne.start(E)),H=ne.end(E);Y>0&&K(H,Y)}else te()},abortRequests:function ee(){O.debug("abort requests"),h.abort(),w=[]},executeRequest:function ue(ne){ne.action===_.default.ACTION_DOWNLOAD?(ae(ne,M),w.push(ne),function pe(ne){b.trigger(F.FRAGMENT_LOADING_STARTED,{request:ne},{streamId:S.id,mediaType:C}),h.load(ne)}(ne)):O.warn("Unknown request action.")},reset:function se(){b.off(F.LOADING_COMPLETED,ge,this),b.off(F.LOADING_DATA_PROGRESS,fe,this),b.off(F.LOADING_ABANDONED,ce,this),h&&h.reset(),de()},resetInitialSettings:de,addExecutedRequest:function ve(ne){N.push(ne)}},function P(){O=g.getLogger(x),de(),b.on(F.LOADING_COMPLETED,ge,x),b.on(F.LOADING_DATA_PROGRESS,fe,x),b.on(F.LOADING_ABANDONED,ce,x)}(),x}v.__dashjs_factory_name="FragmentModel";var p=B.default.getClassFactory(v);p.FRAGMENT_MODEL_LOADING=M,p.FRAGMENT_MODEL_EXECUTED=y,p.FRAGMENT_MODEL_CANCELED="canceled",p.FRAGMENT_MODEL_FAILED=d,B.default.updateClassFactory(v.__dashjs_factory_name,p),k.default=p},"./src/streaming/models/LowLatencyThroughputModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/Debug.js"),_=u("./src/core/FactoryMaker.js");function M(){var b,F,L=this.context,m={};function h(){F=Object(B.default)(L).getInstance().getLogger(b)}function g(N){for(var w={},P=0,f=0,R=0,V=0,Q=N.length,$=0;$<Q;++$)P+=N[$].chunkDownloadTimeRelativeMS,f+=N[$].bufferLevel,R+=N[$].chunkDownloadTimeRelativeMS*N[$].bufferLevel,V+=N[$].chunkDownloadTimeRelativeMS*N[$].chunkDownloadTimeRelativeMS;return w.m=(R-P*f/Q)/(V-P*P/Q),w.b=f/Q-w.m*P/Q,function(J){return w.m*J+w.b}}function S(N){var P,w=!0,f=N.reduce(function(R,V){return R+V.bufferLevelAtSegmentEnd},0)/N.length;return N.forEach(function(R){Math.abs(R.bufferLevelAtSegmentEnd/R.bufferLevelAtSegmentStart)<.95&&(w=!1),R.bufferLevelAtSegmentEnd/f<.8&&(w=!1),P?P>R.bitrate&&(w=!1):P=R.bitrate}),w}return b={setup:h,addMeasurement:function O(N,w,P,f,R){N&&N.mediaType&&!m[N.mediaType]&&(m[N.mediaType]=[]);var V=N.mediaInfo.bitrateList.find(function(Q){return Q.id===N.representationId});m[N.mediaType].push({index:N.index,repId:N.representationId,mediaType:N.mediaType,requestTimeMS:f,adjustedAvailabilityStartTimeMS:N.availabilityStartTime.getTime(),segDurationMS:1e3*N.duration,chunksDurationMS:P.reduce(function(Q,$){return Q+$.chunkDownloadDurationMS},0),segmentBytes:P.reduce(function(Q,$){return Q+$.chunkBytes},0),bitrate:V&&V.bandwidth,bitrateList:N.mediaInfo.bitrateList,chunkMeasurements:P,fetchDownloadDurationMS:w,throughputCapacityDelayMS:R,getEstimatedBufferLevel:g(P.slice(1))}),m[N.mediaType].length>10&&m[N.mediaType].shift()},getThroughputCapacityDelayMS:function x(N,w){var P=m[N.mediaType]&&m[N.mediaType].slice(-3);return!P||P.length<3||!S(P)?0:w/4>250?250:w/4},getEstimatedDownloadDurationMS:function C(N){var w=m[N.mediaType].slice(-1).pop(),P=m[N.mediaType].slice(-3),f=w.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;w.bufferLevelAtSegmentStart=w.getEstimatedBufferLevel(f/2),w.bufferLevelAtSegmentEnd=w.getEstimatedBufferLevel(f);var R=S(P),V=R?.6:.8;if(w.isBufferStable&&1.05*w.segDurationMS<w.fetchDownloadDurationMS)return w.fetchDownloadDurationMS;if(!R||w.segDurationMS<w.fetchDownloadDurationMS||w.adjustedAvailabilityStartTimeMS<=w.requestTimeMS+w.throughputCapacityDelayMS-w.segDurationMS)return.8*w.fetchDownloadDurationMS;for(var Q=w.requestTimeMS+w.throughputCapacityDelayMS-w.adjustedAvailabilityStartTimeMS,$=0,J=0,te=0,X=0;X<w.chunkMeasurements.length;X++){var K=w.chunkMeasurements[X];if(Q<J+K.chunkDownloadDurationMS)break;J+=K.chunkDownloadDurationMS,$+=K.chunkBytes,te++}if(Q<0&&F.warn("request time was before adjusted availibitly start time"),$&&J&&te>.2*w.chunkMeasurements.length){var ee=w.segmentBytes/($/J);return w.fetchDownloadDurationMS<ee?w.fetchDownloadDurationMS*V:ee*V}var ue=w.bitrate;return w.bitrateList.some(function(pe){if(pe.bandwidth>w.bitrate)return ue=pe.bandwidth,!0}),ue===w.bitrate?w.fetchDownloadDurationMS*V:V*w.segmentBytes*8*1e3/ue}},h(),b}M.__dashjs_factory_name="LowLatencyThroughputModel",k.default=_.default.getSingletonFactory(M)},"./src/streaming/models/ManifestModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/EventBus.js"),_=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js");function y(){var p,D=this.context,d=Object(B.default)(D).getInstance();return{getValue:function L(){return p},setValue:function b(F){p=F,F&&d.trigger(_.default.MANIFEST_LOADED,{data:F})}}}y.__dashjs_factory_name="ManifestModel",k.default=M.default.getSingletonFactory(y)},"./src/streaming/models/MediaPlayerModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Settings.js");function L(){var F,m,h=this.context,g=Object(_.default)(h).getInstance();function R(){var J=g.get().streaming.buffer.stableBufferTime>0?g.get().streaming.buffer.stableBufferTime:g.get().streaming.buffer.fastSwitchEnabled?20:12,te=F.getLiveDelay();return!isNaN(te)&&te>0?Math.min(J,te):J}return{getCatchupMaxDrift:function x(){if(!isNaN(g.get().streaming.liveCatchup.maxDrift)&&g.get().streaming.liveCatchup.maxDrift>0)return g.get().streaming.liveCatchup.maxDrift;var J=m.getServiceDescriptionSettings();return J&&J.liveCatchup&&!isNaN(J.liveCatchup.maxDrift)&&J.liveCatchup.maxDrift>0?J.liveCatchup.maxDrift:12},getCatchupModeEnabled:function N(){return null!==g.get().streaming.liveCatchup.enabled?g.get().streaming.liveCatchup.enabled:F.getInitialCatchupModeActivated()},getLiveCatchupLatencyThreshold:function w(){try{var J=g.get().streaming.liveCatchup.latencyThreshold,te=F.getLiveDelay();return null===J||isNaN(J)?NaN:Math.max(J,te)}catch{return NaN}},getStableBufferTime:R,getInitialBufferLevel:function f(){var J=g.get().streaming.buffer.initialBufferLevel;return isNaN(J)||J<0?0:Math.min(R(),J)},getRetryAttemptsForType:function V(J){var te=isNaN(g.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:g.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return F.getLowLatencyModeEnabled()?g.get().streaming.retryAttempts[J]*te:g.get().streaming.retryAttempts[J]},getRetryIntervalsForType:function Q(J){var te=isNaN(g.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:g.get().streaming.retryIntervals.lowLatencyReductionFactor;return F.getLowLatencyModeEnabled()?g.get().streaming.retryIntervals[J]/te:g.get().streaming.retryIntervals[J]},getCatchupPlaybackRate:function O(){if(!isNaN(g.get().streaming.liveCatchup.playbackRate)&&g.get().streaming.liveCatchup.playbackRate>0)return g.get().streaming.liveCatchup.playbackRate;var J=m.getServiceDescriptionSettings();return J&&J.liveCatchup&&!isNaN(J.liveCatchup.playbackRate)&&J.liveCatchup.playbackRate>0?J.liveCatchup.playbackRate:.5},getAbrBitrateParameter:function P(J,te){try{var X=g.get().streaming.abr[J][te];if(!isNaN(X)&&-1!==X)return X;var K=m.getServiceDescriptionSettings();return K&&K[J]&&!isNaN(K[J][te])?K[J][te]:-1}catch{return-1}},setConfig:function C(J){J.playbackController&&(F=J.playbackController),J.serviceDescriptionController&&(m=J.serviceDescriptionController)},reset:function $(){}}}L.__dashjs_factory_name="MediaPlayerModel",k.default=B.default.getSingletonFactory(L)},"./src/streaming/models/MetricsModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/streaming/constants/MetricsConstants.js"),M=u("./src/streaming/vo/MetricsList.js"),y=u("./src/streaming/vo/metrics/HTTPRequest.js"),D=u("./src/streaming/vo/metrics/RepresentationSwitch.js"),d=u("./src/streaming/vo/metrics/BufferLevel.js"),v=u("./src/streaming/vo/metrics/BufferState.js"),p=u("./src/streaming/vo/metrics/DVRInfo.js"),L=u("./src/streaming/vo/metrics/DroppedFrames.js"),b=u("./src/streaming/vo/metrics/ManifestUpdate.js"),F=u("./src/streaming/vo/metrics/SchedulingInfo.js"),m=u("./src/core/EventBus.js"),h=u("./src/streaming/vo/metrics/RequestsQueue.js"),g=u("./src/core/events/Events.js"),S=u("./src/core/FactoryMaker.js");function C(x){var P,f,O=(x=x||{}).settings,N=this.context,w=Object(m.default)(N).getInstance();function V(){w.trigger(g.default.METRICS_CHANGED)}function Q(E){w.trigger(g.default.METRIC_CHANGED,{mediaType:E}),V()}function $(E,I,U){w.trigger(g.default.METRIC_UPDATED,{mediaType:E,metric:I,value:U}),Q(E)}function J(E,I,U){w.trigger(g.default.METRIC_ADDED,{mediaType:E,metric:I,value:U}),Q(E)}function K(E,I){var U=null;return E&&(f.hasOwnProperty(E)?U=f[E]:I||(U=new M.default,f[E]=U)),U}function oe(E,I,U){var W=K(E);null!==W&&(W[I].push(U),W[I].length>O.get().streaming.metrics.maxListDepth&&W[I].shift())}function _e(E,I,U){oe(E,I,U),J(E,I,U)}return P={clearCurrentMetricsForType:function te(E){delete f[E],Q(E)},clearAllCurrentMetrics:function X(){f={},V()},getMetricsFor:K,addHttpRequest:function ue(E,I,U,W,re,De,Ie,le,z,G,Te,ye,Ee,Ce,Fe,Oe){var Le=new y.HTTPRequest;De&&De!==W&&(ue(E,null,U,W,re,null,null,le,z,null,null,null,Ee,null,null,Oe),Le.actualurl=De),Le.tcpid=I,Le.type=U,Le.url=W,Le.range=le,Le.trequest=z,Le.tresponse=G,Le.responsecode=ye,Le._tfinish=Te,Le._stream=E,Le._mediaduration=Ee,Le._quality=re,Le._responseHeaders=Ce,Le._serviceLocation=Ie,Le._fileLoaderType=Oe,Fe?Fe.forEach(function(He){!function ee(E,I,U,W,re){var De=new y.HTTPRequestTrace;return De.s=I,De.d=U,De.b=W,De._t=re,E.trace.push(De),E.interval||(E.interval=0),E.interval+=U,De}(Le,He.s,He.d,He.b,He.t)}):(delete Le.interval,delete Le.trace),_e(E,_.default.HTTP_REQUEST,Le)},addRepresentationSwitch:function pe(E,I,U,W,re){var De=new D.default;De.t=I,De.mt=U,De.to=W,re?De.lto=re:delete De.lto,_e(E,_.default.TRACK_SWITCH,De)},addBufferLevel:function ie(E,I,U){var W=new d.default;W.t=I,W.level=U,_e(E,_.default.BUFFER_LEVEL,W)},addBufferState:function me(E,I,U){var W=new v.default;W.target=U,W.state=I,_e(E,_.default.BUFFER_STATE,W)},addDVRInfo:function ae(E,I,U,W){var re=new p.default;re.time=I,re.range=W,re.manifestInfo=U,_e(E,_.default.DVR_INFO,re)},addDroppedFrames:function ge(E,I){var U=new L.default,W=K(E).DroppedFrames;!I||(U.time=I.creationTime,U.droppedFrames=I.droppedVideoFrames,!(W.length>0&&W[W.length-1]==U)&&_e(E,_.default.DROPPED_FRAMES,U))},addSchedulingInfo:function fe(E,I,U,W,re,De,Ie,le,z){var G=new F.default;G.mediaType=E,G.t=I,G.type=U,G.startTime=W,G.availabilityStartTime=re,G.duration=De,G.quality=Ie,G.range=le,G.state=z,_e(E,_.default.SCHEDULING_INFO,G)},addRequestsQueue:function ce(E,I,U){var W=new h.default;W.loadingRequests=I,W.executedRequests=U,K(E).RequestsQueue=W,J(E,_.default.REQUESTS_QUEUE,W)},addManifestUpdate:function de(E,I,U,W,re,De,Ie,le,z,G){var Te=new b.ManifestUpdate;Te.mediaType=E,Te.type=I,Te.requestTime=U,Te.fetchTime=W,Te.availabilityStartTime=re,Te.presentationStartTime=De,Te.clientTimeOffset=Ie,Te.currentTime=le,Te.buffered=z,Te.latency=G,oe(B.default.STREAM,_.default.MANIFEST_UPDATE,Te),J(E,_.default.MANIFEST_UPDATE,Te)},updateManifestUpdateInfo:function se(E,I){if(E){for(var U in I)E[U]=I[U];$(E.mediaType,_.default.MANIFEST_UPDATE,E)}},addManifestUpdateStreamInfo:function ve(E,I,U,W,re){if(E){var De=new b.ManifestUpdateStreamInfo;De.id=I,De.index=U,De.start=W,De.duration=re,E.streamInfo.push(De),$(E.mediaType,_.default.MANIFEST_UPDATE_STREAM_INFO,E)}},addManifestUpdateRepresentationInfo:function ne(E,I,U,W,re,De,Ie,le){if(E&&E.representationInfo){var z=new b.ManifestUpdateRepresentationInfo;z.id=I,z.index=U,z.streamIndex=W,z.mediaType=re,z.startNumber=Ie,z.fragmentInfoType=le,z.presentationTimeOffset=De,E.representationInfo.push(z),$(E.mediaType,_.default.MANIFEST_UPDATE_TRACK_INFO,E)}},addPlayList:function Y(E){E.trace&&Array.isArray(E.trace)?E.trace.forEach(function(I){I.hasOwnProperty("subreplevel")&&!I.subreplevel&&delete I.subreplevel}):delete E.trace,_e(B.default.STREAM,_.default.PLAY_LIST,E)},addDVBErrors:function H(E){_e(B.default.STREAM,_.default.DVB_ERRORS,E)}},function R(){f={}}(),P}C.__dashjs_factory_name="MetricsModel",k.default=S.default.getSingletonFactory(C)},"./src/streaming/models/URIFragmentModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/vo/URIFragmentData.js"),_=u("./src/core/FactoryMaker.js");function M(){var D;return{initialize:function d(p){if(D=new B.default,!p)return null;var L=p.indexOf("#");if(-1!==L)for(var b=p.substr(L+1).split("&"),F=0,m=b.length;F<m;++F){var h=b[F],g=h.indexOf("=");if(-1!==g){var S=h.substring(0,g);D.hasOwnProperty(S)&&(D[S]=h.substr(g+1))}}},getURIFragmentData:function v(){return D}}}M.__dashjs_factory_name="URIFragmentModel",k.default=_.default.getSingletonFactory(M)},"./src/streaming/models/VideoModel.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),y=u("./src/core/Debug.js"),D=u("./src/streaming/constants/Constants.js"),d=new Map([[D.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[D.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[D.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[D.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function v(){var p,L,b,F,m,S=this.context,C=Object(_.default)(S).getInstance(),x=[];function P(){b&&(b.playbackRate=1,b.removeEventListener("canplay",P))}function ee(){return x.length>0}function ie(){if(b&&ee()&&0===b.playbackRate){var Oe=document.createEvent("Event");Oe.initEvent("waiting",!0,!1),b.dispatchEvent(Oe)}}function Y(Oe,Le){b&&b.addEventListener(Oe,Le)}function H(Oe,Le){b&&b.removeEventListener(Oe,Le)}function E(){return b?b.readyState:NaN}function I(){return b?b.buffered:null}function G(Oe,Le,He,Pe,Ue){if(b)for(var Qe=0;Qe<b.textTracks.length;Qe++)if(b.textTracks[Qe].kind===Oe&&(!Le||b.textTracks[Qe].label==Le)&&b.textTracks[Qe].language===He&&b.textTracks[Qe].isTTML===Pe&&b.textTracks[Qe].isEmbedded===Ue)return b.textTracks[Qe];return null}function Ce(Oe,Le){Oe===D.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||E()>=Oe?Le():function Fe(Oe,Le){Y(Oe,function Pe(){H(Oe,Pe),Le(Oe)})}(d.get(Oe),Le)}return p={initialize:function N(){C.on(M.default.PLAYBACK_PLAYING,ie,this)},setCurrentTime:function R(Oe,Le){F=Oe,Ce(D.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(b){if(b.currentTime===F)return void(F=NaN);try{F=Le?function V(Oe){var Le=I(),He=Oe,Pe=9999999999;if(Le)for(var Ue=0;Ue<Le.length;Ue++){var Qe=Le.start(Ue),ft=Le.end(Ue),lt=Math.abs(Qe-Oe),Dt=Math.abs(ft-Oe);if(Oe>=Qe&&Oe<=ft)return Oe;lt<Pe&&(Pe=lt,He=Qe),Dt<Pe&&(Pe=Dt,He=ft)}return He}(F):F,b.currentTime=F,F=NaN}catch(He){0===b.readyState&&He.code===He.INVALID_STATE_ERR&&setTimeout(function(){b.currentTime=F,F=NaN},400)}}})},play:function ae(){if(b){b.autoplay=!0;var Oe=b.play();Oe&&Oe.catch&&typeof Promise<"u"&&Oe.catch(function(Le){"NotAllowedError"===Le.name&&C.trigger(M.default.PLAYBACK_NOT_ALLOWED),L.warn("Caught pending play exception - continuing (".concat(Le,")"))})}},isPaused:function ge(){return b?b.paused:null},pause:function fe(){b&&(b.pause(),b.autoplay=!1)},isStalled:ee,isSeeking:function ce(){return b?b.seeking||!isNaN(F):null},getTime:function de(){return b?isNaN(F)?b.currentTime:F:null},getPlaybackRate:function se(){return b?b.playbackRate:null},setPlaybackRate:function f(Oe){!b||(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&b.readyState<=2&&Oe>0?b.addEventListener("canplay",P):b.playbackRate=Oe)},getPlayedRanges:function ve(){return b?b.played:null},getEnded:function ne(){return b?b.ended:null},setStallState:function oe(Oe,Le){!function _e(Oe,Le){Le?function ue(Oe){null===Oe||!b||b.seeking||-1!==x.indexOf(Oe)||x.push(Oe)}(Oe):function pe(Oe){var Le=x.indexOf(Oe);null!==Oe&&-1!==Le&&x.splice(Le,1)}(Oe)}(Oe,Le)},getElement:function Q(){return b},setElement:function $(Oe){if(!(null==Oe||Oe&&/^(VIDEO|AUDIO)$/i.test(Oe.nodeName)))throw"element is not video or audio DOM type!";(b=Oe)&&(b.preload="auto")},setSource:function J(Oe){b&&(Oe?b.src=Oe:(b.removeAttribute("src"),b.load()))},getSource:function te(){return b?b.src:null},getTTMLRenderingDiv:function X(){return m},setTTMLRenderingDiv:function K(Oe){(m=Oe).style.position="absolute",m.style.display="flex",m.style.overflow="hidden",m.style.pointerEvents="none",m.style.top=0,m.style.left=0},getPlaybackQuality:function me(){if(!b)return null;var Oe="webkitDroppedFrameCount"in b&&"webkitDecodedFrameCount"in b,He=null;return"getVideoPlaybackQuality"in b?He=b.getVideoPlaybackQuality():Oe&&(He={droppedVideoFrames:b.webkitDroppedFrameCount,totalVideoFrames:b.webkitDroppedFrameCount+b.webkitDecodedFrameCount,creationTime:new Date}),He},addEventListener:Y,removeEventListener:H,getReadyState:E,getBufferRange:I,getClientWidth:function U(){return b?b.clientWidth:NaN},getClientHeight:function W(){return b?b.clientHeight:NaN},getTextTracks:function z(){return b?b.textTracks:[]},getTextTrack:G,addTextTrack:function Te(Oe,Le,He,Pe,Ue){if(!b)return null;var Qe=G(Oe,Le,He,Pe,Ue);return Qe||((Qe=b.addTextTrack(Oe,Le,He)).isEmbedded=Ue,Qe.isTTML=Pe),Qe},appendChild:function ye(Oe){b&&(b.appendChild(Oe),void 0!==Oe.isTTML&&(b.textTracks[b.textTracks.length-1].isTTML=Oe.isTTML,b.textTracks[b.textTracks.length-1].isEmbedded=Oe.isEmbedded))},removeChild:function Ee(Oe){b&&b.removeChild(Oe)},getVideoWidth:function re(){return b?b.videoWidth:NaN},getVideoHeight:function De(){return b?b.videoHeight:NaN},getVideoRelativeOffsetTop:function Ie(){var Oe=b.parentNode.host||b.parentNode;return Oe?b.getBoundingClientRect().top-Oe.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function le(){var Oe=b.parentNode.host||b.parentNode;return Oe?b.getBoundingClientRect().left-Oe.getBoundingClientRect().left:NaN},waitForReadyState:Ce,reset:function w(){C.off(M.default.PLAYBACK_PLAYING,ie,this)}},function O(){L=Object(y.default)(S).getInstance().getLogger(p),F=NaN}(),p}v.__dashjs_factory_name="VideoModel",k.default=B.default.getSingletonFactory(v)},"./src/streaming/net/FetchLoader.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Settings.js"),M=u("./src/streaming/constants/Constants.js");function y(h,g){return function v(h){if(Array.isArray(h))return h}(h)||function d(h,g){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(h)){var S=[],C=!0,x=!1,O=void 0;try{for(var w,N=h[Symbol.iterator]();!(C=(w=N.next()).done)&&(S.push(w.value),!g||S.length!==g);C=!0);}catch(P){x=!0,O=P}finally{try{!C&&null!=N.return&&N.return()}finally{if(x)throw O}}return S}}(h,g)||L(h,g)||function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(h,g){if(h){if("string"==typeof h)return b(h,g);var S=Object.prototype.toString.call(h).slice(8,-1);if("Object"===S&&h.constructor&&(S=h.constructor.name),"Map"===S||"Set"===S)return Array.from(h);if("Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return b(h,g)}}function b(h,g){(null==g||g>h.length)&&(g=h.length);for(var S=0,C=new Array(g);S<g;S++)C[S]=h[S];return C}function F(h){var w,g=this.context,S=(h=h||{}).requestModifier,C=h.lowLatencyThroughputModel,x=h.boxParser,O=Object(_.default)(g).getInstance();function R(te,X){te.reader.read().then(X).catch(function(K){te.onerror&&200===te.response.status&&te.onerror(K)})}function $(te,X){try{if((te=te.filter(function(ee){return ee.bytes>X/4/te.length})).length>1){var K=0,oe=(te[te.length-1].ts-te[0].ts)/te.length;return te.forEach(function(ee,ue){var pe=te[ue+1];if(pe){var _e=pe.ts-ee.ts;K+=_e<oe?_e:0}}),K}return null}catch{return null}}return{load:function f(te){var pe,X=new Date,K=te.request,oe=new Headers;if(K.range&&oe.append("Range","bytes="+K.range),te.headers)for(var ee in te.headers){var ue=te.headers[ee];ue&&oe.append(ee,ue)}K.requestStartDate||(K.requestStartDate=X),S&&S.modifyRequestHeader({setRequestHeader:function(fe,ce){oe.append(fe,ce)}}),"function"==typeof window.AbortController&&(pe=new AbortController,te.abortController=pe,pe.signal.onabort=te.onabort);var _e={method:te.method,headers:oe,credentials:te.withCredentials?"include":void 0,signal:pe?pe.signal:void 0},ie=O.get().streaming.abr.fetchThroughputCalculationMode,me=Date.now(),ae=0;new Promise(function(ge){if(ie===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&C&&(ae=C.getThroughputCapacityDelayMS(K,1e3*w.getCurrentBufferLevel(K.mediaType))))return setTimeout(ge,ae);ge()}).then(function(){var ge=Date.now();fetch(te.url,_e).then(function(fe){te.response||(te.response={}),te.response.status=fe.status,te.response.statusText=fe.statusText,te.response.responseURL=fe.url,fe.ok||te.onerror();var se,ce="",de=function p(h,g){var S;if(typeof Symbol>"u"||null==h[Symbol.iterator]){if(Array.isArray(h)||(S=L(h))||g&&h&&"number"==typeof h.length){S&&(h=S);var C=0,x=function(){};return{s:x,n:function(){return C>=h.length?{done:!0}:{done:!1,value:h[C++]}},e:function(f){throw f},f:x}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var w,O=!0,N=!1;return{s:function(){S=h[Symbol.iterator]()},n:function(){var f=S.next();return O=f.done,f},e:function(f){N=!0,w=f},f:function(){try{!O&&null!=S.return&&S.return()}finally{if(N)throw w}}}}(fe.headers.keys());try{for(de.s();!(se=de.n()).done;){var ve=se.value;ce+=ve+": "+fe.headers.get(ve)+"\r\n"}}catch(Fe){de.e(Fe)}finally{de.f()}if(te.response.responseHeaders=ce,!fe.body)return fe.arrayBuffer().then(function(Fe){te.response.response=Fe,te.progress({loaded:Fe.byteLength,total:Fe.byteLength,stream:!1}),te.onload(),te.onend()});var Le,He,ne=parseInt(fe.headers.get("Content-Length"),10),Y=0,H=!1,E=new Uint8Array,I=0;if(ie===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&C){var W=ge,re=0,Ie=y(fe.body.tee(),2),z=Ie[1];Le=Ie[0].getReader(),He=[],Le.read().then(function Pe(Ue){var Qe=Ue.value,ft=Ue.done;if(re=Date.now(),Qe&&Qe.length){var lt=re-W,Dt=Qe.length;He.push({chunkDownloadTimeRelativeMS:re-ge,chunkDownloadDurationMS:lt,chunkBytes:Dt,kbps:Math.round(8*Dt/(lt/1e3)),bufferLevel:w.getCurrentBufferLevel(K.mediaType)})}if(ft){var Ft=re-ge,Ht=He.reduce(function(Jt,sn){return Jt+sn.chunkBytes},0);return C.addMeasurement(K,Ft,He,me,ae,ce),void te.progress({loaded:Ht,total:Ht,lengthComputable:!0,time:C.getEstimatedDownloadDurationMS(K),stream:!0})}return W=Date.now(),Le.read().then(Pe)}),te.reader=z.getReader()}else te.reader=fe.body.getReader();var G=[],Te=[],ye=[],Ee=!0;R(te,function Fe(Oe){var Le=Oe.value;if(Oe.done){if(E){if(ie!==M.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Pe=null;ie===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&(Pe=function J(te,X){try{var K,oe;K=te.filter(function(ge,fe){return fe<te.length-1}),oe=X.filter(function(ge,fe){return fe<X.length-1});var ee=[];if(K.length>1){for(var ue=0,pe=0,_e=0;_e<K.length;_e++)if(K[_e]&&oe[_e]){var ie=oe[_e].ts-K[_e].ts;if(ie>1)ee.push(8*oe[_e].bytes/ie);else{0===pe&&(pe=K[_e].ts);var me=oe[_e].ts-pe;me>1?(ee.push(8*ue/me),ue=0,pe=0):ue+=oe[_e].bytes}}if(ee.length>0)return ee.reduce(function(ge,fe){return ge+fe},0)/ee.length}return null}catch{return null}}(Te,ye)),te.progress({loaded:Y,total:isNaN(ne)?Y:ne,lengthComputable:!0,time:$(G,Y),throughput:Pe,stream:!0})}te.response.response=E.buffer}return te.onload(),void te.onend()}if(Le&&Le.length>0){E=function V(te,X){if(0===te.length)return X;var K=new Uint8Array(te.length+X.length);return K.set(te),K.set(X,te.length),K}(E,Le),Y+=Le.length,G.push({ts:Date.now(),bytes:Le.length}),ie===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Ee&&x.findLastTopIsoBoxCompleted(["moof"],E,I).found&&(Ee=!1,Te.push({ts:performance.now(),bytes:Le.length}));var Qe=x.findLastTopIsoBoxCompleted(["moov","mdat"],E,I);if(Qe.found){var lt,ft=Qe.lastCompletedOffset+Qe.size;ie===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&!Ee&&(Ee=!0,ye.push({ts:performance.now(),bytes:E.length})),ft===E.length?(lt=E,E=new Uint8Array):(lt=new Uint8Array(E.subarray(0,ft)),E=E.subarray(ft)),te.progress({data:lt.buffer,lengthComputable:!1,noTrace:!0}),I=0}else I=Qe.lastCompletedOffset,H||(te.progress({lengthComputable:!1,noTrace:!0}),H=!0)}R(te,Fe)})}).catch(function(fe){te.onerror&&te.onerror(fe)})})},abort:function Q(te){if(te.abortController)te.abortController.abort();else if(te.reader)try{te.reader.cancel(),te.onabort()}catch{}},calculateDownloadedTime:$,setup:function P(te){w=te.dashMetrics}}}F.__dashjs_factory_name="FetchLoader";var m=B.default.getClassFactory(F);k.default=m},"./src/streaming/net/HTTPLoader.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/net/XHRLoader.js"),_=u("./src/streaming/net/FetchLoader.js"),M=u("./src/streaming/vo/metrics/HTTPRequest.js"),y=u("./src/core/FactoryMaker.js"),D=u("./src/streaming/vo/DashJSError.js"),d=u("./src/streaming/models/CmcdModel.js"),v=u("./src/core/Utils.js"),p=u("./src/core/Debug.js"),L=u("./src/core/EventBus.js"),b=u("./src/core/events/Events.js"),F=u("./src/core/Settings.js"),m=u("./src/streaming/constants/Constants.js"),h=u("./src/streaming/models/LowLatencyThroughputModel.js"),g=u("./src/streaming/models/CustomParametersModel.js");function S(O,N,w){return N in O?Object.defineProperty(O,N,{value:w,enumerable:!0,configurable:!0,writable:!0}):O[N]=w,O}function C(O){var X,K,oe,ee,ue,pe,_e,ie,me,N=this.context,w=(O=O||{}).errHandler,P=O.dashMetrics,f=O.mediaPlayerModel,R=O.requestModifier,V=O.boxParser,Q=O.errors,$=O.requestTimeout||0,J=Object(L.default)(N).getInstance(),te=Object(F.default)(N).getInstance();function ge(se,ve){var De,ne=se.request,Y=[],H=!0,E=!0,I=new Date,U=I,W=0,re=null;if(!R||!P||!w)throw new Error("config object is not correct or missing");var Ee,Ie=function(lt){if(E=!1,ne.requestStartDate=I,ne.requestEndDate=new Date,ne.firstByteDate=ne.firstByteDate||I,ne.fileLoaderType=re,!ne.checkExistenceOnly){var Dt=De.response?De.response.responseURL:null,Ft=De.response?De.response.status:null,Ht=De.response&&De.response.getAllResponseHeaders?De.response.getAllResponseHeaders():De.response?De.response.responseHeaders:[];P.addHttpRequest(ne,Dt,Ft,Ht,lt?Y:null),ne.type===M.HTTPRequest.MPD_TYPE&&P.addManifestUpdate(ne)}},le=function(){if(-1!==K.indexOf(De)&&(K.splice(K.indexOf(De),1),E))if(Ie(!1),ve>0){try{te.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&ne.type===M.HTTPRequest.MEDIA_SEGMENT_TYPE&&f.getRetryAttemptsForType(M.HTTPRequest.MEDIA_SEGMENT_TYPE)===ve&&J.trigger(b.default.ATTEMPT_BACKGROUND_SYNC)}catch{}ve--;var Dt={config:se};ee.push(Dt),Dt.timeout=setTimeout(function(){-1!==ee.indexOf(Dt)&&(ee.splice(ee.indexOf(Dt),1),ge(se,ve))},f.getRetryIntervalsForType(ne.type))}else{if(ne.type===M.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;w.error(new D.default(ue[ne.type],ne.url+" is not available",{request:ne,response:De.response})),se.error&&se.error(ne,"error",De.response.statusText),se.complete&&se.complete(ne,De.response.statusText)}};ne.hasOwnProperty("availabilityTimeComplete")&&!1===ne.availabilityTimeComplete&&window.fetch&&"arraybuffer"===ne.responseType&&ne.type===M.HTTPRequest.MEDIA_SEGMENT_TYPE?((Ee=Object(_.default)(N).create({requestModifier:R,lowLatencyThroughputModel:ie,boxParser:V})).setup({dashMetrics:P}),re=m.default.FILE_LOADER_TYPES.FETCH):(Ee=Object(B.default)(N).create({requestModifier:R}),re=m.default.FILE_LOADER_TYPES.XHR);var Ce=null,Fe=R.modifyRequestURL(ne.url);if(te.get().streaming.cmcd&&te.get().streaming.cmcd.enabled){var Oe=te.get().streaming.cmcd.mode;if(Oe===m.default.CMCD_MODE_QUERY){var Le=function fe(se){try{var ve=[],ne=pe.getQueryParameter(se);return ne&&ve.push(ne),ve}catch{return[]}}(ne);Fe=v.default.addAditionalQueryParameterToUrl(Fe,Le)}else Oe===m.default.CMCD_MODE_HEADER&&(Ce=pe.getHeaderParameters(ne))}ne.url=Fe;var He=ne.checkExistenceOnly?M.HTTPRequest.HEAD:M.HTTPRequest.GET,Pe=_e.getXHRWithCredentialsForType(ne.type);De={url:Fe,method:He,withCredentials:Pe,request:ne,onload:function(){De.response.status>=200&&De.response.status<=299&&(Ie(!0),se.success&&se.success(De.response.response,De.response.statusText,De.response.responseURL),se.complete&&se.complete(ne,De.response.statusText))},onend:le,onerror:le,progress:function(lt){var Dt=new Date;H&&(H=!1,(!lt.lengthComputable||lt.lengthComputable&&lt.total!==lt.loaded)&&(ne.firstByteDate=Dt)),lt.lengthComputable&&(ne.bytesLoaded=lt.loaded,ne.bytesTotal=lt.total),lt.noTrace||(Y.push({s:U,d:lt.time?lt.time:Dt.getTime()-U.getTime(),b:[lt.loaded?lt.loaded-W:0],t:lt.throughput}),U=Dt,W=lt.loaded),se.progress&&lt&&se.progress(lt)},onabort:function(){se.abort&&se.abort(ne)},ontimeout:function(lt){var Dt;Dt=lt.lengthComputable?"Request timeout: loaded: "+lt.loaded+", out of: "+lt.total+" : "+(lt.loaded/lt.total*100).toFixed(3)+"% Completed":"Request timeout: non-computable download size",me.warn(Dt)},loader:Ee,timeout:$,headers:Ce};var Ue=(new Date).getTime();if(isNaN(ne.delayLoadingTime)||Ue>=ne.delayLoadingTime)K.push(De),Ee.load(De);else{var Qe={httpRequest:De};oe.push(Qe),Qe.delayTimeout=setTimeout(function(){if(-1!==oe.indexOf(Qe)){oe.splice(oe.indexOf(Qe),1);try{I=new Date,U=I,K.push(Qe.httpRequest),Ee.load(Qe.httpRequest)}catch{Qe.httpRequest.onerror()}}},ne.delayLoadingTime-Ue)}}return X={load:function ce(se){se.request?ge(se,f.getRetryAttemptsForType(se.request.type)):se.error&&se.error(se.request,"error")},abort:function de(){ee.forEach(function(se){clearTimeout(se.timeout),se.config.request&&se.config.abort&&se.config.abort(se.config.request)}),ee=[],oe.forEach(function(se){return clearTimeout(se.delayTimeout)}),oe=[],K.forEach(function(se){se.request.type!==M.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(se.onloadend=se.onerror=se.onprogress=void 0,se.loader.abort(se))}),K=[]}},function ae(){var se;me=Object(p.default)(N).getInstance().getLogger(X),K=[],oe=[],ee=[],pe=Object(d.default)(N).getInstance(),ie=Object(h.default)(N).getInstance(),_e=Object(g.default)(N).getInstance(),S(se={},M.HTTPRequest.MPD_TYPE,Q.DOWNLOAD_ERROR_ID_MANIFEST_CODE),S(se,M.HTTPRequest.XLINK_EXPANSION_TYPE,Q.DOWNLOAD_ERROR_ID_XLINK_CODE),S(se,M.HTTPRequest.INIT_SEGMENT_TYPE,Q.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),S(se,M.HTTPRequest.MEDIA_SEGMENT_TYPE,Q.DOWNLOAD_ERROR_ID_CONTENT_CODE),S(se,M.HTTPRequest.INDEX_SEGMENT_TYPE,Q.DOWNLOAD_ERROR_ID_CONTENT_CODE),S(se,M.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,Q.DOWNLOAD_ERROR_ID_CONTENT_CODE),S(se,M.HTTPRequest.OTHER_TYPE,Q.DOWNLOAD_ERROR_ID_CONTENT_CODE),ue=se}(),X}C.__dashjs_factory_name="HTTPLoader";var x=y.default.getClassFactory(C);k.default=x},"./src/streaming/net/SchemeLoaderFactory.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/net/HTTPLoader.js");function M(){var d;function L(){d={}}function F(){L()}return function m(){F()}(),{getLoader:function b(h){for(var g in d)if(d.hasOwnProperty(g)&&h.startsWith(g))return d[g];return _.default},registerLoader:function v(h,g){d[h]=g},unregisterLoader:function p(h){d[h]&&delete d[h]},unregisterAllLoader:L,reset:F}}M.__dashjs_factory_name="SchemeLoaderFactory";var y=B.default.getSingletonFactory(M);k.default=y},"./src/streaming/net/URLLoader.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/net/SchemeLoaderFactory.js");function M(D){D=D||{};var p,L,d=this.context;return p=Object(_.default)(d).getInstance(),{load:function b(m){if(!L){var h=p.getLoader(m&&m.request?m.request.url:null);L=h(d).create({errHandler:D.errHandler,mediaPlayerModel:D.mediaPlayerModel,requestModifier:D.requestModifier,dashMetrics:D.dashMetrics,boxParser:D.boxParser?D.boxParser:null,constants:D.constants?D.constants:null,dashConstants:D.dashConstants?D.dashConstants:null,urlUtils:D.urlUtils?D.urlUtils:null,requestTimeout:isNaN(D.requestTimeout)?0:D.requestTimeout,errors:D.errors})}L.load(m)},abort:function F(){L&&L.abort()}}}M.__dashjs_factory_name="URLLoader";var y=B.default.getClassFactory(M);k.default=y},"./src/streaming/net/XHRLoader.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(y){var D=(y=y||{}).requestModifier;return{load:function v(L){var b=new Date,F=L.request,m=new XMLHttpRequest;if(m.open(L.method,L.url,!0),F.responseType&&(m.responseType=F.responseType),F.range&&m.setRequestHeader("Range","bytes="+F.range),F.requestStartDate||(F.requestStartDate=b),D&&(m=D.modifyRequestHeader(m)),L.headers)for(var h in L.headers){var g=L.headers[h];g&&m.setRequestHeader(h,g)}m.withCredentials=L.withCredentials,m.onload=L.onload,m.onloadend=L.onend,m.onerror=L.onerror,m.onprogress=L.progress,m.onabort=L.onabort,m.ontimeout=L.ontimeout,m.timeout=L.timeout,m.send(),L.response=m},abort:function p(L){var b=L.response;b.onloadend=b.onerror=b.onprogress=void 0,b.abort()}}}_.__dashjs_factory_name="XHRLoader";var M=B.default.getClassFactory(_);k.default=M},"./src/streaming/protection/CommonEncryption.js":function(we,k,u){"use strict";function _(d,v){for(var p=0;p<v.length;p++){var L=v[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,L.key,L)}}u.r(k);var y={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};k.default=function(){function d(){!function B(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")}(this,d)}return function M(d,v,p){return v&&_(d.prototype,v),p&&_(d,p),d}(d,null,[{key:"findCencContentProtection",value:function(p){for(var L=null,b=0;b<p.length;++b){var F=p[b];"urn:mpeg:dash:mp4protection:2011"===F.schemeIdUri.toLowerCase()&&("cenc"===F.value.toLowerCase()||"cbcs"===F.value.toLowerCase())&&(L=F)}return L}},{key:"getPSSHData",value:function(p){var L=8,b=new DataView(p),F=b.getUint8(L);return L+=20,F>0&&(L+=4+16*b.getUint32(L)),p.slice(L+=4)}},{key:"getPSSHForKeySystem",value:function(p,L){var b=d.parsePSSHList(L);return p&&b.hasOwnProperty(p.uuid.toLowerCase())?b[p.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(p,L){return"pssh"in p?(p.pssh.__text=p.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),L.decodeArray(p.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(p){if(null==p)return[];for(var L=new DataView(p.buffer||p),F={},m=0;;){var g,S=void 0,C=void 0,x=m;if(m>=L.buffer.byteLength)break;if(g=m+L.getUint32(m),1886614376===L.getUint32(m+=4))if(0===(S=L.getUint8(m+=4))||1===S){m++,m+=3,C="";var O=void 0,N=void 0;for(O=0;O<4;O++)C+=1===(N=L.getUint8(m+O).toString(16)).length?"0"+N:N;for(m+=4,C+="-",O=0;O<2;O++)C+=1===(N=L.getUint8(m+O).toString(16)).length?"0"+N:N;for(m+=2,C+="-",O=0;O<2;O++)C+=1===(N=L.getUint8(m+O).toString(16)).length?"0"+N:N;for(m+=2,C+="-",O=0;O<2;O++)C+=1===(N=L.getUint8(m+O).toString(16)).length?"0"+N:N;for(m+=2,C+="-",O=0;O<6;O++)C+=1===(N=L.getUint8(m+O).toString(16)).length?"0"+N:N;m+=6,m+=4,F[C=C.toLowerCase()]=L.buffer.slice(x,g),m=g}else m=g;else m=g}return F}},{key:"getLicenseServerUrlFromMediaInfo",value:function(p,L){try{if(!p||0===p.length)return null;for(var b=0,F=null;b<p.length&&!F;){var m=p[b];if(m&&m.contentProtection&&m.contentProtection.length>0){var h=m.contentProtection.filter(function(w){return w.schemeIdUri&&w.schemeIdUri===L});if(h&&h.length>0)for(var g=0;g<h.length&&!F;){for(var S=h[g],C=0;C<y.attributes.length&&!F;){for(var x=0,O=y.attributes[C];x<y.prefixes.length&&!F;)S[O]&&S[O].__prefix&&S[O].__prefix===y.prefixes[x]&&S[O].__text&&(F=S[O].__text),x+=1;C+=1}g+=1}}b+=1}return F}catch{return null}}}]),d}()},"./src/streaming/protection/Protection.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/controllers/ProtectionController.js"),_=u("./src/streaming/protection/controllers/ProtectionKeyController.js"),M=u("./src/streaming/protection/ProtectionEvents.js"),y=u("./src/streaming/protection/errors/ProtectionErrors.js"),D=u("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),d=u("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),v=u("./src/streaming/protection/models/ProtectionModel_01b.js"),p=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],L=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function b(){var m,h=this.context;function C(x,O){for(var N=0;N<O.length;N++){var w=O[N];if("function"==typeof x[w[Object.keys(w)[0]]])return w}return null}return m={createProtectionSystem:function g(x){var O=null,N=Object(_.default)(h).getInstance();N.setConfig({debug:x.debug,BASE64:x.BASE64,settings:x.settings}),N.initialize();var w=function S(x){var O=x.debug,N=O.getLogger(m),w=x.eventBus,P=x.errHandler,f=x.videoModel?x.videoModel.getElement():null;return f&&void 0===f.onencrypted||f&&void 0===f.mediaKeys?C(f,L)?(N.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(d.default)(h).create({debug:O,eventBus:w,events:x.events,api:C(f,L)})):C(f,p)?(N.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(v.default)(h).create({debug:O,eventBus:w,errHandler:P,events:x.events,api:C(f,p)})):(N.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(N.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(D.default)(h).create({debug:O,eventBus:w,events:x.events}))}(x);return!O&&w&&(O=Object(B.default)(h).create({protectionModel:w,protectionKeyController:N,eventBus:x.eventBus,debug:x.debug,events:x.events,BASE64:x.BASE64,constants:x.constants,cmcdModel:x.cmcdModel,customParametersModel:x.customParametersModel,settings:x.settings}),x.capabilities.setEncryptedMediaSupported(!0)),O}}}b.__dashjs_factory_name="Protection";var F=dashjs.FactoryMaker.getClassFactory(b);F.events=M.default,F.errors=y.default,dashjs.FactoryMaker.updateClassFactory(b.__dashjs_factory_name,F),k.default=F},"./src/streaming/protection/ProtectionEvents.js":function(we,k,u){"use strict";function _(h){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function y(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function d(h){var g=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=b(h);if(g){var O=b(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return v(this,x)}}function v(h,g){return!g||"object"!==_(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function b(h){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){y(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",C.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",C.KEY_ADDED="public_keyAdded",C.KEY_ERROR="public_keyError",C.KEY_MESSAGE="public_keyMessage",C.KEY_SESSION_CLOSED="public_keySessionClosed",C.KEY_SESSION_CREATED="public_keySessionCreated",C.KEY_SESSION_REMOVED="public_keySessionRemoved",C.KEY_STATUSES_CHANGED="public_keyStatusesChanged",C.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",C.KEY_SYSTEM_SELECTED="public_keySystemSelected",C.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",C.LICENSE_REQUEST_SENDING="public_licenseRequestSending",C.NEED_KEY="needkey",C.PROTECTION_CREATED="public_protectioncreated",C.PROTECTION_DESTROYED="public_protectiondestroyed",C.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",C.TEARDOWN_COMPLETE="protectionTeardownComplete",C.VIDEO_ELEMENT_SELECTED="videoElementSelected",C.KEY_SESSION_UPDATED="public_keySessionUpdated",C}return S}(u("./src/core/events/EventsBase.js").default));k.default=m},"./src/streaming/protection/controllers/ProtectionController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/CommonEncryption.js"),_=u("./src/streaming/protection/vo/MediaCapability.js"),M=u("./src/streaming/protection/vo/KeySystemConfiguration.js"),y=u("./src/streaming/protection/errors/ProtectionErrors.js"),D=u("./src/streaming/vo/DashJSError.js"),d=u("./src/streaming/protection/vo/LicenseRequest.js"),v=u("./src/streaming/protection/vo/LicenseResponse.js"),p=u("./src/streaming/vo/metrics/HTTPRequest.js"),L=u("./src/core/Utils.js"),b=u("./src/streaming/constants/Constants.js"),F=u("./src/core/FactoryMaker.js");function m(N){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(N)}function O(N){var oe,ee,ue,pe,_e,ie,me,ae,ge,fe,ce,w=(N=N||{}).protectionKeyController,P=N.protectionModel,f=N.eventBus,R=N.events,V=N.debug,Q=N.BASE64,$=N.constants,J=[],te=N.cmcdModel,X=N.settings,K=N.customParametersModel;function se(){if(!(f&&f.hasOwnProperty("on")&&w&&w.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function ne(Se,ke){ge?ue.push(Se):ae?ae&&function H(Se){var ke=Se.findIndex(function(at){return at.ks===ae}),Ze=Se[ke];-1===ke||!Ze.initData||E(Ze)}(Se):function Y(Se,ke){ge=!0;var et,Ze=[];Se=Se.sort(function(pt,jt){return(_e&&_e[pt.ks.systemString]&&_e[pt.ks.systemString].priority>=0?_e[pt.ks.systemString].priority:Se.length)-(_e&&_e[jt.ks.systemString]&&_e[jt.ks.systemString].priority>=0?_e[jt.ks.systemString].priority:Se.length)}),ue.push(Se);for(var at=0;at<Se.length;at++){var dt=He(Se[at]);Ze.push({ks:Se[at].ks,configs:[dt],protData:Se[at].protData})}P.requestKeySystemAccess(Ze).then(function(pt){return ee.info("DRM: KeySystem Access Granted for system string ("+((et=pt.data).mksa&&et.mksa.selectedSystemString?et.mksa.selectedSystemString:et.keySystem.systemString)+")!  Selecting key system..."),P.selectKeySystem(et)}).then(function(pt){if(ae=pt,ge=!1,P){f.trigger(R.KEY_SYSTEM_SELECTED,{data:et});var jt=W(ae);jt&&jt.serverCertificate&&jt.serverCertificate.length>0&&P.setServerCertificate(Q.decodeArray(jt.serverCertificate).buffer);for(var Rt,Yt=0;Yt<ue.length;Yt++)for(Rt=0;Rt<ue[Yt].length;Rt++)if(ae===ue[Yt][Rt].ks){E(ue[Yt][Rt]);break}}}).catch(function(pt){ae=null,ge=!1,ke||f.trigger(R.KEY_SYSTEM_SELECTED,{data:null,error:new D.default(y.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,y.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+pt.error)})})}(Se,ke)}function E(Se){if(w.isClearKey(ae)&&Se.protData&&Se.protData.hasOwnProperty("clearkeys")){var ke={kids:Object.keys(Se.protData.clearkeys)};Se.initData=(new TextEncoder).encode(JSON.stringify(ke))}Se.sessionId?I(Se):null!==Se.initData&&U(Se)}function I(Se){se(),P.loadKeySession(Se)}function U(Se){var ke=B.default.getPSSHForKeySystem(ae,Se?Se.initData:null);if(ke){if(function Ie(Se){if(!Se)return!1;try{for(var ke=P.getSessions(),Ze=0;Ze<ke.length;Ze++)if(ke[Ze].getKeyId()===Se)return!0;return!1}catch{return!1}}(Se.keyId)||le(ke))return;try{Se.initData=ke,P.createKeySession(Se)}catch(Ze){f.trigger(R.KEY_SESSION_CREATED,{data:null,error:new D.default(y.default.KEY_SESSION_CREATED_ERROR_CODE,y.default.KEY_SESSION_CREATED_ERROR_MESSAGE+Ze.message)})}}else Se&&Se.initData?P.createKeySession(Se):f.trigger(R.KEY_SESSION_CREATED,{data:null,error:new D.default(y.default.KEY_SESSION_CREATED_ERROR_CODE,y.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(ae?ae.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function W(Se){if(Se){var ke=Se.systemString;if(_e)return ke in _e?_e[ke]:null}return null}function le(Se){if(!Se)return!1;try{for(var ke=P.getAllInitData(),Ze=0;Ze<ke.length;Ze++)if(w.initDataEquals(Se,ke[Ze]))return ee.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function ye(Se){se(),Se?(P.setMediaElement(Se),f.on(R.NEED_KEY,on,oe)):null===Se&&(P.setMediaElement(Se),f.off(R.NEED_KEY,on,oe))}function He(Se){var ke=Se.protData,Ze=[],at=[],dt=ke&&ke.audioRobustness&&ke.audioRobustness.length>0?ke.audioRobustness:me,et=ke&&ke.videoRobustness&&ke.videoRobustness.length>0?ke.videoRobustness:me,pt=Se.sessionType,jt=ke&&ke.distinctiveIdentifier?ke.distinctiveIdentifier:"optional",Rt=ke&&ke.persistentState?ke.persistentState:"temporary"===pt?"optional":"required";return pe.forEach(function(Yt){Yt.type===$.AUDIO?Ze.push(new _.default(Yt.codec,dt)):Yt.type===$.VIDEO&&at.push(new _.default(Yt.codec,et))}),new M.default(Ze,at,jt,Rt,[pt])}function Pe(Se){Se.error?f.trigger(R.KEY_STATUSES_CHANGED,{data:null,error:Se.error}):ee.debug("DRM: key status = "+Se.status)}function Ue(Se){ee.debug("DRM: onKeyMessage");var ke=Se.data;f.trigger(R.KEY_MESSAGE,{data:ke});var Ze=ke.messageType?ke.messageType:"license-request",at=ke.message,dt=ke.sessionToken,et=W(ae),pt=w.getLicenseServerModelInstance(ae,et,Ze),jt={sessionToken:dt,messageType:Ze};if(at&&0!==at.byteLength){if(!pt)return ee.debug("DRM: License server request not required for this message (type = "+Se.data.messageType+").  Session ID = "+dt.getSessionId()),void Qe(jt);if(w.isClearKey(ae)){var Rt=w.processClearKeyLicenseRequest(ae,et,at);if(Rt)return ee.debug("DRM: ClearKey license request handled by application!"),Qe(jt),void P.updateKeySession(dt,Rt)}!function ft(Se,ke,Ze){var at=Se.sessionToken,dt=Se.messageType?Se.messageType:"license-request",et={sessionToken:at,messageType:dt},pt=ae?ae.systemString:null,jt=function Ft(Se,ke,Ze,at,dt){var et=null,pt=at.message;if(Se&&Se.serverURL){var jt=Se.serverURL;"string"==typeof jt&&""!==jt?et=jt:"object"===m(jt)&&jt.hasOwnProperty(ke)&&(et=jt[ke])}else if(Se&&Se.laURL&&""!==Se.laURL)et=Se.laURL;else if(!(et=B.default.getLicenseServerUrlFromMediaInfo(pe,ae.schemeIdURI))&&!w.isClearKey(ae)){var Rt=B.default.getPSSHData(Ze.initData);(et=ae.getLicenseServerURLFromInitData(Rt))||(et=at.laURL)}return dt.getServerURLFromMessage(et,pt,ke)}(Ze,dt,at,Se,ke);if(jt){var Rt={},Yt=!1;Ze&&Ht(Rt,Ze.httpRequestHeaders);var Be=Se.message;Ht(Rt,ae.getRequestHeadersFromMessage(Be)),Object.keys(Rt).forEach(function(rt){"authorization"===rt.toLowerCase()&&(Yt=!0)}),Ze&&"boolean"==typeof Ze.withCredentials&&(Yt=Ze.withCredentials);var nt=function(yt){if(P)if(yt.status>=200&&yt.status<=299){var $t=L.default.parseHttpHeaders(yt.getAllResponseHeaders?yt.getAllResponseHeaders():null),ln=new v.default(yt.responseURL,$t,yt.response);sn(K.getLicenseResponseFilters(),ln).then(function(){var Wt=ke.getLicenseMessage(ln.data,pt,dt);null!==Wt?(Qe(et),P.updateKeySession(at,Wt)):Jt(yt,et,pt,dt,ke)})}else Jt(yt,et,pt,dt,ke)},Ot=function(yt){Qe(et,new D.default(y.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,y.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pt+' update, XHR aborted. status is "'+yt.statusText+'" ('+yt.status+"), readyState is "+yt.readyState))},Mt=function(yt){Qe(et,new D.default(y.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,y.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pt+' update, XHR error. status is "'+yt.statusText+'" ('+yt.status+"), readyState is "+yt.readyState))},wt=ae.getLicenseRequestFromMessage(Be),an=ke.getHTTPMethod(dt),ct=ke.getResponseType(pt,dt),Vt=Ze&&!isNaN(Ze.httpTimeout)?Ze.httpTimeout:8e3,Ae=at.getSessionId()||null,Xe=new d.default(jt,an,ct,Rt,Yt,dt,Ae,wt),Et=isNaN(X.get().streaming.retryAttempts[p.HTTPRequest.LICENSE])?3:X.get().streaming.retryAttempts[p.HTTPRequest.LICENSE];sn(K.getLicenseRequestFilters(),Xe).then(function(){lt(Xe,Et,Vt,nt,Ot,Mt)})}else Qe(et,new D.default(y.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,y.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(ke,pt,et)}else Qe(jt,new D.default(y.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,y.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Qe(Se,ke){f.trigger(R.LICENSE_REQUEST_COMPLETE,{data:Se,error:ke})}function lt(Se,ke,Ze,at,dt,et){var pt=new XMLHttpRequest;if(X.get().streaming.cmcd&&X.get().streaming.cmcd.enabled&&X.get().streaming.cmcd.mode===b.default.CMCD_MODE_QUERY){var Rt=te.getQueryParameter({url:Se.url,type:p.HTTPRequest.LICENSE});Rt&&(Se.url=L.default.addAditionalQueryParameterToUrl(Se.url,[Rt]))}for(var Yt in pt.open(Se.method,Se.url,!0),pt.responseType=Se.responseType,pt.withCredentials=Se.withCredentials,Ze>0&&(pt.timeout=Ze),Se.headers)pt.setRequestHeader(Yt,Se.headers[Yt]);if(X.get().streaming.cmcd&&X.get().streaming.cmcd.enabled&&X.get().streaming.cmcd.mode===b.default.CMCD_MODE_HEADER){var $e=te.getHeaderParameters({url:Se.url,type:p.HTTPRequest.LICENSE});if($e)for(var nt in $e){var Ot=$e[nt];Ot&&pt.setRequestHeader(nt,Ot)}}var Mt=function(){ke--;var an=isNaN(X.get().streaming.retryIntervals[p.HTTPRequest.LICENSE])?1e3:X.get().streaming.retryIntervals[p.HTTPRequest.LICENSE];ce=setTimeout(function(){lt(Se,ke,Ze,at,dt,et)},an)};pt.onload=function(){fe=null,this.status>=200&&this.status<=299||ke<=0?at(this):(ee.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+ke),Mt())},pt.ontimeout=pt.onerror=function(){fe=null,ke<=0?et(this):(ee.warn("License request network request failed . Retrying it... Pending retries: "+ke),Mt())},pt.onabort=function(){dt(this)},f.trigger(R.LICENSE_REQUEST_SENDING,{url:Se.url,headers:Se.headers,payload:Se.data,sessionId:Se.sessionId}),fe=pt,pt.send(Se.data)}function Dt(){fe&&(fe.onloadend=fe.onerror=fe.onprogress=void 0,fe.abort(),fe=null),ce&&(clearTimeout(ce),ce=null)}function Ht(Se,ke){if(ke)for(var Ze in ke)Se[Ze]=ke[Ze]}function Jt(Se,ke,Ze,at,dt){var et=Se.response?dt.getErrorResponse(Se.response,Ze,at):"NONE";Qe(ke,new D.default(y.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,y.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Ze+' update, XHR complete. status is "'+Se.statusText+'" ('+Se.status+"), readyState is "+Se.readyState+".  Response is "+et))}function sn(Se,ke){return Se?Se.reduce(function(Ze,at){return Ze.then(function(){return at(ke)})},Promise.resolve()):Promise.resolve()}function on(Se,ke){if(!X.get().streaming.protection.ignoreEmeEncryptedEvent){if(ee.debug("DRM: onNeedKey"),"cenc"!==Se.key.initDataType)return void ee.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Se.key.initDataType);if(0===pe.length&&(ee.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(ke=typeof ke>"u"?1:ke+1)<5))return void J.push(setTimeout(function(){on(Se,ke)},500));var Ze=Se.key.initData;if(ArrayBuffer.isView(Ze)&&(Ze=Ze.buffer),ae){var at=B.default.getPSSHForKeySystem(ae,Ze);if(at&&le(at))return}ee.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Ze)));var dt=w.getSupportedKeySystemsFromSegmentPssh(Ze,_e,ie);if(0===dt.length)return void ee.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");ne(dt,!1)}}return oe={initializeForMedia:function ve(Se){if(!Se)throw new Error("mediaInfo can not be null or undefined");se(),pe.push(Se);var ke=w.getSupportedKeySystemsFromContentProtection(Se.contentProtection,_e,ie);ke&&ke.length>0&&ne(ke,!0)},clearMediaInfoArray:function re(){pe=[]},createKeySession:U,loadKeySession:I,removeKeySession:function z(Se){se(),P.removeKeySession(Se)},closeKeySession:function G(Se){se(),P.closeKeySession(Se)},setServerCertificate:function Te(Se){se(),P.setServerCertificate(Se)},setMediaElement:ye,setSessionType:function Ee(Se){ie=Se},setRobustnessLevel:function Ce(Se){me=Se},setProtectionData:function Fe(Se){_e=Se,w.setProtectionData(Se)},getSupportedKeySystemsFromContentProtection:function De(Se){return se(),w.getSupportedKeySystemsFromContentProtection(Se,_e,ie)},getKeySystems:function je(){return w?w.getKeySystems():[]},setKeySystems:function xe(Se){w&&w.setKeySystems(Se)},stop:function Oe(){Dt(),P&&P.stop()},reset:function Le(){f.off(R.INTERNAL_KEY_MESSAGE,Ue,oe),f.off(R.INTERNAL_KEY_STATUS_CHANGED,Pe,oe),se(),Dt(),ye(null),ae=null,ge=!1,P&&(P.reset(),P=null),J.forEach(function(Se){return clearTimeout(Se)}),J=[],pe=[],ue=[]}},function de(){ee=V.getLogger(oe),ue=[],pe=[],ie="temporary",me="",fe=null,ce=null,f.on(R.INTERNAL_KEY_MESSAGE,Ue,oe),f.on(R.INTERNAL_KEY_STATUS_CHANGED,Pe,oe)}(),oe}O.__dashjs_factory_name="ProtectionController",k.default=F.default.getClassFactory(O)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/CommonEncryption.js"),_=u("./src/streaming/protection/drm/KeySystemClearKey.js"),M=u("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),y=u("./src/streaming/protection/drm/KeySystemWidevine.js"),D=u("./src/streaming/protection/drm/KeySystemPlayReady.js"),d=u("./src/streaming/protection/servers/DRMToday.js"),v=u("./src/streaming/protection/servers/PlayReady.js"),p=u("./src/streaming/protection/servers/Widevine.js"),L=u("./src/streaming/protection/servers/ClearKey.js"),b=u("./src/streaming/constants/ProtectionConstants.js");function F(){var h,g,S,C,x,O,N,w,m=this.context;function ue(ie,me){return me&&ie in me?me[ie]:null}function pe(ie,me){return ie&&ie.sessionId?ie.sessionId:me&&me.sessionId?me.sessionId:null}function _e(ie,me){return ie&&ie.sessionType?ie.sessionType:me}return h={initialize:function f(){var ie;C=[],ie=Object(D.default)(m).getInstance({BASE64:x,settings:O}),C.push(ie),ie=Object(y.default)(m).getInstance({BASE64:x}),C.push(ie),ie=Object(_.default)(m).getInstance({BASE64:x}),C.push(ie),N=ie,ie=Object(M.default)(m).getInstance({BASE64:x,debug:g}),C.push(ie),w=ie},setProtectionData:function ee(ie){for(var ae=0;ae<C.length;ae++){var ge=C[ae];ge.hasOwnProperty("init")&&ge.init((ce=ge.systemString,de=void 0,de=null,ie&&(de=ce in ie?ie[ce]:null),de))}var ce,de},isClearKey:function $(ie){return ie===N||ie===w},initDataEquals:function J(ie,me){if(ie.byteLength===me.byteLength){for(var ae=new Uint8Array(ie),ge=new Uint8Array(me),fe=0;fe<ae.length;fe++)if(ae[fe]!==ge[fe])return!1;return!0}return!1},getKeySystems:function R(){return C},setKeySystems:function V(ie){C=ie},getKeySystemBySystemString:function Q(ie){for(var me=0;me<C.length;me++)if(C[me].systemString===ie)return C[me];return null},getSupportedKeySystemsFromContentProtection:function te(ie,me,ae){var ge,fe,ce,de,se=[];if(ie){var ve=B.default.findCencContentProtection(ie);for(ce=0;ce<C.length;++ce){var ne=ue((fe=C[ce]).systemString,me);for(de=0;de<ie.length;++de)if((ge=ie[de]).schemeIdUri.toLowerCase()===fe.schemeIdURI){var Y=fe.getInitData(ge,ve);se.push({ks:C[ce],keyId:ge.keyId,initData:Y,protData:ne,cdmData:fe.getCDMData(ne?ne.cdmData:null),sessionId:pe(ne,ge),sessionType:_e(ne,ae)})}}}return se},getSupportedKeySystemsFromSegmentPssh:function X(ie,me,ae){for(var ce,ge=[],fe=B.default.parsePSSHList(ie),se=0;se<C.length;++se){var ve=ue((ce=C[se]).systemString,me);ce.uuid in fe&&ge.push({ks:ce,initData:fe[ce.uuid],protData:ve,cdmData:ce.getCDMData(ve?ve.cdmData:null),sessionId:pe(ve),sessionType:_e(ve,ae)})}return ge},getLicenseServerModelInstance:function K(ie,me,ae){if("license-release"===ae||"individualization-request"===ae)return null;var ge=null;return me&&me.hasOwnProperty("drmtoday")?ge=Object(d.default)(m).getInstance({BASE64:x}):ie.systemString===b.default.WIDEVINE_KEYSTEM_STRING?ge=Object(p.default)(m).getInstance():ie.systemString===b.default.PLAYREADY_KEYSTEM_STRING?ge=Object(v.default)(m).getInstance():ie.systemString===b.default.CLEARKEY_KEYSTEM_STRING&&(ge=Object(L.default)(m).getInstance()),ge},processClearKeyLicenseRequest:function oe(ie,me,ae){try{return ie.getClearKeysFromProtectionData(me,ae)}catch{return S.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function P(ie){!ie||(ie.debug&&(S=(g=ie.debug).getLogger(h)),ie.BASE64&&(x=ie.BASE64),ie.settings&&(O=ie.settings))}}}F.__dashjs_factory_name="ProtectionKeyController",k.default=dashjs.FactoryMaker.getSingletonFactory(F)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/vo/KeyPair.js"),_=u("./src/streaming/protection/vo/ClearKeyKeySet.js"),M=u("./src/streaming/protection/CommonEncryption.js"),y=u("./src/streaming/constants/ProtectionConstants.js"),D="e2719d58-a985-b3c9-781a-b030af78d30e",d=y.default.CLEARKEY_KEYSTEM_STRING;function p(L){var F=(L=L||{}).BASE64;function g(N){try{var w=N.replace(/-/g,"");return(w=btoa(w.match(/\w{2}/g).map(function(P){return String.fromCharCode(parseInt(P,16))}).join(""))).replace(/=/g,"")}catch{return null}}return{uuid:D,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:d,getInitData:function h(N,w){try{var P=M.default.parseInitDataFromContentProtection(N,F);if(!P&&w){var R={kids:[g(w["cenc:default_KID"])]};P=(new TextEncoder).encode(JSON.stringify(R))}return P}catch{return null}},getRequestHeadersFromMessage:function S(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function C(N){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(N))))},getLicenseServerURLFromInitData:function x(){return null},getCDMData:function O(){return null},getClearKeysFromProtectionData:function m(N,w){var P=null;if(N){for(var f=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(w))),R=[],V=0;V<f.kids.length;V++){var Q=f.kids[V],$=N.clearkeys&&N.clearkeys.hasOwnProperty(Q)?N.clearkeys[Q]:null;if(!$)throw new Error("DRM: ClearKey keyID ("+Q+") is not known!");R.push(new B.default(Q,$))}P=new _.default(R)}return P}}}p.__dashjs_factory_name="KeySystemClearKey",k.default=dashjs.FactoryMaker.getSingletonFactory(p)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/CommonEncryption.js"),_=u("./src/streaming/constants/ProtectionConstants.js"),M="9a04f079-9840-4286-ab92-e65be0885f95",y=_.default.PLAYREADY_KEYSTEM_STRING;function v(p){var b="utf-16",F=(p=p||{}).BASE64,m=p.settings;function h(){if(!F||!F.hasOwnProperty("decodeArray")||!F.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:M,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:y,getInitData:function x(w){var Q,$,J,te,X,P=new Uint8Array([112,115,115,104,0,0,0,0]),f=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),R=0,V=null;if(h(),!w)return null;if("pssh"in w)return B.default.parseInitDataFromContentProtection(w,F);if("pro"in w)V=F.decodeArray(w.pro.__text);else{if(!("prheader"in w))return null;V=F.decodeArray(w.prheader.__text)}return $=4+P.length+f.length+4+(Q=V.length),J=new ArrayBuffer($),te=new Uint8Array(J),(X=new DataView(J)).setUint32(R,$),te.set(P,R+=4),te.set(f,R+=P.length),X.setUint32(R+=f.length,Q),te.set(V,R+=4),R+=Q,te.buffer},getRequestHeadersFromMessage:function g(w){var P,f,R={},V=new DOMParser;if(m&&m.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===b&&w&&w.byteLength%2==1)return R["Content-Type"]="text/xml; charset=utf-8",R;var Q="utf-16"===b?new Uint16Array(w):new Uint8Array(w);P=String.fromCharCode.apply(null,Q);for(var $=(f=V.parseFromString(P,"application/xml")).getElementsByTagName("name"),J=f.getElementsByTagName("value"),te=0;te<$.length;te++)R[$[te].childNodes[0].nodeValue]=J[te].childNodes[0].nodeValue;return R.hasOwnProperty("Content")&&(R["Content-Type"]=R.Content,delete R.Content),R.hasOwnProperty("Content-Type")||(R["Content-Type"]="text/xml; charset=utf-8"),R},getLicenseRequestFromMessage:function S(w){var P=null,f=new DOMParser;if(m&&m.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===b&&w&&w.byteLength%2==1)return w;var R="utf-16"===b?new Uint16Array(w):new Uint8Array(w);h();var V=String.fromCharCode.apply(null,R),Q=f.parseFromString(V,"application/xml");if(!Q.getElementsByTagName("PlayReadyKeyMessage")[0])return w;var $=Q.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return $&&(P=F.decode($)),P},getLicenseServerURLFromInitData:function C(w){if(w)for(var P=new DataView(w),f=P.getUint16(4,!0),R=6,V=new DOMParser,Q=0;Q<f;Q++){var $=P.getUint16(R,!0),J=P.getUint16(R+=2,!0);if(R+=2,1===$){var te=w.slice(R,R+J),X=String.fromCharCode.apply(null,new Uint16Array(te)),K=V.parseFromString(X,"application/xml");if(K.getElementsByTagName("LA_URL")[0]){var oe=K.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(oe)return oe}if(K.getElementsByTagName("LUI_URL")[0]){var ee=K.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(ee)return ee}}else R+=J}return null},getCDMData:function N(w){var P,f,R,V;if(h(),!w)return null;for(P=[],V=0;V<w.length;++V)P.push(w.charCodeAt(V)),P.push(0);for(P=String.fromCharCode.apply(null,P),P=F.encode(P),f='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",P),R=[],V=0;V<f.length;++V)R.push(f.charCodeAt(V)),R.push(0);return new Uint8Array(R).buffer},setPlayReadyMessageFormat:function O(w){if("utf-8"!==w&&"utf-16"!==w)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');b=w}}}v.__dashjs_factory_name="KeySystemPlayReady",k.default=dashjs.FactoryMaker.getSingletonFactory(v)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/vo/KeyPair.js"),_=u("./src/streaming/protection/vo/ClearKeyKeySet.js"),M=u("./src/streaming/protection/CommonEncryption.js"),y=u("./src/streaming/constants/ProtectionConstants.js"),D="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",d=y.default.CLEARKEY_KEYSTEM_STRING;function p(L){var b,F=L.BASE64,m=L.debug.getLogger(b);return{uuid:D,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:d,getInitData:function g(N){return M.default.parseInitDataFromContentProtection(N,F)},getRequestHeadersFromMessage:function S(){return null},getLicenseRequestFromMessage:function C(N){return new Uint8Array(N)},getLicenseServerURLFromInitData:function x(){return null},getCDMData:function O(){return null},getClearKeysFromProtectionData:function h(N,w){var P=null;if(N){for(var f=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(w))),R=[],V=0;V<f.kids.length;V++){var Q=f.kids[V],$=N.clearkeys&&N.clearkeys.hasOwnProperty(Q)?N.clearkeys[Q]:null;if(!$)throw new Error("DRM: ClearKey keyID ("+Q+") is not known!");R.push(new B.default(Q,$))}P=new _.default(R),m.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return P}}}p.__dashjs_factory_name="KeySystemW3CClearKey",k.default=dashjs.FactoryMaker.getSingletonFactory(p)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/CommonEncryption.js"),_=u("./src/streaming/constants/ProtectionConstants.js"),M="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",y=_.default.WIDEVINE_KEYSTEM_STRING;function d(v){var L=(v=v||{}).BASE64;return{uuid:M,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:y,getInitData:function b(S){return B.default.parseInitDataFromContentProtection(S,L)},getRequestHeadersFromMessage:function F(){return null},getLicenseRequestFromMessage:function m(S){return new Uint8Array(S)},getLicenseServerURLFromInitData:function h(){return null},getCDMData:function g(){return null}}}d.__dashjs_factory_name="KeySystemWidevine",k.default=dashjs.FactoryMaker.getSingletonFactory(d)},"./src/streaming/protection/errors/ProtectionErrors.js":function(we,k,u){"use strict";function _(h){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function y(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function d(h){var g=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=b(h);if(g){var O=b(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return v(this,x)}}function v(h,g){return!g||"object"!==_(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function b(h){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){y(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).MEDIA_KEYERR_CODE=100,C.MEDIA_KEYERR_UNKNOWN_CODE=101,C.MEDIA_KEYERR_CLIENT_CODE=102,C.MEDIA_KEYERR_SERVICE_CODE=103,C.MEDIA_KEYERR_OUTPUT_CODE=104,C.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,C.MEDIA_KEYERR_DOMAIN_CODE=106,C.MEDIA_KEY_MESSAGE_ERROR_CODE=107,C.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,C.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,C.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,C.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,C.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,C.KEY_SESSION_CREATED_ERROR_CODE=113,C.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,C.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",C.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",C.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",C.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",C.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",C.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",C.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",C.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",C.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",C.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",C.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",C.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",C.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",C.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",C}return S}(u("./src/core/errors/ErrorsBase.js").default));k.default=m},"./src/streaming/protection/models/ProtectionModel_01b.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/controllers/ProtectionKeyController.js"),_=u("./src/streaming/protection/vo/NeedKey.js"),M=u("./src/streaming/vo/DashJSError.js"),y=u("./src/streaming/protection/vo/KeyMessage.js"),D=u("./src/streaming/protection/vo/KeySystemConfiguration.js"),d=u("./src/streaming/protection/vo/KeySystemAccess.js"),v=u("./src/streaming/protection/errors/ProtectionErrors.js");function p(L){var C,x,O,N,w,P,f,R,V,b=this.context,F=(L=L||{}).eventBus,m=L.events,h=L.debug,g=L.api,S=L.errHandler;function $(){O&&fe();for(var ce=0;ce<f.length;ce++)pe(f[ce]);F.trigger(m.TEARDOWN_COMPLETE)}function pe(ce){try{O[g.cancelKeyRequest](N.systemString,ce.sessionId)}catch(de){F.trigger(m.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+ce.sessionId+") "+de.message})}}function ge(ce,de){if(!de||!ce)return null;for(var se=ce.length,ve=0;ve<se;ve++)if(ce[ve].sessionId==de)return ce[ve];return null}function fe(){O.removeEventListener(g.keyerror,V),O.removeEventListener(g.needkey,V),O.removeEventListener(g.keymessage,V),O.removeEventListener(g.keyadded,V)}return C={getAllInitData:function J(){for(var ce=[],de=0;de<P.length;de++)ce.push(P[de].initData);for(var se=0;se<f.length;se++)ce.push(f[se].initData);return ce},getSessions:function te(){return f.concat(P)},requestKeySystemAccess:function X(ce){return new Promise(function(de,se){var ve=O;ve||(ve=document.createElement("video"));for(var ne=!1,Y=0;Y<ce.length;Y++)for(var H=ce[Y].ks.systemString,E=ce[Y].configs,I=null,U=null,W=0;W<E.length;W++){var re=E[W].videoCapabilities;if(re&&0!==re.length){U=[];for(var De=0;De<re.length;De++)""!==ve.canPlayType(re[De].contentType,H)&&U.push(re[De])}if(U&&(!U||0!==U.length)){ne=!0;var Ie=new D.default(I,U),le=w.getKeySystemBySystemString(H),z=new d.default(le,Ie);F.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{data:z}),de({data:z});break}}if(!ne){var G="Key system access denied! -- No valid audio/video content configurations detected!";F.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{error:G}),se({error:G})}})},selectKeySystem:function K(ce){return N=ce.keySystem,Promise.resolve(N)},setMediaElement:function oe(ce){if(O!==ce){if(O){fe();for(var de=0;de<f.length;de++)pe(f[de]);f=[]}(O=ce)&&(O.addEventListener(g.keyerror,V),O.addEventListener(g.needkey,V),O.addEventListener(g.keymessage,V),O.addEventListener(g.keyadded,V),F.trigger(m.VIDEO_ELEMENT_SELECTED))}},createKeySession:function ee(ce){if(!N)throw new Error("Can not create sessions until you have selected a key system");if(R||0===f.length){var de={sessionId:null,keyId:ce.keyId,initData:ce.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return P.push(de),O[g.generateKeyRequest](N.systemString,new Uint8Array(ce.initData)),de}throw new Error("Multiple sessions not allowed!")},updateKeySession:function ue(ce,de){var se=ce.sessionId;if(w.isClearKey(N))for(var ve=0;ve<de.keyPairs.length;ve++)O[g.addKey](N.systemString,de.keyPairs[ve].key,de.keyPairs[ve].keyID,se);else O[g.addKey](N.systemString,new Uint8Array(de),new Uint8Array(ce.initData),se);F.trigger(m.KEY_SESSION_UPDATED)},closeKeySession:pe,setServerCertificate:function _e(){},loadKeySession:function ie(){},removeKeySession:function me(){},stop:$,reset:$},function Q(){x=h.getLogger(C),O=null,N=null,P=[],f=[],w=Object(B.default)(b).getInstance(),V=function ae(){return{handleEvent:function(de){var se=null;switch(de.type){case g.needkey:var ve=ArrayBuffer.isView(de.initData)?de.initData.buffer:de.initData;F.trigger(m.NEED_KEY,{key:new _.default(ve,"cenc")});break;case g.keyerror:if((se=ge(f,de.sessionId))||(se=ge(P,de.sessionId)),se){var ne=v.default.MEDIA_KEYERR_CODE,Y="";switch(de.errorCode.code){case 1:ne=v.default.MEDIA_KEYERR_UNKNOWN_CODE,Y+="MEDIA_KEYERR_UNKNOWN - "+v.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ne=v.default.MEDIA_KEYERR_CLIENT_CODE,Y+="MEDIA_KEYERR_CLIENT - "+v.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ne=v.default.MEDIA_KEYERR_SERVICE_CODE,Y+="MEDIA_KEYERR_SERVICE - "+v.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ne=v.default.MEDIA_KEYERR_OUTPUT_CODE,Y+="MEDIA_KEYERR_OUTPUT - "+v.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ne=v.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,Y+="MEDIA_KEYERR_HARDWARECHANGE - "+v.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ne=v.default.MEDIA_KEYERR_DOMAIN_CODE,Y+="MEDIA_KEYERR_DOMAIN - "+v.default.MEDIA_KEYERR_DOMAIN_MESSAGE}F.trigger(m.KEY_ERROR,{error:new M.default(ne,Y+="  System Code = "+de.systemCode,se)})}else x.error("No session token found for key error");break;case g.keyadded:(se=ge(f,de.sessionId))||(se=ge(P,de.sessionId)),se?(x.debug("DRM: Key added."),F.trigger(m.KEY_ADDED,{data:se})):x.debug("No session token found for key added");break;case g.keymessage:if((R=null!=de.sessionId)?!(se=ge(f,de.sessionId))&&P.length>0&&(se=P.shift(),f.push(se),se.sessionId=de.sessionId,F.trigger(m.KEY_SESSION_CREATED,{data:se})):P.length>0&&(se=P.shift(),f.push(se),0!==P.length&&S.error(new M.default(v.default.MEDIA_KEY_MESSAGE_ERROR_CODE,v.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),se){var H=ArrayBuffer.isView(de.message)?de.message.buffer:de.message;se.keyMessage=H,F.trigger(m.INTERNAL_KEY_MESSAGE,{data:new y.default(se,H,de.defaultURL)})}else x.warn("No session token found for key message")}}}}()}(),C}p.__dashjs_factory_name="ProtectionModel_01b",k.default=dashjs.FactoryMaker.getClassFactory(p)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/controllers/ProtectionKeyController.js"),_=u("./src/streaming/protection/vo/NeedKey.js"),M=u("./src/streaming/protection/errors/ProtectionErrors.js"),y=u("./src/streaming/vo/DashJSError.js"),D=u("./src/streaming/protection/vo/KeyMessage.js"),d=u("./src/streaming/protection/vo/KeySystemAccess.js"),v=u("./src/streaming/constants/ProtectionConstants.js"),p={};function L(b){var S,C,x,O,N,w,P,f,F=this.context,m=(b=b||{}).eventBus,h=b.events,g=b.debug;function X(ne,Y,H,E){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var I="Insecure origins are not allowed";return m.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:I}),void E({error:I})}var re=ne[Y].ks,De=re.systemString;(function K(ne,Y){return new Promise(function(H,E){oe(ne,Y,0,H,E)})})((ne[Y].protData&&ne[Y].protData.systemStringPriority?ne[Y].protData.systemStringPriority:null)||(p[De]?p[De]:[De]),ne[Y].configs).then(function(le){var z="function"==typeof le.getConfiguration?le.getConfiguration():null,G=new d.default(re,z);G.mksa=le,m.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{data:G}),H({data:G})}).catch(function(le){if(Y+1<ne.length)X(ne,Y+1,H,E);else{var z="Key system access denied! ";m.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:z+le.message}),E({error:z+le.message})}})}function oe(ne,Y,H,E,I){var U=ne[H];C.debug("Requesting key system access for system string ".concat(U)),navigator.requestMediaKeySystemAccess(U,Y).then(function(W){W.selectedSystemString=U,E(W)}).catch(function(W){H+1<ne.length?oe(ne,Y,H+1,E,I):I(W)})}function fe(ne){var Y=ne.session;return Y.removeEventListener("keystatuseschange",ne),Y.removeEventListener("message",ne),Y.close()}function de(ne){for(var Y=0;Y<w.length;Y++)if(w[Y]===ne){w.splice(Y,1);break}}function se(ne){var Y,H;return ne&&ne.length>0&&(ne[0]&&("string"==typeof ne[0]?Y=ne[0]:H=ne[0]),ne[1]&&("string"==typeof ne[1]?Y=ne[1]:H=ne[1])),{status:Y,keyId:H}}function ve(ne,Y){var H={session:ne,keyId:Y.keyId,initData:Y.initData,sessionId:Y.sessionId,sessionType:Y.sessionType,handleEvent:function(I){switch(I.type){case"keystatuseschange":m.trigger(h.KEY_STATUSES_CHANGED,{data:this}),I.target.keyStatuses.forEach(function(){var W=se(arguments);m.trigger(h.INTERNAL_KEY_STATUS_CHANGED,"expired"===W.status?{error:new y.default(M.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,M.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}:W)});break;case"message":var U=ArrayBuffer.isView(I.message)?I.message.buffer:I.message;m.trigger(h.INTERNAL_KEY_MESSAGE,{data:new D.default(this,U,void 0,I.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return ne.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return ne.expiration},getKeyStatuses:function(){return ne.keyStatuses},getUsable:function(){var I=!1;return ne.keyStatuses.forEach(function(){"usable"===se(arguments).status&&(I=!0)}),I}};return ne.addEventListener("keystatuseschange",H),ne.addEventListener("message",H),ne.closed.then(function(){de(H),C.debug("DRM: Session closed.  SessionID = "+H.getSessionId()),m.trigger(h.KEY_SESSION_CLOSED,{data:H.getSessionId()})}),w.push(H),H}return S={getAllInitData:function $(){for(var ne=[],Y=0;Y<w.length;Y++)w[Y].initData&&ne.push(w[Y].initData);return ne},getSessions:function J(){return w},requestKeySystemAccess:function te(ne){return new Promise(function(Y,H){X(ne,0,Y,H)})},selectKeySystem:function ee(ne){return new Promise(function(Y,H){ne.mksa.createMediaKeys().then(function(E){return x=ne.keySystem,N=E,O?O.setMediaKeys(N):Promise.resolve()}).then(function(){Y(x)}).catch(function(){H({error:"Error selecting keys system ("+ne.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function ue(ne){O!==ne&&(O&&(O.removeEventListener("encrypted",P),O.setMediaKeys&&O.setMediaKeys(null)),(O=ne)&&(O.addEventListener("encrypted",P),O.setMediaKeys&&N&&O.setMediaKeys(N)))},setServerCertificate:function pe(ne){if(!x||!N)throw new Error("Can not set server certificate until you have selected a key system");N.setServerCertificate(ne).then(function(){C.info("DRM: License server certificate successfully updated."),m.trigger(h.SERVER_CERTIFICATE_UPDATED)}).catch(function(Y){m.trigger(h.SERVER_CERTIFICATE_UPDATED,{error:new y.default(M.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,M.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+Y.name)})})},createKeySession:function _e(ne){if(!x||!N)throw new Error("Can not create sessions until you have selected a key system");var Y=N.createSession(ne.sessionType),H=ve(Y,ne);Y.generateRequest(x.systemString===v.default.CLEARKEY_KEYSTEM_STRING&&(ne.initData||ne.protData&&ne.protData.clearkeys)?v.default.INITIALIZATION_DATA_TYPE_KEYIDS:v.default.INITIALIZATION_DATA_TYPE_CENC,ne.initData).then(function(){C.debug("DRM: Session created.  SessionID = "+H.getSessionId()),m.trigger(h.KEY_SESSION_CREATED,{data:H})}).catch(function(I){de(H),m.trigger(h.KEY_SESSION_CREATED,{data:null,error:new y.default(M.default.KEY_SESSION_CREATED_ERROR_CODE,M.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+I.name)})})},updateKeySession:function ie(ne,Y){var H=ne.session;f.isClearKey(x)&&(Y=Y.toJWK()),H.update(Y).then(function(){m.trigger(h.KEY_SESSION_UPDATED)}).catch(function(E){m.trigger(h.KEY_ERROR,{error:new y.default(M.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+E.name,ne)})})},loadKeySession:function me(ne){if(!x||!N)throw new Error("Can not load sessions until you have selected a key system");for(var Y=ne.sessionId,H=0;H<w.length;H++)if(Y===w[H].sessionId)return void C.warn("DRM: Ignoring session ID because we have already seen it!");var E=N.createSession(ne.sessionType),I=ve(E,ne);E.load(Y).then(function(U){U?(C.debug("DRM: Session loaded.  SessionID = "+I.getSessionId()),m.trigger(h.KEY_SESSION_CREATED,{data:I})):(de(I),m.trigger(h.KEY_SESSION_CREATED,{data:null,error:new y.default(M.default.KEY_SESSION_CREATED_ERROR_CODE,M.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+Y+")")}))}).catch(function(U){de(I),m.trigger(h.KEY_SESSION_CREATED,{data:null,error:new y.default(M.default.KEY_SESSION_CREATED_ERROR_CODE,M.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+Y+")! "+U.name)})})},removeKeySession:function ae(ne){ne.session.remove().then(function(){C.debug("DRM: Session removed.  SessionID = "+ne.getSessionId()),m.trigger(h.KEY_SESSION_REMOVED,{data:ne.getSessionId()})},function(H){m.trigger(h.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+ne.getSessionId()+"). "+H.name})})},closeKeySession:function ge(ne){fe(ne).catch(function(Y){de(ne),m.trigger(h.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+ne.getSessionId()+") "+Y.name})})},stop:function Q(){for(var ne,Y=0;Y<w.length;Y++)(ne=w[Y]).getUsable()||fe(ne).catch(function(){de(ne)})},reset:function V(){var Y,ne=w.length;0!==ne?function(){for(var H=function(U){de(U),0===w.length&&(O?(O.removeEventListener("encrypted",P),O.setMediaKeys(null).then(function(){m.trigger(h.TEARDOWN_COMPLETE)})):m.trigger(h.TEARDOWN_COMPLETE))},E=0;E<ne;E++)!function(I){Y.session.closed.then(function(){H(I)}),fe(Y).catch(function(){H(I)})}(Y=w[E])}():m.trigger(h.TEARDOWN_COMPLETE)}},function R(){C=g.getLogger(S),x=null,O=null,N=null,w=[],f=Object(B.default)(F).getInstance(),P=function ce(){return{handleEvent:function(Y){if("encrypted"===Y.type&&Y.initData){var H=ArrayBuffer.isView(Y.initData)?Y.initData.buffer:Y.initData;m.trigger(h.NEED_KEY,{key:new _.default(H,Y.initDataType)})}}}}()}(),S}p[v.default.PLAYREADY_KEYSTEM_STRING]=[v.default.PLAYREADY_KEYSTEM_STRING,v.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],p[v.default.WIDEVINE_KEYSTEM_STRING]=[v.default.WIDEVINE_KEYSTEM_STRING],p[v.default.CLEARKEY_KEYSTEM_STRING]=[v.default.CLEARKEY_KEYSTEM_STRING],L.__dashjs_factory_name="ProtectionModel_21Jan2015",k.default=dashjs.FactoryMaker.getClassFactory(L)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/controllers/ProtectionKeyController.js"),_=u("./src/streaming/protection/vo/NeedKey.js"),M=u("./src/streaming/vo/DashJSError.js"),y=u("./src/streaming/protection/errors/ProtectionErrors.js"),D=u("./src/streaming/protection/vo/KeyMessage.js"),d=u("./src/streaming/protection/vo/KeySystemConfiguration.js"),v=u("./src/streaming/protection/vo/KeySystemAccess.js");function p(L){var S,C,x,O,N,w,P,f,R,b=this.context,F=(L=L||{}).eventBus,m=L.events,h=L.debug,g=L.api;function Q(){try{for(var fe=0;fe<P.length;fe++)ue(P[fe]);x&&x.removeEventListener(g.needkey,f),F.trigger(m.TEARDOWN_COMPLETE)}catch(ce){F.trigger(m.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+ce.message})}}function ue(fe){var ce=fe.session;ce.removeEventListener(g.error,fe),ce.removeEventListener(g.message,fe),ce.removeEventListener(g.ready,fe),ce.removeEventListener(g.close,fe);for(var de=0;de<P.length;de++)if(P[de]===fe){P.splice(de,1);break}ce[g.release]()}function ae(){var fe=null,ce=function(){x.removeEventListener("loadedmetadata",fe),x[g.setMediaKeys](N),F.trigger(m.VIDEO_ELEMENT_SELECTED)};x.readyState>=1?ce():(fe=ce.bind(this),x.addEventListener("loadedmetadata",fe))}return S={getAllInitData:function $(){for(var fe=[],ce=0;ce<P.length;ce++)fe.push(P[ce].initData);return fe},getSessions:function J(){return P},requestKeySystemAccess:function te(fe){return new Promise(function(ce,de){for(var se=!1,ve=0;ve<fe.length;ve++)for(var ne=fe[ve].ks.systemString,Y=fe[ve].configs,H=null,E=null,I=0;I<Y.length;I++){var U=Y[I].audioCapabilities,W=Y[I].videoCapabilities;if(U&&0!==U.length){H=[];for(var re=0;re<U.length;re++)window[g.MediaKeys].isTypeSupported(ne,U[re].contentType)&&H.push(U[re])}if(W&&0!==W.length){E=[];for(var De=0;De<W.length;De++)window[g.MediaKeys].isTypeSupported(ne,W[De].contentType)&&E.push(W[De])}if(!(!H&&!E||H&&0===H.length||E&&0===E.length)){se=!0;var Ie=new d.default(H,E),le=R.getKeySystemBySystemString(ne),z=new v.default(le,Ie);F.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{data:z}),ce({data:z});break}}if(!se){var G="Key system access denied! -- No valid audio/video content configurations detected!";F.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{error:G}),de({error:G})}})},selectKeySystem:function X(fe){return new Promise(function(ce,de){try{N=fe.mediaKeys=new window[g.MediaKeys](fe.keySystem.systemString),O=fe.keySystem,w=fe,x&&ae(),ce(O)}catch{de({error:"Error selecting keys system ("+O.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function K(fe){x!==fe&&(x&&x.removeEventListener(g.needkey,f),(x=fe)&&(x.addEventListener(g.needkey,f),N&&ae()))},createKeySession:function oe(fe){if(!O||!N||!w)throw new Error("Can not create sessions until you have selected a key system");var ce=null;if(w.ksConfiguration.videoCapabilities&&w.ksConfiguration.videoCapabilities.length>0&&(ce=w.ksConfiguration.videoCapabilities[0]),null===ce&&w.ksConfiguration.audioCapabilities&&w.ksConfiguration.audioCapabilities.length>0&&(ce=w.ksConfiguration.audioCapabilities[0]),null===ce)throw new Error("Can not create sessions for unknown content types.");var se=N.createSession(ce.contentType,new Uint8Array(fe.initData),fe.cdmData?new Uint8Array(fe.cdmData):null),ve=function ge(fe,ce){return{session:fe,keyId:ce.keyId,initData:ce.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(se){switch(se.type){case g.error:F.trigger(m.KEY_ERROR,{error:new M.default(y.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case g.message:var ne=ArrayBuffer.isView(se.message)?se.message.buffer:se.message;F.trigger(m.INTERNAL_KEY_MESSAGE,{data:new D.default(this,ne,se.destinationURL)});break;case g.ready:C.debug("DRM: Key added."),F.trigger(m.KEY_ADDED);break;case g.close:C.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),F.trigger(m.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(se,fe);se.addEventListener(g.error,ve),se.addEventListener(g.message,ve),se.addEventListener(g.ready,ve),se.addEventListener(g.close,ve),P.push(ve),C.debug("DRM: Session created.  SessionID = "+ve.getSessionId()),F.trigger(m.KEY_SESSION_CREATED,{data:ve})},updateKeySession:function ee(fe,ce){var de=fe.session;R.isClearKey(O)?de.update(new Uint8Array(ce.toJWK())):de.update(new Uint8Array(ce)),F.trigger(m.KEY_SESSION_UPDATED)},closeKeySession:ue,setServerCertificate:function pe(){},loadKeySession:function _e(){},removeKeySession:function ie(){},stop:Q,reset:Q},function V(){C=h.getLogger(S),x=null,O=null,N=null,w=null,P=[],R=Object(B.default)(b).getInstance(),f=function me(){return{handleEvent:function(ce){if(ce.type===g.needkey&&ce.initData){var de=ArrayBuffer.isView(ce.initData)?ce.initData.buffer:ce.initData;F.trigger(m.NEED_KEY,{key:new _.default(de,"cenc")})}}}}()}(),S}p.__dashjs_factory_name="ProtectionModel_3Feb2014",k.default=dashjs.FactoryMaker.getClassFactory(p)},"./src/streaming/protection/servers/ClearKey.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/protection/vo/KeyPair.js"),_=u("./src/streaming/protection/vo/ClearKeyKeySet.js");function M(){return{getServerURLFromMessage:function D(b){return b},getHTTPMethod:function d(){return"POST"},getResponseType:function v(){return"json"},getLicenseMessage:function p(b){if(!b.hasOwnProperty("keys"))return null;for(var F=[],m=0;m<b.keys.length;m++){var h=b.keys[m],g=h.kid.replace(/=/g,""),S=h.k.replace(/=/g,"");F.push(new B.default(g,S))}return new _.default(F)},getErrorResponse:function L(b){return String.fromCharCode.apply(null,new Uint8Array(b))}}}M.__dashjs_factory_name="ClearKey",k.default=dashjs.FactoryMaker.getSingletonFactory(M)},"./src/streaming/protection/servers/DRMToday.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/ProtectionConstants.js");function _(M){var y=(M=M||{}).BASE64,D={};return D[B.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(g){return y.decodeArray(g.license)},getErrorResponse:function(g){return g}},D[B.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(g){return g},getErrorResponse:function(g){return String.fromCharCode.apply(null,new Uint8Array(g))}},{getServerURLFromMessage:function p(h){return h},getHTTPMethod:function L(){return"POST"},getResponseType:function b(h){return D[h].responseType},getLicenseMessage:function F(h,g){return function v(){if(!y||!y.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),D[g].getLicenseMessage(h)},getErrorResponse:function m(h,g){return D[g].getErrorResponse(h)}}}_.__dashjs_factory_name="DRMToday",k.default=dashjs.FactoryMaker.getSingletonFactory(_)},"./src/streaming/protection/servers/PlayReady.js":function(we,k,u){"use strict";function B(){var M="http://schemas.xmlsoap.org/soap/envelope/";function y(m){var h=String.fromCharCode.apply(null,new Uint8Array(m));return decodeURIComponent(escape(h))}function D(m){if(window.DOMParser){var h=y(m),S=(new window.DOMParser).parseFromString(h,"text/xml"),C=S?S.getElementsByTagNameNS(M,"Envelope")[0]:null,x=C?C.getElementsByTagNameNS(M,"Body")[0]:null;if(x&&x.getElementsByTagNameNS(M,"Fault")[0])return null}return m}function d(m){var h="",g="",S="",C=-1,x=-1;if(window.DOMParser){var O=y(m),w=(new window.DOMParser).parseFromString(O,"text/xml"),P=w?w.getElementsByTagNameNS(M,"Envelope")[0]:null,f=P?P.getElementsByTagNameNS(M,"Body")[0]:null,R=f?f.getElementsByTagNameNS(M,"Fault")[0]:null,V=R?R.getElementsByTagName("detail")[0]:null,Q=V?V.getElementsByTagName("Exception")[0]:null,$=null;if(null===R)return O;h=($=R.getElementsByTagName("faultstring")[0].firstChild)?$.nodeValue:null,null!==Q&&(g=($=Q.getElementsByTagName("StatusCode")[0])?$.firstChild.nodeValue:null,C=(S=($=Q.getElementsByTagName("Message")[0])?$.firstChild.nodeValue:null)?S.lastIndexOf("[")+1:-1,x=S?S.indexOf("]"):-1,S=S?S.substring(C,x):"")}var J="code: ".concat(g,", name: ").concat(h);return S&&(J+=", message: ".concat(S)),J}return{getServerURLFromMessage:function v(m){return m},getHTTPMethod:function p(){return"POST"},getResponseType:function L(){return"arraybuffer"},getLicenseMessage:function b(m){return D.call(this,m)},getErrorResponse:function F(m){return d.call(this,m)}}}u.r(k),B.__dashjs_factory_name="PlayReady",k.default=dashjs.FactoryMaker.getSingletonFactory(B)},"./src/streaming/protection/servers/Widevine.js":function(we,k,u){"use strict";function B(){return{getServerURLFromMessage:function M(p){return p},getHTTPMethod:function y(){return"POST"},getResponseType:function D(){return"arraybuffer"},getLicenseMessage:function d(p){return p},getErrorResponse:function v(p){return String.fromCharCode.apply(null,new Uint8Array(p))}}}u.r(k),B.__dashjs_factory_name="Widevine",k.default=dashjs.FactoryMaker.getSingletonFactory(B)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(we,k,u){"use strict";function _(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d,v){if(function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D),v&&"persistent"!==v&&"temporary"!==v)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=d,this.type=v}return function M(D,d,v){return d&&_(D.prototype,d),v&&_(D,v),D}(D,[{key:"toJWK",value:function(){var v,p=this.keyPairs.length,L={keys:[]};for(v=0;v<p;v++)L.keys.push({kty:"oct",alg:"A128KW",kid:this.keyPairs[v].keyID,k:this.keyPairs[v].key});this.type&&(L.type=this.type);var F=JSON.stringify(L),m=F.length,h=new ArrayBuffer(m),g=new Uint8Array(h);for(v=0;v<m;v++)g[v]=F.charCodeAt(v);return h}}]),D}()},"./src/streaming/protection/vo/KeyMessage.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D,d,v){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.sessionToken=y,this.message=D,this.defaultURL=d,this.messageType=v||"license-request"}},"./src/streaming/protection/vo/KeyPair.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.keyID=y,this.key=D}},"./src/streaming/protection/vo/KeySystemAccess.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.keySystem=y,this.ksConfiguration=D}},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D,d,v,p){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.initDataTypes=["cenc"],y&&y.length&&(this.audioCapabilities=y),D&&D.length&&(this.videoCapabilities=D),this.distinctiveIdentifier=d,this.persistentState=v,this.sessionTypes=p}},"./src/streaming/protection/vo/LicenseRequest.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D,d,v,p,L,b,F){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.url=y,this.method=D,this.responseType=d,this.headers=v,this.withCredentials=p,this.messageType=L,this.sessionId=b,this.data=F}},"./src/streaming/protection/vo/LicenseResponse.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D,d){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.url=y,this.headers=D,this.data=d}},"./src/streaming/protection/vo/MediaCapability.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.contentType=y,this.robustness=D}},"./src/streaming/protection/vo/NeedKey.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.initData=y,this.initDataType=D}},"./src/streaming/rules/DroppedFramesHistory.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(){var y={},D={},d={};return{push:function v(F,m,h){if(m){y[F]||(y[F]=[],D[F]=0,d[F]=0);var g=h&&h.droppedVideoFrames?h.droppedVideoFrames:0,S=h&&h.totalVideoFrames?h.totalVideoFrames:0,C=g-D;D[F]=g;var x=S-d;d[F]=S;var O=y[F];isNaN(m)||(O[m]?(O[m].droppedVideoFrames+=C,O[m].totalVideoFrames+=x):O[m]={droppedVideoFrames:C,totalVideoFrames:x})}},getFrameHistory:function p(F){return y[F]},clearForStream:function L(F){try{delete y[F],delete D[F],delete d[F]}catch{}},reset:function b(){y={},D={},d={}}}}_.__dashjs_factory_name="DroppedFramesHistory";var M=B.default.getClassFactory(_);k.default=M},"./src/streaming/rules/RulesContext.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(M){var D=(M=M||{}).abrController,d=M.switchHistory,v=M.droppedFramesHistory,p=M.currentRequest,L=M.useBufferOccupancyABR,b=M.useL2AABR,F=M.useLoLPABR,m=M.streamProcessor?M.streamProcessor.getScheduleController():null,h=M.streamProcessor?M.streamProcessor.getRepresentationInfo():null,g=M.videoModel?M.videoModel:null;function x(){return h?h.mediaInfo:null}return{getMediaType:function S(){var te=x();return te?te.type:null},getMediaInfo:x,getDroppedFramesHistory:function R(){return v},getCurrentRequest:function V(){return p},getSwitchHistory:function P(){return d},getStreamInfo:function C(){var te=x();return te?te.streamInfo:null},getScheduleController:function N(){return m},getAbrController:function w(){return D},getRepresentationInfo:function O(){return h},useBufferOccupancyABR:function Q(){return L},useL2AABR:function $(){return b},useLoLPABR:function J(){return F},getVideoModel:function f(){return g}}}_.__dashjs_factory_name="RulesContext",k.default=B.default.getClassFactory(_)},"./src/streaming/rules/SwitchRequest.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),M={DEFAULT:.5,STRONG:1,WEAK:0};function y(d,v,p){return{quality:void 0===d?-1:d,reason:void 0===v?null:v,priority:function h(g){var S=M.DEFAULT;return(g===M.DEFAULT||g===M.STRONG||g===M.WEAK)&&(S=g),S}(p)}}y.__dashjs_factory_name="SwitchRequest";var D=B.default.getClassFactory(y);D.NO_CHANGE=-1,D.PRIORITY=M,B.default.updateClassFactory(y.__dashjs_factory_name,D),k.default=D},"./src/streaming/rules/SwitchRequestHistory.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/rules/SwitchRequest.js");function y(){var d=[],v=[];return{push:function p(F){F.newValue===_.default.NO_CHANGE&&(F.newValue=F.oldValue),d[F.oldValue]||(d[F.oldValue]={noDrops:0,drops:0,dropSize:0});var m=F.newValue-F.oldValue,h=m<0?1:0,g=h?-m:0,S=h?0:1;if(d[F.oldValue].drops+=h,d[F.oldValue].dropSize+=g,d[F.oldValue].noDrops+=S,v.push({idx:F.oldValue,noDrop:S,drop:h,dropSize:g}),v.length>8){var C=v.shift();d[C.idx].drops-=C.drop,d[C.idx].dropSize-=C.dropSize,d[C.idx].noDrops-=C.noDrop}},getSwitchRequests:function L(){return d},reset:function b(){d=[],v=[]}}}y.__dashjs_factory_name="SwitchRequestHistory";var D=B.default.getClassFactory(y);k.default=D},"./src/streaming/rules/ThroughputHistory.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/core/FactoryMaker.js");function M(y){var C,x,O,N,w,S=(y=y||{}).settings;function V(ie,me,ae,ge){var fe=Math.pow(.5,ae/ge.fast);ie.fastEstimate=(1-fe)*me+fe*ie.fastEstimate;var ce=Math.pow(.5,ae/ge.slow);ie.slowEstimate=(1-ce)*me+ce*ie.slowEstimate,ie.totalWeight+=ae}function $(ie,me,ae){return S.get().streaming.abr.movingAverageMethod!==B.default.MOVING_AVERAGE_SLIDING_WINDOW?function te(ie,me){var ae=ie?w.throughputHalfLife:w.latencyHalfLife,ge=ie?O[me]:N[me];if(!ge||ge.totalWeight<=0)return NaN;var fe=ge.fastEstimate/(1-Math.pow(.5,ge.totalWeight/ae.fast)),ce=ge.slowEstimate/(1-Math.pow(.5,ge.totalWeight/ae.slow));return ie?Math.min(fe,ce):Math.max(fe,ce)}(ie,me):function J(ie,me,ae){var ge=function Q(ie,me,ae){var ge,fe;if(ie?(ge=C[me],fe=ae?3:4):(ge=x[me],fe=4),ge){if(fe>=ge.length)fe=ge.length;else if(ie)for(var ce=1;ce<fe;++ce){var de=ge[ge.length-ce]/ge[ge.length-ce-1];if((de>=1.3||de<=1/1.3)&&(fe+=1)===ge.length)break}}else fe=0;return fe}(ie,me,ae),ce=(ie?C:x)[me];return 0!==ge&&ce&&0!==ce.length?(ce=ce.slice(-ge)).reduce(function(de,se){return de+se})/ce.length:NaN}(ie,me,ae)}function X(ie,me){return $(!0,ie,me)}function ee(ie){C[ie]=C[ie]||[],x[ie]=x[ie]||[],O[ie]=O[ie]||{fastEstimate:0,slowEstimate:0,totalWeight:0},N[ie]=N[ie]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function pe(){C={},x={},O={},N={}}var _e={push:function R(ie,me,ae){if(me.trace&&me.trace.length){var ge=me.tresponse.getTime()-me.trequest.getTime()||1,fe=me._tfinish.getTime()-me.tresponse.getTime()||1,ce=me.trace.reduce(function(Y,H){return Y+H.b[0]},0),de=0,se=0;if(me._fileLoaderType&&me._fileLoaderType===B.default.FILE_LOADER_TYPES.FETCH){if(S.get().streaming.abr.fetchThroughputCalculationMode===B.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING){var ne=me.trace.reduce(function(Y,H){return Y+H._t},0);se=Math.round(ne/me.trace.length)}0===se&&(de=me.trace.reduce(function(Y,H){return Y+H.d},0))}else de=ae?fe:ge+fe;if(0!==de&&(se=Math.round(8*ce/de)),ee(ie),function f(ie,me,ae){return ie===B.default.VIDEO?ae<S.get().streaming.cacheLoadThresholds[B.default.VIDEO]:ie===B.default.AUDIO?ae<S.get().streaming.cacheLoadThresholds[B.default.AUDIO]:void 0}(ie,0,fe)){if(C[ie].length>0&&!C[ie].hasCachedEntries)return;C[ie].hasCachedEntries=!0}else C[ie]&&C[ie].hasCachedEntries&&function ue(ie){delete C[ie],delete x[ie],delete O[ie],delete N[ie],ee(ie)}(ie);C[ie].push(se),C[ie].length>20&&C[ie].shift(),x[ie].push(ge),x[ie].length>20&&x[ie].shift(),V(O[ie],se,.001*fe,w.throughputHalfLife),V(N[ie],ge,1,w.latencyHalfLife)}},getAverageThroughput:X,getSafeAverageThroughput:function K(ie,me){var ae=X(ie,me);return isNaN(ae)||(ae*=S.get().streaming.abr.bandwidthSafetyFactor),ae},getAverageLatency:function oe(ie){return $(!1,ie)},reset:pe};return function P(){w={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},pe()}(),_e}M.__dashjs_factory_name="ThroughputHistory",k.default=_.default.getClassFactory(M)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/rules/abr/ThroughputRule.js"),_=u("./src/streaming/rules/abr/InsufficientBufferRule.js"),M=u("./src/streaming/rules/abr/AbandonRequestsRule.js"),y=u("./src/streaming/rules/abr/DroppedFramesRule.js"),D=u("./src/streaming/rules/abr/SwitchHistoryRule.js"),d=u("./src/streaming/rules/abr/BolaRule.js"),v=u("./src/streaming/rules/abr/L2ARule.js"),p=u("./src/streaming/rules/abr/lolp/LoLpRule.js"),L=u("./src/core/FactoryMaker.js"),b=u("./src/streaming/rules/SwitchRequest.js"),F=u("./src/streaming/constants/Constants.js"),m="qualitySwitchRules",h="abandonFragmentRules";function g(C){var R,V,x=this.context,O=(C=C||{}).mediaPlayerModel,N=C.customParametersModel,w=C.dashMetrics,P=C.settings;function $(ee){return ee.filter(function(ue){return ue.quality>b.default.NO_CHANGE})}function J(ee){var _e,ie,me,ae,ge,ue={},pe=null;if(0!==ee.length){for(ue[b.default.PRIORITY.STRONG]={quality:b.default.NO_CHANGE,reason:null},ue[b.default.PRIORITY.WEAK]={quality:b.default.NO_CHANGE,reason:null},ue[b.default.PRIORITY.DEFAULT]={quality:b.default.NO_CHANGE,reason:null},_e=0,ie=ee.length;_e<ie;_e+=1)(me=ee[_e]).quality!==b.default.NO_CHANGE&&(ue[me.priority].quality===b.default.NO_CHANGE||ue[me.priority].quality>me.quality)&&(ue[me.priority].quality=me.quality,ue[me.priority].reason=me.reason||null);return ue[b.default.PRIORITY.WEAK].quality!==b.default.NO_CHANGE&&(pe=ue[b.default.PRIORITY.WEAK]),ue[b.default.PRIORITY.DEFAULT].quality!==b.default.NO_CHANGE&&(pe=ue[b.default.PRIORITY.DEFAULT]),ue[b.default.PRIORITY.STRONG].quality!==b.default.NO_CHANGE&&(pe=ue[b.default.PRIORITY.STRONG]),pe&&(ae=pe.quality,ge=pe.reason),Object(b.default)(x).create(ae,ge)}}return{initialize:function Q(){R=[],V=[],P.get().streaming.abr.useDefaultABRRules&&(P.get().streaming.abr.ABRStrategy===F.default.ABR_STRATEGY_L2A?R.push(Object(v.default)(x).create({dashMetrics:w,settings:P})):P.get().streaming.abr.ABRStrategy===F.default.ABR_STRATEGY_LoLP?R.push(Object(p.default)(x).create({dashMetrics:w})):(R.push(Object(d.default)(x).create({dashMetrics:w,mediaPlayerModel:O,settings:P})),R.push(Object(B.default)(x).create({dashMetrics:w})),P.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&R.push(Object(_.default)(x).create({dashMetrics:w,settings:P})),P.get().streaming.abr.additionalAbrRules.switchHistoryRule&&R.push(Object(D.default)(x).create()),P.get().streaming.abr.additionalAbrRules.droppedFramesRule&&R.push(Object(y.default)(x).create()),P.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&V.push(Object(M.default)(x).create({dashMetrics:w,mediaPlayerModel:O,settings:P})))),N.getAbrCustomRules().forEach(function(ue){ue.type===m&&R.push(ue.rule(x).create()),ue.type===h&&V.push(ue.rule(x).create())})},reset:function K(){[R,V].forEach(function(ee){ee&&ee.length&&ee.forEach(function(ue){return ue.reset&&ue.reset()})}),R=[],V=[]},getMaxQuality:function te(ee){return J($(R.map(function(ie){return ie.getMaxIndex(ee)})))||Object(b.default)(x).create()},getMinSwitchRequest:J,shouldAbandonFragment:function X(ee,ue){return J($(V.map(function(me){return me.shouldAbandon(ee,ue)})))||Object(b.default)(x).create()},getQualitySwitchRules:function oe(){return R}}}g.__dashjs_factory_name="ABRRulesCollection";var S=L.default.getClassFactory(g);S.QUALITY_SWITCH_RULES=m,S.ABANDON_FRAGMENT_RULES=h,L.default.updateSingletonFactory(g.__dashjs_factory_name,S),k.default=S},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/rules/SwitchRequest.js"),_=u("./src/core/FactoryMaker.js"),M=u("./src/core/Debug.js");function y(D){var h,g,S,C,x,L=this.context,b=(D=D||{}).mediaPlayerModel,F=D.dashMetrics,m=D.settings;function f(){S={},C={},x=[]}return h={shouldAbandon:function P(R){var V=Object(B.default)(L).create(B.default.NO_CHANGE,{name:y.__dashjs_factory_name});if(!(R&&R.hasOwnProperty("getMediaInfo")&&R.hasOwnProperty("getMediaType")&&R.hasOwnProperty("getCurrentRequest")&&R.hasOwnProperty("getRepresentationInfo")&&R.hasOwnProperty("getAbrController")))return V;var Q=R.getMediaInfo(),$=R.getMediaType(),J=R.getStreamInfo(),te=J?J.id:null,X=R.getCurrentRequest();if(!isNaN(X.index)){!function N(R,V){S[R]=S[R]||{},S[R][V]=S[R][V]||{}}($,X.index);var K=b.getStableBufferTime();if(F.getCurrentBufferLevel($)>K)return V;var ee=S[$][X.index];if(null===ee||null===X.firstByteDate||C.hasOwnProperty(ee.id))return V;if(void 0===ee.firstByteTime&&(x[$]=[],ee.firstByteTime=X.firstByteDate.getTime(),ee.segmentDuration=X.duration,ee.bytesTotal=X.bytesTotal,ee.id=X.index),ee.bytesLoaded=X.bytesLoaded,ee.elapsedTime=(new Date).getTime()-ee.firstByteTime,ee.bytesLoaded>0&&ee.elapsedTime>0&&function w(R,V){x[R]=x[R]||[],x[R].push(V)}($,Math.round(8*ee.bytesLoaded/ee.elapsedTime)),x[$].length>=5&&ee.elapsedTime>500&&ee.bytesLoaded<ee.bytesTotal){var ue=x[$].reduce(function(ce,de){return ce+de},0);if(ee.measuredBandwidthInKbps=Math.round(ue/x[$].length),ee.estimatedTimeOfDownload=+(8*ee.bytesTotal/ee.measuredBandwidthInKbps/1e3).toFixed(2),ee.estimatedTimeOfDownload<1.8*ee.segmentDuration||0===R.getRepresentationInfo().quality)return V;if(!C.hasOwnProperty(ee.id)){var pe=R.getAbrController(),_e=ee.bytesTotal-ee.bytesLoaded,ie=pe.getBitrateList(Q),me=pe.getQualityForBitrate(Q,ee.measuredBandwidthInKbps*m.get().streaming.abr.bandwidthSafetyFactor,te),ae=pe.getMinAllowedIndexFor($,te),ge=void 0!==ae?Math.max(ae,me):me;_e>ee.bytesTotal*ie[ge].bitrate/ie[pe.getQualityFor($,te)].bitrate&&(V.quality=ge,V.reason.throughput=ee.measuredBandwidthInKbps,V.reason.fragmentID=ee.id,C[ee.id]=ee,g.debug("["+$+"] frag id",ee.id," is asking to abandon and switch to quality to ",ge," measured bandwidth was",ee.measuredBandwidthInKbps),delete S[$][ee.id])}}else ee.bytesLoaded===ee.bytesTotal&&delete S[$][ee.id]}return V},reset:f},function O(){g=Object(M.default)(L).getInstance().getLogger(h),f()}(),h}y.__dashjs_factory_name="AbandonRequestsRule",k.default=_.default.getClassFactory(y)},"./src/streaming/rules/abr/BolaRule.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/MetricsConstants.js"),_=u("./src/streaming/rules/SwitchRequest.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/vo/metrics/HTTPRequest.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/Debug.js"),p=u("./src/streaming/MediaPlayerEvents.js"),L=u("./src/streaming/constants/Constants.js"),h=10;function C(x){var f,R,V,O=this.context,N=(x=x||{}).dashMetrics,w=x.mediaPlayerModel,P=Object(D.default)(O).getInstance();function J(Y,H,E){var I=E.reduce(function(De,Ie,le){return Ie>E[De]?le:De},0);if(0===I)return null;var U=Math.max(Y,h+2*H.length),W=(E[I]-1)/(U/h-1);return{gp:W,Vp:h/W}}function te(Y){var H={},I=Y.getMediaInfo().bitrateList.map(function(De){return De.bandwidth}),U=function $(Y){return Y.map(function(H){return Math.log(H)})}(I);U=U.map(function(De){return De-U[0]+1});var W=w.getStableBufferTime(),re=J(W,I,U);return re?(H.state=1,H.bitrates=I,H.utilities=U,H.stableBufferTime=W,H.Vp=re.Vp,H.gp=re.gp,H.lastQuality=0,X(H)):H.state=0,H}function X(Y){Y.placeholderBuffer=0,Y.mostAdvancedSegmentStart=NaN,Y.lastSegmentWasReplacement=!1,Y.lastSegmentStart=NaN,Y.lastSegmentDurationS=NaN,Y.lastSegmentRequestTimeMs=NaN,Y.lastSegmentFinishTimeMs=NaN}function K(Y,H){var E=w.getStableBufferTime();if(Y.stableBufferTime!==E){var I=J(E,Y.bitrates,Y.utilities);if(I.Vp!==Y.Vp||I.gp!==Y.gp){var U=N.getCurrentBufferLevel(H),W=U+Y.placeholderBuffer;W-=h,W*=I.Vp/Y.Vp,W+=h,Y.stableBufferTime=E,Y.Vp=I.Vp,Y.gp=I.gp,Y.placeholderBuffer=Math.max(0,W-U)}}}function ue(Y,H){return Y.Vp*(Y.utilities[H]+Y.gp)}function pe(Y,H){for(var E=Y.bitrates[H],I=Y.utilities[H],U=0,W=H-1;W>=0;--W)if(Y.utilities[W]<Y.utilities[H]){var re=Y.bitrates[W];U=Math.max(U,Y.Vp*(Y.gp+(E*Y.utilities[W]-re*I)/(E-re)))}return U}function ie(Y){var E=Y.mediaType===L.default.AUDIO?[L.default.AUDIO]:V;for(var I in E)V.hasOwnProperty(I)&&2===V[I].state&&(V[I].placeholderBuffer=0)}function me(){for(var Y in V)if(V.hasOwnProperty(Y)){var H=V[Y];0!==H.state&&(H.state=1,X(H))}}function ae(Y){if(Y&&Y.chunk&&Y.chunk.mediaInfo){var H=V[Y.chunk.mediaInfo.type];if(H&&0!==H.state){var E=Y.chunk.start;isNaN(H.mostAdvancedSegmentStart)||E>H.mostAdvancedSegmentStart?(H.mostAdvancedSegmentStart=E,H.lastSegmentWasReplacement=!1):H.lastSegmentWasReplacement=!0,H.lastSegmentStart=E,H.lastSegmentDurationS=Y.chunk.duration,H.lastQuality=Y.chunk.quality,fe(H,Y.chunk.mediaInfo.type)}}}function ge(Y){if(Y&&Y.metric===B.default.HTTP_REQUEST&&Y.value&&Y.value.type===y.HTTPRequest.MEDIA_SEGMENT_TYPE&&Y.value.trace&&Y.value.trace.length){var H=V[Y.mediaType];H&&0!==H.state&&(H.lastSegmentRequestTimeMs=Y.value.trequest.getTime(),H.lastSegmentFinishTimeMs=Y.value._tfinish.getTime(),fe(H,Y.mediaType))}}function fe(Y,H){if(!isNaN(Y.lastSegmentStart)&&!isNaN(Y.lastSegmentRequestTimeMs)&&!isNaN(Y.placeholderBuffer)){if(Y.placeholderBuffer*=.99,!isNaN(Y.lastSegmentFinishTimeMs)){var I=N.getCurrentBufferLevel(H)+.001*(Y.lastSegmentFinishTimeMs-Y.lastSegmentRequestTimeMs),U=ue(Y,Y.lastQuality),W=Math.max(0,U-I);Y.placeholderBuffer=Math.min(W,Y.placeholderBuffer)}Y.lastSegmentWasReplacement&&!isNaN(Y.lastSegmentDurationS)&&(Y.placeholderBuffer+=Y.lastSegmentDurationS),Y.lastSegmentStart=NaN,Y.lastSegmentRequestTimeMs=NaN}}function ce(Y){if(Y){var H=V[Y.mediaType];H&&0!==H.state&&(H.abrQuality=Y.newQuality)}}function de(Y){if(Y){var H=V[Y.mediaType];if(H&&0!==H.state){var I,E=N.getCurrentBufferLevel(Y.mediaType);I=H.abrQuality>0?pe(H,H.abrQuality):h;var U=Math.max(0,I-E);H.placeholderBuffer=Math.min(H.placeholderBuffer,U)}}}function ve(){V={}}return f={getMaxIndex:function se(Y){var H=Object(_.default)(O).create();if(!(Y&&Y.hasOwnProperty("getMediaInfo")&&Y.hasOwnProperty("getMediaType")&&Y.hasOwnProperty("getScheduleController")&&Y.hasOwnProperty("getStreamInfo")&&Y.hasOwnProperty("getAbrController")&&Y.hasOwnProperty("useBufferOccupancyABR")))return H;var E=Y.getMediaInfo(),I=Y.getMediaType(),U=Y.getScheduleController(),W=Y.getStreamInfo(),re=Y.getAbrController(),De=re.getThroughputHistory(),Ie=W?W.id:null,le=W&&W.manifestInfo&&W.manifestInfo.isDynamic,z=Y.useBufferOccupancyABR();if(H.reason=H.reason||{},!z)return H;U.setTimeToLoadDelay(0);var G=function oe(Y){var H=Y.getMediaType(),E=V[H];return E?0!==E.state&&K(E,H):(E=te(Y),V[H]=E),E}(Y);if(0===G.state)return H;var Fe,Te=N.getCurrentBufferLevel(I),ye=De.getAverageThroughput(I,le),Ee=De.getSafeAverageThroughput(I,le),Ce=De.getAverageLatency(I);if(H.reason.state=G.state,H.reason.throughput=ye,H.reason.latency=Ce,isNaN(ye))return H;switch(G.state){case 1:Fe=re.getQualityForBitrate(E,Ee,Ie,Ce),H.quality=Fe,H.reason.throughput=Ee,G.placeholderBuffer=Math.max(0,pe(G,Fe)-Te),G.lastQuality=Fe,!isNaN(G.lastSegmentDurationS)&&Te>=G.lastSegmentDurationS&&(G.state=2);break;case 2:(function _e(Y,H){var E=Date.now();isNaN(Y.lastSegmentFinishTimeMs)?isNaN(Y.lastCallTimeMs)||(Y.placeholderBuffer+=Math.max(0,.001*(E-Y.lastCallTimeMs))):Y.placeholderBuffer+=Math.max(0,.001*(E-Y.lastSegmentFinishTimeMs)),Y.lastCallTimeMs=E,Y.lastSegmentStart=NaN,Y.lastSegmentRequestTimeMs=NaN,Y.lastSegmentFinishTimeMs=NaN,K(Y,H)})(G,I),Fe=function ee(Y,H){for(var E=Y.bitrates.length,I=NaN,U=NaN,W=0;W<E;++W){var re=(Y.Vp*(Y.utilities[W]+Y.gp)-H)/Y.bitrates[W];(isNaN(U)||re>=U)&&(U=re,I=W)}return I}(G,Te+G.placeholderBuffer);var Oe=re.getQualityForBitrate(E,Ee,Ie,Ce);Fe>G.lastQuality&&Fe>Oe&&(Fe=Math.max(Oe,G.lastQuality));var Le=Math.max(0,Te+G.placeholderBuffer-ue(G,Fe));Le<=G.placeholderBuffer?(G.placeholderBuffer-=Le,Le=0):(Le-=G.placeholderBuffer,G.placeholderBuffer=0,Fe<re.getMaxAllowedIndexFor(I,Ie)?U.setTimeToLoadDelay(1e3*Le):Le=0),H.quality=Fe,H.reason.throughput=ye,H.reason.latency=Ce,H.reason.bufferLevel=Te,H.reason.placeholderBuffer=G.placeholderBuffer,H.reason.delay=Le,G.lastQuality=Fe;break;default:R.debug("BOLA ABR rule invoked in bad state."),H.quality=re.getQualityForBitrate(E,Ee,Ie,Ce),H.reason.state=G.state,H.reason.throughput=Ee,H.reason.latency=Ce,G.state=1,X(G)}return H},reset:function ne(){ve(),P.off(p.default.BUFFER_EMPTY,ie,f),P.off(p.default.PLAYBACK_SEEKING,me,f),P.off(p.default.METRIC_ADDED,ge,f),P.off(p.default.QUALITY_CHANGE_REQUESTED,ce,f),P.off(p.default.FRAGMENT_LOADING_ABANDONED,de,f),P.off(d.default.MEDIA_FRAGMENT_LOADED,ae,f)}},function Q(){R=Object(v.default)(O).getInstance().getLogger(f),ve(),P.on(p.default.BUFFER_EMPTY,ie,f),P.on(p.default.PLAYBACK_SEEKING,me,f),P.on(p.default.METRIC_ADDED,ge,f),P.on(p.default.QUALITY_CHANGE_REQUESTED,ce,f),P.on(p.default.FRAGMENT_LOADING_ABANDONED,de,f),P.on(d.default.MEDIA_FRAGMENT_LOADED,ae,f)}(),f}C.__dashjs_factory_name="BolaRule",k.default=M.default.getClassFactory(C)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/rules/SwitchRequest.js"),M=u("./src/core/Debug.js");function y(){var d,v,D=this.context;return d={getMaxIndex:function F(m){var h=Object(_.default)(D).create();if(!m||!m.hasOwnProperty("getDroppedFramesHistory"))return h;var g=m.getDroppedFramesHistory(),S=m.getStreamInfo().id;if(g){var C=g.getFrameHistory(S);if(!C||0===C.length)return h;for(var x=0,O=0,N=_.default.NO_CHANGE,w=1;w<C.length;w++)if(C[w]&&(x=C[w].droppedVideoFrames,(O=C[w].totalVideoFrames)>375&&x/O>.15)){v.debug("index: "+(N=w-1)+" Dropped Frames: "+x+" Total Frames: "+O);break}return Object(_.default)(D).create(N,{droppedFrames:x})}return h}},function b(){v=Object(M.default)(D).getInstance().getLogger(d)}(),d}y.__dashjs_factory_name="DroppedFramesRule",k.default=B.default.getClassFactory(y)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/EventBus.js"),_=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),D=u("./src/streaming/rules/SwitchRequest.js"),d=u("./src/streaming/constants/Constants.js"),v=u("./src/streaming/constants/MetricsConstants.js"),p=u("./src/streaming/MediaPlayerEvents.js");function L(b){b=b||{};var C,x,O,h=this.context,g=Object(B.default)(h).getInstance(),S=b.dashMetrics;function R(){(O={})[d.default.VIDEO]={ignoreCount:2},O[d.default.AUDIO]={ignoreCount:2}}function V(){R()}function Q(J){!isNaN(J.startTime)&&(J.mediaType===d.default.AUDIO||J.mediaType===d.default.VIDEO)&&O[J.mediaType].ignoreCount>0&&O[J.mediaType].ignoreCount--}return C={getMaxIndex:function P(J){var te=Object(D.default)(h).create();if(!J||!J.hasOwnProperty("getMediaType"))return te;!function w(){if(!S||!S.hasOwnProperty("getCurrentBufferLevel")||!S.hasOwnProperty("getCurrentBufferState"))throw new Error(d.default.MISSING_CONFIG_ERROR)}();var X=J.getMediaType(),K=S.getCurrentBufferState(X),ee=J.getRepresentationInfo().fragmentDuration,ue=J.getStreamInfo(),pe=ue?ue.id:null,_e=J.getScheduleController(),ie=ue&&ue.manifestInfo&&ue.manifestInfo.isDynamic;if(function f(J,te){return!J&&O[te].ignoreCount>0}(_e.getPlaybackController().getLowLatencyModeEnabled(),X)||!ee)return te;if(K&&K.state===v.default.BUFFER_EMPTY)x.debug("["+X+"] Switch to index 0; buffer is empty."),te.quality=0,te.reason="InsufficientBufferRule: Buffer is empty";else{var ge=J.getMediaInfo(),fe=J.getAbrController(),ce=fe.getThroughputHistory(),de=S.getCurrentBufferLevel(X),se=ce.getAverageThroughput(X,ie),ve=ce.getAverageLatency(X);te.quality=fe.getQualityForBitrate(ge,se*(de/ee)*.5,pe,ve),te.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return te},reset:function $(){R(),g.off(p.default.PLAYBACK_SEEKING,V,C),g.off(_.default.BYTES_APPENDED_END_FRAGMENT,Q,C)}},function N(){x=Object(y.default)(h).getInstance().getLogger(C),R(),g.on(p.default.PLAYBACK_SEEKING,V,C),g.on(_.default.BYTES_APPENDED_END_FRAGMENT,Q,C)}(),C}L.__dashjs_factory_name="InsufficientBufferRule",k.default=M.default.getClassFactory(L)},"./src/streaming/rules/abr/L2ARule.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/MetricsConstants.js"),_=u("./src/streaming/rules/SwitchRequest.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/vo/metrics/HTTPRequest.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/Debug.js"),p=u("./src/streaming/constants/Constants.js");function m(h){var x,O,N,w,g=this.context,S=(h=h||{}).dashMetrics,C=Object(D.default)(g).getInstance();function f(ie){var me={},ae=ie.getMediaInfo(),ge=ae.bitrateList.map(function(fe){return fe.bandwidth/1e3});return me.state=1,me.bitrates=ge,me.lastQuality=0,function R(ie){!ie||!ie.type||(N[ie.type]={},N[ie.type].w=[],N[ie.type].prev_w=[],N[ie.type].Q=0,N[ie.type].segment_request_start_s=0,N[ie.type].segment_download_finish_s=0,N[ie.type].B_target=1.5)}(ae),V(me),me}function V(ie){ie.placeholderBuffer=0,ie.mostAdvancedSegmentStart=NaN,ie.lastSegmentWasReplacement=!1,ie.lastSegmentStart=NaN,ie.lastSegmentDurationS=NaN,ie.lastSegmentRequestTimeMs=NaN,ie.lastSegmentFinishTimeMs=NaN}function $(){for(var ie in O)if(O.hasOwnProperty(ie)){var me=O[ie];0!==me.state&&(me.state=1,V(me))}}function J(ie){if(ie&&ie.chunk&&ie.chunk.mediaInfo){var me=O[ie.chunk.mediaInfo.type],ae=N[ie.chunk.mediaInfo.type];if(me&&0!==me.state){var ge=ie.chunk.start;isNaN(me.mostAdvancedSegmentStart)||ge>me.mostAdvancedSegmentStart?(me.mostAdvancedSegmentStart=ge,me.lastSegmentWasReplacement=!1):me.lastSegmentWasReplacement=!0,me.lastSegmentStart=ge,me.lastSegmentDurationS=ie.chunk.duration,me.lastQuality=ie.chunk.quality,X(me,ae)}}}function te(ie){if(ie&&ie.metric===B.default.HTTP_REQUEST&&ie.value&&ie.value.type===y.HTTPRequest.MEDIA_SEGMENT_TYPE&&ie.value.trace&&ie.value.trace.length){var me=O[ie.mediaType],ae=N[ie.mediaType];me&&0!==me.state&&(me.lastSegmentRequestTimeMs=ie.value.trequest.getTime(),me.lastSegmentFinishTimeMs=ie.value._tfinish.getTime(),X(me,ae))}}function X(ie,me){!isNaN(ie.lastSegmentStart)&&!isNaN(ie.lastSegmentRequestTimeMs)&&(me.segment_request_start_s=.001*ie.lastSegmentRequestTimeMs,me.segment_download_finish_s=.001*ie.lastSegmentFinishTimeMs,ie.lastSegmentStart=NaN,ie.lastSegmentRequestTimeMs=NaN)}function K(ie){if(ie&&ie.mediaType){var me=O[ie.mediaType];me&&0!==me.state&&(me.abrQuality=ie.newQuality)}}function oe(ie,me){if(ie.length!==me.length)return-1;for(var ae=0,ge=0;ge<ie.length;ge++)ae+=ie[ge]*me[ge];return ae}function pe(){O={},N={}}return x={getMaxIndex:function ue(ie){var G,me=Object(_.default)(g).create(),ge=Math.pow(4,.99),fe=Math.max(Math.pow(4,1),ge*Math.sqrt(4)),ce=ie.getMediaInfo(),de=ie.getMediaType(),se=ce.bitrateList.map(function(Ft){return Ft.bandwidth}),ve=se.length,ne=ie.getScheduleController(),Y=ie.getStreamInfo(),H=ie.getAbrController(),E=H.getThroughputHistory(),I=Y&&Y.manifestInfo&&Y.manifestInfo.isDynamic,U=ie.useL2AABR(),W=S.getCurrentBufferLevel(de,!0),re=E.getSafeAverageThroughput(de,I),De=E.getAverageThroughput(de,I),le=E.getAverageLatency(de),Te=ie.getVideoModel().getPlaybackRate();if(!(ie&&ie.hasOwnProperty("getMediaInfo")&&ie.hasOwnProperty("getMediaType")&&ie.hasOwnProperty("getScheduleController")&&ie.hasOwnProperty("getStreamInfo")&&ie.hasOwnProperty("getAbrController")&&ie.hasOwnProperty("useL2AABR")&&(me.reason=me.reason||{},U&&de!==p.default.AUDIO)))return me;ne.setTimeToLoadDelay(0);var ye=function Q(ie){var me=ie.getMediaType(),ae=O[me];return ae||(ae=f(ie),O[me]=ae),ae}(ie);if(0===ye.state)return me;var Ee=N[de];if(!Ee||(me.reason.state=ye.state,me.reason.throughput=De,me.reason.latency=le,isNaN(De)))return me;switch(ye.state){case 1:if(G=H.getQualityForBitrate(ce,re,Y.id,le),me.quality=G,me.reason.throughput=re,ye.lastQuality=G,!isNaN(ye.lastSegmentDurationS)&&W>=Ee.B_target){ye.state=2,Ee.Q=ge;for(var Ce=0;Ce<ve;++Ce)Ee.prev_w[Ce]=Ce===ye.lastQuality?1:0}break;case 2:var Fe=[],Oe=S.getCurrentHttpRequest(de).trace.reduce(function(Ft,Ht){return Ft+Ht.d},0),Le=S.getCurrentHttpRequest(de).trace.reduce(function(Ft,Ht){return Ft+Ht.b[0]},0),He=Math.round(8*Le/Oe);He<1&&(He=1);for(var Pe=ye.lastSegmentDurationS,Ue=1,Qe=0;Qe<ve;++Qe)se[Qe]=se[Qe]/1e3,Te*se[Qe]>He&&(Ue=-1),Ee.w[Qe]=Ee.prev_w[Qe]+Ue*(Pe/(2*fe))*((Ee.Q+ge)*(Te*se[Qe]/He));Ee.w=function ee(ie){for(var me=ie.length,ae=!1,ge=[],fe=0;fe<me;++fe)ge[fe]=ie[fe];for(var ce=ie.sort(function(H,E){return E-H}),de=0,se=0,ve=[],ne=0;ne<me-1;++ne)if((se=((de+=ce[ne])-1)/(ne+1))>=ce[ne+1]){ae=!0;break}ae||(se=(de+ce[me-1]-1)/me);for(var Y=0;Y<me;++Y)ve[Y]=Math.max(ge[Y]-se,0);return ve}(Ee.w);for(var ft=0;ft<ve;++ft)Fe[ft]=Ee.w[ft]-Ee.prev_w[ft],Ee.prev_w[ft]=Ee.w[ft];Ee.Q=Math.max(0,Ee.Q-Pe+Pe*Te*((oe(se,Ee.prev_w)+oe(se,Fe))/He));for(var lt=[],Dt=0;Dt<ve;++Dt)lt[Dt]=Math.abs(se[Dt]-oe(Ee.w,se));(G=lt.indexOf(Math.min.apply(Math,lt)))>ye.lastQuality&&se[ye.lastQuality+1]<=He&&(G=ye.lastQuality+1),se[G]>=He&&(Ee.Q=2*Math.max(ge,Ee.Q)),me.quality=G,me.reason.throughput=De,me.reason.latency=le,me.reason.bufferLevel=W,ye.lastQuality=me.quality;break;default:w.debug("L2A ABR rule invoked in bad state."),me.quality=H.getQualityForBitrate(ce,re,Y.id,le),me.reason.state=ye.state,me.reason.throughput=re,me.reason.latency=le,ye.state=1,V(ye)}return me},reset:function _e(){pe(),C.off(d.default.PLAYBACK_SEEKING,$,x),C.off(d.default.MEDIA_FRAGMENT_LOADED,J,x),C.off(d.default.METRIC_ADDED,te,x),C.off(d.default.QUALITY_CHANGE_REQUESTED,K,x)}},function P(){w=Object(v.default)(g).getInstance().getLogger(x),pe(),C.on(d.default.PLAYBACK_SEEKING,$,x),C.on(d.default.MEDIA_FRAGMENT_LOADED,J,x),C.on(d.default.METRIC_ADDED,te,x),C.on(d.default.QUALITY_CHANGE_REQUESTED,K,x)}(),x}m.__dashjs_factory_name="L2ARule",k.default=M.default.getClassFactory(m)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js"),M=u("./src/streaming/rules/SwitchRequest.js");function y(){var d,v,D=this.context;return d={getMaxIndex:function F(m){for(var h=m?m.getSwitchHistory():null,g=h?h.getSwitchRequests():[],S=0,C=0,x=0,O=Object(M.default)(D).create(),N=0;N<g.length;N++)if(void 0!==g[N]&&(x+=g[N].dropSize,(S+=g[N].drops)+(C+=g[N].noDrops)>=6&&S/C>.075)){O.quality=N>0&&g[N].drops>0?N-1:N,O.reason={index:O.quality,drops:S,noDrops:C,dropSize:x},v.debug("Switch history rule index: "+O.quality+" samples: "+(S+C)+" drops: "+S);break}return O}},function b(){v=Object(_.default)(D).getInstance().getLogger(d)}(),d}y.__dashjs_factory_name="SwitchHistoryRule",k.default=B.default.getClassFactory(y)},"./src/streaming/rules/abr/ThroughputRule.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/rules/SwitchRequest.js"),M=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/constants/MetricsConstants.js");function D(d){var v=this.context,p=(d=d||{}).dashMetrics;return{getMaxIndex:function m(g){var S=Object(_.default)(v).create();if(!(g&&g.hasOwnProperty("getMediaInfo")&&g.hasOwnProperty("getMediaType")&&g.hasOwnProperty("useBufferOccupancyABR")&&g.hasOwnProperty("getAbrController")&&g.hasOwnProperty("getScheduleController")))return S;!function F(){if(!p||!p.hasOwnProperty("getCurrentBufferState"))throw new Error(M.default.MISSING_CONFIG_ERROR)}();var C=g.getMediaInfo(),x=g.getMediaType(),O=p.getCurrentBufferState(x),N=g.getScheduleController(),w=g.getAbrController(),P=g.getStreamInfo(),f=P?P.id:null,R=P&&P.manifestInfo?P.manifestInfo.isDynamic:null,V=w.getThroughputHistory(),Q=V.getSafeAverageThroughput(x,R),$=V.getAverageLatency(x),J=g.useBufferOccupancyABR();return isNaN(Q)||!O||J||w.getAbandonmentStateFor(f,x)!==y.default.ABANDON_LOAD&&(O.state===y.default.BUFFER_LOADED||R)&&(S.quality=w.getQualityForBitrate(C,Q,f,$),N.setTimeToLoadDelay(0),S.reason={throughput:Q,latency:$}),S},reset:function h(){}}}D.__dashjs_factory_name="ThroughputRule",k.default=B.default.getClassFactory(D)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js"),M_MANUAL="manual_weight_selection",M_RANDOM="random_weight_selection",M_DYNAMIC="dynamic_weight_selection";function y(){var d,v,p,L,b,F,m,h,g,D=this.context;function x(){p=null,L=1,b=100,F=0,m=null,h=null,g=M_DYNAMIC}function O(){var ue=0;if(p)for(var pe=0;pe<p.length;pe++){var _e=p[pe];_e.state.throughput>ue&&(ue=_e.state.throughput)}return ue}function w(ue,pe,_e){var ie=ue.map(function(ae,ge){return _e[ge]*Math.pow(ae-pe[ge],2)}).reduce(function(ae,ge){return ae+ge});return(ie<0?-1:1)*Math.sqrt(Math.abs(ie))}function P(ue,pe){return w([ue.state.throughput,ue.state.latency,ue.state.rebuffer,ue.state.switch],[pe.state.throughput,pe.state.latency,pe.state.rebuffer,pe.state.switch],[1,1,1,1])}function f(ue,pe,_e){for(var ie=0;ie<pe.length;ie++){var me=pe[ie],ge=P(me,ue);R(me,_e,Math.exp(-1*Math.pow(ge,2)/(2*Math.pow(.1,2))))}}function R(ue,pe,_e){var ie=ue.state,me=[.01,.01,.01,.01];ie.throughput=ie.throughput+(pe[0]-ie.throughput)*me[0]*_e,ie.latency=ie.latency+(pe[1]-ie.latency)*me[1]*_e,ie.rebuffer=ie.rebuffer+(pe[2]-ie.rebuffer)*me[2]*_e,ie.switch=ie.switch+(pe[3]-ie.switch)*me[3]*_e}return d={getNextQuality:function Q(ue,pe,_e,ie,me,ae,ge){var fe=_e,ce=ie,de=pe,se=function K(ue){if(!p){p=[];var pe=ue.bitrateList,_e=[];F=pe[0].bandwidth,pe.forEach(function(ae){_e.push(ae.bandwidth),ae.bandwidth<F&&(F=ae.bandwidth)}),L=function N(ue){var pe=ue.map(function(_e){return Math.pow(_e,2)}).reduce(function(_e,ie){return _e+ie});return Math.sqrt(pe)}(_e);for(var ie=0;ie<pe.length;ie++)p.push({qualityIndex:ie,bitrate:pe[ie].bandwidth,state:{throughput:pe[ie].bandwidth/L,latency:0,rebuffer:0,switch:0}});h=function ee(ue){var pe=[],_e=function oe(ue){for(var pe=[],_e=0;_e<ue;_e++){var ie=[Math.random()*O(),Math.random(),Math.random(),Math.random()];pe.push(ie)}return pe}(Math.pow(ue.length,2));pe.push(_e[0]);for(var ie=[1,1,1,1],me=1;me<ue.length;me++){for(var ae=null,ge=null,fe=0;fe<_e.length;fe++){for(var ce=_e[fe],de=null,se=0;se<pe.length;se++){var ve=w(ce,pe[se],ie);(null===de||ve<de)&&(de=ve)}(null===ge||de>ge)&&(ae=ce,ge=de)}pe.push(ae)}for(var ne=null,Y=null,H=0;H<pe.length;H++){for(var E=0,I=0;I<pe.length;I++)H!==I&&(E+=w(pe[H],pe[I],ie));(null===ne||E>ne)&&(ne=E,Y=H)}var U=[];for(U.push(pe[Y]),pe.splice(Y,1);pe.length>0;){for(var W=null,re=null,De=0;De<pe.length;De++){var Ie=w(U[0],pe[De],ie);(null===W||Ie<W)&&(W=Ie,re=De)}U.push(pe[re]),pe.splice(re,1)}return U}(p)}return p}(ue),ve=pe/L;ve>1&&(ve=O()),_e/=b,v.debug("getNextQuality called throughput:".concat(ve," latency:").concat(_e," bufferSize:").concat(ie," currentQualityIndex:").concat(ae," playbackRate:").concat(me));var I=se[ae],U=I.bitrate*ge.getSegmentDuration()/de,W=Math.max(0,U-ce);if(ce-U<ge.getMinBuffer())return v.debug("Buffer is low for bitrate= ".concat(I.bitrate," downloadTime=").concat(U," currentBuffer=").concat(ce," rebuffer=").concat(W)),function V(ue,pe){var _e=0,ie=ue;if(p)for(var me=0;me<p.length;me++){var ae=p[me];ae.bitrate<ue.bitrate&&ae.bitrate>_e&&pe>ae.bitrate&&(_e=ae.bitrate,ie=ae)}return ie}(I,de).qualityIndex;switch(g){case M_MANUAL:!function $(){m=[.4,.4,.4,.4]}();break;case M_RANDOM:!function J(ue){m=function X(ue,pe){for(var _e=[],ie=Math.sqrt(2/ue),me=0;me<pe;me++)_e.push(Math.random()*ie);return m=_e}(ue.length,4)}(se);break;default:!function te(ue,pe,_e,ie,me,ae,ge){m||(m=h[h.length-1]);var fe=ue.findWeightVector(pe,_e,ie,me,ae,ge);null!==fe&&-1!==fe&&(m=fe)}(ge,se,fe,ce,W,de,me)}for(var re=null,De=null,Ie=null,le=0;le<se.length;le++){var z=se[le],G=z.state,Te=[G.throughput,G.latency,G.rebuffer,G.switch],ye=m.slice(),Ee=ge.getNextBufferWithBitrate(z.bitrate,ce,de),Ce=Ee<ge.getMinBuffer();Ce&&v.debug("Buffer is low for bitrate=".concat(z.bitrate," downloadTime=").concat(U," currentBuffer=").concat(ce," nextBuffer=").concat(Ee)),(z.bitrate>pe-1e4||Ce)&&z.bitrate!==F&&(ye[0]=100);var Fe=w(Te,[ve,0,0,0],ye);(null===re||Fe<re)&&(re=Fe,De=z.qualityIndex,Ie=z)}var Oe=Math.abs(I.bitrate-Ie.bitrate)/L;return f(I,se,[ve,_e,W,Oe]),f(Ie,se,[ve,0,0,Oe]),De},reset:function C(){x()}},function S(){v=Object(_.default)(D).getInstance().getLogger(d),x()}(),d}y.__dashjs_factory_name="LearningAbrController",k.default=B.default.getClassFactory(y)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/rules/abr/lolp/QoeInfo.js");function M(){var y,D,d,v,p;function b(){D=null,d=null,v=null,p=null}function m(O,N,w,P){var f=new _.default;return f.type=O,f.weights.bitrateReward=N||1,f.weights.bitrateSwitchPenalty=1,f.weights.rebufferPenalty=w||1e3,f.weights.latencyPenalty=[],f.weights.latencyPenalty.push({threshold:1.1,penalty:.05*P}),f.weights.latencyPenalty.push({threshold:1e8,penalty:.1*w}),f.weights.playbackSpeedPenalty=P||200,f}function g(O,N,w,P,f){f.bitrateWSum+=f.weights.bitrateReward*O,f.lastBitrate&&(f.bitrateSwitchWSum+=f.weights.bitrateSwitchPenalty*Math.abs(O-f.lastBitrate)),f.lastBitrate=O,f.rebufferWSum+=f.weights.rebufferPenalty*N;for(var R=0;R<f.weights.latencyPenalty.length;R++){var V=f.weights.latencyPenalty[R];if(w<=V.threshold){f.latencyWSum+=V.penalty*w;break}}f.playbackSpeedWSum+=f.weights.playbackSpeedPenalty*Math.abs(1-P),f.totalQoe=f.bitrateWSum-f.bitrateSwitchWSum-f.rebufferWSum-f.latencyWSum-f.playbackSpeedWSum}return y={setupPerSegmentQoe:function F(O,N,w){D=m("segment",O,N,w),d=O,v=N,p=w},logSegmentMetrics:function h(O,N,w,P){D&&g(O,N,w,P,D)},getPerSegmentQoe:function S(){return D},calculateSingleUseQoe:function C(O,N,w,P){var f=null;return d&&v&&p&&(f=m("segment",d,v,p)),f?(g(O,N,w,P,f),f.totalQoe):0},reset:function x(){b()}},function L(){b()}(),y}M.__dashjs_factory_name="LoLpQoeEvaluator",k.default=B.default.getClassFactory(M)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/Debug.js"),_=u("./src/core/FactoryMaker.js"),M=u("./src/streaming/rules/abr/lolp/LearningAbrController.js"),y=u("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),D=u("./src/streaming/rules/SwitchRequest.js"),d=u("./src/streaming/constants/MetricsConstants.js"),v=u("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),p=u("./src/streaming/constants/Constants.js");function F(m){var S,C,x,O,h=(m=m||{}).dashMetrics,g=this.context;return C={getMaxIndex:function w(R){try{var V=Object(D.default)(g).create(),Q=R.getMediaInfo().type,$=R.getAbrController(),J=R.getStreamInfo(),te=$.getQualityFor(Q,J.id),X=R.getMediaInfo(),K=h.getCurrentBufferState(Q),oe=R.getScheduleController(),ee=h.getCurrentBufferLevel(Q,!0),ue=J&&J.manifestInfo?J.manifestInfo.isDynamic:null,pe=oe.getPlaybackController(),_e=pe.getCurrentLiveLatency();if(!R.useLoLPABR()||Q===p.default.AUDIO)return V;_e||(_e=0);var ie=pe.getPlaybackRate(),ae=$.getThroughputHistory().getSafeAverageThroughput(Q,ue);if(S.debug("Throughput ".concat(Math.round(ae)," kbps")),isNaN(ae)||!K||$.getAbandonmentStateFor(J.id,Q)===d.default.ABANDON_LOAD)return V;for(var ge=X.bitrateList,fe=R.getRepresentationInfo().fragmentDuration,ce=ge[0].bandwidth/1e3,de=ge[ge.length-1].bandwidth/1e3,se=0;se<ge.length;se++){var ve=ge[se].bandwidth/1e3;ve>de?de=ve:ve<ce&&(ce=ve)}var Y=ge[te].bandwidth/1e3,H=h.getCurrentHttpRequest(Q,!0),E=(H.tresponse.getTime()-H.trequest.getTime())/1e3,I=E>fe?E-fe:0;O.setupPerSegmentQoe(fe,de,ce),O.logSegmentMetrics(Y,I,_e,ie);var U=Object(v.default)(g).create({targetLatency:1.5,bufferMin:.3,segmentDuration:fe,qoeEvaluator:O});return V.quality=x.getNextQuality(X,1e3*ae,_e,ee,ie,te,U),V.reason={throughput:ae,latency:_e},V.priority=D.default.PRIORITY.STRONG,oe.setTimeToLoadDelay(0),V.quality!==te&&console.log("[TgcLearningRule]["+Q+"] requesting switch to index: ",V.quality,"Average throughput",Math.round(ae),"kbps"),V}catch(W){throw W}},reset:function f(){!function P(){x.reset(),O.reset()}()}},function N(){S=Object(B.default)(g).getInstance().getLogger(C),x=Object(M.default)(g).create(),O=Object(y.default)(g).create()}(),C}F.__dashjs_factory_name="LoLPRule",k.default=_.default.getClassFactory(F)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(M){var p,F,m,y=M.targetLatency,D=M.bufferMin,d=M.segmentDuration,v=M.qoeEvaluator;function N(){return d}function P(f,R){var V=N();return R>V?f-V:f+V-R}return p={getMinBuffer:function O(){return D},getSegmentDuration:N,getNextBufferWithBitrate:function w(f,R,V){return P(R,f*d/V)},getNextBuffer:P,findWeightVector:function S(f,R,V,Q,$,J){var te=null,X=null,K=null,oe=Math.abs(R-m);return f.forEach(function(ee){F.forEach(function(ue){var pe_latency=ue[1],pe_buffer=ue[2],_e=ee.bitrate*d/$,ie=P(V,_e),me=Math.max(1e-5,_e-ie),ce=v.calculateSingleUseQoe(ee.bitrate,(0===pe_buffer?10:1/pe_buffer)*me,(0===pe_latency?10:1/pe_latency)*ee.state.latency,J);(null===te||ce>te)&&function C(f,R,V){return!(f>y+V)&&R>=D}(R,ie,oe)&&(te=ce,X=ue,K=ee.bitrate)})}),null===X&&null===K&&(X=-1),m=R,X}},function h(){!function g(){F=function x(f,R){return function $(J,te,X){if(X===te)return J;for(var K=J.length,oe=0;oe<K;oe++)for(var ee=J.shift(),ue=0;ue<f.length;ue++)J.push(ee.concat(f[ue]));return $(J,te,X+1)}(f.map(function($){return[$]}),R,1)}([.2,.4,.6,.8,1],4),m=0}()}(),p}_.__dashjs_factory_name="LoLpWeightSelector",k.default=B.default.getClassFactory(_)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(){var M=0;function D(m){for(var h="",g=0;g<m.length;++g)h+=m[g].uchar;return h.length-h.replace(/^\s+/,"").length}function d(m){return"left: "+3.125*m.x+"%; top: "+6.66*m.y1+"%; width: "+(100-3.125*m.x)+"%; height: "+6.66*Math.max(m.y2-1-m.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function v(m){return"red"===m?"rgb(255, 0, 0)":"green"===m?"rgb(0, 255, 0)":"blue"===m?"rgb(0, 0, 255)":"cyan"===m?"rgb(0, 255, 255)":"magenta"===m?"rgb(255, 0, 255)":"yellow"===m?"rgb(255, 255, 0)":"white"===m?"rgb(255, 255, 255)":"black"===m?"rgb(0, 0, 0)":m}function p(m,h){var g=m.videoHeight/15;return h?"font-size: "+g+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(h.foreground?v(h.foreground):"rgb(255, 255, 255)")+"; font-style: "+(h.italics?"italic":"normal")+"; text-decoration: "+(h.underline?"underline":"none")+"; white-space: pre; background-color: "+(h.background?v(h.background):"transparent")+";":"font-size: "+g+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function L(m){return m.replace(/^\s+/g,"")}function b(m){return m.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function F(m,h,g,S){var Q,$,C=null,O=!1,N=-1,w={start:h,end:g,spans:[]},P="style_cea608_white_black",f={},R={},V=[];for(Q=0;Q<15;++Q){var J=S.rows[Q],te="",X=null;if(!1===J.isEmpty()){var K=D(J.chars);null===C&&(C={x:K,y1:Q,y2:Q+1,p:[]}),K!==N&&O&&(C.p.push(w),w={start:h,end:g,spans:[]},C.y2=Q,C.name="region_"+C.x+"_"+C.y1+"_"+C.y2,!1===f.hasOwnProperty(C.name)?(V.push(C),f[C.name]=C):f[C.name].p.contat(C.p),C={x:K,y1:Q,y2:Q+1,p:[]});for(var oe=0;oe<J.chars.length;++oe){var ee=J.chars[oe],ue=ee.penState;if(null===X||!ue.equals(X)){te.trim().length>0&&(w.spans.push({name:P,line:te,row:Q}),te="");var pe="style_cea608_"+ue.foreground+"_"+ue.background;ue.underline&&(pe+="_underline"),ue.italics&&(pe+="_italics"),R.hasOwnProperty(pe)||(R[pe]=JSON.parse(JSON.stringify(ue))),X=ue,P=pe}te+=ee.uchar}te.trim().length>0&&w.spans.push({name:P,line:te,row:Q}),O=!0,N=K}else O=!1,N=-1,C&&(C.p.push(w),w={start:h,end:g,spans:[]},C.y2=Q,C.name="region_"+C.x+"_"+C.y1+"_"+C.y2,!1===f.hasOwnProperty(C.name)?(V.push(C),f[C.name]=C):f[C.name].p.contat(C.p),C=null)}C&&(C.p.push(w),C.y2=Q+1,C.name="region_"+C.x+"_"+C.y1+"_"+C.y2,!1===f.hasOwnProperty(C.name)?(V.push(C),f[C.name]=C):f[C.name].p.contat(C.p),C=null);var _e=[];for(Q=0;Q<V.length;++Q){var ie=V[Q],me="sub_cea608_"+M++,ae=document.createElement("div");ae.id=me;var ge=d(ie);ae.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+ge;var fe=document.createElement("div");fe.className="paragraph bodyStyle",fe.style.cssText=p(m);var ce=document.createElement("div");ce.className="cueUniWrapper",ce.style.cssText="unicode-bidi: normal; direction: ltr;";for(var de=0;de<ie.p.length;++de){var se=ie.p[de],ve=0;for($=0;$<se.spans.length;++$){var ne=se.spans[$];if(ne.line.length>0){if(0!==$&&ve!=ne.row){var Y=document.createElement("br");Y.className="lineBreak",ce.appendChild(Y)}var H=!1;ve===ne.row&&(H=!0),ve=ne.row;var E=R[ne.name],I=document.createElement("span");I.className="spanPadding "+ne.name+" customSpanColor",I.style.cssText=p(m,E),I.textContent=0!==$&&H?$===se.spans.length-1?b(ne.line):ne.line:se.spans.length>1&&$<se.spans.length-1&&ne.row===se.spans[$+1].row?L(ne.line):ne.line.trim(),ce.appendChild(I)}}}fe.appendChild(ce),ae.appendChild(fe);var U={bodyStyle:["%",90]};for(var W in R)R.hasOwnProperty(W)&&(U[W]=["%",90]);_e.push({type:"html",start:h,end:g,cueHTMLElement:ae,cueID:me,cellResolution:[32,15],isFromCEA608:!0,fontSize:U,lineHeight:{},linePadding:{}})}return _e}}}_.__dashjs_factory_name="EmbeddedTextHtmlRender",k.default=B.default.getSingletonFactory(_)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/EventBus.js"),_=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/utils/InitCache.js"),D=u("./src/streaming/SourceBufferSink.js"),d=u("./src/streaming/vo/DashJSError.js"),v=u("./src/core/errors/Errors.js"),p="NotFragmentedTextBufferController";function L(b){b=b||{};var x,O,N,w,P,f,F=this.context,m=Object(B.default)(F).getInstance(),h=b.textController,g=b.errHandler,S=b.streamInfo,C=b.type;function K(W){w=W}function _e(W){O!==W&&(O=W)&&function U(W,re){m.trigger(W,re||{},{streamId:S.id,mediaType:C})}(_.default.BUFFERING_COMPLETED)}function ae(W){!W.chunk.bytes||O||(f.save(W.chunk),P.append(W.chunk),_e(!0))}return x={initialize:function Q(W){K(W)},getStreamId:function J(){return S.id},getType:function te(){return C},getBufferControllerType:function V(){return p},createBufferSink:function $(W){return new Promise(function(re,De){try{(P=Object(D.default)(F).create({mediaSource:w,textController:h,eventBus:m})).initializeForFirstUse(S,W),N||(P.getBuffer()&&"function"==typeof P.getBuffer().initialize&&P.getBuffer().initialize(),N=!0),re(P)}catch(Ie){g.error(new d.default(v.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,v.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+C)),De(Ie)}})},getBuffer:function X(){return P},getBufferLevel:function ue(){return 0},getRangeAt:function ge(){return null},getAllRangesWithSafetyFactor:function fe(){return[]},getContinuousBufferTimeForTargetTime:function ce(){return Number.POSITIVE_INFINITY},setMediaSource:K,getMediaSource:function oe(){return w},appendInitSegmentFromCache:function me(W){return null!==f.extract(S.id,W)},getIsBufferingCompleted:function pe(){return O},setIsBufferingCompleted:_e,getIsPruningInProgress:function ee(){return!1},reset:function ie(W){m.off(_.default.INIT_FRAGMENT_LOADED,ae,x),!W&&P&&(P.abort(),P.reset(),P=null)},clearBuffers:function de(){return Promise.resolve()},prepareForPlaybackSeek:function ve(){return Promise.resolve()},prepareForReplacementTrackSwitch:function ne(){return O=!1,Promise.resolve()},setSeekTarget:function H(){},updateAppendWindow:function Y(){return Promise.resolve()},pruneAllSafely:function I(){return Promise.resolve()},updateBufferTimestampOffset:function se(){return Promise.resolve()},segmentRequestingCompleted:function E(){}},function R(){N=!1,w=null,O=!1,f=Object(y.default)(F).getInstance(),m.on(_.default.INIT_FRAGMENT_LOADED,ae,x)}(),x}L.__dashjs_factory_name=p,k.default=M.default.getClassFactory(L)},"./src/streaming/text/TextController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/core/FactoryMaker.js"),M=u("./src/streaming/text/TextSourceBuffer.js"),y=u("./src/streaming/text/TextTracks.js"),D=u("./src/streaming/utils/VTTParser.js"),d=u("./src/streaming/utils/TTMLParser.js"),v=u("./src/core/EventBus.js"),p=u("./src/core/events/Events.js"),L=u("./src/streaming/MediaPlayerEvents.js"),b=u("./src/streaming/utils/SupervisorTools.js");function F(m){var w,P,f,R,V,Q,$,J,te,X,K,oe,ee,h=this.context,g=m.adapter,S=m.errHandler,C=m.manifestModel,x=m.mediaController,O=m.videoModel,N=m.settings;function de(Ie){var le=Ie.tracks,z=Ie.index,G=Ie.streamId;!1===N.get().streaming.text.defaultEnabled&&!ne()||ee?H(G,-1):(J&&le.some(function(ye,Ee){if(x.matchSettings(J,ye))return H(G,Ee),z=Ee,!0}),X=!1),P[G].lastEnabledIndex=z,$.trigger(L.default.TEXT_TRACKS_ADDED,{enabled:ne(),index:z,tracks:le,streamId:G}),oe=!0}function se(Ie){if(!te&&Ie&&Ie.newMediaInfo){var le=Ie.newMediaInfo;le.type===B.default.TEXT&&(J={lang:le.lang,role:le.roles[0],index:le.index,codec:le.codec,accessibility:le.accessibility[0]})}}function ne(){var Ie=!0;return X&&!K&&(Ie=!1),Ie}function H(Ie,le){(X=-1===le)&&x&&x.saveTextSettingsDisabled();var z=U(Ie);if(z!==le&&R[Ie]){R[Ie].setModeForTrackIdx(z,B.default.TEXT_HIDDEN),R[Ie].setCurrentTrackIdx(le),R[Ie].setModeForTrackIdx(le,B.default.TEXT_SHOWING);var G=R[Ie].getCurrentTrackInfo();G&&G.isFragmented&&!G.isEmbedded?function E(Ie,le,z){if(f[Ie])for(var Te=f[Ie].getConfig().fragmentedTracks,ye=0;ye<Te.length;ye++){var Ee=Te[ye];if(le.lang===Ee.lang&&(Ee.id?le.id===Ee.id:le.index===Ee.index)){var Ce=x.getCurrentTrackFor(B.default.TEXT,Ie);(Ee.id?Ce.id!==Ee.id:Ce.index!==Ee.index)?(R[Ie].deleteCuesFromTrackIdx(z),f[Ie].setCurrentFragmentedTrackIdx(ye)):-1===z&&$.trigger(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Ie,mediaType:B.default.TEXT})}}}(Ie,G,z):G&&!G.isFragmented&&function I(Ie,le){$.trigger(p.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:le},{streamId:Ie,mediaType:B.default.TEXT})}(Ie,G),x.setTrack(G)}}function U(Ie){return R[Ie].getCurrentTrackIdx()}function re(){f={},R={},P={},X=!0,oe=!1,ee=!1}return w={deactivateStream:function W(Ie){if(Ie){var le=Ie.id;f[le]&&f[le].resetMediaInfos(),R[le]&&R[le].deleteAllTextTracks()}},initialize:function pe(){$.on(p.default.CURRENT_TRACK_CHANGED,se,w),$.on(p.default.TEXT_TRACKS_QUEUE_INITIALIZED,de,w)},initializeForStream:function _e(Ie){var le=Ie.id,z=Object(y.default)(h).create({videoModel:O,streamInfo:Ie});z.initialize(),R[le]=z;var G=Object(M.default)(h).create({errHandler:S,adapter:g,manifestModel:C,mediaController:x,videoModel:O,textTracks:z,vttParser:V,ttmlParser:Q,streamInfo:Ie});G.initialize(),f[le]=G,P[le]={},P[le].lastEnabledIndex=-1},createTracks:function ie(Ie){var le=Ie.id;!R[le]||R[le].createTracks()},getTextSourceBuffer:function ae(Ie){var le=Ie.id;if(f&&f[le])return f[le]},getAllTracksAreDisabled:function ge(){return X},addEmbeddedTrack:function fe(Ie,le){var z=Ie.id;!f[z]||f[z].addEmbeddedTrack(le)},setInitialSettings:function ce(Ie){J=Ie,te=!0},enableText:function ve(Ie,le){Object(b.checkParameterType)(le,"boolean"),ne()!==le&&(le&&H(Ie,P[Ie].lastEnabledIndex),le||(P[Ie].lastEnabledIndex=U(Ie),oe?H(Ie,-1):ee=!0))},isTextEnabled:ne,setTextTrack:H,getCurrentTrackIdx:U,enableForcedTextStreaming:function Y(Ie){Object(b.checkParameterType)(Ie,"boolean"),K=Ie},addMediaInfosToBuffer:function me(Ie,le,z){var Te=Ie.id;!f[Te]||f[Te].addMediaInfos(le,z,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)},reset:function De(){re(),$.off(p.default.CURRENT_TRACK_CHANGED,se,w),$.off(p.default.TEXT_TRACKS_QUEUE_INITIALIZED,de,w),Object.keys(f).forEach(function(Ie){f[Ie].resetEmbedded(),f[Ie].reset()})}},function ue(){J=null,K=!1,oe=!1,te=!1,ee=!1,V=Object(D.default)(h).getInstance(),Q=Object(d.default)(h).getInstance(),$=Object(v.default)(h).getInstance(),re()}(),w}F.__dashjs_factory_name="TextController",k.default=_.default.getClassFactory(F)},"./src/streaming/text/TextSourceBuffer.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/streaming/vo/metrics/HTTPRequest.js"),M=u("./src/streaming/vo/TextTrackInfo.js"),y=u("./src/streaming/utils/BoxParser.js"),D=u("./src/streaming/utils/CustomTimeRanges.js"),d=u("./src/core/FactoryMaker.js"),v=u("./src/core/Debug.js"),p=u("./src/streaming/text/EmbeddedTextHtmlRender.js"),L=u("./node_modules/codem-isoboxer/dist/iso_boxer.js"),b=u.n(L),F=u("./externals/cea608-parser.js"),m=u.n(F),h=u("./src/core/EventBus.js"),g=u("./src/core/events/Events.js"),S=u("./src/streaming/vo/DashJSError.js"),C=u("./src/core/errors/Errors.js");function x(O){var K,oe,ee,ue,pe,_e,ie,me,ae,ge,fe,ce,de,se,ve,ne,N=O.errHandler,w=O.manifestModel,P=O.mediaController,f=O.videoModel,R=O.textTracks,V=O.vttParser,Q=O.ttmlParser,$=O.streamInfo,J=this.context,te=Object(h.default)(J).getInstance(),X=!1;function I(){(function E(){_e=null,me=NaN,ae=[],ge=null,ie=!1})(),pe=[],ue=null}function re(xe){var Se=new M.default;for(var Ze in xe)Se[Ze]=xe[Ze];Se.labels=xe.labels,Se.defaultTrack=function Ht(xe){var Se=!1;return ce.length>1&&xe.isEmbedded?Se=xe.id&&xe.id===B.default.CC1:1===ce.length?xe.id&&"string"==typeof xe.id&&"CC"===xe.id.substring(0,2)&&(Se=!0):0===ce.length&&(Se=xe.index===pe[0].index),Se}(xe),Se.isFragmented=xe.isFragmented,Se.isEmbedded=!!xe.isEmbedded,Se.isTTML=function Ce(xe){return xe.codec&&xe.codec.search(B.default.STPP)>=0||xe.mimeType&&xe.mimeType.search(B.default.TTML)>=0}(xe),Se.kind=function Fe(xe,Se){var ke=xe.roles&&xe.roles.length>0?Se[xe.roles[0]]:Se.caption;return ke===Se.caption||ke===Se.subtitle?ke:Se.caption}(xe,{subtitle:"subtitles",caption:"captions"}),R.addTextTrack(Se)}function le(xe){var Se=xe.chunk;Se.mediaInfo.embeddedCaptions&&Oe(Se.bytes,Se)}function Ee(xe){fe=xe}function Oe(xe,Se){var ke=Se.mediaInfo,Ze=ke.type,dt=ke.codec||ke.mimeType;dt?-1!==ke.codec.indexOf("application/mp4")?function Le(xe,Se,ke){var Ze;if("InitializationSegment"===Se.segmentType)ie=!0,me=ee.getMediaTimescaleFromMoov(xe);else{if(!ie)return;(Ze=ee.getSamplesInfo(xe).sampleList).length>0&&(ge=Ze[0].cts-Se.start*me),ke.search(B.default.STPP)>=0?function He(xe,Se,ke){var Ze,at;for(ue=null!==ue?ue:Jt(ke),Ze=0;Ze<Se.length;Ze++){var dt=Se[Ze],et=dt.cts,pt=Ft(),jt=pt+et/me;K.buffered.add(jt,jt+dt.duration/me);var Yt=new DataView(xe,dt.offset,dt.subSizes[0]),Be=b.a.Utils.dataViewToString(Yt,B.default.UTF8),$e=[],nt=dt.offset+dt.subSizes[0];for(at=1;at<dt.subSizes.length;at++){var Ot=new Uint8Array(xe,nt,dt.subSizes[at]),Mt=String.fromCharCode.apply(null,Ot);$e.push(Mt),nt+=dt.subSizes[at]}try{var wt=w.getValue(),ct=ue.parse(Be,wt.ttmlTimeIsRelative?et/me:0,et/me,(et+dt.duration)/me,$e);R.addCaptions(fe,pt,ct)}catch(Vt){_e.removeExecutedRequestsBeforeTime(),this.remove(),oe.error("TTML parser error: "+Vt.message)}}}(xe,Ze,ke):function Pe(xe,Se){var ke,Ze,at,dt=[];for(ke=0;ke<Se.length;ke++){var et=Se[ke];et.cts-=ge;var jt=Ft()+et.cts/me;K.buffered.add(jt,jt+et.duration/me);var Yt=xe.slice(et.offset,et.offset+et.size),Be=b.a.parseBuffer(Yt);for(Ze=0;Ze<Be.boxes.length;Ze++){var $e=Be.boxes[Ze];if(oe.debug("VTT box1: "+$e.type),"vtte"!==$e.type&&"vttc"===$e.type)for(oe.debug("VTT vttc boxes.length = "+$e.boxes.length),at=0;at<$e.boxes.length;at++){var nt=$e.boxes[at];if(oe.debug("VTT box2: "+nt.type),"payl"===nt.type){var Ot=nt.cue_text;oe.debug("VTT cue_text = "+Ot);var Mt=et.cts/me,wt=(et.cts+et.duration)/me;dt.push({start:Mt,end:wt,data:Ot,styles:{}}),oe.debug("VTT "+Mt+"-"+wt+" : "+Ot)}}}}dt.length>0&&R.addCaptions(fe,0,dt)}(xe,Ze)}}(xe,Se,dt):Ze===B.default.VIDEO?function Qe(xe,Se){var ke,Ze;if(Se.segmentType===_.HTTPRequest.INIT_SEGMENT_TYPE)0===de&&(de=ee.getMediaTimescaleFromMoov(xe));else if(Se.segmentType===_.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===de)return void oe.warn("CEA-608: No timescale for embeddedTextTrack yet");var at=(Ze=ee.getSamplesInfo(xe)).lastSequenceNumber;if(!ve[0]&&!ve[1]&&function ft(){for(var xe,Se=0;Se<ce.length;Se++){if(-1===(xe=R.getTrackIdxForId(ce[Se].id)))return void oe.warn("CEA-608: data before track is ready.");var ke=lt(xe);ve[Se]=new m.a.Cea608Parser(Se+1,{newCue:ke},null)}}(),de){if(null!==se&&at!==se+Ze.numSequences)for(ke=0;ke<ve.length;ke++)ve[ke]&&ve[ke].reset();for(var dt=function Dt(xe,Se){if(0===Se.length)return null;for(var ke={splits:[],fields:[[],[]]},Ze=new DataView(xe),at=0;at<Se.length;at++)for(var dt=Se[at],et=m.a.findCea608Nalus(Ze,dt.offset,dt.size),pt=null,jt=0,Rt=0;Rt<et.length;Rt++)for(var Yt=m.a.extractCea608DataFromRange(Ze,et[Rt]),Be=0;Be<2;Be++)if(Yt[Be].length>0){dt.cts!==pt?jt=0:jt+=1;var $e=Ft();ke.fields[Be].push([dt.cts+$e*de,Yt[Be],jt]),pt=dt.cts}return ke.fields.forEach(function(Ot){Ot.sort(function(Mt,wt){return Mt[0]===wt[0]?Mt[2]-wt[2]:Mt[0]-wt[0]})}),ke}(xe,Ze.sampleList),et=0;et<ve.length;et++){var pt=dt.fields[et],jt=ve[et];if(jt)for(ke=0;ke<pt.length;ke++)jt.addData(pt[ke][0]/de,pt[ke][1])}se=at}}}(xe,Se):function Ue(xe,Se,ke){var Ze,at,dt=new DataView(xe,0,xe.byteLength);at=b.a.Utils.dataViewToString(dt,B.default.UTF8);try{Ze=Jt(ke).parse(at,0),R.addCaptions(R.getCurrentTrackIdx(),0,Ze),K.buffered&&K.buffered.add(Se.start,Se.end)}catch(et){N.error(new S.default(C.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,C.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+et.message,at))}}(xe,Se,dt):oe.error("No text type defined")}function lt(xe){return function Se(ke,Ze,at){var dt;(dt=f.getTTMLRenderingDiv()?ne.createHTMLCaptionsFromScreen(f.getElement(),ke,Ze,at):[{start:ke,end:Ze,data:at.getDisplayText(),styles:{}}])&&R.addCaptions(xe,0,dt)}}function Ft(){return isNaN(K.timestampOffset)?0:K.timestampOffset}function Jt(xe){var Se;return xe.search(B.default.VTT)>=0?Se=V:(xe.search(B.default.TTML)>=0||xe.search(B.default.STPP)>=0)&&(Se=Q),Se}function on(xe){ce.forEach(function(Se){var ke=R.getTrackIdxForId(Se.id);ke>=0&&R.deleteCuesFromTrackIdx(ke,xe.from,xe.to)})}return K={initialize:function U(){X||function z(){ce=[],fe=null,de=0,ve=[],se=null,X=!0,ne=Object(p.default)(J).getInstance(),te.on(g.default.VIDEO_CHUNK_RECEIVED,le,K),te.on(g.default.BUFFER_CLEARED,on,K)}()},addMediaInfos:function W(xe,Se,ke){if(pe=pe.concat(Se),xe===B.default.TEXT&&Se[0].isFragmented&&!Se[0].isEmbedded){_e=ke,K.buffered=Object(D.default)(J).create(),ae=P.getTracksFor(B.default.TEXT,$.id).filter(function(et){return et.isFragmented});for(var Ze=P.getCurrentTrackFor(B.default.TEXT,$.id),at=0;at<ae.length;at++)if(ae[at]===Ze){Ee(at);break}}for(var dt=0;dt<Se.length;dt++)re(Se[dt])},resetMediaInfos:function je(){pe=[]},getStreamId:function H(){return $.id},append:Oe,abort:function De(){},addEmbeddedTrack:function Te(xe){if(X&&xe)if(xe.id===B.default.CC1||xe.id===B.default.CC3){for(var Se=0;Se<ce.length;Se++)if(ce[Se].id===xe.id)return;ce.push(xe)}else oe.warn("Embedded track "+xe.id+" not supported!")},resetEmbedded:function G(){te.off(g.default.VIDEO_CHUNK_RECEIVED,le,K),te.off(g.default.BUFFER_CLEARED,on,K),R&&R.deleteAllTextTracks(),X=!1,ce=[],ve=[null,null],se=null},getConfig:function ye(){return{fragmentModel:_e,fragmentedTracks:ae,videoModel:f}},setCurrentFragmentedTrackIdx:Ee,remove:function sn(xe,Se){void 0===xe&&xe===Se&&(xe=K.buffered.start(0),Se=K.buffered.end(K.buffered.length-1)),K.buffered.remove(xe,Se),R.deleteCuesFromTrackIdx(fe,xe,Se)},reset:function Ie(){I(),pe=[],ee=null}},function Y(){oe=Object(v.default)(J).getInstance().getLogger(K),ee=Object(y.default)(J).getInstance(),I()}(),K}x.__dashjs_factory_name="TextSourceBuffer",k.default=d.default.getClassFactory(x)},"./src/streaming/text/TextTracks.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),y=u("./src/streaming/MediaPlayerEvents.js"),D=u("./src/core/FactoryMaker.js"),d=u("./src/core/Debug.js"),v=u("./node_modules/imsc/src/main/js/main.js");function L(b){var S,C,x,O,N,w,P,f,R,V,Q,$,J,te,X,K,oe,F=this.context,m=Object(_.default)(F).getInstance(),h=b.videoModel,g=b.streamInfo;function _e(ye){return h.addTextTrack(ye.kind,void 0!==ye.id?ye.id:ye.lang,ye.lang,ye.isTTML,ye.isEmbedded)}function ae(ye,Ee,Ce,Fe,Oe,Le){var Ue=0,Qe=0;ye/Ee>Ce/Fe?Ue=(Qe=Ee)/Fe*Ce:Qe=(Ue=ye)/Ce*Fe;var ft,lt,Dt=0,Ft=0;return Ue/Qe>Oe?(Ft=Qe,Dt=Qe*Oe):(Dt=Ue,Ft=Ue/Oe),ft=(ye-Dt)/2,lt=(Ee-Ft)/2,Le?{x:ft+.1*Dt,y:lt+.1*Ft,w:.8*Dt,h:.8*Ft}:{x:ft,y:lt,w:Dt,h:Ft}}function ge(ye,Ee){var Ce=h.getClientWidth(),Fe=h.getClientHeight(),Oe=h.getVideoWidth(),Le=h.getVideoHeight(),He=h.getVideoRelativeOffsetTop(),Pe=h.getVideoRelativeOffsetLeft();if(0!==Oe&&0!==Le){var Ue=Oe/Le,Qe=!1;ye.isFromCEA608&&(Ue=3.5/3,Qe=!0);var ft=ae.call(this,Ce,Fe,Oe,Le,Ue,Qe),lt=ft.w,Dt=ft.h,Ft=ft.x,Ht=ft.y;if(lt!=R||Dt!=V||Ft!=P||Ht!=f||Ee){if(P=Ft+Pe,f=Ht+He,R=lt,V=Dt,Q){var Jt=Q.style;Jt&&(Jt.left=P+"px",Jt.top=f+"px",Jt.width=R+"px",Jt.height=V+"px",Jt.zIndex=J&&document[J]||te?K:null,m.trigger(y.default.CAPTION_CONTAINER_RESIZE))}var sn=ye.activeCues;if(sn)for(var on=sn.length,je=0;je<on;++je){var xe=sn[je];xe.scaleCue(xe)}}}}function fe(ye){var Fe,Oe,Le,He,Pe;if(ye.cellResolution){var Ue=[R/ye.cellResolution[0],V/ye.cellResolution[1]];if(ye.linePadding)for(Fe in ye.linePadding)if(ye.linePadding.hasOwnProperty(Fe)){Oe=(ye.linePadding[Fe]*Ue[0]).toString();for(var ft=document.getElementsByClassName("spanPadding"),lt=0;lt<ft.length;lt++)ft[lt].style.cssText=ft[lt].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Oe),ft[lt].style.cssText=ft[lt].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Oe)}if(ye.fontSize){for(Fe in ye.fontSize)if(ye.fontSize.hasOwnProperty(Fe)){"%"===ye.fontSize[Fe][0]?Le=ye.fontSize[Fe][1]/100:"c"===ye.fontSize[Fe][0]&&(Le=ye.fontSize[Fe][1]),Oe=(Le*Ue[1]).toString(),Pe="defaultFontSize"!==Fe?document.getElementsByClassName(Fe):document.getElementsByClassName("paragraph");for(var Dt=0;Dt<Pe.length;Dt++)Pe[Dt].style.cssText=Pe[Dt].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Oe)}if(ye.lineHeight)for(Fe in ye.lineHeight)if(ye.lineHeight.hasOwnProperty(Fe)){"%"===ye.lineHeight[Fe][0]?He=ye.lineHeight[Fe][1]/100:"c"===ye.fontSize[Fe][0]&&(He=ye.lineHeight[Fe][1]),Oe=(He*Ue[1]).toString(),Pe=document.getElementsByClassName(Fe);for(var Ft=0;Ft<Pe.length;Ft++)Pe[Ft].style.cssText=Pe[Ft].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Oe)}}}if(ye.isd){var Ht=document.getElementById(ye.cueID);Ht&&Q.removeChild(Ht),ce(ye)}}function ce(ye){if(Q){var Ee=document.createElement("div");Q.appendChild(Ee),X=Object(v.renderHTML)(ye.isd,Ee,function(Ce){var Fe=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,Oe=/^#(.*)$/;if(Fe.test(Ce)){var Le=Fe.exec(Ce),He=parseInt(Le[4],10)-1;return"data:image/png;base64,"+btoa(ye.images[He])}if(Oe.test(Ce)){var Qe=Oe.exec(Ce);return"data:image/png;base64,"+ye.embeddedImages[Qe[1]]}return null},Q.clientHeight,Q.clientWidth,!1,function(Ce){C.info("renderCaption :",Ce)},X,!0),Ee.id=ye.cueID,m.trigger(y.default.CAPTION_RENDERED,{captionDiv:Ee,currentTrackIdx:w})}}function de(ye,Ee,Ce){var Fe=se(ye),Oe=this;if(Fe&&Array.isArray(Ce)&&0!==Ce.length)for(var Le=0;Le<Ce.length;Le++){var He=void 0,Pe=Ce[Le];Fe.cellResolution=Pe.cellResolution,Fe.isFromCEA608=Pe.isFromCEA608,"html"!==Pe.type||!Q||isNaN(Pe.start)||isNaN(Pe.end)?Pe.data&&!isNaN(Pe.start)&&!isNaN(Pe.end)&&(He=new x(Pe.start-Ee,Pe.end-Ee,Pe.data),Pe.styles&&(void 0!==Pe.styles.align&&"align"in He&&(He.align=Pe.styles.align),void 0!==Pe.styles.line&&"line"in He&&(He.line=Pe.styles.line),void 0!==Pe.styles.position&&"position"in He&&(He.position=Pe.styles.position),void 0!==Pe.styles.size&&"size"in He&&(He.size=Pe.styles.size)),He.onenter=function(){Fe.mode===B.default.TEXT_SHOWING&&m.trigger(y.default.CAPTION_RENDERED,{currentTrackIdx:w})}):((He=new x(Pe.start+Ee,Pe.end+Ee,"")).cueHTMLElement=Pe.cueHTMLElement,He.isd=Pe.isd,He.images=Pe.images,He.embeddedImages=Pe.embeddedImages,He.cueID=Pe.cueID,He.scaleCue=fe.bind(Oe),He.cellResolution=Pe.cellResolution,He.lineHeight=Pe.lineHeight,He.linePadding=Pe.linePadding,He.fontSize=Pe.fontSize,Q.style.left=P+"px",Q.style.top=f+"px",Q.style.width=R+"px",Q.style.height=V+"px",He.onenter=function(){Fe.mode===B.default.TEXT_SHOWING&&(this.isd?(ce(this),C.debug("Cue enter id:"+this.cueID)):(Q.appendChild(this.cueHTMLElement),fe.call(Oe,this),m.trigger(y.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:w})))},He.onexit=function(){if(Q)for(var Ue=Q.childNodes,Qe=0;Qe<Ue.length;++Qe)Ue[Qe].id===this.cueID&&(C.debug("Cue exit id:"+Ue[Qe].id),Q.removeChild(Ue[Qe]),--Qe)});try{He?E(Fe,He)||Fe.addCue(He):C.error("impossible to display subtitles.")}catch(Ue){throw U(Fe),Fe.addCue(He),Ue}}}function se(ye){return ye>=0&&O[ye]?h.getTextTrack(O[ye].kind,O[ye].id,O[ye].lang,O[ye].isTTML,O[ye].isEmbedded):null}function Y(ye){var Ee=this;if(ye!==w){var Ce=se(w=ye);H.call(this,Ce),$&&(clearInterval($),$=null),Ce&&"html"===Ce.renderingType&&(ge.call(this,Ce,!0),window.ResizeObserver?(oe=new window.ResizeObserver(function(){ge.call(Ee,Ce,!0)})).observe(h.getElement()):$=setInterval(ge.bind(this,Ce),500))}}function H(ye){z.call(this),ye&&"html"===ye.renderingType?Ie.call(this):le.call(this)}function E(ye,Ee){if(!ye.cues)return!1;for(var Ce=0;Ce<ye.cues.length;Ce++)if(ye.cues[Ce].startTime===Ee.startTime&&ye.cues[Ce].endTime===Ee.endTime)return!0;return!1}function I(ye,Ee,Ce){var Fe=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(isNaN(Ee)||(Fe?ye.startTime:ye.endTime)>=Ee)&&(isNaN(Ce)||(Fe?ye.endTime:ye.startTime)<=Ce)}function U(ye,Ee,Ce){var Fe=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(ye.cues)for(var Oe=ye.cues,He=Oe.length-1;He>=0;He--)I(Oe[He],Ee,Ce,Fe)&&(Oe[He].onexit&&Oe[He].onexit(),ye.removeCue(Oe[He]))}function Ie(){var ye=document.getElementById("native-cue-style");if(!ye){(ye=document.createElement("style")).id="native-cue-style",document.head.appendChild(ye);var Ee=ye.sheet,Ce=h.getElement();try{Ce&&Ee.insertRule(Ce.id?"#"+Ce.id+"::cue {background: transparent}":0!==Ce.classList.length?"."+Ce.className+"::cue {background: transparent}":"video::cue {background: transparent}",0)}catch(Fe){C.info(""+Fe.message)}}}function le(){var ye=document.getElementById("native-cue-style");ye&&document.head.removeChild(ye)}function z(){if(Q)for(;Q.firstChild;)Q.removeChild(Q.firstChild)}return S={initialize:function ue(){typeof window>"u"||typeof navigator>"u"||(x=window.VTTCue||window.TextTrackCue,O=[],N=[],w=-1,P=0,f=0,R=0,V=0,Q=null,$=null,te=!1,K=2147483647,X=null,void 0!==document.fullscreenElement?J="fullscreenElement":void 0!==document.webkitIsFullScreen?J="webkitIsFullScreen":document.msFullscreenElement?J="msFullscreenElement":document.mozFullScreen&&(J="mozFullScreen"))},getStreamId:function pe(){return g.id},addTextTrack:function ie(ye){O.push(ye)},addCaptions:de,createTracks:function me(){O.sort(function(Pe,Ue){return Pe.index-Ue.index}),Q=h.getTTMLRenderingDiv();for(var ye=-1,Ee=0;Ee<O.length;Ee++){var Ce=_e(O[Ee]);N.push(Ce),O[Ee].defaultTrack&&(Ce.default=!0,ye=Ee);var Fe=se(Ee);Fe&&(Fe.mode=B.default.TEXT_SHOWING,Fe.renderingType=Q&&(O[Ee].isTTML||O[Ee].isEmbedded)?"html":"default"),de(Ee,0,O[Ee].captionData),m.trigger(y.default.TEXT_TRACK_ADDED)}if(Y.call(this,ye),ye>=0){m.on(y.default.PLAYBACK_METADATA_LOADED,function Pe(){var Ue=se(ye);Ue&&"html"===Ue.renderingType&&ge.call(this,Ue,!0),m.off(y.default.PLAYBACK_METADATA_LOADED,Pe,this)},this);for(var Le=0;Le<O.length;Le++){var He=se(Le);He&&(He.mode=Le===ye?B.default.TEXT_SHOWING:B.default.TEXT_HIDDEN)}}m.trigger(M.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:w,tracks:O,streamId:g.id})},getCurrentTrackIdx:function ve(){return w},setCurrentTrackIdx:Y,getTrackIdxForId:function ne(ye){for(var Ee=-1,Ce=0;Ce<O.length;Ce++)if(O[Ce].id===ye){Ee=Ce;break}return Ee},getCurrentTrackInfo:function Te(){return O[w]},setModeForTrackIdx:function G(ye,Ee){var Ce=se(ye);Ce&&Ce.mode!==Ee&&(Ce.mode=Ee)},deleteCuesFromTrackIdx:function W(ye,Ee,Ce){var Fe=se(ye);Fe&&U(Fe,Ee,Ce)},deleteAllTextTracks:function re(){for(var ye=N?N.length:0,Ee=0;Ee<ye;Ee++){var Ce=se(Ee);Ce&&U.call(this,Ce,g.start,g.start+g.duration,!1)}N=[],O=[],$&&(clearInterval($),$=null),oe&&h&&(oe.unobserve(h.getElement()),oe=null),w=-1,z.call(this)},deleteTextTrack:function De(ye){h.removeChild(N[ye]),N.splice(ye,1)}},function ee(){C=Object(d.default)(F).getInstance().getLogger(S)}(),S}L.__dashjs_factory_name="TextTracks",k.default=D.default.getClassFactory(L)},"./src/streaming/thumbnail/ThumbnailController.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/constants/Constants.js"),M=u("./src/streaming/vo/Thumbnail.js"),y=u("./src/streaming/thumbnail/ThumbnailTracks.js"),D=u("./src/streaming/vo/BitrateInfo.js"),d=u("./src/dash/utils/SegmentsUtils.js");function v(p){var F,m,L=this.context,b=p.streamInfo;function O(f){m.setTrackByIndex(f)}function P(){m&&m.reset()}return F={getStreamId:function S(){return b.id},initialize:function g(){m.addTracks();var f=m.getTracks();f&&f.length>0&&O(0)},provide:function C(f,R){if("function"==typeof R){var $,V=m.getCurrentTrack();if(!V||V.segmentDuration<=0||null==f)return void R(null);($=m.getThumbnailRequestForTime(f))&&(V.segmentDuration=$.duration);var J=Math.floor(f%V.segmentDuration*V.tilesHor*V.tilesVert/V.segmentDuration),te=new M.default;if(te.width=Math.floor(V.widthPerTile),te.height=Math.floor(V.heightPerTile),te.x=Math.floor(J%V.tilesHor)*V.widthPerTile,te.y=Math.floor(J/V.tilesHor)*V.heightPerTile,"readThumbnail"in V)return V.readThumbnail(f,function(K){te.url=K,R(te)});if($)te.url=$.url,V.segmentDuration=NaN;else{var X=Math.floor(f/V.segmentDuration);te.url=function x(f,R){var V=R+f.startNumber,Q=Object(d.replaceTokenForTemplate)(f.templateUrl,"Number",V);return Q=Object(d.replaceTokenForTemplate)(Q,"Time",(V-1)*f.segmentDuration*f.timescale),Q=Object(d.replaceTokenForTemplate)(Q,"Bandwidth",f.bandwidth),Object(d.unescapeDollarsInTemplate)(Q)}(V,X)}R(te)}},setTrackByIndex:O,getCurrentTrackIndex:function N(){return m.getCurrentTrackIndex()},getBitrateList:function w(){var f=m.getTracks(),R=0;return f.map(function(V){var Q=new D.default;return Q.mediaType=_.default.IMAGE,Q.qualityIndex=R++,Q.bitrate=V.bitrate,Q.width=V.width,Q.height=V.height,Q})},reset:P},function h(){P(),m=Object(y.default)(L).create({streamInfo:b,adapter:p.adapter,baseURLController:p.baseURLController,timelineConverter:p.timelineConverter,debug:p.debug,eventBus:p.eventBus,events:p.events,dashConstants:p.dashConstants,dashMetrics:p.dashMetrics,segmentBaseController:p.segmentBaseController})}(),F}v.__dashjs_factory_name="ThumbnailController",k.default=B.default.getClassFactory(v)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(we,k,u){"use strict";u.r(k),u.d(k,"THUMBNAILS_SCHEME_ID_URIS",function(){return F});var B=u("./src/streaming/constants/Constants.js"),_=u("./src/dash/constants/DashConstants.js"),M=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/vo/ThumbnailTrackInfo.js"),D=u("./src/streaming/utils/URLUtils.js"),d=u("./src/dash/utils/SegmentsUtils.js"),v=u("./src/streaming/utils/BoxParser.js"),p=u("./src/streaming/net/XHRLoader.js"),L=u("./src/dash/DashHandler.js"),b=u("./src/dash/controllers/SegmentsController.js"),F=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function m(h){var V,Q,$,J,te,X,K,oe,g=this.context,S=h.adapter,C=h.baseURLController,x=h.streamInfo,O=h.timelineConverter,N=h.debug,w=h.eventBus,P=h.events,f=h.dashConstants,R=Object(D.default)(g).getInstance();function pe(ve,ne){var Y=new y.default;Y.id=ve.id,Y.bitrate=ve.bandwidth,Y.width=ve.width,Y.height=ve.height,Y.tilesHor=1,Y.tilesVert=1,ve.essentialProperties&&ve.essentialProperties.forEach(function(H){if(F.indexOf(H.schemeIdUri)>=0&&H.value){var E=H.value.split("x");2===E.length&&!isNaN(E[0])&&!isNaN(E[1])&&(Y.tilesHor=parseInt(E[0],10),Y.tilesVert=parseInt(E[1],10))}}),ne?X.updateSegmentData(ve).then(function(H){!function _e(ve,ne,Y){var H=[],E=function ie(ve,ne){var E,I,U,W,Y=[],H=0;for(E=0,I=ve.segments.length;E<I;E++)U=ve.segments[E],(W=Object(d.getTimeBasedSegment)(O,S.getIsDynamic(),ne,U.startTime,U.duration,U.timescale,U.media,U.mediaRange,H))&&(Y.push(W),W=null,H++);return Y}(Y,ne);ne.segments=E,ve.segmentDuration=ne.segments[0].duration,ve.readThumbnail=function(I,U){var W=null;H.some(function(re){if(re.start<=I&&re.end>I)return W=re.url,!0}),W?U(W):ne.segments.some(function(re){if(re.mediaStartTime<=I&&re.mediaStartTime+re.duration>I){var De=C.resolve(ne.path);return K.load({method:"get",url:De.url,request:{range:re.mediaRange,responseType:"arraybuffer"},onload:function(le){var z=oe.getSamplesInfo(le.target.response),G=new Blob([le.target.response.slice(z.sampleList[0].offset,z.sampleList[0].offset+z.sampleList[0].size)],{type:"image/jpeg"}),Te=window.URL.createObjectURL(G);H.push({start:re.mediaStartTime,end:re.mediaStartTime+re.duration,url:Te}),U&&U(Te)}}),!0}})}}(Y,ve,H)}):(Y.startNumber=ve.startNumber,Y.segmentDuration=ve.segmentDuration,Y.timescale=ve.timescale,Y.templateUrl=function me(ve){var ne=R.isRelative(ve.media)?R.resolve(ve.media,C.resolve(ve.path).url):ve.media;return ne?Object(d.replaceIDForTemplate)(ne,ve.id):""}(ve)),Y.tilesHor>0&&Y.tilesVert>0&&(Y.widthPerTile=Y.width/Y.tilesHor,Y.heightPerTile=Y.height/Y.tilesVert,Q.push(Y))}function se(){Q=[],J=-1,te=null}return V={getTracks:function ae(){return Q},addTracks:function ue(){if(x&&S&&(te=S.getMediaInfoForType(x,B.default.IMAGE))){var ve=S.getVoRepresentations(te);ve&&ve.length>0&&ve.forEach(function(ne){(ne.segmentInfoType===_.default.SEGMENT_TEMPLATE&&ne.segmentDuration>0&&ne.media||ne.segmentInfoType===_.default.SEGMENT_TIMELINE)&&pe(ne),ne.segmentInfoType===_.default.SEGMENT_BASE&&pe(ne,!0)}),Q.length>0&&Q.sort(function(ne,Y){return ne.bitrate-Y.bitrate})}},reset:se,setTrackByIndex:function ce(ve){!Q||0===Q.length||(ve>=Q.length&&(ve=Q.length-1),J=ve)},getCurrentTrack:function fe(){return J<0?null:Q[J]},getCurrentTrackIndex:function ge(){return J},getThumbnailRequestForTime:function de(ve){for(var ne,Y=S.getVoRepresentations(te),H=0;H<Y.length;H++)if(Q[J].id===Y[H].id){ne=Y[H];break}return $.getSegmentRequestForTime(te,ne,ve)}},function ee(){se(),K=Object(p.default)(g).create({}),oe=Object(v.default)(g).getInstance(),X=Object(b.default)(g).create({events:P,eventBus:w,streamInfo:x,timelineConverter:O,dashConstants:f,dashMetrics:h.dashMetrics,segmentBaseController:h.segmentBaseController,type:B.default.IMAGE}),($=Object(L.default)(g).create({streamInfo:x,type:B.default.IMAGE,timelineConverter:O,segmentsController:X,baseURLController:C,debug:N,eventBus:w,events:P,dashConstants:f,urlUtils:R})).initialize(!!S&&S.getIsDynamic())}(),V}m.__dashjs_factory_name="ThumbnailTracks",k.default=M.default.getClassFactory(m)},"./src/streaming/utils/BaseURLSelector.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/errors/Errors.js"),_=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),y=u("./src/streaming/controllers/BlacklistController.js"),D=u("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),d=u("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/streaming/vo/DashJSError.js"),L=u("./src/streaming/utils/SupervisorTools.js");function b(){var h,g,S,C,x,F=this.context,m=Object(_.default)(F).getInstance();function f(){g.reset()}return h={chooseSelector:function w(R){Object(L.checkParameterType)(R,"boolean"),x=R?C:S},select:function P(R){if(R){var V=R.baseUrls,Q=R.selectedIdx;if(!isNaN(Q))return V[Q];var $=x.select(V);return $?(R.selectedIdx=V.indexOf($),$):(m.trigger(M.default.URL_RESOLUTION_FAILED,{error:new p.default(B.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,B.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(x===S&&f()))}},reset:f,setConfig:function N(R){R.selector&&(x=R.selector)}},function O(){g=Object(y.default)(F).create({updateEventName:M.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:M.default.SERVICE_LOCATION_BLACKLIST_ADD}),S=Object(d.default)(F).create({blacklistController:g}),C=Object(D.default)(F).create({blacklistController:g}),x=S}(),h}b.__dashjs_factory_name="BaseURLSelector",k.default=v.default.getClassFactory(b)},"./src/streaming/utils/BoxParser.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/Debug.js"),_=u("./src/streaming/utils/IsoFile.js"),M=u("./src/core/FactoryMaker.js"),y=u("./node_modules/codem-isoboxer/dist/iso_boxer.js"),D=u.n(y),d=u("./src/streaming/vo/IsoBoxSearchInfo.js");function v(){var p,L,b=this.context;function m(w){if(!w)return null;void 0===w.fileStart&&(w.fileStart=0);var P=D.a.parseBuffer(w),f=Object(_.default)(b).create();return f.setData(P),f}function C(w,P){return w[P+3]>>>0|w[P+2]<<8>>>0|w[P+1]<<16>>>0|w[P]<<24>>>0}function x(w,P){return String.fromCharCode(w[P++])+String.fromCharCode(w[P++])+String.fromCharCode(w[P++])+String.fromCharCode(w[P])}return L={parse:m,findLastTopIsoBoxCompleted:function h(w,P,f){if(void 0===f&&(f=0),!P||f+8>=P.byteLength)return new d.default(0,!1);for(var V,R=P instanceof ArrayBuffer?new Uint8Array(P):P,Q=0;f<R.byteLength;){var $=C(R,f),J=x(R,f+4);if(0===$)break;f+$<=R.byteLength&&(w.indexOf(J)>=0?V=new d.default(f,!0,$):Q=f+$),f+=$}return V||new d.default(Q,!1)},getMediaTimescaleFromMoov:function S(w){var P=m(w),f=P?P.getBox("mdhd"):void 0;return f?f.timescale:NaN},getSamplesInfo:function g(w){if(!w||0===w.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var V,$,J,te,X,K,oe,ee,ue,pe,_e,ie,me,ae,ge,fe,P=m(w),f=P.getBoxes("moof"),R=P.getBoxes("mfhd");ge=P.getBoxes("moof").length,ae=R[R.length-1].sequence_number,$=0,X=[];var ce=-1,de=-1;for(pe=0;pe<f.length;pe++){var se=f[pe],ve=se.getChildBoxes("traf");for(ee=0;ee<ve.length;ee++){var ne=ve[ee],Y=ne.getChildBox("tfhd"),H=ne.getChildBox("tfdt");te=H.baseMediaDecodeTime;var E=ne.getChildBoxes("trun"),I=ne.getChildBoxes("subs");for(ue=0;ue<E.length;ue++){var U=E[ue];for($=U.sample_count,me=(Y.base_data_offset||0)+(U.data_offset||0),oe=0;oe<$;oe++){var W={dts:te,cts:te+(void 0!==(K=U.samples[oe]).sample_composition_time_offset?K.sample_composition_time_offset:0),duration:V=void 0!==K.sample_duration?K.sample_duration:Y.default_sample_duration,offset:se.offset+me,size:J=void 0!==K.sample_size?K.sample_size:Y.default_sample_size,subSizes:[J]};if(I)for(_e=0;_e<I.length;_e++){var re=I[_e];if(ce<re.entry_count-1&&oe>de&&(ce++,de+=re.entries[ce].sample_delta),oe==de){W.subSizes=[];var De=re.entries[ce];for(ie=0;ie<De.subsample_count;ie++)W.subSizes.push(De.subsamples[ie].subsample_size)}}X.push(W),me+=J,te+=V}}fe=te-H.baseMediaDecodeTime}}return{sampleList:X,lastSequenceNumber:ae,totalDuration:fe,numSequences:ge}},findInitRange:function O(w){var P=null,V=m(w);if(!V)return P;var Q=V.getBox("ftyp"),$=V.getBox("moov");return p.debug("Searching for initialization."),$&&$.isComplete&&p.debug("Found the initialization.  Range: "+(P=(Q?Q.offset:$.offset)+"-"+($.offset+$.size-1))),P},parsePayload:function N(w,P,f){if(void 0===f&&(f=0),!P||f+8>=P.byteLength)return new d.default(0,!1);for(var V,R=P instanceof ArrayBuffer?new Uint8Array(P):P,Q=0;f<R.byteLength;){var $=C(R,f),J=x(R,f+4);if(0===$)break;f+$<=R.byteLength&&(w.indexOf(J)>=0?V=new d.default(f,!0,$,J):Q=f+$),f+=$}return V||new d.default(Q,!1)}},function F(){p=Object(B.default)(b).getInstance().getLogger(L)}(),L}v.__dashjs_factory_name="BoxParser",k.default=M.default.getSingletonFactory(v)},"./src/streaming/utils/Capabilities.js":function(we,k,u){"use strict";u.r(k),u.d(k,"supportsMediaSource",function(){return D});var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/thumbnail/ThumbnailTracks.js"),M=u("./src/streaming/constants/Constants.js"),y=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function D(){var v="WebKitMediaSource"in window,p="MediaSource"in window;return v||p}function d(){var v,p,L;return v={setConfig:function F(w){!w||w.settings&&(p=w.settings)},supportsMediaSource:D,supportsEncryptedMedia:function m(){return L},supportsCodec:function g(w,P){return P!==M.default.AUDIO&&P!==M.default.VIDEO?Promise.resolve(!0):function S(w,P){return p.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(w.codec&&P===M.default.AUDIO||P===M.default.VIDEO&&w.codec&&w.width&&w.height&&w.bitrate&&w.framerate)}(w,P)?function x(w,P){return new Promise(function(f){if(w&&w.codec){var R={type:"media-source"};R[P]={},R[P].contentType=w.codec,R[P].width=w.width,R[P].height=w.height,R[P].bitrate=parseInt(w.bitrate),R[P].framerate=parseFloat(w.framerate),navigator.mediaCapabilities.decodingInfo(R).then(function(V){f(V.supported)}).catch(function(){f(!1)})}else f(!1)})}(w,P):function C(w){return new Promise(function(P){if(w&&w.codec){var f=w.codec;w.width&&w.height&&(f+=';width="'+w.width+'";height="'+w.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(f)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(f)?P(!0):P(!1)}else P(!1)})}(w)},setEncryptedMediaSupported:function h(w){L=w},supportsEssentialProperty:function O(w){try{return-1!==_.THUMBNAILS_SCHEME_ID_URIS.indexOf(w.schemeIdUri)}catch{return!0}},codecRootCompatibleWithCodec:function N(w,P){for(var V,f=w.split(".")[0],R=0===P.indexOf(f),Q=0;Q<y.length;Q++)if(y[Q].codec===f){V=y[Q];break}return V?R||V.compatibleCodecs.some(function($){return 0===P.indexOf($)}):R}},function b(){L=!1}(),v}d.__dashjs_factory_name="Capabilities",k.default=B.default.getSingletonFactory(d)},"./src/streaming/utils/CapabilitiesFilter.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js"),M=u("./src/streaming/constants/Constants.js"),y=u("./src/core/EventBus.js"),D=u("./src/core/events/Events.js");function d(){var L,b,F,m,h,g,v=this.context,p=Object(y.default)(v).getInstance();function O($,J){if(!J||!J.Period_asArray||0===J.Period_asArray.length)return Promise.resolve();var te=[];return J.Period_asArray.forEach(function(X){te.push(function N($,J){return new Promise(function(te){if($&&$.AdaptationSet_asArray&&0!==$.AdaptationSet_asArray.length){var X=[];$.AdaptationSet_asArray.forEach(function(K){b.getIsTypeOf(K,J)&&X.push(function w($,J){return new Promise(function(te){if($.Representation_asArray&&0!==$.Representation_asArray.length){var X=[],K=[];$.Representation_asArray.forEach(function(oe,ee){var ue=b.getCodec($,ee,!1),pe=function P($,J,te){switch($){case M.default.VIDEO:return function f($,J){return{codec:J,width:$.width||null,height:$.height||null,framerate:$.frameRate||null,bitrate:$.bandwidth||null}}(J,te);case M.default.AUDIO:return function R($,J){return{codec:J,bitrate:$.bandwidth||null,samplerate:$.audioSamplingRate||null}}(J,te);default:return null}}(J,oe,ue);K.push(pe),X.push(F.supportsCodec(pe,J))}),Promise.all(X).then(function(oe){$.Representation_asArray=$.Representation_asArray.filter(function(ee,ue){return oe[ue]||g.debug("[Stream] Codec ".concat(K[ue].codec," not supported ")),oe[ue]}),te()}).catch(function(){te()})}else te()})}(K,J))}),Promise.all(X).then(function(){$.AdaptationSet_asArray=$.AdaptationSet_asArray.filter(function(K){var oe=K.Representation_asArray&&K.Representation_asArray.length>0;return oe||(p.trigger(D.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:K}),g.warn("AdaptationSet has been removed because of no supported Representation")),oe}),te()}).catch(function(){te()})}else te()})}(X,$))}),Promise.all(te)}return L={setConfig:function C($){!$||($.adapter&&(b=$.adapter),$.capabilities&&(F=$.capabilities),$.settings&&(m=$.settings),$.customParametersModel&&(h=$.customParametersModel))},filterUnsupportedFeatures:function x($){return new Promise(function(J){var te=[];te.push(O(M.default.VIDEO,$)),te.push(O(M.default.AUDIO,$)),Promise.all(te).then(function(){m.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function V($){!$||!$.Period_asArray||0===$.Period_asArray.length||$.Period_asArray.forEach(function(J){J.AdaptationSet_asArray=J.AdaptationSet_asArray.filter(function(te){return!te.Representation_asArray||0===te.Representation_asArray.length||(te.Representation_asArray=te.Representation_asArray.filter(function(X){var K=b.getEssentialPropertiesForRepresentation(X);if(K&&K.length>0)for(var oe=0;oe<K.length;){if(!F.supportsEssentialProperty(K[oe]))return g.debug("[Stream] EssentialProperty not supported: "+K[oe].schemeIdUri),!1;oe+=1}return!0}),te.Representation_asArray&&te.Representation_asArray.length>0)})})}($),function Q($){var J=h.getCustomCapabilitiesFilters();!J||0===J.length||!$||!$.Period_asArray||0===$.Period_asArray.length||$.Period_asArray.forEach(function(te){te.AdaptationSet_asArray=te.AdaptationSet_asArray.filter(function(X){return!X.Representation_asArray||0===X.Representation_asArray.length||(X.Representation_asArray=X.Representation_asArray.filter(function(K){return!J.some(function(oe){return!oe(K)})}),X.Representation_asArray&&X.Representation_asArray.length>0)})})}($),J()}).catch(function(){J()})})}},function S(){g=Object(_.default)(v).getInstance().getLogger(L)}(),L}d.__dashjs_factory_name="CapabilitiesFilter",k.default=B.default.getSingletonFactory(d)},"./src/streaming/utils/CustomTimeRanges.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/utils/SupervisorTools.js");function M(){return{customTimeRangeArray:[],length:0,add:function d(m,h){var g=0;for(g=0;g<this.customTimeRangeArray.length&&m>this.customTimeRangeArray[g].start;g++);for(this.customTimeRangeArray.splice(g,0,{start:m,end:h}),g=0;g<this.customTimeRangeArray.length-1;g++)this.mergeRanges(g,g+1)&&g--;this.length=this.customTimeRangeArray.length},clear:function v(){this.customTimeRangeArray=[],this.length=0},remove:function p(m,h){for(var g=0;g<this.customTimeRangeArray.length;g++)if(m<=this.customTimeRangeArray[g].start&&h>=this.customTimeRangeArray[g].end)this.customTimeRangeArray.splice(g,1),g--;else{if(m>this.customTimeRangeArray[g].start&&h<this.customTimeRangeArray[g].end){this.customTimeRangeArray.splice(g+1,0,{start:h,end:this.customTimeRangeArray[g].end}),this.customTimeRangeArray[g].end=m;break}m>this.customTimeRangeArray[g].start&&m<this.customTimeRangeArray[g].end?this.customTimeRangeArray[g].end=m:h>this.customTimeRangeArray[g].start&&h<this.customTimeRangeArray[g].end&&(this.customTimeRangeArray[g].start=h)}this.length=this.customTimeRangeArray.length},mergeRanges:function L(m,h){var g=this.customTimeRangeArray[m],S=this.customTimeRangeArray[h];return g.start<=S.start&&S.start<=g.end&&g.end<=S.end?(g.end=S.end,this.customTimeRangeArray.splice(h,1),!0):S.start<=g.start&&g.start<=S.end&&S.end<=g.end?(g.start=S.start,this.customTimeRangeArray.splice(h,1),!0):S.start<=g.start&&g.start<=S.end&&g.end<=S.end?(this.customTimeRangeArray.splice(m,1),!0):g.start<=S.start&&S.start<=g.end&&S.end<=g.end&&(this.customTimeRangeArray.splice(h,1),!0)},start:function b(m){return Object(_.checkInteger)(m),m>=this.customTimeRangeArray.length||m<0?NaN:this.customTimeRangeArray[m].start},end:function F(m){return Object(_.checkInteger)(m),m>=this.customTimeRangeArray.length||m<0?NaN:this.customTimeRangeArray[m].end}}}M.__dashjs_factory_name="CustomTimeRanges",k.default=B.default.getClassFactory(M)},"./src/streaming/utils/DOMStorage.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js"),M=u("./src/streaming/constants/Constants.js"),y=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],D="dashjs_?_bitrate",d="dashjs_?_settings",v="localStorage",L="lastBitrate",b="lastMediaSettings";function F(h){var C,x,O,g=this.context,S=(h=h||{}).settings;function w(X){if(void 0!==O)return O;O=!1;var ee;try{typeof window<"u"&&(ee=window[X])}catch(ue){return x.warn("DOMStorage access denied: "+ue.message),O}if(!ee||X!==v&&"sessionStorage"!==X)return O;try{ee.setItem("1","1"),ee.removeItem("1"),O=!0}catch(ue){x.warn("DOMStorage is supported, but cannot be used: "+ue.message)}return O}function f(){var X=6e5;return Math.round((new Date).getTime()/X)*X}function R(X,K){return w(X)&&S.get().streaming[K+"CachingInfo"].enabled}function V(){if(!S)throw new Error(M.default.MISSING_CONFIG_ERROR)}return C={getSavedBitrateSettings:function $(X){var K=NaN;if(V(),R(v,L)){var oe=D.replace(/\?/,X);try{var ee=JSON.parse(localStorage.getItem(oe))||{},ue=(new Date).getTime()-parseInt(ee.timestamp,10)>=S.get().streaming.lastBitrateCachingInfo.ttl||!1,pe=parseFloat(ee.bitrate);isNaN(pe)||ue?ue&&localStorage.removeItem(oe):(K=pe,x.debug("Last saved bitrate for "+X+" was "+pe))}catch{return null}}return K},setSavedBitrateSettings:function te(X,K){if(R(v,L)&&K){var oe=D.replace(/\?/,X);try{localStorage.setItem(oe,JSON.stringify({bitrate:K.toFixed(3),timestamp:f()}))}catch(ee){x.error(ee.message)}}},getSavedMediaSettings:function Q(X){var K=null;if(V(),R(v,b)){var oe=d.replace(/\?/,X);try{var ee=JSON.parse(localStorage.getItem(oe))||{},ue=(new Date).getTime()-parseInt(ee.timestamp,10)>=S.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;K=ee.settings,ue&&(localStorage.removeItem(oe),K=null)}catch{return null}}return K},setSavedMediaSettings:function J(X,K){if(R(v,b)){var oe=d.replace(/\?/,X);try{localStorage.setItem(oe,JSON.stringify({settings:K,timestamp:f()}))}catch(ee){x.error(ee.message)}}}},function N(){x=Object(_.default)(g).getInstance().getLogger(C),function P(){w(v)&&y.forEach(function(X){var K=localStorage.getItem(X.oldKey);if(K){localStorage.removeItem(X.oldKey);try{localStorage.setItem(X.newKey,K)}catch(oe){x.error(oe.message)}}})}()}(),C}F.__dashjs_factory_name="DOMStorage";var m=B.default.getSingletonFactory(F);k.default=m},"./src/streaming/utils/DefaultURLUtils.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(){var M,y=/^[a-z][a-z0-9+\-_.]*:/i,D=/^https?:\/\//i,d=/^https:\/\//i,v=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,p=function(R,V){try{return new window.URL(R,V).toString()}catch{return R}},L=function(R,V){var Q=F;if(!V||!S(R))return R;C(R)&&(Q=m),x(R)&&(Q=g);var $=Q(V),J="/"!==$.charAt($.length-1)&&"/"!==R.charAt(0)?"/":"";return[$,R].join(J)};function F(f){var R=f.indexOf("/"),V=f.lastIndexOf("/");return-1!==R?V===R+1?f:(-1!==f.indexOf("?")&&(f=f.substring(0,f.indexOf("?"))),f.substring(0,V+1)):""}function m(f){var R=f.match(v);return R?R[1]:""}function g(f){var R=f.match(y);return R?R[0]:""}function S(f){return!y.test(f)}function C(f){return S(f)&&"/"===f.charAt(0)}function x(f){return 0===f.indexOf("//")}return function b(){try{new window.URL("x","http://y"),M=p}catch{}finally{M=M||L}}(),{parseBaseUrl:F,parseOrigin:m,parseScheme:g,isRelative:S,isPathAbsolute:C,isSchemeRelative:x,isHTTPURL:function O(f){return D.test(f)},isHTTPS:function N(f){return d.test(f)},removeHostname:function h(f){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(f)[2].substring(1)},resolve:function w(f,R){return M(f,R)}}}_.__dashjs_factory_name="DefaultURLUtils",k.default=B.default.getSingletonFactory(_)},"./src/streaming/utils/EBMLParser.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(M){M=M||{};var y,D=new DataView(M.data),d=0;function L(x,O){var N=!0,w=0;if(void 0===O&&(O=!1),x.tag>16777215?(D.getUint32(d)!==x.tag&&(N=!1),w=4):x.tag>65535?(256*D.getUint16(d)+D.getUint8(d+2)!==x.tag&&(N=!1),w=3):x.tag>255?(D.getUint16(d)!==x.tag&&(N=!1),w=2):(D.getUint8(d)!==x.tag&&(N=!1),w=1),!N&&x.required&&!O)throw new Error("required tag not found");return N&&(d+=w),N}function h(x){var O=1,N=128,P=-1,f=0,R=D.getUint8(d),V=0;for(V=0;V<8;V+=1){if((R&N)===N){f=void 0===x?R&~N:R,P=V;break}N>>=1}for(V=0;V<P;V+=1,O+=1)f=f<<8|255&D.getUint8(d+O);return d+=O,f}return y={getPos:function v(){return d},setPos:function p(x){d=x},consumeTag:L,consumeTagAndSize:function b(x,O){var N=L(x,O);return N&&h(),N},parseTag:function F(x){var O;return L(x),O=h(),y[x.parse](O)},skipOverElement:function m(x,O){var w,N=L(x,O);return N&&(w=h(),d+=w),N},getMatroskaCodedNum:h,getMatroskaFloat:function g(x){var O;switch(x){case 4:O=D.getFloat32(d),d+=4;break;case 8:O=D.getFloat64(d),d+=8}return O},getMatroskaUint:function S(x){for(var O=0,N=0;N<x;N+=1)O<<=8,O|=255&D.getUint8(d+N);return d+=x,O},moreData:function C(){return d<D.byteLength}}}_.__dashjs_factory_name="EBMLParser",k.default=B.default.getClassFactory(_)},"./src/streaming/utils/ErrorHandler.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/EventBus.js"),_=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js");function y(){var d=this.context,v=Object(B.default)(d).getInstance();return{error:function p(L){v.trigger(_.default.ERROR,{error:L})}}}y.__dashjs_factory_name="ErrorHandler",k.default=M.default.getSingletonFactory(y)},"./src/streaming/utils/InitCache.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(){var M={};return{save:function y(p){var L=p.streamId,b=p.representationId;M[L]=M[L]||{},M[L][b]=p},extract:function D(p,L){return M&&M[p]&&M[p][L]?M[p][L]:null},reset:function d(){M={}}}}_.__dashjs_factory_name="InitCache",k.default=B.default.getSingletonFactory(_)},"./src/streaming/utils/IsoFile.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/vo/IsoBox.js"),_=u("./src/core/FactoryMaker.js");function M(){var D;function v(F){var m=[];if(!F||!D||"function"!=typeof D.fetchAll)return m;for(var g,h=D.fetchAll(F),S=0,C=h.length;S<C;S++)(g=b(h[S]))&&m.push(g);return m}function b(F){if(!F)return null;var m=new B.default(F);return F.hasOwnProperty("_incomplete")&&(m.isComplete=!F._incomplete),m}return{getBox:function d(F){return F&&D&&D.boxes&&0!==D.boxes.length&&"function"==typeof D.fetch?b(D.fetch(F)):null},getBoxes:v,setData:function p(F){D=F},getLastBox:function L(){if(!D||!D.boxes||!D.boxes.length)return null;var m=v(D.boxes[D.boxes.length-1].type);return m.length>0?m[m.length-1]:null}}}M.__dashjs_factory_name="IsoFile",k.default=_.default.getClassFactory(M)},"./src/streaming/utils/ObjectUtils.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./node_modules/fast-deep-equal/index.js"),M=u.n(_);function y(){return{areEqual:function d(v,p){return M()(v,p)}}}y.__dashjs_factory_name="ObjectUtils",k.default=B.default.getSingletonFactory(y)},"./src/streaming/utils/RequestModifier.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(){return{modifyRequestURL:function y(d){return d},modifyRequestHeader:function D(d){return d}}}_.__dashjs_factory_name="RequestModifier",k.default=B.default.getSingletonFactory(_)},"./src/streaming/utils/SupervisorTools.js":function(we,k,u){"use strict";u.r(k),u.d(k,"checkParameterType",function(){return M}),u.d(k,"checkInteger",function(){return y}),u.d(k,"checkRange",function(){return D}),u.d(k,"checkIsVideoOrAudioType",function(){return d});var B=u("./src/streaming/constants/Constants.js");function _(v){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(v)}function M(v,p){if(_(v)!==p)throw B.default.BAD_ARGUMENT_ERROR}function y(v){if(null===v||isNaN(v)||v%1!=0)throw B.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function D(v,p,L){if(v<p||v>L)throw B.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function d(v){if("string"!=typeof v||v!==B.default.AUDIO&&v!==B.default.VIDEO)throw B.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js"),M=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),D=u("./node_modules/imsc/src/main/js/main.js"),v=u("./src/streaming/MediaPlayerEvents.js"),p=u("./src/streaming/constants/ConformanceViolationConstants.js");function L(){var m,h,b=this.context,F=Object(M.default)(b).getInstance(),g=0;function C(){var O="cue_TTML_"+g;return g++,O}return m={parse:function x(O,N,w,P,f){var Q,$,J,R="",V=[],te={},X={},K="",oe="",ee={onOpenTag:function(me,ae,ge){if(ge[" imagetype"]&&!ge[" imageType"]&&(F.trigger(v.default.CONFORMANCE_VIOLATION,{level:p.default.LEVELS.ERROR,event:p.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),ge[" imageType"]=ge[" imagetype"]),"image"===ae&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===me||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===me)){if(!ge[" imageType"]||"PNG"!==ge[" imageType"].value)return void h.warn("smpte-tt imageType != PNG. Discarded");K=ge["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){K&&(X[K]=oe.trim()),oe="",K=""},onText:function(me){K&&(oe+=me)}};if(!O)throw R="no ttml data to parse",new Error(R);te.data=O,F.trigger(y.default.TTML_TO_PARSE,te);var ue=Object(D.fromXML)(te.data,function(ie){R=ie},ee);F.trigger(y.default.TTML_PARSED,{ttmlString:te.data,ttmlDoc:ue});var pe=ue.getMediaTimeEvents();for(J=0;J<pe.length;J++){var _e=Object(D.generateISD)(ue,pe[J],function(ie){R=ie});_e.contents.some(function(ie){return ie.contents.length})&&(Q=pe[J]+N<w?w:pe[J]+N)<($=pe[J+1]+N>P?P:pe[J+1]+N)&&V.push({start:Q,end:$,type:"html",cueID:C(),isd:_e,images:f,embeddedImages:X})}if(""!==R)throw h.error(R),new Error(R);return V}},function S(){h=Object(_.default)(b).getInstance().getLogger(m)}(),m}L.__dashjs_factory_name="TTMLParser",k.default=B.default.getSingletonFactory(L)},"./src/streaming/utils/URLUtils.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/streaming/utils/DefaultURLUtils.js");function M(){var d,v=[],p=this.context;function m(R,V,Q){var $=function L(R){var V;for(V=0;V<v.length;V++)if(v[V].regex.test(R))return v[V].utils;return d}(Q||V);return $&&"function"==typeof $[R]?$[R](V,Q):d[R](V,Q)}return function b(){d=Object(_.default)(p).getInstance()}(),{registerUrlRegex:function F(R,V){v.push({regex:R,utils:V})},parseBaseUrl:function h(R){return m("parseBaseUrl",R)},parseOrigin:function g(R){return m("parseOrigin",R)},parseScheme:function C(R){return m("parseScheme",R)},isRelative:function x(R){return m("isRelative",R)},isPathAbsolute:function O(R){return m("isPathAbsolute",R)},isSchemeRelative:function N(R){return m("isSchemeRelative",R)},isHTTPURL:function w(R){return m("isHTTPURL",R)},isHTTPS:function P(R){return m("isHTTPS",R)},removeHostname:function S(R){return m("removeHostname",R)},resolve:function f(R,V){return m("resolve",R,V)}}}M.__dashjs_factory_name="URLUtils";var y=B.default.getSingletonFactory(M);k.default=y},"./src/streaming/utils/VTTParser.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js"),_=u("./src/core/Debug.js");function y(){var d,v,p,L,b,F,D=this.context;function g(O){var N=O.split(":"),w=N.length-1;return O=60*parseInt(N[w-1],10)+parseFloat(N[w]),2===w&&(O+=3600*parseInt(N[0],10)),O}function S(O){var N=O.split(L),w=N[1].split(F);return w.shift(),N[1]=w[0],w.shift(),{cuePoints:N,styles:C(w)}}function C(O){var N={};return O.forEach(function(w){if(w.split(/:/).length>1){var P=w.split(/:/)[1];P&&-1!=P.search(/%/)&&(P=parseInt(P.replace(/%/,""),10)),(w.match(/align/)||w.match(/A/))&&(N.align=P),(w.match(/line/)||w.match(/L/))&&(N.line=P),(w.match(/position/)||w.match(/P/))&&(N.position=P),(w.match(/size/)||w.match(/S/))&&(N.size=P)}}),N}function x(O,N){for(var R,w=N,P="",f="";""!==O[w]&&w<O.length;)w++;if((R=w-N)>1)for(var V=0;V<R;V++){if((f=O[N+V]).match(L)){P="";break}P+=f,V!==R-1&&(P+="\n")}else(f=O[N]).match(L)||(P=f);return P}return d={parse:function h(O){var w,P,N=[];if(!O)return N;w=(O=O.split(p)).length,P=-1;for(var f=0;f<w;f++){var R=O[f];if(R.length>0&&"WEBVTT"!==R&&R.match(L)){var V=S(R),Q=V.cuePoints,$=V.styles,J=x(O,f+1),te=g(Q[0].replace(b,"")),X=g(Q[1].replace(b,""));!isNaN(te)&&!isNaN(X)&&te>=P&&X>te?""!==J?(P=te,N.push({start:te,end:X,data:J,styles:$})):v.error("Skipping cue due to empty/malformed cue text"):v.error("Skipping cue due to incorrect cue timing")}}return N}},function m(){v=Object(_.default)(D).getInstance().getLogger(d),p=/(?:\r\n|\r|\n)/gm,L=/-->/,b=/(^[\s]+|[\s]+$)/g,F=/\s\b/g}(),d}y.__dashjs_factory_name="VTTParser",k.default=B.default.getSingletonFactory(y)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(M){var D=(M=M||{}).blacklistController;return{select:function d(v){var L,p=0;return v&&v.some(function(b,F){return p=F,!D.contains(b.serviceLocation)})&&(L=v[p]),L}}}_.__dashjs_factory_name="BasicSelector",k.default=B.default.getClassFactory(_)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/core/FactoryMaker.js");function _(M){var D=(M=M||{}).blacklistController;return{select:function p(L){return L&&function v(L){var S,C,m=0,h=[],g=0;if((C=L.sort(function(O,N){var w=O.dvb_priority-N.dvb_priority;return isNaN(w)?0:w}).filter(function(O,N,w){return!N||w[0].dvb_priority&&O.dvb_priority&&w[0].dvb_priority===O.dvb_priority})).length)return C.length>1&&(C.forEach(function(x){h.push(m+=x.dvb_weight)}),S=Math.floor(Math.random()*(m-1)),h.every(function(x,O){return g=O,!(S<x)})),C[g]}(function d(L){var b=[];return L.filter(function(g){return!D.contains(g.serviceLocation)||(g.dvb_priority&&b.push(g.dvb_priority),!1)}).filter(function(g){return!(b.length&&g.dvb_priority&&-1!==b.indexOf(g.dvb_priority))})}(L))}}}_.__dashjs_factory_name="DVBSelector",k.default=B.default.getClassFactory(_)},"./src/streaming/vo/BitrateInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}},"./src/streaming/vo/DashJSError.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D,d){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.code=y||null,this.message=D||null,this.data=d||null}},"./src/streaming/vo/DataChunk.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},"./src/streaming/vo/FragmentRequest.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/vo/metrics/HTTPRequest.js");function M(d,v){for(var p=0;p<v.length;p++){var L=v[p];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(d,L.key,L)}}var D=function(){function d(v){(function _(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.action=d.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=v||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}return function y(d,v,p){return v&&M(d.prototype,v),p&&M(d,p),d}(d,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===B.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(p){this.type=p&&p.init?B.HTTPRequest.INIT_SEGMENT_TYPE:B.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=p&&p.url?p.url:null,this.range=p&&p.range?p.range.start+"-"+p.range.end:null,this.mediaType=p&&p.mediaType?p.mediaType:null}}]),d}();D.ACTION_DOWNLOAD="download",D.ACTION_COMPLETE="complete",k.default=D},"./src/streaming/vo/HeadRequest.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/vo/FragmentRequest.js");function _(m){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function y(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),h&&D(m,h)}function D(m,h){return(D=Object.setPrototypeOf||function(S,C){return S.__proto__=C,S})(m,h)}function d(m){var h=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var C,S=b(m);if(h){var x=b(this).constructor;C=Reflect.construct(S,arguments,x)}else C=S.apply(this,arguments);return v(this,C)}}function v(m,h){return!h||"object"!==_(h)&&"function"!=typeof h?function p(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(m):h}function b(m){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}k.default=function(m){y(g,m);var h=d(g);function g(S){var C;return function M(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}(this,g),(C=h.call(this,S)).checkForExistenceOnly=!0,C}return g}(B.default)},"./src/streaming/vo/IsoBox.js":function(we,k,u){"use strict";function _(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d){if(function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D),this.offset=d._offset,this.type=d.type,this.size=d.size,this.boxes=[],d.boxes)for(var v=0;v<d.boxes.length;v++)this.boxes.push(new D(d.boxes[v]));switch(this.isComplete=!0,d.type){case"sidx":if(this.timescale=d.timescale,this.earliest_presentation_time=d.earliest_presentation_time,this.first_offset=d.first_offset,this.references=d.references,d.references){this.references=[];for(var p=0;p<d.references.length;p++)this.references.push({reference_type:d.references[p].reference_type,referenced_size:d.references[p].referenced_size,subsegment_duration:d.references[p].subsegment_duration})}break;case"emsg":this.id=d.id,this.version=1===d.version?1:0,this.value=d.value,this.timescale=d.timescale,this.scheme_id_uri=d.scheme_id_uri,this.presentation_time_delta=1===d.version?d.presentation_time:d.presentation_time_delta,this.event_duration=d.event_duration,this.message_data=d.message_data;break;case"mdhd":this.timescale=d.timescale;break;case"mfhd":this.sequence_number=d.sequence_number;break;case"subs":this.entry_count=d.entry_count,this.entries=d.entries;break;case"tfhd":this.base_data_offset=d.base_data_offset,this.sample_description_index=d.sample_description_index,this.default_sample_duration=d.default_sample_duration,this.default_sample_size=d.default_sample_size,this.default_sample_flags=d.default_sample_flags,this.flags=d.flags;break;case"tfdt":this.version=d.version,this.baseMediaDecodeTime=d.baseMediaDecodeTime,this.flags=d.flags;break;case"trun":if(this.sample_count=d.sample_count,this.first_sample_flags=d.first_sample_flags,this.data_offset=d.data_offset,this.flags=d.flags,this.samples=d.samples,d.samples){this.samples=[];for(var b=0,F=d.samples.length;b<F;b++)this.samples.push({sample_size:d.samples[b].sample_size,sample_duration:d.samples[b].sample_duration,sample_composition_time_offset:d.samples[b].sample_composition_time_offset})}}}return function M(D,d,v){return d&&_(D.prototype,d),v&&_(D,v),D}(D,[{key:"getChildBox",value:function(v){for(var p=0;p<this.boxes.length;p++)if(this.boxes[p].type===v)return this.boxes[p]}},{key:"getChildBoxes",value:function(v){for(var p=[],L=0;L<this.boxes.length;L++)this.boxes[L].type===v&&p.push(this.boxes[L]);return p}}]),D}()},"./src/streaming/vo/IsoBoxSearchInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(y,D,d){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.lastCompletedOffset=y,this.found=D,this.size=d}},"./src/streaming/vo/MetricsList.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},"./src/streaming/vo/TextRequest.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/Constants.js"),_=u("./src/streaming/vo/FragmentRequest.js");function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function D(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&d(h,g)}function d(h,g){return(d=Object.setPrototypeOf||function(C,x){return C.__proto__=x,C})(h,g)}function v(h){var g=function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var x,C=F(h);if(g){var O=F(this).constructor;x=Reflect.construct(C,arguments,O)}else x=C.apply(this,arguments);return p(this,x)}}function p(h,g){return!g||"object"!==M(g)&&"function"!=typeof g?function L(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function F(h){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}k.default=function(h){D(S,h);var g=v(S);function S(C,x){var O;return function y(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(O=g.call(this)).url=C||null,O.type=x||null,O.mediaType=B.default.STREAM,O.responseType="",O}return S}(_.default)},"./src/streaming/vo/TextTrackInfo.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/dash/vo/MediaInfo.js");function _(m){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function y(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),h&&D(m,h)}function D(m,h){return(D=Object.setPrototypeOf||function(S,C){return S.__proto__=C,S})(m,h)}function d(m){var h=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var C,S=b(m);if(h){var x=b(this).constructor;C=Reflect.construct(S,arguments,x)}else C=S.apply(this,arguments);return v(this,C)}}function v(m,h){return!h||"object"!==_(h)&&"function"!=typeof h?function p(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(m):h}function b(m){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}k.default=function(m){y(g,m);var h=d(g);function g(){var S;return function M(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}(this,g),(S=h.call(this)).captionData=null,S.label=null,S.defaultTrack=!1,S.kind=null,S.isFragmented=!1,S.isEmbedded=!1,S.isTTML=null,S}return g}(B.default)},"./src/streaming/vo/Thumbnail.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},"./src/streaming/vo/ThumbnailTrackInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},"./src/streaming/vo/URIFragmentData.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}},"./src/streaming/vo/metrics/BufferLevel.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.t=null,this.level=null}},"./src/streaming/vo/metrics/BufferState.js":function(we,k,u){"use strict";u.r(k);var B=u("./src/streaming/constants/MetricsConstants.js");k.default=function y(){(function _(y,D){if(!(y instanceof D))throw new TypeError("Cannot call a class as a function")})(this,y),this.target=null,this.state=B.default.BUFFER_EMPTY}},"./src/streaming/vo/metrics/DVRInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.time=null,this.range=null,this.manifestInfo=null}},"./src/streaming/vo/metrics/DroppedFrames.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.time=null,this.droppedFrames=null}},"./src/streaming/vo/metrics/HTTPRequest.js":function(we,k,u){"use strict";function B(y,D){if(!(y instanceof D))throw new TypeError("Cannot call a class as a function")}u.r(k),u.d(k,"HTTPRequest",function(){return _}),u.d(k,"HTTPRequestTrace",function(){return M});var _=function y(){B(this,y),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},M=function y(){B(this,y),this.s=null,this.d=null,this.b=[],this._t=null};_.GET="GET",_.HEAD="HEAD",_.MPD_TYPE="MPD",_.XLINK_EXPANSION_TYPE="XLinkExpansion",_.INIT_SEGMENT_TYPE="InitializationSegment",_.INDEX_SEGMENT_TYPE="IndexSegment",_.MEDIA_SEGMENT_TYPE="MediaSegment",_.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",_.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",_.DVB_REPORTING_TYPE="DVBReporting",_.LICENSE="license",_.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(we,k,u){"use strict";function B(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}u.r(k),u.d(k,"ManifestUpdate",function(){return _}),u.d(k,"ManifestUpdateStreamInfo",function(){return M}),u.d(k,"ManifestUpdateRepresentationInfo",function(){return y});var _=function D(){B(this,D),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},M=function D(){B(this,D),this.id=null,this.index=null,this.start=null,this.duration=null},y=function D(){B(this,D),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},"./src/streaming/vo/metrics/PlayList.js":function(we,k,u){"use strict";function B(y,D){if(!(y instanceof D))throw new TypeError("Cannot call a class as a function")}u.r(k),u.d(k,"PlayList",function(){return _}),u.d(k,"PlayListTrace",function(){return M});var _=function y(){B(this,y),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};_.INITIAL_PLAYOUT_START_REASON="initial_playout",_.SEEK_START_REASON="seek",_.RESUME_FROM_PAUSE_START_REASON="resume",_.METRICS_COLLECTION_START_REASON="metrics_collection_start";var M=function y(){B(this,y),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};M.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",M.REBUFFERING_REASON="rebuffering",M.USER_REQUEST_STOP_REASON="user_request",M.END_OF_PERIOD_STOP_REASON="end_of_period",M.END_OF_CONTENT_STOP_REASON="end_of_content",M.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",M.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.t=null,this.mt=null,this.to=null,this.lto=null}},"./src/streaming/vo/metrics/RequestsQueue.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.loadingRequests=[],this.executedRequests=[]}},"./src/streaming/vo/metrics/SchedulingInfo.js":function(we,k,u){"use strict";u.r(k),k.default=function M(){(function B(M,y){if(!(M instanceof y))throw new TypeError("Cannot call a class as a function")})(this,M),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}},0:function(we,k){},1:function(we,k){}}).default},386:(Es,we,k)=>{var u;!function(B,_,M,y){"use strict";var S,D=["","webkit","Moz","MS","ms","o"],d=_.createElement("div"),p=Math.round,L=Math.abs,b=Date.now;function F(Me,be,Ke){return setTimeout(N(Me,Ke),be)}function m(Me,be,Ke){return!!Array.isArray(Me)&&(h(Me,Ke[be],Ke),!0)}function h(Me,be,Ke){var it;if(Me)if(Me.forEach)Me.forEach(be,Ke);else if(Me.length!==y)for(it=0;it<Me.length;)be.call(Ke,Me[it],it,Me),it++;else for(it in Me)Me.hasOwnProperty(it)&&be.call(Ke,Me[it],it,Me)}function g(Me,be,Ke){var it="DEPRECATED METHOD: "+be+"\n"+Ke+" AT \n";return function(){var It=new Error("get-stack-trace"),zt=It&&It.stack?It.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Tn=B.console&&(B.console.warn||B.console.log);return Tn&&Tn.call(B.console,it,zt),Me.apply(this,arguments)}}S="function"!=typeof Object.assign?function(be){if(be===y||null===be)throw new TypeError("Cannot convert undefined or null to object");for(var Ke=Object(be),it=1;it<arguments.length;it++){var It=arguments[it];if(It!==y&&null!==It)for(var zt in It)It.hasOwnProperty(zt)&&(Ke[zt]=It[zt])}return Ke}:Object.assign;var C=g(function(be,Ke,it){for(var It=Object.keys(Ke),zt=0;zt<It.length;)(!it||it&&be[It[zt]]===y)&&(be[It[zt]]=Ke[It[zt]]),zt++;return be},"extend","Use `assign`."),x=g(function(be,Ke){return C(be,Ke,!0)},"merge","Use `assign`.");function O(Me,be,Ke){var It,it=be.prototype;(It=Me.prototype=Object.create(it)).constructor=Me,It._super=it,Ke&&S(It,Ke)}function N(Me,be){return function(){return Me.apply(be,arguments)}}function w(Me,be){return"function"==typeof Me?Me.apply(be&&be[0]||y,be):Me}function P(Me,be){return Me===y?be:Me}function f(Me,be,Ke){h($(be),function(it){Me.addEventListener(it,Ke,!1)})}function R(Me,be,Ke){h($(be),function(it){Me.removeEventListener(it,Ke,!1)})}function V(Me,be){for(;Me;){if(Me==be)return!0;Me=Me.parentNode}return!1}function Q(Me,be){return Me.indexOf(be)>-1}function $(Me){return Me.trim().split(/\s+/g)}function J(Me,be,Ke){if(Me.indexOf&&!Ke)return Me.indexOf(be);for(var it=0;it<Me.length;){if(Ke&&Me[it][Ke]==be||!Ke&&Me[it]===be)return it;it++}return-1}function te(Me){return Array.prototype.slice.call(Me,0)}function X(Me,be,Ke){for(var it=[],It=[],zt=0;zt<Me.length;){var Tn=be?Me[zt][be]:Me[zt];J(It,Tn)<0&&it.push(Me[zt]),It[zt]=Tn,zt++}return Ke&&(it=be?it.sort(function(Yn,Wn){return Yn[be]>Wn[be]}):it.sort()),it}function K(Me,be){for(var Ke,it,It=be[0].toUpperCase()+be.slice(1),zt=0;zt<D.length;){if((it=(Ke=D[zt])?Ke+It:be)in Me)return it;zt++}return y}var oe=1;function ue(Me){var be=Me.ownerDocument||Me;return be.defaultView||be.parentWindow||B}var _e="ontouchstart"in B,ie=K(B,"PointerEvent")!==y,me=_e&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ae="touch",fe="mouse",le=["x","y"],z=["clientX","clientY"];function G(Me,be){var Ke=this;this.manager=Me,this.callback=be,this.element=Me.element,this.target=Me.options.inputTarget,this.domHandler=function(it){w(Me.options.enable,[Me])&&Ke.handler(it)},this.init()}function ye(Me,be,Ke){var it=Ke.pointers.length,It=Ke.changedPointers.length,zt=1&be&&it-It==0,Tn=12&be&&it-It==0;Ke.isFirst=!!zt,Ke.isFinal=!!Tn,zt&&(Me.session={}),Ke.eventType=be,function Ee(Me,be){var Ke=Me.session,it=be.pointers,It=it.length;Ke.firstInput||(Ke.firstInput=Oe(be)),It>1&&!Ke.firstMultiple?Ke.firstMultiple=Oe(be):1===It&&(Ke.firstMultiple=!1);var zt=Ke.firstInput,Tn=Ke.firstMultiple,Gn=Tn?Tn.center:zt.center,Yn=be.center=Le(it);be.timeStamp=b(),be.deltaTime=be.timeStamp-zt.timeStamp,be.angle=Qe(Gn,Yn),be.distance=Ue(Gn,Yn),function Ce(Me,be){var Ke=be.center,it=Me.offsetDelta||{},It=Me.prevDelta||{},zt=Me.prevInput||{};(1===be.eventType||4===zt.eventType)&&(It=Me.prevDelta={x:zt.deltaX||0,y:zt.deltaY||0},it=Me.offsetDelta={x:Ke.x,y:Ke.y}),be.deltaX=It.x+(Ke.x-it.x),be.deltaY=It.y+(Ke.y-it.y)}(Ke,be),be.offsetDirection=Pe(be.deltaX,be.deltaY);var Wn=He(be.deltaTime,be.deltaX,be.deltaY);be.overallVelocityX=Wn.x,be.overallVelocityY=Wn.y,be.overallVelocity=L(Wn.x)>L(Wn.y)?Wn.x:Wn.y,be.scale=Tn?function lt(Me,be){return Ue(be[0],be[1],z)/Ue(Me[0],Me[1],z)}(Tn.pointers,it):1,be.rotation=Tn?function ft(Me,be){return Qe(be[1],be[0],z)+Qe(Me[1],Me[0],z)}(Tn.pointers,it):0,be.maxPointers=Ke.prevInput?be.pointers.length>Ke.prevInput.maxPointers?be.pointers.length:Ke.prevInput.maxPointers:be.pointers.length,function Fe(Me,be){var It,zt,Tn,Gn,Ke=Me.lastInterval||be,it=be.timeStamp-Ke.timeStamp;if(8!=be.eventType&&(it>25||Ke.velocity===y)){var Yn=be.deltaX-Ke.deltaX,Wn=be.deltaY-Ke.deltaY,yr=He(it,Yn,Wn);zt=yr.x,Tn=yr.y,It=L(yr.x)>L(yr.y)?yr.x:yr.y,Gn=Pe(Yn,Wn),Me.lastInterval=be}else It=Ke.velocity,zt=Ke.velocityX,Tn=Ke.velocityY,Gn=Ke.direction;be.velocity=It,be.velocityX=zt,be.velocityY=Tn,be.direction=Gn}(Ke,be);var yr=Me.element;V(be.srcEvent.target,yr)&&(yr=be.srcEvent.target),be.target=yr}(Me,Ke),Me.emit("hammer.input",Ke),Me.recognize(Ke),Me.session.prevInput=Ke}function Oe(Me){for(var be=[],Ke=0;Ke<Me.pointers.length;)be[Ke]={clientX:p(Me.pointers[Ke].clientX),clientY:p(Me.pointers[Ke].clientY)},Ke++;return{timeStamp:b(),pointers:be,center:Le(be),deltaX:Me.deltaX,deltaY:Me.deltaY}}function Le(Me){var be=Me.length;if(1===be)return{x:p(Me[0].clientX),y:p(Me[0].clientY)};for(var Ke=0,it=0,It=0;It<be;)Ke+=Me[It].clientX,it+=Me[It].clientY,It++;return{x:p(Ke/be),y:p(it/be)}}function He(Me,be,Ke){return{x:be/Me||0,y:Ke/Me||0}}function Pe(Me,be){return Me===be?1:L(Me)>=L(be)?Me<0?2:4:be<0?8:16}function Ue(Me,be,Ke){Ke||(Ke=le);var it=be[Ke[0]]-Me[Ke[0]],It=be[Ke[1]]-Me[Ke[1]];return Math.sqrt(it*it+It*It)}function Qe(Me,be,Ke){return Ke||(Ke=le),180*Math.atan2(be[Ke[1]]-Me[Ke[1]],be[Ke[0]]-Me[Ke[0]])/Math.PI}G.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(ue(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&R(this.element,this.evEl,this.domHandler),this.evTarget&&R(this.target,this.evTarget,this.domHandler),this.evWin&&R(ue(this.element),this.evWin,this.domHandler)}};var Dt={mousedown:1,mousemove:2,mouseup:4},Ft="mousedown",Ht="mousemove mouseup";function Jt(){this.evEl=Ft,this.evWin=Ht,this.pressed=!1,G.apply(this,arguments)}O(Jt,G,{handler:function(be){var Ke=Dt[be.type];1&Ke&&0===be.button&&(this.pressed=!0),2&Ke&&1!==be.which&&(Ke=4),this.pressed&&(4&Ke&&(this.pressed=!1),this.callback(this.manager,Ke,{pointers:[be],changedPointers:[be],pointerType:fe,srcEvent:be}))}});var sn={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},on={2:ae,3:"pen",4:fe,5:"kinect"},je="pointerdown",xe="pointermove pointerup pointercancel";function Se(){this.evEl=je,this.evWin=xe,G.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}B.MSPointerEvent&&!B.PointerEvent&&(je="MSPointerDown",xe="MSPointerMove MSPointerUp MSPointerCancel"),O(Se,G,{handler:function(be){var Ke=this.store,it=!1,It=be.type.toLowerCase().replace("ms",""),zt=sn[It],Tn=on[be.pointerType]||be.pointerType,Gn=Tn==ae,Yn=J(Ke,be.pointerId,"pointerId");1&zt&&(0===be.button||Gn)?Yn<0&&(Ke.push(be),Yn=Ke.length-1):12&zt&&(it=!0),!(Yn<0)&&(Ke[Yn]=be,this.callback(this.manager,zt,{pointers:Ke,changedPointers:[be],pointerType:Tn,srcEvent:be}),it&&Ke.splice(Yn,1))}});var ke={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ze="touchstart",at="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=Ze,this.evWin=at,this.started=!1,G.apply(this,arguments)}function et(Me,be){var Ke=te(Me.touches),it=te(Me.changedTouches);return 12&be&&(Ke=X(Ke.concat(it),"identifier",!0)),[Ke,it]}O(dt,G,{handler:function(be){var Ke=ke[be.type];if(1===Ke&&(this.started=!0),this.started){var it=et.call(this,be,Ke);12&Ke&&it[0].length-it[1].length==0&&(this.started=!1),this.callback(this.manager,Ke,{pointers:it[0],changedPointers:it[1],pointerType:ae,srcEvent:be})}}});var pt={touchstart:1,touchmove:2,touchend:4,touchcancel:8},jt="touchstart touchmove touchend touchcancel";function Rt(){this.evTarget=jt,this.targetIds={},G.apply(this,arguments)}function Yt(Me,be){var Ke=te(Me.touches),it=this.targetIds;if(3&be&&1===Ke.length)return it[Ke[0].identifier]=!0,[Ke,Ke];var It,zt,Tn=te(Me.changedTouches),Gn=[],Yn=this.target;if(zt=Ke.filter(function(Wn){return V(Wn.target,Yn)}),1===be)for(It=0;It<zt.length;)it[zt[It].identifier]=!0,It++;for(It=0;It<Tn.length;)it[Tn[It].identifier]&&Gn.push(Tn[It]),12&be&&delete it[Tn[It].identifier],It++;return Gn.length?[X(zt.concat(Gn),"identifier",!0),Gn]:void 0}function nt(){G.apply(this,arguments);var Me=N(this.handler,this);this.touch=new Rt(this.manager,Me),this.mouse=new Jt(this.manager,Me),this.primaryTouch=null,this.lastTouches=[]}function Ot(Me,be){1&Me?(this.primaryTouch=be.changedPointers[0].identifier,Mt.call(this,be)):12&Me&&Mt.call(this,be)}function Mt(Me){var be=Me.changedPointers[0];if(be.identifier===this.primaryTouch){var Ke={x:be.clientX,y:be.clientY};this.lastTouches.push(Ke);var it=this.lastTouches;setTimeout(function(){var zt=it.indexOf(Ke);zt>-1&&it.splice(zt,1)},2500)}}function wt(Me){for(var be=Me.srcEvent.clientX,Ke=Me.srcEvent.clientY,it=0;it<this.lastTouches.length;it++){var It=this.lastTouches[it],zt=Math.abs(be-It.x),Tn=Math.abs(Ke-It.y);if(zt<=25&&Tn<=25)return!0}return!1}O(Rt,G,{handler:function(be){var Ke=pt[be.type],it=Yt.call(this,be,Ke);!it||this.callback(this.manager,Ke,{pointers:it[0],changedPointers:it[1],pointerType:ae,srcEvent:be})}}),O(nt,G,{handler:function(be,Ke,it){var zt=it.pointerType==fe;if(!(zt&&it.sourceCapabilities&&it.sourceCapabilities.firesTouchEvents)){if(it.pointerType==ae)Ot.call(this,Ke,it);else if(zt&&wt.call(this,it))return;this.callback(be,Ke,it)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var an=K(d.style,"touchAction"),ct=an!==y,Vt="compute",Xe="manipulation",Et="none",tt="pan-x",rt="pan-y",yt=function Qt(){if(!ct)return!1;var Me={},be=B.CSS&&B.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Ke){Me[Ke]=!be||B.CSS.supports("touch-action",Ke)}),Me}();function $t(Me,be){this.manager=Me,this.set(be)}function Ut(Me){this.options=S({},this.defaults,Me||{}),this.id=function ee(){return oe++}(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ge(Me){return 16&Me?"cancel":8&Me?"end":4&Me?"move":2&Me?"start":""}function Nt(Me){return 16==Me?"down":8==Me?"up":2==Me?"left":4==Me?"right":""}function Tt(Me,be){var Ke=be.manager;return Ke?Ke.get(Me):Me}function nn(){Ut.apply(this,arguments)}function Mn(){nn.apply(this,arguments),this.pX=null,this.pY=null}function Ln(){nn.apply(this,arguments)}function Kt(){Ut.apply(this,arguments),this._timer=null,this._input=null}function In(){nn.apply(this,arguments)}function pr(){nn.apply(this,arguments)}function At(){Ut.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Kn(Me,be){return(be=be||{}).recognizers=P(be.recognizers,Kn.defaults.preset),new Ei(Me,be)}function Ei(Me,be){this.options=S({},Kn.defaults,be||{}),this.options.inputTarget=this.options.inputTarget||Me,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Me,this.input=function Te(Me){return new(Me.options.inputClass||(ie?Se:me?Rt:_e?nt:Jt))(Me,ye)}(this),this.touchAction=new $t(this,this.options.touchAction),Ur(this,!0),h(this.options.recognizers,function(Ke){var it=this.add(new Ke[0](Ke[1]));Ke[2]&&it.recognizeWith(Ke[2]),Ke[3]&&it.requireFailure(Ke[3])},this)}function Ur(Me,be){var it,Ke=Me.element;Ke.style&&(h(Me.options.cssProps,function(It,zt){it=K(Ke.style,zt),be?(Me.oldCssProps[it]=Ke.style[it],Ke.style[it]=It):Ke.style[it]=Me.oldCssProps[it]||""}),be||(Me.oldCssProps={}))}$t.prototype={set:function(Me){Me==Vt&&(Me=this.compute()),ct&&this.manager.element.style&&yt[Me]&&(this.manager.element.style[an]=Me),this.actions=Me.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Me=[];return h(this.manager.recognizers,function(be){w(be.options.enable,[be])&&(Me=Me.concat(be.getTouchAction()))}),function ln(Me){if(Q(Me,Et))return Et;var be=Q(Me,tt),Ke=Q(Me,rt);return be&&Ke?Et:be||Ke?be?tt:rt:Q(Me,Xe)?Xe:"auto"}(Me.join(" "))},preventDefaults:function(Me){var be=Me.srcEvent,Ke=Me.offsetDirection;if(!this.manager.session.prevented){var it=this.actions,It=Q(it,Et)&&!yt[Et],zt=Q(it,rt)&&!yt[rt],Tn=Q(it,tt)&&!yt[tt];if(It&&1===Me.pointers.length&&Me.distance<2&&Me.deltaTime<250)return;return Tn&&zt||!(It||zt&&6&Ke||Tn&&24&Ke)?void 0:this.preventSrc(be)}be.preventDefault()},preventSrc:function(Me){this.manager.session.prevented=!0,Me.preventDefault()}},Ut.prototype={defaults:{},set:function(Me){return S(this.options,Me),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Me){if(m(Me,"recognizeWith",this))return this;var be=this.simultaneous;return be[(Me=Tt(Me,this)).id]||(be[Me.id]=Me,Me.recognizeWith(this)),this},dropRecognizeWith:function(Me){return m(Me,"dropRecognizeWith",this)||(Me=Tt(Me,this),delete this.simultaneous[Me.id]),this},requireFailure:function(Me){if(m(Me,"requireFailure",this))return this;var be=this.requireFail;return-1===J(be,Me=Tt(Me,this))&&(be.push(Me),Me.requireFailure(this)),this},dropRequireFailure:function(Me){if(m(Me,"dropRequireFailure",this))return this;Me=Tt(Me,this);var be=J(this.requireFail,Me);return be>-1&&this.requireFail.splice(be,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Me){return!!this.simultaneous[Me.id]},emit:function(Me){var be=this,Ke=this.state;function it(It){be.manager.emit(It,Me)}Ke<8&&it(be.options.event+Ge(Ke)),it(be.options.event),Me.additionalEvent&&it(Me.additionalEvent),Ke>=8&&it(be.options.event+Ge(Ke))},tryEmit:function(Me){if(this.canEmit())return this.emit(Me);this.state=32},canEmit:function(){for(var Me=0;Me<this.requireFail.length;){if(!(33&this.requireFail[Me].state))return!1;Me++}return!0},recognize:function(Me){var be=S({},Me);if(!w(this.options.enable,[this,be]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(be),30&this.state&&this.tryEmit(be)},process:function(Me){},getTouchAction:function(){},reset:function(){}},O(nn,Ut,{defaults:{pointers:1},attrTest:function(Me){var be=this.options.pointers;return 0===be||Me.pointers.length===be},process:function(Me){var be=this.state,Ke=Me.eventType,it=6&be,It=this.attrTest(Me);return it&&(8&Ke||!It)?16|be:it||It?4&Ke?8|be:2&be?4|be:2:32}}),O(Mn,nn,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var Me=this.options.direction,be=[];return 6&Me&&be.push(rt),24&Me&&be.push(tt),be},directionTest:function(Me){var be=this.options,Ke=!0,it=Me.distance,It=Me.direction,zt=Me.deltaX,Tn=Me.deltaY;return It&be.direction||(6&be.direction?(It=0===zt?1:zt<0?2:4,Ke=zt!=this.pX,it=Math.abs(Me.deltaX)):(It=0===Tn?1:Tn<0?8:16,Ke=Tn!=this.pY,it=Math.abs(Me.deltaY))),Me.direction=It,Ke&&it>be.threshold&&It&be.direction},attrTest:function(Me){return nn.prototype.attrTest.call(this,Me)&&(2&this.state||!(2&this.state)&&this.directionTest(Me))},emit:function(Me){this.pX=Me.deltaX,this.pY=Me.deltaY;var be=Nt(Me.direction);be&&(Me.additionalEvent=this.options.event+be),this._super.emit.call(this,Me)}}),O(Ln,nn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(Me){return this._super.attrTest.call(this,Me)&&(Math.abs(Me.scale-1)>this.options.threshold||2&this.state)},emit:function(Me){1!==Me.scale&&(Me.additionalEvent=this.options.event+(Me.scale<1?"in":"out")),this._super.emit.call(this,Me)}}),O(Kt,Ut,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(Me){var be=this.options,Ke=Me.pointers.length===be.pointers,it=Me.distance<be.threshold,It=Me.deltaTime>be.time;if(this._input=Me,!it||!Ke||12&Me.eventType&&!It)this.reset();else if(1&Me.eventType)this.reset(),this._timer=F(function(){this.state=8,this.tryEmit()},be.time,this);else if(4&Me.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Me){8===this.state&&(Me&&4&Me.eventType?this.manager.emit(this.options.event+"up",Me):(this._input.timeStamp=b(),this.manager.emit(this.options.event,this._input)))}}),O(In,nn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(Me){return this._super.attrTest.call(this,Me)&&(Math.abs(Me.rotation)>this.options.threshold||2&this.state)}}),O(pr,nn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Mn.prototype.getTouchAction.call(this)},attrTest:function(Me){var Ke,be=this.options.direction;return 30&be?Ke=Me.overallVelocity:6&be?Ke=Me.overallVelocityX:24&be&&(Ke=Me.overallVelocityY),this._super.attrTest.call(this,Me)&&be&Me.offsetDirection&&Me.distance>this.options.threshold&&Me.maxPointers==this.options.pointers&&L(Ke)>this.options.velocity&&4&Me.eventType},emit:function(Me){var be=Nt(Me.offsetDirection);be&&this.manager.emit(this.options.event+be,Me),this.manager.emit(this.options.event,Me)}}),O(At,Ut,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Xe]},process:function(Me){var be=this.options,Ke=Me.pointers.length===be.pointers,it=Me.distance<be.threshold,It=Me.deltaTime<be.time;if(this.reset(),1&Me.eventType&&0===this.count)return this.failTimeout();if(it&&It&&Ke){if(4!=Me.eventType)return this.failTimeout();var zt=!this.pTime||Me.timeStamp-this.pTime<be.interval,Tn=!this.pCenter||Ue(this.pCenter,Me.center)<be.posThreshold;if(this.pTime=Me.timeStamp,this.pCenter=Me.center,Tn&&zt?this.count+=1:this.count=1,this._input=Me,0==this.count%be.taps)return this.hasRequireFailures()?(this._timer=F(function(){this.state=8,this.tryEmit()},be.interval,this),2):8}return 32},failTimeout:function(){return this._timer=F(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Kn.VERSION="2.0.7",Kn.defaults={domEvents:!1,touchAction:Vt,enable:!0,inputTarget:null,inputClass:null,preset:[[In,{enable:!1}],[Ln,{enable:!1},["rotate"]],[pr,{direction:6}],[Mn,{direction:6},["swipe"]],[At],[At,{event:"doubletap",taps:2},["tap"]],[Kt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ei.prototype={set:function(Me){return S(this.options,Me),Me.touchAction&&this.touchAction.update(),Me.inputTarget&&(this.input.destroy(),this.input.target=Me.inputTarget,this.input.init()),this},stop:function(Me){this.session.stopped=Me?2:1},recognize:function(Me){var be=this.session;if(!be.stopped){this.touchAction.preventDefaults(Me);var Ke,it=this.recognizers,It=be.curRecognizer;(!It||It&&8&It.state)&&(It=be.curRecognizer=null);for(var zt=0;zt<it.length;)Ke=it[zt],2===be.stopped||It&&Ke!=It&&!Ke.canRecognizeWith(It)?Ke.reset():Ke.recognize(Me),!It&&14&Ke.state&&(It=be.curRecognizer=Ke),zt++}},get:function(Me){if(Me instanceof Ut)return Me;for(var be=this.recognizers,Ke=0;Ke<be.length;Ke++)if(be[Ke].options.event==Me)return be[Ke];return null},add:function(Me){if(m(Me,"add",this))return this;var be=this.get(Me.options.event);return be&&this.remove(be),this.recognizers.push(Me),Me.manager=this,this.touchAction.update(),Me},remove:function(Me){if(m(Me,"remove",this))return this;if(Me=this.get(Me)){var be=this.recognizers,Ke=J(be,Me);-1!==Ke&&(be.splice(Ke,1),this.touchAction.update())}return this},on:function(Me,be){if(Me!==y&&be!==y){var Ke=this.handlers;return h($(Me),function(it){Ke[it]=Ke[it]||[],Ke[it].push(be)}),this}},off:function(Me,be){if(Me!==y){var Ke=this.handlers;return h($(Me),function(it){be?Ke[it]&&Ke[it].splice(J(Ke[it],be),1):delete Ke[it]}),this}},emit:function(Me,be){this.options.domEvents&&function _i(Me,be){var Ke=_.createEvent("Event");Ke.initEvent(Me,!0,!0),Ke.gesture=be,be.target.dispatchEvent(Ke)}(Me,be);var Ke=this.handlers[Me]&&this.handlers[Me].slice();if(Ke&&Ke.length){be.type=Me,be.preventDefault=function(){be.srcEvent.preventDefault()};for(var it=0;it<Ke.length;)Ke[it](be),it++}},destroy:function(){this.element&&Ur(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},S(Kn,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ei,Input:G,TouchAction:$t,TouchInput:Rt,MouseInput:Jt,PointerEventInput:Se,TouchMouseInput:nt,SingleTouchInput:dt,Recognizer:Ut,AttrRecognizer:nn,Tap:At,Pan:Mn,Swipe:pr,Pinch:Ln,Rotate:In,Press:Kt,on:f,off:R,each:h,merge:x,extend:C,assign:S,inherit:O,bindFn:N,prefixed:K}),(typeof B<"u"?B:typeof self<"u"?self:{}).Hammer=Kn,(u=function(){return Kn}.call(we,k,we,Es))!==y&&(Es.exports=u)}(window,document)}},Es=>{Es(Es.s=935)}]);
(self.webpackChunksdLbog=self.webpackChunksdLbog||[]).push([[179],{0:(Cs,Oe,k)=>{"use strict";function u(n){return"function"==typeof n}function x(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const y=x(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function M(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class T{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(u(r))try{r()}catch(o){e=o instanceof y?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{v(o)}catch(l){e=e??[],l instanceof y?e=[...e,...l.errors]:e.push(l)}}if(e)throw new y(e)}}add(e){var t;if(e&&e!==this)if(this.closed)v(e);else{if(e instanceof T){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&M(t,e)}remove(e){const{_finalizers:t}=this;t&&M(t,e),e instanceof T&&e._removeParent(this)}}T.EMPTY=(()=>{const n=new T;return n.closed=!0,n})();const D=T.EMPTY;function d(n){return n instanceof T||n&&"closed"in n&&u(n.remove)&&u(n.add)&&u(n.unsubscribe)}function v(n){u(n)?n():n.unsubscribe()}const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},N={setTimeout(n,e,...t){const{delegate:r}=N;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=N;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function O(n){N.setTimeout(()=>{const{onUnhandledError:e}=p;if(!e)throw n;e(n)})}function L(){}const m=S("C",void 0,void 0);function S(n,e,t){return{kind:n,value:e,error:t}}let C=null;function F(n){if(p.useDeprecatedSynchronousErrorHandling){const e=!C;if(e&&(C={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=C;if(C=null,t)throw r}}else n()}class w extends T{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,d(e)&&e.add(this)):this.destination=q}static create(e,t,r){return new I(e,t,r)}next(e){this.isStopped?z(function g(n){return S("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?z(function h(n){return S("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?z(m,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const b=Function.prototype.bind;function P(n,e){return b.call(n,e)}class f{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){H(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){H(r)}else H(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){H(t)}}}class I extends w{constructor(e,t,r){let i;if(super(),u(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&p.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&P(e.next,o),error:e.error&&P(e.error,o),complete:e.complete&&P(e.complete,o)}):i=e}this.destination=new f(i)}}function H(n){p.useDeprecatedSynchronousErrorHandling?function R(n){p.useDeprecatedSynchronousErrorHandling&&C&&(C.errorThrown=!0,C.error=n)}(n):O(n)}function z(n,e){const{onStoppedNotification:t}=p;t&&N.setTimeout(()=>t(n,e))}const q={closed:!0,next:L,error:function $(n){throw n},complete:L},J="function"==typeof Symbol&&Symbol.observable||"@@observable";function X(n){return n}let Z=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function ve(n){return n&&n instanceof w||function he(n){return n&&u(n.next)&&u(n.error)&&u(n.complete)}(n)&&d(n)}(t)?t:new I(t,r,i);return F(()=>{const{operator:l,source:c}=this;o.add(l?l.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=oe(r))((i,o)=>{const l=new I({next:c=>{try{t(c)}catch(E){o(E),l.unsubscribe()}},error:o,complete:i});this.subscribe(l)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[J](){return this}pipe(...t){return function se(n){return 0===n.length?X:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}(t)(this)}toPromise(t){return new(t=oe(t))((r,i)=>{let o;this.subscribe(l=>o=l,l=>i(l),()=>r(o))})}}return n.create=e=>new n(e),n})();function oe(n){var e;return null!==(e=n??p.Promise)&&void 0!==e?e:Promise}const re=x(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ge=(()=>{class n extends Z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ie(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new re}next(t){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){F(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?D:(this.currentObservers=null,o.push(t),new T(()=>{this.currentObservers=null,M(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new Z;return t.source=this,t}}return n.create=(e,t)=>new ie(e,t),n})();class ie extends ge{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:D}}function de(n){return u(n?.lift)}function ue(n){return e=>{if(de(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(n,e,t,r,i){return new ce(n,e,t,r,i)}class ce extends w{constructor(e,t,r,i,o,l){super(e),this.onFinalize=o,this.shouldUnsubscribe=l,this._next=t?function(c){try{t(c)}catch(E){e.error(E)}}:super._next,this._error=i?function(c){try{i(c)}catch(E){e.error(E)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ne(n,e){return ue((t,r)=>{let i=0;t.subscribe(le(r,o=>{r.next(n.call(e,o,i++))}))})}function me(n){return this instanceof me?(this.v=n,this):new me(n)}function Te(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i;function l(Ae){r[Ae]&&(i[Ae]=function(be){return new Promise(function(je,Xe){o.push([Ae,be,je,Xe])>1||c(Ae,be)})})}function c(Ae,be){try{!function E(Ae){Ae.value instanceof me?Promise.resolve(Ae.value.v).then(B,Q):fe(o[0][2],Ae)}(r[Ae](be))}catch(je){fe(o[0][3],je)}}function B(Ae){c("next",Ae)}function Q(Ae){c("throw",Ae)}function fe(Ae,be){Ae(be),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Ie(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ae(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(l){return new Promise(function(c,E){!function i(o,l,c,E){Promise.resolve(E).then(function(B){o({value:B,done:c})},l)}(c,E,(l=n[o](l)).done,l.value)})}}}const yt=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Lt(n){return u(n?.then)}function kt(n){return u(n[J])}function Zt(n){return Symbol.asyncIterator&&u(n?.[Symbol.asyncIterator])}function nn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Be=function sn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Le(n){return u(n?.[Be])}function Ce(n){return Te(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield me(t.read());if(i)return yield me(void 0);yield yield me(r)}}finally{t.releaseLock()}})}function Ue(n){return u(n?.getReader)}function Qe(n){if(n instanceof Z)return n;if(null!=n){if(kt(n))return function st(n){return new Z(e=>{const t=n[J]();if(u(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(yt(n))return function ct(n){return new Z(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Lt(n))return function Ze(n){return new Z(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,O)})}(n);if(Zt(n))return Ut(n);if(Le(n))return function ht(n){return new Z(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Ue(n))return function It(n){return Ut(Ce(n))}(n)}throw nn(n)}function Ut(n){return new Z(e=>{(function Wt(n,e){var t,r,i,o;return function K(n,e,t,r){return new(t||(t=Promise))(function(o,l){function c(Q){try{B(r.next(Q))}catch(fe){l(fe)}}function E(Q){try{B(r.throw(Q))}catch(fe){l(fe)}}function B(Q){Q.done?o(Q.value):function i(o){return o instanceof t?o:new t(function(l){l(o)})}(Q.value).then(c,E)}B((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Ie(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(l){i={error:l}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Fe(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function et(n,e,t=1/0){return u(e)?et((r,i)=>ne((o,l)=>e(r,o,i,l))(Qe(n(r,i))),t):("number"==typeof e&&(t=e),ue((r,i)=>function Ye(n,e,t,r,i,o,l,c){const E=[];let B=0,Q=0,fe=!1;const Ae=()=>{fe&&!E.length&&!B&&e.complete()},be=Xe=>B<r?je(Xe):E.push(Xe),je=Xe=>{o&&e.next(Xe),B++;let gt=!1;Qe(t(Xe,Q++)).subscribe(le(e,dt=>{i?.(dt),o?be(dt):e.next(dt)},()=>{gt=!0},void 0,()=>{if(gt)try{for(B--;E.length&&B<r;){const dt=E.shift();l?Fe(e,l,()=>je(dt)):je(dt)}Ae()}catch(dt){e.error(dt)}}))};return n.subscribe(le(e,be,()=>{fe=!0,Ae()})),()=>{c?.()}}(r,i,n,t)))}function Rt(n=1/0){return et(X,n)}const Tt=new Z(n=>n.complete());function lt(n){return n&&u(n.schedule)}function jt(n){return n[n.length-1]}function Me(n){return u(jt(n))?n.pop():void 0}function $e(n){return lt(jt(n))?n.pop():void 0}function Je(n,e=0){return ue((t,r)=>{t.subscribe(le(r,i=>Fe(r,n,()=>r.next(i),e),()=>Fe(r,n,()=>r.complete(),e),i=>Fe(r,n,()=>r.error(i),e)))})}function tt(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Vt(n,e){if(!n)throw new Error("Iterable cannot be null");return new Z(t=>{Fe(t,e,()=>{const r=n[Symbol.asyncIterator]();Fe(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Ve(n,e){return e?function ot(n,e){if(null!=n){if(kt(n))return function Et(n,e){return Qe(n).pipe(tt(e),Je(e))}(n,e);if(yt(n))return function an(n,e){return new Z(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(Lt(n))return function Yt(n,e){return Qe(n).pipe(tt(e),Je(e))}(n,e);if(Zt(n))return Vt(n,e);if(Le(n))return function zt(n,e){return new Z(t=>{let r;return Fe(t,e,()=>{r=n[Be](),Fe(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(l){return void t.error(l)}o?t.complete():t.next(i)},0,!0)}),()=>u(r?.return)&&r.return()})}(n,e);if(Ue(n))return function qe(n,e){return Vt(Ce(n),e)}(n,e)}throw nn(n)}(n,e):Qe(n)}function nt(...n){const e=$e(n),t=function mt(n,e){return"number"==typeof jt(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Qe(r[0]):Rt(t)(Ve(r,e)):Tt}function ft(n){return n<=0?()=>Tt:ue((e,t)=>{let r=0;e.subscribe(le(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Nt(n={}){const{connector:e=(()=>new ge),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let l=null,c=null,E=null,B=0,Q=!1,fe=!1;const Ae=()=>{c?.unsubscribe(),c=null},be=()=>{Ae(),l=E=null,Q=fe=!1},je=()=>{const Xe=l;be(),Xe?.unsubscribe()};return ue((Xe,gt)=>{B++,!fe&&!Q&&Ae();const dt=E=E??e();gt.add(()=>{B--,0===B&&!fe&&!Q&&(c=Bt(je,i))}),dt.subscribe(gt),l||(l=new I({next:Ft=>dt.next(Ft),error:Ft=>{fe=!0,Ae(),c=Bt(be,t,Ft),dt.error(Ft)},complete:()=>{Q=!0,Ae(),c=Bt(be,r),dt.complete()}}),Ve(Xe).subscribe(l))})(o)}}function Bt(n,e,...t){return!0===e?(n(),null):!1===e?null:e(...t).pipe(ft(1)).subscribe(()=>n())}function Ke(n){for(let e in n)if(n[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function wt(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function _t(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(_t).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function en(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Dn=Ke({__forward_ref__:Ke});function Ln(n){return n.__forward_ref__=Ln,n.toString=function(){return _t(this())},n}function Ht(n){return Sn(n)?n():n}function Sn(n){return"function"==typeof n&&n.hasOwnProperty(Dn)&&n.__forward_ref__===Ln}class Mt extends Error{constructor(e,t){super(function Gn(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function tn(n){return"string"==typeof n?n:null==n?"":String(n)}function fi(n,e){throw new Mt(-201,!1)}function it(n,e){null==n&&function Dt(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function xt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function pn(n){return{providers:n.providers||[],imports:n.imports||[]}}function rr(n){return Ia(n,Ra)||Ia(n,su)}function Ia(n,e){return n.hasOwnProperty(e)?n[e]:null}function iu(n){return n&&(n.hasOwnProperty(Pa)||n.hasOwnProperty(Bf))?n[Pa]:null}const Ra=Ke({\u0275prov:Ke}),Pa=Ke({\u0275inj:Ke}),su=Ke({ngInjectableDef:Ke}),Bf=Ke({ngInjectorDef:Ke});var on=(()=>((on=on||{})[on.Default=0]="Default",on[on.Host=1]="Host",on[on.Self=2]="Self",on[on.SkipSelf=4]="SkipSelf",on[on.Optional=8]="Optional",on))();let xo;function di(n){const e=xo;return xo=n,e}function au(n,e,t){const r=rr(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&on.Optional?null:void 0!==e?e:void fi(_t(n))}function Vi(n){return{toString:n}.toString()}var $r=(()=>(($r=$r||{})[$r.OnPush=0]="OnPush",$r[$r.Default=1]="Default",$r))(),Qr=(()=>{return(n=Qr||(Qr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Qr;var n})();const kn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ms={},Fn=[],Oa=Ke({\u0275cmp:Ke}),Bo=Ke({\u0275dir:Ke}),Ys=Ke({\u0275pipe:Ke}),ou=Ke({\u0275mod:Ke}),Ii=Ke({\u0275fac:Ke}),zs=Ke({__NG_ELEMENT_ID__:Ke});let kf=0;function Fr(n){return Vi(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===$r.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Fn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Qr.Emulated,id:"c"+kf++,styles:n.styles||Fn,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.dependencies,l=n.features;return i.inputs=ba(n.inputs,r),i.outputs=ba(n.outputs),l&&l.forEach(c=>c(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map($s).filter(lu):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Er).filter(lu):null,i})}function $s(n){return jn(n)||vr(n)}function lu(n){return null!==n}const uu={};function Yn(n){return Vi(()=>{const e={type:n.type,bootstrap:n.bootstrap||Fn,declarations:n.declarations||Fn,imports:n.imports||Fn,exports:n.exports||Fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(uu[n.id]=n.type),e})}function ba(n,e){if(null==n)return Ms;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const Hn=Fr;function jn(n){return n[Oa]||null}function vr(n){return n[Bo]||null}function Er(n){return n[Ys]||null}function Ge(n,e){const t=n[ou]||null;if(!t&&!0===e)throw new Error(`Type ${_t(n)} does not have '\u0275mod' property.`);return t}function Gr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Pi(n){return Array.isArray(n)&&!0===n[1]}function Kf(n){return 0!=(8&n.flags)}function hu(n){return 2==(2&n.flags)}function gu(n){return 1==(1&n.flags)}function Oi(n){return null!==n.template}function zS(n){return 0!=(256&n[2])}function Zs(n,e){return n.hasOwnProperty(Ii)?n[Ii]:null}class XS{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function is(){return Rm}function Rm(n){return n.type.prototype.ngOnChanges&&(n.setInput=ZS),qS}function qS(){const n=Om(this),e=n?.current;if(e){const t=n.previous;if(t===Ms)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ZS(n,e,t,r){const i=Om(n)||function JS(n,e){return n[Pm]=e}(n,{previous:Ms,current:null}),o=i.current||(i.current={}),l=i.previous,c=this.declaredInputs[t],E=l[c];o[c]=new XS(E&&E.currentValue,e,l===Ms),n[r]=e}is.ngInherit=!0;const Pm="__ngSimpleChanges__";function Om(n){return n[Pm]||null}function sr(n){for(;Array.isArray(n);)n=n[0];return n}function pu(n,e){return sr(e[n])}function gi(n,e){return sr(e[n.index])}function $f(n,e){return n.data[e]}function Xr(n,e){const t=e[n];return Gr(t)?t:t[0]}function bm(n){return 4==(4&n[2])}function Qf(n){return 64==(64&n[2])}function Ss(n,e){return null==e?null:n[e]}function wm(n){n[18]=0}function Xf(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const vn={lFrame:Hm(null),bindingsEnabled:!0};function Lm(){return vn.bindingsEnabled}function Ot(){return vn.lFrame.lView}function wn(){return vn.lFrame.tView}function qf(n){return vn.lFrame.contextLView=n,n[8]}function Zf(n){return vn.lFrame.contextLView=null,n}function fr(){let n=Fm();for(;null!==n&&64===n.type;)n=n.parent;return n}function Fm(){return vn.lFrame.currentTNode}function Ki(n,e){const t=vn.lFrame;t.currentTNode=n,t.isParent=e}function Jf(){return vn.lFrame.isParent}function ed(){vn.lFrame.isParent=!1}function Ba(){return vn.lFrame.bindingIndex++}function as(n){const e=vn.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function hA(n,e){const t=vn.lFrame;t.bindingIndex=t.bindingRootIndex=n,td(e)}function td(n){vn.lFrame.currentDirectiveIndex=n}function nd(n){const e=vn.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function Um(){return vn.lFrame.currentQueryIndex}function rd(n){vn.lFrame.currentQueryIndex=n}function pA(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function km(n,e,t){if(t&on.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&on.Host||(i=pA(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,n=o}const r=vn.lFrame=jm();return r.currentTNode=e,r.lView=n,!0}function id(n){const e=jm(),t=n[1];vn.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function jm(){const n=vn.lFrame,e=null===n?null:n.child;return null===e?Hm(n):e}function Hm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Vm(){const n=vn.lFrame;return vn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Km=Vm;function sd(){const n=Vm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Br(){return vn.lFrame.selectedIndex}function As(n){vn.lFrame.selectedIndex=n}function er(){const n=vn.lFrame;return $f(n.tView,n.selectedIndex)}function vu(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:c,ngAfterViewInit:E,ngAfterViewChecked:B,ngOnDestroy:Q}=o;l&&(n.contentHooks||(n.contentHooks=[])).push(-t,l),c&&((n.contentHooks||(n.contentHooks=[])).push(t,c),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,c)),E&&(n.viewHooks||(n.viewHooks=[])).push(-t,E),B&&((n.viewHooks||(n.viewHooks=[])).push(t,B),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,B)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(t,Q)}}function Eu(n,e,t){Wm(n,e,3,t)}function _u(n,e,t,r){(3&n[2])===t&&Wm(n,e,t,r)}function ad(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Wm(n,e,t,r){const o=r??-1,l=e.length-1;let c=0;for(let E=void 0!==r?65535&n[18]:0;E<l;E++)if("number"==typeof e[E+1]){if(c=e[E],null!=r&&c>=r)break}else e[E]<0&&(n[18]+=65536),(c<o||-1==o)&&(MA(n,t,e,E),n[18]=(4294901760&n[18])+E+2),E++}function MA(n,e,t,r){const i=t[r]<0,o=t[r+1],c=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(c)}finally{}}}else try{o.call(c)}finally{}}class Ko{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function yu(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],l=t[r++],c=t[r++];n.setAttribute(e,l,c,o)}else{const o=i,l=t[++r];Ym(o)?n.setProperty(e,o,l):n.setAttribute(e,o,l),r++}}return r}function Gm(n){return 3===n||4===n||6===n}function Ym(n){return 64===n.charCodeAt(0)}function Tu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||zm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function zm(n,e,t,r,i){let o=0,l=n.length;if(-1===e)l=-1;else for(;o<n.length;){const c=n[o++];if("number"==typeof c){if(c===e){l=-1;break}if(c>e){l=o-1;break}}}for(;o<n.length;){const c=n[o];if("number"==typeof c)break;if(c===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==l&&(n.splice(l,0,e),o=l+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function $m(n){return-1!==n}function Ua(n){return 32767&n}function ka(n,e){let t=function PA(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let ld=!0;function Du(n){const e=ld;return ld=n,e}let OA=0;const Wi={};function Go(n,e){const t=cd(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,ud(r.data,n),ud(e,null),ud(r.blueprint,null));const i=Cu(n,e),o=n.injectorIndex;if($m(i)){const l=Ua(i),c=ka(i,e),E=c[1].data;for(let B=0;B<8;B++)e[o+B]=c[l+B]|E[l+B]}return e[o+8]=i,o}function ud(n,e){n.push(0,0,0,0,0,0,0,0,e)}function cd(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Cu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=iv(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Mu(n,e,t){!function bA(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(zs)&&(r=t[zs]),null==r&&(r=t[zs]=OA++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function qm(n,e,t){if(t&on.Optional)return n;fi()}function Zm(n,e,t,r){if(t&on.Optional&&void 0===r&&(r=null),0==(t&(on.Self|on.Host))){const i=n[9],o=di(void 0);try{return i?i.get(e,r,t&on.Optional):au(e,r,t&on.Optional)}finally{di(o)}}return qm(r,0,t)}function Jm(n,e,t,r=on.Default,i){if(null!==n){if(1024&e[2]){const l=function xA(n,e,t,r,i){let o=n,l=e;for(;null!==o&&null!==l&&1024&l[2]&&!(256&l[2]);){const c=ev(o,l,t,r|on.Self,Wi);if(c!==Wi)return c;let E=o.parent;if(!E){const B=l[21];if(B){const Q=B.get(t,Wi,r);if(Q!==Wi)return Q}E=iv(l),l=l[15]}o=E}return i}(n,e,t,r,Wi);if(l!==Wi)return l}const o=ev(n,e,t,r,Wi);if(o!==Wi)return o}return Zm(e,t,r,i)}function ev(n,e,t,r,i){const o=function LA(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(zs)?n[zs]:void 0;return"number"==typeof e?e>=0?255&e:FA:e}(t);if("function"==typeof o){if(!km(e,n,r))return r&on.Host?qm(i,0,r):Zm(e,t,r,i);try{const l=o(r);if(null!=l||r&on.Optional)return l;fi()}finally{Km()}}else if("number"==typeof o){let l=null,c=cd(n,e),E=-1,B=r&on.Host?e[16][6]:null;for((-1===c||r&on.SkipSelf)&&(E=-1===c?Cu(n,e):e[c+8],-1!==E&&nv(r,!1)?(l=e[1],c=Ua(E),e=ka(E,e)):c=-1);-1!==c;){const Q=e[1];if(tv(o,c,Q.data)){const fe=NA(c,e,t,l,r,B);if(fe!==Wi)return fe}E=e[c+8],-1!==E&&nv(r,e[1].data[c+8]===B)&&tv(o,c,e)?(l=Q,c=Ua(E),e=ka(E,e)):c=-1}}return i}function NA(n,e,t,r,i,o){const l=e[1],c=l.data[n+8],Q=Su(c,l,t,null==r?hu(c)&&ld:r!=l&&0!=(3&c.type),i&on.Host&&o===c);return null!==Q?Yo(e,l,Q,c):Wi}function Su(n,e,t,r,i){const o=n.providerIndexes,l=e.data,c=1048575&o,E=n.directiveStart,Q=o>>20,Ae=i?c+Q:n.directiveEnd;for(let be=r?c:c+Q;be<Ae;be++){const je=l[be];if(be<E&&t===je||be>=E&&je.type===t)return be}if(i){const be=l[E];if(be&&Oi(be)&&be.type===t)return E}return null}function Yo(n,e,t,r){let i=n[t];const o=e.data;if(function SA(n){return n instanceof Ko}(i)){const l=i;l.resolving&&function Si(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Mt(-200,`Circular dependency in DI detected for ${n}${t}`)}(function yn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():tn(n)}(o[t]));const c=Du(l.canSeeViewProviders);l.resolving=!0;const E=l.injectImpl?di(l.injectImpl):null;km(n,r,on.Default);try{i=n[t]=l.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function CA(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const l=Rm(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,l),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,l)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==E&&di(E),Du(c),l.resolving=!1,Km()}}return i}function tv(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function nv(n,e){return!(n&on.Self||n&on.Host&&e)}class ja{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Jm(this._tNode,this._lView,e,r,t)}}function FA(){return new ja(fr(),Ot())}function fd(n){return Sn(n)?()=>{const e=fd(Ht(n));return e&&e()}:Zs(n)}function iv(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}function Js(n){return function wA(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(Gm(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(fr(),n)}const Va="__parameters__";function Wa(n,e,t){return Vi(()=>{const r=function dd(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const l=new i(...o);return c.annotation=l,c;function c(E,B,Q){const fe=E.hasOwnProperty(Va)?E[Va]:Object.defineProperty(E,Va,{value:[]})[Va];for(;fe.length<=Q;)fe.push(null);return(fe[Q]=fe[Q]||[]).push(l),E}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Xt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=xt({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const UA=new Xt("AnalyzeForEntryComponents");function qr(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),qr(r,e)):e!==n&&e.push(r)}return e}function os(n,e){n.forEach(t=>Array.isArray(t)?os(t,e):e(t))}function av(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Au(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Qo(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Zr(n,e,t){let r=Ga(n,e);return r>=0?n[1|r]=t:(r=~r,function HA(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function gd(n,e){const t=Ga(n,e);if(t>=0)return n[1|t]}function Ga(n,e){return function uv(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),l=n[o<<t];if(e===l)return o<<t;l>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Xo={},md="__NG_DI_FLAG__",Ru="ngTempTokenPath",QA=/\n/gm,cv="__source";let qo;function Pu(n){const e=qo;return qo=n,e}function qA(n,e=on.Default){if(void 0===qo)throw new Mt(-203,!1);return null===qo?au(n,void 0,e):qo.get(n,e&on.Optional?null:void 0,e)}function Ct(n,e=on.Default){return(function Uf(){return xo}()||qA)(Ht(n),e)}function bi(n,e=on.Default){return Ct(n,e)}function vd(n){const e=[];for(let t=0;t<n.length;t++){const r=Ht(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Mt(900,!1);let i,o=on.Default;for(let l=0;l<r.length;l++){const c=r[l],E=ZA(c);"number"==typeof E?-1===E?i=c.token:o|=E:i=c}e.push(Ct(i,o))}else e.push(Ct(r))}return e}function Zo(n,e){return n[md]=e,n.prototype[md]=e,n}function ZA(n){return n[md]}const pi=Zo(Wa("Optional"),8),Ya=Zo(Wa("SkipSelf"),4);let _d,wu;function $a(n){return function yd(){if(void 0===wu&&(wu=null,kn.trustedTypes))try{wu=kn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wu}()?.createHTML(n)||n}class ea{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class hI extends ea{getTypeName(){return"HTML"}}class gI extends ea{getTypeName(){return"Style"}}class pI extends ea{getTypeName(){return"Script"}}class mI extends ea{getTypeName(){return"URL"}}class vI extends ea{getTypeName(){return"ResourceURL"}}function Jr(n){return n instanceof ea?n.changingThisBreaksApplicationSecurity:n}function Gi(n,e){const t=function EI(n){return n instanceof ea&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class MI{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString($a(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class SI{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const r=this.inertDocument.createElement("body");t.appendChild(r)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=$a(e),t;const r=this.inertDocument.createElement("body");return r.innerHTML=$a(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(e){const t=e.attributes;for(let i=t.length-1;0<i;i--){const l=t.item(i).name;("xmlns:ns1"===l||0===l.indexOf("ns1:"))&&e.removeAttribute(l)}let r=e.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const II=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,RI=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function tl(n){return(n=String(n)).match(II)||n.match(RI)?n:"unsafe:"+n}function Yi(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function nl(...n){const e={};for(const t of n)for(const r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}const Sv=Yi("area,br,col,hr,img,wbr"),Av=Yi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Iv=Yi("rp,rt"),Dd=nl(Sv,nl(Av,Yi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nl(Iv,Yi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nl(Iv,Av)),Cd=Yi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Md=Yi("srcset"),Rv=nl(Cd,Md,Yi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),PI=Yi("script,style,template");class OI{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let i=this.checkClobberedElement(t,t.nextSibling);if(i){t=i;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Dd.hasOwnProperty(t))return this.sanitizedSomething=!0,!PI.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=e.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),l=o.name,c=l.toLowerCase();if(!Rv.hasOwnProperty(c)){this.sanitizedSomething=!0;continue}let E=o.value;Cd[c]&&(E=tl(E)),Md[c]&&(n=E,E=(n=String(n)).split(",").map(e=>tl(e.trim())).join(", ")),this.buf.push(" ",l,'="',Pv(E),'"')}var n;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Dd.hasOwnProperty(t)&&!Sv.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(Pv(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const bI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wI=/([^\#-~ |!])/g;function Pv(n){return n.replace(/&/g,"&amp;").replace(bI,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(wI,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Lu;function Ov(n,e){let t=null;try{Lu=Lu||function Cv(n){const e=new SI(n);return function AI(){try{return!!(new window.DOMParser).parseFromString($a(""),"text/html")}catch{return!1}}()?new MI(e):e}(n);let r=e?String(e):"";t=Lu.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=t.innerHTML,t=Lu.getInertBodyElement(r)}while(r!==o);return $a((new OI).sanitizeChildren(Sd(t)||t))}finally{if(t){const r=Sd(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function Sd(n){return"content"in n&&function NI(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Un=(()=>((Un=Un||{})[Un.NONE=0]="NONE",Un[Un.HTML=1]="HTML",Un[Un.STYLE=2]="STYLE",Un[Un.SCRIPT=3]="SCRIPT",Un[Un.URL=4]="URL",Un[Un.RESOURCE_URL=5]="RESOURCE_URL",Un))();function rl(n){const e=function il(){const n=Ot();return n&&n[12]}();return e?e.sanitize(Un.URL,n)||"":Gi(n,"URL")?Jr(n):tl(tn(n))}function Id(n){return n.ngOriginalError}class ls{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Id(e);for(;t&&Id(t);)t=Id(t);return t||null}}const Rd=new Map;let QI=0;const Od="__ngContext__";function Or(n,e){Gr(e)?(n[Od]=e[20],function qI(n){Rd.set(n[20],n)}(e)):n[Od]=e}function sl(n){const e=n[Od];return"number"==typeof e?function Nv(n){return Rd.get(n)||null}(e):e||null}function bd(n){const e=sl(n);return e?Gr(e)?e:e.lView:null}const aR=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(kn))();function us(n){return n instanceof Function?n():n}var Yr=(()=>((Yr=Yr||{})[Yr.Important=1]="Important",Yr[Yr.DashCase=2]="DashCase",Yr))();function Nd(n,e){return undefined(n,e)}function al(n){const e=n[3];return Pi(e)?e[3]:e}function Ld(n){return Vv(n[13])}function Fd(n){return Vv(n[4])}function Vv(n){for(;null!==n&&!Pi(n);)n=n[4];return n}function Xa(n,e,t,r,i){if(null!=r){let o,l=!1;Pi(r)?o=r:Gr(r)&&(l=!0,r=r[0]);const c=sr(r);0===n&&null!==t?null==i?$v(e,t,c):ta(e,t,c,i||null,!0):1===n&&null!==t?ta(e,t,c,i||null,!0):2===n?function tE(n,e,t){const r=Fu(n,e);r&&function DR(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,c,l):3===n&&e.destroyNode(c),null!=o&&function SR(n,e,t,r,i){const o=t[7];o!==sr(t)&&Xa(e,n,r,o,i);for(let c=10;c<t.length;c++){const E=t[c];ol(E[1],E,n,e,r,o)}}(e,n,o,t,i)}}function Bd(n,e,t){return n.createElement(e,t)}function Wv(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Xf(i,-1)),t.splice(r,1)}function Ud(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Wv(i,r),e>0&&(n[t-1][4]=r[4]);const o=Au(n,10+e);!function gR(n,e){ol(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const l=o[19];null!==l&&l.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Gv(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&ol(n,e,t,3,null,null),function vR(n){let e=n[13];if(!e)return kd(n[1],n);for(;e;){let t=null;if(Gr(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Gr(e)&&kd(e[1],e),e=e[3];null===e&&(e=n),Gr(e)&&kd(e[1],e),t=e&&e[4]}e=t}}(e)}}function kd(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function TR(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Ko)){const o=t[r+1];if(Array.isArray(o))for(let l=0;l<o.length;l+=2){const c=i[o[l]],E=o[l+1];try{E.call(c)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function yR(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const l=t[o+1],c="function"==typeof l?l(e):sr(e[l]),E=r[i=t[o+2]],B=t[o+3];"boolean"==typeof B?c.removeEventListener(t[o],E,B):B>=0?r[i=B]():r[i=-B].unsubscribe(),o+=2}else{const l=r[i=t[o+1]];t[o].call(l)}if(null!==r){for(let o=i+1;o<r.length;o++)r[o]();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Pi(e[3])){t!==e[3]&&Wv(t,e);const r=e[19];null!==r&&r.detachView(n)}!function ZI(n){Rd.delete(n[20])}(e)}}function Yv(n,e,t){return function zv(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Qr.None||i===Qr.Emulated)return null}return gi(r,t)}(n,e.parent,t)}function ta(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $v(n,e,t){n.appendChild(e,t)}function Qv(n,e,t,r,i){null!==r?ta(n,e,t,r,i):$v(n,e,t)}function Fu(n,e){return n.parentNode(e)}function Xv(n,e,t){return Zv(n,e,t)}let Zv=function qv(n,e,t){return 40&n.type?gi(n,t):null};function xu(n,e,t,r){const i=Yv(n,r,e),o=e[11],c=Xv(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let E=0;E<t.length;E++)Qv(o,i,t[E],c,!1);else Qv(o,i,t,c,!1)}function Bu(n,e){if(null!==e){const t=e.type;if(3&t)return gi(e,n);if(4&t)return Hd(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Bu(n,r);{const i=n[e.index];return Pi(i)?Hd(-1,i):sr(i)}}if(32&t)return Nd(e,n)()||sr(n[e.index]);{const r=eE(n,e);return null!==r?Array.isArray(r)?r[0]:Bu(al(n[16]),r):Bu(n,e.next)}}return null}function eE(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Hd(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Bu(r,i)}return e[7]}function Vd(n,e,t,r,i,o,l){for(;null!=t;){const c=r[t.index],E=t.type;if(l&&0===e&&(c&&Or(sr(c),r),t.flags|=4),64!=(64&t.flags))if(8&E)Vd(n,e,t.child,r,i,o,!1),Xa(e,n,i,c,o);else if(32&E){const B=Nd(t,r);let Q;for(;Q=B();)Xa(e,n,i,Q,o);Xa(e,n,i,c,o)}else 16&E?nE(n,e,r,t,i,o):Xa(e,n,i,c,o);t=l?t.projectionNext:t.next}}function ol(n,e,t,r,i,o){Vd(t,r,n.firstChild,e,i,o,!1)}function nE(n,e,t,r,i,o){const l=t[16],E=l[6].projection[r.projection];if(Array.isArray(E))for(let B=0;B<E.length;B++)Xa(e,n,i,E[B],o);else Vd(n,e,E,l[3],i,o,!0)}function rE(n,e,t){n.setAttribute(e,"style",t)}function Kd(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function iE(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const sE="ng-template";function IR(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==iE(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function aE(n){return 4===n.type&&n.value!==sE}function RR(n,e,t){return e===(4!==n.type||t?n.value:sE)}function PR(n,e,t){let r=4;const i=n.attrs||[],o=function wR(n){for(let e=0;e<n.length;e++)if(Gm(n[e]))return e;return n.length}(i);let l=!1;for(let c=0;c<e.length;c++){const E=e[c];if("number"!=typeof E){if(!l)if(4&r){if(r=2|1&r,""!==E&&!RR(n,E,t)||""===E&&1===e.length){if(wi(r))return!1;l=!0}}else{const B=8&r?E:e[++c];if(8&r&&null!==n.attrs){if(!IR(n.attrs,B,t)){if(wi(r))return!1;l=!0}continue}const fe=OR(8&r?"class":E,i,aE(n),t);if(-1===fe){if(wi(r))return!1;l=!0;continue}if(""!==B){let Ae;Ae=fe>o?"":i[fe+1].toLowerCase();const be=8&r?Ae:null;if(be&&-1!==iE(be,B,0)||2&r&&B!==Ae){if(wi(r))return!1;l=!0}}}}else{if(!l&&!wi(r)&&!wi(E))return!1;if(l&&wi(E))continue;l=!1,r=E|1&r}}return wi(r)||l}function wi(n){return 0==(1&n)}function OR(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const l=e[i];if(l===n)return i;if(3===l||6===l)o=!0;else{if(1===l||2===l){let c=e[++i];for(;"string"==typeof c;)c=e[++i];continue}if(4===l)break;if(0===l){i+=4;continue}}i+=o?1:2}return-1}return function NR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function oE(n,e,t=!1){for(let r=0;r<e.length;r++)if(PR(n,e[r],t))return!0;return!1}function LR(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function lE(n,e){return n?":not("+e.trim()+")":e}function FR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let l=n[t];if("string"==typeof l)if(2&r){const c=n[++t];i+="["+l+(c.length>0?'="'+c+'"':"")+"]"}else 8&r?i+="."+l:4&r&&(i+=" "+l);else""!==i&&!wi(l)&&(e+=lE(o,i),i=""),r=l,o=o||!wi(r);t++}return""!==i&&(e+=lE(o,i)),e}const En={};function hr(n){uE(wn(),Ot(),Br()+n,!1)}function uE(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&Eu(e,o,t)}else{const o=n.preOrderHooks;null!==o&&_u(e,o,0,t)}As(t)}const Wd=new Xt("ENVIRONMENT_INITIALIZER"),hE=new Xt("INJECTOR_DEF_TYPES");function KR(...n){return{\u0275providers:gE(0,n)}}function gE(n,...e){const t=[],r=new Set;let i;return os(e,o=>{const l=o;Gd(l,t,[],r)&&(i||(i=[]),i.push(l))}),void 0!==i&&pE(i,t),t}function pE(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];os(i,o=>{e.push(o)})}}function Gd(n,e,t,r){if(!(n=Ht(n)))return!1;let i=null,o=iu(n);const l=!o&&jn(n);if(o||l){if(l&&!l.standalone)return!1;i=n}else{const E=n.ngModule;if(o=iu(E),!o)return!1;i=E}const c=r.has(i);if(l){if(c)return!1;if(r.add(i),l.dependencies){const E="function"==typeof l.dependencies?l.dependencies():l.dependencies;for(const B of E)Gd(B,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!c){let B;r.add(i);try{os(o.imports,Q=>{Gd(Q,e,t,r)&&(B||(B=[]),B.push(Q))})}finally{}void 0!==B&&pE(B,e)}if(!c){const B=Zs(i)||(()=>new i);e.push({provide:i,useFactory:B,deps:Fn},{provide:hE,useValue:i,multi:!0},{provide:Wd,useValue:()=>Ct(i),multi:!0})}const E=o.providers;null==E||c||os(E,Q=>{e.push(Q)})}}return i!==n&&void 0!==n.providers}const WR=Ke({provide:String,useValue:Ke});function Yd(n){return null!==n&&"object"==typeof n&&WR in n}function na(n){return"function"==typeof n}const zd=new Xt("INJECTOR",-1);class EE{get(e,t=Xo){if(t===Xo){const r=new Error(`NullInjectorError: No provider for ${_t(e)}!`);throw r.name="NullInjectorError",r}return t}}const $d=new Xt("Set Injector scope."),Uu={},YR={};let Qd;function Xd(){return void 0===Qd&&(Qd=new EE),Qd}class ra{}class _E extends ra{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zd(e,l=>this.processProvider(l)),this.records.set(zd,qa(void 0,this)),i.has("environment")&&this.records.set(ra,qa(void 0,this));const o=this.records.get($d);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(hE.multi,Fn,on.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}get(e,t=Xo,r=on.Default){this.assertNotDestroyed();const i=Pu(this),o=di(void 0);try{if(!(r&on.SkipSelf)){let c=this.records.get(e);if(void 0===c){const E=function qR(n){return"function"==typeof n||"object"==typeof n&&n instanceof Xt}(e)&&rr(e);c=E&&this.injectableDefInScope(E)?qa(qd(e),Uu):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&on.Self?Xd():this.parent).get(e,t=r&on.Optional&&t===Xo?null:t)}catch(l){if("NullInjectorError"===l.name){if((l[Ru]=l[Ru]||[]).unshift(_t(e)),i)throw l;return function JA(n,e,t,r){const i=n[Ru];throw e[cv]&&i.unshift(e[cv]),n.message=function eI(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=_t(e);if(Array.isArray(e))i=e.map(_t).join(" -> ");else if("object"==typeof e){let o=[];for(let l in e)if(e.hasOwnProperty(l)){let c=e[l];o.push(l+":"+("string"==typeof c?JSON.stringify(c):_t(c)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(QA,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ru]=null,n}(l,e,"R3InjectorError",this.source)}throw l}finally{di(o),Pu(i)}}resolveInjectorInitializers(){const e=Pu(this),t=di(void 0);try{const r=this.get(Wd.multi,Fn,on.Self);for(const i of r)i()}finally{Pu(e),di(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(_t(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Mt(205,!1)}processProvider(e){let t=na(e=Ht(e))?e:Ht(e&&e.provide);const r=function $R(n){return Yd(n)?qa(void 0,n.useValue):qa(yE(n),Uu)}(e);if(na(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=qa(void 0,Uu,!0),i.factory=()=>vd(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Uu&&(t.value=YR,t.value=t.factory()),"object"==typeof t.value&&t.value&&function XR(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ht(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function qd(n){const e=rr(n),t=null!==e?e.factory:Zs(n);if(null!==t)return t;if(n instanceof Xt)throw new Mt(204,!1);if(n instanceof Function)return function zR(n){const e=n.length;if(e>0)throw Qo(e,"?"),new Mt(204,!1);const t=function Ff(n){const e=n&&(n[Ra]||n[su]);if(e){const t=function xf(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Mt(204,!1)}function yE(n,e,t){let r;if(na(n)){const i=Ht(n);return Zs(i)||qd(i)}if(Yd(n))r=()=>Ht(n.useValue);else if(function vE(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...vd(n.deps||[]));else if(function mE(n){return!(!n||!n.useExisting)}(n))r=()=>Ct(Ht(n.useExisting));else{const i=Ht(n&&(n.useClass||n.provide));if(!function QR(n){return!!n.deps}(n))return Zs(i)||qd(i);r=()=>new i(...vd(n.deps))}return r}function qa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZR(n){return!!n.\u0275providers}function Zd(n,e){for(const t of n)Array.isArray(t)?Zd(t,e):ZR(t)?Zd(t.\u0275providers,e):e(t)}function TE(n,e=null,t=null,r){const i=DE(n,e,t,r);return i.resolveInjectorInitializers(),i}function DE(n,e=null,t=null,r,i=new Set){const o=[t||Fn,KR(n)];return r=r||("object"==typeof n?void 0:_t(n)),new _E(o,e||Xd(),r||null,i)}let br=(()=>{class n{static create(t,r){if(Array.isArray(t))return TE({name:""},r,t,"");{const i=t.name??"";return TE({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=Xo,n.NULL=new EE,n.\u0275prov=xt({token:n,providedIn:"any",factory:()=>Ct(zd)}),n.__NG_ELEMENT_ID__=-1,n})();function At(n,e=on.Default){const t=Ot();return null===t?Ct(n,e):Jm(fr(),t,Ht(n),e)}function rh(){throw new Error("invalid")}function ju(n,e){return n<<17|e<<2}function Ni(n){return n>>17&32767}function oh(n){return 2|n}function cs(n){return(131068&n)>>2}function lh(n,e){return-131069&n|e<<2}function uh(n){return 1|n}function VE(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const l=n.data[o];rd(i),l.contentQueries(2,e[o],o)}}}function Ku(n,e,t,r,i,o,l,c,E,B,Q){const fe=e.blueprint.slice();return fe[0]=i,fe[2]=76|r,(null!==Q||n&&1024&n[2])&&(fe[2]|=1024),wm(fe),fe[3]=fe[15]=n,fe[8]=t,fe[10]=l||n&&n[10],fe[11]=c||n&&n[11],fe[12]=E||n&&n[12]||null,fe[9]=B||n&&n[9]||null,fe[6]=o,fe[20]=function XI(){return QI++}(),fe[21]=Q,fe[16]=2==e.type?n[16]:fe,fe}function Ja(n,e,t,r,i){let o=n.data[e];if(null===o)o=function Eh(n,e,t,r,i){const o=Fm(),l=Jf(),E=n.data[e]=function w0(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,l?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=E),null!==o&&(l?null==o.child&&null!==E.parent&&(o.child=E):null===o.next&&(o.next=E)),E}(n,e,t,r,i),function dA(){return vn.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const l=function Vo(){const n=vn.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===l?-1:l.injectorIndex}return Ki(o,!0),o}function eo(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Wu(n,e,t){id(e);try{const r=n.viewQuery;null!==r&&Rh(1,r,t);const i=n.template;null!==i&&KE(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&VE(n,e),n.staticViewQueries&&Rh(2,n.viewQuery,t);const o=n.components;null!==o&&function R0(n,e){for(let t=0;t<e.length;t++)X0(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,sd()}}function ll(n,e,t,r){const i=e[2];if(128!=(128&i)){id(e);try{wm(e),function xm(n){return vn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&KE(n,e,t,2,r);const l=3==(3&i);if(l){const B=n.preOrderCheckHooks;null!==B&&Eu(e,B,null)}else{const B=n.preOrderHooks;null!==B&&_u(e,B,0,null),ad(e,0)}if(function $0(n){for(let e=Ld(n);null!==e;e=Fd(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Xf(o,1),i[2]|=512}}}(e),function z0(n){for(let e=Ld(n);null!==e;e=Fd(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Qf(r)&&ll(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&VE(n,e),l){const B=n.contentCheckHooks;null!==B&&Eu(e,B)}else{const B=n.contentHooks;null!==B&&_u(e,B,1),ad(e,1)}!function A0(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)As(~i);else{const o=i,l=t[++r],c=t[++r];hA(l,o),c(2,e[o])}}}finally{As(-1)}}(n,e);const c=n.components;null!==c&&function I0(n,e){for(let t=0;t<e.length;t++)Q0(n,e[t])}(e,c);const E=n.viewQuery;if(null!==E&&Rh(2,E,r),l){const B=n.viewCheckHooks;null!==B&&Eu(e,B)}else{const B=n.viewHooks;null!==B&&_u(e,B,2),ad(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Xf(e[3],-1))}finally{sd()}}}function P0(n,e,t,r){const i=e[10],l=bm(e);try{!l&&i.begin&&i.begin(),l&&Wu(n,e,r),ll(n,e,t,r)}finally{!l&&i.end&&i.end()}}function KE(n,e,t,r,i){const o=Br(),l=2&r;try{As(-1),l&&e.length>22&&uE(n,e,22,!1),t(r,i)}finally{As(o)}}function _h(n,e,t){!Lm()||(function k0(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;n.firstCreatePass||Go(t,e),Or(r,e);const l=t.initialInputs;for(let c=i;c<o;c++){const E=n.data[c],B=Oi(E);B&&W0(e,t,E);const Q=Yo(e,n,c,t);Or(Q,e),null!==l&&G0(0,c-i,Q,E,0,l),B&&(Xr(t.index,e)[8]=Q)}}(n,e,t,gi(t,e)),128==(128&t.flags)&&function j0(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,l=function gA(){return vn.lFrame.currentDirectiveIndex}();try{As(o);for(let c=r;c<i;c++){const E=n.data[c],B=e[c];td(c),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&QE(E,B)}}finally{As(-1),td(l)}}(n,e,t))}function yh(n,e,t=gi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const l=r[o+1],c=-1===l?t(e,n):n[l];n[i++]=c}}}function GE(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Th(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Th(n,e,t,r,i,o,l,c,E,B){const Q=22+r,fe=Q+i,Ae=function O0(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:En);return t}(Q,fe),be="function"==typeof B?B():B;return Ae[1]={type:n,blueprint:Ae,template:t,queries:null,viewQuery:c,declTNode:e,data:Ae.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof l?l():l,firstChild:null,schemas:E,consts:be,incompleteFirstPass:!1}}function YE(n,e,t,r){const i=t_(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&n_(n).push(r,i.length-1))}function zE(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function ei(n,e,t,r,i,o,l,c){const E=gi(e,t);let Q,B=e.inputs;!c&&null!=B&&(Q=B[r])?(s_(n,t,Q,r,i),hu(e)&&function F0(n,e){const t=Xr(e,n);16&t[2]||(t[2]|=32)}(t,e.index)):3&e.type&&(r=function L0(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=l?l(i,e.value||"",r):i,o.setProperty(E,r,i))}function Dh(n,e,t,r){let i=!1;if(Lm()){const o=function H0(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const l=r[o];oE(t,l.selectors,!1)&&(i||(i=[]),Mu(Go(t,e),n,l.type),Oi(l)?(XE(n,t),i.unshift(l)):i.push(l))}return i}(n,e,t),l=null===r?null:{"":-1};if(null!==o){i=!0,qE(t,n.data.length,o.length);for(let Q=0;Q<o.length;Q++){const fe=o[Q];fe.providersResolver&&fe.providersResolver(fe)}let c=!1,E=!1,B=eo(n,e,o.length,null);for(let Q=0;Q<o.length;Q++){const fe=o[Q];t.mergedAttrs=Tu(t.mergedAttrs,fe.hostAttrs),ZE(n,t,e,B,fe),K0(B,fe,l),null!==fe.contentQueries&&(t.flags|=8),(null!==fe.hostBindings||null!==fe.hostAttrs||0!==fe.hostVars)&&(t.flags|=128);const Ae=fe.type.prototype;!c&&(Ae.ngOnChanges||Ae.ngOnInit||Ae.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),c=!0),!E&&(Ae.ngOnChanges||Ae.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),E=!0),B++}!function N0(n,e){const r=e.directiveEnd,i=n.data,o=e.attrs,l=[];let c=null,E=null;for(let B=e.directiveStart;B<r;B++){const Q=i[B],fe=Q.inputs,Ae=null===o||aE(e)?null:Y0(fe,o);l.push(Ae),c=zE(fe,B,c),E=zE(Q.outputs,B,E)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=16),c.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=l,e.inputs=c,e.outputs=E}(n,t)}l&&function V0(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new Mt(-301,!1);r.push(e[i],o)}}}(t,r,l)}return t.mergedAttrs=Tu(t.mergedAttrs,t.attrs),i}function $E(n,e,t,r,i,o){const l=o.hostBindings;if(l){let c=n.hostBindingOpCodes;null===c&&(c=n.hostBindingOpCodes=[]);const E=~e.index;(function U0(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(c)!=E&&c.push(E),c.push(r,i,l)}}function QE(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function XE(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function K0(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Oi(e)&&(t[""]=n)}}function qE(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function ZE(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=Zs(i.type)),l=new Ko(o,Oi(i),At);n.blueprint[r]=l,t[r]=l,$E(n,e,0,r,eo(n,t,i.hostVars,En),i)}function W0(n,e,t){const r=gi(e,n),i=GE(t),o=n[10],l=Gu(n,Ku(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=l}function zi(n,e,t,r,i,o){const l=gi(n,e);!function Ch(n,e,t,r,i,o,l){if(null==o)n.removeAttribute(e,i,t);else{const c=null==l?tn(o):l(o,r||"",i);n.setAttribute(e,i,c,t)}}(e[11],l,o,n.value,t,r,i)}function G0(n,e,t,r,i,o){const l=o[e];if(null!==l){const c=r.setInput;for(let E=0;E<l.length;){const B=l[E++],Q=l[E++],fe=l[E++];null!==c?r.setInput(t,fe,B,Q):t[Q]=fe}}}function Y0(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function JE(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function Q0(n,e){const t=Xr(e,n);if(Qf(t)){const r=t[1];48&t[2]?ll(r,t,r.template,t[8]):t[5]>0&&Mh(t)}}function Mh(n){for(let r=Ld(n);null!==r;r=Fd(r))for(let i=10;i<r.length;i++){const o=r[i];if(512&o[2]){const l=o[1];ll(l,o,l.template,o[8])}else o[5]>0&&Mh(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Xr(t[r],n);Qf(i)&&i[5]>0&&Mh(i)}}function X0(n,e){const t=Xr(e,n),r=t[1];(function q0(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Wu(r,t,t[8])}function Gu(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Sh(n){for(;n;){n[2]|=32;const e=al(n);if(zS(n)&&!e)return n;n=e}return null}function e_(n){!function Ah(n){for(let e=0;e<n.components.length;e++){const t=n.components[e],r=bd(t);if(null!==r){const i=r[1];P0(i,r,i.template,t)}}}(n[8])}function Rh(n,e,t){rd(0),e(n,t)}const J0=(()=>Promise.resolve(null))();function t_(n){return n[7]||(n[7]=[])}function n_(n){return n.cleanup||(n.cleanup=[])}function r_(n,e,t){return(null===n||Oi(n))&&(t=function rA(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(t[e.index])),t[11]}function i_(n,e){const t=n[9],r=t?t.get(ls,null):null;r&&r.handleError(e)}function s_(n,e,t,r,i){for(let o=0;o<t.length;){const l=t[o++],c=t[o++],E=e[l],B=n.data[l];null!==B.setInput?B.setInput(E,i,r,c):E[c]=i}}function Yu(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let l=0;l<e.length;l++){const c=e[l];"number"==typeof c?o=c:1==o?i=en(i,c):2==o&&(r=en(r,c+": "+e[++l]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function rP(){const n=fr();vu(Ot()[1],n)}function ds(n){let e=function a_(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Oi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Mt(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const l=n;l.inputs=Ph(n.inputs),l.declaredInputs=Ph(n.declaredInputs),l.outputs=Ph(n.outputs);const c=i.hostBindings;c&&oP(n,c);const E=i.viewQuery,B=i.contentQueries;if(E&&sP(n,E),B&&aP(n,B),wt(n.inputs,i.inputs),wt(n.declaredInputs,i.declaredInputs),wt(n.outputs,i.outputs),Oi(i)&&i.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let l=0;l<o.length;l++){const c=o[l];c&&c.ngInherit&&c(n),c===ds&&(t=!1)}}e=Object.getPrototypeOf(e)}!function iP(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Tu(i.hostAttrs,t=Tu(t,i.hostAttrs))}}(r)}function Ph(n){return n===Ms?{}:n===Fn?[]:n}function sP(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function aP(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function oP(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let zu=null;function ia(){if(!zu){const n=kn.Symbol;if(n&&n.iterator)zu=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(zu=r)}}}return zu}function ul(n){return!!function Oh(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&ia()in n)}function wr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function aa(n,e,t,r){const i=Ot();return wr(i,Ba(),e)&&(wn(),zi(er(),i,n,e,t,r)),aa}function no(n,e,t,r){return wr(n,Ba(),t)?e+tn(t)+r:En}function ro(n,e,t,r,i,o){const c=function sa(n,e,t,r){const i=wr(n,e,t);return wr(n,e+1,r)||i}(n,function ss(){return vn.lFrame.bindingIndex}(),t,i);return as(2),c?e+tn(t)+r+tn(i)+o:En}function vi(n,e,t,r,i,o,l,c){const E=Ot(),B=wn(),Q=n+22,fe=B.firstCreatePass?function mP(n,e,t,r,i,o,l,c,E){const B=e.consts,Q=Ja(e,n,4,l||null,Ss(B,c));Dh(e,t,Q,Ss(B,E)),vu(e,Q);const fe=Q.tViews=Th(2,Q,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,B);return null!==e.queries&&(e.queries.template(e,Q),fe.queries=e.queries.embeddedTView(Q)),Q}(Q,B,E,e,t,r,i,o,l):B.data[Q];Ki(fe,!1);const Ae=E[11].createComment("");xu(B,E,Ae,fe),Or(Ae,E),Gu(E,E[Q]=JE(Ae,E,Ae,fe)),gu(fe)&&_h(B,E,fe),null!=l&&yh(E,fe,c)}function yr(n,e,t){const r=Ot();return wr(r,Ba(),e)&&ei(wn(),er(),r,n,e,r[11],t,!1),yr}function bh(n,e,t,r,i){const l=i?"class":"style";s_(n,t,e.inputs[l],l,r)}function bn(n,e,t,r){const i=Ot(),o=wn(),l=22+n,c=i[11],E=i[l]=Bd(c,e,function DA(){return vn.lFrame.currentNamespace}()),B=o.firstCreatePass?function EP(n,e,t,r,i,o,l){const c=e.consts,B=Ja(e,n,2,i,Ss(c,o));return Dh(e,t,B,Ss(c,l)),null!==B.attrs&&Yu(B,B.attrs,!1),null!==B.mergedAttrs&&Yu(B,B.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,B),B}(l,o,i,0,e,t,r):o.data[l];Ki(B,!0);const Q=B.mergedAttrs;null!==Q&&yu(c,E,Q);const fe=B.classes;null!==fe&&Kd(c,E,fe);const Ae=B.styles;return null!==Ae&&rE(c,E,Ae),64!=(64&B.flags)&&xu(o,i,E,B),0===function aA(){return vn.lFrame.elementDepthCount}()&&Or(E,i),function oA(){vn.lFrame.elementDepthCount++}(),gu(B)&&(_h(o,i,B),function WE(n,e,t){if(Kf(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const l=n.data[o];l.contentQueries&&l.contentQueries(1,t[o],o)}}}(o,B,i)),null!==r&&yh(i,B),bn}function Nn(){let n=fr();Jf()?ed():(n=n.parent,Ki(n,!1));const e=n;!function lA(){vn.lFrame.elementDepthCount--}();const t=wn();return t.firstCreatePass&&(vu(t,n),Kf(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function IA(n){return 0!=(16&n.flags)}(e)&&bh(t,e,Ot(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function RA(n){return 0!=(32&n.flags)}(e)&&bh(t,e,Ot(),e.stylesWithoutHost,!1),Nn}function Tr(n,e,t,r){return bn(n,e,t,r),Nn(),Tr}function Lh(){return Ot()}function Qu(n){return!!n&&"function"==typeof n.then}const __=function E_(n){return!!n&&"function"==typeof n.subscribe};function Li(n,e,t,r){const i=Ot(),o=wn(),l=fr();return y_(o,i,i[11],l,n,e,0,r),Li}function Fh(n,e){const t=fr(),r=Ot(),i=wn();return y_(i,r,r_(nd(i.data),t,r),t,n,e),Fh}function y_(n,e,t,r,i,o,l,c){const E=gu(r),Q=n.firstCreatePass&&n_(n),fe=e[8],Ae=t_(e);let be=!0;if(3&r.type||c){const gt=gi(r,e),dt=c?c(gt):gt,Ft=Ae.length,pt=c?mn=>c(sr(mn[r.index])):r.index;let Kt=null;if(!c&&E&&(Kt=function yP(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const l=i[o];if(l===t&&i[o+1]===r){const c=e[7],E=i[o+2];return c.length>E?c[E]:null}"string"==typeof l&&(o+=2)}return null}(n,e,i,r.index)),null!==Kt)(Kt.__ngLastListenerFn__||Kt).__ngNextListenerFn__=o,Kt.__ngLastListenerFn__=o,be=!1;else{o=D_(r,e,fe,o,!1);const mn=t.listen(dt,i,o);Ae.push(o,mn),Q&&Q.push(i,pt,Ft,Ft+1)}}else o=D_(r,e,fe,o,!1);const je=r.outputs;let Xe;if(be&&null!==je&&(Xe=je[i])){const gt=Xe.length;if(gt)for(let dt=0;dt<gt;dt+=2){const On=e[Xe[dt]][Xe[dt+1]].subscribe(o),Zn=Ae.length;Ae.push(o,On),Q&&Q.push(i,r.index,Zn,-(Zn+1))}}}function T_(n,e,t,r){try{return!1!==t(r)}catch(i){return i_(n,i),!1}}function D_(n,e,t,r,i){return function o(l){if(l===Function)return r;Sh(2&n.flags?Xr(n.index,e):e);let E=T_(e,0,r,l),B=o.__ngNextListenerFn__;for(;B;)E=T_(e,0,B,l)&&E,B=B.__ngNextListenerFn__;return i&&!1===E&&(l.preventDefault(),l.returnValue=!1),E}}function Qi(n=1){return function mA(n){return(vn.lFrame.contextLView=function vA(n,e){for(;n>0;)e=e[15],n--;return e}(n,vn.lFrame.contextLView))[8]}(n)}function TP(n,e){let t=null;const r=function bR(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?oE(n,o,!0):LR(r,o))return i}else t=i}return t}function Os(n){const e=Ot()[16][6];if(!e.projection){const r=e.projection=Qo(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const l=n?TP(o,n):0;null!==l&&(i[l]?i[l].projectionNext=o:r[l]=o,i[l]=o),o=o.next}}}function kr(n,e=0,t){const r=Ot(),i=wn(),o=Ja(i,22+n,16,null,t||null);null===o.projection&&(o.projection=e),ed(),64!=(64&o.flags)&&function MR(n,e,t){nE(e[11],0,e,t,Yv(n,t,e),Xv(t.parent||e[6],t,e))}(i,r,o)}function xh(n,e,t){return Bh(n,"",e,"",t),xh}function Bh(n,e,t,r,i){const o=Ot(),l=no(o,e,t,r);return l!==En&&ei(wn(),er(),o,n,l,o[11],i,!1),Bh}function Uh(n,e,t,r,i,o,l){const c=Ot(),E=ro(c,e,t,r,i,o);return E!==En&&ei(wn(),er(),c,n,E,c[11],l,!1),Uh}function O_(n,e,t,r,i){const o=n[t+1],l=null===e;let c=r?Ni(o):cs(o),E=!1;for(;0!==c&&(!1===E||l);){const Q=n[c+1];MP(n[c],e)&&(E=!0,n[c+1]=r?uh(Q):oh(Q)),c=r?Ni(Q):cs(Q)}E&&(n[t+1]=r?oh(o):uh(o))}function MP(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ga(n,e)>=0}function Xu(n,e,t){return Fi(n,e,t,!1),Xu}function Xi(n,e){return Fi(n,e,null,!0),Xi}function Fi(n,e,t,r){const i=Ot(),o=wn(),l=as(2);o.firstUpdatePass&&function U_(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Br()],l=function B_(n,e){return e>=n.expandoStartIndex}(n,t);(function V_(n,e){return 0!=(n.flags&(e?16:32))})(o,r)&&null===e&&!l&&(e=!1),e=function NP(n,e,t,r){const i=nd(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=fl(t=kh(null,n,e,t,r),e.attrs,r),o=null);else{const l=e.directiveStylingLast;if(-1===l||n[l]!==i)if(t=kh(i,n,e,t,r),null===o){let E=function LP(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==cs(r))return n[Ni(r)]}(n,e,r);void 0!==E&&Array.isArray(E)&&(E=kh(null,n,e,E[1],r),E=fl(E,e.attrs,r),function FP(n,e,t,r){n[Ni(t?e.classBindings:e.styleBindings)]=r}(n,e,r,E))}else o=function xP(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=fl(r,n[o].hostAttrs,t);return fl(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function DP(n,e,t,r,i,o){let l=o?e.classBindings:e.styleBindings,c=Ni(l),E=cs(l);n[r]=t;let Q,B=!1;if(Array.isArray(t)){const fe=t;Q=fe[1],(null===Q||Ga(fe,Q)>0)&&(B=!0)}else Q=t;if(i)if(0!==E){const Ae=Ni(n[c+1]);n[r+1]=ju(Ae,c),0!==Ae&&(n[Ae+1]=lh(n[Ae+1],r)),n[c+1]=function m0(n,e){return 131071&n|e<<17}(n[c+1],r)}else n[r+1]=ju(c,0),0!==c&&(n[c+1]=lh(n[c+1],r)),c=r;else n[r+1]=ju(E,0),0===c?c=r:n[E+1]=lh(n[E+1],r),E=r;B&&(n[r+1]=oh(n[r+1])),O_(n,Q,r,!0),O_(n,Q,r,!1),function CP(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Ga(o,e)>=0&&(t[r+1]=uh(t[r+1]))}(e,Q,n,r,o),l=ju(c,E),o?e.classBindings=l:e.styleBindings=l}(i,o,e,t,l,r)}}(o,n,l,r),e!==En&&wr(i,l,e)&&function j_(n,e,t,r,i,o,l,c){if(!(3&e.type))return;const E=n.data,B=E[c+1];qu(function LE(n){return 1==(1&n)}(B)?H_(E,e,t,i,cs(B),l):void 0)||(qu(o)||function NE(n){return 2==(2&n)}(B)&&(o=H_(E,null,t,i,c,l)),function AR(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Yr.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Yr.Important),n.setStyle(t,r,i,o))}}(r,l,pu(Br(),t),i,o))}(o,o.data[Br()],i,i[11],n,i[l+1]=function kP(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=_t(Jr(n)))),n}(e,t),r,l)}function kh(n,e,t,r,i){let o=null;const l=t.directiveEnd;let c=t.directiveStylingLast;for(-1===c?c=t.directiveStart:c++;c<l&&(o=e[c],r=fl(r,o.hostAttrs,i),o!==n);)c++;return null!==n&&(t.directiveStylingLast=c),r}function fl(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const l=e[o];"number"==typeof l?i=l:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Zr(n,l,!!t||e[++o]))}return void 0===n?null:n}function H_(n,e,t,r,i,o){const l=null===e;let c;for(;i>0;){const E=n[i],B=Array.isArray(E),Q=B?E[1]:E,fe=null===Q;let Ae=t[i+1];Ae===En&&(Ae=fe?Fn:void 0);let be=fe?gd(Ae,r):Q===r?Ae:void 0;if(B&&!qu(be)&&(be=gd(E,r)),qu(be)&&(c=be,l))return c;const je=n[i+1];i=l?Ni(je):cs(je)}if(null!==e){let E=o?e.residualClasses:e.residualStyles;null!=E&&(c=gd(E,r))}return c}function qu(n){return void 0!==n}function Mr(n,e=""){const t=Ot(),r=wn(),i=n+22,o=r.firstCreatePass?Ja(r,i,1,e,null):r.data[i],l=t[i]=function xd(n,e){return n.createText(e)}(t[11],e);xu(r,t,l,o),Ki(o,!1)}function Zu(n){return oa("",n,""),Zu}function oa(n,e,t){const r=Ot(),i=no(r,n,e,t);return i!==En&&function fs(n,e,t){const r=pu(e,n);!function Kv(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,Br(),i),oa}function jh(n,e,t){const r=Ot();if(wr(r,Ba(),e)){const o=wn(),l=er();ei(o,l,r,n,e,r_(nd(o.data),l,r),t,!0)}return jh}const ho="en-US";let uy=ho;function Kh(n,e,t,r,i){if(n=Ht(n),Array.isArray(n))for(let o=0;o<n.length;o++)Kh(n[o],e,t,r,i);else{const o=wn(),l=Ot();let c=na(n)?n:Ht(n.provide),E=yE(n);const B=fr(),Q=1048575&B.providerIndexes,fe=B.directiveStart,Ae=B.providerIndexes>>20;if(na(n)||!n.multi){const be=new Ko(E,i,At),je=Gh(c,e,i?Q:Q+Ae,fe);-1===je?(Mu(Go(B,l),o,c),Wh(o,n,e.length),e.push(c),B.directiveStart++,B.directiveEnd++,i&&(B.providerIndexes+=1048576),t.push(be),l.push(be)):(t[je]=be,l[je]=be)}else{const be=Gh(c,e,Q+Ae,fe),je=Gh(c,e,Q,Q+Ae),Xe=be>=0&&t[be],gt=je>=0&&t[je];if(i&&!gt||!i&&!Xe){Mu(Go(B,l),o,c);const dt=function rb(n,e,t,r,i){const o=new Ko(n,t,At);return o.multi=[],o.index=e,o.componentProviders=0,Ly(o,i,r&&!t),o}(i?nb:tb,t.length,i,r,E);!i&&gt&&(t[je].providerFactory=dt),Wh(o,n,e.length,0),e.push(c),B.directiveStart++,B.directiveEnd++,i&&(B.providerIndexes+=1048576),t.push(dt),l.push(dt)}else Wh(o,n,be>-1?be:je,Ly(t[i?je:be],E,!i&&r));!i&&r&&gt&&t[je].componentProviders++}}}function Wh(n,e,t,r){const i=na(e),o=function GR(n){return!!n.useClass}(e);if(i||o){const E=(o?Ht(e.useClass):e).prototype.ngOnDestroy;if(E){const B=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const Q=B.indexOf(t);-1===Q?B.push(t,[r,E]):B[Q+1].push(r,E)}else B.push(t,E)}}}function Ly(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Gh(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function tb(n,e,t,r){return Yh(this.multi,[])}function nb(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const l=this.providerFactory.componentProviders,c=Yo(t,t[1],this.providerFactory.index,r);o=c.slice(0,l),Yh(i,o);for(let E=l;E<c.length;E++)o.push(c[E])}else o=[],Yh(i,o);return o}function Yh(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ua(n,e=[]){return t=>{t.providersResolver=(r,i)=>function eb(n,e,t){const r=wn();if(r.firstCreatePass){const i=Oi(n);Kh(t,r.data,r.blueprint,i,!0),Kh(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class sb{resolveComponentFactory(e){throw function ib(n){const e=Error(`No component factory found for ${_t(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let po=(()=>{class n{}return n.NULL=new sb,n})();class bs{}class xy{}class By{}function ob(){return mo(fr(),Ot())}function mo(n,e){return new Sr(gi(n,e))}let Sr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=ob,n})();function lb(n){return n instanceof Sr?n.nativeElement:n}class ml{}let cb=(()=>{class n{}return n.\u0275prov=xt({token:n,providedIn:"root",factory:()=>null}),n})();class vo{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const fb=new vo("14.0.5"),zh={};function ic(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(sr(o)),Pi(o))for(let c=10;c<o.length;c++){const E=o[c],B=E[1].firstChild;null!==B&&ic(E[1],E,B,r)}const l=t.type;if(8&l)ic(n,e,t.child,r);else if(32&l){const c=Nd(t,e);let E;for(;E=c();)r.push(E)}else if(16&l){const c=eE(e,t);if(Array.isArray(c))r.push(...c);else{const E=al(e[16]);ic(E[1],E,c,r,!0)}}t=i?t.projectionNext:t.next}return r}class vl{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return ic(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Pi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Ud(e,r),Au(t,r))}this._attachedToViewContainer=!1}Gv(this._lView[1],this._lView)}onDestroy(e){YE(this._lView[1],this._lView,null,e)}markForCheck(){Sh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Ih(n,e,t){const r=e[10];r.begin&&r.begin();try{ll(n,e,n.template,t)}catch(i){throw i_(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Mt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mR(n,e){ol(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Mt(902,!1);this._appRef=e}}class db extends vl{constructor(e){super(e),this._view=e}detectChanges(){e_(this._view)}checkNoChanges(){}get context(){return null}}class $h extends po{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=jn(e);return new Qh(t,this.ngModule)}}function Uy(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class gb{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){const i=this.injector.get(e,zh,r);return i!==zh||t===zh?i:this.parentInjector.get(e,t,r)}}class Qh extends By{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function xR(n){return n.map(FR).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Uy(this.componentDef.inputs)}get outputs(){return Uy(this.componentDef.outputs)}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof ra?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const l=o?new gb(e,o):e,c=l.get(ml,null);if(null===c)throw new Mt(407,!1);const E=l.get(cb,null),B=c.createRenderer(null,this.componentDef),Q=this.componentDef.selectors[0][0]||"div",fe=r?function b0(n,e,t){return n.selectRootElement(e,t===Qr.ShadowDom)}(B,r,this.componentDef.encapsulation):Bd(c.createRenderer(null,this.componentDef),Q,function hb(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(Q)),Ae=this.componentDef.onPush?288:272,be=function nP(n,e){return{components:[],scheduler:n||aR,clean:J0,playerHandler:e||null,flags:0}}(),je=Th(0,null,null,1,0,null,null,null,null,null),Xe=Ku(null,je,be,Ae,null,null,c,B,E,l,null);let gt,dt;id(Xe);try{const Ft=function eP(n,e,t,r,i,o){const l=t[1];t[22]=n;const E=Ja(l,22,2,"#host",null),B=E.mergedAttrs=e.hostAttrs;null!==B&&(Yu(E,B,!0),null!==n&&(yu(i,n,B),null!==E.classes&&Kd(i,n,E.classes),null!==E.styles&&rE(i,n,E.styles)));const Q=r.createRenderer(n,e),fe=Ku(t,GE(e),null,e.onPush?32:16,t[22],E,r,Q,o||null,null,null);return l.firstCreatePass&&(Mu(Go(E,t),l,e.type),XE(l,E),qE(E,t.length,1)),Gu(t,fe),t[22]=fe}(fe,this.componentDef,Xe,c,B);if(fe)if(r)yu(B,fe,["ng-version",fb.full]);else{const{attrs:pt,classes:Kt}=function BR(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!wi(i))break;i=o}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);pt&&yu(B,fe,pt),Kt&&Kt.length>0&&Kd(B,fe,Kt.join(" "))}if(dt=$f(je,22),void 0!==t){const pt=dt.projection=[];for(let Kt=0;Kt<this.ngContentSelectors.length;Kt++){const mn=t[Kt];pt.push(null!=mn?Array.from(mn):null)}}gt=function tP(n,e,t,r,i){const o=t[1],l=function B0(n,e,t){const r=fr();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),ZE(n,r,e,eo(n,e,1,null),t));const i=Yo(e,n,r.directiveStart,r);Or(i,e);const o=gi(r,e);return o&&Or(o,e),i}(o,t,e);if(r.components.push(l),n[8]=l,null!==i)for(const E of i)E(l,e);if(e.contentQueries){const E=fr();e.contentQueries(1,l,E.directiveStart)}const c=fr();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(As(c.index),$E(t[1],c,0,c.directiveStart,c.directiveEnd,e),QE(e,l)),l}(Ft,this.componentDef,Xe,be,[rP]),Wu(je,Xe,null)}finally{sd()}return new mb(this.componentType,gt,mo(dt,Xe),Xe,dt)}}class mb extends class ab{}{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new db(i),this.componentType=e}get injector(){return new ja(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class ky extends bs{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $h(this);const r=Ge(e);this._bootstrapComponents=us(r.bootstrap),this._r3Injector=DE(e,t,[{provide:bs,useValue:this},{provide:po,useValue:this.componentFactoryResolver}],_t(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(e)}get(e,t=br.THROW_IF_NOT_FOUND,r=on.Default){return e===br||e===bs||e===zd?this:this._r3Injector.get(e,t,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Xh extends xy{constructor(e){super(),this.moduleType=e}create(e){return new ky(this.moduleType,e)}}class Eb extends bs{constructor(e,t,r){super(),this.componentFactoryResolver=new $h(this),this.instance=null;const i=new _E([...e,{provide:bs,useValue:this},{provide:po,useValue:this.componentFactoryResolver}],t||Xd(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function sc(n,e=null,t=null){return new Eb(n,e,t).injector}function Zh(n){return e=>{setTimeout(n,void 0,e)}}const Kn=class Yb extends ge{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),l=r;if(e&&"object"==typeof e){const E=e;i=E.next?.bind(E),o=E.error?.bind(E),l=E.complete?.bind(E)}this.__isAsync&&(o=Zh(o),i&&(i=Zh(i)),l&&(l=Zh(l)));const c=super.subscribe({next:i,error:o,complete:l});return e instanceof T&&e.add(c),c}};function zb(){return this._results[ia()]()}class ca{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ia(),r=ca.prototype;r[t]||(r[t]=zb)}get changes(){return this._changes||(this._changes=new Kn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=qr(e);(this._changesDetected=!function kA(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ji=(()=>{class n{}return n.__NG_ELEMENT_ID__=Xb,n})();const $b=Ji,Qb=class extends $b{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=Ku(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const l=this._declarationLView[19];return null!==l&&(i[19]=l.createEmbeddedView(r)),Wu(r,i,e),new vl(i)}};function Xb(){return ac(fr(),Ot())}function ac(n,e){return 4&n.type?new Qb(e,n,mo(n,e)):null}let ti=(()=>{class n{}return n.__NG_ELEMENT_ID__=qb,n})();function qb(){return Jy(fr(),Ot())}const Zb=ti,qy=class extends Zb{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return mo(this._hostTNode,this._hostLView)}get injector(){return new ja(this._hostTNode,this._hostLView)}get parentInjector(){const e=Cu(this._hostTNode,this._hostLView);if($m(e)){const t=ka(e,this._hostLView),r=Ua(e);return new ja(t[1].data[r+8],t)}return new ja(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Zy(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const l=e.createEmbeddedView(t||{},o);return this.insert(l,i),l}createComponent(e,t,r,i,o){const l=e&&!function $o(n){return"function"==typeof n}(e);let c;if(l)c=t;else{const fe=t||{};c=fe.index,r=fe.injector,i=fe.projectableNodes,o=fe.environmentInjector||fe.ngModuleRef}const E=l?e:new Qh(jn(e)),B=r||this.parentInjector;if(!o&&null==E.ngModule){const Ae=(l?B:this.parentInjector).get(ra,null);Ae&&(o=Ae)}const Q=E.create(B,i,void 0,o);return this.insert(Q.hostView,c),Q}insert(e,t){const r=e._lView,i=r[1];if(function sA(n){return Pi(n[3])}(r)){const Q=this.indexOf(e);if(-1!==Q)this.detach(Q);else{const fe=r[3],Ae=new qy(fe,fe[6],fe[3]);Ae.detach(Ae.indexOf(e))}}const o=this._adjustIndex(t),l=this._lContainer;!function ER(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],av(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const l=e[17];null!==l&&t!==l&&function _R(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(l,e);const c=e[19];null!==c&&c.insertView(n),e[2]|=64}(i,r,l,o);const c=Hd(o,l),E=r[11],B=Fu(E,l[7]);return null!==B&&function pR(n,e,t,r,i,o){r[0]=i,r[6]=e,ol(n,r,t,1,i,o)}(i,l[6],E,r,B,c),e.attachToViewContainerRef(),av(Jh(l),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Zy(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Ud(this._lContainer,t);r&&(Au(Jh(this._lContainer),t),Gv(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Ud(this._lContainer,t);return r&&null!=Au(Jh(this._lContainer),t)?new vl(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Zy(n){return n[8]}function Jh(n){return n[8]||(n[8]=[])}function Jy(n,e){let t;const r=e[n.index];if(Pi(r))t=r;else{let i;if(8&n.type)i=sr(r);else{const o=e[11];i=o.createComment("");const l=gi(n,e);ta(o,Fu(o,l),i,function CR(n,e){return n.nextSibling(e)}(o,l),!1)}e[n.index]=t=JE(r,e,i,n),Gu(e,t)}return new qy(t,n,e)}class eg{constructor(e){this.queryList=e,this.matches=null}clone(){return new eg(this.queryList)}setDirty(){this.queryList.setDirty()}}class tg{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const l=t.getByIndex(o);i.push(this.queries[l.indexInDeclarationView].clone())}return new tg(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==iT(e,t).matches&&this.queries[t].setDirty()}}class eT{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class ng{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new ng(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class rg{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new rg(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,tw(t,o)),this.matchTNodeWithReadOption(e,t,Su(t,e,o,!1,!1))}else r===Ji?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Su(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===Sr||i===ti||i===Ji&&4&t.type)this.addMatch(t.index,-2);else{const o=Su(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function tw(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function rw(n,e,t,r){return-1===t?function nw(n,e){return 11&n.type?mo(n,e):4&n.type?ac(n,e):null}(e,n):-2===t?function iw(n,e,t){return t===Sr?mo(e,n):t===Ji?ac(e,n):t===ti?Jy(e,n):void 0}(n,e,r):Yo(n,n[1],t,e)}function tT(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const o=n.data,l=t.matches,c=[];for(let E=0;E<l.length;E+=2){const B=l[E];c.push(B<0?null:rw(e,o[B],l[E+1],t.metadata.read))}i.matches=c}return i.matches}function ig(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const l=tT(n,e,i,t);for(let c=0;c<o.length;c+=2){const E=o[c];if(E>0)r.push(l[c/2]);else{const B=o[c+1],Q=e[-E];for(let fe=10;fe<Q.length;fe++){const Ae=Q[fe];Ae[17]===Ae[3]&&ig(Ae[1],Ae,B,r)}if(null!==Q[9]){const fe=Q[9];for(let Ae=0;Ae<fe.length;Ae++){const be=fe[Ae];ig(be[1],be,B,r)}}}}}return r}function ni(n){const e=Ot(),t=wn(),r=Um();rd(r+1);const i=iT(t,r);if(n.dirty&&bm(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?ig(t,e,r,[]):tT(t,e,i,r);n.reset(o,lb),n.notifyOnChanges()}return!0}return!1}function Eo(n,e,t){const r=wn();r.firstCreatePass&&(rT(r,new eT(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),nT(r,Ot(),e)}function ws(n,e,t,r){const i=wn();if(i.firstCreatePass){const o=fr();rT(i,new eT(e,t,r),o.index),function aw(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}nT(i,Ot(),t)}function ri(){return function sw(n,e){return n[19].queries[e].queryList}(Ot(),Um())}function nT(n,e,t){const r=new ca(4==(4&t));YE(n,e,r,r.destroy),null===e[19]&&(e[19]=new tg),e[19].queries.push(new eg(r))}function rT(n,e,t){null===n.queries&&(n.queries=new ng),n.queries.track(new rg(e,t))}function iT(n,e){return n.queries.getByIndex(e)}function lc(...n){}const uc=new Xt("Application Initializer");let cc=(()=>{class n{constructor(t){this.appInits=t,this.resolve=lc,this.reject=lc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Qu(o))t.push(o);else if(__(o)){const l=new Promise((c,E)=>{o.subscribe({complete:c,error:E})});t.push(l)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Ct(uc,8))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tl=new Xt("AppId",{providedIn:"root",factory:function CT(){return`${ug()}${ug()}${ug()}`}});function ug(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const MT=new Xt("Platform Initializer"),fc=new Xt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ST=new Xt("appBootstrapListener"),Dl=new Xt("AnimationModuleType");let cg=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const es=new Xt("LocaleId",{providedIn:"root",factory:()=>bi(es,on.Optional|on.SkipSelf)||function Iw(){return typeof $localize<"u"&&$localize.locale||ho}()});class Pw{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let fg=(()=>{class n{compileModuleSync(t){return new Xh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=us(Ge(t).declarations).reduce((l,c)=>{const E=jn(c);return E&&l.push(new Qh(E)),l},[]);return new Pw(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ww=(()=>Promise.resolve(0))();function dg(n){typeof Zone>"u"?ww.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Bn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kn(!1),this.onMicrotaskEmpty=new Kn(!1),this.onStable=new Kn(!1),this.onError=new Kn(!1),typeof Zone>"u")throw new Mt(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function Nw(){let n=kn.requestAnimationFrame,e=kn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function xw(n){const e=()=>{!function Fw(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(kn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,gg(n),n.isCheckStableRunning=!0,hg(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),gg(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,l,c)=>{try{return RT(n),t.invokeTask(i,o,l,c)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),PT(n)}},onInvoke:(t,r,i,o,l,c,E)=>{try{return RT(n),t.invoke(i,o,l,c,E)}finally{n.shouldCoalesceRunChangeDetection&&e(),PT(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,gg(n),hg(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bn.isInAngularZone())throw new Mt(909,!1)}static assertNotInAngularZone(){if(Bn.isInAngularZone())throw new Mt(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,l=o.scheduleEventTask("NgZoneEvent: "+i,e,Lw,lc,lc);try{return o.runTask(l,t,r)}finally{o.cancelTask(l)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const Lw={};function hg(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gg(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function RT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function PT(n){n._nesting--,hg(n)}class Bw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Kn,this.onMicrotaskEmpty=new Kn,this.onStable=new Kn,this.onError=new Kn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const OT=new Xt(""),dc=new Xt("");let vg,pg=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vg||(function Uw(n){vg=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bn.assertNotInAngularZone(),dg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())dg(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(l=>l.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(Ct(Bn),Ct(mg),Ct(dc))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),mg=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return vg?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Ns=null;const bT=new Xt("AllowMultipleToken"),Eg=new Xt("PlatformDestroyListeners");class wT{constructor(e,t){this.name=e,this.token=t}}function LT(n,e,t=[]){const r=`Platform: ${e}`,i=new Xt(r);return(o=[])=>{let l=_g();if(!l||l.injector.get(bT,!1)){const c=[...t,...o,{provide:i,useValue:!0}];n?n(c):function Hw(n){if(Ns&&!Ns.get(bT,!1))throw new Mt(400,!1);Ns=n;const e=n.get(xT);(function NT(n){const e=n.get(MT,null);e&&e.forEach(t=>t())})(n)}(function FT(n=[],e){return br.create({name:e,providers:[{provide:$d,useValue:"platform"},{provide:Eg,useValue:new Set([()=>Ns=null])},...n]})}(c,r))}return function Kw(n){const e=_g();if(!e)throw new Mt(401,!1);return e}()}}function _g(){return Ns?.get(xT)??null}let xT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function Ww(n,e){let t;return t="noop"===n?new Bw:("zone.js"===n?void 0:n)||new Bn(e),t}(r?.ngZone,function BT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Bn,useValue:i}];return i.run(()=>{const l=br.create({providers:o,parent:this.injector,name:t.moduleType.name}),c=t.create(l),E=c.injector.get(ls,null);if(!E)throw new Mt(402,!1);return i.runOutsideAngular(()=>{const B=i.onError.subscribe({next:Q=>{E.handleError(Q)}});c.onDestroy(()=>{hc(this._modules,c),B.unsubscribe()})}),function UT(n,e,t){try{const r=t();return Qu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(E,i,()=>{const B=c.injector.get(cc);return B.runInitializers(),B.donePromise.then(()=>(function cy(n){it(n,"Expected localeId to be defined"),"string"==typeof n&&(uy=n.toLowerCase().replace(/_/g,"-"))}(c.injector.get(es,ho)||ho),this._moduleDoBootstrap(c),c))})})}bootstrapModule(t,r=[]){const i=kT({},r);return function kw(n,e,t){const r=new Xh(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Cl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Mt(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Mt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Eg,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Ct(br))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function kT(n,e){return Array.isArray(e)?e.reduce(kT,n):{...n,...e}}let Cl=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Z(c=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{c.next(this._stable),c.complete()})}),l=new Z(c=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Bn.assertNotInAngularZone(),dg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,c.next(!0))})})});const B=this._zone.onUnstable.subscribe(()=>{Bn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{c.next(!1)}))});return()=>{E.unsubscribe(),B.unsubscribe()}});this.isStable=nt(o,l.pipe(Nt()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof By;if(!this._injector.get(cc).done)throw!i&&function yo(n){const e=jn(n)||vr(n)||Er(n);return null!==e&&e.standalone}(t),new Mt(405,false);let l;l=i?t:this._injector.get(po).resolveComponentFactory(t),this.componentTypes.push(l.componentType);const c=function jw(n){return n.isBoundToModule}(l)?void 0:this._injector.get(bs),B=l.create(br.NULL,[],r||l.selector,c),Q=B.location.nativeElement,fe=B.injector.get(OT,null);return fe?.registerApplication(Q),B.onDestroy(()=>{this.detachView(B.hostView),hc(this.components,B),fe?.unregisterApplication(Q)}),this._loadComponent(B),B}tick(){if(this._runningTick)throw new Mt(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;hc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ST,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Mt(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Ct(Bn),Ct(br),Ct(ls))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let HT=!0,Ls=(()=>{class n{}return n.__NG_ELEMENT_ID__=zw,n})();function zw(n){return function $w(n,e,t){if(hu(n)&&!t){const r=Xr(n.index,e);return new vl(r,r)}return 47&n.type?new vl(e[16],e):null}(fr(),Ot(),16==(16&n))}class YT{constructor(){}supports(e){return ul(e)}create(e){return new eN(e)}}const Jw=(n,e)=>e;class eN{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Jw}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const l=!r||t&&t.currentIndex<$T(r,i,o)?t:r,c=$T(l,i,o),E=l.currentIndex;if(l===r)i--,r=r._nextRemoved;else if(t=t._next,null==l.previousIndex)i++;else{o||(o=[]);const B=c-i,Q=E-i;if(B!=Q){for(let Ae=0;Ae<B;Ae++){const be=Ae<o.length?o[Ae]:o[Ae]=0,je=be+Ae;Q<=je&&je<B&&(o[Ae]=be+1)}o[l.previousIndex]=Q-B}}c!==E&&e(l,c,E)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ul(e))throw new Mt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,l,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],l=this._trackByFn(c,o),null!==t&&Object.is(t.trackById,l)?(r&&(t=this._verifyReinsertion(t,o,l,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,l,c),r=!0),t=t._next}else i=0,function dP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[ia()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,c=>{l=this._trackByFn(i,c),null!==t&&Object.is(t.trackById,l)?(r&&(t=this._verifyReinsertion(t,c,l,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)):(t=this._mismatch(t,c,l,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new tN(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new zT),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class tN{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nN{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class zT{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new nN,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $T(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function XT(){return new mc([new YT])}let mc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||XT()),deps:[[n,new Ya,new pi]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Mt(901,!1)}}return n.\u0275prov=xt({token:n,providedIn:"root",factory:XT}),n})();const oN=LT(null,"core",[]);let lN=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Ct(Cl))},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({}),n})();function Do(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let vc=null;function Fs(){return vc}const Rn=new Xt("DocumentToken");let Ec=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:function(){return function dN(){return Ct(ZT)}()},providedIn:"platform"}),n})();const hN=new Xt("Location Initialized");let ZT=(()=>{class n extends Ec{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fs().getBaseHref(this._doc)}onPopState(t){const r=Fs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Fs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){JT()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){JT()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Ct(Rn))},n.\u0275prov=xt({token:n,factory:function(){return function gN(){return new ZT(Ct(Rn))}()},providedIn:"platform"}),n})();function JT(){return!!window.history.pushState}function Mg(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function eD(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function gs(n){return n&&"?"!==n[0]?"?"+n:n}let da=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:function(){return function pN(){const n=Ct(Rn).location;return new nD(Ct(Ec),n&&n.origin||"")}()},providedIn:"root"}),n})();const tD=new Xt("appBaseHref");let nD=(()=>{class n extends da{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Mg(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+gs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const l=this.prepareExternalUrl(i+gs(o));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){const l=this.prepareExternalUrl(i+gs(o));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Ct(Ec),Ct(tD,8))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),mN=(()=>{class n extends da{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Mg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let l=this.prepareExternalUrl(i+gs(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,o){let l=this.prepareExternalUrl(i+gs(o));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Ct(Ec),Ct(tD,8))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),Sg=(()=>{class n{constructor(t){this._subject=new Kn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=eD(rD(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+gs(r))}normalize(t){return n.stripTrailingSlash(function EN(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,rD(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=gs,n.joinWithSlash=Mg,n.stripTrailingSlash=eD,n.\u0275fac=function(t){return new(t||n)(Ct(da))},n.\u0275prov=xt({token:n,factory:function(){return function vN(){return new Sg(Ct(da))}()},providedIn:"root"}),n})();function rD(n){return n.replace(/\/index.html$/,"")}function dD(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class rL{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fg=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new rL(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===o?void 0:o);else if(null!==o){const c=r.get(o);r.move(c,l),pD(c,i)}});for(let i=0,o=r.length;i<o;i++){const c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{pD(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(At(ti),At(Ji),At(mc))},n.\u0275dir=Hn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function pD(n,e){n.context.$implicit=e.item}let Il=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sL,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){mD("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){mD("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(At(ti),At(Ji))},n.\u0275dir=Hn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class sL{constructor(){this.$implicit=null,this.ngIf=null}}function mD(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${_t(e)}'.`)}let Rl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({}),n})();const _D="browser";let xL=(()=>{class n{}return n.\u0275prov=xt({token:n,providedIn:"root",factory:()=>new BL(Ct(Rn),window)}),n})();class BL{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function UL(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const l=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=yD(this.window.history)||yD(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function yD(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class TD{}class jg extends class kL extends class fN{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function cN(n){vc||(vc=n)}(new jg)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function jL(){return Pl=Pl||document.querySelector("base"),Pl?Pl.getAttribute("href"):null}();return null==t?null:function HL(n){Rc=Rc||document.createElement("a"),Rc.setAttribute("href",n);const e=Rc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dD(document.cookie,e)}}let Rc,Pl=null;const DD=new Xt("TRANSITION_ID"),KL=[{provide:uc,useFactory:function VL(n,e,t){return()=>{t.get(cc).donePromise.then(()=>{const r=Fs(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[DD,Rn,br],multi:!0}];let GL=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();const Ol=new Xt("EventManagerPlugins");let Pc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const l=i[o];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Ct(Ol),Ct(Bn))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();class Hg{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Fs().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let CD=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),bl=(()=>{class n extends CD{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const l=this._doc.createElement("style");l.textContent=o,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(MD),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(MD))}}return n.\u0275fac=function(t){return new(t||n)(Ct(Rn))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();function MD(n){Fs().remove(n)}const Vg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kg=/%COMP%/g;function Oc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Oc(n,i,t):(i=i.replace(Kg,n),t.push(i))}return t}function ID(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let bc=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Wg(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Qr.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new qL(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Qr.ShadowDom:return new ZL(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Oc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Ct(Pc),Ct(bl),Ct(Tl))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();class Wg{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Vg[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(PD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(PD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Vg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Vg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Yr.DashCase|Yr.Important)?e.style.setProperty(t,r,i&Yr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Yr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ID(r)):this.eventManager.addEventListener(e,t,ID(r))}}function PD(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qL extends Wg{constructor(e,t,r,i){super(e),this.component=r;const o=Oc(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function $L(n){return"_ngcontent-%COMP%".replace(Kg,n)}(i+"-"+r.id),this.hostAttr=function QL(n){return"_nghost-%COMP%".replace(Kg,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ZL extends Wg{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Oc(i.id,i.styles,[]);for(let l=0;l<o.length;l++){const c=document.createElement("style");c.textContent=o[l],this.shadowRoot.appendChild(c)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let JL=(()=>{class n extends Hg{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(Ct(Rn))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();const OD=["alt","control","meta","shift"],tF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bD={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},nF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let rF=(()=>{class n extends Hg{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),l=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fs().onAndCancel(t,o.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let l="";if(OD.forEach(E=>{const B=r.indexOf(E);B>-1&&(r.splice(B,1),l+=E+".")}),l+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=l,c}static getEventFullKey(t){let r="",i=function iF(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&bD.hasOwnProperty(e)&&(e=bD[e]))}return tF[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),OD.forEach(o=>{o!=i&&nF[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{n.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Ct(Rn))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();const lF=LT(oN,"browser",[{provide:fc,useValue:_D},{provide:MT,useValue:function sF(){jg.makeCurrent()},multi:!0},{provide:Rn,useFactory:function oF(){return function cI(n){_d=n}(document),document},deps:[]}]),ND=new Xt(""),LD=[{provide:dc,useClass:class WL{addToWindow(e){kn.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},kn.getAllAngularTestabilities=()=>e.getAllTestabilities(),kn.getAllAngularRootElements=()=>e.getAllRootElements(),kn.frameworkStabilizers||(kn.frameworkStabilizers=[]),kn.frameworkStabilizers.push(r=>{const i=kn.getAllAngularTestabilities();let o=i.length,l=!1;const c=function(E){l=l||E,o--,0==o&&r(l)};i.forEach(function(E){E.whenStable(c)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Fs().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:OT,useClass:pg,deps:[Bn,mg,dc]},{provide:pg,useClass:pg,deps:[Bn,mg,dc]}],FD=[{provide:$d,useValue:"root"},{provide:ls,useFactory:function aF(){return new ls},deps:[]},{provide:Ol,useClass:JL,multi:!0,deps:[Rn,Bn,fc]},{provide:Ol,useClass:rF,multi:!0,deps:[Rn]},{provide:bc,useClass:bc,deps:[Pc,bl,Tl]},{provide:ml,useExisting:bc},{provide:CD,useExisting:bl},{provide:bl,useClass:bl,deps:[Rn]},{provide:Pc,useClass:Pc,deps:[Ol,Bn]},{provide:TD,useClass:GL,deps:[]},[]];let xD=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Tl,useValue:t.appId},{provide:DD,useExisting:Tl},KL]}}}return n.\u0275fac=function(t){return new(t||n)(Ct(ND,12))},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({providers:[...FD,...LD],imports:[Rl,lN]}),n})(),BD=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Ct(Rn))},n.\u0275prov=xt({token:n,factory:function(t){let r=null;return r=t?new t:function cF(){return new BD(Ct(Rn))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const EF={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0,doubletap:!0},wc=new Xt("HammerGestureConfig"),jD=new Xt("HammerLoader");let HD=(()=>{class n{constructor(){this.events=[],this.overrides={}}buildHammer(t){const r=new Hammer(t,this.options);r.get("pinch").set({enable:!0}),r.get("rotate").set({enable:!0});for(const i in this.overrides)r.get(i).set(this.overrides[i]);return r}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),_F=(()=>{class n extends Hg{constructor(t,r,i,o){super(t),this._config=r,this.console=i,this.loader=o,this._loaderPromise=null}supports(t){return!(!EF.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader)}addEventListener(t,r,i){const o=this.manager.getZone();if(r=r.toLowerCase(),!window.Hammer&&this.loader){this._loaderPromise=this._loaderPromise||o.runOutsideAngular(()=>this.loader());let l=!1,c=()=>{l=!0};return o.runOutsideAngular(()=>this._loaderPromise.then(()=>{window.Hammer?l||(c=this.addEventListener(t,r,i)):c=()=>{}}).catch(()=>{c=()=>{}})),()=>{c()}}return o.runOutsideAngular(()=>{const l=this._config.buildHammer(t),c=function(E){o.runGuarded(function(){i(E)})};return l.on(r,c),()=>{l.off(r,c),"function"==typeof l.destroy&&l.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}return n.\u0275fac=function(t){return new(t||n)(Ct(Rn),Ct(wc),Ct(cg),Ct(jD,8))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),yF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({providers:[{provide:Ol,useClass:_F,multi:!0,deps:[Rn,wc,cg,[new pi,jD]]},{provide:wc,useClass:HD,deps:[]}]}),n})(),zg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:function(t){let r=null;return r=t?new(t||n):Ct(VD),r},providedIn:"root"}),n})(),VD=(()=>{class n extends zg{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case Un.NONE:return r;case Un.HTML:return Gi(r,"HTML")?Jr(r):Ov(this._doc,String(r)).toString();case Un.STYLE:return Gi(r,"Style")?Jr(r):r;case Un.SCRIPT:if(Gi(r,"Script"))return Jr(r);throw new Error("unsafe value used in a script context");case Un.URL:return Gi(r,"URL")?Jr(r):tl(String(r));case Un.RESOURCE_URL:if(Gi(r,"ResourceURL"))return Jr(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function _I(n){return new hI(n)}(t)}bypassSecurityTrustStyle(t){return function yI(n){return new gI(n)}(t)}bypassSecurityTrustScript(t){return function TI(n){return new pI(n)}(t)}bypassSecurityTrustUrl(t){return function DI(n){return new mI(n)}(t)}bypassSecurityTrustResourceUrl(t){return function CI(n){return new vI(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Ct(Rn))},n.\u0275prov=xt({token:n,factory:function(t){let r=null;return r=t?new t:function TF(n){return new VD(n.get(Rn))}(Ct(br)),r},providedIn:"root"}),n})();function cn(...n){return Ve(n,$e(n))}class ii extends ge{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:DF}=Array,{getPrototypeOf:CF,prototype:MF,keys:SF}=Object;function KD(n){if(1===n.length){const e=n[0];if(DF(e))return{args:e,keys:null};if(function AF(n){return n&&"object"==typeof n&&CF(n)===MF}(e)){const t=SF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:IF}=Array;function $g(n){return ne(e=>function RF(n,e){return IF(e)?n(...e):n(e)}(n,e))}function WD(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Qg(...n){const e=$e(n),t=Me(n),{args:r,keys:i}=KD(n);if(0===r.length)return Ve([],e);const o=new Z(function PF(n,e,t=X){return r=>{GD(e,()=>{const{length:i}=n,o=new Array(i);let l=i,c=i;for(let E=0;E<i;E++)GD(e,()=>{const B=Ve(n[E],e);let Q=!1;B.subscribe(le(r,fe=>{o[E]=fe,Q||(Q=!0,c--),c||r.next(t(o.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>WD(i,l):X));return t?o.pipe($g(t)):o}function GD(n,e,t){n?Fe(t,n,e):e()}function Co(n,e){const t=u(n)?n:()=>n,r=i=>i.error(t());return new Z(e?i=>e.schedule(r,0,i):r)}const wl=x(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Nc(...n){return function OF(){return Rt(1)}()(Ve(n,$e(n)))}function YD(n){return new Z(e=>{Qe(n()).subscribe(e)})}function Xg(){return ue((n,e)=>{let t=null;n._refCount++;const r=le(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class zD extends Z{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,de(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new T;const t=this.getSubject();e.add(this.source.subscribe(le(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=T.EMPTY)}return e}refCount(){return Xg()(this)}}function ha(n,e){return ue((t,r)=>{let i=null,o=0,l=!1;const c=()=>l&&!i&&r.complete();t.subscribe(le(r,E=>{i?.unsubscribe();let B=0;const Q=o++;Qe(n(E,Q)).subscribe(i=le(r,fe=>r.next(e?e(E,fe,Q,B++):fe),()=>{i=null,c()}))},()=>{l=!0,c()}))})}function Mo(...n){const e=$e(n);return ue((t,r)=>{(e?Nc(n,t,e):Nc(n,t)).subscribe(r)})}function bF(n,e,t,r,i){return(o,l)=>{let c=t,E=e,B=0;o.subscribe(le(l,Q=>{const fe=B++;E=c?n(E,Q,fe):(c=!0,Q),r&&l.next(E)},i&&(()=>{c&&l.next(E),l.complete()})))}}function $D(n,e){return ue(bF(n,e,arguments.length>=2,!0))}function nr(n,e){return ue((t,r)=>{let i=0;t.subscribe(le(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Bs(n){return ue((e,t)=>{let o,r=null,i=!1;r=e.subscribe(le(t,void 0,void 0,l=>{o=Qe(n(l,Bs(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function So(n,e){return u(e)?et(n,e,1):et(n,1)}function qg(n){return n<=0?()=>Tt:ue((e,t)=>{let r=[];e.subscribe(le(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function QD(n=wF){return ue((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function wF(){return new wl}function Zg(n){return ue((e,t)=>{let r=!1;e.subscribe(le(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ga(n,e){const t=arguments.length>=2;return r=>r.pipe(n?nr((i,o)=>n(i,o,r)):X,ft(1),t?Zg(e):QD(()=>new wl))}function lr(n,e,t){const r=u(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let c=!0;i.subscribe(le(o,E=>{var B;null===(B=r.next)||void 0===B||B.call(r,E),o.next(E)},()=>{var E;c=!1,null===(E=r.complete)||void 0===E||E.call(r),o.complete()},E=>{var B;c=!1,null===(B=r.error)||void 0===B||B.call(r,E),o.error(E)},()=>{var E,B;c&&(null===(E=r.unsubscribe)||void 0===E||E.call(r)),null===(B=r.finalize)||void 0===B||B.call(r)}))}):X}function Jg(n){return ne(()=>n)}function Lc(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class ms{constructor(e,t){this.id=e,this.url=t}}class ep extends ms{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pa extends ms{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fc extends ms{constructor(e,t,r){super(e,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class XD extends ms{constructor(e,t,r){super(e,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class LF extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FF extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xF extends ms{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class BF extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UF extends ms{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kF{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class jF{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class HF{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VF{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KF{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WF{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qD{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const An="primary";class YF{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ao(n){return new YF(n)}const tp="Redirecting to ",ZD="ngNavigationCancelingError";function np(n){const e=Error("NavigationCancelingError: "+(n||""));return e[ZD]=!0,e}function $F(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const l=r[o],c=n[o];if(l.startsWith(":"))i[l.substring(1)]=c;else if(l!==c.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ts(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!JD(n[i],e[i]))return!1;return!0}function JD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function eC(n){return Array.prototype.concat.apply([],n)}function tC(n){return n.length>0?n[n.length-1]:null}function Ar(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Us(n){return __(n)?n:Qu(n)?Ve(Promise.resolve(n)):cn(n)}const qF={exact:function iC(n,e,t){if(!va(n.segments,e.segments)||!xc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!iC(n.children[r],e.children[r],t))return!1;return!0},subset:sC},nC={exact:function ZF(n,e){return ts(n,e)},subset:function JF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JD(n[t],e[t]))},ignored:()=>!0};function rC(n,e,t){return qF[t.paths](n.root,e.root,t.matrixParams)&&nC[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sC(n,e,t){return aC(n,e,e.segments,t)}function aC(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!va(i,t)||e.hasChildren()||!xc(i,t,r))}if(n.segments.length===t.length){if(!va(n.segments,t)||!xc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!sC(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(va(n.segments,i)&&xc(n.segments,i,r)&&n.children[An])&&aC(n.children[An],e,o,r)}}function xc(n,e,t){return e.every((r,i)=>nC[t](n[i].parameters,r.parameters))}class ma{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ao(this.queryParams)),this._queryParamMap}toString(){return nx.serialize(this)}}class Pn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ar(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bc(this)}}class Nl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ao(this.parameters)),this._parameterMap}toString(){return fC(this)}}function va(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class oC{}class lC{parse(e){const t=new fx(e);return new ma(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ll(e.root,!0)}`,r=function sx(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Uc(t)}=${Uc(i)}`).join("&"):`${Uc(t)}=${Uc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function rx(n){return encodeURI(n)}(e.fragment)}`:""}`}}const nx=new lC;function Bc(n){return n.segments.map(e=>fC(e)).join("/")}function Ll(n,e){if(!n.hasChildren())return Bc(n);if(e){const t=n.children[An]?Ll(n.children[An],!1):"",r=[];return Ar(n.children,(i,o)=>{o!==An&&r.push(`${o}:${Ll(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function tx(n,e){let t=[];return Ar(n.children,(r,i)=>{i===An&&(t=t.concat(e(r,i)))}),Ar(n.children,(r,i)=>{i!==An&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===An?[Ll(n.children[An],!1)]:[`${i}:${Ll(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[An]?`${Bc(n)}/${t[0]}`:`${Bc(n)}/(${t.join("//")})`}}function uC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Uc(n){return uC(n).replace(/%3B/gi,";")}function ip(n){return uC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kc(n){return decodeURIComponent(n)}function cC(n){return kc(n.replace(/\+/g,"%20"))}function fC(n){return`${ip(n.path)}${function ix(n){return Object.keys(n).map(e=>`;${ip(e)}=${ip(n[e])}`).join("")}(n.parameters)}`}const ax=/^[^\/()?;=#]+/;function jc(n){const e=n.match(ax);return e?e[0]:""}const ox=/^[^=?&#]+/,ux=/^[^&#]+/;class fx{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pn([],{}):new Pn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[An]=new Pn(e,t)),r}parseSegment(){const e=jc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Mt(4009,!1);return this.capture(e),new Nl(kc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=jc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=jc(this.remaining);i&&(r=i,this.capture(r))}e[kc(t)]=kc(r)}parseQueryParam(e){const t=function lx(n){const e=n.match(ox);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function cx(n){const e=n.match(ux);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=cC(t),o=cC(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Mt(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=An);const l=this.parseChildren();t[o]=1===Object.keys(l).length?l[An]:new Pn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Mt(4011,!1)}}class dC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=sp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=sp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ap(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ap(e,this._root).map(t=>t.value)}}function sp(n,e){if(n===e.value)return e;for(const t of e.children){const r=sp(n,t);if(r)return r}return null}function ap(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ap(n,t);if(r.length)return r.unshift(e),r}return[]}class vs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Io(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class hC extends dC{constructor(e,t){super(e),this.snapshot=t,op(this,e)}toString(){return this.snapshot.toString()}}function gC(n,e){const t=function dx(n,e){const l=new Hc([],{},{},"",{},An,e,null,n.root,-1,{});return new mC("",new vs(l,[]))}(n,e),r=new ii([new Nl("",{})]),i=new ii({}),o=new ii({}),l=new ii({}),c=new ii(""),E=new Ea(r,i,l,c,o,An,e,t.root);return E.snapshot=t.root,new hC(new vs(E,[]),t)}class Ea{constructor(e,t,r,i,o,l,c,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=c,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ne(e=>Ao(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ne(e=>Ao(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pC(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function hx(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Hc{constructor(e,t,r,i,o,l,c,E,B,Q,fe,Ae){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=l,this.component=c,this.routeConfig=E,this._urlSegment=B,this._lastPathIndex=Q,this._correctedLastPathIndex=Ae??Q,this._resolve=fe}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ao(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ao(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mC extends dC{constructor(e,t){super(t),this.url=e,op(this,t)}toString(){return vC(this._root)}}function op(n,e){e.value._routerState=n,e.children.forEach(t=>op(n,t))}function vC(n){const e=n.children.length>0?` { ${n.children.map(vC).join(", ")} } `:"";return`${n.value}${e}`}function lp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ts(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ts(e.params,t.params)||n.params.next(t.params),function QF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ts(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ts(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function up(n,e){const t=ts(n.params,e.params)&&function ex(n,e){return va(n,e)&&n.every((t,r)=>ts(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||up(n.parent,e.parent))}function Fl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function px(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Fl(n,r,i);return Fl(n,r)})}(n,e,t);return new vs(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const l=o.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(c=>Fl(n,c)),l}}const r=function mx(n){return new Ea(new ii(n.url),new ii(n.params),new ii(n.queryParams),new ii(n.fragment),new ii(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Fl(n,o));return new vs(r,i)}}function Vc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function xl(n){return"object"==typeof n&&null!=n&&n.outlets}function fp(n,e,t,r,i){let o={};if(r&&Ar(r,(c,E)=>{o[E]=Array.isArray(c)?c.map(B=>`${B}`):`${c}`}),n===e)return new ma(t,o,i);const l=EC(n,e,t);return new ma(l,o,i)}function EC(n,e,t){const r={};return Ar(n.children,(i,o)=>{r[o]=i===e?t:EC(i,e,t)}),new Pn(n.segments,r)}class _C{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vc(r[0]))throw new Mt(4003,false);const i=r.find(xl);if(i&&i!==tC(r))throw new Mt(4004,false)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class dp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function yC(n,e,t){if(n||(n=new Pn([],{})),0===n.segments.length&&n.hasChildren())return Kc(n,e,t);const r=function Dx(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const l=n.segments[i],c=t[r];if(xl(c))break;const E=`${c}`,B=r<t.length-1?t[r+1]:null;if(i>0&&void 0===E)break;if(E&&B&&"object"==typeof B&&void 0===B.outlets){if(!DC(E,B,l))return o;r+=2}else{if(!DC(E,{},l))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Pn(n.segments.slice(0,r.pathIndex),{});return o.children[An]=new Pn(n.segments.slice(r.pathIndex),n.children),Kc(o,0,i)}return r.match&&0===i.length?new Pn(n.segments,{}):r.match&&!n.hasChildren()?hp(n,e,t):r.match?Kc(n,0,i):hp(n,e,t)}function Kc(n,e,t){if(0===t.length)return new Pn(n.segments,{});{const r=function Tx(n){return xl(n[0])?n[0].outlets:{[An]:n}}(t),i={};return Ar(r,(o,l)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[l]=yC(n.children[l],e,o))}),Ar(n.children,(o,l)=>{void 0===r[l]&&(i[l]=o)}),new Pn(n.segments,i)}}function hp(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(xl(o)){const E=Cx(o.outlets);return new Pn(r,E)}if(0===i&&Vc(t[0])){r.push(new Nl(n.segments[e].path,TC(t[0]))),i++;continue}const l=xl(o)?o.outlets[An]:`${o}`,c=i<t.length-1?t[i+1]:null;l&&c&&Vc(c)?(r.push(new Nl(l,TC(c))),i+=2):(r.push(new Nl(l,{})),i++)}return new Pn(r,{})}function Cx(n){const e={};return Ar(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=hp(new Pn([],{}),0,t))}),e}function TC(n){const e={};return Ar(n,(t,r)=>e[r]=`${t}`),e}function DC(n,e,t){return n==t.path&&ts(e,t.parameters)}class Mx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Bl,this.attachRef=null}}class Bl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Mx,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const Wc=!1;let gp=(()=>{class n{constructor(t,r,i,o,l){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new Kn,this.deactivateEvents=new Kn,this.attachEvents=new Kn,this.detachEvents=new Kn,this.name=i||An,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Mt(4012,Wc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Mt(4012,Wc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Mt(4012,Wc);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Mt(4013,Wc);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,E=new Sx(t,c,i.injector);if(r&&function Ax(n){return!!n.resolveComponentFactory}(r)){const B=r.resolveComponentFactory(l);this.activated=i.createComponent(B,i.length,E)}else this.activated=i.createComponent(l,{index:i.length,injector:E,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(At(Bl),At(ti),Js("name"),At(Ls),At(ra))},n.\u0275dir=Hn({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Sx{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ea?this.route:e===Bl?this.childContexts:this.parent.get(e,t)}}let CC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Fr({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&Tr(0,"router-outlet")},dependencies:[gp],encapsulation:2}),n})();function MC(n,e){return n.providers&&!n._injector&&(n._injector=sc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function mp(n){const e=n.children&&n.children.map(mp),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==An&&(t.component=CC),t}function yi(n){return n.outlet||An}function SC(n,e){const t=n.filter(r=>yi(r)===e);return t.push(...n.filter(r=>yi(r)!==e)),t}function AC(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class bx{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Io(t);e.children.forEach(o=>{const l=o.value.outlet;this.deactivateRoutes(o,i[l],r),delete i[l]}),Ar(i,(o,l)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Io(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);if(r&&r.outlet){const l=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Io(e);for(const l of Object.keys(o))this.deactivateRouteAndItsChildren(o[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Io(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new WF(o.value.snapshot))}),e.children.length&&this.forwardEvent(new VF(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(lp(i),i===o)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(c.contexts),l.attachRef=c.componentRef,l.route=c.route.value,l.outlet&&l.outlet.attach(c.componentRef,c.route.value),lp(c.route.value),this.activateChildRoutes(e,null,l.children)}else{const c=AC(i.snapshot),E=c?.get(po)??null;l.attachRef=null,l.route=i,l.resolver=E,l.injector=c,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}function Gc(n){return"function"==typeof n}function _a(n){return n instanceof ma}const Ul=Symbol("INITIAL_VALUE");function kl(){return ha(n=>Qg(n.map(e=>e.pipe(ft(1),Mo(Ul)))).pipe($D((e,t)=>{let r=!1;return t.reduce((i,o,l)=>i!==Ul?i:(o===Ul&&(r=!0),r||!1!==o&&l!==t.length-1&&!_a(o)?i:o),e)},Ul),nr(e=>e!==Ul),ne(e=>_a(e)?e:!0===e),ft(1)))}const IC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yc(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...IC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||$F)(t,n,e);if(!i)return{...IC};const o={};Ar(i.posParams,(c,E)=>{o[E]=c.path});const l=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function zc(n,e,t,r,i="corrected"){if(t.length>0&&function kx(n,e,t){return t.some(r=>$c(n,e,r)&&yi(r)!==An)}(n,t,r)){const l=new Pn(e,function Ux(n,e,t,r){const i={};i[An]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&yi(o)!==An){const l=new Pn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[yi(o)]=l}return i}(n,e,r,new Pn(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function jx(n,e,t){return t.some(r=>$c(n,e,r))}(n,t,r)){const l=new Pn(n.segments,function Bx(n,e,t,r,i,o){const l={};for(const c of r)if($c(n,t,c)&&!i[yi(c)]){const E=new Pn([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===o?n.segments.length:e.length,l[yi(c)]=E}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const o=new Pn(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function $c(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function RC(n,e,t,r){return!!(yi(n)===r||r!==An&&$c(e,t,n))&&("**"===n.path||Yc(e,n,t).matched)}function PC(n,e,t){return 0===e.length&&!n.children[t]}const Qc=!1;class Xc{constructor(e){this.segmentGroup=e||null}}class OC{constructor(e){this.urlTree=e}}function jl(n){return Co(new Xc(n))}function bC(n){return Co(new OC(n))}class Wx{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=zc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Pn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,An).pipe(ne(o=>this.createUrlTree(vp(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Bs(o=>{if(o instanceof OC)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Xc?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,An).pipe(ne(i=>this.createUrlTree(vp(i),e.queryParams,e.fragment))).pipe(Bs(i=>{throw i instanceof Xc?this.noMatchError(i):i}))}noMatchError(e){return new Mt(4002,Qc)}createUrlTree(e,t,r){const i=e.segments.length>0?new Pn([],{[An]:e}):e;return new ma(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(ne(o=>new Pn([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Ve(i).pipe(So(o=>{const l=r.children[o],c=SC(t,o);return this.expandSegmentGroup(e,c,l,o).pipe(ne(E=>({segment:E,outlet:o})))}),$D((o,l)=>(o[l.outlet]=l.segment,o),{}),function NF(n,e){const t=arguments.length>=2;return r=>r.pipe(n?nr((i,o)=>n(i,o,r)):X,qg(1),t?Zg(e):QD(()=>new wl))}())}expandSegment(e,t,r,i,o,l){return Ve(r).pipe(So(c=>this.expandSegmentAgainstRoute(e,t,r,c,i,o,l).pipe(Bs(B=>{if(B instanceof Xc)return cn(null);throw B}))),ga(c=>!!c),Bs((c,E)=>{if(c instanceof wl||"EmptyError"===c.name)return PC(t,i,o)?cn(new Pn([],{})):jl(t);throw c}))}expandSegmentAgainstRoute(e,t,r,i,o,l,c){return RC(i,t,o,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,l):c&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l):jl(t):jl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?bC(o):this.lineralizeSegments(r,o).pipe(et(l=>{const c=new Pn(l,{});return this.expandSegment(e,c,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,l){const{matched:c,consumedSegments:E,remainingSegments:B,positionalParamSegments:Q}=Yc(t,i,o);if(!c)return jl(t);const fe=this.applyRedirectCommands(E,i.redirectTo,Q);return i.redirectTo.startsWith("/")?bC(fe):this.lineralizeSegments(i,fe).pipe(et(Ae=>this.expandSegment(e,t,r,Ae.concat(B),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){if("**"===r.path)return e=MC(r,e),r.loadChildren?(r._loadedRoutes?cn({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(ne(fe=>(r._loadedRoutes=fe.routes,r._loadedInjector=fe.injector,new Pn(i,{})))):cn(new Pn(i,{}));const{matched:l,consumedSegments:c,remainingSegments:E}=Yc(t,r,i);return l?(e=MC(r,e),this.getChildConfig(e,r,i).pipe(et(Q=>{const fe=Q.injector??e,Ae=Q.routes,{segmentGroup:be,slicedSegments:je}=zc(t,c,E,Ae),Xe=new Pn(be.segments,be.children);if(0===je.length&&Xe.hasChildren())return this.expandChildren(fe,Ae,Xe).pipe(ne(pt=>new Pn(c,pt)));if(0===Ae.length&&0===je.length)return cn(new Pn(c,{}));const gt=yi(r)===o;return this.expandSegment(fe,Xe,Ae,je,gt?An:o,!0).pipe(ne(Ft=>new Pn(c.concat(Ft.segments),Ft.children)))}))):jl(t)}getChildConfig(e,t,r){return t.children?cn({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?cn({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,r).pipe(et(i=>i?this.configLoader.loadChildren(e,t).pipe(lr(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function Vx(n){return Co(np(Qc))}())):cn({routes:[],injector:e})}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?cn(i.map(l=>{const c=e.get(l);return Us(function Nx(n){return n&&Gc(n.canLoad)}(c)?c.canLoad(t,r):c(t,r))})).pipe(kl(),lr(l=>{if(!_a(l))return;const c=np(tp+this.urlSerializer.serialize(l));throw c.url=l,c}),ne(l=>!0===l)):cn(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return cn(r);if(i.numberOfChildren>1||!i.children[An])return Co(new Mt(4e3,Qc));i=i.children[An]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new ma(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ar(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const c=i.substring(1);r[o]=t[c]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let l={};return Ar(t.children,(c,E)=>{l[E]=this.createSegmentGroup(e,c,r,i)}),new Pn(o,l)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Mt(4001,Qc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function vp(n){const e={};for(const r of Object.keys(n.children)){const o=vp(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Gx(n){if(1===n.numberOfChildren&&n.children[An]){const e=n.children[An];return new Pn(n.segments.concat(e.segments),e.children)}return n}(new Pn(n.segments,e))}class wC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class qc{constructor(e,t){this.component=e,this.route=t}}function zx(n,e,t){const r=n._root;return Hl(r,e?e._root:null,t,[r.value])}function Zc(n,e,t){return(AC(e)??t).get(n)}function Hl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Io(e);return n.children.forEach(l=>{(function Qx(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,l=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(l&&o.routeConfig===l.routeConfig){const E=function Xx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!va(n.url,e.url);case"pathParamsOrQueryParamsChange":return!va(n.url,e.url)||!ts(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!up(n,e)||!ts(n.queryParams,e.queryParams);default:return!up(n,e)}}(l,o,o.routeConfig.runGuardsAndResolvers);E?i.canActivateChecks.push(new wC(r)):(o.data=l.data,o._resolvedData=l._resolvedData),Hl(n,e,o.component?c?c.children:null:t,r,i),E&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new qc(c.outlet.component,l))}else l&&Vl(e,c,i),i.canActivateChecks.push(new wC(r)),Hl(n,null,o.component?c?c.children:null:t,r,i)})(l,o[l.value.outlet],t,r.concat([l.value]),i),delete o[l.value.outlet]}),Ar(o,(l,c)=>Vl(l,t.getContext(c),i)),i}function Vl(n,e,t){const r=Io(n),i=n.value;Ar(r,(o,l)=>{Vl(o,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new qc(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class sB{}function NC(n){return new Z(e=>e.error(n))}class oB{constructor(e,t,r,i,o,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=l}recognize(){const e=zc(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,An);if(null===t)return null;const r=new Hc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},An,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new vs(r,t),o=new mC(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const t=e.value,r=pC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const o of Object.keys(t.children)){const l=t.children[o],c=SC(e,o),E=this.processSegmentGroup(c,l,o);if(null===E)return null;r.push(...E)}const i=LC(r);return function lB(n){n.sort((e,t)=>e.value.outlet===An?-1:t.value.outlet===An?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const o of e){const l=this.processSegmentAgainstRoute(o,t,r,i);if(null!==l)return l}return PC(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!RC(e,t,r,i))return null;let o,l=[],c=[];if("**"===e.path){const be=r.length>0?tC(r).parameters:{},je=xC(t)+r.length;o=new Hc(r,be,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,UC(e),yi(e),e.component??e._loadedComponent??null,e,FC(t),je,kC(e),je)}else{const be=Yc(t,e,r);if(!be.matched)return null;l=be.consumedSegments,c=be.remainingSegments;const je=xC(t)+l.length;o=new Hc(l,be.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,UC(e),yi(e),e.component??e._loadedComponent??null,e,FC(t),je,kC(e),je)}const E=function uB(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:B,slicedSegments:Q}=zc(t,l,c,E.filter(be=>void 0===be.redirectTo),this.relativeLinkResolution);if(0===Q.length&&B.hasChildren()){const be=this.processChildren(E,B);return null===be?null:[new vs(o,be)]}if(0===E.length&&0===Q.length)return[new vs(o,[])];const fe=yi(e)===i,Ae=this.processSegment(E,B,Q,fe?An:i);return null===Ae?null:[new vs(o,Ae)]}}function cB(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function LC(n){const e=[],t=new Set;for(const r of n){if(!cB(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=LC(r.children);e.push(new vs(r.value,i))}return e.filter(r=>!t.has(r))}function FC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function xC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function UC(n){return n.data||{}}function kC(n){return n.resolve||{}}const _p=Symbol("RouteTitle");function jC(n){return"string"==typeof n.title||null===n.title}function yp(n){return ha(e=>{const t=n(e);return t?Ve(t).pipe(ne(()=>e)):cn(e)})}class _B extends class EB{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Tp=new Xt("ROUTES");let Dp=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return cn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Us(t.loadComponent()).pipe(lr(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Lc(()=>{this.componentLoaders.delete(t)})),i=new zD(r,()=>new ge).pipe(Xg());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return cn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ne(c=>{this.onLoadEndListener&&this.onLoadEndListener(r);let E,B,Q=!1;Array.isArray(c)?B=c:(E=c.create(t).injector,B=eC(E.get(Tp,[],on.Self|on.Optional)));return{routes:B.map(mp),injector:E}}),Lc(()=>{this.childrenLoaders.delete(r)})),l=new zD(o,()=>new ge).pipe(Xg());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Us(t()).pipe(et(r=>r instanceof xy||Array.isArray(r)?cn(r):Ve(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(Ct(br),Ct(fg))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();class TB{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function DB(n){throw n}function CB(n,e,t){return e.parse("/")}const MB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{class n{constructor(t,r,i,o,l,c,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ge,this.errorHandler=DB,this.malformedUriErrorHandler=CB,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>cn(void 0),this.urlHandlingStrategy=new TB,this.routeReuseStrategy=new _B,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Dp),this.configLoader.onLoadEndListener=Ae=>this.triggerEvent(new jF(Ae)),this.configLoader.onLoadStartListener=Ae=>this.triggerEvent(new kF(Ae)),this.ngModule=l.get(bs),this.console=l.get(cg);const fe=l.get(Bn);this.isNgZoneEnabled=fe instanceof Bn&&Bn.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function XF(){return new ma(new Pn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gC(this.currentUrlTree,this.rootComponentType),this.transitions=new ii({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(nr(i=>0!==i.id),ne(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ha(i=>{let o=!1,l=!1;return cn(i).pipe(lr(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ha(c=>{const E=this.browserUrlTree.toString(),B=!this.navigated||c.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||B)&&this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return KC(c.source)&&(this.browserUrlTree=c.extractedUrl),cn(c).pipe(ha(fe=>{const Ae=this.transitions.getValue();return r.next(new ep(fe.id,this.serializeUrl(fe.extractedUrl),fe.source,fe.restoredState)),Ae!==this.transitions.getValue()?Tt:Promise.resolve(fe)}),function Yx(n,e,t,r){return ha(i=>function Kx(n,e,t,r,i){return new Wx(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(ne(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),lr(fe=>{this.currentNavigation={...this.currentNavigation,finalUrl:fe.urlAfterRedirects}}),function fB(n,e,t,r,i){return et(o=>function aB(n,e,t,r,i="emptyOnly",o="legacy"){try{const l=new oB(n,e,t,r,i,o).recognize();return null===l?NC(new sB):cn(l)}catch(l){return NC(l)}}(n,e,o.urlAfterRedirects,t(o.urlAfterRedirects),r,i).pipe(ne(l=>({...o,targetSnapshot:l}))))}(this.rootComponentType,this.config,fe=>this.serializeUrl(fe),this.paramsInheritanceStrategy,this.relativeLinkResolution),lr(fe=>{if("eager"===this.urlUpdateStrategy){if(!fe.extras.skipLocationChange){const be=this.urlHandlingStrategy.merge(fe.urlAfterRedirects,fe.rawUrl);this.setBrowserUrl(be,fe)}this.browserUrlTree=fe.urlAfterRedirects}const Ae=new LF(fe.id,this.serializeUrl(fe.extractedUrl),this.serializeUrl(fe.urlAfterRedirects),fe.targetSnapshot);r.next(Ae)}));if(B&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ae,extractedUrl:be,source:je,restoredState:Xe,extras:gt}=c,dt=new ep(Ae,this.serializeUrl(be),je,Xe);r.next(dt);const Ft=gC(be,this.rootComponentType).snapshot;return cn({...c,targetSnapshot:Ft,urlAfterRedirects:be,extras:{...gt,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=c.rawUrl,c.resolve(null),Tt}),lr(c=>{const E=new FF(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(E)}),ne(c=>({...c,guards:zx(c.targetSnapshot,c.currentSnapshot,this.rootContexts)})),function qx(n,e){return et(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:l}}=t;return 0===l.length&&0===o.length?cn({...t,guardsResult:!0}):function Zx(n,e,t,r){return Ve(n).pipe(et(i=>function iB(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?cn(o.map(c=>{const E=Zc(c,e,i);return Us(function xx(n){return n&&Gc(n.canDeactivate)}(E)?E.canDeactivate(n,e,t,r):E(n,e,t,r)).pipe(ga())})).pipe(kl()):cn(!0)}(i.component,i.route,t,e,r)),ga(i=>!0!==i,!0))}(l,r,i,n).pipe(et(c=>c&&function wx(n){return"boolean"==typeof n}(c)?function Jx(n,e,t,r){return Ve(e).pipe(So(i=>Nc(function tB(n,e){return null!==n&&e&&e(new HF(n)),cn(!0)}(i.route.parent,r),function eB(n,e){return null!==n&&e&&e(new KF(n)),cn(!0)}(i.route,r),function rB(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(l=>function $x(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>YD(()=>cn(l.guards.map(E=>{const B=Zc(E,l.node,t);return Us(function Fx(n){return n&&Gc(n.canActivateChild)}(B)?B.canActivateChild(r,n):B(r,n)).pipe(ga())})).pipe(kl())));return cn(o).pipe(kl())}(n,i.path,t),function nB(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return cn(!0);const i=r.map(o=>YD(()=>{const l=Zc(o,e,t);return Us(function Lx(n){return n&&Gc(n.canActivate)}(l)?l.canActivate(e,n):l(e,n)).pipe(ga())}));return cn(i).pipe(kl())}(n,i.route,t))),ga(i=>!0!==i,!0))}(r,o,n,e):cn(c)),ne(c=>({...t,guardsResult:c})))})}(this.ngModule.injector,c=>this.triggerEvent(c)),lr(c=>{if(_a(c.guardsResult)){const B=np(`Redirecting to "${this.serializeUrl(c.guardsResult)}"`);throw B.url=c.guardsResult,B}const E=new xF(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.triggerEvent(E)}),nr(c=>!!c.guardsResult||(this.restoreHistory(c),this.cancelNavigationTransition(c,""),!1)),yp(c=>{if(c.guards.canActivateChecks.length)return cn(c).pipe(lr(E=>{const B=new BF(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(B)}),ha(E=>{let B=!1;return cn(E).pipe(function dB(n,e){return et(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return cn(t);let o=0;return Ve(i).pipe(So(l=>function hB(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!jC(i)&&(o[_p]=i.title),function gB(n,e,t,r){const i=function pB(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return cn({});const o={};return Ve(i).pipe(et(l=>function mB(n,e,t,r){const i=Zc(n,e,r);return Us(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe(ga(),lr(c=>{o[l]=c}))),qg(1),Jg(o),Bs(l=>l instanceof wl?Tt:Co(l)))}(o,n,e,r).pipe(ne(l=>(n._resolvedData=l,n.data=pC(n,t).resolve,i&&jC(i)&&(n.data[_p]=i.title),null)))}(l.route,r,n,e)),lr(()=>o++),qg(1),et(l=>o===i.length?cn(t):Tt))})}(this.paramsInheritanceStrategy,this.ngModule.injector),lr({next:()=>B=!0,complete:()=>{B||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),lr(E=>{const B=new UF(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(B)}))}),yp(c=>{const E=B=>{const Q=[];B.routeConfig?.loadComponent&&!B.routeConfig._loadedComponent&&Q.push(this.configLoader.loadComponent(B.routeConfig).pipe(lr(fe=>{B.component=fe}),ne(()=>{})));for(const fe of B.children)Q.push(...E(fe));return Q};return Qg(E(c.targetSnapshot.root)).pipe(Zg(),ft(1))}),yp(()=>this.afterPreactivation()),ne(c=>{const E=function gx(n,e,t){const r=Fl(n,e._root,t?t._root:void 0);return new hC(r,e)}(this.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return{...c,targetRouterState:E}}),lr(c=>{this.currentUrlTree=c.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl),this.routerState=c.targetRouterState,"deferred"===this.urlUpdateStrategy&&(c.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,c),this.browserUrlTree=c.urlAfterRedirects)}),((n,e,t)=>ne(r=>(new bx(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,c=>this.triggerEvent(c)),lr({next(){o=!0},complete(){o=!0}}),Lc(()=>{o||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Bs(c=>{if(l=!0,function zF(n){return n&&n[ZD]}(c)){const E=_a(c.url);E||(this.navigated=!0,this.restoreHistory(i,!0));const B=new Fc(i.id,this.serializeUrl(i.extractedUrl),c.message);if(r.next(B),E){const Q=this.urlHandlingStrategy.merge(c.url,this.rawUrlTree),fe={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||KC(i.source)};this.scheduleNavigation(Q,"imperative",null,fe,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const E=new XD(i.id,this.serializeUrl(i.extractedUrl),c);r.next(E);try{i.resolve(this.errorHandler(c))}catch(B){i.reject(B)}}return Tt}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(mp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:l,queryParamsHandling:c,preserveFragment:E}=r,B=i||this.routerState.root,Q=E?this.currentUrlTree.fragment:l;let fe=null;switch(c){case"merge":fe={...this.currentUrlTree.queryParams,...o};break;case"preserve":fe=this.currentUrlTree.queryParams;break;default:fe=o||null}return null!==fe&&(fe=this.removeEmptyProps(fe)),function vx(n,e,t,r,i){if(0===t.length)return fp(e.root,e.root,e.root,r,i);const o=function Ex(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _C(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,l)=>{if("object"==typeof o&&null!=o){if(o.outlets){const c={};return Ar(o.outlets,(E,B)=>{c[B]="string"==typeof E?E.split("/"):E}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===l?(o.split("/").forEach((c,E)=>{0==E&&"."===c||(0==E&&""===c?t=!0:".."===c?e++:""!=c&&i.push(c))}),i):[...i,o]},[]);return new _C(t,e,r)}(t);return o.toRoot()?fp(e.root,e.root,new Pn([],{}),r,i):function l(E){const B=function _x(n,e,t,r){return n.isAbsolute?new dp(e.root,!0,0):-1===r?new dp(t,t===e.root,0):function yx(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Mt(4005,!1);i=r.segments.length}return new dp(r,!1,i-o)}(t,r+(Vc(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,E),Q=B.processChildren?Kc(B.segmentGroup,B.index,o.commands):yC(B.segmentGroup,B.index,o.commands);return fp(e.root,B.segmentGroup,Q,r,i)}(n.snapshot?._lastPathIndex)}(B,this.currentUrlTree,t,fe,Q??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=_a(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function AB(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new Mt(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...MB}:!1===r?{...SB}:r,_a(t))return rC(this.currentUrlTree,t,i);const o=this.parseUrl(t);return rC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new pa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,l){if(this.disposed)return Promise.resolve(!1);let c,E,B;l?(c=l.resolve,E=l.reject,B=l.promise):B=new Promise((Ae,be)=>{c=Ae,E=be});const Q=++this.navigationId;let fe;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),fe=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):fe=0,this.setTransition({id:Q,targetPageId:fe,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:c,reject:E,promise:B,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),B.catch(Ae=>Promise.reject(Ae))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Fc(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){rh()},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();function KC(n){return"imperative"!==n}let Jc=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new ge,this.subscription=t.events.subscribe(o=>{o instanceof pa&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,l){if(0!==t||r||i||o||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const c={skipLocationChange:Do(this.skipLocationChange),replaceUrl:Do(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,c),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Do(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(At(Nr),At(Ea),At(da))},n.\u0275dir=Hn({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&Li("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&aa("target",r.target)("href",r.href,rl)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[is]}),n})();class WC{buildTitle(e){let t,r=e.root;for(;void 0!==r;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(i=>i.outlet===An);return t}getResolvedTitleForRoute(e){return e.data[_p]}}let PB=(()=>{class n extends WC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(Ct(BD))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class GC{}let YC=(()=>{class n{constructor(t,r,i,o,l){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(nr(t=>t instanceof pa),So(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=sc(o.providers,t,`Route: ${o.path}`));const l=o._injector??t,c=o._loadedInjector??l;o.loadChildren&&!o._loadedRoutes||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(l,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Ve(i).pipe(Rt())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):cn(null);const o=i.pipe(et(l=>null===l?cn(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));return r.loadComponent&&!r._loadedComponent?Ve([o,this.loader.loadComponent(r)]).pipe(Rt()):o})}}return n.\u0275fac=function(t){return new(t||n)(Ct(Nr),Ct(fg),Ct(ra),Ct(GC),Ct(Dp))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();const zC=new Xt("");let OB=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ep?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qD&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new qD(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){rh()},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();const Mp=new Xt("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),$C=new Xt("ROUTER_FORROOT_GUARD"),QC=new Xt(""),bB=[Sg,{provide:oC,useClass:lC},{provide:Nr,useFactory:function BB(n,e,t,r,i,o,l={},c,E,B,Q){const fe=new Nr(null,n,e,t,r,i,eC(o));return B&&(fe.urlHandlingStrategy=B),Q&&(fe.routeReuseStrategy=Q),fe.titleStrategy=E??c,function UB(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,fe),fe},deps:[oC,Bl,Sg,br,fg,Tp,Mp,PB,[WC,new pi],[class yB{},new pi],[class vB{},new pi]]},Bl,{provide:Ea,useFactory:function kB(n){return n.routerState.root},deps:[Nr]},Dp];function wB(){return new wT("Router",Nr)}let ef=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[bB,[],XC(t),{provide:$C,useFactory:xB,deps:[[Nr,new pi,new Ya]]},{provide:Mp,useValue:r||{}},r?.useHash?{provide:da,useClass:mN}:{provide:da,useClass:nD},{provide:zC,useFactory:()=>{const n=bi(Nr),e=bi(xL),t=bi(Mp);return t.scrollOffset&&e.setOffset(t.scrollOffset),new OB(n,e,t)}},r?.preloadingStrategy?YB(r.preloadingStrategy):[],{provide:wT,multi:!0,useFactory:wB},r?.initialNavigation?HB(r):[],[{provide:qC,useFactory:jB},{provide:ST,multi:!0,useExisting:qC}]]}}static forChild(t){return{ngModule:n,providers:[XC(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Ct($C,8),Ct(Nr,8))},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({}),n})();function xB(n){return"guarded"}function XC(n){return[{provide:UA,multi:!0,useValue:n},{provide:Tp,multi:!0,useValue:n}]}function jB(){const n=bi(br);return e=>{const t=n.get(Cl);if(e!==t.components[0])return;const r=n.get(Nr),i=n.get(ZC);null===n.get(Sp,null,on.Optional)&&r.initialNavigation(),n.get(QC,null,on.Optional)?.setUpPreloading(),n.get(zC,null,on.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const qC=new Xt("");function HB(n){return["disabled"===n.initialNavigation?[{provide:uc,multi:!0,useFactory:()=>{const n=bi(Nr);return()=>{n.setUpLocationChangeListener()}}},{provide:Sp,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:Sp,useValue:"enabledBlocking"},{provide:uc,multi:!0,deps:[br],useFactory:n=>{const e=n.get(hN,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const o=n.get(Nr),l=n.get(ZC);(function r(i){const o=n.get(Nr);o.events.pipe(nr(l=>l instanceof pa||l instanceof Fc||l instanceof XD),ne(l=>{if(l instanceof pa)return!0;const c=o.navigationId!==l.id,E=l instanceof Fc&&-1!==l.reason.indexOf(tp);return!(!c&&!E)&&null}),nr(l=>null!==l),ft(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),o.afterPreactivation=()=>(i(!0),t||l.closed?cn(void 0):l),o.initialNavigation()}))}}]:[]]}const ZC=new Xt("",{factory:()=>new ge}),Sp=new Xt("");function YB(n){return[YC,{provide:QC,useExisting:YC},{provide:GC,useExisting:n}]}const zB=[{path:"",redirectTo:"/reddit/meme/hot",pathMatch:"full"}];let $B=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({imports:[ef.forRoot(zB),ef]}),n})();class JC{}class eM{}class _s{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(l):this.headers.set(o,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof _s?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new _s;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof _s?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let l=this.headers.get(t);if(!l)return;l=l.filter(c=>-1===o.indexOf(c)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class QB{encodeKey(e){return tM(e)}encodeValue(e){return tM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const qB=/%(\d[a-f0-9])/gi,ZB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tM(n){return encodeURIComponent(n).replace(qB,(e,t)=>ZB[t]??e)}function tf(n){return`${n}`}class ks{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new QB,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function XB(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[l,c]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],E=t.get(l)||[];E.push(c),t.set(l,E)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(tf):[tf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ks({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(tf(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(tf(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class JB{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function nM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function rM(n){return typeof Blob<"u"&&n instanceof Blob}function iM(n){return typeof FormData<"u"&&n instanceof FormData}class Kl{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function eU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new _s),this.context||(this.context=new JB),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const c=t.indexOf("?");this.urlWithParams=t+(-1===c?"?":c<t.length-1?"&":"")+l}}else this.params=new ks,this.urlWithParams=t}serializeBody(){return null===this.body?null:nM(this.body)||rM(this.body)||iM(this.body)||function tU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ks?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||iM(this.body)?null:rM(this.body)?this.body.type||null:nM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ks?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,c=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,B=e.params||this.params;const Q=e.context??this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((fe,Ae)=>fe.set(Ae,e.setHeaders[Ae]),E)),e.setParams&&(B=Object.keys(e.setParams).reduce((fe,Ae)=>fe.set(Ae,e.setParams[Ae]),B)),new Kl(t,r,o,{params:B,headers:E,context:Q,reportProgress:c,responseType:i,withCredentials:l})}}var ur=(()=>((ur=ur||{})[ur.Sent=0]="Sent",ur[ur.UploadProgress=1]="UploadProgress",ur[ur.ResponseHeader=2]="ResponseHeader",ur[ur.DownloadProgress=3]="DownloadProgress",ur[ur.Response=4]="Response",ur[ur.User=5]="User",ur))();class Ap{constructor(e,t=200,r="OK"){this.headers=e.headers||new _s,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ip extends Ap{constructor(e={}){super(e),this.type=ur.ResponseHeader}clone(e={}){return new Ip({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class nf extends Ap{constructor(e={}){super(e),this.type=ur.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new nf({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sM extends Ap{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Rp(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Wl=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Kl)o=t;else{let E,B;E=i.headers instanceof _s?i.headers:new _s(i.headers),i.params&&(B=i.params instanceof ks?i.params:new ks({fromObject:i.params})),o=new Kl(t,r,void 0!==i.body?i.body:null,{headers:E,context:i.context,params:B,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=cn(o).pipe(So(E=>this.handler.handle(E)));if(t instanceof Kl||"events"===i.observe)return l;const c=l.pipe(nr(E=>E instanceof nf));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(ne(E=>{if(null!==E.body&&!(E.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return E.body}));case"blob":return c.pipe(ne(E=>{if(null!==E.body&&!(E.body instanceof Blob))throw new Error("Response is not a Blob.");return E.body}));case"text":return c.pipe(ne(E=>{if(null!==E.body&&"string"!=typeof E.body)throw new Error("Response is not a string.");return E.body}));default:return c.pipe(ne(E=>E.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ks).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Rp(i,r))}post(t,r,i={}){return this.request("POST",t,Rp(i,r))}put(t,r,i={}){return this.request("PUT",t,Rp(i,r))}}return n.\u0275fac=function(t){return new(t||n)(Ct(JC))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();class aM{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const oM=new Xt("HTTP_INTERCEPTORS");let nU=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();const rU=/^\)\]\}',?\n/;let lM=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Z(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((be,je)=>i.setRequestHeader(be,je.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const be=t.detectContentTypeHeader();null!==be&&i.setRequestHeader("Content-Type",be)}if(t.responseType){const be=t.responseType.toLowerCase();i.responseType="json"!==be?be:"text"}const o=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const be=i.statusText||"OK",je=new _s(i.getAllResponseHeaders()),Xe=function iU(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new Ip({headers:je,status:i.status,statusText:be,url:Xe}),l},E=()=>{let{headers:be,status:je,statusText:Xe,url:gt}=c(),dt=null;204!==je&&(dt=typeof i.response>"u"?i.responseText:i.response),0===je&&(je=dt?200:0);let Ft=je>=200&&je<300;if("json"===t.responseType&&"string"==typeof dt){const pt=dt;dt=dt.replace(rU,"");try{dt=""!==dt?JSON.parse(dt):null}catch(Kt){dt=pt,Ft&&(Ft=!1,dt={error:Kt,text:dt})}}Ft?(r.next(new nf({body:dt,headers:be,status:je,statusText:Xe,url:gt||void 0})),r.complete()):r.error(new sM({error:dt,headers:be,status:je,statusText:Xe,url:gt||void 0}))},B=be=>{const{url:je}=c(),Xe=new sM({error:be,status:i.status||0,statusText:i.statusText||"Unknown Error",url:je||void 0});r.error(Xe)};let Q=!1;const fe=be=>{Q||(r.next(c()),Q=!0);let je={type:ur.DownloadProgress,loaded:be.loaded};be.lengthComputable&&(je.total=be.total),"text"===t.responseType&&!!i.responseText&&(je.partialText=i.responseText),r.next(je)},Ae=be=>{let je={type:ur.UploadProgress,loaded:be.loaded};be.lengthComputable&&(je.total=be.total),r.next(je)};return i.addEventListener("load",E),i.addEventListener("error",B),i.addEventListener("timeout",B),i.addEventListener("abort",B),t.reportProgress&&(i.addEventListener("progress",fe),null!==o&&i.upload&&i.upload.addEventListener("progress",Ae)),i.send(o),r.next({type:ur.Sent}),()=>{i.removeEventListener("error",B),i.removeEventListener("abort",B),i.removeEventListener("load",E),i.removeEventListener("timeout",B),t.reportProgress&&(i.removeEventListener("progress",fe),null!==o&&i.upload&&i.upload.removeEventListener("progress",Ae)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Ct(TD))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();const Pp=new Xt("XSRF_COOKIE_NAME"),Op=new Xt("XSRF_HEADER_NAME");class uM{}let wp,sU=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=dD(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Ct(Rn),Ct(fc),Ct(Pp))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),bp=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const o=this.tokenService.getToken();return null!==o&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,o)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Ct(uM),Ct(Op))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),aU=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(oM,[]);this.chain=r.reduceRight((i,o)=>new aM(i,o),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Ct(eM),Ct(br))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),oU=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:bp,useClass:nU}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Pp,useValue:t.cookieName}:[],t.headerName?{provide:Op,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({providers:[bp,{provide:oM,useExisting:bp,multi:!0},{provide:uM,useClass:sU},{provide:Pp,useValue:"XSRF-TOKEN"},{provide:Op,useValue:"X-XSRF-TOKEN"}]}),n})(),lU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({providers:[Wl,{provide:JC,useClass:aU},lM,{provide:eM,useExisting:lM}],imports:[oU.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),cM=(()=>{class n{constructor(t){this.http=t,this.subtitle=new ii("meme")}getJsonReddit(t="meme",r="hot",i){return this.http.get("https://www.reddit.com/r/"+t+"/"+r+".json?limit=20&after="+i)}}return n.\u0275fac=function(t){return new(t||n)(Ct(Wl))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();try{wp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{wp=!1}let Gl,rf,ya,Lp,ys=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function FL(n){return n===_D}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!wp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Ct(fc))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Np(n){return function uU(){if(null==Gl&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Gl=!0}))}finally{Gl=Gl||!1}return Gl}()?n:!!n.capture}function Yl(){if("object"!=typeof document||!document)return 0;if(null==rf){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),r=t.style;r.width="2px",r.height="1px",n.appendChild(t),document.body.appendChild(n),rf=0,0===n.scrollLeft&&(n.scrollLeft=1,rf=0===n.scrollLeft?1:2),n.remove()}return rf}function zl(n){return n.composedPath?n.composedPath()[0]:n.target}function Fp(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class NU extends T{constructor(e,t){super()}schedule(e,t=0){return this}}const sf={setInterval(n,e,...t){const{delegate:r}=sf;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=sf;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class xp extends NU{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return sf.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;sf.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,M(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const dM={now:()=>(dM.delegate||Date).now(),delegate:void 0};class $l{constructor(e,t=$l.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}$l.now=dM.now;class Bp extends $l{constructor(e,t=$l.now){super(e,t),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Up=new Bp(xp),LU=Up;function kp(n,e=Up){return ue((t,r)=>{let i=null,o=null,l=null;const c=()=>{if(i){i.unsubscribe(),i=null;const B=o;o=null,r.next(B)}};function E(){const B=l+n,Q=e.now();if(Q<B)return i=this.schedule(void 0,B-Q),void r.add(i);c()}t.subscribe(le(r,B=>{o=B,l=e.now(),i||(i=e.schedule(E,n),r.add(i))},()=>{c(),r.complete()},void 0,()=>{o=i=null}))})}function hM(n){return nr((e,t)=>n<=t)}function jp(n,e=X){return n=n??FU,ue((t,r)=>{let i,o=!0;t.subscribe(le(r,l=>{const c=e(l);(o||!n(i,c))&&(o=!1,i=c,r.next(l))}))})}function FU(n,e){return n===e}function Ti(n){return ue((e,t)=>{Qe(n).subscribe(le(t,()=>t.complete(),L)),!t.closed&&e.subscribe(t)})}function ji(n){return null!=n&&"false"!=`${n}`}function gM(n){return Array.isArray(n)?n:[n]}function af(n){return n instanceof Sr?n.nativeElement:n}const pM=new Set;let Po,UU=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):jU}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function kU(n){if(!pM.has(n))try{Po||(Po=document.createElement("style"),Po.setAttribute("type","text/css"),document.head.appendChild(Po)),Po.sheet&&(Po.sheet.insertRule(`@media ${n} {body{ }}`,0),pM.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Ct(ys))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jU(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let HU=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ge}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return mM(gM(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=Qg(mM(gM(t)).map(l=>this._registerQuery(l).observable));return o=Nc(o.pipe(ft(1)),o.pipe(hM(1),kp(0))),o.pipe(ne(l=>{const c={matches:!1,breakpoints:{}};return l.forEach(({matches:E,query:B})=>{c.matches=c.matches||E,c.breakpoints[B]=E}),c}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new Z(l=>{const c=E=>this._zone.run(()=>l.next(E));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(Mo(r),ne(({matches:l})=>({query:t,matches:l})),Ti(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(Ct(UU),Ct(Bn))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function mM(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class GU extends class WU{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ge,this._typeaheadSubscription=T.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new ge,this.change=new ge,e instanceof ca&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(lr(t=>this._pressedLetters.push(t)),kp(e),nr(()=>this._pressedLetters.length>0),ne(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const o=(this._activeItemIndex+i)%r.length,l=r[o];if(!this._skipPredicateFn(l)&&0===l.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!e[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||Fp(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem=t[r]??null,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof ca?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let _M=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function zU(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function YU(n){try{return n.frameElement}catch{return null}}(function t1(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===TM(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=TM(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function JU(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function e1(n){return!function QU(n){return function qU(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function $U(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function XU(n){return function ZU(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||yM(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(Ct(ys))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yM(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function TM(n){if(!yM(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class n1{constructor(e,t,r,i,o=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(ft(1)).subscribe(e)}}let r1=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new n1(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(Ct(_M),Ct(Bn),Ct(Rn))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const o1=new Xt("cdk-input-modality-detector-options"),l1={ignoreKeys:[18,17,224,91,16]},Oo=Np({passive:!0,capture:!0});let u1=(()=>{class n{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new ii(null),this._lastTouchMs=0,this._onKeydown=l=>{this._options?.ignoreKeys?.some(c=>c===l.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=zl(l))},this._onMousedown=l=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function s1(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(l)?"keyboard":"mouse"),this._mostRecentTarget=zl(l))},this._onTouchstart=l=>{!function a1(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(l)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=zl(l)):this._modality.next("keyboard")},this._options={...l1,...o},this.modalityDetected=this._modality.pipe(hM(1)),this.modalityChanged=this.modalityDetected.pipe(jp()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Oo),i.addEventListener("mousedown",this._onMousedown,Oo),i.addEventListener("touchstart",this._onTouchstart,Oo)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Oo),document.removeEventListener("mousedown",this._onMousedown,Oo),document.removeEventListener("touchstart",this._onTouchstart,Oo))}}return n.\u0275fac=function(t){return new(t||n)(Ct(ys),Ct(Bn),Ct(Rn),Ct(o1,8))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f1=new Xt("cdk-focus-monitor-default-options"),lf=Np({passive:!0,capture:!0});let CM=(()=>{class n{constructor(t,r,i,o,l){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ge,this._rootNodeFocusAndBlurListener=c=>{const E=zl(c),B="focus"===c.type?this._onFocus:this._onBlur;for(let Q=E;Q;Q=Q.parentElement)B.call(this,c,Q)},this._document=o,this._detectionMode=l?.detectionMode||0}monitor(t,r=!1){const i=af(t);if(!this._platform.isBrowser||1!==i.nodeType)return cn(null);const o=function dU(n){if(function fU(){if(null==Lp){const n=typeof document<"u"?document.head:null;Lp=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Lp}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),l=this._elementInfo.get(i);if(l)return r&&(l.checkChildren=!0),l.subject;const c={checkChildren:r,subject:new ge,rootNode:o};return this._elementInfo.set(i,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(t){const r=af(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=af(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([c,E])=>this._originChanged(c,r,E)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=zl(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,lf),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,lf)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ti(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,lf),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,lf),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(Ct(Bn),Ct(ys),Ct(u1),Ct(Rn,8),Ct(f1,8))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const MM="cdk-high-contrast-black-on-white",SM="cdk-high-contrast-white-on-black",Hp="cdk-high-contrast-active";let d1=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=bi(HU).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(Hp,MM,SM),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(Hp,MM):2===r&&t.add(Hp,SM)}}}return n.\u0275fac=function(t){return new(t||n)(Ct(ys),Ct(Rn))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const h1=new Xt("cdk-dir-doc",{providedIn:"root",factory:function g1(){return bi(Rn)}}),p1=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let AM=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Kn,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function m1(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?p1.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Ct(h1,8))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({}),n})();const E1=new Xt("mat-sanity-checks",{providedIn:"root",factory:function v1(){return!0}});let Ta=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function hU(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Ct(d1),Ct(E1,8),Ct(Rn))},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({imports:[IM,IM]}),n})();function OM(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function _1(n,e=0){return class extends n{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?function xU(n,e=0){return function BU(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t):this.defaultTabIndex}}}const M1=["*",[["mat-toolbar-row"]]],S1=["*","mat-toolbar-row"],A1=OM(class{constructor(n){this._elementRef=n}});let I1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Hn({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),R1=(()=>{class n extends A1{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(At(Sr),At(ys),At(Rn))},n.\u0275cmp=Fr({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&ws(i,I1,5),2&t){let o;ni(o=ri())&&(r._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&Xi("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[ds],ngContentSelectors:S1,decls:2,vars:0,template:function(t,r){1&t&&(Os(M1),kr(0),kr(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),P1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({imports:[Ta,Ta]}),n})();const b1=["*"];let uf;function Xl(n){return function w1(){if(void 0===uf&&(uf=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(uf=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return uf}()?.createHTML(n)||n}function LM(n){return Error(`Unable to find icon with the name "${n}"`)}function FM(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function xM(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Da{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let cf=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new Da(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const l=this._sanitizer.sanitize(Un.HTML,i);if(!l)throw xM(i);const c=Xl(l);return this._addSvgIconConfig(t,r,new Da("",c,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new Da(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(Un.HTML,r);if(!o)throw xM(r);const l=Xl(o);return this._addSvgIconSetConfig(t,new Da("",l,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(Un.RESOURCE_URL,t);if(!r)throw FM(t);const i=this._cachedIconsByUrl.get(r);return i?cn(ff(i)):this._loadSvgIconFromConfig(new Da(t,null)).pipe(lr(o=>this._cachedIconsByUrl.set(r,o)),ne(o=>ff(o)))}getNamedSvgIcon(t,r=""){const i=BM(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const l=this._iconSetConfigs.get(r);return l?this._getSvgFromIconSetConfigs(t,l):Co(LM(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?cn(ff(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(ne(r=>ff(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?cn(i):function O1(...n){const e=Me(n),{args:t,keys:r}=KD(n),i=new Z(o=>{const{length:l}=t;if(!l)return void o.complete();const c=new Array(l);let E=l,B=l;for(let Q=0;Q<l;Q++){let fe=!1;Qe(t[Q]).subscribe(le(o,Ae=>{fe||(fe=!0,B--),c[Q]=Ae},()=>E--,void 0,()=>{(!E||!fe)&&(B||o.next(r?WD(r,c):c),o.complete())}))}});return e?i.pipe($g(e)):i}(r.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(Bs(c=>{const B=`Loading icon set URL: ${this._sanitizer.sanitize(Un.RESOURCE_URL,l.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(B)),cn(null)})))).pipe(ne(()=>{const l=this._extractIconWithNameFromAnySet(t,r);if(!l)throw LM(t);return l}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const l=this._svgElementFromConfig(o),c=this._extractSvgIconFromSet(l,t,o.options);if(c)return c}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(lr(r=>t.svgText=r),ne(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?cn(null):this._fetchIcon(t).pipe(lr(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const l=o.cloneNode(!0);if(l.removeAttribute("id"),"svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l,i);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l),i);const c=this._svgElementFromString(Xl("<svg></svg>"));return c.appendChild(l),this._setSvgAttributes(c,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Xl("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:l,value:c}=i[o];"id"!==l&&r.setAttribute(l,c)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function N1(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const l=this._sanitizer.sanitize(Un.RESOURCE_URL,r);if(!l)throw FM(r);const c=this._inProgressUrlFetches.get(l);if(c)return c;const E=this._httpClient.get(l,{responseType:"text",withCredentials:o}).pipe(ne(B=>Xl(B)),Lc(()=>this._inProgressUrlFetches.delete(l)),Nt());return this._inProgressUrlFetches.set(l,E),E}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(BM(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return F1(o)?new Da(o.url,null,o.options):new Da(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(Ct(Wl,8),Ct(zg),Ct(Rn,8),Ct(ls))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ff(n){return n.cloneNode(!0)}function BM(n,e){return n+":"+e}function F1(n){return!(!n.url||!n.options)}const x1=OM(class{constructor(n){this._elementRef=n}}),B1=new Xt("MAT_ICON_DEFAULT_OPTIONS"),U1=new Xt("mat-icon-location",{providedIn:"root",factory:function k1(){const n=bi(Rn),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),UM=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],j1=UM.map(n=>`[${n}]`).join(", "),H1=/^url\(['"]?#(.*?)['"]?\)$/;let V1=(()=>{class n extends x1{constructor(t,r,i,o,l,c){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=l,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=T.EMPTY,c&&(c.color&&(this.color=this.defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=ji(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?[this._iconRegistry.classNameForFontAlias(this.fontSet)]:this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(l=>{o.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(j1),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)UM.forEach(l=>{const c=r[o],E=c.getAttribute(l),B=E?E.match(H1):null;if(B){let Q=i.get(c);Q||(Q=[],i.set(c,Q)),Q.push({name:l,value:B[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(ft(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(At(Sr),At(cf),Js("aria-hidden"),At(U1),At(ls),At(B1,8))},n.\u0275cmp=Fr({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(aa("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),Xi("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ds],ngContentSelectors:b1,decls:1,vars:0,template:function(t,r){1&t&&(Os(),kr(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),K1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({imports:[Ta,Ta]}),n})();const W1=["addListener","removeListener"],G1=["addEventListener","removeEventListener"],Y1=["on","off"];function ql(n,e,t,r){if(u(t)&&(r=t,t=void 0),r)return ql(n,e,t).pipe($g(r));const[i,o]=function Q1(n){return u(n.addEventListener)&&u(n.removeEventListener)}(n)?G1.map(l=>c=>n[l](e,c,t)):function z1(n){return u(n.addListener)&&u(n.removeListener)}(n)?W1.map(kM(n,e)):function $1(n){return u(n.on)&&u(n.off)}(n)?Y1.map(kM(n,e)):[];if(!i&&yt(n))return et(l=>ql(l,e,t))(Qe(n));if(!i)throw new TypeError("Invalid event target");return new Z(l=>{const c=(...E)=>l.next(1<E.length?E:E[0]);return i(c),()=>o(c)})}function kM(n,e){return t=>r=>n[t](e,r)}const Zl={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=Zl;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new T(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=Zl;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Zl;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class q1 extends Bp{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class X1 extends xp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Zl.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(Zl.cancelAnimationFrame(t),e._scheduled=void 0)}});let Kp,J1=1;const df={};function jM(n){return n in df&&(delete df[n],!0)}const ek={setImmediate(n){const e=J1++;return df[e]=!0,Kp||(Kp=Promise.resolve()),Kp.then(()=>jM(e)&&n()),e},clearImmediate(n){jM(n)}},{setImmediate:tk,clearImmediate:nk}=ek,hf={setImmediate(...n){const{delegate:e}=hf;return(e?.setImmediate||tk)(...n)},clearImmediate(n){const{delegate:e}=hf;return(e?.clearImmediate||nk)(n)},delegate:void 0};new class ik extends Bp{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class rk extends xp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=hf.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(hf.clearImmediate(t),e._scheduled=void 0)}});function HM(n,e=Up){return function ak(n){return ue((e,t)=>{let r=!1,i=null,o=null,l=!1;const c=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const B=i;i=null,t.next(B)}l&&t.complete()},E=()=>{o=null,l&&t.complete()};e.subscribe(le(t,B=>{r=!0,i=B,o||Qe(n(B)).subscribe(o=le(t,c,E))},()=>{l=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>function lk(n=0,e,t=LU){let r=-1;return null!=e&&(lt(e)?t=e:r=e),new Z(i=>{let o=function ok(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(n,e))}let VM=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new ge,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Z(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(HM(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):cn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(nr(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=af(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ql(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Ct(Bn),Ct(ys),Ct(Rn,8))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Wp=(()=>{class n{constructor(t,r,i,o){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=i,this.dir=o,this._destroyed=new ge,this._elementScrolled=new Z(l=>this.ngZone.runOutsideAngular(()=>ql(this.elementRef.nativeElement,"scroll").pipe(Ti(this._destroyed)).subscribe(l)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const r=this.elementRef.nativeElement,i=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=i?t.end:t.start),null==t.right&&(t.right=i?t.start:t.end),null!=t.bottom&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),i&&0!=Yl()?(null!=t.left&&(t.right=r.scrollWidth-r.clientWidth-t.left),2==Yl()?t.left=t.right:1==Yl()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const r=this.elementRef.nativeElement;!function cU(){if(null==ya){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return ya=!1,ya;if("scrollBehavior"in document.documentElement.style)ya=!0;else{const n=Element.prototype.scrollTo;ya=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return ya}()?(null!=t.top&&(r.scrollTop=t.top),null!=t.left&&(r.scrollLeft=t.left)):r.scrollTo(t)}measureScrollOffset(t){const r="left",i="right",o=this.elementRef.nativeElement;if("top"==t)return o.scrollTop;if("bottom"==t)return o.scrollHeight-o.clientHeight-o.scrollTop;const l=this.dir&&"rtl"==this.dir.value;return"start"==t?t=l?i:r:"end"==t&&(t=l?r:i),l&&2==Yl()?t==r?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:l&&1==Yl()?t==r?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:t==r?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(At(Sr),At(VM),At(Bn),At(AM,8))},n.\u0275dir=Hn({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),fk=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new ge,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(HM(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Ct(ys),Ct(Bn),Ct(Rn,8))},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({}),n})();class WM{}const Ts="*";function Gp(n,e){return{type:7,name:n,definitions:e,options:{}}}function gf(n,e=null){return{type:4,styles:e,timings:n}}function GM(n,e=null){return{type:2,steps:n,options:e}}function js(n){return{type:6,styles:n,offset:null}}function bo(n,e,t){return{type:0,name:n,styles:e,options:t}}function pf(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function YM(n){Promise.resolve(null).then(n)}class Jl{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){YM(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class zM{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?YM(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==o&&this._onFinish()}),l.onDestroy(()=>{++r==o&&this._onDestroy()}),l.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((l,c)=>Math.max(l,c.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const $M=["*"],hk=["content"];function gk(n,e){if(1&n){const t=Lh();bn(0,"div",2),Li("click",function(){return qf(t),Zf(Qi()._onBackdropClicked())}),Nn()}2&n&&Xi("mat-drawer-shown",Qi()._isShowingBackdrop())}function pk(n,e){1&n&&(bn(0,"mat-drawer-content"),kr(1,2),Nn())}const mk=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],vk=["mat-drawer","mat-drawer-content","*"],Ek={transformDrawer:Gp("transform",[bo("open, open-instant",js({transform:"none",visibility:"visible"})),bo("void",js({"box-shadow":"none",visibility:"hidden"})),pf("void => open-instant",gf("0ms")),pf("void <=> open, open-instant => void",gf("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},_k=new Xt("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function yk(){return!1}}),QM=new Xt("MAT_DRAWER_CONTAINER");let mf=(()=>{class n extends Wp{constructor(t,r,i,o,l){super(i,o,l),this._changeDetectorRef=t,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(At(Ls),At(Ln(()=>qM)),At(Sr),At(VM),At(Bn))},n.\u0275cmp=Fr({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,r){2&t&&Xu("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[ua([{provide:Wp,useExisting:n}]),ds],ngContentSelectors:$M,decls:1,vars:0,template:function(t,r){1&t&&(Os(),kr(0))},encapsulation:2,changeDetection:0}),n})(),XM=(()=>{class n{constructor(t,r,i,o,l,c,E,B){this._elementRef=t,this._focusTrapFactory=r,this._focusMonitor=i,this._platform=o,this._ngZone=l,this._interactivityChecker=c,this._doc=E,this._container=B,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ge,this._animationEnd=new ge,this._animationState="void",this.openedChange=new Kn(!0),this._openedStream=this.openedChange.pipe(nr(Q=>Q),ne(()=>{})),this.openedStart=this._animationStarted.pipe(nr(Q=>Q.fromState!==Q.toState&&0===Q.toState.indexOf("open")),Jg(void 0)),this._closedStream=this.openedChange.pipe(nr(Q=>!Q),ne(()=>{})),this.closedStart=this._animationStarted.pipe(nr(Q=>Q.fromState!==Q.toState&&"void"===Q.toState),Jg(void 0)),this._destroyed=new ge,this.onPositionChanged=new Kn,this._modeChanged=new ge,this.openedChange.subscribe(Q=>{Q?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{ql(this._elementRef.nativeElement,"keydown").pipe(nr(Q=>27===Q.keyCode&&!this.disableClose&&!Fp(Q)),Ti(this._destroyed)).subscribe(Q=>this._ngZone.run(()=>{this.close(),Q.stopPropagation(),Q.preventDefault()}))}),this._animationEnd.pipe(jp((Q,fe)=>Q.fromState===fe.fromState&&Q.toState===fe.toState)).subscribe(Q=>{const{fromState:fe,toState:Ae}=Q;(0===Ae.indexOf("open")&&"void"===fe||"void"===Ae&&0===fe.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(t),this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=ji(t)}get autoFocus(){return this._autoFocus??("side"===this.mode?"dialog":"first-tabbable")}set autoFocus(t){("true"===t||"false"===t||null==t)&&(t=ji(t)),this._autoFocus=t}get opened(){return this._opened}set opened(t){this.toggle(ji(t))}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_takeFocus(){if(!this._focusTrap)return;const t=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{!r&&"function"==typeof this._elementRef.nativeElement.focus&&t.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(t){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,t):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const t=this._doc.activeElement;return!!t&&this._elementRef.nativeElement.contains(t)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._anchor?.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(t=!this.opened,r){t&&r&&(this._openedVia=r);const i=this._setOpen(t,!t&&this._isFocusWithinDrawer(),this._openedVia||"program");return t||(this._openedVia=null),i}_setOpen(t,r,i){return this._opened=t,t?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",r&&this._restoreFocus(i)),this._updateFocusTrapState(),new Promise(o=>{this.openedChange.pipe(ft(1)).subscribe(l=>o(l?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(t){const r=this._elementRef.nativeElement,i=r.parentNode;"end"===t?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),i.insertBefore(this._anchor,r)),i.appendChild(r)):this._anchor&&this._anchor.parentNode.insertBefore(r,this._anchor)}}return n.\u0275fac=function(t){return new(t||n)(At(Sr),At(r1),At(CM),At(ys),At(Bn),At(_M),At(Rn,8),At(QM,8))},n.\u0275cmp=Fr({type:n,selectors:[["mat-drawer"]],viewQuery:function(t,r){if(1&t&&Eo(hk,5),2&t){let i;ni(i=ri())&&(r._content=i.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,r){1&t&&Fh("@transform.start",function(o){return r._animationStarted.next(o)})("@transform.done",function(o){return r._animationEnd.next(o)}),2&t&&(aa("align",null),jh("@transform",r._animationState),Xi("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:$M,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(t,r){1&t&&(Os(),bn(0,"div",0,1),kr(2),Nn())},dependencies:[Wp],encapsulation:2,data:{animation:[Ek.transformDrawer]},changeDetection:0}),n})(),qM=(()=>{class n{constructor(t,r,i,o,l,c=!1,E){this._dir=t,this._element=r,this._ngZone=i,this._changeDetectorRef=o,this._animationMode=E,this._drawers=new ca,this.backdropClick=new Kn,this._destroyed=new ge,this._doCheckSubject=new ge,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ge,t&&t.change.pipe(Ti(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),l.change().pipe(Ti(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=c}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=ji(t)}get hasBackdrop(){return this._backdropOverride??(!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode)}set hasBackdrop(t){this._backdropOverride=null==t?null:ji(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Mo(this._allDrawers),Ti(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Mo(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(kp(10),Ti(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const i=this._left._getWidth();t+=i,r-=i}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const i=this._right._getWidth();r+=i,t-=i}t=t||null,r=r||null,(t!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:t,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(nr(r=>r.fromState!==r.toState),Ti(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Ti(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){!t||t.onPositionChanged.pipe(Ti(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(ft(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Ti(nt(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const r=this._element.nativeElement.classList,i="mat-drawer-container-has-open";t?r.add(i):r.remove(i)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return n.\u0275fac=function(t){return new(t||n)(At(AM,8),At(Sr),At(Bn),At(Ls),At(fk),At(_k),At(Dl,8))},n.\u0275cmp=Fr({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(t,r,i){if(1&t&&(ws(i,mf,5),ws(i,XM,5)),2&t){let o;ni(o=ri())&&(r._content=o.first),ni(o=ri())&&(r._allDrawers=o)}},viewQuery:function(t,r){if(1&t&&Eo(mf,5),2&t){let i;ni(i=ri())&&(r._userContent=i.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,r){2&t&&Xi("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[ua([{provide:QM,useExisting:n}])],ngContentSelectors:vk,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,r){1&t&&(Os(mk),vi(0,gk,1,2,"div",0),kr(1),kr(2,1),vi(3,pk,2,0,"mat-drawer-content",1)),2&t&&(yr("ngIf",r.hasBackdrop),hr(3),yr("ngIf",!r._content))},dependencies:[Il,mf],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}'],encapsulation:2,changeDetection:0}),n})(),Tk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({imports:[Rl,Ta,KM,KM,Ta]}),n})(),ZM=(()=>{class n{constructor(){this._listeners=[]}notify(t,r){for(let i of this._listeners)i(t,r)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(r=>t!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dk=0;const zp=new Xt("CdkAccordion");let Ck=(()=>{class n{constructor(){this._stateChanges=new ge,this._openCloseAllActions=new ge,this.id="cdk-accordion-"+Dk++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=ji(t)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Hn({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[ua([{provide:zp,useExisting:n}]),is]}),n})(),Mk=0,Sk=(()=>{class n{constructor(t,r,i){this.accordion=t,this._changeDetectorRef=r,this._expansionDispatcher=i,this._openCloseAllSubscription=T.EMPTY,this.closed=new Kn,this.opened=new Kn,this.destroyed=new Kn,this.expandedChange=new Kn,this.id="cdk-accordion-child-"+Mk++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=i.listen((o,l)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===l&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=ji(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=ji(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(At(zp,12),At(Ls),At(ZM))},n.\u0275dir=Hn({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[ua([{provide:zp,useValue:void 0}])]}),n})(),Ak=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({}),n})();class $p{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Ik extends $p{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class JM extends $p{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Rk extends $p{constructor(e){super(),this.element=e instanceof Sr?e.nativeElement:e}}let Ok=(()=>{class n extends class Pk{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Ik?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof JM?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Rk?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Kn,this.attachDomPortal=o=>{const l=o.element,c=this._document.createComment("dom-portal");o.setAttachedHost(this),l.parentNode.insertBefore(c,l),this._getRootNode().appendChild(l),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(l,c)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),l=r.createComponent(o,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(l.hostView.rootNodes[0]),super.setDisposeFn(()=>l.destroy()),this._attachedPortal=t,this._attachedRef=l,this.attached.emit(l),l}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(At(po),At(ti),At(Rn))},n.\u0275dir=Hn({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ds]}),n})(),bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({}),n})();const wk=["body"];function Nk(n,e){}const Lk=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Fk=["mat-expansion-panel-header","*","mat-action-row"];function xk(n,e){1&n&&Tr(0,"span",2),2&n&&yr("@indicatorRotate",Qi()._getExpandedState())}const Bk=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Uk=["mat-panel-title","mat-panel-description","*"],Qp=new Xt("MAT_ACCORDION"),eS="225ms cubic-bezier(0.4,0.0,0.2,1)",tS={indicatorRotate:Gp("indicatorRotate",[bo("collapsed, void",js({transform:"rotate(0deg)"})),bo("expanded",js({transform:"rotate(180deg)"})),pf("expanded <=> collapsed, void => collapsed",gf(eS))]),bodyExpansion:Gp("bodyExpansion",[bo("collapsed, void",js({height:"0px",visibility:"hidden"})),bo("expanded",js({height:"*",visibility:"visible"})),pf("expanded <=> collapsed, void => collapsed",gf(eS))])},nS=new Xt("MAT_EXPANSION_PANEL");let kk=(()=>{class n{constructor(t,r){this._template=t,this._expansionPanel=r}}return n.\u0275fac=function(t){return new(t||n)(At(Ji),At(nS,8))},n.\u0275dir=Hn({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),jk=0;const rS=new Xt("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let iS=(()=>{class n extends Sk{constructor(t,r,i,o,l,c,E){super(t,r,i),this._viewContainerRef=o,this._animationMode=c,this._hideToggle=!1,this.afterExpand=new Kn,this.afterCollapse=new Kn,this._inputChanges=new ge,this._headerId="mat-expansion-panel-header-"+jk++,this._bodyAnimationDone=new ge,this.accordion=t,this._document=l,this._bodyAnimationDone.pipe(jp((B,Q)=>B.fromState===Q.fromState&&B.toState===Q.toState)).subscribe(B=>{"void"!==B.fromState&&("expanded"===B.toState?this.afterExpand.emit():"collapsed"===B.toState&&this.afterCollapse.emit())}),E&&(this.hideToggle=E.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=ji(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Mo(null),nr(()=>this.expanded&&!this._portal),ft(1)).subscribe(()=>{this._portal=new JM(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,r=this._body.nativeElement;return t===r||r.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(At(Qp,12),At(Ls),At(ZM),At(ti),At(Rn),At(Dl,8),At(rS,8))},n.\u0275cmp=Fr({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,r,i){if(1&t&&ws(i,kk,5),2&t){let o;ni(o=ri())&&(r._lazyContent=o.first)}},viewQuery:function(t,r){if(1&t&&Eo(wk,5),2&t){let i;ni(i=ri())&&(r._body=i.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,r){2&t&&Xi("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[ua([{provide:Qp,useValue:void 0},{provide:nS,useExisting:n}]),ds,is],ngContentSelectors:Fk,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,r){1&t&&(Os(Lk),kr(0),bn(1,"div",0,1),Li("@bodyExpansion.done",function(o){return r._bodyAnimationDone.next(o)}),bn(3,"div",2),kr(4,1),vi(5,Nk,0,0,"ng-template",3),Nn(),kr(6,2),Nn()),2&t&&(hr(1),yr("@bodyExpansion",r._getExpandedState())("id",r.id),aa("aria-labelledby",r._headerId),hr(4),yr("cdkPortalOutlet",r._portal))},dependencies:[Ok],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[tS.bodyExpansion]},changeDetection:0}),n})();class Hk{}const Vk=_1(Hk);let sS=(()=>{class n extends Vk{constructor(t,r,i,o,l,c,E){super(),this.panel=t,this._element=r,this._focusMonitor=i,this._changeDetectorRef=o,this._animationMode=c,this._parentChangeSubscription=T.EMPTY;const B=t.accordion?t.accordion._stateChanges.pipe(nr(Q=>!(!Q.hideToggle&&!Q.togglePosition))):Tt;this.tabIndex=parseInt(E||"")||0,this._parentChangeSubscription=nt(t.opened,t.closed,B,t._inputChanges.pipe(nr(Q=>!!(Q.hideToggle||Q.disabled||Q.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(nr(()=>t._containsFocus())).subscribe(()=>i.focusVia(r,"program")),l&&(this.expandedHeight=l.expandedHeight,this.collapsedHeight=l.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Fp(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,r){t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(At(iS,1),At(Sr),At(CM),At(Ls),At(rS,8),At(Dl,8),Js("tabindex"))},n.\u0275cmp=Fr({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,r){1&t&&Li("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&t&&(aa("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Xu("height",r._getHeaderHeight()),Xi("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[ds],ngContentSelectors:Uk,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,r){1&t&&(Os(Bk),bn(0,"span",0),kr(1),kr(2,1),kr(3,2),Nn(),vi(4,xk,1,1,"span",1)),2&t&&(hr(4),yr("ngIf",r._showToggle()))},dependencies:[Il],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[tS.indicatorRotate]},changeDetection:0}),n})(),Kk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Hn({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),Wk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Hn({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),Gk=(()=>{class n extends Ck{constructor(){super(...arguments),this._ownHeaders=new ca,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=ji(t)}ngAfterContentInit(){this._headers.changes.pipe(Mo(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(r=>r.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new GU(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=function rv(n){return Vi(()=>{const e=n.prototype.constructor,t=e[Ii]||fd(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Ii]||fd(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}(n)))(r||n)}}(),n.\u0275dir=Hn({type:n,selectors:[["mat-accordion"]],contentQueries:function(t,r,i){if(1&t&&ws(i,sS,5),2&t){let o;ni(o=ri())&&(r._headers=o)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,r){2&t&&Xi("mat-accordion-multi",r.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[ua([{provide:Qp,useExisting:n}]),ds]}),n})(),Yk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({imports:[Rl,Ta,Ak,bk]}),n})();const zk=["drawer"];function $k(n,e){if(1&n&&(bn(0,"li"),Mr(1),Nn()),2&n){const t=Qi().$implicit;hr(1),oa("\n",t.data.name," ")}}function Qk(n,e){if(1&n&&(bn(0,"a",27)(1,"div",28),vi(2,$k,2,1,"li",29),Nn()()),2&n){const t=e.$implicit,r=Qi().$implicit;Uh("routerLink","/reddit/",t.data.sub,"/",t.data.defaultCat,""),hr(2),yr("ngIf",t.catagory==r)}}function Xk(n,e){if(1&n&&(bn(0,"mat-expansion-panel",23)(1,"mat-expansion-panel-header")(2,"mat-panel-title",24),Mr(3),Nn(),Tr(4,"mat-panel-description"),Nn(),bn(5,"ul",25),vi(6,Qk,3,3,"a",26),Nn()()),2&n){const t=e.$implicit,r=Qi();hr(3),oa(" ",t," "),hr(3),yr("ngForOf",r.filterdData)}}let qk=(()=>{class n{constructor(t,r){this.http=t,this.util=r,this.title="SdLbog",this.catagory=[],this.filterdData=[],r.subtitle.subscribe(i=>{this.subTitle=i}),this.http.get("assets/baseSub.json").subscribe(i=>{this.subConf=i,console.log(this.subConf);for(let o of this.subConf)for(let l of o.catagary)this.catagory.includes(l)||this.catagory.push(l),this.filterdData.push({catagory:l,data:o});console.log(this.filterdData)})}tranfsformToArr(t){let r=[];for(let i in t)r.push({key:i,value:t[i]});return console.log("whatever array pip",r),r}onSwipe(t){Math.abs(t.deltaX)>40&&(t.deltaX>0?this.sidenav.open():this.sidenav.close())}}return n.\u0275fac=function(t){return new(t||n)(At(Wl),At(cM))},n.\u0275cmp=Fr({type:n,selectors:[["app-root"]],viewQuery:function(t,r){if(1&t&&Eo(zk,5),2&t){let i;ni(i=ri())&&(r.sidenav=i.first)}},decls:53,vars:3,consts:[[1,"main-container",3,"swipe"],["mode","side",1,"main-sidenav"],["drawer",""],[1,"w-full","h-60","bg-red-400","inline-block","p-0","align-bottom","pl-4"],[1,"font-medium","leading-tight","text-3xl","mt-0","mb-2","pt-2"],[1,"font-medium","leading-tight","text-base","mt-0","mb-2"],[1,"font-medium","leading-tight","text-red-200","text-sm","mt-0","mb-2","ml-10"],["href","https://github.com/sauravdharwadkar/sdLbog",1,"inline"],[1,"col-auto"],[1,"row-auto","flex"],[1,"font-medium","leading-tight","text-red-200","text-sm","mt-0","mb-2","ml-5","mt-2"],["src","/assets/github.svg",1,"ml-2",2,"height","2rem"],[1,"catagory-list"],[1,"example-headers-align"],["hideToggle","",4,"ngFor","ngForOf"],["color","primary"],["mat-icon-button","","aria-label","icon-button with menu icon",1,"menu",3,"click"],[1,"ml-5","text-cyan-300"],[1,"ml-5","text-green-200"],[1,"menu-spacer"],["mat-icon-button","","aria-label","icon-button with heart icon",1,"favorite-icon"],["mat-icon-button","","aria-label","Example icon-button with share icon",1,""],[1,"p-2","w-full","h-full"],["hideToggle",""],[1,"panel-title",2,"font-size","1.2em"],[2,"font-size","0.9em"],["class","text-sky-400 ",3,"routerLink",4,"ngFor","ngForOf"],[1,"text-sky-400",3,"routerLink"],[1,"m-1",2,"background-color","#454535"],[4,"ngIf"]],template:function(t,r){if(1&t){const i=Lh();bn(0,"mat-drawer-container",0),Li("swipe",function(l){return r.onSwipe(l)}),bn(1,"mat-drawer",1,2)(3,"div",3),Tr(4,"br")(5,"br"),bn(6,"span",4),Mr(7,"SD Lbog "),Nn(),Tr(8,"br"),bn(9,"span",5),Mr(10,"simple by default"),Nn(),Tr(11,"br"),bn(12,"span",5),Mr(13,"powerfull when needed"),Nn(),Tr(14,"br")(15,"br"),bn(16,"span",5),Mr(17,"powered by :"),Nn(),Tr(18,"br"),bn(19,"span",6),Mr(20," angular , angular-mat , tailwindcss ,cordova "),Nn(),Tr(21,"br")(22,"br"),bn(23,"a",7)(24,"div",8)(25,"div",9)(26,"span",5),Mr(27,"dev : "),Nn(),Tr(28,"br"),bn(29,"span",10),Mr(30,"Saurav Dharwadkar "),Nn(),Tr(31,"img",11),Nn()()()(),bn(32,"div",12)(33,"mat-accordion",13),vi(34,Xk,7,2,"mat-expansion-panel",14),Nn()()(),bn(35,"mat-drawer-content")(36,"mat-toolbar",15)(37,"button",16),Li("click",function(){return qf(i),Zf(function m_(n){return function xa(n,e){return n[e]}(function fA(){return vn.lFrame.contextLView}(),22+n)}(2).toggle())}),bn(38,"mat-icon"),Mr(39,"menu"),Nn()(),bn(40,"span",17),Mr(41),Nn(),bn(42,"span",18),Mr(43),Nn(),Tr(44,"span",19),bn(45,"button",20)(46,"mat-icon"),Mr(47,"favorite"),Nn()(),bn(48,"button",21)(49,"mat-icon"),Mr(50,"share"),Nn()()(),bn(51,"div",22),Tr(52,"router-outlet"),Nn()()()}2&t&&(hr(34),yr("ngForOf",r.catagory),hr(7),oa("",r.title," :"),hr(2),oa(" ",r.subTitle," "))},dependencies:[Fg,Il,gp,Jc,R1,V1,XM,qM,mf,Gk,iS,sS,Wk,Kk],styles:[".menu-spacer[_ngcontent-%COMP%]{flex:1 1 auto}.main-container[_ngcontent-%COMP%]{width:100%;height:100%;margin:0}.main-sidenav[_ngcontent-%COMP%]{min-width:20vw;width:25em;max-width:60vw}mat-drawer-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}"]}),n})();var Zk=k(377);const Jk=["videplayer"];let ej=(()=>{class n{constructor(){}ngOnInit(){}ngAfterViewInit(){if("dash"==this.item.formate){var t=this.item.url,r=Zk.MediaPlayer().create();let i=document.getElementById(this.item.id)||this.input.nativeElement;r.initialize(i,t,!0)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Fr({type:n,selectors:[["app-video-player"]],viewQuery:function(t,r){if(1&t&&Eo(Jk,5),2&t){let i;ni(i=ri())&&(r.input=i.first)}},inputs:{item:"item"},decls:3,vars:3,consts:[["ngModel","","preload","auto","controls","",1,"video-player",3,"id"],["videplayer",""],[3,"src","type"]],template:function(t,r){1&t&&(bn(0,"video",0,1),Tr(2,"source",2),Nn()),2&t&&(yr("id",r.item.id),hr(2),yr("src",r.item.url,rl)("type",r.item.formateType))},styles:[".video-player[_ngcontent-%COMP%]{width:70vw;min-height:40vh;height:auto;max-height:70vh}"]}),n})();function tj(n,e){if(1&n&&(bn(0,"p",10),Mr(1),Nn()),2&n){const t=Qi().$implicit;hr(1),Zu(t.text)}}function nj(n,e){1&n&&Tr(0,"img",11),2&n&&xh("src",Qi().$implicit.url,rl)}function rj(n,e){1&n&&Tr(0,"app-video-player",12),2&n&&yr("item",Qi().$implicit)}function ij(n,e){if(1&n&&(bn(0,"li",4)(1,"div",5)(2,"h2",6),Mr(3),Nn(),vi(4,tj,2,1,"p",7),vi(5,nj,1,1,"img",8),vi(6,rj,1,1,"app-video-player",9),Nn()()),2&n){const t=e.$implicit;hr(3),Zu(t.title),hr(1),yr("ngIf",0==t.type),hr(1),yr("ngIf",1==t.type),hr(1),yr("ngIf",2==t.type)}}const sj=[{path:"reddit/:sub/:type",component:(()=>{class n{constructor(t,r){this.httpHandler=t,this.route=r,this.subreddit="pune",this.regexpImg=new RegExp("........i.redd.*"),this.regexpVid=new RegExp("........v.redd.*"),this.filterdData=[],this.count=0,this.updatecount=0,this.after=[],this.route.params.subscribe(i=>{this.subreddit=i.sub,this.contentType=i.type,console.log(this.contentType,this.subreddit),this.httpHandler.subtitle.next(this.subreddit),this.filterdData=[],this.count=0,this.updatecount=0,this.getNewData()}),this.getNewData()}getNewData(){this.count==this.updatecount&&(this.count++,this.httpHandler.getJsonReddit(this.subreddit,this.contentType,this.after[this.after.length-1]).subscribe(t=>{for(let r of t.data.children)this.regexpImg.test(r.data.url)?this.filterdData.push({id:r.data.id,title:r.data.title,type:1,text:"",url:r.data.url,formate:"",formateType:""}):this.regexpVid.test(r.data.url)&&1==r.data.is_video?this.filterdData.push({id:r.data.id,title:r.data.title,type:2,text:"",url:r.data.secure_media.reddit_video.dash_url,formate:"dash",formateType:"application/dash+xml"}):this.filterdData.push({id:r.data.id,title:r.data.title,type:0,text:r.data.selftext,url:r.data.url,formate:"",formateType:""});this.after.push(t.data.after),console.log(this.after,t),this.updatecount++}))}ngOnInit(){}isInViewport(t){const r=t.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)}scrollHandler(t){console.log("scoll triggerd");for(let r of document.getElementsByTagName("video"))this.isInViewport(r)?r.play().catch(i=>{console.log(i)}):r.pause();t.target.offsetHeight+t.target.scrollTop+50>=t.target.scrollHeight&&this.getNewData()}}return n.\u0275fac=function(t){return new(t||n)(At(cM),At(Ea))},n.\u0275cmp=Fr({type:n,selectors:[["app-home"]],hostBindings:function(t,r){1&t&&Li("scroll",function(o){return r.scrollHandler(o)})},decls:4,vars:1,consts:[[1,"scroll-smooth","hover:scroll-auto",2,"overflow-y","scroll",3,"scroll"],[1,"scroll-view","grid","place-items-center","h-screen"],[1,"grid-col-1"],["class","p-2",4,"ngFor","ngForOf"],[1,"p-2"],[1,"containder","border-2","border-sky-500","w-max","p-4"],[1,"font-large","leading-tight","text-2xl","mt-0","mb-2","text-blue-600",2,"width","70vw"],["style","width: 70vw;overflow:auto ;",4,"ngIf"],["alt","Loading","class","p-2",3,"src",4,"ngIf"],[3,"item",4,"ngIf"],[2,"width","70vw","overflow","auto"],["alt","Loading",1,"p-2",3,"src"],[3,"item"]],template:function(t,r){1&t&&(bn(0,"div",0),Li("scroll",function(o){return r.scrollHandler(o)}),bn(1,"div",1)(2,"ul",2),vi(3,ij,7,4,"li",3),Nn()()()),2&t&&(hr(3),yr("ngForOf",r.filterdData))},dependencies:[Fg,Il,ej],styles:[".scroll-view[_ngcontent-%COMP%]{height:calc(100vh - 64px);width:100%}img[_ngcontent-%COMP%]{min-width:70vw;min-height:40vw;width:70vw;height:auto;object-fit:cover;background-image:url(https://i.stack.imgur.com/kOnzy.gif);background-size:15vw;background-repeat:no-repeat;background-position:center}"]}),n})()}];let aj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({imports:[ef.forChild(sj),ef]}),n})(),oj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({imports:[Rl]}),n})(),lj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({imports:[Rl,aj,oj]}),n})();function aS(n){return new Mt(3e3,!1)}function Kj(){return typeof window<"u"&&typeof window.document<"u"}function Xp(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Hs(n){switch(n.length){case 0:return new Jl;case 1:return n[0];default:return new zM(n)}}function oS(n,e,t,r,i=new Map,o=new Map){const l=[],c=[];let E=-1,B=null;if(r.forEach(Q=>{const fe=Q.get("offset"),Ae=fe==E,be=Ae&&B||new Map;Q.forEach((je,Xe)=>{let gt=Xe,dt=je;if("offset"!==Xe)switch(gt=e.normalizePropertyName(gt,l),dt){case"!":dt=i.get(Xe);break;case Ts:dt=o.get(Xe);break;default:dt=e.normalizeStyleValue(Xe,gt,dt,l)}be.set(gt,dt)}),Ae||c.push(be),B=be,E=fe}),l.length)throw function bj(n){return new Mt(3502,!1)}();return c}function qp(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&Zp(t,"start",n)));break;case"done":n.onDone(()=>r(t&&Zp(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&Zp(t,"destroy",n)))}}function Zp(n,e,t){const o=Jp(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(o._data=l),o}function Jp(n,e,t,r,i="",o=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!l}}function si(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function lS(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let em=(n,e)=>!1,uS=(n,e,t)=>[],cS=null;function tm(n){const e=n.parentNode||n.host;return e===cS?null:e}(Xp()||typeof Element<"u")&&(Kj()?(cS=(()=>document.documentElement)(),em=(n,e)=>{for(;e;){if(e===n)return!0;e=tm(e)}return!1}):em=(n,e)=>n.contains(e),uS=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ca=null,fS=!1;const dS=em,hS=uS;let gS=(()=>{class n{validateStyleProperty(t){return function Gj(n){Ca||(Ca=function Yj(){return typeof document<"u"?document.body:null}()||{},fS=!!Ca.style&&"WebkitAppearance"in Ca.style);let e=!0;return Ca.style&&!function Wj(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ca.style,!e&&fS&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ca.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return dS(t,r)}getParentElement(t){return tm(t)}query(t,r,i){return hS(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,l,c=[],E){return new Jl(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})(),nm=(()=>{class n{}return n.NOOP=new gS,n})();const rm="ng-enter",vf="ng-leave",Ef="ng-trigger",eu=".ng-trigger",mS="ng-animating",im=".ng-animating";function Vs(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:sm(parseFloat(e[1]),e[2])}function sm(n,e){return"s"===e?1e3*n:n}function _f(n,e,t){return n.hasOwnProperty("duration")?n:function Qj(n,e,t){let i,o=0,l="";if("string"==typeof n){const c=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===c)return e.push(aS()),{duration:0,delay:0,easing:""};i=sm(parseFloat(c[1]),c[2]);const E=c[3];null!=E&&(o=sm(parseFloat(E),c[4]));const B=c[5];B&&(l=B)}else i=n;if(!t){let c=!1,E=e.length;i<0&&(e.push(function uj(){return new Mt(3100,!1)}()),c=!0),o<0&&(e.push(function cj(){return new Mt(3101,!1)}()),c=!0),c&&e.splice(E,0,aS())}return{duration:i,delay:o,easing:l}}(n,e,t)}function tu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function vS(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Ks(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function _S(n,e,t){return t?e+":"+t+";":""}function yS(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=_S(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=_S(0,Jj(t),n.style[t]));n.setAttribute("style",e)}function ns(n,e,t){n.style&&(e.forEach((r,i)=>{const o=om(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),Xp()&&yS(n))}function Ma(n,e){n.style&&(e.forEach((t,r)=>{const i=om(r);n.style[i]=""}),Xp()&&yS(n))}function nu(n){return Array.isArray(n)?1==n.length?n[0]:GM(n):n}const am=new RegExp("{{\\s*(.+?)\\s*}}","g");function TS(n){let e=[];if("string"==typeof n){let t;for(;t=am.exec(n);)e.push(t[1]);am.lastIndex=0}return e}function yf(n,e,t){const r=n.toString(),i=r.replace(am,(o,l)=>{let c=e[l];return null==c&&(t.push(function dj(n){return new Mt(3003,!1)}()),c=""),c.toString()});return i==r?n:i}function Tf(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Zj=/-+([a-z0-9])/g;function om(n){return n.replace(Zj,(...e)=>e[1].toUpperCase())}function Jj(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ai(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function hj(n){return new Mt(3004,!1)}()}}function DS(n,e){return window.getComputedStyle(n)[e]}function sH(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function aH(n,e,t){if(":"==n[0]){const E=function oH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function Ij(n){return new Mt(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof E)return void e.push(E);n=E}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Aj(n){return new Mt(3015,!1)}()),e;const i=r[1],o=r[2],l=r[3];e.push(CS(i,l));"<"==o[0]&&!("*"==i&&"*"==l)&&e.push(CS(l,i))}(r,t,e)):t.push(n),t}const Sf=new Set(["true","1"]),Af=new Set(["false","0"]);function CS(n,e){const t=Sf.has(n)||Af.has(n),r=Sf.has(e)||Af.has(e);return(i,o)=>{let l="*"==n||n==i,c="*"==e||e==o;return!l&&t&&"boolean"==typeof i&&(l=i?Sf.has(n):Af.has(n)),!c&&r&&"boolean"==typeof o&&(c=o?Sf.has(e):Af.has(e)),l&&c}}const lH=new RegExp("s*:selfs*,?","g");function lm(n,e,t,r){return new uH(n).build(e,t,r)}class uH{constructor(e){this._driver=e}build(e,t,r){const i=new dH(t);return this._resetContextStyleTimingState(i),ai(this,nu(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function pj(){return new Mt(3006,!1)}()),e.definitions.forEach(c=>{if(this._resetContextStyleTimingState(t),0==c.type){const E=c,B=E.name;B.toString().split(/\s*,\s*/).forEach(Q=>{E.name=Q,o.push(this.visitState(E,t))}),E.name=B}else if(1==c.type){const E=this.visitTransition(c,t);r+=E.queryCount,i+=E.depCount,l.push(E)}else t.errors.push(function mj(){return new Mt(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,l=i||{};r.styles.forEach(c=>{c instanceof Map&&c.forEach(E=>{TS(E).forEach(B=>{l.hasOwnProperty(B)||o.add(B)})})}),o.size&&(Tf(o.values()),t.errors.push(function vj(n,e){return new Mt(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ai(this,nu(e.animation),t);return{type:1,matchers:sH(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Sa(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ai(this,r,t)),options:Sa(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(l=>{t.currentTime=r;const c=ai(this,l,t);return i=Math.max(i,t.currentTime),c});return t.currentTime=i,{type:3,steps:o,options:Sa(e.options)}}visitAnimate(e,t){const r=function gH(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return um(_f(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=um(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=_f(t,e);return um(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:js({});if(5==o.type)i=this.visitKeyframes(o,t);else{let l=e.styles,c=!1;if(!l){c=!0;const B={};r.easing&&(B.easing=r.easing),l=js(B)}t.currentTime+=r.duration+r.delay;const E=this.visitStyle(l,t);E.isEmptyStep=c,i=E}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let c of i)"string"==typeof c?c===Ts?r.push(c):t.errors.push(new Mt(3002,!1)):r.push(vS(c));let o=!1,l=null;return r.forEach(c=>{if(c instanceof Map&&(c.has("easing")&&(l=c.get("easing"),c.delete("easing")),!o))for(let E of c.values())if(E.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((c,E)=>{const B=t.collectedStyles.get(t.currentQuerySelector),Q=B.get(E);let fe=!0;Q&&(o!=i&&o>=Q.startTime&&i<=Q.endTime&&(t.errors.push(function _j(n,e,t,r,i){return new Mt(3010,!1)}()),fe=!1),o=Q.startTime),fe&&B.set(E,{startTime:o,endTime:i}),t.options&&function qj(n,e,t){const r=e.params||{},i=TS(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function fj(n){return new Mt(3001,!1)}())})}(c,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function yj(){return new Mt(3011,!1)}()),r;let o=0;const l=[];let c=!1,E=!1,B=0;const Q=e.steps.map(dt=>{const Ft=this._makeStyleAst(dt,t);let pt=null!=Ft.offset?Ft.offset:function hH(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ft.styles),Kt=0;return null!=pt&&(o++,Kt=Ft.offset=pt),E=E||Kt<0||Kt>1,c=c||Kt<B,B=Kt,l.push(Kt),Ft});E&&t.errors.push(function Tj(){return new Mt(3012,!1)}()),c&&t.errors.push(function Dj(){return new Mt(3200,!1)}());const fe=e.steps.length;let Ae=0;o>0&&o<fe?t.errors.push(function Cj(){return new Mt(3202,!1)}()):0==o&&(Ae=1/(fe-1));const be=fe-1,je=t.currentTime,Xe=t.currentAnimateTimings,gt=Xe.duration;return Q.forEach((dt,Ft)=>{const pt=Ae>0?Ft==be?1:Ae*Ft:l[Ft],Kt=pt*gt;t.currentTime=je+Xe.delay+Kt,Xe.duration=Kt,this._validateStyleAst(dt,t),dt.offset=pt,r.styles.push(dt)}),r}visitReference(e,t){return{type:8,animation:ai(this,nu(e.animation),t),options:Sa(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Sa(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Sa(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,l]=function cH(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(lH,"")),n=n.replace(/@\*/g,eu).replace(/@\w+/g,t=>eu+"-"+t.slice(1)).replace(/:animating/g,im),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,si(t.collectedStyles,t.currentQuerySelector,new Map);const c=ai(this,nu(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:c,originalSelector:e.selector,options:Sa(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Mj(){return new Mt(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:_f(e.timings,t.errors,!0);return{type:12,animation:ai(this,nu(e.animation),t),timings:r,options:null}}}class dH{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set,this.nonAnimatableCSSPropertiesFound=new Set}}function Sa(n){return n?(n=tu(n)).params&&(n.params=function fH(n){return n?tu(n):null}(n.params)):n={},n}function um(n,e,t){return{duration:n,delay:e,easing:t}}function cm(n,e,t,r,i,o,l=null,c=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:l,subTimeline:c}}class If{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const vH=new RegExp(":enter","g"),_H=new RegExp(":leave","g");function fm(n,e,t,r,i,o=new Map,l=new Map,c,E,B=[]){return(new yH).buildKeyframes(n,e,t,r,i,o,l,c,E,B)}class yH{buildKeyframes(e,t,r,i,o,l,c,E,B,Q=[]){B=B||new If;const fe=new dm(e,t,B,i,o,Q,[]);fe.options=E;const Ae=E.delay?Vs(E.delay):0;fe.currentTimeline.delayNextStep(Ae),fe.currentTimeline.setStyles([l],null,fe.errors,E),ai(this,r,fe);const be=fe.timelines.filter(je=>je.containsAnimation());if(be.length&&c.size){let je;for(let Xe=be.length-1;Xe>=0;Xe--){const gt=be[Xe];if(gt.element===t){je=gt;break}}je&&!je.allowOnlyTimelineStyles()&&je.setStyles([c],null,fe.errors,E)}return be.length?be.map(je=>je.buildKeyframes()):[cm(t,[],[],[],0,Ae,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);o!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const l=null!=r.duration?Vs(r.duration):null,c=null!=r.delay?Vs(r.delay):null;return 0!==l&&e.forEach(E=>{const B=t.appendInstructionToTimeline(E,l,c);o=Math.max(o,B.duration+B.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ai(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Rf);const l=Vs(o.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>ai(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Vs(e.options.delay):0;e.steps.forEach(l=>{const c=t.createSubContext(e.options);o&&c.delayNextStep(o),ai(this,l,c),i=Math.max(i,c.currentTimeline.currentTime),r.push(c.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return _f(t.params?yf(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,c=t.createSubContext().currentTimeline;c.easing=r.easing,e.styles.forEach(E=>{c.forwardTime((E.offset||0)*o),c.setStyles(E.styles,E.easing,t.errors,t.options),c.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(c),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Vs(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Rf);let l=r;const c=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=c.length;let E=null;c.forEach((B,Q)=>{t.currentQueryIndex=Q;const fe=t.createSubContext(e.options,B);o&&fe.delayNextStep(o),B===t.element&&(E=fe.currentTimeline),ai(this,e.animation,fe),fe.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,fe.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),E&&(t.currentTimeline.mergeTimelineCollectedStyles(E),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,l=Math.abs(o.duration),c=l*(t.currentQueryTotal-1);let E=l*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":E=c-E;break;case"full":E=r.currentStaggerTime}const Q=t.currentTimeline;E&&Q.delayNextStep(E);const fe=Q.currentTime;ai(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-fe+(i.startTime-r.currentTimeline.startTime)}}const Rf={};class dm{constructor(e,t,r,i,o,l,c,E){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=l,this.timelines=c,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Rf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=E||new Pf(this._driver,t,0),c.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Vs(r.duration)),null!=r.delay&&(i.delay=Vs(r.delay));const o=r.params;if(o){let l=i.params;l||(l=this.options.params={}),Object.keys(o).forEach(c=>{(!t||!l.hasOwnProperty(c))&&(l[c]=yf(o[c],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new dm(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Rf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new TH(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,l){let c=[];if(i&&c.push(this.element),e.length>0){e=(e=e.replace(vH,"."+this._enterClassName)).replace(_H,"."+this._leaveClassName);let B=this._driver.query(this.element,e,1!=r);0!==r&&(B=r<0?B.slice(B.length+r,B.length):B.slice(0,r)),c.push(...B)}return!o&&0==c.length&&l.push(function Sj(n){return new Mt(3014,!1)}()),c}}class Pf{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Pf(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ts),this._currentKeyframe.set(t,Ts);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},l=function DH(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,Ts)}else Ks(i,t)}),t}(e,this._globalTimelineStyles);for(let[c,E]of l){const B=yf(E,o,r);this._pendingStyles.set(c,B),this._localTimelineStyles.has(c)||this._backFill.set(c,this._globalTimelineStyles.get(c)||Ts),this._updateStyle(c,B)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((c,E)=>{const B=Ks(c,new Map,this._backFill);B.forEach((Q,fe)=>{"!"===Q?e.add(fe):Q===Ts&&t.add(fe)}),r||B.set("offset",E/this.duration),i.push(B)});const o=e.size?Tf(e.values()):[],l=t.size?Tf(t.values()):[];if(r){const c=i[0],E=new Map(c);c.set("offset",0),E.set("offset",1),i=[c,E]}return cm(this.element,i,o,l,this.duration,this.startTime,this.easing,!1)}}class TH extends Pf{constructor(e,t,r,i,o,l,c=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=c,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],l=r+t,c=t/l,E=Ks(e[0]);E.set("offset",0),o.push(E);const B=Ks(e[0]);B.set("offset",AS(c)),o.push(B);const Q=e.length-1;for(let fe=1;fe<=Q;fe++){let Ae=Ks(e[fe]);const be=Ae.get("offset");Ae.set("offset",AS((t+be*r)/l)),o.push(Ae)}r=l,t=0,i="",e=o}return cm(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function AS(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class hm{}const CH=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class MH extends hm{normalizePropertyName(e,t){return om(e)}normalizeStyleValue(e,t,r,i){let o="";const l=r.toString().trim();if(CH.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const c=r.match(/^[+-]?[\d\.]+([a-z]*)$/);c&&0==c[1].length&&i.push(function gj(n,e){return new Mt(3005,!1)}())}return l+o}}function IS(n,e,t,r,i,o,l,c,E,B,Q,fe,Ae){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:l,timelines:c,queriedElements:E,preStyleProps:B,postStyleProps:Q,totalTime:fe,errors:Ae}}const gm={};class RS{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function SH(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,l,c,E,B,Q){const fe=[],Ae=this.ast.options&&this.ast.options.params||gm,je=this.buildStyles(r,c&&c.params||gm,fe),Xe=E&&E.params||gm,gt=this.buildStyles(i,Xe,fe),dt=new Set,Ft=new Map,pt=new Map,Kt="void"===i,mn={params:AH(Xe,Ae),delay:this.ast.options?.delay},On=Q?[]:fm(e,t,this.ast.animation,o,l,je,gt,mn,B,fe);let Zn=0;if(On.forEach(li=>{Zn=Math.max(li.duration+li.delay,Zn)}),fe.length)return IS(t,this._triggerName,r,i,Kt,je,gt,[],[],Ft,pt,Zn,fe);On.forEach(li=>{const ui=li.element,No=si(Ft,ui,new Set);li.preStyleProps.forEach(Hi=>No.add(Hi));const Ds=si(pt,ui,new Set);li.postStyleProps.forEach(Hi=>Ds.add(Hi)),ui!==t&&dt.add(ui)});const oi=Tf(dt.values());return IS(t,this._triggerName,r,i,Kt,je,gt,On,oi,Ft,pt,Zn)}}function AH(n,e){const t=tu(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class IH{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=tu(this.defaultParams);return Object.keys(e).forEach(o=>{const l=e[o];null!==l&&(i[o]=l)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((l,c)=>{l&&(l=yf(l,i,t));const E=this.normalizer.normalizePropertyName(c,t);l=this.normalizer.normalizeStyleValue(c,E,l,t),r.set(E,l)})}),r}}class PH{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new IH(i.style,i.options&&i.options.params||{},r))}),PS(this.states,"true","1"),PS(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new RS(e,i,this.states))}),this.fallbackTransition=function OH(n,e,t){return new RS(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,c)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function PS(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const bH=new If;class wH{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=lm(this._driver,t,r,[]);if(r.length)throw function wj(n){return new Mt(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=oS(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let l;const c=new Map;if(o?(l=fm(this._driver,t,o,rm,vf,new Map,new Map,r,bH,i),l.forEach(Q=>{const fe=si(c,Q.element,new Map);Q.postStyleProps.forEach(Ae=>fe.set(Ae,null))})):(i.push(function Nj(){return new Mt(3300,!1)}()),l=[]),i.length)throw function Lj(n){return new Mt(3504,!1)}();c.forEach((Q,fe)=>{Q.forEach((Ae,be)=>{Q.set(be,this._driver.computeStyle(fe,be,Ts))})});const B=Hs(l.map(Q=>{const fe=c.get(Q.element);return this._buildPlayer(Q,new Map,fe)}));return this._playersById.set(e,B),B.onDestroy(()=>this.destroy(e)),this.players.push(B),B}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Fj(n){return new Mt(3301,!1)}();return t}listen(e,t,r,i){const o=Jp(t,"","","");return qp(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const OS="ng-animate-queued",pm="ng-animate-disabled",BH=[],bS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},UH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Di="__ng_removed";class mm{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function VH(n){return n??null}(r?e.value:e),r){const o=tu(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const ru="void",vm=new mm(ru);class kH{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ci(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function xj(n,e){return new Mt(3302,!1)}();if(null==r||0==r.length)throw function Bj(n){return new Mt(3303,!1)}();if(!function KH(n){return"start"==n||"done"==n}(r))throw function Uj(n,e){return new Mt(3400,!1)}();const o=si(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};o.push(l);const c=si(this._engine.statesByElement,e,new Map);return c.has(t)||(Ci(e,Ef),Ci(e,Ef+"-"+t),c.set(t,vm)),()=>{this._engine.afterFlush(()=>{const E=o.indexOf(l);E>=0&&o.splice(E,1),this._triggers.has(t)||c.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function kj(n){return new Mt(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),l=new Em(this.id,t,e);let c=this._engine.statesByElement.get(e);c||(Ci(e,Ef),Ci(e,Ef+"-"+t),this._engine.statesByElement.set(e,c=new Map));let E=c.get(t);const B=new mm(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&E&&B.absorbOptions(E.options),c.set(t,B),E||(E=vm),B.value!==ru&&E.value===B.value){if(!function YH(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(E.params,B.params)){const Xe=[],gt=o.matchStyles(E.value,E.params,Xe),dt=o.matchStyles(B.value,B.params,Xe);Xe.length?this._engine.reportError(Xe):this._engine.afterFlush(()=>{Ma(e,gt),ns(e,dt)})}return}const Ae=si(this._engine.playersByElement,e,[]);Ae.forEach(Xe=>{Xe.namespaceId==this.id&&Xe.triggerName==t&&Xe.queued&&Xe.destroy()});let be=o.matchTransition(E.value,B.value,e,B.params),je=!1;if(!be){if(!i)return;be=o.fallbackTransition,je=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:be,fromState:E,toState:B,player:l,isFallbackTransition:je}),je||(Ci(e,OS),l.onStart(()=>{wo(e,OS)})),l.onDone(()=>{let Xe=this.players.indexOf(l);Xe>=0&&this.players.splice(Xe,1);const gt=this._engine.playersByElement.get(e);if(gt){let dt=gt.indexOf(l);dt>=0&&gt.splice(dt,1)}}),this.players.push(l),Ae.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,eu,!0),i=e.shadowRoot?this._engine.driver.query(e.shadowRoot,eu,!0):[];[...r,...i].forEach(o=>{if(o[Di])return;const l=this._engine.fetchNamespacesByElement(o);l.size?l.forEach(c=>c.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),l=new Map;if(o){const c=[];if(o.forEach((E,B)=>{if(l.set(B,E.value),this._triggers.has(B)){const Q=this.trigger(e,B,ru,i);Q&&c.push(Q)}}),c.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&Hs(c).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const l=o.name;if(i.has(l))return;i.add(l);const E=this._triggers.get(l).fallbackTransition,B=r.get(l)||vm,Q=new mm(ru),fe=new Em(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:E,fromState:B,toState:Q,player:fe,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if((!!e.childElementCount||!(!e.shadowRoot||!e.shadowRoot.childElementCount))&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let l=!1;if(r.totalAnimations){const c=r.players.length?r.playersByQueriedElement.get(e):[];if(c&&c.length)l=!0;else{let E=e;for(;E=E.parentNode;)if(r.statesByElement.get(E)){l=!0;break}}}if(this.prepareLeaveAnimationListeners(e),l)r.markElementAsRemoved(this.id,e,!1,t);else{const c=e[Di];(!c||c===bS)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ci(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,l=this._elementListeners.get(o);l&&l.forEach(c=>{if(c.name==r.triggerName){const E=Jp(o,r.triggerName,r.fromState.value,r.toState.value);E._data=e,qp(r.player,c.phase,E,c.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==o||0==l?o-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class jH{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new kH(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,c=this.driver.getParentElement(t);for(;c;){const E=i.get(c);if(E){const B=r.indexOf(E);r.splice(B+1,0,e),l=!0;break}c=this.driver.getParentElement(c)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(Of(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Of(t))return;const o=t[Di];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ci(e,pm)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),wo(e,pm))}removeNode(e,t,r,i){if(Of(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Di]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Of(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,eu,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,im,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Hs(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Di];if(t&&t.setForRemoval){if(e[Di]=bS,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(pm)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ci(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Hs(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function jj(n){return new Mt(3402,!1)}()}_flushAnimations(e,t){const r=new If,i=[],o=new Map,l=[],c=new Map,E=new Map,B=new Map,Q=new Set;this.disabledNodes.forEach(qt=>{Q.add(qt);const ln=this.driver.query(qt,".ng-animate-queued",!0);for(let dn=0;dn<ln.length;dn++)Q.add(ln[dn])});const fe=this.bodyNode,Ae=Array.from(this.statesByElement.keys()),be=LS(Ae,this.collectedEnterElements),je=new Map;let Xe=0;be.forEach((qt,ln)=>{const dn=rm+Xe++;je.set(ln,dn),qt.forEach(xn=>Ci(xn,dn))});const gt=[],dt=new Set,Ft=new Set;for(let qt=0;qt<this.collectedLeaveElements.length;qt++){const ln=this.collectedLeaveElements[qt],dn=ln[Di];dn&&dn.setForRemoval&&(gt.push(ln),dt.add(ln),dn.hasAnimation?this.driver.query(ln,".ng-star-inserted",!0).forEach(xn=>dt.add(xn)):Ft.add(ln))}const pt=new Map,Kt=LS(Ae,Array.from(dt));Kt.forEach((qt,ln)=>{const dn=vf+Xe++;pt.set(ln,dn),qt.forEach(xn=>Ci(xn,dn))}),e.push(()=>{be.forEach((qt,ln)=>{const dn=je.get(ln);qt.forEach(xn=>wo(xn,dn))}),Kt.forEach((qt,ln)=>{const dn=pt.get(ln);qt.forEach(xn=>wo(xn,dn))}),gt.forEach(qt=>{this.processLeaveNode(qt)})});const mn=[],On=[];for(let qt=this._namespaceList.length-1;qt>=0;qt--)this._namespaceList[qt].drainQueuedTransitions(t).forEach(dn=>{const xn=dn.player,Dr=dn.element;if(mn.push(xn),this.collectedEnterElements.length){const Lr=Dr[Di];if(Lr&&Lr.setForMove){if(Lr.previousTriggersValues&&Lr.previousTriggersValues.has(dn.triggerName)){const Aa=Lr.previousTriggersValues.get(dn.triggerName),Mi=this.statesByElement.get(dn.element);if(Mi&&Mi.has(dn.triggerName)){const Lf=Mi.get(dn.triggerName);Lf.value=Aa,Mi.set(dn.triggerName,Lf)}}return void xn.destroy()}}const rs=!fe||!this.driver.containsElement(fe,Dr),ci=pt.get(Dr),Ws=je.get(Dr),Jn=this._buildInstruction(dn,r,Ws,ci,rs);if(Jn.errors&&Jn.errors.length)return void On.push(Jn);if(rs)return xn.onStart(()=>Ma(Dr,Jn.fromStyles)),xn.onDestroy(()=>ns(Dr,Jn.toStyles)),void i.push(xn);if(dn.isFallbackTransition)return xn.onStart(()=>Ma(Dr,Jn.fromStyles)),xn.onDestroy(()=>ns(Dr,Jn.toStyles)),void i.push(xn);const KS=[];Jn.timelines.forEach(Lr=>{Lr.stretchStartingKeyframe=!0,this.disabledNodes.has(Lr.element)||KS.push(Lr)}),Jn.timelines=KS,r.append(Dr,Jn.timelines),l.push({instruction:Jn,player:xn,element:Dr}),Jn.queriedElements.forEach(Lr=>si(c,Lr,[]).push(xn)),Jn.preStyleProps.forEach((Lr,Aa)=>{if(Lr.size){let Mi=E.get(Aa);Mi||E.set(Aa,Mi=new Set),Lr.forEach((Lf,ym)=>Mi.add(ym))}}),Jn.postStyleProps.forEach((Lr,Aa)=>{let Mi=B.get(Aa);Mi||B.set(Aa,Mi=new Set),Lr.forEach((Lf,ym)=>Mi.add(ym))})});if(On.length){const qt=[];On.forEach(ln=>{qt.push(function Hj(n,e){return new Mt(3505,!1)}())}),mn.forEach(ln=>ln.destroy()),this.reportError(qt)}const Zn=new Map,oi=new Map;l.forEach(qt=>{const ln=qt.element;r.has(ln)&&(oi.set(ln,ln),this._beforeAnimationBuild(qt.player.namespaceId,qt.instruction,Zn))}),i.forEach(qt=>{const ln=qt.element;this._getPreviousPlayers(ln,!1,qt.namespaceId,qt.triggerName,null).forEach(xn=>{si(Zn,ln,[]).push(xn),xn.destroy()})});const li=gt.filter(qt=>xS(qt,E,B)),ui=new Map;NS(ui,this.driver,Ft,B,Ts).forEach(qt=>{xS(qt,E,B)&&li.push(qt)});const Ds=new Map;be.forEach((qt,ln)=>{NS(Ds,this.driver,new Set(qt),E,"!")}),li.forEach(qt=>{const ln=ui.get(qt),dn=Ds.get(qt);ui.set(qt,new Map([...Array.from(ln?.entries()??[]),...Array.from(dn?.entries()??[])]))});const Hi=[],Lo=[],Fo={};l.forEach(qt=>{const{element:ln,player:dn,instruction:xn}=qt;if(r.has(ln)){if(Q.has(ln))return dn.onDestroy(()=>ns(ln,xn.toStyles)),dn.disabled=!0,dn.overrideTotalTime(xn.totalTime),void i.push(dn);let Dr=Fo;if(oi.size>1){let ci=ln;const Ws=[];for(;ci=ci.parentNode;){const Jn=oi.get(ci);if(Jn){Dr=Jn;break}Ws.push(ci)}Ws.forEach(Jn=>oi.set(Jn,Dr))}const rs=this._buildAnimation(dn.namespaceId,xn,Zn,o,Ds,ui);if(dn.setRealPlayer(rs),Dr===Fo)Hi.push(dn);else{const ci=this.playersByElement.get(Dr);ci&&ci.length&&(dn.parentPlayer=Hs(ci)),i.push(dn)}}else Ma(ln,xn.fromStyles),dn.onDestroy(()=>ns(ln,xn.toStyles)),Lo.push(dn),Q.has(ln)&&i.push(dn)}),Lo.forEach(qt=>{const ln=o.get(qt.element);if(ln&&ln.length){const dn=Hs(ln);qt.setRealPlayer(dn)}}),i.forEach(qt=>{qt.parentPlayer?qt.syncPlayerEvents(qt.parentPlayer):qt.destroy()});for(let qt=0;qt<gt.length;qt++){const ln=gt[qt],dn=ln[Di];if(wo(ln,vf),dn&&dn.hasAnimation)continue;let xn=[];if(c.size){let rs=c.get(ln);rs&&rs.length&&xn.push(...rs);let ci=this.driver.query(ln,im,!0);for(let Ws=0;Ws<ci.length;Ws++){let Jn=c.get(ci[Ws]);Jn&&Jn.length&&xn.push(...Jn)}}const Dr=xn.filter(rs=>!rs.destroyed);Dr.length?WH(this,ln,Dr):this.processLeaveNode(ln)}return gt.length=0,Hi.forEach(qt=>{this.players.push(qt),qt.onDone(()=>{qt.destroy();const ln=this.players.indexOf(qt);this.players.splice(ln,1)}),qt.play()}),Hi}elementContainsData(e,t){let r=!1;const i=t[Di];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let l=[];if(t){const c=this.playersByQueriedElement.get(e);c&&(l=c)}else{const c=this.playersByElement.get(e);if(c){const E=!o||o==ru;c.forEach(B=>{B.queued||!E&&B.triggerName!=i||l.push(B)})}}return(r||i)&&(l=l.filter(c=>!(r&&r!=c.namespaceId||i&&i!=c.triggerName))),l}_beforeAnimationBuild(e,t,r){const o=t.element,l=t.isRemovalTransition?void 0:e,c=t.isRemovalTransition?void 0:t.triggerName;for(const E of t.timelines){const B=E.element,Q=B!==o,fe=si(r,B,[]);this._getPreviousPlayers(B,Q,l,c,t.toState).forEach(be=>{const je=be.getRealPlayer();je.beforeDestroy&&je.beforeDestroy(),be.destroy(),fe.push(be)})}Ma(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,l){const c=t.triggerName,E=t.element,B=[],Q=new Set,fe=new Set,Ae=t.timelines.map(je=>{const Xe=je.element;Q.add(Xe);const gt=Xe[Di];if(gt&&gt.removedBeforeQueried)return new Jl(je.duration,je.delay);const dt=Xe!==E,Ft=function GH(n){const e=[];return FS(n,e),e}((r.get(Xe)||BH).map(Zn=>Zn.getRealPlayer())).filter(Zn=>!!Zn.element&&Zn.element===Xe),pt=o.get(Xe),Kt=l.get(Xe),mn=oS(0,this._normalizer,0,je.keyframes,pt,Kt),On=this._buildPlayer(je,mn,Ft);if(je.subTimeline&&i&&fe.add(Xe),dt){const Zn=new Em(e,c,Xe);Zn.setRealPlayer(On),B.push(Zn)}return On});B.forEach(je=>{si(this.playersByQueriedElement,je.element,[]).push(je),je.onDone(()=>function HH(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,je.element,je))}),Q.forEach(je=>Ci(je,mS));const be=Hs(Ae);return be.onDestroy(()=>{Q.forEach(je=>wo(je,mS)),ns(E,t.toStyles)}),fe.forEach(je=>{si(i,je,[]).push(be)}),be}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Jl(e.duration,e.delay)}}class Em{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Jl,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>qp(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){si(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Of(n){return n&&1===n.nodeType}function wS(n,e){const t=n.style.display;return n.style.display=e??"none",t}function NS(n,e,t,r,i){const o=[];t.forEach(E=>o.push(wS(E)));const l=[];r.forEach((E,B)=>{const Q=new Map;E.forEach(fe=>{const Ae=e.computeStyle(B,fe,i);Q.set(fe,Ae),(!Ae||0==Ae.length)&&(B[Di]=UH,l.push(B))}),n.set(B,Q)});let c=0;return t.forEach(E=>wS(E,o[c++])),l}function LS(n,e){const t=new Map;if(n.forEach(c=>t.set(c,[])),0==e.length)return t;const i=new Set(e),o=new Map;function l(c){if(!c)return 1;let E=o.get(c);if(E)return E;const B=c.parentNode;return E=t.has(B)?B:i.has(B)?1:l(B),o.set(c,E),E}return e.forEach(c=>{const E=l(c);1!==E&&t.get(E).push(c)}),t}function Ci(n,e){n.classList?.add(e)}function wo(n,e){n.classList?.remove(e)}function WH(n,e,t){Hs(t).onDone(()=>n.processLeaveNode(e))}function FS(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof zM?FS(r.players,e):e.push(r)}}function xS(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class bf{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new jH(e,t,r),this._timelineEngine=new wH(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const l=e+"-"+i;let c=this._triggerCache[l];if(!c){const E=[],Q=lm(this._driver,o,E,[]);if(E.length)throw function Oj(n,e){return new Mt(3404,!1)}();c=function RH(n,e,t){return new PH(n,e,t)}(i,Q,this._normalizer),this._triggerCache[l]=c}this._transitionEngine.registerTrigger(t,i,c)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,l]=lS(r);this._timelineEngine.command(o,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[l,c]=lS(r);return this._timelineEngine.listen(l,t,c,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let $H=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&ns(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ns(this._element,this._initialStyles),this._endStyles&&(ns(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Ma(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ma(this._element,this._endStyles),this._endStyles=null),ns(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function _m(n){let e=null;return n.forEach((t,r)=>{(function QH(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class BS{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:DS(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class XH{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return dS(e,t)}getParentElement(e){return tm(e)}query(e,t,r){return hS(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,l=[]){const E={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(E.easing=o);const B=new Map,Q=l.filter(be=>be instanceof BS);(function eH(n,e){return 0===n||0===e})(r,i)&&Q.forEach(be=>{be.currentSnapshot.forEach((je,Xe)=>B.set(Xe,je))});let fe=function Xj(n){return n.length?n[0]instanceof Map?n:n.map(e=>vS(e)):[]}(t).map(be=>Ks(be));fe=function tH(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,l)=>{r.has(l)||i.push(l),r.set(l,o)}),i.length)for(let o=1;o<e.length;o++){let l=e[o];i.forEach(c=>l.set(c,DS(n,c)))}}return e}(e,fe,B);const Ae=function zH(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=_m(e[0]),e.length>1&&(r=_m(e[e.length-1]))):e instanceof Map&&(t=_m(e)),t||r?new $H(n,t,r):null}(e,fe);return new BS(e,fe,E,Ae)}}let qH=(()=>{class n extends WM{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:Qr.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?GM(t):t;return US(this._renderer,null,r,"register",[i]),new ZH(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Ct(ml),Ct(Rn))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();class ZH extends class dk{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new JH(this._id,e,t||{},this._renderer)}}class JH{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return US(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function US(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const kS="@.disabled";let eV=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,l)=>{const c=l?.parentNode(o);c&&l.removeChild(c,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let Q=this._rendererCache.get(o);return Q||(Q=new jS("",o,this.engine),this._rendererCache.set(o,Q)),Q}const l=r.id,c=r.id+"-"+this._currentId;this._currentId++,this.engine.register(c,t);const E=Q=>{Array.isArray(Q)?Q.forEach(E):this.engine.registerTrigger(l,c,t,Q.name,Q)};return r.data.animation.forEach(E),new tV(this,c,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[l,c]=o;l(c)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Ct(ml),Ct(bf),Ct(Bn))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})();class jS{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==kS?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class tV extends jS{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==kS?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function nV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),l="";return"@"!=o.charAt(0)&&([o,l]=function rV(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,l,c=>{this.factory.scheduleListenerCallback(c._data||-1,r,c)})}return this.delegate.listen(e,t,r)}}const HS=[{provide:WM,useClass:qH},{provide:hm,useFactory:function sV(){return new MH}},{provide:bf,useClass:(()=>{class n extends bf{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Ct(Rn),Ct(nm),Ct(hm),Ct(Cl))},n.\u0275prov=xt({token:n,factory:n.\u0275fac}),n})()},{provide:ml,useFactory:function aV(n,e,t){return new eV(n,e,t)},deps:[bc,bf,Bn]}],VS=[{provide:nm,useFactory:()=>new XH},{provide:Dl,useValue:"BrowserAnimations"},...HS],oV=[{provide:nm,useClass:gS},{provide:Dl,useValue:"NoopAnimations"},...HS];let lV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?oV:VS}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n}),n.\u0275inj=pn({providers:VS,imports:[xD]}),n})();var Nf=k(386);class uV extends HD{buildHammer(e){return new Nf.Manager(e,{inputClass:Nf.TouchInput,touchAction:"auto",recognizers:[[Nf.Swipe,{direction:Nf.DIRECTION_HORIZONTAL}]]})}}let cV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Yn({type:n,bootstrap:[qk]}),n.\u0275inj=pn({providers:[{provide:wc,useClass:uV}],imports:[xD,$B,lU,lj,lV,P1,K1,Tk,yF,Yk]}),n})();(function Yw(){HT=!1})(),lF().bootstrapModule(cV).catch(n=>console.error(n))},377:Cs=>{window,Cs.exports=function(Oe){var k={};function u(x){if(k[x])return k[x].exports;var y=k[x]={i:x,l:!1,exports:{}};return Oe[x].call(y.exports,y,y.exports,u),y.l=!0,y.exports}return u.m=Oe,u.c=k,u.d=function(x,y,M){u.o(x,y)||Object.defineProperty(x,y,{enumerable:!0,get:M})},u.r=function(x){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},u.t=function(x,y){if(1&y&&(x=u(x)),8&y||4&y&&"object"==typeof x&&x&&x.__esModule)return x;var M=Object.create(null);if(u.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:x}),2&y&&"string"!=typeof x)for(var T in x)u.d(M,T,function(D){return x[D]}.bind(null,T));return M},u.n=function(x){var y=x&&x.__esModule?function(){return x.default}:function(){return x};return u.d(y,"a",y),y},u.o=function(x,y){return Object.prototype.hasOwnProperty.call(x,y)},u.p="/dist/",u(u.s="./index.js")}({"./externals/base64.js":function(Oe,k,u){var M,T,D,d,v,x_encode=function(M){for(var T=[],D=0;D<M.length;++D){var d=M.charCodeAt(D);d<128?T.push(d):d<2048?(T.push(192|d>>6),T.push(128|63&d)):d<65536?(T.push(224|d>>12),T.push(128|63&d>>6),T.push(128|63&d)):(T.push(240|d>>18),T.push(128|63&d>>12),T.push(128|63&d>>6),T.push(128|63&d))}return T},x_decode=function(M){for(var T=[],D=0;D<M.length;){var d=M[D++];d<128||(d<224?(d=(31&d)<<6,d|=63&M[D++]):d<240?(d=(15&d)<<12,d|=(63&M[D++])<<6,d|=63&M[D++]):(d=(7&d)<<18,d|=(63&M[D++])<<12,d|=(63&M[D++])<<6,d|=63&M[D++])),T.push(String.fromCharCode(d))}return T.join("")},y={};M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=function(N){for(var O=0,L=[],m=0|N.length/3;0<m--;){var h=(N[O]<<16)+(N[O+1]<<8)+N[O+2];O+=3,L.push(M.charAt(63&h>>18)),L.push(M.charAt(63&h>>12)),L.push(M.charAt(63&h>>6)),L.push(M.charAt(63&h))}return N.length-O==2?(L.push(M.charAt(63&(h=(N[O]<<16)+(N[O+1]<<8))>>18)),L.push(M.charAt(63&h>>12)),L.push(M.charAt(63&h>>6)),L.push("=")):N.length-O==1&&(L.push(M.charAt(63&(h=N[O]<<16)>>18)),L.push(M.charAt(63&h>>12)),L.push("==")),L.join("")},D=function(){for(var p=[],N=0;N<M.length;++N)p[M.charCodeAt(N)]=N;return p["=".charCodeAt(0)]=0,p}(),d=function(N){for(var O=0,L=[],m=0|N.length/4;0<m--;){var h=(D[N.charCodeAt(O)]<<18)+(D[N.charCodeAt(O+1)]<<12)+(D[N.charCodeAt(O+2)]<<6)+D[N.charCodeAt(O+3)];L.push(255&h>>16),L.push(255&h>>8),L.push(255&h),O+=4}return L&&("="==N.charAt(O-2)?(L.pop(),L.pop()):"="==N.charAt(O-1)&&L.pop()),L},v={encode:function(p){for(var N=[],O=0;O<p.length;++O)N.push(p.charCodeAt(O));return N},decode:function(p){for(var N=0;N<s.length;++N)a[N]=String.fromCharCode(a[N]);return a.join("")}},y.decodeArray=function(p){var N=d(p);return new Uint8Array(N)},y.encodeASCII=function(p){var N=v.encode(p);return T(N)},y.decodeASCII=function(p){var N=d(p);return v.decode(N)},y.encode=function(p){var N=x_encode(p);return T(N)},y.decode=function(p){var N=d(p);return x_decode(N)},k.decode=y.decode,k.decodeArray=y.decodeArray,k.encode=y.encode,k.encodeASCII=y.encodeASCII},"./externals/cea608-parser.js":function(Oe,k,u){!function(x){"use strict";var y={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},M=function(f){var I=f;return y.hasOwnProperty(f)&&(I=y[f]),String.fromCharCode(I)},T=15,D=32,d={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},v={17:2,18:4,21:6,22:8,23:10,19:13,20:15},p={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},N={25:2,26:4,29:6,30:8,31:10,27:13,28:15},O=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],L={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(f){this.time=f},log:function(f,I){this.verboseLevel>=this.verboseFilter[f]&&console.log(this.time+" ["+f+"] "+I)}},m=function(f){for(var I=[],H=0;H<f.length;H++)I.push(f[H].toString(16));return I},h=function(f,I,H,$,z){this.foreground=f||"white",this.underline=I||!1,this.italics=H||!1,this.background=$||"black",this.flash=z||!1};h.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(f){for(var I=["foreground","underline","italics","background","flash"],H=0;H<I.length;H++){var $=I[H];f.hasOwnProperty($)&&(this[$]=f[$])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(f){return this.foreground===f.foreground&&this.underline===f.underline&&this.italics===f.italics&&this.background===f.background&&this.flash===f.flash},copy:function(f){this.foreground=f.foreground,this.underline=f.underline,this.italics=f.italics,this.background=f.background,this.flash=f.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var g=function(f,I,H,$,z,q){this.uchar=f||" ",this.penState=new h(I,H,$,z,q)};g.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(f,I){this.uchar=f,this.penState.copy(I)},setPenState:function(f){this.penState.copy(f)},equals:function(f){return this.uchar===f.uchar&&this.penState.equals(f.penState)},copy:function(f){this.uchar=f.uchar,this.penState.copy(f.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var S=function(){this.chars=[];for(var f=0;f<D;f++)this.chars.push(new g);this.pos=0,this.currPenState=new h};S.prototype={equals:function(f){for(var I=!0,H=0;H<D;H++)if(!this.chars[H].equals(f.chars[H])){I=!1;break}return I},copy:function(f){for(var I=0;I<D;I++)this.chars[I].copy(f.chars[I])},isEmpty:function(){for(var f=!0,I=0;I<D;I++)if(!this.chars[I].isEmpty()){f=!1;break}return f},setCursor:function(f){this.pos!==f&&(this.pos=f),this.pos<0?(L.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>D&&(L.log("ERROR","Too large cursor position "+this.pos),this.pos=D)},moveCursor:function(f){var I=this.pos+f;if(f>1)for(var H=this.pos+1;H<I+1;H++)this.chars[H].setPenState(this.currPenState);this.setCursor(I)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(f){f>=144&&this.backSpace();var I=M(f);this.pos>=D?L.log("ERROR","Cannot insert "+f.toString(16)+" ("+I+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(I,this.currPenState),this.moveCursor(1))},clearFromPos:function(f){var I;for(I=f;I<D;I++)this.chars[I].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var f=[],I=!0,H=0;H<D;H++){var $=this.chars[H].uchar;" "!==$&&(I=!1),f.push($)}return I?"":f.join("")},setPenStyles:function(f){this.currPenState.setStyles(f),this.chars[this.pos].setPenState(this.currPenState)}};var C=function(){this.rows=[];for(var f=0;f<T;f++)this.rows.push(new S);this.currRow=14,this.nrRollUpRows=null,this.reset()};C.prototype={reset:function(){for(var f=0;f<T;f++)this.rows[f].clear();this.currRow=14},equals:function(f){for(var I=!0,H=0;H<T;H++)if(!this.rows[H].equals(f.rows[H])){I=!1;break}return I},copy:function(f){for(var I=0;I<T;I++)this.rows[I].copy(f.rows[I])},isEmpty:function(){for(var f=!0,I=0;I<T;I++)if(!this.rows[I].isEmpty()){f=!1;break}return f},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(f){this.rows[this.currRow].insertChar(f)},setPen:function(f){this.rows[this.currRow].setPenStyles(f)},moveCursor:function(f){this.rows[this.currRow].moveCursor(f)},setCursor:function(f){L.log("INFO","setCursor: "+f),this.rows[this.currRow].setCursor(f)},setPAC:function(f){L.log("INFO","pacData = "+JSON.stringify(f));var I=f.row-1;this.nrRollUpRows&&I<this.nrRollUpRows-1&&(I=this.nrRollUpRows-1),this.currRow=I;var H=this.rows[this.currRow];if(null!==f.indent){var z=Math.max(f.indent-1,0);H.setCursor(f.indent),f.color=H.chars[z].penState.foreground}this.setPen({foreground:f.color,underline:f.underline,italics:f.italics,background:"black",flash:!1})},setBkgData:function(f){L.log("INFO","bkgData = "+JSON.stringify(f)),this.backSpace(),this.setPen(f),this.insertChar(32)},setRollUpRows:function(f){this.nrRollUpRows=f},rollUp:function(){if(null!==this.nrRollUpRows){L.log("TEXT",this.getDisplayText());var I=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];I.clear(),this.rows.splice(this.currRow,0,I),L.log("INFO","Rolling up")}else L.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(f){f=f||!1;for(var I=[],H="",z=0;z<T;z++){var q=this.rows[z].getTextString();q&&I.push(f?"Row "+(z+1)+': "'+q+'"':q.trim())}return I.length>0&&(H=f?"["+I.join(" | ")+"]":I.join("\n")),H},getTextAndFormat:function(){return this.rows}};var F=function(f,I){this.chNr=f,this.outputFilter=I,this.mode=null,this.verbose=0,this.displayedMemory=new C,this.nonDisplayedMemory=new C,this.lastOutputScreen=new C,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};F.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(f){this.outputFilter=f},setPAC:function(f){this.writeScreen.setPAC(f)},setBkgData:function(f){this.writeScreen.setBkgData(f)},setMode:function(f){f!==this.mode&&(this.mode=f,L.log("INFO","MODE="+f),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=f)},insertChars:function(f){for(var I=0;I<f.length;I++)this.writeScreen.insertChar(f[I]);L.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(L.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){L.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){L.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){L.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(f){L.log("INFO","RU("+f+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(f)},cc_FON:function(){L.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){L.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){L.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){L.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){L.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){L.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){L.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(L.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var f=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=f,this.writeScreen=this.nonDisplayedMemory,L.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(f){L.log("INFO","TO("+f+") - Tab Offset"),this.writeScreen.moveCursor(f)},cc_MIDROW:function(f){var I={flash:!1};if(I.underline=f%2==1,I.italics=f>=46,I.italics)I.foreground="white";else{var H=Math.floor(f/2)-16;I.foreground=["white","green","blue","cyan","red","yellow","magenta"][H]}L.log("INFO","MIDROW: "+JSON.stringify(I)),this.writeScreen.setPen(I)},outputDataUpdate:function(){var f=L.time;null!==f&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(f,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,f,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:f):this.cueStartTime=f,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(f){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,f,this.displayedMemory),this.cueStartTime=f))}};var R=function(f,I,H){this.field=f||1,this.outputs=[I,H],this.channels=[new F(1,I),new F(2,H)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};R.prototype={getHandler:function(f){return this.channels[f].getHandler()},setHandler:function(f,I){this.channels[f].setHandler(I)},addData:function(f,I){var H,$,z,q=!1;this.lastTime=f,L.setTime(f);for(var J=0;J<I.length;J+=2)z=127&I[J+1],($=127&I[J])>=16&&$<=31&&$===this.lastCmdA&&z===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,L.log("DEBUG","Repeated command ("+m([$,z])+") is dropped")):0!==$||0!==z?(L.log("DATA","["+m([I[J],I[J+1]])+"] -> ("+m([$,z])+")"),(H=this.parseCmd($,z))||(H=this.parseMidrow($,z)),H||(H=this.parsePAC($,z)),H||(H=this.parseBackgroundAttributes($,z)),!H&&(q=this.parseChars($,z))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(q):L.log("WARNING","No channel found yet. TEXT-MODE?")),H?this.dataCounters.cmd+=2:q?this.dataCounters.char+=2:(this.dataCounters.other+=2,L.log("WARNING","Couldn't parse cleaned data "+m([$,z])+" orig: "+m([I[J],I[J+1]])))):this.dataCounters.padding+=2},parseCmd:function(f,I){var H;if(!((20===f||21===f||28===f||29===f)&&32<=I&&I<=47||(23===f||31===f)&&33<=I&&I<=35))return!1;var q=this.channels[(H=20===f||21===f||23===f?1:2)-1];return 20===f||21===f||28===f||29===f?32===I?q.cc_RCL():33===I?q.cc_BS():34===I?q.cc_AOF():35===I?q.cc_AON():36===I?q.cc_DER():37===I?q.cc_RU(2):38===I?q.cc_RU(3):39===I?q.cc_RU(4):40===I?q.cc_FON():41===I?q.cc_RDC():42===I?q.cc_TR():43===I?q.cc_RTD():44===I?q.cc_EDM():45===I?q.cc_CR():46===I?q.cc_ENM():47===I&&q.cc_EOC():q.cc_TO(I-32),this.lastCmdA=f,this.lastCmdB=I,this.currChNr=H,!0},parseMidrow:function(f,I){var H=null;if((17===f||25===f)&&32<=I&&I<=47){if((H=17===f?1:2)!==this.currChNr)return L.log("ERROR","Mismatch channel in midrow parsing"),!1;var $=this.channels[H-1];return $.insertChars([32]),$.cc_MIDROW(I),L.log("DEBUG","MIDROW ("+m([f,I])+")"),this.lastCmdA=f,this.lastCmdB=I,!0}return!1},parsePAC:function(f,I){var H;if(!((17<=f&&f<=23||25<=f&&f<=31)&&64<=I&&I<=127||(16===f||24===f)&&64<=I&&I<=95))return!1;H=f<=23?1:2;var J=this.interpretPAC(64<=I&&I<=95?1===H?d[f]:p[f]:1===H?v[f]:N[f],I);return this.channels[H-1].setPAC(J),this.lastCmdA=f,this.lastCmdB=I,this.currChNr=H,!0},interpretPAC:function(f,I){var H,$={color:null,italics:!1,indent:null,underline:!1,row:f};return $.underline=1==(1&(H=I>95?I-96:I-64)),H<=13?$.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(H/2)]:H<=15?($.italics=!0,$.color="white"):$.indent=4*Math.floor((H-16)/2),$},parseChars:function(f,I){var H=null,$=null,z=null;if(f>=25?(H=2,z=f-8):(H=1,z=f),17<=z&&z<=19){var J;L.log("INFO","Special char '"+M(J=17===z?I+80:18===z?I+112:I+144)+"' in channel "+H),$=[J],this.lastCmdA=f,this.lastCmdB=I}else 32<=f&&f<=127&&($=0===I?[f]:[f,I],this.lastCmdA=null,this.lastCmdB=null);if($){var X=m($);L.log("DEBUG","Char codes =  "+X.join(","))}return $},parseBackgroundAttributes:function(f,I){var H,$;return!!((16===f||24===f)&&32<=I&&I<=47||(23===f||31===f)&&45<=I&&I<=47)&&(H={},16===f||24===f?($=Math.floor((I-32)/2),H.background=O[$],I%2==1&&(H.background=H.background+"_semi")):45===I?H.background="transparent":(H.foreground="black",47===I&&(H.underline=!0)),this.channels[(f<24?1:2)-1].setBkgData(H),this.lastCmdA=f,this.lastCmdB=I,!0)},reset:function(){for(var f=0;f<this.channels.length;f++)this.channels[f]&&this.channels[f].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(f){for(var I=0;I<this.channels.length;I++)this.channels[I]&&this.channels[I].cueSplitAtTime(f)}};x.logger=L,x.PenState=h,x.CaptionScreen=C,x.Cea608Parser=R,x.findCea608Nalus=function(f,I,H){for(var $=0,z=I,J=[],X=function(ve,re,ge,ie){if(4!==ve||re<8)return null;var de=ge.getUint8(ie),ue=ge.getUint16(ie+1),le=ge.getUint32(ie+3),ce=ge.getUint8(ie+7);return 181==de&&49==ue&&1195456820==le&&3==ce};z<I+H;){if($=f.getUint32(z),6==(31&f.getUint8(z+4)))for(var V=z+5,se=-1;V<z+4+$-1;){se=0;for(var Z=255;255===Z;)se+=Z=f.getUint8(V),V++;var oe=0;for(Z=255;255===Z;)oe+=Z=f.getUint8(V),V++;X(se,oe,f,V)&&J.push([V,oe]),V+=oe}z+=$+4}return J},x.extractCea608DataFromRange=function(f,I){var H=I[0],$=[[],[]],z=31&f.getUint8(H+=8);H+=2;for(var q=0;q<z;q++){var J=f.getUint8(H),X=4&J,V=3&J;H++;var se=f.getUint8(H);H++;var Z=f.getUint8(H);H++,X&&(127&se)+(127&Z)!=0&&(0===V?($[0].push(se),$[0].push(Z)):1===V&&($[1].push(se),$[1].push(Z)))}return $}}(k)},"./externals/xml2json.js":function(Oe,k,u){"use strict";u.r(k),k.default=function x(y){y=y||{},function T(){void 0===y.escapeMode&&(y.escapeMode=!0),void 0===y.attributePrefix&&(y.attributePrefix="_"),y.arrayAccessForm=y.arrayAccessForm||"none",y.emptyNodeForm=y.emptyNodeForm||"text",void 0===y.enableToStringFunc&&(y.enableToStringFunc=!0),y.arrayAccessFormPaths=y.arrayAccessFormPaths||[],void 0===y.skipEmptyTextNodesForObj&&(y.skipEmptyTextNodesForObj=!0),void 0===y.stripWhitespaces&&(y.stripWhitespaces=!0),y.datetimeAccessFormPaths=y.datetimeAccessFormPaths||[],void 0===y.useDoubleQuotes&&(y.useDoubleQuotes=!1),y.xmlElementsFilter=y.xmlElementsFilter||[],y.jsonPropertiesFilter=y.jsonPropertiesFilter||[],void 0===y.keepCData&&(y.keepCData=!1),void 0===y.ignoreRoot&&(y.ignoreRoot=!1)}();var D_ELEMENT_NODE=1,D_TEXT_NODE=3,D_CDATA_SECTION_NODE=4,D_COMMENT_NODE=8,D_DOCUMENT_NODE=9;function v(X){var V=X.localName;return null==V&&(V=X.baseName),(null==V||""==V)&&(V=X.nodeName),V}function N(X){return"string"==typeof X?X.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):X}function L(X,V,se,Z){for(var oe=0;oe<X.length;oe++){var he=X[oe];if("string"==typeof he){if(he==Z)break}else if(he instanceof RegExp){if(he.test(Z))break}else if("function"==typeof he&&he(V,se,Z))break}return oe!=X.length}function m(X,V,se){"property"===y.arrayAccessForm&&(X[V+"_asArray"]=X[V]instanceof Array?X[V]:[X[V]]),!(X[V]instanceof Array)&&y.arrayAccessFormPaths.length>0&&L(y.arrayAccessFormPaths,X,V,se)&&(X[V]=[X[V]])}function h(X){var V=X.split(/[-T:+Z]/g),se=new Date(V[0],V[1]-1,V[2]),Z=V[5].split(".");if(se.setHours(V[3],V[4],Z[0]),Z.length>1&&se.setMilliseconds(Z[1]),V[6]&&V[7]){var oe=60*V[6]+Number(V[7]);oe=0+("-"==(/\d\d-\d\d:\d\d$/.test(X)?"-":"+")?-1*oe:oe),se.setMinutes(se.getMinutes()-oe-se.getTimezoneOffset())}else-1!==X.indexOf("Z",X.length-1)&&(se=new Date(Date.UTC(se.getFullYear(),se.getMonth(),se.getDate(),se.getHours(),se.getMinutes(),se.getSeconds(),se.getMilliseconds())));return se}function S(X,V,se,Z){return!(V==D_ELEMENT_NODE&&y.xmlElementsFilter.length>0)||L(y.xmlElementsFilter,X,se,Z)}function C(X,V){if(X.nodeType==D_DOCUMENT_NODE){for(var se=new Object,Z=X.childNodes,oe=0;oe<Z.length;oe++)(he=Z[oe]).nodeType==D_ELEMENT_NODE&&(y.ignoreRoot?se=C(he):(se={})[ve=v(he)]=C(he));return se}if(X.nodeType==D_ELEMENT_NODE){(se=new Object).__cnt=0;var re=[];for(Z=X.childNodes,oe=0;oe<Z.length;oe++){var he,ve=v(he=Z[oe]);if(he.nodeType!=D_COMMENT_NODE){var ge=V+"."+ve;if(S(se,he.nodeType,ve,ge))if(se.__cnt++,null==se[ve]){var ie=C(he,ge);("#text"!=ve||/[^\s]/.test(ie))&&((de={})[ve]=ie,re.push(de)),se[ve]=ie,m(se,ve,ge)}else{var de;null!=se[ve]&&(se[ve]instanceof Array||(se[ve]=[se[ve]],m(se,ve,ge))),ie=C(he,ge),("#text"!=ve||/[^\s]/.test(ie))&&((de={})[ve]=ie,re.push(de)),se[ve][se[ve].length]=ie}}}se.__children=re;for(var ue=v(X),le=0;le<X.attributes.length;le++){var ce=X.attributes[le];se.__cnt++;for(var ne=ce.value,pe=0,ee=y.matchers.length;pe<ee;pe++){var G=y.matchers[pe];G.test(ce,ue)&&(ne=G.converter(ce.value))}se[y.attributePrefix+ce.name]=ne}var j=function p(X){return X.prefix}(X);return null!=j&&""!=j&&(se.__cnt++,se.__prefix=j),null!=se["#text"]&&(se.__text=se["#text"],se.__text instanceof Array&&(se.__text=se.__text.join("\n")),y.stripWhitespaces&&(se.__text=se.__text.trim()),delete se["#text"],"property"==y.arrayAccessForm&&delete se["#text_asArray"],se.__text=function g(X,V,se){if(y.datetimeAccessFormPaths.length>0){var Z=se.split(".#")[0];return L(y.datetimeAccessFormPaths,X,V,Z)?h(X):X}return X}(se.__text,ve,V+"."+ve)),null!=se["#cdata-section"]&&(se.__cdata=se["#cdata-section"],delete se["#cdata-section"],"property"==y.arrayAccessForm&&delete se["#cdata-section_asArray"]),0==se.__cnt&&"text"==y.emptyNodeForm?se="":1==se.__cnt&&null!=se.__text?se=se.__text:1!=se.__cnt||null==se.__cdata||y.keepCData?se.__cnt>1&&null!=se.__text&&y.skipEmptyTextNodesForObj&&(y.stripWhitespaces&&""==se.__text||""==se.__text.trim())&&delete se.__text:se=se.__cdata,delete se.__cnt,y.enableToStringFunc&&(null!=se.__text||null!=se.__cdata)&&(se.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),se}if(X.nodeType==D_TEXT_NODE||X.nodeType==D_CDATA_SECTION_NODE)return X.nodeValue}function F(X,V,se,Z){var oe="<"+(null!=X&&null!=X.__prefix?X.__prefix+":":"")+V;if(null!=se)for(var he=0;he<se.length;he++){var ve=se[he],re=X[ve];y.escapeMode&&(re=N(re)),oe+=" "+ve.substr(y.attributePrefix.length)+"=",oe+=y.useDoubleQuotes?'"'+re+'"':"'"+re+"'"}return oe+(Z?"/>":">")}function R(X,V){return"</"+(null!=X.__prefix?X.__prefix+":":"")+V+">"}function b(X,V){return!!("property"==y.arrayAccessForm&&function w(X,V){return-1!==X.indexOf(V,X.length-V.length)}(V.toString(),"_asArray")||0==V.toString().indexOf(y.attributePrefix)||0==V.toString().indexOf("__")||X[V]instanceof Function)}function P(X){var V=0;if(X instanceof Object)for(var se in X)b(X,se)||V++;return V}function f(X,V,se){return 0==y.jsonPropertiesFilter.length||""==se||L(y.jsonPropertiesFilter,X,V,se)}function I(X){var V=[];if(X instanceof Object)for(var se in X)-1==se.toString().indexOf("__")&&0==se.toString().indexOf(y.attributePrefix)&&V.push(se);return V}function $(X){var V="";return X instanceof Object?V+=function H(X){var V="";return null!=X.__cdata&&(V+="<![CDATA["+X.__cdata+"]]>"),null!=X.__text&&(V+=y.escapeMode?N(X.__text):X.__text),V}(X):null!=X&&(V+=y.escapeMode?N(X):X),V}function z(X,V){return""===X?V:X+"."+V}function q(X,V,se,Z){var oe="";if(0==X.length)oe+=F(X,V,se,!0);else for(var he=0;he<X.length;he++)oe+=F(X[he],V,I(X[he]),!1),oe+=J(X[he],z(Z,V)),oe+=R(X[he],V);return oe}function J(X,V){var se="";if(P(X)>0)for(var oe in X)if(!b(X,oe)&&(""==V||f(X,oe,z(V,oe)))){var he=X[oe],ve=I(he);null==he||null==he?se+=F(he,oe,ve,!0):he instanceof Object?he instanceof Array?se+=q(he,oe,ve,V):he instanceof Date?(se+=F(he,oe,ve,!1),se+=he.toISOString(),se+=R(he,oe)):P(he)>0||null!=he.__text||null!=he.__cdata?(se+=F(he,oe,ve,!1),se+=J(he,z(V,oe)),se+=R(he,oe)):se+=F(he,oe,ve,!0):(se+=F(he,oe,ve,!1),se+=$(he),se+=R(he,oe))}return se+$(X)}this.parseXmlString=function(X){var se;if(window.ActiveXObject||window,void 0===X)return null;if(window.DOMParser){var Z=new window.DOMParser;try{(se=Z.parseFromString(X,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(se=null)}catch{se=null}}else 0==X.indexOf("<?")&&(X=X.substr(X.indexOf("?>")+2)),(se=new ActiveXObject("Microsoft.XMLDOM")).async="false",se.loadXML(X);return se},this.asArray=function(X){return void 0===X||null==X?[]:X instanceof Array?X:[X]},this.toXmlDateTime=function(X){return X instanceof Date?X.toISOString():"number"==typeof X?new Date(X).toISOString():null},this.asDateTime=function(X){return"string"==typeof X?h(X):X},this.xml2json=function(X){return C(X)},this.xml_str2json=function(X){var V=this.parseXmlString(X);return null!=V?this.xml2json(V):null},this.json2xml_str=function(X){return J(X,"")},this.json2xml=function(X){var V=this.json2xml_str(X);return this.parseXmlString(V)},this.getVersion=function(){return"1.2.0"}}},"./index.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./index_mediaplayerOnly.js");u.d(k,"MediaPlayer",function(){return x.MediaPlayer});var y=u("./src/streaming/utils/Capabilities.js");u.d(k,"supportsMediaSource",function(){return y.supportsMediaSource});var M=u("./src/streaming/metrics/MetricsReporting.js");u.d(k,"MetricsReporting",function(){return M.default});var T=u("./src/streaming/protection/Protection.js");u.d(k,"Protection",function(){return T.default});var D=u("./src/streaming/MediaPlayerFactory.js");u.d(k,"MediaPlayerFactory",function(){return D.default});var d=u("./src/core/Debug.js");u.d(k,"Debug",function(){return d.default}),dashjs.Protection=T.default,dashjs.MetricsReporting=M.default,dashjs.MediaPlayerFactory=D.default,dashjs.Debug=d.default,dashjs.supportsMediaSource=y.supportsMediaSource,k.default=dashjs},"./index_mediaplayerOnly.js":function(Oe,k,u){"use strict";u.r(k),function(x){var y=u("./src/streaming/MediaPlayer.js");u.d(k,"MediaPlayer",function(){return y.default});var M=u("./src/core/FactoryMaker.js");u.d(k,"FactoryMaker",function(){return M.default});var T=u("./src/core/Debug.js");u.d(k,"Debug",function(){return T.default});var D=u("./src/core/Version.js"),p=(u("./node_modules/es6-promise/auto.js"),typeof window<"u"&&window||x),N=p.dashjs;N||(N=p.dashjs={}),N.MediaPlayer=y.default,N.FactoryMaker=M.default,N.Debug=T.default,N.Version=Object(D.getVersionString)(),k.default=N}.call(this,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(Oe,k,u){"use strict";k.byteLength=function p(g){var S=v(g),F=S[1];return 3*(S[0]+F)/4-F},k.toByteArray=function O(g){for(var S,C=v(g),F=C[0],R=C[1],w=new M(function N(g,S,C){return 3*(S+C)/4-C}(0,F,R)),b=0,P=R>0?F-4:F,f=0;f<P;f+=4)S=y[g.charCodeAt(f)]<<18|y[g.charCodeAt(f+1)]<<12|y[g.charCodeAt(f+2)]<<6|y[g.charCodeAt(f+3)],w[b++]=S>>16&255,w[b++]=S>>8&255,w[b++]=255&S;return 2===R&&(S=y[g.charCodeAt(f)]<<2|y[g.charCodeAt(f+1)]>>4,w[b++]=255&S),1===R&&(S=y[g.charCodeAt(f)]<<10|y[g.charCodeAt(f+1)]<<4|y[g.charCodeAt(f+2)]>>2,w[b++]=S>>8&255,w[b++]=255&S),w},k.fromByteArray=function h(g){for(var S,C=g.length,F=C%3,R=[],w=16383,b=0,P=C-F;b<P;b+=w)R.push(m(g,b,b+w>P?P:b+w));return 1===F?R.push(x[(S=g[C-1])>>2]+x[S<<4&63]+"=="):2===F&&R.push(x[(S=(g[C-2]<<8)+g[C-1])>>10]+x[S>>4&63]+x[S<<2&63]+"="),R.join("")};for(var x=[],y=[],M=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=0,d=T.length;D<d;++D)x[D]=T[D],y[T.charCodeAt(D)]=D;function v(g){var S=g.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=g.indexOf("=");return-1===C&&(C=S),[C,C===S?0:4-C%4]}function L(g){return x[g>>18&63]+x[g>>12&63]+x[g>>6&63]+x[63&g]}function m(g,S,C){for(var R=[],w=S;w<C;w+=3)R.push(L((g[w]<<16&16711680)+(g[w+1]<<8&65280)+(255&g[w+2])));return R.join("")}y["-".charCodeAt(0)]=62,y["_".charCodeAt(0)]=63},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(Oe,k,u){var x={parseBuffer:function(T){return new y(T).parse()},addBoxProcessor:function(T,D){"string"!=typeof T||"function"!=typeof D||(M.prototype._boxProcessors[T]=D)},createFile:function(){return new y},createBox:function(T,D,d){var v=M.create(T);return D&&D.append(v,d),v},createFullBox:function(T,D,d){var v=x.createBox(T,D,d);return v.version=0,v.flags=0,v},Utils:{}};x.Utils.dataViewToString=function(T,D){var d=D||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(d).decode(T);var v=[],p=0;if("utf-8"===d)for(;p<T.byteLength;){var N=T.getUint8(p++);N<128||(N<224?(N=(31&N)<<6,N|=63&T.getUint8(p++)):N<240?(N=(15&N)<<12,N|=(63&T.getUint8(p++))<<6,N|=63&T.getUint8(p++)):(N=(7&N)<<18,N|=(63&T.getUint8(p++))<<12,N|=(63&T.getUint8(p++))<<6,N|=63&T.getUint8(p++))),v.push(String.fromCharCode(N))}else for(;p<T.byteLength;)v.push(String.fromCharCode(T.getUint8(p++)));return v.join("")},x.Utils.utf8ToByteArray=function(T){var D,d;if(typeof TextEncoder<"u")D=(new TextEncoder).encode(T);else for(D=[],d=0;d<T.length;++d){var v=T.charCodeAt(d);v<128?D.push(v):v<2048?(D.push(192|v>>6),D.push(128|63&v)):v<65536?(D.push(224|v>>12),D.push(128|63&v>>6),D.push(128|63&v)):(D.push(240|v>>18),D.push(128|63&v>>12),D.push(128|63&v>>6),D.push(128|63&v))}return D},x.Utils.appendBox=function(T,D,d){if(D._offset=T._cursor.offset,D._root=T._root?T._root:T,D._raw=T._raw,D._parent=T,-1!==d){if(null==d)return void T.boxes.push(D);var p,v=-1;if("number"==typeof d)v=d;else{if("string"==typeof d)p=d;else{if("object"!=typeof d||!d.type)return void T.boxes.push(D);p=d.type}for(var N=0;N<T.boxes.length;N++)if(p===T.boxes[N].type){v=N+1;break}}T.boxes.splice(v,0,D)}},k.parseBuffer=x.parseBuffer,k.addBoxProcessor=x.addBoxProcessor,k.createFile=x.createFile,k.createBox=x.createBox,k.createFullBox=x.createFullBox,k.Utils=x.Utils,x.Cursor=function(T){this.offset=typeof T>"u"?0:T};var y=function(T){this._cursor=new x.Cursor,this.boxes=[],T&&(this._raw=new DataView(T))};y.prototype.fetch=function(T){var D=this.fetchAll(T,!0);return D.length?D[0]:null},y.prototype.fetchAll=function(T,D){var d=[];return y._sweep.call(this,T,d,D),d},y.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var T=M.parse(this);if(typeof T.type>"u")break;this.boxes.push(T)}return this},y._sweep=function(T,D,d){for(var v in this.type&&this.type==T&&D.push(this),this.boxes){if(D.length&&d)return;y._sweep.call(this.boxes[v],T,D,d)}},y.prototype.write=function(){var D,T=0;for(D=0;D<this.boxes.length;D++)T+=this.boxes[D].getLength(!1);var d=new Uint8Array(T);for(this._rawo=new DataView(d.buffer),this.bytes=d,this._cursor.offset=0,D=0;D<this.boxes.length;D++)this.boxes[D].write();return d.buffer},y.prototype.append=function(T,D){x.Utils.appendBox(this,T,D)};var M=function(){this._cursor=new x.Cursor};M.parse=function(T){var D=new M;return D._offset=T._cursor.offset,D._root=T._root?T._root:T,D._raw=T._raw,D._parent=T,D._parseBox(),T._cursor.offset=D._raw.byteOffset+D._raw.byteLength,D},M.create=function(T){var D=new M;return D.type=T,D.boxes=[],D},M.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],M.prototype._boxProcessors={},M.prototype._procField=function(T,D,d){this._parsing?this[T]=this._readField(D,d):this._writeField(D,d,this[T])},M.prototype._procFieldArray=function(T,D,d,v){var p;if(this._parsing)for(this[T]=[],p=0;p<D;p++)this[T][p]=this._readField(d,v);else for(p=0;p<this[T].length;p++)this._writeField(d,v,this[T][p])},M.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},M.prototype._procEntries=function(T,D,d){var v;if(this._parsing)for(this[T]=[],v=0;v<D;v++)this[T].push({}),d.call(this,this[T][v]);else for(v=0;v<D;v++)d.call(this,this[T][v])},M.prototype._procSubEntries=function(T,D,d,v){var p;if(this._parsing)for(T[D]=[],p=0;p<d;p++)T[D].push({}),v.call(this,T[D][p]);else for(p=0;p<d;p++)v.call(this,T[D][p])},M.prototype._procEntryField=function(T,D,d,v){this._parsing?T[D]=this._readField(d,v):this._writeField(d,v,T[D])},M.prototype._procSubBoxes=function(T,D){var d;if(this._parsing)for(this[T]=[],d=0;d<D;d++)this[T].push(M.parse(this));else for(d=0;d<D;d++)this._rawo?this[T][d].write():this.size+=this[T][d].getLength()},M.prototype._readField=function(T,D){switch(T){case"uint":return this._readUint(D);case"int":return this._readInt(D);case"template":return this._readTemplate(D);case"string":return-1===D?this._readTerminatedString():this._readString(D);case"data":return this._readData(D);case"utf8":return this._readUTF8String();default:return-1}},M.prototype._readInt=function(T){var D=null,d=this._cursor.offset-this._raw.byteOffset;switch(T){case 8:D=this._raw.getInt8(d);break;case 16:D=this._raw.getInt16(d);break;case 32:D=this._raw.getInt32(d);break;case 64:var v=this._raw.getInt32(d),p=this._raw.getInt32(d+4);D=v*Math.pow(2,32)+p}return this._cursor.offset+=T>>3,D},M.prototype._readUint=function(T){var v,p,D=null,d=this._cursor.offset-this._raw.byteOffset;switch(T){case 8:D=this._raw.getUint8(d);break;case 16:D=this._raw.getUint16(d);break;case 24:D=((v=this._raw.getUint16(d))<<8)+(p=this._raw.getUint8(d+2));break;case 32:D=this._raw.getUint32(d);break;case 64:v=this._raw.getUint32(d),p=this._raw.getUint32(d+4),D=v*Math.pow(2,32)+p}return this._cursor.offset+=T>>3,D},M.prototype._readString=function(T){for(var D="",d=0;d<T;d++){var v=this._readUint(8);D+=String.fromCharCode(v)}return D},M.prototype._readTemplate=function(T){return this._readUint(T/2)+this._readUint(T/2)/Math.pow(2,T/2)},M.prototype._readTerminatedString=function(){for(var T="";this._cursor.offset-this._offset<this._raw.byteLength;){var D=this._readUint(8);if(0===D)break;T+=String.fromCharCode(D)}return T},M.prototype._readData=function(T){var D=T>0?T:this._raw.byteLength-(this._cursor.offset-this._offset);if(D>0){var d=new Uint8Array(this._raw.buffer,this._cursor.offset,D);return this._cursor.offset+=D,d}return null},M.prototype._readUTF8String=function(){var T=this._raw.byteLength-(this._cursor.offset-this._offset),D=null;return T>0&&(D=new DataView(this._raw.buffer,this._cursor.offset,T),this._cursor.offset+=T),D&&x.Utils.dataViewToString(D)},M.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},M.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},M.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(M.parse(this))},M.prototype.append=function(T,D){x.Utils.appendBox(this,T,D)},M.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var T=0;T<this.boxes.length;T++)this.size+=this.boxes[T].getLength();return this._data&&this._writeData(this._data),this.size},M.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var T=0;T<this.boxes.length;T++)this.boxes[T].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},M.prototype._writeInt=function(T,D){if(this._rawo){var d=this._cursor.offset-this._rawo.byteOffset;switch(T){case 8:this._rawo.setInt8(d,D);break;case 16:this._rawo.setInt16(d,D);break;case 32:this._rawo.setInt32(d,D);break;case 64:var v=Math.floor(D/Math.pow(2,32)),p=D-v*Math.pow(2,32);this._rawo.setUint32(d,v),this._rawo.setUint32(d+4,p)}this._cursor.offset+=T>>3}else this.size+=T>>3},M.prototype._writeUint=function(T,D){if(this._rawo){var v,p,d=this._cursor.offset-this._rawo.byteOffset;switch(T){case 8:this._rawo.setUint8(d,D);break;case 16:this._rawo.setUint16(d,D);break;case 24:p=255&D,this._rawo.setUint16(d,v=(16776960&D)>>8),this._rawo.setUint8(d+2,p);break;case 32:this._rawo.setUint32(d,D);break;case 64:p=D-(v=Math.floor(D/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(d,v),this._rawo.setUint32(d+4,p)}this._cursor.offset+=T>>3}else this.size+=T>>3},M.prototype._writeString=function(T,D){for(var d=0;d<T;d++)this._writeUint(8,D.charCodeAt(d))},M.prototype._writeTerminatedString=function(T){if(0!==T.length){for(var D=0;D<T.length;D++)this._writeUint(8,T.charCodeAt(D));this._writeUint(8,0)}},M.prototype._writeTemplate=function(T,D){var d=Math.floor(D),v=(D-d)*Math.pow(2,T/2);this._writeUint(T/2,d),this._writeUint(T/2,v)},M.prototype._writeData=function(T){if(T)if(this._rawo){if(T instanceof Array){for(var d=this._cursor.offset-this._rawo.byteOffset,D=0;D<T.length;D++)this._rawo.setInt8(d+D,T[D]);this._cursor.offset+=T.length}T instanceof Uint8Array&&(this._root.bytes.set(T,this._cursor.offset),this._cursor.offset+=T.length)}else this.size+=T.length},M.prototype._writeUTF8String=function(T){var D=x.Utils.utf8ToByteArray(T);if(this._rawo)for(var d=new DataView(this._rawo.buffer,this._cursor.offset,D.length),v=0;v<D.length;v++)d.setUint8(v,D[v]);else this.size+=D.length},M.prototype._writeField=function(T,D,d){switch(T){case"uint":this._writeUint(D,d);break;case"int":this._writeInt(D,d);break;case"template":this._writeTemplate(D,d);break;case"string":-1==D?this._writeTerminatedString(d):this._writeString(D,d);break;case"data":this._writeData(d);break;case"utf8":this._writeUTF8String(d)}},M.prototype._boxProcessors.avc1=M.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},M.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},M.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(T){this._procEntryField(T,"segment_duration","uint",1===this.version?64:32),this._procEntryField(T,"media_time","int",1===this.version?64:32),this._procEntryField(T,"media_rate_integer","int",16),this._procEntryField(T,"media_rate_fraction","int",16)})},M.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},M.prototype._boxProcessors.free=M.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},M.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},M.prototype._boxProcessors.ftyp=M.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var T=-1;this._parsing&&(T=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",T,"string",4)},M.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},M.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},M.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),!this._parsing&&"string"==typeof this.language&&(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},M.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},M.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},M.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},M.prototype._boxProcessors.mp4a=M.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},M.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},M.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},M.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},M.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},M.prototype._boxProcessors.sdtp=function(){this._procFullBox();var T=-1;this._parsing&&(T=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",T,"uint",8)},M.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(T){this._parsing||(T.reference=(1&T.reference_type)<<31,T.reference|=2147483647&T.referenced_size,T.sap=(1&T.starts_with_SAP)<<31,T.sap|=(3&T.SAP_type)<<28,T.sap|=268435455&T.SAP_delta_time),this._procEntryField(T,"reference","uint",32),this._procEntryField(T,"subsegment_duration","uint",32),this._procEntryField(T,"sap","uint",32),this._parsing&&(T.reference_type=T.reference>>31&1,T.referenced_size=2147483647&T.reference,T.starts_with_SAP=T.sap>>31&1,T.SAP_type=T.sap>>28&7,T.SAP_delta_time=268435455&T.sap)})},M.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},M.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(T){this._procEntryField(T,"ranges_count","uint",32),this._procSubEntries(T,"ranges",T.ranges_count,function(D){this._procEntryField(D,"level","uint",8),this._procEntryField(D,"range_size","uint",24)})})},M.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},M.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(T){this._procEntryField(T,"sample_delta","uint",32),this._procEntryField(T,"subsample_count","uint",16),this._procSubEntries(T,"subsamples",T.subsample_count,function(D){this._procEntryField(D,"subsample_size","uint",1===this.version?32:16),this._procEntryField(D,"subsample_priority","uint",8),this._procEntryField(D,"discardable","uint",8),this._procEntryField(D,"codec_specific_parameters","uint",32)})})},M.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},M.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},M.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},M.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(T){this._procEntryField(T,"time","uint",1===this.version?64:32),this._procEntryField(T,"moof_offset","uint",1===this.version?64:32),this._procEntryField(T,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(T,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(T,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},M.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},M.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},M.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(T){256&this.flags&&this._procEntryField(T,"sample_duration","uint",32),512&this.flags&&this._procEntryField(T,"sample_size","uint",32),1024&this.flags&&this._procEntryField(T,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(T,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},M.prototype._boxProcessors["url "]=M.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},M.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},M.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},M.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},M.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(Oe,k,u){(function(x){function C(F){return Object.prototype.toString.call(F)}k.isArray=function y(F){return Array.isArray?Array.isArray(F):"[object Array]"===C(F)},k.isBoolean=function M(F){return"boolean"==typeof F},k.isNull=function T(F){return null===F},k.isNullOrUndefined=function D(F){return null==F},k.isNumber=function d(F){return"number"==typeof F},k.isString=function v(F){return"string"==typeof F},k.isSymbol=function p(F){return"symbol"==typeof F},k.isUndefined=function N(F){return void 0===F},k.isRegExp=function O(F){return"[object RegExp]"===C(F)},k.isObject=function L(F){return"object"==typeof F&&null!==F},k.isDate=function m(F){return"[object Date]"===C(F)},k.isError=function h(F){return"[object Error]"===C(F)||F instanceof Error},k.isFunction=function g(F){return"function"==typeof F},k.isPrimitive=function S(F){return null===F||"boolean"==typeof F||"number"==typeof F||"string"==typeof F||"symbol"==typeof F||typeof F>"u"},k.isBuffer=x.isBuffer}).call(this,u("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/es6-promise/auto.js":function(Oe,k,u){"use strict";Oe.exports=u("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(Oe,k,u){(function(x,y){var T;T=function(){"use strict";function T(me){return"function"==typeof me}var d=Array.isArray?Array.isArray:function(me){return"[object Array]"===Object.prototype.toString.call(me)},v=0,p=void 0,N=void 0,O=function(Te,Ne){I[v]=Te,I[v+1]=Ne,2===(v+=2)&&(N?N(H):z())};var h=typeof window<"u"?window:void 0,g=h||{},S=g.MutationObserver||g.WebKitMutationObserver,C=typeof self>"u"&&typeof x<"u"&&"[object process]"==={}.toString.call(x),F=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function f(){var me=setTimeout;return function(){return me(H,1)}}var I=new Array(1e3);function H(){for(var me=0;me<v;me+=2)(0,I[me])(I[me+1]),I[me]=void 0,I[me+1]=void 0;v=0}var z=void 0;function q(me,Te){var Ne=this,Ie=new this.constructor(V);void 0===Ie[X]&&U(Ie);var we=Ne._state;if(we){var ke=arguments[we-1];O(function(){return G(we,Ie,ke,Ne._result)})}else pe(Ne,Ie,me,Te);return Ie}function J(me){if(me&&"object"==typeof me&&me.constructor===this)return me;var Ne=new this(V);return ue(Ne,me),Ne}z=C?function R(){return function(){return x.nextTick(H)}}():S?function b(){var me=0,Te=new S(H),Ne=document.createTextNode("");return Te.observe(Ne,{characterData:!0}),function(){Ne.data=me=++me%2}}():F?function P(){var me=new MessageChannel;return me.port1.onmessage=H,function(){return me.port2.postMessage(0)}}():void 0===h?function $(){try{var me=Function("return this")().require("vertx");return p=me.runOnLoop||me.runOnContext,function w(){return typeof p<"u"?function(){p(H)}:f()}()}catch{return f()}}():f();var X=Math.random().toString(36).substring(2);function V(){}var se=void 0;function de(me,Te,Ne){Te.constructor===me.constructor&&Ne===q&&Te.constructor.resolve===J?function ie(me,Te){1===Te._state?ce(me,Te._result):2===Te._state?ne(me,Te._result):pe(Te,void 0,function(Ne){return ue(me,Ne)},function(Ne){return ne(me,Ne)})}(me,Te):void 0===Ne?ce(me,Te):T(Ne)?function ge(me,Te,Ne){O(function(Ie){var we=!1,ke=function re(me,Te,Ne,Ie){try{me.call(Te,Ne,Ie)}catch(we){return we}}(Ne,Te,function(Re){we||(we=!0,Te!==Re?ue(Ie,Re):ce(Ie,Re))},function(Re){we||(we=!0,ne(Ie,Re))});!we&&ke&&(we=!0,ne(Ie,ke))},me)}(me,Te,Ne):ce(me,Te)}function ue(me,Te){if(me===Te)ne(me,function he(){return new TypeError("You cannot resolve a promise with itself")}());else if(function M(me){var Te=typeof me;return null!==me&&("object"===Te||"function"===Te)}(Te)){var Ne=void 0;try{Ne=Te.then}catch(Ie){return void ne(me,Ie)}de(me,Te,Ne)}else ce(me,Te)}function le(me){me._onerror&&me._onerror(me._result),ee(me)}function ce(me,Te){me._state===se&&(me._result=Te,me._state=1,0!==me._subscribers.length&&O(ee,me))}function ne(me,Te){me._state===se&&(me._state=2,me._result=Te,O(le,me))}function pe(me,Te,Ne,Ie){var we=me._subscribers,ke=we.length;me._onerror=null,we[ke]=Te,we[ke+1]=Ne,we[ke+2]=Ie,0===ke&&me._state&&O(ee,me)}function ee(me){var Te=me._subscribers,Ne=me._state;if(0!==Te.length){for(var Ie=void 0,we=void 0,ke=me._result,Re=0;Re<Te.length;Re+=3)we=Te[Re+Ne],(Ie=Te[Re])?G(Ne,Ie,we,ke):we(ke);me._subscribers.length=0}}function G(me,Te,Ne,Ie){var we=T(Ne),ke=void 0,Re=void 0,xe=!0;if(we){try{ke=Ne(Ie)}catch(ze){xe=!1,Re=ze}if(Te===ke)return void ne(Te,function ve(){return new TypeError("A promises callback cannot return that same promise.")}())}else ke=Ie;Te._state!==se||(we&&xe?ue(Te,ke):!1===xe?ne(Te,Re):1===me?ce(Te,ke):2===me&&ne(Te,ke))}var _=0;function U(me){me[X]=_++,me._state=void 0,me._result=void 0,me._subscribers=[]}var te=function(){function me(Te,Ne){this._instanceConstructor=Te,this.promise=new Te(V),this.promise[X]||U(this.promise),d(Ne)?(this.length=Ne.length,this._remaining=Ne.length,this._result=new Array(this.length),0===this.length?ce(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ne),0===this._remaining&&ce(this.promise,this._result))):ne(this.promise,function K(){return new Error("Array Methods must be provided an Array")}())}return me.prototype._enumerate=function(Ne){for(var Ie=0;this._state===se&&Ie<Ne.length;Ie++)this._eachEntry(Ne[Ie],Ie)},me.prototype._eachEntry=function(Ne,Ie){var we=this._instanceConstructor,ke=we.resolve;if(ke===J){var Re=void 0,xe=void 0,ze=!1;try{Re=Ne.then}catch(at){ze=!0,xe=at}if(Re===q&&Ne._state!==se)this._settledAt(Ne._state,Ie,Ne._result);else if("function"!=typeof Re)this._remaining--,this._result[Ie]=Ne;else if(we===_e){var ut=new we(V);ze?ne(ut,xe):de(ut,Ne,Re),this._willSettleAt(ut,Ie)}else this._willSettleAt(new we(function(at){return at(Ne)}),Ie)}else this._willSettleAt(ke(Ne),Ie)},me.prototype._settledAt=function(Ne,Ie,we){var ke=this.promise;ke._state===se&&(this._remaining--,2===Ne?ne(ke,we):this._result[Ie]=we),0===this._remaining&&ce(ke,this._result)},me.prototype._willSettleAt=function(Ne,Ie){var we=this;pe(Ne,void 0,function(ke){return we._settledAt(1,Ie,ke)},function(ke){return we._settledAt(2,Ie,ke)})},me}();var _e=function(){function me(Te){this[X]=function A(){return _++}(),this._result=this._state=void 0,this._subscribers=[],V!==Te&&("function"!=typeof Te&&function Y(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof me?function j(me,Te){try{Te(function(Ie){ue(me,Ie)},function(Ie){ne(me,Ie)})}catch(Ne){ne(me,Ne)}}(this,Te):function W(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return me.prototype.catch=function(Ne){return this.then(null,Ne)},me.prototype.finally=function(Ne){var we=this.constructor;return T(Ne)?this.then(function(ke){return we.resolve(Ne()).then(function(){return ke})},function(ke){return we.resolve(Ne()).then(function(){throw ke})}):this.then(Ne,Ne)},me}();return _e.prototype.then=q,_e.all=function ye(me){return new te(this,me).promise},_e.race=function Se(me){var Te=this;return d(me)?new Te(function(Ne,Ie){for(var we=me.length,ke=0;ke<we;ke++)Te.resolve(me[ke]).then(Ne,Ie)}):new Te(function(Ne,Ie){return Ie(new TypeError("You must pass an array to race."))})},_e.resolve=J,_e.reject=function ae(me){var Ne=new this(V);return ne(Ne,me),Ne},_e._setScheduler=function L(me){N=me},_e._setAsap=function m(me){O=me},_e._asap=O,_e.polyfill=function Ee(){var me=void 0;if(typeof y<"u")me=y;else if(typeof self<"u")me=self;else try{me=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Te=me.Promise;if(Te){var Ne=null;try{Ne=Object.prototype.toString.call(Te.resolve())}catch{}if("[object Promise]"===Ne&&!Te.cast)return}me.Promise=_e},_e.Promise=_e,_e},Oe.exports=T()}).call(this,u("./node_modules/process/browser.js"),u("./node_modules/webpack/buildin/global.js"))},"./node_modules/fast-deep-equal/index.js":function(Oe,k,u){"use strict";var x=Array.isArray,y=Object.keys,M=Object.prototype.hasOwnProperty;Oe.exports=function T(D,d){if(D===d)return!0;if(D&&d&&"object"==typeof D&&"object"==typeof d){var N,O,L,v=x(D),p=x(d);if(v&&p){if((O=D.length)!=d.length)return!1;for(N=O;0!=N--;)if(!T(D[N],d[N]))return!1;return!0}if(v!=p)return!1;var m=D instanceof Date,h=d instanceof Date;if(m!=h)return!1;if(m&&h)return D.getTime()==d.getTime();var g=D instanceof RegExp,S=d instanceof RegExp;if(g!=S)return!1;if(g&&S)return D.toString()==d.toString();var C=y(D);if((O=C.length)!==y(d).length)return!1;for(N=O;0!=N--;)if(!M.call(d,C[N]))return!1;for(N=O;0!=N--;)if(!T(D[L=C[N]],d[L]))return!1;return!0}return D!=D&&d!=d}},"./node_modules/ieee754/index.js":function(Oe,k){k.read=function(u,x,y,M,T){var D,d,v=8*T-M-1,p=(1<<v)-1,N=p>>1,O=-7,L=y?T-1:0,m=y?-1:1,h=u[x+L];for(L+=m,D=h&(1<<-O)-1,h>>=-O,O+=v;O>0;D=256*D+u[x+L],L+=m,O-=8);for(d=D&(1<<-O)-1,D>>=-O,O+=M;O>0;d=256*d+u[x+L],L+=m,O-=8);if(0===D)D=1-N;else{if(D===p)return d?NaN:1/0*(h?-1:1);d+=Math.pow(2,M),D-=N}return(h?-1:1)*d*Math.pow(2,D-M)},k.write=function(u,x,y,M,T,D){var d,v,p,N=8*D-T-1,O=(1<<N)-1,L=O>>1,m=23===T?Math.pow(2,-24)-Math.pow(2,-77):0,h=M?0:D-1,g=M?1:-1,S=x<0||0===x&&1/x<0?1:0;for(x=Math.abs(x),isNaN(x)||x===1/0?(v=isNaN(x)?1:0,d=O):(d=Math.floor(Math.log(x)/Math.LN2),x*(p=Math.pow(2,-d))<1&&(d--,p*=2),(x+=d+L>=1?m/p:m*Math.pow(2,1-L))*p>=2&&(d++,p/=2),d+L>=O?(v=0,d=O):d+L>=1?(v=(x*p-1)*Math.pow(2,T),d+=L):(v=x*Math.pow(2,L-1)*Math.pow(2,T),d=0));T>=8;u[y+h]=255&v,h+=g,v/=256,T-=8);for(d=d<<T|v,N+=T;N>0;u[y+h]=255&d,h+=g,d/=256,N-=8);u[y+h-g]|=128*S}},"./node_modules/imsc/src/main/js/doc.js":function(Oe,k,u){!function(x,y,M,T,D){function d(_,A,U,K){var te=K&&"seq"===K.timeContainer,ye=0;K&&(ye=te&&U?U.end:K.begin),A.begin=A.explicit_begin?A.explicit_begin+ye:ye;var Se=A.begin,ae=null;for(var Y in A.sets)d(_,A.sets[Y],ae,A),Se="seq"===A.timeContainer?A.sets[Y].end:Math.max(Se,A.sets[Y].end),ae=A.sets[Y];if("contents"in A)for(var W in A.contents)d(_,A.contents[W],ae,A),Se="seq"===A.timeContainer?A.contents[W].end:Math.max(Se,A.contents[W].end),ae=A.contents[W];else Se=te?A.begin:Number.POSITIVE_INFINITY;A.end=null!==A.explicit_end&&null!==A.explicit_dur?Math.min(A.begin+A.explicit_dur,ye+A.explicit_end):null===A.explicit_end&&null!==A.explicit_dur?A.begin+A.explicit_dur:null!==A.explicit_end&&null===A.explicit_dur?ye+A.explicit_end:Se,delete A.explicit_begin,delete A.explicit_dur,delete A.explicit_end,_._registerEvent(A)}function v(_){this.node=_}function p(){this.events=[],this.head=null,this.body=null}function N(){this.styling=null,this.layout=null}function O(){this.styles={}}function L(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function m(){this.regions={}}function h(_){this.kind=_}function g(_){this.id=_}function S(_){this.regionID=_}function C(_){this.styleAttrs=_}function F(_){this.sets=_}function R(_){this.contents=_}function w(_,A,U){this.explicit_begin=_,this.explicit_end=A,this.explicit_dur=U}function b(){h.call(this,"body")}function P(){h.call(this,"div")}function f(){h.call(this,"p")}function I(){h.call(this,"span")}function H(){h.call(this,"span")}function $(){h.call(this,"br")}function z(){}function q(){}function J(_){return _&&"xml:id"in _.attributes&&_.attributes["xml:id"].value||null}function se(_){return _&&"style"in _.attributes?_.attributes.style.value.split(" "):[]}function Z(_,A){var U={};if(null!==_)for(var K in _.attributes){var te=_.attributes[K].uri+" "+_.attributes[K].local,ye=T.byQName[te];if(void 0!==ye){var Se=ye.parse(_.attributes[K].value);null!==Se?(U[te]=Se,ye===T.byName.zIndex&&pe(A,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):ee(A,"Cannot parse styling attribute "+te+" --\x3e "+_.attributes[K].value)}}return U}function oe(_,A,U){for(var K in _.attributes)if(_.attributes[K].uri===A&&_.attributes[K].local===U)return _.attributes[K].value;return null}function ie(_,A,U){var Ee,me=null;return null!==(Ee=/^(\d+(?:\.\d+)?)f$/.exec(U))?null!==A&&(me=parseFloat(Ee[1])/A):null!==(Ee=/^(\d+(?:\.\d+)?)t$/.exec(U))?null!==_&&(me=parseFloat(Ee[1])/_):null!==(Ee=/^(\d+(?:\.\d+)?)ms$/.exec(U))?me=parseFloat(Ee[1])/1e3:null!==(Ee=/^(\d+(?:\.\d+)?)s$/.exec(U))?me=parseFloat(Ee[1]):null!==(Ee=/^(\d+(?:\.\d+)?)h$/.exec(U))?me=3600*parseFloat(Ee[1]):null!==(Ee=/^(\d+(?:\.\d+)?)m$/.exec(U))?me=60*parseFloat(Ee[1]):null!==(Ee=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(U))?me=3600*parseInt(Ee[1])+60*parseInt(Ee[2])+parseFloat(Ee[3]):null!==(Ee=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(U))&&null!==A&&(me=3600*parseInt(Ee[1])+60*parseInt(Ee[2])+parseInt(Ee[3])+(null===Ee[4]?0:parseInt(Ee[4])/A)),me}function ue(_,A,U){for(;A.styleRefs.length>0;){var K=A.styleRefs.pop();K in _.styles?(ue(_,_.styles[K],U),ce(_.styles[K].styleAttrs,A.styleAttrs)):ee(U,"Non-existant style id referenced")}}function le(_,A,U,K){for(var te=A.length-1;te>=0;te--){var ye=A[te];ye in _.styles?ce(_.styles[ye].styleAttrs,U):ee(K,"Non-existant style id referenced")}}function ce(_,A){for(var U in _)U in A||(A[U]=_[U])}function pe(_,A){if(_&&_.warn&&_.warn(A))throw A}function ee(_,A){if(_&&_.error&&_.error(A))throw A}function G(_,A){throw _&&_.fatal&&_.fatal(A),A}function j(_,A){for(var te,U=0,K=_.length-1;U<=K;){var ye=_[te=Math.floor((U+K)/2)];if(ye<A)U=te+1;else{if(!(ye>A))return{found:!0,index:te};K=te-1}}return{found:!1,index:U}}x.fromXML=function(_,A,U){var K=y.parser(!0,{xmlns:!0}),te=[],ye=[],Se=[],ae=0,Y=null;K.onclosetag=function(Te){if(te[0]instanceof O)for(var Ne in te[0].styles)ue(te[0],te[0].styles[Ne],A);else if(te[0]instanceof f||te[0]instanceof I){if(te[0].contents.length>1){var we,Ie=[te[0].contents[0]];for(we=1;we<te[0].contents.length;we++)te[0].contents[we]instanceof H&&Ie[Ie.length-1]instanceof H?Ie[Ie.length-1].text+=te[0].contents[we].text:Ie.push(te[0].contents[we]);te[0].contents=Ie}te[0]instanceof I&&1===te[0].contents.length&&te[0].contents[0]instanceof H&&(te[0].text=te[0].contents[0].text,delete te[0].contents)}else te[0]instanceof v&&(te[0].node.uri===M.ns_tt&&"metadata"===te[0].node.local?ae--:ae>0&&U&&"onCloseTag"in U&&U.onCloseTag());Se.shift(),ye.shift(),te.shift()},K.ontext=function(Te){if(void 0!==te[0])if(te[0]instanceof I||te[0]instanceof f){var Ne=new H;Ne.initFromText(Y,te[0],Te,Se[0],A),te[0].contents.push(Ne)}else te[0]instanceof v&&ae>0&&U&&"onText"in U&&U.onText(Te)},K.onopentag=function(Te){var Ne=Te.attributes["xml:space"];Se.unshift(Ne?Ne.value:0===Se.length?"default":Se[0]);var Ie=Te.attributes["xml:lang"];if(ye.unshift(Ie?Ie.value:0===ye.length?"":ye[0]),Te.uri===M.ns_tt)if("tt"===Te.local)null!==Y&&G(A,"Two <tt> elements at ("+this.line+","+this.column+")"),(Y=new p).initFromNode(Te,A),te.unshift(Y);else if("head"===Te.local)te[0]instanceof p||G(A,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==Y.head&&G("Second <head> element at ("+this.line+","+this.column+")"),Y.head=new N,te.unshift(Y.head);else if("styling"===Te.local)te[0]instanceof N||G(A,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==Y.head.styling&&G("Second <styling> element at ("+this.line+","+this.column+")"),Y.head.styling=new O,te.unshift(Y.head.styling);else if("style"===Te.local){var we;te[0]instanceof O?((we=new L).initFromNode(Te,A),we.id?Y.head.styling.styles[we.id]=we:ee(A,"<style> element missing @id attribute"),te.unshift(we)):te[0]instanceof z?((we=new L).initFromNode(Te,A),ce(we.styleAttrs,te[0].styleAttrs),te.unshift(we)):G(A,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===Te.local)te[0]instanceof N||G(A,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==Y.head.layout&&G(A,"Second <layout> element at "+this.line+","+this.column+")"),Y.head.layout=new m,te.unshift(Y.head.layout);else if("region"===Te.local){te[0]instanceof m||G(A,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var ke=new z;ke.initFromNode(Y,Te,A),!ke.id||ke.id in Y.head.layout.regions?ee(A,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):Y.head.layout.regions[ke.id]=ke,te.unshift(ke)}else if("body"===Te.local){te[0]instanceof p||G(A,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==Y.body&&G(A,"Second <body> element at "+this.line+","+this.column+")");var Re=new b;Re.initFromNode(Y,Te,A),Y.body=Re,te.unshift(Re)}else if("div"===Te.local){te[0]instanceof P||te[0]instanceof b||G(A,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var xe=new P;xe.initFromNode(Y,te[0],Te,A),te[0].contents.push(xe),te.unshift(xe)}else if("p"===Te.local){te[0]instanceof P||G(A,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var ze=new f;ze.initFromNode(Y,te[0],Te,A),te[0].contents.push(ze),te.unshift(ze)}else if("span"===Te.local){te[0]instanceof I||te[0]instanceof f||G(A,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var ut=new I;ut.initFromNode(Y,te[0],Te,Se[0],A),te[0].contents.push(ut),te.unshift(ut)}else if("br"===Te.local){te[0]instanceof I||te[0]instanceof f||G(A,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var at=new $;at.initFromNode(Y,te[0],Te,A),te[0].contents.push(at),te.unshift(at)}else if("set"===Te.local){te[0]instanceof I||te[0]instanceof f||te[0]instanceof P||te[0]instanceof b||te[0]instanceof z||te[0]instanceof $||G(A,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var yt=new q;yt.initFromNode(Y,te[0],Te,A),te[0].sets.push(yt),te.unshift(yt)}else te.unshift(new v(Te));else te.unshift(new v(Te));if(te[0]instanceof v)if(Te.uri===M.ns_tt&&"metadata"===Te.local)ae++;else if(ae>0&&U&&"onOpenTag"in U){var Lt=[];for(var kt in Te.attributes)Lt[Te.attributes[kt].uri+" "+Te.attributes[kt].local]={uri:Te.attributes[kt].uri,local:Te.attributes[kt].local,value:Te.attributes[kt].value};U.onOpenTag(Te.uri,Te.local,Lt)}},K.write(_).close(),null!==Y.head?delete Y.head.styling:Y.head=new N,null===Y.head.layout&&(Y.head.layout=new m);var W=!1;for(var _e in Y.head.layout.regions){W=!0;break}if(!W){var Ee=z.prototype.createDefaultRegion();Y.head.layout.regions[Ee.id]=Ee}for(var me in Y.head.layout.regions)d(Y,Y.head.layout.regions[me],null,null);return Y.body&&d(Y,Y.body,null,null),Y},p.prototype.initFromNode=function(_,A){this.cellResolution=function ve(_,A){var U=oe(_,M.ns_ttp,"cellResolution"),K=15,te=32;if(null!==U){var Se=/(\d+) (\d+)/.exec(U);null!==Se?(te=parseInt(Se[1]),K=parseInt(Se[2])):pe(A,"Malformed cellResolution value (using initial value instead)")}return{w:te,h:K}}(_,A);var U=function re(_,A){var te,U=oe(_,M.ns_ttp,"frameRate"),K=30;null!==U&&(null!==(te=/(\d+)/.exec(U))?K=parseInt(te[1]):pe(A,"Malformed frame rate attribute (using initial value instead)"));var Se=oe(_,M.ns_ttp,"frameRateMultiplier"),ae=1;null!==Se&&(null!==(te=/(\d+) (\d+)/.exec(Se))?ae=parseInt(te[1])/parseInt(te[2]):pe(A,"Malformed frame rate multiplier attribute (using initial value instead)"));var W=ae*K,_e=1,Ee=oe(_,M.ns_ttp,"tickRate");return null===Ee?null!==U&&(_e=W):null!==(te=/(\d+)/.exec(Ee))?_e=parseInt(te[1]):pe(A,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:W,tickRate:_e}}(_,A);this.effectiveFrameRate=U.effectiveFrameRate,this.tickRate=U.tickRate,this.aspectRatio=function he(_,A){var U=oe(_,M.ns_ittp,"aspectRatio"),K=null;if(null!==U){var ye=/(\d+) (\d+)/.exec(U);if(null!==ye){var Se=parseInt(ye[1]),ae=parseInt(ye[2]);0!==Se&&0!==ae?K=Se/ae:ee(A,"Illegal aspectRatio values (ignoring)")}else ee(A,"Malformed aspectRatio attribute (ignoring)")}return K}(_,A);var K=oe(_,M.ns_ttp,"timeBase");null!==K&&"media"!==K&&G(A,"Unsupported time base");var te=function ge(_,A){var U=oe(_,M.ns_tts,"extent");if(null===U)return null;var K=U.split(" ");if(2!==K.length)return pe(A,"Malformed extent (ignoring)"),null;var te=D.parseLength(K[0]),ye=D.parseLength(K[1]);return ye&&te?{h:ye,w:te}:(pe(A,"Malformed extent values (ignoring)"),null)}(_,A);null===te?this.pxDimensions={h:480,w:640}:(("px"!==te.h.unit||"px"!==te.w.unit)&&G(A,"Extent on TT must be in px or absent"),this.pxDimensions={h:te.h.value,w:te.w.value})},p.prototype._registerEvent=function(_){if(!(_.end<=_.begin)){var A=j(this.events,_.begin);if(A.found||this.events.splice(A.index,0,_.begin),_.end!==Number.POSITIVE_INFINITY){var U=j(this.events,_.end);U.found||this.events.splice(U.index,0,_.end)}}},p.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},p.prototype.getMediaTimeEvents=function(){return this.events},L.prototype.initFromNode=function(_,A){this.id=J(_),this.styleAttrs=Z(_,A),this.styleRefs=se(_)},g.prototype.initFromNode=function(_,A,U,K){this.id=J(U)},S.prototype.initFromNode=function(_,A,U,K){this.regionID=function X(_){return _&&"region"in _.attributes?_.attributes.region.value:""}(U)},C.prototype.initFromNode=function(_,A,U,K){this.styleAttrs=Z(U,K),null!==_.head&&null!==_.head.styling&&le(_.head.styling,se(U),this.styleAttrs,K)},F.prototype.initFromNode=function(_,A,U,K){this.sets=[]},R.prototype.initFromNode=function(_,A,U,K){this.contents=[]},w.prototype.initFromNode=function(_,A,U,K){var te=function de(_,A,U,K){var te=null;U&&"begin"in U.attributes&&null===(te=ie(_.tickRate,_.effectiveFrameRate,U.attributes.begin.value))&&pe(K,"Malformed begin value "+U.attributes.begin.value+" (using 0)");var ye=null;U&&"dur"in U.attributes&&null===(ye=ie(_.tickRate,_.effectiveFrameRate,U.attributes.dur.value))&&pe(K,"Malformed dur value "+U.attributes.dur.value+" (ignoring)");var Se=null;return U&&"end"in U.attributes&&null===(Se=ie(_.tickRate,_.effectiveFrameRate,U.attributes.end.value))&&pe(K,"Malformed end value (ignoring)"),{explicit_begin:te,explicit_end:Se,explicit_dur:ye}}(_,0,U,K);this.explicit_begin=te.explicit_begin,this.explicit_end=te.explicit_end,this.explicit_dur=te.explicit_dur,this.timeContainer=function V(_,A){var U=_&&"timeContainer"in _.attributes?_.attributes.timeContainer.value:null;return U&&"par"!==U?"seq"===U?"seq":(ee(A,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(U,K)},b.prototype.initFromNode=function(_,A,U){C.prototype.initFromNode.call(this,_,null,A,U),w.prototype.initFromNode.call(this,_,null,A,U),F.prototype.initFromNode.call(this,_,null,A,U),S.prototype.initFromNode.call(this,_,null,A,U),R.prototype.initFromNode.call(this,_,null,A,U)},P.prototype.initFromNode=function(_,A,U,K){C.prototype.initFromNode.call(this,_,A,U,K),w.prototype.initFromNode.call(this,_,A,U,K),F.prototype.initFromNode.call(this,_,A,U,K),S.prototype.initFromNode.call(this,_,A,U,K),R.prototype.initFromNode.call(this,_,A,U,K)},f.prototype.initFromNode=function(_,A,U,K){C.prototype.initFromNode.call(this,_,A,U,K),w.prototype.initFromNode.call(this,_,A,U,K),F.prototype.initFromNode.call(this,_,A,U,K),S.prototype.initFromNode.call(this,_,A,U,K),R.prototype.initFromNode.call(this,_,A,U,K)},I.prototype.initFromNode=function(_,A,U,K,te){C.prototype.initFromNode.call(this,_,A,U,te),w.prototype.initFromNode.call(this,_,A,U,te),F.prototype.initFromNode.call(this,_,A,U,te),S.prototype.initFromNode.call(this,_,A,U,te),R.prototype.initFromNode.call(this,_,A,U,te),this.space=K},H.prototype.initFromText=function(_,A,U,K,te){w.prototype.initFromNode.call(this,_,A,null,te),this.text=U,this.space=K},$.prototype.initFromNode=function(_,A,U,K){S.prototype.initFromNode.call(this,_,A,U,K),w.prototype.initFromNode.call(this,_,A,U,K)},z.prototype.createDefaultRegion=function(){var _=new z;return g.call(_,""),C.call(_,{}),F.call(_,[]),w.call(_,0,Number.POSITIVE_INFINITY,null),_},z.prototype.initFromNode=function(_,A,U){g.prototype.initFromNode.call(this,_,null,A,U),C.prototype.initFromNode.call(this,_,null,A,U),w.prototype.initFromNode.call(this,_,null,A,U),F.prototype.initFromNode.call(this,_,null,A,U),null!==_.head&&null!==_.head.styling&&le(_.head.styling,se(A),this.styleAttrs,U)},q.prototype.initFromNode=function(_,A,U,K){w.prototype.initFromNode.call(this,_,A,U,K);var te=Z(U,K);for(var ye in this.qname=null,this.value=null,te){if(this.qname){ee(K,"More than one style specified on set");break}this.qname=ye,this.value=te[ye]}}}(k,typeof sax>"u"?u("./node_modules/sax/lib/sax.js"):sax,typeof imscNames>"u"?u("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscStyles>"u"?u("./node_modules/imsc/src/main/js/styles.js"):imscStyles,typeof imscUtils>"u"?u("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(Oe,k,u){!function(x,y,M){function T(R,w,b){var P;if("region"===b.kind?(P=document.createElement("div")).style.position="absolute":"body"===b.kind||"div"===b.kind?P=document.createElement("div"):"p"===b.kind?P=document.createElement("p"):"span"===b.kind?P=document.createElement("span"):"br"===b.kind&&(P=document.createElement("br")),P){for(var f in P.style.margin="0",g){var I=g[f],H=b.styleAttrs[I.qname];void 0!==H&&null!==I.map&&I.map(R,P,b,H)}var $=P;if("region"===b.kind){var z=b.styleAttrs[M.byName.writingMode.qname];"lrtb"===z||"lr"===z?(R.ipd="lr",R.bpd="tb"):"rltb"===z||"rl"===z?(R.ipd="rl",R.bpd="tb"):"tblr"===z?(R.ipd="tb",R.bpd="lr"):("tbrl"===z||"tb"===z)&&(R.ipd="tb",R.bpd="rl")}var q=b.styleAttrs[M.byName.linePadding.qname];if(q&&q>0){var J=Math.ceil(q*R.h)+"px";"tb"===R.bpd?($.style.paddingLeft=J,$.style.paddingRight=J):($.style.paddingTop=J,$.style.paddingBottom=J),R.lp=q}var X=b.styleAttrs[M.byName.multiRowAlign.qname];if(X&&"auto"!==X){var V=document.createElement("span");V.style.display="inline-block",V.style.textAlign=X,P.appendChild(V),$=V,R.mra=X}if(b.styleAttrs[M.byName.fillLineGap.qname]&&(R.flg=!0),"span"===b.kind&&b.text)if(R.lp||R.mra||R.flg)for(var se="",Z=0;Z<b.text.length;Z++){se+=b.text.charAt(Z);var oe=b.text.charCodeAt(Z);if(oe<55296||oe>56319||Z===b.text.length){var he=document.createElement("span");he.textContent=se,P.appendChild(he),se=""}}else P.textContent=b.text;for(var ve in w.appendChild(P),b.contents)T(R,$,b.contents[ve]);var re=[];if((R.lp||R.mra||R.flg)&&"p"===b.kind&&(L(R,$,re,null),R.mra&&(function d(R){for(var w=0;w<R.length-1;w++){var b=R[w].elements.length;if(0!==b&&!1===R[w].br){var P=document.createElement("br"),f=R[w].elements[b-1].node;f.parentElement.insertBefore(P,f.nextSibling)}}}(re),R.mra=null),R.lp&&(function D(R,w,b){for(var P in R){var f=R[P].elements.length,I=R[P].elements[R[P].start_elem],H=R[P].elements[R[P].end_elem],$=Math.ceil(w)+"px",z="-"+Math.ceil(w)+"px";0!==f&&("lr"===b.ipd?(I.node.style.borderLeftColor=I.bgcolor||"#00000000",I.node.style.borderLeftStyle="solid",I.node.style.borderLeftWidth=$,I.node.style.marginLeft=z):"rl"===b.ipd?(I.node.style.borderRightColor=I.bgcolor||"#00000000",I.node.style.borderRightStyle="solid",I.node.style.borderRightWidth=$,I.node.style.marginRight=z):"tb"===b.ipd&&(I.node.style.borderTopColor=I.bgcolor||"#00000000",I.node.style.borderTopStyle="solid",I.node.style.borderTopWidth=$,I.node.style.marginTop=z),"lr"===b.ipd?(H.node.style.borderRightColor=H.bgcolor||"#00000000",H.node.style.borderRightStyle="solid",H.node.style.borderRightWidth=$,H.node.style.marginRight=z):"rl"===b.ipd?(H.node.style.borderLeftColor=H.bgcolor||"#00000000",H.node.style.borderLeftStyle="solid",H.node.style.borderLeftWidth=$,H.node.style.marginLeft=z):"tb"===b.ipd&&(H.node.style.borderBottomColor=H.bgcolor||"#00000000",H.node.style.borderBottomStyle="solid",H.node.style.borderBottomWidth=$,H.node.style.marginBottom=z))}}(re,R.lp*R.h,R),R.lp=null),R.flg)){var ge=O($.getBoundingClientRect(),R);(function v(R,w,b,P){for(var f=Math.sign(b-w),I=0;I<=R.length;I++){var H,$,z;if(H=0===I?w:I===R.length?b:(R[I].before+R[I-1].after)/2,I>0)for(var q=0;q<R[I-1].elements.length;q++)null!==R[I-1].elements[q].bgcolor&&f*((z=R[I-1].elements[q]).after-H)<0&&($=Math.ceil(Math.abs(H-z.after))+"px",z.node.style.backgroundColor=z.bgcolor,"lr"===P.bpd?z.node.style.paddingRight=$:"rl"===P.bpd?z.node.style.paddingLeft=$:"tb"===P.bpd&&(z.node.style.paddingBottom=$));if(I<R.length)for(var J=0;J<R[I].elements.length;J++)null!==(z=R[I].elements[J]).bgcolor&&f*(z.before-H)>0&&($=Math.ceil(Math.abs(z.before-H))+"px",z.node.style.backgroundColor=z.bgcolor,"lr"===P.bpd?z.node.style.paddingLeft=$:"rl"===P.bpd?z.node.style.paddingRight=$:"tb"===P.bpd&&(z.node.style.paddingTop=$))}})(re,ge.before,ge.after,R),R.flg=null}if("region"===b.kind&&(L(R,$,re),"tb"===R.bpd&&R.enableRollUp&&b.contents.length>0&&"after"===b.styleAttrs[M.byName.displayAlign.qname])){var de=new p(""===b.id?"_":b.id,re);if(R.currentISDState[de.id]=de,R.previousISDState&&de.id in R.previousISDState&&R.previousISDState[de.id].plist.length>0&&de.plist.length>1&&de.plist[de.plist.length-2].text===R.previousISDState[de.id].plist[R.previousISDState[de.id].plist.length-1].text){var ue=P.firstElementChild,le=de.plist[de.plist.length-1].after-de.plist[de.plist.length-1].before;ue.style.bottom="-"+le+"px",ue.style.transition="transform 0.4s",ue.style.position="relative",ue.style.transform="translateY(-"+le+"px)"}}}else!function F(R,w){if(R&&R.error&&R.error(w))throw w}(R.errorHandler,"Error processing ISD element kind: "+b.kind)}function p(R,w){this.id=R,this.plist=w}function O(R,w){var b={before:null,after:null,start:null,end:null};return"tb"===w.bpd?(b.before=R.top,b.after=R.bottom,"lr"===w.ipd?(b.start=R.left,b.end=R.right):(b.start=R.right,b.end=R.left)):"lr"===w.bpd?(b.before=R.left,b.after=R.right,b.start=R.top,b.end=R.bottom):"rl"===w.bpd&&(b.before=R.right,b.after=R.left,b.start=R.top,b.end=R.bottom),b}function L(R,w,b,P){var f=w.style.backgroundColor||P;if(0===w.childElementCount)if("span"===w.localName){var I=w.getBoundingClientRect();if(0===I.height||0===I.width)return;var H=O(I,R);if(0!==b.length&&function m(R,w,b,P){return w<P&&R>b||P<=w&&b>=R}(H.before,H.after,b[b.length-1].before,b[b.length-1].after)){var $=Math.sign(H.after-H.before),z=Math.sign(H.end-H.start);$*(H.before-b[b.length-1].before)<0&&(b[b.length-1].before=H.before),$*(H.after-b[b.length-1].after)>0&&(b[b.length-1].after=H.after),z*(H.start-b[b.length-1].start)<0&&(b[b.length-1].start=H.start,b[b.length-1].start_elem=b[b.length-1].elements.length),z*(H.end-b[b.length-1].end)>0&&(b[b.length-1].end=H.end,b[b.length-1].end_elem=b[b.length-1].elements.length)}else b.push({before:H.before,after:H.after,start:H.start,end:H.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1});b[b.length-1].text+=w.textContent,b[b.length-1].elements.push({node:w,bgcolor:f,before:H.before,after:H.after})}else"br"===w.localName&&0!==b.length&&(b[b.length-1].br=!0);else for(var q=w.firstChild;q;)q.nodeType===Node.ELEMENT_NODE&&L(R,q,b,f),q=q.nextSibling}function h(R,w){this.qname=R,this.map=w}x.render=function(R,w,b,P,f,I,H,$,z){var q=P||w.clientHeight,J=f||w.clientWidth;if(null!==R.aspectRatio){var X=q*R.aspectRatio;X>J?q=Math.round(J/R.aspectRatio):J=X}var V=document.createElement("div");V.style.position="relative",V.style.width=J+"px",V.style.height=q+"px",V.style.margin="auto",V.style.top=0,V.style.bottom=0,V.style.left=0,V.style.right=0,V.style.zIndex=0;var se={h:q,w:J,regionH:null,regionW:null,imgResolver:b,displayForcedOnlyMode:I||!1,isd:R,errorHandler:H,previousISDState:$,enableRollUp:z||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var Z in w.appendChild(V),R.contents)T(se,V,R.contents[Z]);return se.currentISDState};var g=[new h("http://www.w3.org/ns/ttml#styling backgroundColor",function(R,w,b,P){0!==P[3]&&(w.style.backgroundColor="rgba("+P[0].toString()+","+P[1].toString()+","+P[2].toString()+","+(P[3]/255).toString()+")")}),new h("http://www.w3.org/ns/ttml#styling color",function(R,w,b,P){w.style.color="rgba("+P[0].toString()+","+P[1].toString()+","+P[2].toString()+","+(P[3]/255).toString()+")"}),new h("http://www.w3.org/ns/ttml#styling direction",function(R,w,b,P){w.style.direction=P}),new h("http://www.w3.org/ns/ttml#styling display",function(R,w,b,P){}),new h("http://www.w3.org/ns/ttml#styling displayAlign",function(R,w,b,P){w.style.display="flex",w.style.flexDirection="column","before"===P?w.style.justifyContent="flex-start":"center"===P?w.style.justifyContent="center":"after"===P&&(w.style.justifyContent="flex-end")}),new h("http://www.w3.org/ns/ttml#styling extent",function(R,w,b,P){R.regionH=P.h*R.h,R.regionW=P.w*R.w;var f=0,I=0,H=b.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];H&&(f=(H[0]+H[2])*R.h,I=(H[1]+H[3])*R.w),w.style.height=R.regionH-f+"px",w.style.width=R.regionW-I+"px"}),new h("http://www.w3.org/ns/ttml#styling fontFamily",function(R,w,b,P){var f=[];for(var I in P)"monospaceSerif"===P[I]?(f.push("Courier New"),f.push('"Liberation Mono"'),f.push("Courier"),f.push("monospace")):"proportionalSansSerif"===P[I]?(f.push("Arial"),f.push("Helvetica"),f.push('"Liberation Sans"'),f.push("sans-serif")):"monospace"===P[I]?f.push("monospace"):"sansSerif"===P[I]?f.push("sans-serif"):"serif"===P[I]?f.push("serif"):"monospaceSansSerif"===P[I]?(f.push("Consolas"),f.push("monospace")):f.push("proportionalSerif"===P[I]?"serif":P[I]);w.style.fontFamily=f.join(",")}),new h("http://www.w3.org/ns/ttml#styling fontSize",function(R,w,b,P){w.style.fontSize=P*R.h+"px"}),new h("http://www.w3.org/ns/ttml#styling fontStyle",function(R,w,b,P){w.style.fontStyle=P}),new h("http://www.w3.org/ns/ttml#styling fontWeight",function(R,w,b,P){w.style.fontWeight=P}),new h("http://www.w3.org/ns/ttml#styling lineHeight",function(R,w,b,P){w.style.lineHeight="normal"===P?"normal":P*R.h+"px"}),new h("http://www.w3.org/ns/ttml#styling opacity",function(R,w,b,P){w.style.opacity=P}),new h("http://www.w3.org/ns/ttml#styling origin",function(R,w,b,P){w.style.top=P.h*R.h+"px",w.style.left=P.w*R.w+"px"}),new h("http://www.w3.org/ns/ttml#styling overflow",function(R,w,b,P){w.style.overflow=P}),new h("http://www.w3.org/ns/ttml#styling padding",function(R,w,b,P){var f=[];f[0]=P[0]*R.h+"px",f[1]=P[3]*R.w+"px",f[2]=P[2]*R.h+"px",f[3]=P[1]*R.w+"px",w.style.padding=f.join(" ")}),new h("http://www.w3.org/ns/ttml#styling showBackground",null),new h("http://www.w3.org/ns/ttml#styling textAlign",function(R,w,b,P){var I=b.styleAttrs[M.byName.direction.qname];w.style.textAlign="start"===P?"rtl"===I?"right":"left":"end"===P?"rtl"===I?"left":"right":P}),new h("http://www.w3.org/ns/ttml#styling textDecoration",function(R,w,b,P){w.style.textDecoration=P.join(" ").replace("lineThrough","line-through")}),new h("http://www.w3.org/ns/ttml#styling textOutline",function(R,w,b,P){w.style.textShadow="none"===P?"":"rgba("+P.color[0].toString()+","+P.color[1].toString()+","+P.color[2].toString()+","+(P.color[3]/255).toString()+") 0px 0px "+P.thickness*R.h+"px"}),new h("http://www.w3.org/ns/ttml#styling unicodeBidi",function(R,w,b,P){w.style.unicodeBidi="bidiOverride"===P?"bidi-override":P}),new h("http://www.w3.org/ns/ttml#styling visibility",function(R,w,b,P){w.style.visibility=P}),new h("http://www.w3.org/ns/ttml#styling wrapOption",function(R,w,b,P){w.style.whiteSpace="wrap"===P?"preserve"===b.space?"pre-wrap":"normal":"preserve"===b.space?"pre":"noWrap"}),new h("http://www.w3.org/ns/ttml#styling writingMode",function(R,w,b,P){"lrtb"===P||"lr"===P||"rltb"===P||"rl"===P?w.style.writingMode="horizontal-tb":"tblr"===P?w.style.writingMode="vertical-lr":("tbrl"===P||"tb"===P)&&(w.style.writingMode="vertical-rl")}),new h("http://www.w3.org/ns/ttml#styling zIndex",function(R,w,b,P){w.style.zIndex=P}),new h("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(R,w,b,P){if(null!==R.imgResolver&&null!==P){var f=document.createElement("img"),I=R.imgResolver(P,f);I&&(f.src=I),f.height=R.regionH,f.width=R.regionW,w.appendChild(f)}}),new h("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(R,w,b,P){R.displayForcedOnlyMode&&!1===P&&(w.style.visibility="hidden")})],S={};for(var C in g)S[g[C].qname]=g[C]}(k,typeof imscNames>"u"?u("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscStyles>"u"?u("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/isd.js":function(Oe,k,u){!function(x,y,M){function T(h,g,S,C,F,R,w,b,P){if(g<w.begin||g>=w.end)return null;var f="regionID"in w&&""!==w.regionID?w.regionID:R;if(null!==F&&f!==S.id&&(!("contents"in w)||"contents"in w&&0===w.contents.length||""!==f))return null;var I=new p(w);for(var H in w.sets)g<w.sets[H].begin||g>=w.sets[H].end||(I.styleAttrs[w.sets[H].qname]=w.sets[H].value);var ie,$={};for(var z in I.styleAttrs)if($[z]=!0,z===M.byName.writingMode.qname&&!(M.byName.direction.qname in I.styleAttrs)){var q=I.styleAttrs[z];"lrtb"===q||"lr"===q?I.styleAttrs[M.byName.direction.qname]="ltr":("rltb"===q||"rl"===q)&&(I.styleAttrs[M.byName.direction.qname]="rtl")}if(null!==F)for(var J in M.all){var X=M.all[J];if(X.qname===M.byName.textDecoration.qname){var V=F.styleAttrs[X.qname],se=I.styleAttrs[X.qname],Z=[];void 0===se?Z=V:-1===se.indexOf("none")?((-1===se.indexOf("noUnderline")&&-1!==V.indexOf("underline")||-1!==se.indexOf("underline"))&&Z.push("underline"),(-1===se.indexOf("noLineThrough")&&-1!==V.indexOf("lineThrough")||-1!==se.indexOf("lineThrough"))&&Z.push("lineThrough"),(-1===se.indexOf("noOverline")&&-1!==V.indexOf("overline")||-1!==se.indexOf("overline"))&&Z.push("overline")):Z.push("none"),I.styleAttrs[X.qname]=Z}else X.inherit&&X.qname in F.styleAttrs&&!(X.qname in I.styleAttrs)&&(I.styleAttrs[X.qname]=F.styleAttrs[X.qname])}for(var oe in M.all){var he=M.all[oe];he.qname in I.styleAttrs||("region"===I.kind||!1===he.inherit&&null!==he.initial)&&(I.styleAttrs[he.qname]=he.parse(he.initial),$[he.qname]=!0)}for(var ve in M.all){var re=M.all[ve];if(re.qname in $&&null!==re.compute){var ge=re.compute(h,F,I,I.styleAttrs[re.qname],P);null!==ge?I.styleAttrs[re.qname]=ge:L(b,"Style '"+re.qname+"' on element '"+I.kind+"' cannot be computed")}}if("none"===I.styleAttrs[M.byName.display.qname])return null;for(var de in null===F?ie=null===C?[]:[C]:"contents"in w&&(ie=w.contents),ie){var ue=T(h,g,S,C,I,f,ie[de],b,P);null!==ue&&I.contents.push(ue.element)}for(var le in I.styleAttrs)-1===M.byQName[le].applies.indexOf(I.kind)&&delete I.styleAttrs[le];if("span"===I.kind&&I.text&&"default"===I.space){var ne=I.text.replace(/\s+/g," ");I.text=ne}if("p"===I.kind){var pe=[];D(I,pe);for(var ee=0,G="after_br",j=0;;)if("after_br"===G)ee>=pe.length||"br"===pe[ee].kind?(G="before_br",j=ee,ee--):("preserve"!==pe[ee].space&&(pe[ee].text=pe[ee].text.replace(/^\s+/g,"")),pe[ee].text.length>0?(G="looking_br",ee++):pe.splice(ee,1));else if("before_br"===G)if(ee<0||"br"===pe[ee].kind){if(G="after_br",(ee=j+1)>=pe.length)break}else if("preserve"!==pe[ee].space&&(pe[ee].text=pe[ee].text.replace(/\s+$/g,"")),pe[ee].text.length>0){if(G="after_br",(ee=j+1)>=pe.length)break}else pe.splice(ee,1),ee--;else ee>=pe.length||"br"===pe[ee].kind?(G="before_br",j=ee,ee--):ee++;d(I)}return"div"===I.kind&&M.byName.backgroundImage.qname in I.styleAttrs||"br"===I.kind||"contents"in I&&I.contents.length>0||"span"===I.kind&&null!==I.text||"region"===I.kind&&"always"===I.styleAttrs[M.byName.showBackground.qname]?{region_id:f,element:I}:null}function D(h,g){if("contents"in h)for(var S in h.contents)D(h.contents[S],g);else g.push(h)}function d(h){if("br"===h.kind)return!1;if("text"in h)return 0===h.text.length;if("contents"in h){for(var g=h.contents.length;g--;)d(h.contents[g])&&h.contents.splice(g,1);return 0===h.contents.length}}function v(h){this.contents=[],this.aspectRatio=h.aspectRatio}function p(h){for(var g in this.kind=h.kind||"region",h.id&&(this.id=h.id),this.styleAttrs={},h.styleAttrs)this.styleAttrs[g]=h.styleAttrs[g];"text"in h?this.text=h.text:"br"!==h.kind&&(this.contents=[]),"space"in h&&(this.space=h.space)}function L(h,g){if(h&&h.error&&h.error(g))throw g}x.generateISD=function(h,g,S){var C=new v(h),F={};for(var R in h.head.layout.regions){var w=T(h,g,h.head.layout.regions[R],h.body,null,"",h.head.layout.regions[R],S,F);null!==w&&C.contents.push(w.element)}return C}}(k,typeof imscNames>"u"?u("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscStyles>"u"?u("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/main.js":function(Oe,k,u){k.generateISD=u("./node_modules/imsc/src/main/js/isd.js").generateISD,k.fromXML=u("./node_modules/imsc/src/main/js/doc.js").fromXML,k.renderHTML=u("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(Oe,k,u){var x;(x=k).ns_tt="http://www.w3.org/ns/ttml",x.ns_tts="http://www.w3.org/ns/ttml#styling",x.ns_ttp="http://www.w3.org/ns/ttml#parameter",x.ns_xml="http://www.w3.org/XML/1998/namespace",x.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",x.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",x.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",x.ns_ebutts="urn:ebu:tt:style"},"./node_modules/imsc/src/main/js/styles.js":function(Oe,k,u){!function(x,y,M){function T(v,p,N,O,L,m,h,g){this.name=p,this.ns=v,this.qname=v+" "+p,this.inherit=L,this.animatable=m,this.initial=N,this.applies=O,this.parse=h,this.compute=g}for(var D in x.all=[new T(y.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,M.parseColor,null),new T(y.ns_tts,"color","white",["span"],!0,!0,M.parseColor,null),new T(y.ns_tts,"direction","ltr",["p","span"],!0,!0,function(v){return v},null),new T(y.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(v){return v},null),new T(y.ns_tts,"displayAlign","before",["region"],!1,!0,function(v){return v},null),new T(y.ns_tts,"extent","auto",["tt","region"],!1,!0,function(v){if("auto"===v)return v;var p=v.split(" ");if(2!==p.length)return null;var N=M.parseLength(p[0]),O=M.parseLength(p[1]);return O&&N?{h:O,w:N}:null},function(v,p,N,O,L){var m,h;if("auto"===O)m=1;else if("%"===O.h.unit)m=O.h.value/100;else{if("px"!==O.h.unit)return null;m=O.h.value/v.pxDimensions.h}if("auto"===O)h=1;else if("%"===O.w.unit)h=O.w.value/100;else{if("px"!==O.w.unit)return null;h=O.w.value/v.pxDimensions.w}return{h:m,w:h}}),new T(y.ns_tts,"fontFamily","default",["span"],!0,!0,function(v){var p=v.split(","),N=[];for(var O in p)"'"!==p[O].charAt(0)&&'"'!==p[O].charAt(0)&&"default"===p[O]?N.push("monospaceSerif"):N.push(p[O]);return N},null),new T(y.ns_tts,"fontSize","1c",["span"],!0,!0,M.parseLength,function(v,p,N,O,L){var m;if("%"===O.unit)m=null!==p?p.styleAttrs[x.byName.fontSize.qname]*O.value/100:O.value/100/v.cellResolution.h;else if("em"===O.unit)m=null!==p?p.styleAttrs[x.byName.fontSize.qname]*O.value:O.value/v.cellResolution.h;else if("c"===O.unit)m=O.value/v.cellResolution.h;else{if("px"!==O.unit)return null;m=O.value/v.pxDimensions.h}return m}),new T(y.ns_tts,"fontStyle","normal",["span"],!0,!0,function(v){return v},null),new T(y.ns_tts,"fontWeight","normal",["span"],!0,!0,function(v){return v},null),new T(y.ns_tts,"lineHeight","normal",["p"],!0,!0,function(v){return"normal"===v?v:M.parseLength(v)},function(v,p,N,O,L){var m;if("normal"===O)m=O;else if("%"===O.unit)m=N.styleAttrs[x.byName.fontSize.qname]*O.value/100;else if("em"===O.unit)m=N.styleAttrs[x.byName.fontSize.qname]*O.value;else if("c"===O.unit)m=O.value/v.cellResolution.h;else{if("px"!==O.unit)return null;m=O.value/v.pxDimensions.h}return m}),new T(y.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new T(y.ns_tts,"origin","auto",["region"],!1,!0,function(v){if("auto"===v)return v;var p=v.split(" ");if(2!==p.length)return null;var N=M.parseLength(p[0]),O=M.parseLength(p[1]);return O&&N?{h:O,w:N}:null},function(v,p,N,O,L){var m,h;if("auto"===O)m=0;else if("%"===O.h.unit)m=O.h.value/100;else{if("px"!==O.h.unit)return null;m=O.h.value/v.pxDimensions.h}if("auto"===O)h=0;else if("%"===O.w.unit)h=O.w.value/100;else{if("px"!==O.w.unit)return null;h=O.w.value/v.pxDimensions.w}return{h:m,w:h}}),new T(y.ns_tts,"overflow","hidden",["region"],!1,!0,function(v){return v},null),new T(y.ns_tts,"padding","0px",["region"],!1,!0,function(v){var p=v.split(" ");if(p.length>4)return null;var N=[];for(var O in p){var L=M.parseLength(p[O]);if(!L)return null;N.push(L)}return N},function(v,p,N,O,L){var m;if(1===O.length)m=[O[0],O[0],O[0],O[0]];else if(2===O.length)m=[O[0],O[1],O[0],O[1]];else if(3===O.length)m=[O[0],O[1],O[2],O[1]];else{if(4!==O.length)return null;m=[O[0],O[1],O[2],O[3]]}var h=N.styleAttrs[x.byName.writingMode.qname];if("lrtb"===h||"lr"===h)m=[m[0],m[3],m[2],m[1]];else if("rltb"===h||"rl"===h)m=[m[0],m[1],m[2],m[3]];else if("tblr"===h)m=[m[3],m[0],m[1],m[2]];else{if("tbrl"!==h&&"tb"!==h)return null;m=[m[3],m[2],m[1],m[0]]}var g=[];for(var S in m)if(0===m[S].value)g[S]=0;else if("%"===m[S].unit)g[S]="0"===S||"2"===S?N.styleAttrs[x.byName.extent.qname].h*m[S].value/100:N.styleAttrs[x.byName.extent.qname].w*m[S].value/100;else if("em"===m[S].unit)g[S]=N.styleAttrs[x.byName.fontSize.qname]*m[S].value;else if("c"===m[S].unit)g[S]=m[S].value/v.cellResolution.h;else{if("px"!==m[S].unit)return null;g[S]="0"===S||"2"===S?m[S].value/v.pxDimensions.h:m[S].value/v.pxDimensions.w}return g}),new T(y.ns_tts,"showBackground","always",["region"],!1,!0,function(v){return v},null),new T(y.ns_tts,"textAlign","start",["p"],!0,!0,function(v){return v},function(v,p,N,O,L){return"left"===O?"start":"right"===O?"end":O}),new T(y.ns_tts,"textDecoration","none",["span"],!0,!0,function(v){return v.split(" ")},null),new T(y.ns_tts,"textOutline","none",["span"],!0,!0,function(v){if("none"===v)return v;var p={},N=v.split(" ");if(0===N.length||N.length>2)return null;var O=M.parseColor(N[0]);if(p.color=O,null!==O&&N.shift(),1!==N.length)return null;var L=M.parseLength(N[0]);return L?(p.thickness=L,p):null},function(v,p,N,O,L){if("none"===O)return O;var m={};if(m.color=null===O.color?N.styleAttrs[x.byName.color.qname]:O.color,"%"===O.thickness.unit)m.thickness=N.styleAttrs[x.byName.fontSize.qname]*O.thickness.value/100;else if("em"===O.thickness.unit)m.thickness=N.styleAttrs[x.byName.fontSize.qname]*O.thickness.value;else if("c"===O.thickness.unit)m.thickness=O.thickness.value/v.cellResolution.h;else{if("px"!==O.thickness.unit)return null;m.thickness=O.thickness.value/v.pxDimensions.h}return m}),new T(y.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(v){return v},null),new T(y.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(v){return v},null),new T(y.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(v){return v},null),new T(y.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(v){return v},null),new T(y.ns_tts,"zIndex","auto",["region"],!1,!0,function(v){var p;return"auto"===v?p=v:(p=parseInt(v),isNaN(p)&&(p=null)),p},null),new T(y.ns_ebutts,"linePadding","0c",["p"],!0,!1,M.parseLength,function(v,p,N,O,L){return"c"===O.unit?O.value/v.cellResolution.h:null}),new T(y.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(v){return v},null),new T(y.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(v){return v},null),new T(y.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(v){return"true"===v},null),new T(y.ns_itts,"fillLineGap","false",["p"],!0,!0,function(v){return"true"===v},null)],x.byQName={},x.all)x.byQName[x.all[D].qname]=x.all[D];for(var d in x.byName={},x.all)x.byName[x.all[d].name]=x.all[d]}(k,typeof imscNames>"u"?u("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscUtils>"u"?u("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(Oe,k,u){!function(x){var y=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,M=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,T=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,D={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};x.parseColor=function(v){var p,N=null,O=D[v.toLowerCase()];return void 0!==O?N=O:null!==(p=y.exec(v))?N=[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16),void 0!==p[4]?parseInt(p[4],16):255]:null!==(p=M.exec(v))?N=[parseInt(p[1]),parseInt(p[2]),parseInt(p[3]),255]:null!==(p=T.exec(v))&&(N=[parseInt(p[1]),parseInt(p[2]),parseInt(p[3]),parseInt(p[4])]),N};var d=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;x.parseLength=function(v){var p,N=null;return null!==(p=d.exec(v))&&(N={value:parseFloat(p[1]),unit:p[2]}),N}}(k)},"./node_modules/inherits/inherits_browser.js":function(Oe,k){Oe.exports="function"==typeof Object.create?function(x,y){x.super_=y,x.prototype=Object.create(y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}})}:function(x,y){x.super_=y;var M=function(){};M.prototype=y.prototype,x.prototype=new M,x.prototype.constructor=x}},"./node_modules/isarray/index.js":function(Oe,k){var u={}.toString;Oe.exports=Array.isArray||function(x){return"[object Array]"==u.call(x)}},"./node_modules/node-libs-browser/node_modules/buffer/index.js":function(Oe,k,u){"use strict";(function(x){var y=u("./node_modules/base64-js/index.js"),M=u("./node_modules/ieee754/index.js"),T=u("./node_modules/isarray/index.js");function d(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function v(ae,Y){if(d()<Y)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(ae=new Uint8Array(Y)).__proto__=p.prototype:(null===ae&&(ae=new p(Y)),ae.length=Y),ae}function p(ae,Y,W){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(ae,Y,W);if("number"==typeof ae){if("string"==typeof Y)throw new Error("If encoding is specified then the first argument must be a string");return m(this,ae)}return N(this,ae,Y,W)}function N(ae,Y,W,_e){if("number"==typeof Y)throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&Y instanceof ArrayBuffer?function S(ae,Y,W,_e){if(W<0||Y.byteLength<W)throw new RangeError("'offset' is out of bounds");if(Y.byteLength<W+(_e||0))throw new RangeError("'length' is out of bounds");return Y=void 0===W&&void 0===_e?new Uint8Array(Y):void 0===_e?new Uint8Array(Y,W):new Uint8Array(Y,W,_e),p.TYPED_ARRAY_SUPPORT?(ae=Y).__proto__=p.prototype:ae=g(ae,Y),ae}(ae,Y,W,_e):"string"==typeof Y?function h(ae,Y,W){if(("string"!=typeof W||""===W)&&(W="utf8"),!p.isEncoding(W))throw new TypeError('"encoding" must be a valid string encoding');var _e=0|w(Y,W),Ee=(ae=v(ae,_e)).write(Y,W);return Ee!==_e&&(ae=ae.slice(0,Ee)),ae}(ae,Y,W):function C(ae,Y){if(p.isBuffer(Y)){var W=0|F(Y.length);return 0===(ae=v(ae,W)).length||Y.copy(ae,0,0,W),ae}if(Y){if(typeof ArrayBuffer<"u"&&Y.buffer instanceof ArrayBuffer||"length"in Y)return"number"!=typeof Y.length||function Se(ae){return ae!=ae}(Y.length)?v(ae,0):g(ae,Y);if("Buffer"===Y.type&&T(Y.data))return g(ae,Y.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(ae,Y)}function O(ae){if("number"!=typeof ae)throw new TypeError('"size" argument must be a number');if(ae<0)throw new RangeError('"size" argument must not be negative')}function m(ae,Y){if(O(Y),ae=v(ae,Y<0?0:0|F(Y)),!p.TYPED_ARRAY_SUPPORT)for(var W=0;W<Y;++W)ae[W]=0;return ae}function g(ae,Y){var W=Y.length<0?0:0|F(Y.length);ae=v(ae,W);for(var _e=0;_e<W;_e+=1)ae[_e]=255&Y[_e];return ae}function F(ae){if(ae>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|ae}function w(ae,Y){if(p.isBuffer(ae))return ae.length;if(typeof ArrayBuffer<"u"&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(ae)||ae instanceof ArrayBuffer))return ae.byteLength;"string"!=typeof ae&&(ae=""+ae);var W=ae.length;if(0===W)return 0;for(var _e=!1;;)switch(Y){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":case void 0:return A(ae).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*W;case"hex":return W>>>1;case"base64":return te(ae).length;default:if(_e)return A(ae).length;Y=(""+Y).toLowerCase(),_e=!0}}function b(ae,Y,W){var _e=!1;if((void 0===Y||Y<0)&&(Y=0),Y>this.length||((void 0===W||W>this.length)&&(W=this.length),W<=0)||(W>>>=0)<=(Y>>>=0))return"";for(ae||(ae="utf8");;)switch(ae){case"hex":return re(this,Y,W);case"utf8":case"utf-8":return se(this,Y,W);case"ascii":return he(this,Y,W);case"latin1":case"binary":return ve(this,Y,W);case"base64":return V(this,Y,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge(this,Y,W);default:if(_e)throw new TypeError("Unknown encoding: "+ae);ae=(ae+"").toLowerCase(),_e=!0}}function P(ae,Y,W){var _e=ae[Y];ae[Y]=ae[W],ae[W]=_e}function f(ae,Y,W,_e,Ee){if(0===ae.length)return-1;if("string"==typeof W?(_e=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,isNaN(W)&&(W=Ee?0:ae.length-1),W<0&&(W=ae.length+W),W>=ae.length){if(Ee)return-1;W=ae.length-1}else if(W<0){if(!Ee)return-1;W=0}if("string"==typeof Y&&(Y=p.from(Y,_e)),p.isBuffer(Y))return 0===Y.length?-1:I(ae,Y,W,_e,Ee);if("number"==typeof Y)return Y&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?Ee?Uint8Array.prototype.indexOf.call(ae,Y,W):Uint8Array.prototype.lastIndexOf.call(ae,Y,W):I(ae,[Y],W,_e,Ee);throw new TypeError("val must be string, number or Buffer")}function I(ae,Y,W,_e,Ee){var we,me=1,Te=ae.length,Ne=Y.length;if(void 0!==_e&&("ucs2"===(_e=String(_e).toLowerCase())||"ucs-2"===_e||"utf16le"===_e||"utf-16le"===_e)){if(ae.length<2||Y.length<2)return-1;me=2,Te/=2,Ne/=2,W/=2}function Ie(ze,ut){return 1===me?ze[ut]:ze.readUInt16BE(ut*me)}if(Ee){var ke=-1;for(we=W;we<Te;we++)if(Ie(ae,we)===Ie(Y,-1===ke?0:we-ke)){if(-1===ke&&(ke=we),we-ke+1===Ne)return ke*me}else-1!==ke&&(we-=we-ke),ke=-1}else for(W+Ne>Te&&(W=Te-Ne),we=W;we>=0;we--){for(var Re=!0,xe=0;xe<Ne;xe++)if(Ie(ae,we+xe)!==Ie(Y,xe)){Re=!1;break}if(Re)return we}return-1}function H(ae,Y,W,_e){W=Number(W)||0;var Ee=ae.length-W;_e?(_e=Number(_e))>Ee&&(_e=Ee):_e=Ee;var me=Y.length;if(me%2!=0)throw new TypeError("Invalid hex string");_e>me/2&&(_e=me/2);for(var Te=0;Te<_e;++Te){var Ne=parseInt(Y.substr(2*Te,2),16);if(isNaN(Ne))return Te;ae[W+Te]=Ne}return Te}function $(ae,Y,W,_e){return ye(A(Y,ae.length-W),ae,W,_e)}function z(ae,Y,W,_e){return ye(function U(ae){for(var Y=[],W=0;W<ae.length;++W)Y.push(255&ae.charCodeAt(W));return Y}(Y),ae,W,_e)}function q(ae,Y,W,_e){return z(ae,Y,W,_e)}function J(ae,Y,W,_e){return ye(te(Y),ae,W,_e)}function X(ae,Y,W,_e){return ye(function K(ae,Y){for(var W,_e,me=[],Te=0;Te<ae.length&&!((Y-=2)<0);++Te)_e=(W=ae.charCodeAt(Te))>>8,me.push(W%256),me.push(_e);return me}(Y,ae.length-W),ae,W,_e)}function V(ae,Y,W){return y.fromByteArray(0===Y&&W===ae.length?ae:ae.slice(Y,W))}function se(ae,Y,W){W=Math.min(ae.length,W);for(var _e=[],Ee=Y;Ee<W;){var Ie,we,ke,Re,me=ae[Ee],Te=null,Ne=me>239?4:me>223?3:me>191?2:1;if(Ee+Ne<=W)switch(Ne){case 1:me<128&&(Te=me);break;case 2:128==(192&(Ie=ae[Ee+1]))&&(Re=(31&me)<<6|63&Ie)>127&&(Te=Re);break;case 3:we=ae[Ee+2],128==(192&(Ie=ae[Ee+1]))&&128==(192&we)&&(Re=(15&me)<<12|(63&Ie)<<6|63&we)>2047&&(Re<55296||Re>57343)&&(Te=Re);break;case 4:we=ae[Ee+2],ke=ae[Ee+3],128==(192&(Ie=ae[Ee+1]))&&128==(192&we)&&128==(192&ke)&&(Re=(15&me)<<18|(63&Ie)<<12|(63&we)<<6|63&ke)>65535&&Re<1114112&&(Te=Re)}null===Te?(Te=65533,Ne=1):Te>65535&&(_e.push((Te-=65536)>>>10&1023|55296),Te=56320|1023&Te),_e.push(Te),Ee+=Ne}return function oe(ae){var Y=ae.length;if(Y<=Z)return String.fromCharCode.apply(String,ae);for(var W="",_e=0;_e<Y;)W+=String.fromCharCode.apply(String,ae.slice(_e,_e+=Z));return W}(_e)}k.Buffer=p,k.SlowBuffer=function R(ae){return+ae!=ae&&(ae=0),p.alloc(+ae)},k.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=void 0!==x.TYPED_ARRAY_SUPPORT?x.TYPED_ARRAY_SUPPORT:function D(){try{var ae=new Uint8Array(1);return ae.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===ae.foo()&&"function"==typeof ae.subarray&&0===ae.subarray(1,1).byteLength}catch{return!1}}(),k.kMaxLength=d(),p.poolSize=8192,p._augment=function(ae){return ae.__proto__=p.prototype,ae},p.from=function(ae,Y,W){return N(null,ae,Y,W)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(ae,Y,W){return function L(ae,Y,W,_e){return O(Y),Y<=0?v(ae,Y):void 0!==W?"string"==typeof _e?v(ae,Y).fill(W,_e):v(ae,Y).fill(W):v(ae,Y)}(null,ae,Y,W)},p.allocUnsafe=function(ae){return m(null,ae)},p.allocUnsafeSlow=function(ae){return m(null,ae)},p.isBuffer=function(Y){return!(null==Y||!Y._isBuffer)},p.compare=function(Y,W){if(!p.isBuffer(Y)||!p.isBuffer(W))throw new TypeError("Arguments must be Buffers");if(Y===W)return 0;for(var _e=Y.length,Ee=W.length,me=0,Te=Math.min(_e,Ee);me<Te;++me)if(Y[me]!==W[me]){_e=Y[me],Ee=W[me];break}return _e<Ee?-1:Ee<_e?1:0},p.isEncoding=function(Y){switch(String(Y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(Y,W){if(!T(Y))throw new TypeError('"list" argument must be an Array of Buffers');if(0===Y.length)return p.alloc(0);var _e;if(void 0===W)for(W=0,_e=0;_e<Y.length;++_e)W+=Y[_e].length;var Ee=p.allocUnsafe(W),me=0;for(_e=0;_e<Y.length;++_e){var Te=Y[_e];if(!p.isBuffer(Te))throw new TypeError('"list" argument must be an Array of Buffers');Te.copy(Ee,me),me+=Te.length}return Ee},p.byteLength=w,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var Y=this.length;if(Y%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var W=0;W<Y;W+=2)P(this,W,W+1);return this},p.prototype.swap32=function(){var Y=this.length;if(Y%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var W=0;W<Y;W+=4)P(this,W,W+3),P(this,W+1,W+2);return this},p.prototype.swap64=function(){var Y=this.length;if(Y%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var W=0;W<Y;W+=8)P(this,W,W+7),P(this,W+1,W+6),P(this,W+2,W+5),P(this,W+3,W+4);return this},p.prototype.toString=function(){var Y=0|this.length;return 0===Y?"":0===arguments.length?se(this,0,Y):b.apply(this,arguments)},p.prototype.equals=function(Y){if(!p.isBuffer(Y))throw new TypeError("Argument must be a Buffer");return this===Y||0===p.compare(this,Y)},p.prototype.inspect=function(){var Y="",W=k.INSPECT_MAX_BYTES;return this.length>0&&(Y=this.toString("hex",0,W).match(/.{2}/g).join(" "),this.length>W&&(Y+=" ... ")),"<Buffer "+Y+">"},p.prototype.compare=function(Y,W,_e,Ee,me){if(!p.isBuffer(Y))throw new TypeError("Argument must be a Buffer");if(void 0===W&&(W=0),void 0===_e&&(_e=Y?Y.length:0),void 0===Ee&&(Ee=0),void 0===me&&(me=this.length),W<0||_e>Y.length||Ee<0||me>this.length)throw new RangeError("out of range index");if(Ee>=me&&W>=_e)return 0;if(Ee>=me)return-1;if(W>=_e)return 1;if(this===Y)return 0;for(var Te=(me>>>=0)-(Ee>>>=0),Ne=(_e>>>=0)-(W>>>=0),Ie=Math.min(Te,Ne),we=this.slice(Ee,me),ke=Y.slice(W,_e),Re=0;Re<Ie;++Re)if(we[Re]!==ke[Re]){Te=we[Re],Ne=ke[Re];break}return Te<Ne?-1:Ne<Te?1:0},p.prototype.includes=function(Y,W,_e){return-1!==this.indexOf(Y,W,_e)},p.prototype.indexOf=function(Y,W,_e){return f(this,Y,W,_e,!0)},p.prototype.lastIndexOf=function(Y,W,_e){return f(this,Y,W,_e,!1)},p.prototype.write=function(Y,W,_e,Ee){if(void 0===W)Ee="utf8",_e=this.length,W=0;else if(void 0===_e&&"string"==typeof W)Ee=W,_e=this.length,W=0;else{if(!isFinite(W))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");W|=0,isFinite(_e)?(_e|=0,void 0===Ee&&(Ee="utf8")):(Ee=_e,_e=void 0)}var me=this.length-W;if((void 0===_e||_e>me)&&(_e=me),Y.length>0&&(_e<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ee||(Ee="utf8");for(var Te=!1;;)switch(Ee){case"hex":return H(this,Y,W,_e);case"utf8":case"utf-8":return $(this,Y,W,_e);case"ascii":return z(this,Y,W,_e);case"latin1":case"binary":return q(this,Y,W,_e);case"base64":return J(this,Y,W,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,Y,W,_e);default:if(Te)throw new TypeError("Unknown encoding: "+Ee);Ee=(""+Ee).toLowerCase(),Te=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;function he(ae,Y,W){var _e="";W=Math.min(ae.length,W);for(var Ee=Y;Ee<W;++Ee)_e+=String.fromCharCode(127&ae[Ee]);return _e}function ve(ae,Y,W){var _e="";W=Math.min(ae.length,W);for(var Ee=Y;Ee<W;++Ee)_e+=String.fromCharCode(ae[Ee]);return _e}function re(ae,Y,W){var _e=ae.length;(!Y||Y<0)&&(Y=0),(!W||W<0||W>_e)&&(W=_e);for(var Ee="",me=Y;me<W;++me)Ee+=_(ae[me]);return Ee}function ge(ae,Y,W){for(var _e=ae.slice(Y,W),Ee="",me=0;me<_e.length;me+=2)Ee+=String.fromCharCode(_e[me]+256*_e[me+1]);return Ee}function ie(ae,Y,W){if(ae%1!=0||ae<0)throw new RangeError("offset is not uint");if(ae+Y>W)throw new RangeError("Trying to access beyond buffer length")}function de(ae,Y,W,_e,Ee,me){if(!p.isBuffer(ae))throw new TypeError('"buffer" argument must be a Buffer instance');if(Y>Ee||Y<me)throw new RangeError('"value" argument is out of bounds');if(W+_e>ae.length)throw new RangeError("Index out of range")}function ue(ae,Y,W,_e){Y<0&&(Y=65535+Y+1);for(var Ee=0,me=Math.min(ae.length-W,2);Ee<me;++Ee)ae[W+Ee]=(Y&255<<8*(_e?Ee:1-Ee))>>>8*(_e?Ee:1-Ee)}function le(ae,Y,W,_e){Y<0&&(Y=4294967295+Y+1);for(var Ee=0,me=Math.min(ae.length-W,4);Ee<me;++Ee)ae[W+Ee]=Y>>>8*(_e?Ee:3-Ee)&255}function ce(ae,Y,W,_e,Ee,me){if(W+_e>ae.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function ne(ae,Y,W,_e,Ee){return Ee||ce(ae,0,W,4),M.write(ae,Y,W,_e,23,4),W+4}function pe(ae,Y,W,_e,Ee){return Ee||ce(ae,0,W,8),M.write(ae,Y,W,_e,52,8),W+8}p.prototype.slice=function(Y,W){var Ee,_e=this.length;if((Y=~~Y)<0?(Y+=_e)<0&&(Y=0):Y>_e&&(Y=_e),(W=void 0===W?_e:~~W)<0?(W+=_e)<0&&(W=0):W>_e&&(W=_e),W<Y&&(W=Y),p.TYPED_ARRAY_SUPPORT)(Ee=this.subarray(Y,W)).__proto__=p.prototype;else{var me=W-Y;Ee=new p(me,void 0);for(var Te=0;Te<me;++Te)Ee[Te]=this[Te+Y]}return Ee},p.prototype.readUIntLE=function(Y,W,_e){Y|=0,W|=0,_e||ie(Y,W,this.length);for(var Ee=this[Y],me=1,Te=0;++Te<W&&(me*=256);)Ee+=this[Y+Te]*me;return Ee},p.prototype.readUIntBE=function(Y,W,_e){Y|=0,W|=0,_e||ie(Y,W,this.length);for(var Ee=this[Y+--W],me=1;W>0&&(me*=256);)Ee+=this[Y+--W]*me;return Ee},p.prototype.readUInt8=function(Y,W){return W||ie(Y,1,this.length),this[Y]},p.prototype.readUInt16LE=function(Y,W){return W||ie(Y,2,this.length),this[Y]|this[Y+1]<<8},p.prototype.readUInt16BE=function(Y,W){return W||ie(Y,2,this.length),this[Y]<<8|this[Y+1]},p.prototype.readUInt32LE=function(Y,W){return W||ie(Y,4,this.length),(this[Y]|this[Y+1]<<8|this[Y+2]<<16)+16777216*this[Y+3]},p.prototype.readUInt32BE=function(Y,W){return W||ie(Y,4,this.length),16777216*this[Y]+(this[Y+1]<<16|this[Y+2]<<8|this[Y+3])},p.prototype.readIntLE=function(Y,W,_e){Y|=0,W|=0,_e||ie(Y,W,this.length);for(var Ee=this[Y],me=1,Te=0;++Te<W&&(me*=256);)Ee+=this[Y+Te]*me;return Ee>=(me*=128)&&(Ee-=Math.pow(2,8*W)),Ee},p.prototype.readIntBE=function(Y,W,_e){Y|=0,W|=0,_e||ie(Y,W,this.length);for(var Ee=W,me=1,Te=this[Y+--Ee];Ee>0&&(me*=256);)Te+=this[Y+--Ee]*me;return Te>=(me*=128)&&(Te-=Math.pow(2,8*W)),Te},p.prototype.readInt8=function(Y,W){return W||ie(Y,1,this.length),128&this[Y]?-1*(255-this[Y]+1):this[Y]},p.prototype.readInt16LE=function(Y,W){W||ie(Y,2,this.length);var _e=this[Y]|this[Y+1]<<8;return 32768&_e?4294901760|_e:_e},p.prototype.readInt16BE=function(Y,W){W||ie(Y,2,this.length);var _e=this[Y+1]|this[Y]<<8;return 32768&_e?4294901760|_e:_e},p.prototype.readInt32LE=function(Y,W){return W||ie(Y,4,this.length),this[Y]|this[Y+1]<<8|this[Y+2]<<16|this[Y+3]<<24},p.prototype.readInt32BE=function(Y,W){return W||ie(Y,4,this.length),this[Y]<<24|this[Y+1]<<16|this[Y+2]<<8|this[Y+3]},p.prototype.readFloatLE=function(Y,W){return W||ie(Y,4,this.length),M.read(this,Y,!0,23,4)},p.prototype.readFloatBE=function(Y,W){return W||ie(Y,4,this.length),M.read(this,Y,!1,23,4)},p.prototype.readDoubleLE=function(Y,W){return W||ie(Y,8,this.length),M.read(this,Y,!0,52,8)},p.prototype.readDoubleBE=function(Y,W){return W||ie(Y,8,this.length),M.read(this,Y,!1,52,8)},p.prototype.writeUIntLE=function(Y,W,_e,Ee){Y=+Y,W|=0,_e|=0,Ee||de(this,Y,W,_e,Math.pow(2,8*_e)-1,0);var Te=1,Ne=0;for(this[W]=255&Y;++Ne<_e&&(Te*=256);)this[W+Ne]=Y/Te&255;return W+_e},p.prototype.writeUIntBE=function(Y,W,_e,Ee){Y=+Y,W|=0,_e|=0,Ee||de(this,Y,W,_e,Math.pow(2,8*_e)-1,0);var Te=_e-1,Ne=1;for(this[W+Te]=255&Y;--Te>=0&&(Ne*=256);)this[W+Te]=Y/Ne&255;return W+_e},p.prototype.writeUInt8=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,1,255,0),p.TYPED_ARRAY_SUPPORT||(Y=Math.floor(Y)),this[W]=255&Y,W+1},p.prototype.writeUInt16LE=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[W]=255&Y,this[W+1]=Y>>>8):ue(this,Y,W,!0),W+2},p.prototype.writeUInt16BE=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[W]=Y>>>8,this[W+1]=255&Y):ue(this,Y,W,!1),W+2},p.prototype.writeUInt32LE=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[W+3]=Y>>>24,this[W+2]=Y>>>16,this[W+1]=Y>>>8,this[W]=255&Y):le(this,Y,W,!0),W+4},p.prototype.writeUInt32BE=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[W]=Y>>>24,this[W+1]=Y>>>16,this[W+2]=Y>>>8,this[W+3]=255&Y):le(this,Y,W,!1),W+4},p.prototype.writeIntLE=function(Y,W,_e,Ee){if(Y=+Y,W|=0,!Ee){var me=Math.pow(2,8*_e-1);de(this,Y,W,_e,me-1,-me)}var Te=0,Ne=1,Ie=0;for(this[W]=255&Y;++Te<_e&&(Ne*=256);)Y<0&&0===Ie&&0!==this[W+Te-1]&&(Ie=1),this[W+Te]=(Y/Ne>>0)-Ie&255;return W+_e},p.prototype.writeIntBE=function(Y,W,_e,Ee){if(Y=+Y,W|=0,!Ee){var me=Math.pow(2,8*_e-1);de(this,Y,W,_e,me-1,-me)}var Te=_e-1,Ne=1,Ie=0;for(this[W+Te]=255&Y;--Te>=0&&(Ne*=256);)Y<0&&0===Ie&&0!==this[W+Te+1]&&(Ie=1),this[W+Te]=(Y/Ne>>0)-Ie&255;return W+_e},p.prototype.writeInt8=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,1,127,-128),p.TYPED_ARRAY_SUPPORT||(Y=Math.floor(Y)),Y<0&&(Y=255+Y+1),this[W]=255&Y,W+1},p.prototype.writeInt16LE=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[W]=255&Y,this[W+1]=Y>>>8):ue(this,Y,W,!0),W+2},p.prototype.writeInt16BE=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[W]=Y>>>8,this[W+1]=255&Y):ue(this,Y,W,!1),W+2},p.prototype.writeInt32LE=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[W]=255&Y,this[W+1]=Y>>>8,this[W+2]=Y>>>16,this[W+3]=Y>>>24):le(this,Y,W,!0),W+4},p.prototype.writeInt32BE=function(Y,W,_e){return Y=+Y,W|=0,_e||de(this,Y,W,4,2147483647,-2147483648),Y<0&&(Y=4294967295+Y+1),p.TYPED_ARRAY_SUPPORT?(this[W]=Y>>>24,this[W+1]=Y>>>16,this[W+2]=Y>>>8,this[W+3]=255&Y):le(this,Y,W,!1),W+4},p.prototype.writeFloatLE=function(Y,W,_e){return ne(this,Y,W,!0,_e)},p.prototype.writeFloatBE=function(Y,W,_e){return ne(this,Y,W,!1,_e)},p.prototype.writeDoubleLE=function(Y,W,_e){return pe(this,Y,W,!0,_e)},p.prototype.writeDoubleBE=function(Y,W,_e){return pe(this,Y,W,!1,_e)},p.prototype.copy=function(Y,W,_e,Ee){if(_e||(_e=0),!Ee&&0!==Ee&&(Ee=this.length),W>=Y.length&&(W=Y.length),W||(W=0),Ee>0&&Ee<_e&&(Ee=_e),Ee===_e||0===Y.length||0===this.length)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("sourceStart out of bounds");if(Ee<0)throw new RangeError("sourceEnd out of bounds");Ee>this.length&&(Ee=this.length),Y.length-W<Ee-_e&&(Ee=Y.length-W+_e);var Te,me=Ee-_e;if(this===Y&&_e<W&&W<Ee)for(Te=me-1;Te>=0;--Te)Y[Te+W]=this[Te+_e];else if(me<1e3||!p.TYPED_ARRAY_SUPPORT)for(Te=0;Te<me;++Te)Y[Te+W]=this[Te+_e];else Uint8Array.prototype.set.call(Y,this.subarray(_e,_e+me),W);return me},p.prototype.fill=function(Y,W,_e,Ee){if("string"==typeof Y){if("string"==typeof W?(Ee=W,W=0,_e=this.length):"string"==typeof _e&&(Ee=_e,_e=this.length),1===Y.length){var me=Y.charCodeAt(0);me<256&&(Y=me)}if(void 0!==Ee&&"string"!=typeof Ee)throw new TypeError("encoding must be a string");if("string"==typeof Ee&&!p.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee)}else"number"==typeof Y&&(Y&=255);if(W<0||this.length<W||this.length<_e)throw new RangeError("Out of range index");if(_e<=W)return this;var Te;if(W>>>=0,_e=void 0===_e?this.length:_e>>>0,Y||(Y=0),"number"==typeof Y)for(Te=W;Te<_e;++Te)this[Te]=Y;else{var Ne=p.isBuffer(Y)?Y:A(new p(Y,Ee).toString()),Ie=Ne.length;for(Te=0;Te<_e-W;++Te)this[Te+W]=Ne[Te%Ie]}return this};var ee=/[^+\/0-9A-Za-z-_]/g;function _(ae){return ae<16?"0"+ae.toString(16):ae.toString(16)}function A(ae,Y){Y=Y||1/0;for(var W,_e=ae.length,Ee=null,me=[],Te=0;Te<_e;++Te){if((W=ae.charCodeAt(Te))>55295&&W<57344){if(!Ee){if(W>56319){(Y-=3)>-1&&me.push(239,191,189);continue}if(Te+1===_e){(Y-=3)>-1&&me.push(239,191,189);continue}Ee=W;continue}if(W<56320){(Y-=3)>-1&&me.push(239,191,189),Ee=W;continue}W=65536+(Ee-55296<<10|W-56320)}else Ee&&(Y-=3)>-1&&me.push(239,191,189);if(Ee=null,W<128){if((Y-=1)<0)break;me.push(W)}else if(W<2048){if((Y-=2)<0)break;me.push(W>>6|192,63&W|128)}else if(W<65536){if((Y-=3)<0)break;me.push(W>>12|224,W>>6&63|128,63&W|128)}else{if(!(W<1114112))throw new Error("Invalid code point");if((Y-=4)<0)break;me.push(W>>18|240,W>>12&63|128,W>>6&63|128,63&W|128)}}return me}function te(ae){return y.toByteArray(function G(ae){if((ae=function j(ae){return ae.trim?ae.trim():ae.replace(/^\s+|\s+$/g,"")}(ae).replace(ee,"")).length<2)return"";for(;ae.length%4!=0;)ae+="=";return ae}(ae))}function ye(ae,Y,W,_e){for(var Ee=0;Ee<_e&&!(Ee+W>=Y.length||Ee>=ae.length);++Ee)Y[Ee+W]=ae[Ee];return Ee}}).call(this,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/events/events.js":function(Oe,k,u){"use strict";var M,x="object"==typeof Reflect?Reflect:null,y=x&&"function"==typeof x.apply?x.apply:function(f,I,H){return Function.prototype.apply.call(f,I,H)};M=x&&"function"==typeof x.ownKeys?x.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var D=Number.isNaN||function(f){return f!=f};function d(){d.init.call(this)}Oe.exports=d,Oe.exports.once=function R(P,f){return new Promise(function(I,H){function $(q){P.removeListener(f,z),H(q)}function z(){"function"==typeof P.removeListener&&P.removeListener("error",$),I([].slice.call(arguments))}b(P,f,z,{once:!0}),"error"!==f&&function w(P,f,I){"function"==typeof P.on&&b(P,"error",f,I)}(P,$,{once:!0})})},d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var v=10;function p(P){if("function"!=typeof P)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}function N(P){return void 0===P._maxListeners?d.defaultMaxListeners:P._maxListeners}function O(P,f,I,H){var $,z,q;if(p(I),void 0===(z=P._events)?(z=P._events=Object.create(null),P._eventsCount=0):(void 0!==z.newListener&&(P.emit("newListener",f,I.listener?I.listener:I),z=P._events),q=z[f]),void 0===q)q=z[f]=I,++P._eventsCount;else if("function"==typeof q?q=z[f]=H?[I,q]:[q,I]:H?q.unshift(I):q.push(I),($=N(P))>0&&q.length>$&&!q.warned){q.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=P,J.type=f,J.count=q.length,function T(P){console&&console.warn&&console.warn(P)}(J)}return P}function L(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(P,f,I){var H={fired:!1,wrapFn:void 0,target:P,type:f,listener:I},$=L.bind(H);return $.listener=I,H.wrapFn=$,$}function h(P,f,I){var H=P._events;if(void 0===H)return[];var $=H[f];return void 0===$?[]:"function"==typeof $?I?[$.listener||$]:[$]:I?function F(P){for(var f=new Array(P.length),I=0;I<f.length;++I)f[I]=P[I].listener||P[I];return f}($):S($,$.length)}function g(P){var f=this._events;if(void 0!==f){var I=f[P];if("function"==typeof I)return 1;if(void 0!==I)return I.length}return 0}function S(P,f){for(var I=new Array(f),H=0;H<f;++H)I[H]=P[H];return I}function b(P,f,I,H){if("function"==typeof P.on)H.once?P.once(f,I):P.on(f,I);else{if("function"!=typeof P.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P);P.addEventListener(f,function $(z){H.once&&P.removeEventListener(f,$),I(z)})}}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return v},set:function(P){if("number"!=typeof P||P<0||D(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");v=P}}),d.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(f){if("number"!=typeof f||f<0||D(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},d.prototype.getMaxListeners=function(){return N(this)},d.prototype.emit=function(f){for(var I=[],H=1;H<arguments.length;H++)I.push(arguments[H]);var $="error"===f,z=this._events;if(void 0!==z)$=$&&void 0===z.error;else if(!$)return!1;if($){var q;if(I.length>0&&(q=I[0]),q instanceof Error)throw q;var J=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw J.context=q,J}var X=z[f];if(void 0===X)return!1;if("function"==typeof X)y(X,this,I);else{var V=X.length,se=S(X,V);for(H=0;H<V;++H)y(se[H],this,I)}return!0},d.prototype.on=d.prototype.addListener=function(f,I){return O(this,f,I,!1)},d.prototype.prependListener=function(f,I){return O(this,f,I,!0)},d.prototype.once=function(f,I){return p(I),this.on(f,m(this,f,I)),this},d.prototype.prependOnceListener=function(f,I){return p(I),this.prependListener(f,m(this,f,I)),this},d.prototype.off=d.prototype.removeListener=function(f,I){var H,$,z,q,J;if(p(I),void 0===($=this._events))return this;if(void 0===(H=$[f]))return this;if(H===I||H.listener===I)0==--this._eventsCount?this._events=Object.create(null):(delete $[f],$.removeListener&&this.emit("removeListener",f,H.listener||I));else if("function"!=typeof H){for(z=-1,q=H.length-1;q>=0;q--)if(H[q]===I||H[q].listener===I){J=H[q].listener,z=q;break}if(z<0)return this;0===z?H.shift():function C(P,f){for(;f+1<P.length;f++)P[f]=P[f+1];P.pop()}(H,z),1===H.length&&($[f]=H[0]),void 0!==$.removeListener&&this.emit("removeListener",f,J||I)}return this},d.prototype.removeAllListeners=function(f){var I,H,$;if(void 0===(H=this._events))return this;if(void 0===H.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==H[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete H[f]),this;if(0===arguments.length){var q,z=Object.keys(H);for($=0;$<z.length;++$)"removeListener"!==(q=z[$])&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(I=H[f]))this.removeListener(f,I);else if(void 0!==I)for($=I.length-1;$>=0;$--)this.removeListener(f,I[$]);return this},d.prototype.listeners=function(f){return h(this,f,!0)},d.prototype.rawListeners=function(f){return h(this,f,!1)},d.listenerCount=function(P,f){return"function"==typeof P.listenerCount?P.listenerCount(f):g.call(P,f)},d.prototype.listenerCount=g,d.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]}},"./node_modules/node-libs-browser/node_modules/timers-browserify/main.js":function(Oe,k,u){(function(x){var y=typeof x<"u"&&x||typeof self<"u"&&self||window,M=Function.prototype.apply;function T(D,d){this._id=D,this._clearFn=d}k.setTimeout=function(){return new T(M.call(setTimeout,y,arguments),clearTimeout)},k.setInterval=function(){return new T(M.call(setInterval,y,arguments),clearInterval)},k.clearTimeout=k.clearInterval=function(D){D&&D.close()},T.prototype.unref=T.prototype.ref=function(){},T.prototype.close=function(){this._clearFn.call(y,this._id)},k.enroll=function(D,d){clearTimeout(D._idleTimeoutId),D._idleTimeout=d},k.unenroll=function(D){clearTimeout(D._idleTimeoutId),D._idleTimeout=-1},k._unrefActive=k.active=function(D){clearTimeout(D._idleTimeoutId);var d=D._idleTimeout;d>=0&&(D._idleTimeoutId=setTimeout(function(){D._onTimeout&&D._onTimeout()},d))},u("./node_modules/setimmediate/setImmediate.js"),k.setImmediate=typeof self<"u"&&self.setImmediate||typeof x<"u"&&x.setImmediate||this&&this.setImmediate,k.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof x<"u"&&x.clearImmediate||this&&this.clearImmediate}).call(this,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/path-browserify/index.js":function(Oe,k,u){(function(x){function y(d,v){for(var p=0,N=d.length-1;N>=0;N--){var O=d[N];"."===O?d.splice(N,1):".."===O?(d.splice(N,1),p++):p&&(d.splice(N,1),p--)}if(v)for(;p--;p)d.unshift("..");return d}function T(d,v){if(d.filter)return d.filter(v);for(var p=[],N=0;N<d.length;N++)v(d[N],N,d)&&p.push(d[N]);return p}k.resolve=function(){for(var d="",v=!1,p=arguments.length-1;p>=-1&&!v;p--){var N=p>=0?arguments[p]:x.cwd();if("string"!=typeof N)throw new TypeError("Arguments to path.resolve must be strings");N&&(d=N+"/"+d,v="/"===N.charAt(0))}return(v?"/":"")+(d=y(T(d.split("/"),function(O){return!!O}),!v).join("/"))||"."},k.normalize=function(d){var v=k.isAbsolute(d),p="/"===D(d,-1);return!(d=y(T(d.split("/"),function(N){return!!N}),!v).join("/"))&&!v&&(d="."),d&&p&&(d+="/"),(v?"/":"")+d},k.isAbsolute=function(d){return"/"===d.charAt(0)},k.join=function(){var d=Array.prototype.slice.call(arguments,0);return k.normalize(T(d,function(v,p){if("string"!=typeof v)throw new TypeError("Arguments to path.join must be strings");return v}).join("/"))},k.relative=function(d,v){function p(S){for(var C=0;C<S.length&&""===S[C];C++);for(var F=S.length-1;F>=0&&""===S[F];F--);return C>F?[]:S.slice(C,F-C+1)}d=k.resolve(d).substr(1),v=k.resolve(v).substr(1);for(var N=p(d.split("/")),O=p(v.split("/")),L=Math.min(N.length,O.length),m=L,h=0;h<L;h++)if(N[h]!==O[h]){m=h;break}var g=[];for(h=m;h<N.length;h++)g.push("..");return(g=g.concat(O.slice(m))).join("/")},k.sep="/",k.delimiter=":",k.dirname=function(d){if("string"!=typeof d&&(d+=""),0===d.length)return".";for(var v=d.charCodeAt(0),p=47===v,N=-1,O=!0,L=d.length-1;L>=1;--L)if(47===(v=d.charCodeAt(L))){if(!O){N=L;break}}else O=!1;return-1===N?p?"/":".":p&&1===N?"/":d.slice(0,N)},k.basename=function(d,v){var p=function M(d){"string"!=typeof d&&(d+="");var O,v=0,p=-1,N=!0;for(O=d.length-1;O>=0;--O)if(47===d.charCodeAt(O)){if(!N){v=O+1;break}}else-1===p&&(N=!1,p=O+1);return-1===p?"":d.slice(v,p)}(d);return v&&p.substr(-1*v.length)===v&&(p=p.substr(0,p.length-v.length)),p},k.extname=function(d){"string"!=typeof d&&(d+="");for(var v=-1,p=0,N=-1,O=!0,L=0,m=d.length-1;m>=0;--m){var h=d.charCodeAt(m);if(47!==h)-1===N&&(O=!1,N=m+1),46===h?-1===v?v=m:1!==L&&(L=1):-1!==v&&(L=-1);else if(!O){p=m+1;break}}return-1===v||-1===N||0===L||1===L&&v===N-1&&v===p+1?"":d.slice(v,N)};var D=function(d,v,p){return d.substr(v,p)}}).call(this,u("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(Oe,k,u){"use strict";(function(x){Oe.exports=!x.version||0===x.version.indexOf("v0.")||0===x.version.indexOf("v1.")&&0!==x.version.indexOf("v1.8.")?{nextTick:function y(M,T,D,d){if("function"!=typeof M)throw new TypeError('"callback" argument must be a function');var p,N,v=arguments.length;switch(v){case 0:case 1:return x.nextTick(M);case 2:return x.nextTick(function(){M.call(null,T)});case 3:return x.nextTick(function(){M.call(null,T,D)});case 4:return x.nextTick(function(){M.call(null,T,D,d)});default:for(p=new Array(v-1),N=0;N<p.length;)p[N++]=arguments[N];return x.nextTick(function(){M.apply(null,p)})}}}:x}).call(this,u("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(Oe,k){var x,y,u=Oe.exports={};function M(){throw new Error("setTimeout has not been defined")}function T(){throw new Error("clearTimeout has not been defined")}function D(S){if(x===setTimeout)return setTimeout(S,0);if((x===M||!x)&&setTimeout)return x=setTimeout,setTimeout(S,0);try{return x(S,0)}catch{try{return x.call(null,S,0)}catch{return x.call(this,S,0)}}}!function(){try{x="function"==typeof setTimeout?setTimeout:M}catch{x=M}try{y="function"==typeof clearTimeout?clearTimeout:T}catch{y=T}}();var N,v=[],p=!1,O=-1;function L(){!p||!N||(p=!1,N.length?v=N.concat(v):O=-1,v.length&&m())}function m(){if(!p){var S=D(L);p=!0;for(var C=v.length;C;){for(N=v,v=[];++O<C;)N&&N[O].run();O=-1,C=v.length}N=null,p=!1,function d(S){if(y===clearTimeout)return clearTimeout(S);if((y===T||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(S);try{return y(S)}catch{try{return y.call(null,S)}catch{return y.call(this,S)}}}(S)}}function h(S,C){this.fun=S,this.array=C}function g(){}u.nextTick=function(S){var C=new Array(arguments.length-1);if(arguments.length>1)for(var F=1;F<arguments.length;F++)C[F-1]=arguments[F];v.push(new h(S,C)),1===v.length&&!p&&D(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=g,u.addListener=g,u.once=g,u.off=g,u.removeListener=g,u.removeAllListeners=g,u.emit=g,u.prependListener=g,u.prependOnceListener=g,u.listeners=function(S){return[]},u.binding=function(S){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(S){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(Oe,k,u){Oe.exports=u("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(Oe,k,u){"use strict";var x=u("./node_modules/process-nextick-args/index.js"),y=Object.keys||function(m){var h=[];for(var g in m)h.push(g);return h};Oe.exports=N;var M=u("./node_modules/core-util-is/lib/util.js");M.inherits=u("./node_modules/inherits/inherits_browser.js");var T=u("./node_modules/readable-stream/lib/_stream_readable.js"),D=u("./node_modules/readable-stream/lib/_stream_writable.js");M.inherits(N,T);for(var d=y(D.prototype),v=0;v<d.length;v++){var p=d[v];N.prototype[p]||(N.prototype[p]=D.prototype[p])}function N(m){if(!(this instanceof N))return new N(m);T.call(this,m),D.call(this,m),m&&!1===m.readable&&(this.readable=!1),m&&!1===m.writable&&(this.writable=!1),this.allowHalfOpen=!0,m&&!1===m.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",O)}function O(){this.allowHalfOpen||this._writableState.ended||x.nextTick(L,this)}function L(m){m.end()}Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(N.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(m){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),N.prototype._destroy=function(m,h){this.push(null),this.end(),x.nextTick(h,m)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(Oe,k,u){"use strict";Oe.exports=M;var x=u("./node_modules/readable-stream/lib/_stream_transform.js"),y=u("./node_modules/core-util-is/lib/util.js");function M(T){if(!(this instanceof M))return new M(T);x.call(this,T)}y.inherits=u("./node_modules/inherits/inherits_browser.js"),y.inherits(M,x),M.prototype._transform=function(T,D,d){d(null,T)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(Oe,k,u){"use strict";(function(x,y){var M=u("./node_modules/process-nextick-args/index.js");Oe.exports=f;var D,T=u("./node_modules/isarray/index.js");f.ReadableState=P,u("./node_modules/node-libs-browser/node_modules/events/events.js");var v=function(j,_){return j.listeners(_).length},p=u("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),N=u("./node_modules/safe-buffer/index.js").Buffer,O=x.Uint8Array||function(){};var h=u("./node_modules/core-util-is/lib/util.js");h.inherits=u("./node_modules/inherits/inherits_browser.js");var g=u(0),S=void 0;S=g&&g.debuglog?g.debuglog("stream"):function(){};var R,C=u("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),F=u("./node_modules/readable-stream/lib/internal/streams/destroy.js");h.inherits(f,p);var w=["error","close","destroy","pause","resume"];function P(j,_){var A=_ instanceof(D=D||u("./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!(j=j||{}).objectMode,A&&(this.objectMode=this.objectMode||!!j.readableObjectMode);var U=j.highWaterMark,K=j.readableHighWaterMark;this.highWaterMark=U||0===U?U:A&&(K||0===K)?K:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new C,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=j.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,j.encoding&&(R||(R=u("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new R(j.encoding),this.encoding=j.encoding)}function f(j){if(D=D||u("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof f))return new f(j);this._readableState=new P(j,this),this.readable=!0,j&&("function"==typeof j.read&&(this._read=j.read),"function"==typeof j.destroy&&(this._destroy=j.destroy)),p.call(this)}function I(j,_,A,U,K){var ye,te=j._readableState;return null===_?(te.reading=!1,function V(j,_){if(!_.ended){if(_.decoder){var A=_.decoder.end();A&&A.length&&(_.buffer.push(A),_.length+=_.objectMode?1:A.length)}_.ended=!0,se(j)}}(j,te)):(K||(ye=function $(j,_){var A;return!function m(j){return N.isBuffer(j)||j instanceof O}(_)&&"string"!=typeof _&&void 0!==_&&!j.objectMode&&(A=new TypeError("Invalid non-string/buffer chunk")),A}(te,_)),ye?j.emit("error",ye):te.objectMode||_&&_.length>0?("string"!=typeof _&&!te.objectMode&&Object.getPrototypeOf(_)!==N.prototype&&(_=function L(j){return N.from(j)}(_)),U?te.endEmitted?j.emit("error",new Error("stream.unshift() after end event")):H(j,te,_,!0):te.ended?j.emit("error",new Error("stream.push() after EOF")):(te.reading=!1,te.decoder&&!A?(_=te.decoder.write(_),te.objectMode||0!==_.length?H(j,te,_,!1):oe(j,te)):H(j,te,_,!1))):U||(te.reading=!1)),function z(j){return!j.ended&&(j.needReadable||j.length<j.highWaterMark||0===j.length)}(te)}function H(j,_,A,U){_.flowing&&0===_.length&&!_.sync?(j.emit("data",A),j.read(0)):(_.length+=_.objectMode?1:A.length,U?_.buffer.unshift(A):_.buffer.push(A),_.needReadable&&se(j)),oe(j,_)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(j){!this._readableState||(this._readableState.destroyed=j)}}),f.prototype.destroy=F.destroy,f.prototype._undestroy=F.undestroy,f.prototype._destroy=function(j,_){this.push(null),_(j)},f.prototype.push=function(j,_){var U,A=this._readableState;return A.objectMode?U=!0:"string"==typeof j&&((_=_||A.defaultEncoding)!==A.encoding&&(j=N.from(j,_),_=""),U=!0),I(this,j,_,!1,U)},f.prototype.unshift=function(j){return I(this,j,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(j){return R||(R=u("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new R(j),this._readableState.encoding=j,this};var q=8388608;function X(j,_){return j<=0||0===_.length&&_.ended?0:_.objectMode?1:j!=j?_.flowing&&_.length?_.buffer.head.data.length:_.length:(j>_.highWaterMark&&(_.highWaterMark=function J(j){return j>=q?j=q:(j--,j|=j>>>1,j|=j>>>2,j|=j>>>4,j|=j>>>8,j|=j>>>16,j++),j}(j)),j<=_.length?j:_.ended?_.length:(_.needReadable=!0,0))}function se(j){var _=j._readableState;_.needReadable=!1,_.emittedReadable||(S("emitReadable",_.flowing),_.emittedReadable=!0,_.sync?M.nextTick(Z,j):Z(j))}function Z(j){S("emit readable"),j.emit("readable"),de(j)}function oe(j,_){_.readingMore||(_.readingMore=!0,M.nextTick(he,j,_))}function he(j,_){for(var A=_.length;!_.reading&&!_.flowing&&!_.ended&&_.length<_.highWaterMark&&(S("maybeReadMore read 0"),j.read(0),A!==_.length);)A=_.length;_.readingMore=!1}function re(j){S("readable nexttick read 0"),j.read(0)}function ie(j,_){_.reading||(S("resume read 0"),j.read(0)),_.resumeScheduled=!1,_.awaitDrain=0,j.emit("resume"),de(j),_.flowing&&!_.reading&&j.read(0)}function de(j){var _=j._readableState;for(S("flow",_.flowing);_.flowing&&null!==j.read(););}function ue(j,_){return 0===_.length?null:(_.objectMode?A=_.buffer.shift():!j||j>=_.length?(A=_.decoder?_.buffer.join(""):1===_.buffer.length?_.buffer.head.data:_.buffer.concat(_.length),_.buffer.clear()):A=function le(j,_,A){var U;return j<_.head.data.length?(U=_.head.data.slice(0,j),_.head.data=_.head.data.slice(j)):U=j===_.head.data.length?_.shift():A?function ce(j,_){var A=_.head,U=1,K=A.data;for(j-=K.length;A=A.next;){var te=A.data,ye=j>te.length?te.length:j;if(K+=ye===te.length?te:te.slice(0,j),0==(j-=ye)){ye===te.length?(++U,_.head=A.next?A.next:_.tail=null):(_.head=A,A.data=te.slice(ye));break}++U}return _.length-=U,K}(j,_):function ne(j,_){var A=N.allocUnsafe(j),U=_.head,K=1;for(U.data.copy(A),j-=U.data.length;U=U.next;){var te=U.data,ye=j>te.length?te.length:j;if(te.copy(A,A.length-j,0,ye),0==(j-=ye)){ye===te.length?(++K,_.head=U.next?U.next:_.tail=null):(_.head=U,U.data=te.slice(ye));break}++K}return _.length-=K,A}(j,_),U}(j,_.buffer,_.decoder),A);var A}function pe(j){var _=j._readableState;if(_.length>0)throw new Error('"endReadable()" called on non-empty stream');_.endEmitted||(_.ended=!0,M.nextTick(ee,_,j))}function ee(j,_){!j.endEmitted&&0===j.length&&(j.endEmitted=!0,_.readable=!1,_.emit("end"))}function G(j,_){for(var A=0,U=j.length;A<U;A++)if(j[A]===_)return A;return-1}f.prototype.read=function(j){S("read",j),j=parseInt(j,10);var _=this._readableState,A=j;if(0!==j&&(_.emittedReadable=!1),0===j&&_.needReadable&&(_.length>=_.highWaterMark||_.ended))return S("read: emitReadable",_.length,_.ended),0===_.length&&_.ended?pe(this):se(this),null;if(0===(j=X(j,_))&&_.ended)return 0===_.length&&pe(this),null;var K,U=_.needReadable;return S("need readable",U),(0===_.length||_.length-j<_.highWaterMark)&&S("length less than watermark",U=!0),_.ended||_.reading?S("reading or ended",U=!1):U&&(S("do read"),_.reading=!0,_.sync=!0,0===_.length&&(_.needReadable=!0),this._read(_.highWaterMark),_.sync=!1,_.reading||(j=X(A,_))),null===(K=j>0?ue(j,_):null)?(_.needReadable=!0,j=0):_.length-=j,0===_.length&&(_.ended||(_.needReadable=!0),A!==j&&_.ended&&pe(this)),null!==K&&this.emit("data",K),K},f.prototype._read=function(j){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(j,_){var A=this,U=this._readableState;switch(U.pipesCount){case 0:U.pipes=j;break;case 1:U.pipes=[U.pipes,j];break;default:U.pipes.push(j)}U.pipesCount+=1,S("pipe count=%d opts=%j",U.pipesCount,_);var te=_&&!1===_.end||j===y.stdout||j===y.stderr?Ie:Se;function ye(we,ke){S("onunpipe"),we===A&&ke&&!1===ke.hasUnpiped&&(ke.hasUnpiped=!0,function W(){S("cleanup"),j.removeListener("close",Te),j.removeListener("finish",Ne),j.removeListener("drain",ae),j.removeListener("error",me),j.removeListener("unpipe",ye),A.removeListener("end",Se),A.removeListener("end",Ie),A.removeListener("data",Ee),Y=!0,U.awaitDrain&&(!j._writableState||j._writableState.needDrain)&&ae()}())}function Se(){S("onend"),j.end()}U.endEmitted?M.nextTick(te):A.once("end",te),j.on("unpipe",ye);var ae=function ve(j){return function(){var _=j._readableState;S("pipeOnDrain",_.awaitDrain),_.awaitDrain&&_.awaitDrain--,0===_.awaitDrain&&v(j,"data")&&(_.flowing=!0,de(j))}}(A);j.on("drain",ae);var Y=!1;var _e=!1;function Ee(we){S("ondata"),_e=!1,!1===j.write(we)&&!_e&&((1===U.pipesCount&&U.pipes===j||U.pipesCount>1&&-1!==G(U.pipes,j))&&!Y&&(S("false write response, pause",A._readableState.awaitDrain),A._readableState.awaitDrain++,_e=!0),A.pause())}function me(we){S("onerror",we),Ie(),j.removeListener("error",me),0===v(j,"error")&&j.emit("error",we)}function Te(){j.removeListener("finish",Ne),Ie()}function Ne(){S("onfinish"),j.removeListener("close",Te),Ie()}function Ie(){S("unpipe"),A.unpipe(j)}return A.on("data",Ee),function b(j,_,A){if("function"==typeof j.prependListener)return j.prependListener(_,A);j._events&&j._events[_]?T(j._events[_])?j._events[_].unshift(A):j._events[_]=[A,j._events[_]]:j.on(_,A)}(j,"error",me),j.once("close",Te),j.once("finish",Ne),j.emit("pipe",A),U.flowing||(S("pipe resume"),A.resume()),j},f.prototype.unpipe=function(j){var _=this._readableState,A={hasUnpiped:!1};if(0===_.pipesCount)return this;if(1===_.pipesCount)return j&&j!==_.pipes||(j||(j=_.pipes),_.pipes=null,_.pipesCount=0,_.flowing=!1,j&&j.emit("unpipe",this,A)),this;if(!j){var U=_.pipes,K=_.pipesCount;_.pipes=null,_.pipesCount=0,_.flowing=!1;for(var te=0;te<K;te++)U[te].emit("unpipe",this,A);return this}var ye=G(_.pipes,j);return-1===ye||(_.pipes.splice(ye,1),_.pipesCount-=1,1===_.pipesCount&&(_.pipes=_.pipes[0]),j.emit("unpipe",this,A)),this},f.prototype.addListener=f.prototype.on=function(j,_){var A=p.prototype.on.call(this,j,_);if("data"===j)!1!==this._readableState.flowing&&this.resume();else if("readable"===j){var U=this._readableState;!U.endEmitted&&!U.readableListening&&(U.readableListening=U.needReadable=!0,U.emittedReadable=!1,U.reading?U.length&&se(this):M.nextTick(re,this))}return A},f.prototype.resume=function(){var j=this._readableState;return j.flowing||(S("resume"),j.flowing=!0,function ge(j,_){_.resumeScheduled||(_.resumeScheduled=!0,M.nextTick(ie,j,_))}(this,j)),this},f.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(j){var _=this,A=this._readableState,U=!1;for(var K in j.on("end",function(){if(S("wrapped end"),A.decoder&&!A.ended){var ye=A.decoder.end();ye&&ye.length&&_.push(ye)}_.push(null)}),j.on("data",function(ye){S("wrapped data"),A.decoder&&(ye=A.decoder.write(ye)),A.objectMode&&null==ye||!(A.objectMode||ye&&ye.length)||_.push(ye)||(U=!0,j.pause())}),j)void 0===this[K]&&"function"==typeof j[K]&&(this[K]=function(ye){return function(){return j[ye].apply(j,arguments)}}(K));for(var te=0;te<w.length;te++)j.on(w[te],this.emit.bind(this,w[te]));return this._read=function(ye){S("wrapped _read",ye),U&&(U=!1,j.resume())},this},Object.defineProperty(f.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),f._fromList=ue}).call(this,u("./node_modules/webpack/buildin/global.js"),u("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(Oe,k,u){"use strict";Oe.exports=T;var x=u("./node_modules/readable-stream/lib/_stream_duplex.js"),y=u("./node_modules/core-util-is/lib/util.js");function M(v,p){var N=this._transformState;N.transforming=!1;var O=N.writecb;if(!O)return this.emit("error",new Error("write callback called multiple times"));N.writechunk=null,N.writecb=null,null!=p&&this.push(p),O(v);var L=this._readableState;L.reading=!1,(L.needReadable||L.length<L.highWaterMark)&&this._read(L.highWaterMark)}function T(v){if(!(this instanceof T))return new T(v);x.call(this,v),this._transformState={afterTransform:M.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&("function"==typeof v.transform&&(this._transform=v.transform),"function"==typeof v.flush&&(this._flush=v.flush)),this.on("prefinish",D)}function D(){var v=this;"function"==typeof this._flush?this._flush(function(p,N){d(v,p,N)}):d(this,null,null)}function d(v,p,N){if(p)return v.emit("error",p);if(null!=N&&v.push(N),v._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(v._transformState.transforming)throw new Error("Calling transform done when still transforming");return v.push(null)}y.inherits=u("./node_modules/inherits/inherits_browser.js"),y.inherits(T,x),T.prototype.push=function(v,p){return this._transformState.needTransform=!1,x.prototype.push.call(this,v,p)},T.prototype._transform=function(v,p,N){throw new Error("_transform() is not implemented")},T.prototype._write=function(v,p,N){var O=this._transformState;if(O.writecb=N,O.writechunk=v,O.writeencoding=p,!O.transforming){var L=this._readableState;(O.needTransform||L.needReadable||L.length<L.highWaterMark)&&this._read(L.highWaterMark)}},T.prototype._read=function(v){var p=this._transformState;null!==p.writechunk&&p.writecb&&!p.transforming?(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform)):p.needTransform=!0},T.prototype._destroy=function(v,p){var N=this;x.prototype._destroy.call(this,v,function(O){p(O),N.emit("close")})}},"./node_modules/readable-stream/lib/_stream_writable.js":function(Oe,k,u){"use strict";(function(x,y,M){var T=u("./node_modules/process-nextick-args/index.js");function d(ie){var de=this;this.next=null,this.entry=null,this.finish=function(){!function ge(ie,de,ue){var le=ie.entry;for(ie.entry=null;le;){var ce=le.callback;de.pendingcb--,ce(ue),le=le.next}de.corkedRequestsFree?de.corkedRequestsFree.next=ie:de.corkedRequestsFree=ie}(de,ie)}}Oe.exports=b;var p,v=!x.browser&&["v0.10","v0.9."].indexOf(x.version.slice(0,5))>-1?y:T.nextTick;b.WritableState=R;var N=u("./node_modules/core-util-is/lib/util.js");N.inherits=u("./node_modules/inherits/inherits_browser.js");var O={deprecate:u("./node_modules/util-deprecate/browser.js")},L=u("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),m=u("./node_modules/safe-buffer/index.js").Buffer,h=M.Uint8Array||function(){};var w,C=u("./node_modules/readable-stream/lib/internal/streams/destroy.js");function F(){}function R(ie,de){p=p||u("./node_modules/readable-stream/lib/_stream_duplex.js");var ue=de instanceof p;this.objectMode=!!(ie=ie||{}).objectMode,ue&&(this.objectMode=this.objectMode||!!ie.writableObjectMode);var le=ie.highWaterMark,ce=ie.writableHighWaterMark;this.highWaterMark=le||0===le?le:ue&&(ce||0===ce)?ce:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===ie.decodeStrings),this.defaultEncoding=ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ee){!function J(ie,de){var ue=ie._writableState,le=ue.sync,ce=ue.writecb;if(function q(ie){ie.writing=!1,ie.writecb=null,ie.length-=ie.writelen,ie.writelen=0}(ue),de)!function z(ie,de,ue,le,ce){--de.pendingcb,ue?(T.nextTick(ce,le),T.nextTick(ve,ie,de),ie._writableState.errorEmitted=!0,ie.emit("error",le)):(ce(le),ie._writableState.errorEmitted=!0,ie.emit("error",le),ve(ie,de))}(ie,ue,le,de,ce);else{var ne=Z(ue);!ne&&!ue.corked&&!ue.bufferProcessing&&ue.bufferedRequest&&se(ie,ue),le?v(X,ie,ue,ne,ce):X(ie,ue,ne,ce)}}(de,ee)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function b(ie){if(p=p||u("./node_modules/readable-stream/lib/_stream_duplex.js"),!(w.call(b,this)||this instanceof p))return new b(ie);this._writableState=new R(ie,this),this.writable=!0,ie&&("function"==typeof ie.write&&(this._write=ie.write),"function"==typeof ie.writev&&(this._writev=ie.writev),"function"==typeof ie.destroy&&(this._destroy=ie.destroy),"function"==typeof ie.final&&(this._final=ie.final)),L.call(this)}function H(ie,de,ue,le,ce,ne){if(!ue){var pe=function I(ie,de,ue){return!ie.objectMode&&!1!==ie.decodeStrings&&"string"==typeof de&&(de=m.from(de,ue)),de}(de,le,ce);le!==pe&&(ue=!0,ce="buffer",le=pe)}var ee=de.objectMode?1:le.length;de.length+=ee;var G=de.length<de.highWaterMark;if(G||(de.needDrain=!0),de.writing||de.corked){var j=de.lastBufferedRequest;de.lastBufferedRequest={chunk:le,encoding:ce,isBuf:ue,callback:ne,next:null},j?j.next=de.lastBufferedRequest:de.bufferedRequest=de.lastBufferedRequest,de.bufferedRequestCount+=1}else $(ie,de,!1,ee,le,ce,ne);return G}function $(ie,de,ue,le,ce,ne,pe){de.writelen=le,de.writecb=pe,de.writing=!0,de.sync=!0,ue?ie._writev(ce,de.onwrite):ie._write(ce,ne,de.onwrite),de.sync=!1}function X(ie,de,ue,le){ue||function V(ie,de){0===de.length&&de.needDrain&&(de.needDrain=!1,ie.emit("drain"))}(ie,de),de.pendingcb--,le(),ve(ie,de)}function se(ie,de){de.bufferProcessing=!0;var ue=de.bufferedRequest;if(ie._writev&&ue&&ue.next){var ce=new Array(de.bufferedRequestCount),ne=de.corkedRequestsFree;ne.entry=ue;for(var pe=0,ee=!0;ue;)ce[pe]=ue,ue.isBuf||(ee=!1),ue=ue.next,pe+=1;ce.allBuffers=ee,$(ie,de,!0,de.length,ce,"",ne.finish),de.pendingcb++,de.lastBufferedRequest=null,ne.next?(de.corkedRequestsFree=ne.next,ne.next=null):de.corkedRequestsFree=new d(de),de.bufferedRequestCount=0}else{for(;ue;){var G=ue.chunk;if($(ie,de,!1,de.objectMode?1:G.length,G,ue.encoding,ue.callback),ue=ue.next,de.bufferedRequestCount--,de.writing)break}null===ue&&(de.lastBufferedRequest=null)}de.bufferedRequest=ue,de.bufferProcessing=!1}function Z(ie){return ie.ending&&0===ie.length&&null===ie.bufferedRequest&&!ie.finished&&!ie.writing}function oe(ie,de){ie._final(function(ue){de.pendingcb--,ue&&ie.emit("error",ue),de.prefinished=!0,ie.emit("prefinish"),ve(ie,de)})}function ve(ie,de){var ue=Z(de);return ue&&(function he(ie,de){!de.prefinished&&!de.finalCalled&&("function"==typeof ie._final?(de.pendingcb++,de.finalCalled=!0,T.nextTick(oe,ie,de)):(de.prefinished=!0,ie.emit("prefinish")))}(ie,de),0===de.pendingcb&&(de.finished=!0,ie.emit("finish"))),ue}N.inherits(b,L),R.prototype.getBuffer=function(){for(var de=this.bufferedRequest,ue=[];de;)ue.push(de),de=de.next;return ue},function(){try{Object.defineProperty(R.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(ie){return!!w.call(this,ie)||this===b&&ie&&ie._writableState instanceof R}})):w=function(ie){return ie instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(ie,de,ue){var le=this._writableState,ce=!1,ne=!le.objectMode&&function S(ie){return m.isBuffer(ie)||ie instanceof h}(ie);return ne&&!m.isBuffer(ie)&&(ie=function g(ie){return m.from(ie)}(ie)),"function"==typeof de&&(ue=de,de=null),ne?de="buffer":de||(de=le.defaultEncoding),"function"!=typeof ue&&(ue=F),le.ended?function P(ie,de){var ue=new Error("write after end");ie.emit("error",ue),T.nextTick(de,ue)}(this,ue):(ne||function f(ie,de,ue,le){var ce=!0,ne=!1;return null===ue?ne=new TypeError("May not write null values to stream"):"string"!=typeof ue&&void 0!==ue&&!de.objectMode&&(ne=new TypeError("Invalid non-string/buffer chunk")),ne&&(ie.emit("error",ne),T.nextTick(le,ne),ce=!1),ce}(this,le,ie,ue))&&(le.pendingcb++,ce=H(this,le,ne,ie,de,ue)),ce},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var ie=this._writableState;ie.corked&&(ie.corked--,!ie.writing&&!ie.corked&&!ie.finished&&!ie.bufferProcessing&&ie.bufferedRequest&&se(this,ie))},b.prototype.setDefaultEncoding=function(de){if("string"==typeof de&&(de=de.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((de+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+de);return this._writableState.defaultEncoding=de,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(ie,de,ue){ue(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(ie,de,ue){var le=this._writableState;"function"==typeof ie?(ue=ie,ie=null,de=null):"function"==typeof de&&(ue=de,de=null),null!=ie&&this.write(ie,de),le.corked&&(le.corked=1,this.uncork()),!le.ending&&!le.finished&&function re(ie,de,ue){de.ending=!0,ve(ie,de),ue&&(de.finished?T.nextTick(ue):ie.once("finish",ue)),de.ended=!0,ie.writable=!1}(this,le,ue)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(ie){!this._writableState||(this._writableState.destroyed=ie)}}),b.prototype.destroy=C.destroy,b.prototype._undestroy=C.undestroy,b.prototype._destroy=function(ie,de){this.end(),de(ie)}}).call(this,u("./node_modules/process/browser.js"),u("./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(Oe,k,u){"use strict";var y=u("./node_modules/safe-buffer/index.js").Buffer,M=u(1);function T(D,d,v){D.copy(d,v)}Oe.exports=function(){function D(){(function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this.head=null,this.tail=null,this.length=0}return D.prototype.push=function(v){var p={data:v,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length},D.prototype.unshift=function(v){var p={data:v,next:this.head};0===this.length&&(this.tail=p),this.head=p,++this.length},D.prototype.shift=function(){if(0!==this.length){var v=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,v}},D.prototype.clear=function(){this.head=this.tail=null,this.length=0},D.prototype.join=function(v){if(0===this.length)return"";for(var p=this.head,N=""+p.data;p=p.next;)N+=v+p.data;return N},D.prototype.concat=function(v){if(0===this.length)return y.alloc(0);if(1===this.length)return this.head.data;for(var p=y.allocUnsafe(v>>>0),N=this.head,O=0;N;)T(N.data,p,O),O+=N.data.length,N=N.next;return p},D}(),M&&M.inspect&&M.inspect.custom&&(Oe.exports.prototype[M.inspect.custom]=function(){var D=M.inspect({length:this.length});return this.constructor.name+" "+D})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(Oe,k,u){"use strict";var x=u("./node_modules/process-nextick-args/index.js");function T(D,d){D.emit("error",d)}Oe.exports={destroy:function y(D,d){var v=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(d?d(D):D&&(!this._writableState||!this._writableState.errorEmitted)&&x.nextTick(T,this,D),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(D||null,function(O){!d&&O?(x.nextTick(T,v,O),v._writableState&&(v._writableState.errorEmitted=!0)):d&&d(O)}),this)},undestroy:function M(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(Oe,k,u){Oe.exports=u("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/passthrough.js":function(Oe,k,u){Oe.exports=u("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(Oe,k,u){(k=Oe.exports=u("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=k,k.Readable=k,k.Writable=u("./node_modules/readable-stream/lib/_stream_writable.js"),k.Duplex=u("./node_modules/readable-stream/lib/_stream_duplex.js"),k.Transform=u("./node_modules/readable-stream/lib/_stream_transform.js"),k.PassThrough=u("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(Oe,k,u){Oe.exports=u("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(Oe,k,u){Oe.exports=u("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(Oe,k,u){var x=u("./node_modules/node-libs-browser/node_modules/buffer/index.js"),y=x.Buffer;function M(D,d){for(var v in D)d[v]=D[v]}function T(D,d,v){return y(D,d,v)}y.from&&y.alloc&&y.allocUnsafe&&y.allocUnsafeSlow?Oe.exports=x:(M(x,k),k.Buffer=T),M(y,T),T.from=function(D,d,v){if("number"==typeof D)throw new TypeError("Argument must not be a number");return y(D,d,v)},T.alloc=function(D,d,v){if("number"!=typeof D)throw new TypeError("Argument must be a number");var p=y(D);return void 0!==d?"string"==typeof v?p.fill(d,v):p.fill(d):p.fill(0),p},T.allocUnsafe=function(D){if("number"!=typeof D)throw new TypeError("Argument must be a number");return y(D)},T.allocUnsafeSlow=function(D){if("number"!=typeof D)throw new TypeError("Argument must be a number");return x.SlowBuffer(D)}},"./node_modules/sax/lib/sax.js":function(Oe,k,u){(function(x){!function(y){y.parser=function(_,A){return new T(_,A)},y.SAXParser=T,y.SAXStream=L,y.createStream=function O(_,A){return new L(_,A)},y.MAX_BUFFER_LENGTH=65536;var p,M=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function T(_,A){if(!(this instanceof T))return new T(_,A);var U=this;(function d(_){for(var A=0,U=M.length;A<U;A++)_[M[A]]=""})(U),U.q=U.c="",U.bufferCheckPosition=y.MAX_BUFFER_LENGTH,U.opt=A||{},U.opt.lowercase=U.opt.lowercase||U.opt.lowercasetags,U.looseCase=U.opt.lowercase?"toLowerCase":"toUpperCase",U.tags=[],U.closed=U.closedRoot=U.sawRoot=!1,U.tag=U.error=null,U.strict=!!_,U.noscript=!(!_&&!U.opt.noscript),U.state=V.BEGIN,U.strictEntities=U.opt.strictEntities,U.ENTITIES=Object.create(U.strictEntities?y.XML_ENTITIES:y.ENTITIES),U.attribList=[],U.opt.xmlns&&(U.ns=Object.create(P)),U.trackPosition=!1!==U.opt.position,U.trackPosition&&(U.position=U.line=U.column=0),Z(U,"onready")}y.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(_){function A(){}return A.prototype=_,new A}),Object.keys||(Object.keys=function(_){var A=[];for(var U in _)_.hasOwnProperty(U)&&A.push(U);return A}),T.prototype={end:function(){ge(this)},write:function j(_){var A=this;if(this.error)throw this.error;if(A.closed)return re(A,"Cannot write after close. Assign an onready handler.");if(null===_)return ge(A);"object"==typeof _&&(_=_.toString());for(var U=0,K="";K=G(_,U++),A.c=K,K;)switch(A.trackPosition&&(A.position++,"\n"===K?(A.line++,A.column=0):A.column++),A.state){case V.BEGIN:if(A.state=V.BEGIN_WHITESPACE,"\ufeff"===K)continue;ee(A,K);continue;case V.BEGIN_WHITESPACE:ee(A,K);continue;case V.TEXT:if(A.sawRoot&&!A.closedRoot){for(var te=U-1;K&&"<"!==K&&"&"!==K;)(K=G(_,U++))&&A.trackPosition&&(A.position++,"\n"===K?(A.line++,A.column=0):A.column++);A.textNode+=_.substring(te,U-1)}"<"!==K||A.sawRoot&&A.closedRoot&&!A.strict?(X(m,K)&&(!A.sawRoot||A.closedRoot)&&ie(A,"Text data outside of root node."),"&"===K?A.state=V.TEXT_ENTITY:A.textNode+=K):(A.state=V.OPEN_WAKA,A.startTagPosition=A.position);continue;case V.SCRIPT:"<"===K?A.state=V.SCRIPT_ENDING:A.script+=K;continue;case V.SCRIPT_ENDING:"/"===K?A.state=V.CLOSE_TAG:(A.script+="<"+K,A.state=V.SCRIPT);continue;case V.OPEN_WAKA:"!"===K?(A.state=V.SGML_DECL,A.sgmlDecl=""):J(m,K)||(J(f,K)?(A.state=V.OPEN_TAG,A.tagName=K):"/"===K?(A.state=V.CLOSE_TAG,A.tagName=""):"?"===K?(A.state=V.PROC_INST,A.procInstName=A.procInstBody=""):(ie(A,"Unencoded <"),A.startTagPosition+1<A.position&&(K=new Array(A.position-A.startTagPosition).join(" ")+K),A.textNode+="<"+K,A.state=V.TEXT));continue;case V.SGML_DECL:"[CDATA["===(A.sgmlDecl+K).toUpperCase()?(oe(A,"onopencdata"),A.state=V.CDATA,A.sgmlDecl="",A.cdata=""):A.sgmlDecl+K==="--"?(A.state=V.COMMENT,A.comment="",A.sgmlDecl=""):"DOCTYPE"===(A.sgmlDecl+K).toUpperCase()?(A.state=V.DOCTYPE,(A.doctype||A.sawRoot)&&ie(A,"Inappropriately located doctype declaration"),A.doctype="",A.sgmlDecl=""):">"===K?(oe(A,"onsgmldeclaration",A.sgmlDecl),A.sgmlDecl="",A.state=V.TEXT):(J(S,K)&&(A.state=V.SGML_DECL_QUOTED),A.sgmlDecl+=K);continue;case V.SGML_DECL_QUOTED:K===A.q&&(A.state=V.SGML_DECL,A.q=""),A.sgmlDecl+=K;continue;case V.DOCTYPE:">"===K?(A.state=V.TEXT,oe(A,"ondoctype",A.doctype),A.doctype=!0):(A.doctype+=K,"["===K?A.state=V.DOCTYPE_DTD:J(S,K)&&(A.state=V.DOCTYPE_QUOTED,A.q=K));continue;case V.DOCTYPE_QUOTED:A.doctype+=K,K===A.q&&(A.q="",A.state=V.DOCTYPE);continue;case V.DOCTYPE_DTD:A.doctype+=K,"]"===K?A.state=V.DOCTYPE:J(S,K)&&(A.state=V.DOCTYPE_DTD_QUOTED,A.q=K);continue;case V.DOCTYPE_DTD_QUOTED:A.doctype+=K,K===A.q&&(A.state=V.DOCTYPE_DTD,A.q="");continue;case V.COMMENT:"-"===K?A.state=V.COMMENT_ENDING:A.comment+=K;continue;case V.COMMENT_ENDING:"-"===K?(A.state=V.COMMENT_ENDED,A.comment=ve(A.opt,A.comment),A.comment&&oe(A,"oncomment",A.comment),A.comment=""):(A.comment+="-"+K,A.state=V.COMMENT);continue;case V.COMMENT_ENDED:">"!==K?(ie(A,"Malformed comment"),A.comment+="--"+K,A.state=V.COMMENT):A.state=V.TEXT;continue;case V.CDATA:"]"===K?A.state=V.CDATA_ENDING:A.cdata+=K;continue;case V.CDATA_ENDING:"]"===K?A.state=V.CDATA_ENDING_2:(A.cdata+="]"+K,A.state=V.CDATA);continue;case V.CDATA_ENDING_2:">"===K?(A.cdata&&oe(A,"oncdata",A.cdata),oe(A,"onclosecdata"),A.cdata="",A.state=V.TEXT):"]"===K?A.cdata+="]":(A.cdata+="]]"+K,A.state=V.CDATA);continue;case V.PROC_INST:"?"===K?A.state=V.PROC_INST_ENDING:J(m,K)?A.state=V.PROC_INST_BODY:A.procInstName+=K;continue;case V.PROC_INST_BODY:if(!A.procInstBody&&J(m,K))continue;"?"===K?A.state=V.PROC_INST_ENDING:A.procInstBody+=K;continue;case V.PROC_INST_ENDING:">"===K?(oe(A,"onprocessinginstruction",{name:A.procInstName,body:A.procInstBody}),A.procInstName=A.procInstBody="",A.state=V.TEXT):(A.procInstBody+="?"+K,A.state=V.PROC_INST_BODY);continue;case V.OPEN_TAG:J(I,K)?A.tagName+=K:(de(A),">"===K?ce(A):"/"===K?A.state=V.OPEN_TAG_SLASH:(X(m,K)&&ie(A,"Invalid character in tag name"),A.state=V.ATTRIB));continue;case V.OPEN_TAG_SLASH:">"===K?(ce(A,!0),ne(A)):(ie(A,"Forward-slash in opening tag not followed by >"),A.state=V.ATTRIB);continue;case V.ATTRIB:if(J(m,K))continue;">"===K?ce(A):"/"===K?A.state=V.OPEN_TAG_SLASH:J(f,K)?(A.attribName=K,A.attribValue="",A.state=V.ATTRIB_NAME):ie(A,"Invalid attribute name");continue;case V.ATTRIB_NAME:"="===K?A.state=V.ATTRIB_VALUE:">"===K?(ie(A,"Attribute without value"),A.attribValue=A.attribName,le(A),ce(A)):J(m,K)?A.state=V.ATTRIB_NAME_SAW_WHITE:J(I,K)?A.attribName+=K:ie(A,"Invalid attribute name");continue;case V.ATTRIB_NAME_SAW_WHITE:if("="===K)A.state=V.ATTRIB_VALUE;else{if(J(m,K))continue;ie(A,"Attribute without value"),A.tag.attributes[A.attribName]="",A.attribValue="",oe(A,"onattribute",{name:A.attribName,value:""}),A.attribName="",">"===K?ce(A):J(f,K)?(A.attribName=K,A.state=V.ATTRIB_NAME):(ie(A,"Invalid attribute name"),A.state=V.ATTRIB)}continue;case V.ATTRIB_VALUE:if(J(m,K))continue;J(S,K)?(A.q=K,A.state=V.ATTRIB_VALUE_QUOTED):(ie(A,"Unquoted attribute value"),A.state=V.ATTRIB_VALUE_UNQUOTED,A.attribValue=K);continue;case V.ATTRIB_VALUE_QUOTED:if(K!==A.q){"&"===K?A.state=V.ATTRIB_VALUE_ENTITY_Q:A.attribValue+=K;continue}le(A),A.q="",A.state=V.ATTRIB_VALUE_CLOSED;continue;case V.ATTRIB_VALUE_CLOSED:J(m,K)?A.state=V.ATTRIB:">"===K?ce(A):"/"===K?A.state=V.OPEN_TAG_SLASH:J(f,K)?(ie(A,"No whitespace between attributes"),A.attribName=K,A.attribValue="",A.state=V.ATTRIB_NAME):ie(A,"Invalid attribute name");continue;case V.ATTRIB_VALUE_UNQUOTED:if(X(C,K)){"&"===K?A.state=V.ATTRIB_VALUE_ENTITY_U:A.attribValue+=K;continue}le(A),">"===K?ce(A):A.state=V.ATTRIB;continue;case V.CLOSE_TAG:if(A.tagName)">"===K?ne(A):J(I,K)?A.tagName+=K:A.script?(A.script+="</"+A.tagName,A.tagName="",A.state=V.SCRIPT):(X(m,K)&&ie(A,"Invalid tagname in closing tag"),A.state=V.CLOSE_TAG_SAW_WHITE);else{if(J(m,K))continue;X(f,K)?A.script?(A.script+="</"+K,A.state=V.SCRIPT):ie(A,"Invalid tagname in closing tag."):A.tagName=K}continue;case V.CLOSE_TAG_SAW_WHITE:if(J(m,K))continue;">"===K?ne(A):ie(A,"Invalid characters in closing tag");continue;case V.TEXT_ENTITY:case V.ATTRIB_VALUE_ENTITY_Q:case V.ATTRIB_VALUE_ENTITY_U:var Se,ae;switch(A.state){case V.TEXT_ENTITY:Se=V.TEXT,ae="textNode";break;case V.ATTRIB_VALUE_ENTITY_Q:Se=V.ATTRIB_VALUE_QUOTED,ae="attribValue";break;case V.ATTRIB_VALUE_ENTITY_U:Se=V.ATTRIB_VALUE_UNQUOTED,ae="attribValue"}";"===K?(A[ae]+=pe(A),A.entity="",A.state=Se):J(A.entity.length?$:H,K)?A.entity+=K:(ie(A,"Invalid character in entity name"),A[ae]+="&"+A.entity+K,A.entity="",A.state=Se);continue;default:throw new Error(A,"Unknown state: "+A.state)}return A.position>=A.bufferCheckPosition&&function D(_){for(var A=Math.max(y.MAX_BUFFER_LENGTH,10),U=0,K=0,te=M.length;K<te;K++){var ye=_[M[K]].length;if(ye>A)switch(M[K]){case"textNode":he(_);break;case"cdata":oe(_,"oncdata",_.cdata),_.cdata="";break;case"script":oe(_,"onscript",_.script),_.script="";break;default:re(_,"Max buffer length exceeded: "+M[K])}U=Math.max(U,ye)}_.bufferCheckPosition=y.MAX_BUFFER_LENGTH-U+_.position}(A),A},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function v(_){he(_),""!==_.cdata&&(oe(_,"oncdata",_.cdata),_.cdata=""),""!==_.script&&(oe(_,"onscript",_.script),_.script="")}(this)}};try{p=u("./node_modules/stream-browserify/index.js").Stream}catch{p=function(){}}var N=y.EVENTS.filter(function(_){return"error"!==_&&"end"!==_});function L(_,A){if(!(this instanceof L))return new L(_,A);p.apply(this),this._parser=new T(_,A),this.writable=!0,this.readable=!0;var U=this;this._parser.onend=function(){U.emit("end")},this._parser.onerror=function(K){U.emit("error",K),U._parser.error=null},this._decoder=null,N.forEach(function(K){Object.defineProperty(U,"on"+K,{get:function(){return U._parser["on"+K]},set:function(te){if(!te)return U.removeAllListeners(K),U._parser["on"+K]=te,te;U.on(K,te)},enumerable:!0,configurable:!1})})}(L.prototype=Object.create(p.prototype,{constructor:{value:L}})).write=function(_){if("function"==typeof x&&"function"==typeof x.isBuffer&&x.isBuffer(_)){if(!this._decoder){var A=u("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new A("utf8")}_=this._decoder.write(_)}return this._parser.write(_.toString()),this.emit("data",_),!0},L.prototype.end=function(_){return _&&_.length&&this.write(_),this._parser.end(),!0},L.prototype.on=function(_,A){var U=this;return!U._parser["on"+_]&&-1!==N.indexOf(_)&&(U._parser["on"+_]=function(){var K=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);K.splice(0,0,_),U.emit.apply(U,K)}),p.prototype.on.call(U,_,A)};var m="\r\n\t ",h="0124356789",g="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",S="'\"",C=m+">",w="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/2000/xmlns/",P={xml:w,xmlns:b};m=z(m),h=z(h),g=z(g);var f=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,H=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function z(_){return _.split("").reduce(function(A,U){return A[U]=!0,A},{})}function J(_,A){return function q(_){return"[object RegExp]"===Object.prototype.toString.call(_)}(_)?!!A.match(_):_[A]}function X(_,A){return!J(_,A)}S=z(S),C=z(C);var _,A,U,V=0;for(var se in y.STATE={BEGIN:V++,BEGIN_WHITESPACE:V++,TEXT:V++,TEXT_ENTITY:V++,OPEN_WAKA:V++,SGML_DECL:V++,SGML_DECL_QUOTED:V++,DOCTYPE:V++,DOCTYPE_QUOTED:V++,DOCTYPE_DTD:V++,DOCTYPE_DTD_QUOTED:V++,COMMENT_STARTING:V++,COMMENT:V++,COMMENT_ENDING:V++,COMMENT_ENDED:V++,CDATA:V++,CDATA_ENDING:V++,CDATA_ENDING_2:V++,PROC_INST:V++,PROC_INST_BODY:V++,PROC_INST_ENDING:V++,OPEN_TAG:V++,OPEN_TAG_SLASH:V++,ATTRIB:V++,ATTRIB_NAME:V++,ATTRIB_NAME_SAW_WHITE:V++,ATTRIB_VALUE:V++,ATTRIB_VALUE_QUOTED:V++,ATTRIB_VALUE_CLOSED:V++,ATTRIB_VALUE_UNQUOTED:V++,ATTRIB_VALUE_ENTITY_Q:V++,ATTRIB_VALUE_ENTITY_U:V++,CLOSE_TAG:V++,CLOSE_TAG_SAW_WHITE:V++,SCRIPT:V++,SCRIPT_ENDING:V++},y.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},y.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(y.ENTITIES).forEach(function(_){var A=y.ENTITIES[_],U="number"==typeof A?String.fromCharCode(A):A;y.ENTITIES[_]=U}),y.STATE)y.STATE[y.STATE[se]]=se;function Z(_,A,U){_[A]&&_[A](U)}function oe(_,A,U){_.textNode&&he(_),Z(_,A,U)}function he(_){_.textNode=ve(_.opt,_.textNode),_.textNode&&Z(_,"ontext",_.textNode),_.textNode=""}function ve(_,A){return _.trim&&(A=A.trim()),_.normalize&&(A=A.replace(/\s+/g," ")),A}function re(_,A){return he(_),_.trackPosition&&(A+="\nLine: "+_.line+"\nColumn: "+_.column+"\nChar: "+_.c),A=new Error(A),_.error=A,Z(_,"onerror",A),_}function ge(_){return _.sawRoot&&!_.closedRoot&&ie(_,"Unclosed root tag"),_.state!==V.BEGIN&&_.state!==V.BEGIN_WHITESPACE&&_.state!==V.TEXT&&re(_,"Unexpected end"),he(_),_.c="",_.closed=!0,Z(_,"onend"),T.call(_,_.strict,_.opt),_}function ie(_,A){if("object"!=typeof _||!(_ instanceof T))throw new Error("bad call to strictFail");_.strict&&re(_,A)}function de(_){_.strict||(_.tagName=_.tagName[_.looseCase]());var A=_.tags[_.tags.length-1]||_,U=_.tag={name:_.tagName,attributes:{}};_.opt.xmlns&&(U.ns=A.ns),_.attribList.length=0,oe(_,"onopentagstart",U)}function ue(_,A){var K=_.indexOf(":")<0?["",_]:_.split(":"),te=K[0],ye=K[1];return A&&"xmlns"===_&&(te="xmlns",ye=""),{prefix:te,local:ye}}function le(_){if(_.strict||(_.attribName=_.attribName[_.looseCase]()),-1!==_.attribList.indexOf(_.attribName)||_.tag.attributes.hasOwnProperty(_.attribName))_.attribName=_.attribValue="";else{if(_.opt.xmlns){var A=ue(_.attribName,!0),K=A.local;if("xmlns"===A.prefix)if("xml"===K&&_.attribValue!==w)ie(_,"xml: prefix must be bound to "+w+"\nActual: "+_.attribValue);else if("xmlns"===K&&_.attribValue!==b)ie(_,"xmlns: prefix must be bound to "+b+"\nActual: "+_.attribValue);else{var te=_.tag,ye=_.tags[_.tags.length-1]||_;te.ns===ye.ns&&(te.ns=Object.create(ye.ns)),te.ns[K]=_.attribValue}_.attribList.push([_.attribName,_.attribValue])}else _.tag.attributes[_.attribName]=_.attribValue,oe(_,"onattribute",{name:_.attribName,value:_.attribValue});_.attribName=_.attribValue=""}}function ce(_,A){if(_.opt.xmlns){var U=_.tag,K=ue(_.tagName);U.prefix=K.prefix,U.local=K.local,U.uri=U.ns[K.prefix]||"",U.prefix&&!U.uri&&(ie(_,"Unbound namespace prefix: "+JSON.stringify(_.tagName)),U.uri=K.prefix),U.ns&&(_.tags[_.tags.length-1]||_).ns!==U.ns&&Object.keys(U.ns).forEach(function(Ie){oe(_,"onopennamespace",{prefix:Ie,uri:U.ns[Ie]})});for(var ye=0,Se=_.attribList.length;ye<Se;ye++){var ae=_.attribList[ye],Y=ae[0],W=ae[1],_e=ue(Y,!0),Ee=_e.prefix,Te=""===Ee?"":U.ns[Ee]||"",Ne={name:Y,value:W,prefix:Ee,local:_e.local,uri:Te};Ee&&"xmlns"!==Ee&&!Te&&(ie(_,"Unbound namespace prefix: "+JSON.stringify(Ee)),Ne.uri=Ee),_.tag.attributes[Y]=Ne,oe(_,"onattribute",Ne)}_.attribList.length=0}_.tag.isSelfClosing=!!A,_.sawRoot=!0,_.tags.push(_.tag),oe(_,"onopentag",_.tag),A||(_.state=_.noscript||"script"!==_.tagName.toLowerCase()?V.TEXT:V.SCRIPT,_.tag=null,_.tagName=""),_.attribName=_.attribValue="",_.attribList.length=0}function ne(_){if(!_.tagName)return ie(_,"Weird empty close tag."),_.textNode+="</>",void(_.state=V.TEXT);if(_.script){if("script"!==_.tagName)return _.script+="</"+_.tagName+">",_.tagName="",void(_.state=V.SCRIPT);oe(_,"onscript",_.script),_.script=""}var A=_.tags.length,U=_.tagName;_.strict||(U=U[_.looseCase]());for(var K=U;A--&&_.tags[A].name!==K;)ie(_,"Unexpected close tag");if(A<0)return ie(_,"Unmatched closing tag: "+_.tagName),_.textNode+="</"+_.tagName+">",void(_.state=V.TEXT);_.tagName=U;for(var ye=_.tags.length;ye-- >A;){var Se=_.tag=_.tags.pop();_.tagName=_.tag.name,oe(_,"onclosetag",_.tagName);var ae={};for(var Y in Se.ns)ae[Y]=Se.ns[Y];_.opt.xmlns&&Se.ns!==(_.tags[_.tags.length-1]||_).ns&&Object.keys(Se.ns).forEach(function(_e){oe(_,"onclosenamespace",{prefix:_e,uri:Se.ns[_e]})})}0===A&&(_.closedRoot=!0),_.tagName=_.attribValue=_.attribName="",_.attribList.length=0,_.state=V.TEXT}function pe(_){var K,A=_.entity,U=A.toLowerCase(),te="";return _.ENTITIES[A]?_.ENTITIES[A]:_.ENTITIES[U]?_.ENTITIES[U]:("#"===(A=U).charAt(0)&&("x"===A.charAt(1)?(A=A.slice(2),te=(K=parseInt(A,16)).toString(16)):(A=A.slice(1),te=(K=parseInt(A,10)).toString(10))),A=A.replace(/^0+/,""),te.toLowerCase()!==A?(ie(_,"Invalid character entity"),"&"+_.entity+";"):String.fromCodePoint(K))}function ee(_,A){"<"===A?(_.state=V.OPEN_WAKA,_.startTagPosition=_.position):X(m,A)&&(ie(_,"Non-whitespace before first tag."),_.textNode=A,_.state=V.TEXT)}function G(_,A){var U="";return A<_.length&&(U=_.charAt(A)),U}V=y.STATE,String.fromCodePoint||(_=String.fromCharCode,A=Math.floor,U=function(){var K=16384,te=[],ae=-1,Y=arguments.length;if(!Y)return"";for(var W="";++ae<Y;){var _e=Number(arguments[ae]);if(!isFinite(_e)||_e<0||_e>1114111||A(_e)!==_e)throw RangeError("Invalid code point: "+_e);_e<=65535?te.push(_e):te.push(55296+((_e-=65536)>>10),_e%1024+56320),(ae+1===Y||te.length>K)&&(W+=_.apply(null,te),te.length=0)}return W},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:U,configurable:!0,writable:!0}):String.fromCodePoint=U)}(k)}).call(this,u("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(Oe,k,u){(function(x,y){!function(M,T){"use strict";if(!M.setImmediate){var N,D=1,d={},v=!1,p=M.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(M);b=b&&b.setTimeout?b:M,"[object process]"==={}.toString.call(M.process)?function g(){N=function(P){y.nextTick(function(){h(P)})}}():function S(){if(M.postMessage&&!M.importScripts){var P=!0,f=M.onmessage;return M.onmessage=function(){P=!1},M.postMessage("","*"),M.onmessage=f,P}}()?function C(){var P="setImmediate$"+Math.random()+"$",f=function(I){I.source===M&&"string"==typeof I.data&&0===I.data.indexOf(P)&&h(+I.data.slice(P.length))};M.addEventListener?M.addEventListener("message",f,!1):M.attachEvent("onmessage",f),N=function(I){M.postMessage(P+I,"*")}}():M.MessageChannel?function F(){var P=new MessageChannel;P.port1.onmessage=function(f){h(f.data)},N=function(f){P.port2.postMessage(f)}}():p&&"onreadystatechange"in p.createElement("script")?function R(){var P=p.documentElement;N=function(f){var I=p.createElement("script");I.onreadystatechange=function(){h(f),I.onreadystatechange=null,P.removeChild(I),I=null},P.appendChild(I)}}():function w(){N=function(P){setTimeout(h,0,P)}}(),b.setImmediate=function O(P){"function"!=typeof P&&(P=new Function(""+P));for(var f=new Array(arguments.length-1),I=0;I<f.length;I++)f[I]=arguments[I+1];return d[D]={callback:P,args:f},N(D),D++},b.clearImmediate=L}function L(P){delete d[P]}function h(P){if(v)setTimeout(h,0,P);else{var f=d[P];if(f){v=!0;try{!function m(P){var f=P.callback,I=P.args;switch(I.length){case 0:f();break;case 1:f(I[0]);break;case 2:f(I[0],I[1]);break;case 3:f(I[0],I[1],I[2]);break;default:f.apply(void 0,I)}}(f)}finally{L(P),v=!1}}}}}(typeof self>"u"?typeof x>"u"?this:x:self)}).call(this,u("./node_modules/webpack/buildin/global.js"),u("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(Oe,k,u){Oe.exports=M;var x=u("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;function M(){x.call(this)}u("./node_modules/inherits/inherits_browser.js")(M,x),M.Readable=u("./node_modules/readable-stream/readable-browser.js"),M.Writable=u("./node_modules/readable-stream/writable-browser.js"),M.Duplex=u("./node_modules/readable-stream/duplex-browser.js"),M.Transform=u("./node_modules/readable-stream/transform.js"),M.PassThrough=u("./node_modules/readable-stream/passthrough.js"),M.Stream=M,M.prototype.pipe=function(T,D){var d=this;function v(g){T.writable&&!1===T.write(g)&&d.pause&&d.pause()}function p(){d.readable&&d.resume&&d.resume()}d.on("data",v),T.on("drain",p),!T._isStdio&&(!D||!1!==D.end)&&(d.on("end",O),d.on("close",L));var N=!1;function O(){N||(N=!0,T.end())}function L(){N||(N=!0,"function"==typeof T.destroy&&T.destroy())}function m(g){if(h(),0===x.listenerCount(this,"error"))throw g}function h(){d.removeListener("data",v),T.removeListener("drain",p),d.removeListener("end",O),d.removeListener("close",L),d.removeListener("error",m),T.removeListener("error",m),d.removeListener("end",h),d.removeListener("close",h),T.removeListener("close",h)}return d.on("error",m),T.on("error",m),d.on("end",h),d.on("close",h),T.on("close",h),T.emit("pipe",d),T}},"./node_modules/string_decoder/lib/string_decoder.js":function(Oe,k,u){"use strict";var x=u("./node_modules/safe-buffer/index.js").Buffer,y=x.isEncoding||function(R){switch((R=""+R)&&R.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function D(R){var w;switch(this.encoding=function T(R){var w=function M(R){if(!R)return"utf8";for(var w;;)switch(R){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return R;default:if(w)return;R=(""+R).toLowerCase(),w=!0}}(R);if("string"!=typeof w&&(x.isEncoding===y||!y(R)))throw new Error("Unknown encoding: "+R);return w||R}(R),this.encoding){case"utf16le":this.text=m,this.end=h,w=4;break;case"utf8":this.fillLast=N,w=4;break;case"base64":this.text=g,this.end=S,w=3;break;default:return this.write=C,void(this.end=F)}this.lastNeed=0,this.lastTotal=0,this.lastChar=x.allocUnsafe(w)}function d(R){return R<=127?0:R>>5==6?2:R>>4==14?3:R>>3==30?4:R>>6==2?-1:-2}function N(R){var w=this.lastTotal-this.lastNeed,b=function p(R,w,b){if(128!=(192&w[0]))return R.lastNeed=0,"\ufffd";if(R.lastNeed>1&&w.length>1){if(128!=(192&w[1]))return R.lastNeed=1,"\ufffd";if(R.lastNeed>2&&w.length>2&&128!=(192&w[2]))return R.lastNeed=2,"\ufffd"}}(this,R);return void 0!==b?b:this.lastNeed<=R.length?(R.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(R.copy(this.lastChar,w,0,R.length),void(this.lastNeed-=R.length))}function m(R,w){if((R.length-w)%2==0){var b=R.toString("utf16le",w);if(b){var P=b.charCodeAt(b.length-1);if(P>=55296&&P<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=R[R.length-1],R.toString("utf16le",w,R.length-1)}function h(R){var w=R&&R.length?this.write(R):"";return this.lastNeed?w+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):w}function g(R,w){var b=(R.length-w)%3;return 0===b?R.toString("base64",w):(this.lastNeed=3-b,this.lastTotal=3,1===b?this.lastChar[0]=R[R.length-1]:(this.lastChar[0]=R[R.length-2],this.lastChar[1]=R[R.length-1]),R.toString("base64",w,R.length-b))}function S(R){var w=R&&R.length?this.write(R):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function C(R){return R.toString(this.encoding)}function F(R){return R&&R.length?this.write(R):""}k.StringDecoder=D,D.prototype.write=function(R){if(0===R.length)return"";var w,b;if(this.lastNeed){if(void 0===(w=this.fillLast(R)))return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<R.length?w?w+this.text(R,b):this.text(R,b):w||""},D.prototype.end=function L(R){var w=R&&R.length?this.write(R):"";return this.lastNeed?w+"\ufffd":w},D.prototype.text=function O(R,w){var b=function v(R,w,b){var P=w.length-1;if(P<b)return 0;var f=d(w[P]);return f>=0?(f>0&&(R.lastNeed=f-1),f):--P<b||-2===f?0:(f=d(w[P]))>=0?(f>0&&(R.lastNeed=f-2),f):--P<b||-2===f?0:(f=d(w[P]))>=0?(f>0&&(2===f?f=0:R.lastNeed=f-3),f):0}(this,R,w);if(!this.lastNeed)return R.toString("utf8",w);this.lastTotal=b;var P=R.length-(b-this.lastNeed);return R.copy(this.lastChar,0,P),R.toString("utf8",w,P)},D.prototype.fillLast=function(R){if(this.lastNeed<=R.length)return R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);R.copy(this.lastChar,this.lastTotal-this.lastNeed,0,R.length),this.lastNeed-=R.length}},"./node_modules/util-deprecate/browser.js":function(Oe,k,u){(function(x){function M(T){try{if(!x.localStorage)return!1}catch{return!1}var D=x.localStorage[T];return null!=D&&"true"===String(D).toLowerCase()}Oe.exports=function y(T,D){if(M("noDeprecation"))return T;var d=!1;return function v(){if(!d){if(M("throwDeprecation"))throw new Error(D);M("traceDeprecation")?console.trace(D):console.warn(D),d=!0}return T.apply(this,arguments)}}}).call(this,u("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(Oe,k){var u;u=function(){return this}();try{u=u||new Function("return this")()}catch{"object"==typeof window&&(u=window)}Oe.exports=u},"./src/core/Debug.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js"),D=1,d=2,v=3,p=4,N=5;function O(m){m=m||{};var F,R,w,b,h=this.context,g=Object(x.default)(h).getInstance(),S=m.settings,C=[];function f(Z){return Z&&Z.bind?Z.bind(window.console):window.console.log.bind(window.console)}function z(){for(var Z=arguments.length,oe=new Array(Z),he=0;he<Z;he++)oe[he]=arguments[he];se.apply(void 0,[D,this].concat(oe))}function q(){for(var Z=arguments.length,oe=new Array(Z),he=0;he<Z;he++)oe[he]=arguments[he];se.apply(void 0,[d,this].concat(oe))}function J(){for(var Z=arguments.length,oe=new Array(Z),he=0;he<Z;he++)oe[he]=arguments[he];se.apply(void 0,[v,this].concat(oe))}function X(){for(var Z=arguments.length,oe=new Array(Z),he=0;he<Z;he++)oe[he]=arguments[he];se.apply(void 0,[p,this].concat(oe))}function V(){for(var Z=arguments.length,oe=new Array(Z),he=0;he<Z;he++)oe[he]=arguments[he];se.apply(void 0,[N,this].concat(oe))}function se(Z,oe){var he="",ve=null;R&&(ve=(new Date).getTime(),he+="["+(ve-b)+"]"),w&&oe&&oe.getClassName&&(he+="["+oe.getClassName()+"]",oe.getType&&(he+="["+oe.getType()+"]")),he.length>0&&(he+=" ");for(var re=arguments.length,ge=new Array(re>2?re-2:0),ie=2;ie<re;ie++)ge[ie-2]=arguments[ie];Array.apply(null,ge).forEach(function(de){he+=de+" "}),C[Z]&&S.get().debug.logLevel>=Z&&C[Z](he),S&&S.get().debug.dispatchEvent&&g.trigger(y.default.LOG,{message:he,level:Z})}return F={getLogger:function I(Z){return{fatal:z.bind(Z),error:q.bind(Z),warn:J.bind(Z),info:X.bind(Z),debug:V.bind(Z)}},setLogTimestampVisible:function H(Z){R=Z},setCalleeNameVisible:function $(Z){w=Z}},function P(){R=!0,w=!0,b=(new Date).getTime(),typeof window<"u"&&window.console&&(C[D]=f(window.console.error),C[d]=f(window.console.error),C[v]=f(window.console.warn),C[p]=f(window.console.info),C[N]=f(window.console.debug))}(),F}O.__dashjs_factory_name="Debug";var L=M.default.getSingletonFactory(O);L.LOG_LEVEL_NONE=0,L.LOG_LEVEL_FATAL=D,L.LOG_LEVEL_ERROR=d,L.LOG_LEVEL_WARNING=v,L.LOG_LEVEL_INFO=p,L.LOG_LEVEL_DEBUG=N,M.default.updateSingletonFactory(O.__dashjs_factory_name,L),k.default=L},"./src/core/EventBus.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/MediaPlayerEvents.js");function D(){var v={};function L(g,S,C){var F=-1;return v[g]&&v[g].some(function(R,w){if(R&&R.callback===S&&(!C||C===R.scope))return F=w,!0}),F}return{on:function p(g,S,C){var F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!g)throw new Error("event type cannot be null or undefined");if(!S||"function"!=typeof S)throw new Error("listener must be a function: "+S);var R=F.priority||0;if(!(L(g,S,C)>=0)){v[g]=v[g]||[];var w={callback:S,scope:C,priority:R};C&&C.getStreamId&&(w.streamId=C.getStreamId()),C&&C.getType&&(w.mediaType=C.getType()),F&&F.mode&&(w.mode=F.mode),v[g].some(function(P,f){if(P&&R>P.priority)return v[g].splice(f,0,w),!0})||v[g].push(w)}},off:function N(g,S,C){if(g&&S&&v[g]){var F=L(g,S,C);F<0||(v[g][F]=null)}},trigger:function O(g){var S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(g&&v[g]){if((S=S||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");S.type=g,C.streamId&&(S.streamId=C.streamId),C.mediaType&&(S.mediaType=C.mediaType),v[g].filter(function(F){return!(!F||C.streamId&&F.streamId&&F.streamId!==C.streamId||C.mediaType&&F.mediaType&&F.mediaType!==C.mediaType||C.mode&&F.mode&&F.mode!==C.mode||!F.mode&&C.mode&&C.mode===y.default.EVENT_MODE_ON_RECEIVE)}).forEach(function(F){return F&&F.callback.call(F.scope,S)})}},reset:function m(){v={}}}}D.__dashjs_factory_name="EventBus";var d=x.default.getSingletonFactory(D);d.EVENT_PRIORITY_LOW=0,d.EVENT_PRIORITY_HIGH=5e3,x.default.updateSingletonFactory(D.__dashjs_factory_name,d),k.default=d},"./src/core/FactoryMaker.js":function(Oe,k,u){"use strict";u.r(k);var x=function(){var y,M=[],T={},D={};function v(w,b){for(var P in M){var f=M[P];if(f.context===w&&f.name===b)return f.instance}return null}function O(w,b){return b[w]}function L(w,b,P){w in P&&(P[w]=b)}function R(w,b,P){var f,I=w.__dashjs_factory_name,H=b[I];if(H){var $=H.instance;if(!H.override)return $.apply({context:b,factory:y},P);for(var z in f=w.apply({context:b},P),$=$.apply({context:b,factory:y,parent:f},P))f.hasOwnProperty(z)&&(f[z]=$[z])}else f=w.apply({context:b},P);return f.getClassName=function(){return I},f}return y={extend:function d(w,b,P,f){!f[w]&&b&&(f[w]={instance:b,override:P})},getSingletonInstance:v,setSingletonInstance:function p(w,b,P){for(var f in M){var I=M[f];if(I.context===w&&I.name===b)return void(M[f].instance=P)}M.push({name:b,context:w,instance:P})},deleteSingletonInstances:function N(w){M=M.filter(function(b){return b.context!==w})},getSingletonFactory:function F(w){var b=O(w.__dashjs_factory_name,T);return b||(b=function(f){var I;return void 0===f&&(f={}),{getInstance:function(){return I||(I=v(f,w.__dashjs_factory_name)),I||(I=R(w,f,arguments),M.push({name:w.__dashjs_factory_name,context:f,instance:I})),I}}},T[w.__dashjs_factory_name]=b),b},getSingletonFactoryByName:function C(w){return O(w,T)},updateSingletonFactory:function S(w,b){L(w,b,T)},getClassFactory:function g(w){var b=O(w.__dashjs_factory_name,D);return b||(b=function(f){return void 0===f&&(f={}),{create:function(){return R(w,f,arguments)}}},D[w.__dashjs_factory_name]=b),b},getClassFactoryByName:function h(w){return O(w,D)},updateClassFactory:function m(w,b){L(w,b,D)}}}();k.default=x},"./src/core/Settings.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Utils.js"),M=u("./src/core/Debug.js"),T=u("./src/streaming/constants/Constants.js"),D=u("./src/streaming/vo/metrics/HTTPRequest.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js");function p(m){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function N(m,h,g){return h in m?Object.defineProperty(m,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):m[h]=g,m}function O(){var m,h,S=this.context,C=Object(d.default)(S).getInstance(),F={"streaming.delay.liveDelay":v.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":v.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":v.default.SETTING_UPDATED_CATCHUP_ENABLED},R={debug:{logLevel:M.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,eventControllerRefreshDelay:150,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0},liveCatchup:{maxDrift:NaN,playbackRate:NaN,playbackBufferMin:.5,enabled:null,latencyThreshold:60,mode:T.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:T.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:T.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:T.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:1e4,retryIntervals:(m={},N(m,D.HTTPRequest.MPD_TYPE,500),N(m,D.HTTPRequest.XLINK_EXPANSION_TYPE,500),N(m,D.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),N(m,D.HTTPRequest.INIT_SEGMENT_TYPE,1e3),N(m,D.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),N(m,D.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),N(m,D.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),N(m,D.HTTPRequest.LICENSE,1e3),N(m,D.HTTPRequest.OTHER_TYPE,1e3),N(m,"lowLatencyReductionFactor",10),m),retryAttempts:(h={},N(h,D.HTTPRequest.MPD_TYPE,3),N(h,D.HTTPRequest.XLINK_EXPANSION_TYPE,1),N(h,D.HTTPRequest.MEDIA_SEGMENT_TYPE,3),N(h,D.HTTPRequest.INIT_SEGMENT_TYPE,3),N(h,D.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),N(h,D.HTTPRequest.INDEX_SEGMENT_TYPE,3),N(h,D.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),N(h,D.HTTPRequest.LICENSE,3),N(h,D.HTTPRequest.OTHER_TYPE,3),N(h,"lowLatencyMultiplyFactor",5),h),abr:{movingAverageMethod:T.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:T.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!1},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:T.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:T.default.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},w=y.default.clone(R);function b(H,$,z){for(var q in H)H.hasOwnProperty(q)&&($.hasOwnProperty(q)?"object"!==p(H[q])||H[q]instanceof Array||null===H[q]?($[q]=y.default.clone(H[q]),F[z+q]&&C.trigger(F[z+q])):b(H[q],$[q],z.slice()+q+"."):console.error("Settings parameter "+z+q+" is not supported"))}return{get:function P(){return w},update:function f(H){"object"===p(H)&&b(H,w,"")},reset:function I(){w=y.default.clone(R)}}}O.__dashjs_factory_name="Settings";var L=x.default.getSingletonFactory(O);k.default=L},"./src/core/Utils.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./node_modules/path-browserify/index.js"),y=u.n(x);function M(p){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(O){return typeof O}:function(O){return O&&"function"==typeof Symbol&&O.constructor===Symbol&&O!==Symbol.prototype?"symbol":typeof O})(p)}function D(p,N){for(var O=0;O<N.length;O++){var L=N[O];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(p,L.key,L)}}k.default=function(){function p(){!function T(p,N){if(!(p instanceof N))throw new TypeError("Cannot call a class as a function")}(this,p)}return function d(p,N,O){return N&&D(p.prototype,N),O&&D(p,O),p}(p,null,[{key:"mixin",value:function(O,L,m){var h,g={};if(O)for(var S in L)L.hasOwnProperty(S)&&(h=L[S],(!(S in O)||O[S]!==h&&(!(S in g)||g[S]!==h))&&(O[S]="object"===M(O[S])&&null!==O[S]?p.mixin(O[S],h,m):m(h)));return O}},{key:"clone",value:function(O){if(!O||"object"!==M(O))return O;var L;if(O instanceof Array){L=[];for(var m=0,h=O.length;m<h;++m)m in O&&L.push(p.clone(O[m]))}else L={};return p.mixin(L,O,p.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(O,L){try{if(!L||0===L.length)return O;var m=new URL(O);return L.forEach(function(h){h.key&&h.value&&m.searchParams.set(h.key,h.value)}),m.href}catch{return O}}},{key:"parseHttpHeaders",value:function(O){var L={};if(!O)return L;for(var m=O.trim().split("\r\n"),h=0,g=m.length;h<g;h++){var S=m[h],C=S.indexOf(": ");C>0&&(L[S.substring(0,C)]=S.substring(C+2))}return L}},{key:"generateUuid",value:function(){var O=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(m){var h=(O+16*Math.random())%16|0;return O=Math.floor(O/16),("x"==m?h:3&h|8).toString(16)})}},{key:"generateHashCode",value:function(O){var L=0;if(0===O.length)return L;for(var m=0;m<O.length;m++)L=(L<<5)-L+O.charCodeAt(m),L|=0;return L}},{key:"getRelativeUrl",value:function(O,L){try{var m=new URL(O),h=new URL(L);if(m.protocol=h.protocol,m.origin!==h.origin)return L;var g=y.a.relative(m.pathname.substr(0,m.pathname.lastIndexOf("/")),h.pathname.substr(0,h.pathname.lastIndexOf("/"))),S=0===g.length?1:0;return g+=h.pathname.substr(h.pathname.lastIndexOf("/")+S,h.pathname.length-1),h.pathname.length<g.length?h.pathname:g}catch{return L}}}]),p}()},"./src/core/Version.js":function(Oe,k,u){"use strict";u.r(k),u.d(k,"getVersionString",function(){return y});function y(){return"4.4.0"}},"./src/core/errors/Errors.js":function(Oe,k,u){"use strict";function y(h){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function T(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function d(h){var g=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=O(h);if(g){var R=O(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return v(this,F)}}function v(h,g){return!g||"object"!==y(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function O(h){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){T(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,C.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,C.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,C.SEGMENT_BASE_LOADER_ERROR_CODE=15,C.TIME_SYNC_FAILED_ERROR_CODE=16,C.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,C.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,C.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,C.APPEND_ERROR_CODE=20,C.REMOVE_ERROR_CODE=21,C.DATA_UPDATE_FAILED_ERROR_CODE=22,C.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,C.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,C.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,C.DOWNLOAD_ERROR_ID_SIDX_CODE=26,C.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,C.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,C.DOWNLOAD_ERROR_ID_XLINK_CODE=29,C.MANIFEST_ERROR_ID_PARSE_CODE=31,C.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,C.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,C.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,C.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,C.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",C.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",C.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",C.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",C.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",C.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",C.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",C.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",C.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",C.APPEND_ERROR_MESSAGE="chunk is not defined",C.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",C.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",C.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",C.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",C.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",C.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",C}return S}(u("./src/core/errors/ErrorsBase.js").default));k.default=m},"./src/core/errors/ErrorsBase.js":function(Oe,k,u){"use strict";function y(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(){!function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D)}return function M(D,d,v){return d&&y(D.prototype,d),v&&y(D,v),D}(D,[{key:"extend",value:function(v,p){if(v){var N=!!p&&p.override,O=!!p&&p.publicOnly;for(var L in v)!v.hasOwnProperty(L)||this[L]&&!N||O&&-1===v[L].indexOf("public_")||(this[L]=v[L])}}}]),D}()},"./src/core/events/CoreEvents.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/events/EventsBase.js");function y(m){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function T(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),h&&D(m,h)}function D(m,h){return(D=Object.setPrototypeOf||function(S,C){return S.__proto__=C,S})(m,h)}function d(m){var h=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var C,S=O(m);if(h){var F=O(this).constructor;C=Reflect.construct(S,arguments,F)}else C=S.apply(this,arguments);return v(this,C)}}function v(m,h){return!h||"object"!==y(h)&&"function"!=typeof h?function p(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(m):h}function O(m){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}k.default=function(m){T(g,m);var h=d(g);function g(){var S;return function M(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}(this,g),(S=h.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",S.BUFFERING_COMPLETED="bufferingCompleted",S.BUFFER_CLEARED="bufferCleared",S.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",S.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",S.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",S.CURRENT_TRACK_CHANGED="currentTrackChanged",S.DATA_UPDATE_COMPLETED="dataUpdateCompleted",S.INBAND_EVENTS="inbandEvents",S.INITIAL_STREAM_SWITCH="initialStreamSwitch",S.INIT_FRAGMENT_LOADED="initFragmentLoaded",S.INIT_FRAGMENT_NEEDED="initFragmentNeeded",S.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",S.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",S.LOADING_COMPLETED="loadingCompleted",S.LOADING_PROGRESS="loadingProgress",S.LOADING_DATA_PROGRESS="loadingDataProgress",S.LOADING_ABANDONED="loadingAborted",S.MANIFEST_UPDATED="manifestUpdated",S.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",S.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",S.QUOTA_EXCEEDED="quotaExceeded",S.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",S.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",S.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",S.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",S.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",S.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",S.SOURCE_BUFFER_ERROR="sourceBufferError",S.STREAMS_COMPOSED="streamsComposed",S.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",S.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",S.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",S.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",S.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",S.URL_RESOLUTION_FAILED="urlResolutionFailed",S.VIDEO_CHUNK_RECEIVED="videoChunkReceived",S.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",S.XLINK_ELEMENT_LOADED="xlinkElementLoaded",S.XLINK_READY="xlinkReady",S.SEEK_TARGET="seekTarget",S.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",S.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",S.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",S}return g}(x.default)},"./src/core/events/Events.js":function(Oe,k,u){"use strict";function y(h){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}function T(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function d(h){var g=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=O(h);if(g){var R=O(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return v(this,F)}}function v(h,g){return!g||"object"!==y(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function O(h){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var L=function(h){T(S,h);var g=d(S);function S(){return M(this,S),g.apply(this,arguments)}return S}(u("./src/core/events/CoreEvents.js").default),m=new L;k.default=m},"./src/core/events/EventsBase.js":function(Oe,k,u){"use strict";function y(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(){!function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D)}return function M(D,d,v){return d&&y(D.prototype,d),v&&y(D,v),D}(D,[{key:"extend",value:function(v,p){if(v){var N=!!p&&p.override,O=!!p&&p.publicOnly;for(var L in v)!v.hasOwnProperty(L)||this[L]&&!N||O&&-1===v[L].indexOf("public_")||(this[L]=v[L])}}}]),D}()},"./src/dash/DashAdapter.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/constants/DashConstants.js"),y=u("./src/dash/vo/RepresentationInfo.js"),M=u("./src/dash/vo/MediaInfo.js"),T=u("./src/dash/vo/StreamInfo.js"),D=u("./src/dash/vo/ManifestInfo.js"),d=u("./src/dash/vo/Event.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/dash/models/DashManifestModel.js"),N=u("./src/dash/models/PatchManifestModel.js");function O(){var L,m,h,g,S,C,F,R=this.context;function H(Be){return m.getRolesForAdaptation(Be).filter(function(Le){return Le.value===x.default.MAIN})[0]}function $(Be,Le,Ce){var Ue=m.getAdaptationsForType(g[0].mpd.manifest,Be,Le);if(!Ue||0===Ue.length)return null;if(Ue.length>1&&Ce){var Qe=J(Ce,Le);if(S[Ce.id]&&S[Ce.id][Le])for(var st=0,ct=Ue.length;st<ct;st++)if(z(S[Ce.id][Le],Qe[st]))return Ue[st];for(var Ze=0,ht=Ue.length;Ze<ht;Ze++)if(H(Ue[Ze]))return Ue[Ze]}return Ue[0]}function z(Be,Le){if(!Be||!Le)return!1;var Ce=Be.id===Le.id,Ue=Be.codec===Le.codec,Qe=Be.viewpoint===Le.viewpoint,st=Be.lang===Le.lang,ct=Be.roles.toString()===Le.roles.toString(),Ze=Be.accessibility.toString()===Le.accessibility.toString(),ht=Be.audioChannelConfiguration.toString()===Le.audioChannelConfiguration.toString();return Ce&&Ue&&Qe&&st&&ct&&Ze&&ht}function q(Be,Le,Ce,Ue,Qe,st){var ht,Ut,It,Wt,Fe,ct=[];if(!Ue||0===Ue.length)return[];var Ye=m.getAdaptationsForPeriod(Le);for(It=0,Fe=Ue.length;It<Fe;It++)if(ht=xe(Ye[Ut=m.getIndexForAdaptation(Ue[It],Be,Ce.index)]),st){var et=ht.accessibility.length;for(Wt=0;Wt<et;Wt++)if(ht){var Rt=ht.accessibility[Wt];if(0===Rt.indexOf("cea-608:")){var bt=Rt.substring(8).split(";");if("CC"===bt[0].substring(0,2))for(Wt=0;Wt<bt.length;Wt++)ht||(ht=xe.call(this,Ye[Ut])),ze(ht,bt[Wt].substring(0,3),bt[Wt].substring(4)),ct.push(ht),ht=null;else for(Wt=0;Wt<bt.length;Wt++)ht||(ht=xe.call(this,Ye[Ut])),ze(ht,"CC"+(Wt+1),bt[Wt]),ct.push(ht),ht=null}else 0===Rt.indexOf("cea-608")&&(ze(ht,C.CC1,"eng"),ct.push(ht),ht=null)}}else Qe===C.IMAGE?(ut(ht),ct.push(ht),ht=null):ht&&ct.push(ht);return ct}function J(Be,Le,Ce){var Ue=g,Qe=Ce,st=[];if(Qe)Lt(),Ue=ee(Qe);else{if(!(g.length>0))return st;Qe=g[0].mpd.manifest}var ct=Re(Be,Ue),Ze=m.getAdaptationsForType(Qe,Be?Be.index:null,Le);return st=q(Qe,ct,Be,Ze,Le),Le===C.TEXT&&(Ze=m.getAdaptationsForType(Qe,Be?Be.index:null,C.VIDEO),st=st.concat(q(Qe,ct,Be,Ze,Le,!0))),st}function ee(Be){var Le=G(Be);return m.getRegularPeriods(Le)}function G(Be){var Le=we(Be);return m.getMpd(Le)}function Te(){g=[],S={}}function we(Be){return Be||(g.length>0?g[0].mpd.manifest:null)}function ke(Be){try{var Le=Re(Be.streamInfo,g),Ce=m.getAdaptationsForPeriod(Le);return Be&&Be.streamInfo&&void 0!==Be.streamInfo.id&&Ce?Ce[Be.index]:null}catch{return null}}function Re(Be,Le){for(var Ce=Le.length,Ue=0;Ue<Ce;Ue++){var Qe=Le[Ue];if(Be&&Be.id===Qe.id)return Qe}return null}function xe(Be){if(!Be)return null;var Ue,Le=new M.default,Ce=Be.period.mpd.manifest.Period_asArray[Be.period.index].AdaptationSet_asArray[Be.index];if(Le.id=Be.id,Le.index=Be.index,Le.type=Be.type,Le.streamInfo=at(Be.period),Le.representationCount=m.getRepresentationCount(Ce),Le.labels=m.getLabelsForAdaptation(Ce),Le.lang=m.getLanguageForAdaptation(Ce),Ue=m.getViewpointForAdaptation(Ce),Le.viewpoint=Ue?Ue.value:void 0,Le.accessibility=m.getAccessibilityForAdaptation(Ce).map(function(ct){var Ze=ct.value,ht=Ze;return ct.schemeIdUri&&ct.schemeIdUri.search("cea-608")>=0&&typeof F<"u"&&(ht=Ze?"cea-608:"+Ze:"cea-608",Le.embeddedCaptions=!0),ht}),Le.audioChannelConfiguration=m.getAudioChannelConfigurationForAdaptation(Ce).map(function(ct){return ct.value}),0===Le.audioChannelConfiguration.length&&Array.isArray(Ce.Representation_asArray)&&Ce.Representation_asArray.length>0&&(Le.audioChannelConfiguration=m.getAudioChannelConfigurationForRepresentation(Ce.Representation_asArray[0]).map(function(ct){return ct.value})),Le.roles=m.getRolesForAdaptation(Ce).map(function(ct){return ct.value}),Le.codec=m.getCodec(Ce),Le.mimeType=m.getMimeType(Ce),Le.contentProtection=m.getContentProtectionData(Ce),Le.bitrateList=m.getBitrateListForAdaptation(Ce),Le.selectionPriority=m.getSelectionPriority(Ce),Le.contentProtection){var Qe=Le.contentProtection.map(function(ct){return m.getKID(ct)}).filter(function(ct){return null!==ct});if(Qe.length){var st=Qe[0];Le.contentProtection.forEach(function(ct){ct.keyId=st})}}return Le.isText=m.getIsText(Ce),Le.supplementalProperties=m.getSupplementalProperties(Ce),Le.isFragmented=m.getIsFragmented(Ce),Le.isEmbedded=!1,Le}function ze(Be,Le,Ce){Be.id=Le,Be.index=100+parseInt(Le.substring(2,3)),Be.type=C.TEXT,Be.codec="cea-608-in-SEI",Be.isEmbedded=!0,Be.isFragmented=!1,Be.lang=Ce,Be.roles=["caption"]}function ut(Be){Be.type=C.IMAGE}function at(Be){var Le=new T.default;return Le.id=Be.id,Le.index=Be.index,Le.start=Be.start,Le.duration=Be.duration,Le.manifestInfo=function yt(Be){var Le=new D.default;return Le.dvrWindowSize=Be.timeShiftBufferDepth,Le.loadedTime=Be.manifest.loadedTime,Le.availableFrom=Be.availabilityStartTime,Le.minBufferTime=Be.manifest.minBufferTime,Le.maxFragmentDuration=Be.maxSegmentDuration,Le.duration=m.getDuration(Be.manifest),Le.isDynamic=m.getIsDynamic(Be.manifest),Le.serviceDescriptions=m.getServiceDescriptions(Be.manifest),Le.protocol=Be.manifest.protocol,Le}(Be.mpd),Le.isLast=1===Be.mpd.manifest.Period_asArray.length||Math.abs(Le.start+Le.duration-Le.manifestInfo.duration)<1,Le}function Lt(){if(!C)throw new Error("setConfig function has to be called previously")}function kt(Be){return g.length>0?g[0].mpd.manifest.Period_asArray[Be]:null}function nn(Be,Le,Ce){var Qe,st,ct,Ze,ht;if(Be)for(Qe=Be.AdaptationSet_asArray,Ze=0;Ze<Qe.length;Ze+=1)for(ct=Qe[Ze].Representation_asArray,ht=0;ht<ct.length;ht+=1)if(Le===(st=ct[ht]).id)return Ce?ht:st;return null}return L={getBandwidthForRepresentation:function Y(Be,Le){var Ce;return(Ce=nn(kt(Le),Be))?Ce.bandwidth:null},getIndexForRepresentation:function W(Be,Le){return function Zt(Be,Le){var Ce=nn(Be,Le,!0);return null!==Ce?Ce:-1}(kt(Le),Be)},getMaxIndexForBufferType:function _e(Be,Le){return function sn(Be,Le){var Ce,Ue,Qe,st;if(!Be||!Le)return-1;for(Ue=Be.AdaptationSet_asArray,st=0;st<Ue.length;st+=1)if(Qe=(Ce=Ue[st]).Representation_asArray,m.getIsTypeOf(Ce,Le))return Qe.length;return-1}(kt(Le),Be)},convertRepresentationToRepresentationInfo:function f(Be){if(Be){var Le=new y.default,Ue=m.getRepresentationFor(Be.index,Be.adaptation.period.mpd.manifest.Period_asArray[Be.adaptation.period.index].AdaptationSet_asArray[Be.adaptation.index]);return Le.id=Be.id,Le.quality=Be.index,Le.bandwidth=m.getBandwidth(Ue),Le.fragmentDuration=Be.segmentDuration||(Be.segments&&Be.segments.length>0?Be.segments[0].duration:NaN),Le.MSETimeOffset=Be.MSETimeOffset,Le.mediaInfo=xe(Be.adaptation),Le}return null},getStreamsInfo:function V(Be,Le){var Ce=[],Ue=g;if(Be&&(Lt(),Ue=ee(Be)),Ue.length>0){(!Le||Le>Ue.length)&&(Le=Ue.length);for(var Qe=0;Qe<Le;Qe++)Ce.push(at(Ue[Qe]))}return Ce},getMediaInfoForType:function I(Be,Le){if(0===g.length||!Be)return null;var Ce=Re(Be,g);if(!Ce)return null;var Ue=m.getAdaptationsForPeriod(Ce),Qe=$(Be.index,Le,Be);return Qe?xe(Ue[m.getIndexForAdaptation(Qe,g[0].mpd.manifest,Be.index)]):null},getAllMediaInfoForType:J,getAdaptationForType:$,getRealAdaptation:function se(Be,Le){var Ce,Ue,Qe=Re(Be,g);return Ce=Le?Le.id:null,g.length>0&&Qe&&(Ue=Ce?m.getAdaptationForId(Ce,g[0].mpd.manifest,Qe.index):m.getAdaptationForIndex(Le?Le.index:null,g[0].mpd.manifest,Qe.index)),Ue},getProducerReferenceTimes:function Z(Be,Le){var Ce,Ue,Qe=Re(Be,g);return Ce=Le?Le.id:null,g.length>0&&Qe&&(Ue=Ce?m.getAdaptationForId(Ce,g[0].mpd.manifest,Qe.index):m.getAdaptationForIndex(Le?Le.index:null,g[0].mpd.manifest,Qe.index)),Ue?m.getProducerReferenceTimesForAdaptation(Ue):[]},getRealPeriodByIndex:function he(Be){return m.getRealPeriodForIndex(Be,g[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function oe(Be){try{return m.getEssentialPropertiesForRepresentation(Be)}catch{return[]}},getVoRepresentations:function ve(Be){var Ce=ke(Be);return m.getRepresentationsForAdaptation(Ce)},getEventsFor:function ge(Be,Le){var Ce=[];if(g.length>0){var Ue=g[0].mpd.manifest;Be instanceof T.default?Ce=m.getEventsForPeriod(Re(Be,g)):Be instanceof M.default?Ce=m.getEventStreamForAdaptationSet(Ue,ke(Be)):Be instanceof y.default&&(Ce=m.getEventStreamForRepresentation(Ue,Le))}return Ce},getEvent:function re(Be,Le,Ce,Ue){try{if(!Be||!Le||isNaN(Ce)||!Ue)return null;var Qe=Be.scheme_id_uri,st=Be.value;if(!Le[Qe+"/"+st])return null;var Fe,ct=new d.default,Ze=Be.timescale||1,ht=Ue.adaptation.period.start,Ut=Le[Qe+"/"+st],It=isNaN(Ue.presentationTimeOffset)?isNaN(Ut.presentationTimeOffset)?0:Ut.presentationTimeOffset:Ue.presentationTimeOffset,Wt=Be.presentation_time_delta/Ze;Fe=0===Be.version?ht+Ce-It+Wt:ht-It+Wt;var Ye=Be.event_duration,et=Be.id,Rt=Be.message_data;return ct.eventStream=Ut,ct.eventStream.value=st,ct.eventStream.timescale=Ze,ct.duration=Ye,ct.id=et,ct.calculatedPresentationTime=Fe,ct.messageData=Rt,ct.presentationTimeDelta=Wt,ct}catch{return null}},getMpd:G,setConfig:function P(Be){!Be||(Be.constants&&(C=Be.constants),Be.cea608parser&&(F=Be.cea608parser),Be.errHandler&&m.setConfig({errHandler:Be.errHandler}),Be.BASE64&&m.setConfig({BASE64:Be.BASE64}))},updatePeriods:function X(Be){if(!Be)return null;Lt(),g=ee(Be)},getIsTextTrack:function de(Be){return m.getIsText(Be)},getUTCTimingSources:function ue(){var Be=we();return m.getUTCTimingSources(Be)},getSuggestedPresentationDelay:function le(){return m.getSuggestedPresentationDelay(g.length>0?g[0].mpd:null)},getAvailabilityStartTime:function ce(Be){var Le=G(Be);return m.getAvailabilityStartTime(Le)},getIsTypeOf:function me(Be,Le){return m.getIsTypeOf(Be,Le)},getIsDynamic:function ne(Be){var Le=we(Be);return m.getIsDynamic(Le)},getDuration:function pe(Be){var Le=we(Be);return m.getDuration(Le)},getRegularPeriods:ee,getLocation:function j(Be){return m.getLocation(Be)},getPatchLocation:function U(Be){var Le=m.getPatchLocation(Be),Ce=m.getPublishTime(Be);if(!Le||!Ce)return null;if(Le.hasOwnProperty("ttl")&&Ce){var Ue=1e3*parseFloat(Le.ttl);if(Ce.getTime()+Ue<=(new Date).getTime())return null}return Le.__text},getManifestUpdatePeriod:function _(Be){return m.getManifestUpdatePeriod(Be,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function A(Be){return m.getPublishTime(Be)},getIsDVB:function K(Be){return m.hasProfile(Be,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function te(Be){return h.getIsPatch(Be)},getBaseURLsFromElement:function ye(Be){return m.getBaseURLsFromElement(Be)},getRepresentationSortFunction:function Se(){return m.getRepresentationSortFunction()},getCodec:function ae(Be,Le,Ce){return m.getCodec(Be,Le,Ce)},getPeriodById:function Ee(Be){if(!Be||0===g.length)return null;var Le=g.filter(function(Ce){return Ce.id===Be});return Le&&Le.length>0?Le[0]:null},setCurrentMediaInfo:function ie(Be,Le,Ce){S[Be]=S[Be]||{},S[Be][Le]=S[Be][Le]||{},S[Be][Le]=Ce},isPatchValid:function Ne(Be,Le){var Ce=m.getId(Be),Ue=h.getMpdId(Le),Qe=m.getPublishTime(Be),st=h.getPublishTime(Le),ct=h.getOriginalPublishTime(Le);return!!(Ce&&Ue&&Ce==Ue&&Qe&&ct&&Qe.getTime()==ct.getTime()&&st&&Qe.getTime()<st.getTime())},applyPatchToManifest:function Ie(Be,Le){h.getPatchOperations(Le).forEach(function(Ce){var Ue=Ce.getMpdTarget(Be);if(null!==Ue){var Qe=Ue.name,st=Ue.target,ct=Ue.leaf;if(Ce.xpath.findsAttribute()){switch(Ce.action){case"add":case"replace":st[Qe]=Ce.value;break;case"remove":delete st[Qe]}return}var Ze=(st[Qe+"_asArray"]||[]).indexOf(ct),ht="prepend"===Ce.position||"before"===Ce.position;if(("remove"===Ce.action||"replace"===Ce.action)&&(delete st[Qe],-1!=Ze)){var Ut=st[Qe+"_asArray"];Ut.splice(Ze,1),Ut.length>1?st[Qe]=Ut:1==Ut.length?st[Qe]=Ut[0]:delete st[Qe+"_asArray"]}("add"===Ce.action||"replace"===Ce.action)&&Object.keys(Ce.value).forEach(function(It){var Wt=Ce.value[It],Fe=st[It+"_asArray"]||[];0===Fe.length&&st[It]&&Fe.push(st[It]),0===Fe.length?Fe=Wt:Fe.splice.apply(Fe,[It==Qe&&-1!=Ze?Ze+(ht?0:1)+("replace"==Ce.action?-1:0):ht?0:Fe.length,0].concat(Wt)),st[It+"_asArray"]=Fe,st[It]=1==Fe.length?Fe[0]:Fe})}})},areMediaInfosEqual:z,reset:Te},function b(){m=Object(p.default)(R).getInstance(),h=Object(N.default)(R).getInstance(),Te()}(),L}O.__dashjs_factory_name="DashAdapter",k.default=v.default.getSingletonFactory(O)},"./src/dash/DashHandler.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/vo/FragmentRequest.js"),y=u("./src/streaming/vo/metrics/HTTPRequest.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/streaming/MediaPlayerEvents.js"),D=u("./src/dash/utils/SegmentsUtils.js"),d=u("./src/dash/constants/DashConstants.js");function p(N){var R,w,b,P,f,O=(N=N||{}).eventBus,L=N.debug,m=N.urlUtils,h=N.type,g=N.streamInfo,S=N.segmentsController,C=N.timelineConverter,F=N.baseURLController;function z(){return h}function J(){b=null}function V(ce,ne,pe){var G,j,ee=F.resolve(pe.path);return ee&&ne!==ee.url&&m.isRelative(ne)?(G=ee.url,j=ee.serviceLocation,ne&&(G=m.resolve(ne,G))):G=ne,!m.isRelative(G)&&(ce.url=G,ce.serviceLocation=j,!0)}function oe(ce,ne){if(null==ne)return null;var pe=new x.default,ee=ne.representation,G=ee.adaptation.period.mpd.manifest.Period_asArray[ee.adaptation.period.index].AdaptationSet_asArray[ee.adaptation.index].Representation_asArray[ee.index].bandwidth,j=ne.media;return j=Object(D.replaceTokenForTemplate)(j,"Number",ne.replacementNumber),j=Object(D.replaceTokenForTemplate)(j,"Time",ne.replacementTime),j=Object(D.replaceTokenForTemplate)(j,"Bandwidth",G),j=Object(D.replaceIDForTemplate)(j,ee.id),j=Object(D.unescapeDollarsInTemplate)(j),pe.mediaType=z(),pe.type=y.HTTPRequest.MEDIA_SEGMENT_TYPE,pe.range=ne.mediaRange,pe.startTime=ne.presentationStartTime,pe.mediaStartTime=ne.mediaStartTime,pe.duration=ne.duration,pe.timescale=ee.timescale,pe.availabilityStartTime=ne.availabilityStartTime,pe.availabilityEndTime=ne.availabilityEndTime,pe.availabilityTimeComplete=ee.availabilityTimeComplete,pe.wallStartTime=ne.wallStartTime,pe.quality=ee.index,pe.index=ne.index,pe.mediaInfo=ce,pe.adaptationIndex=ee.adaptation.index,pe.representationId=ee.id,V(pe,j,ee)?pe:void 0}function ve(ce,ne,pe){var ee=null;if(!ne||!ne.segmentInfoType)return ee;var G=S.getSegmentByTime(ne,pe);return G&&(b=G,w.debug("Index for time "+pe+" is "+G.index),ee=oe(ce,G)),ee}function le(){w.debug("Dynamic stream complete"),f=!0}return R={initialize:function H(ce){P=ce,f=!1,S.initialize(ce)},getStreamId:function $(){return g.id},getType:z,getStreamInfo:function q(){return g},getInitRequest:function se(ce,ne){return ne?function Z(ce,ne,pe){var ee=new x.default,G=ne.adaptation.period,j=G.start;if(ee.mediaType=pe,ee.type=y.HTTPRequest.INIT_SEGMENT_TYPE,ee.range=ne.range,ee.availabilityStartTime=C.calcAvailabilityStartTimeFromPresentationTime(j,ne,P),ee.availabilityEndTime=C.calcAvailabilityEndTimeFromPresentationTime(j+G.duration,ne,P),ee.quality=ne.index,ee.mediaInfo=ce,ee.representationId=ne.id,V(ee,ne.initialization,ne))return ee.url=Object(D.replaceTokenForTemplate)(ee.url,"Bandwidth",ne.bandwidth),ee}(ce,ne,z()):null},getSegmentRequestForTime:ve,getCurrentIndex:function ue(){return b?b.index:-1},getNextSegmentRequest:function ge(ce,ne){var pe=null;if(!ne||!ne.segmentInfoType)return null;var ee=b?b.index+1:0,G=S.getSegmentByIndex(ne,ee,b?b.mediaStartTime:-1);if(G)pe=oe(ce,G),b=G;else{if(P&&!f)return w.debug(z()+" No segment found at index: "+ee+". Wait for next loop"),null;f=!0}return pe},isLastSegmentRequested:function he(ce,ne){if(!ce||!b)return!1;if(f)return!0;if(!isFinite(ce.adaptation.period.duration)||b.presentationStartTime+b.duration>ne)return!1;if(ce.mediaFinishedInformation&&!isNaN(ce.mediaFinishedInformation.numberOfSegments)&&!isNaN(b.index)&&b.index>=ce.mediaFinishedInformation.numberOfSegments-1){if(!P||ce.segmentInfoType===d.default.SEGMENT_TEMPLATE)return!0;if(P&&ce.segmentInfoType===d.default.SEGMENT_LIST&&ce.adaptation.period.nextPeriodId)return!0}return!!(P&&ce.adaptation.period.nextPeriodId&&ce.segmentInfoType===d.default.SEGMENT_TIMELINE&&ce.mediaFinishedInformation&&!isNaN(ce.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&b&&!isNaN(b.mediaStartTime)&&!isNaN(b.duration)&&b.mediaStartTime+b.duration>=ce.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function X(){J(),O.off(T.default.DYNAMIC_TO_STATIC,le,R)},getNextSegmentRequestIdempotent:function re(ce,ne){var G=S.getSegmentByIndex(ne,b?b.index+1:0,b?b.mediaStartTime:-1);return G?oe(ce,G):null},getValidTimeCloseToTargetTime:function ie(ce,ne,pe,ee){try{if(isNaN(ce)||!ne||!pe)return NaN;if(ce<0&&(ce=0),isNaN(ee)&&(ee=.5),ve(ne,pe,ce))return ce;for(var G=pe.adaptation.period.start,j=pe.adaptation.period.start+pe.adaptation.period.duration,_=Math.min(ce+ee,j),A=Math.max(ce-ee,G),U=NaN,K=null;_<=j||A>=G;){var te=null,ye=null;if(_<=j&&(te=ve(ne,pe,_)),A>=G&&(ye=ve(ne,pe,A)),ye){U=A,K=ye;break}if(te){U=_,K=te;break}_+=ee,A-=ee}if(K){var Se=K.startTime+K.duration;return ce>=K.startTime&&Se-ce>ee?ce:ce<K.startTime?K.startTime:Math.min(Se-ee,U)}return U}catch{return NaN}},getValidTimeAheadOfTargetTime:function de(ce,ne,pe,ee){try{if(isNaN(ce)||!ne||!pe)return NaN;if(ce<0&&(ce=0),isNaN(ee)&&(ee=.5),ve(ne,pe,ce))return ce;if(pe.adaptation.period.start+pe.adaptation.period.duration<ce)return NaN;for(var G=Math.min(pe.adaptation.period.start+pe.adaptation.period.duration,ce+30),j=Math.min(ce+ee,G),_=NaN,A=null;j<=G;){var U=null;if(j<=G&&(U=ve(ne,pe,j)),U){_=j,A=U;break}j+=ee}if(A){var K=A.startTime+A.duration;return ce>=A.startTime&&K-ce>ee?ce:ce<A.startTime?A.startTime:Math.min(K-ee,_)}return _}catch{return NaN}}},function I(){w=L.getLogger(R),J(),O.on(T.default.DYNAMIC_TO_STATIC,le,R)}(),R}p.__dashjs_factory_name="DashHandler",k.default=M.default.getClassFactory(p)},"./src/dash/DashMetrics.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/vo/metrics/HTTPRequest.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/streaming/constants/MetricsConstants.js"),D=u("./src/dash/utils/Round10.js"),d=u("./src/streaming/models/MetricsModel.js"),v=u("./src/core/Utils.js"),p=u("./src/streaming/vo/metrics/PlayList.js");function N(O){var m,h,g,S,L=this.context,C=(O=O||{}).metricsModel;function z(U){var K=C.getMetricsFor(U,!0);if(!K)return null;var Se,te=K.HttpList,ye=null;if(!te||te.length<=0)return null;for(Se=te.length-1;Se>=0;){if(te[Se].responsecode){ye=te[Se];break}Se--}return ye}function q(U){var K=C.getMetricsFor(U,!0);return K&&K.HttpList?K.HttpList:[]}function X(U,K){if(!U)return null;var te=U[K];return te&&0!==te.length?te[te.length-1]:null}return m={getCurrentRepresentationSwitch:function w(U){return X(C.getMetricsFor(U,!0),T.default.TRACK_SWITCH)},getCurrentBufferState:function P(U){return X(C.getMetricsFor(U,!0),T.default.BUFFER_STATE)},getCurrentBufferLevel:function f(U){var te=X(C.getMetricsFor(U,!0),T.default.BUFFER_LEVEL);return te?D.default.round10(te.level/1e3,-3):0},getCurrentHttpRequest:z,getHttpRequests:q,getCurrentDroppedFrames:function V(){return X(C.getMetricsFor(x.default.VIDEO,!0),T.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function Z(U){return X(C.getMetricsFor(U,!0),T.default.SCHEDULING_INFO)},getCurrentDVRInfo:function ue(U){return X(U?C.getMetricsFor(U,!0):C.getMetricsFor(x.default.VIDEO,!0)||C.getMetricsFor(x.default.AUDIO,!0),T.default.DVR_INFO)},getCurrentManifestUpdate:function he(){return X(C.getMetricsFor(x.default.STREAM),T.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function ne(U,K){if(!K)return null;var te={},ye=z(U);ye&&(te=v.default.parseHttpHeaders(ye._responseHeaders));var Se=te[K.toLowerCase()];return void 0===Se?null:Se},getLatestMPDRequestHeaderValueByID:function ce(U){if(!U)return null;var te,ye,Se,K={};for(Se=(te=q(x.default.STREAM)).length-1;Se>=0;Se--)if((ye=te[Se]).type===y.HTTPRequest.MPD_TYPE){K=v.default.parseHttpHeaders(ye._responseHeaders);break}var ae=K[U.toLowerCase()];return void 0===ae?null:ae},addRepresentationSwitch:function b(U,K,te,ye,Se){C.addRepresentationSwitch(U,K,te,ye,Se)},addDVRInfo:function le(U,K,te,ye){C.addDVRInfo(U,K,te,ye)},updateManifestUpdateInfo:function ve(U){var K=this.getCurrentManifestUpdate();C.updateManifestUpdateInfo(K,U)},addManifestUpdateStreamInfo:function re(U){if(U){var K=this.getCurrentManifestUpdate();C.addManifestUpdateStreamInfo(K,U.id,U.index,U.start,U.duration)}},addManifestUpdateRepresentationInfo:function de(U,K){if(U){var te=this.getCurrentManifestUpdate();C.addManifestUpdateRepresentationInfo(te,U.id,U.index,U.streamIndex,K,U.presentationTimeOffset,U.startNumber,U.fragmentInfoType)}},addManifestUpdate:function ge(U){C.addManifestUpdate(x.default.STREAM,U.type,U.requestStartDate,U.requestEndDate)},addHttpRequest:function ie(U,K,te,ye,Se){C.addHttpRequest(U.mediaType,null,U.type,U.url,U.quality,K,U.serviceLocation||null,U.range||null,U.requestStartDate,U.firstByteDate,U.requestEndDate,te,U.duration,ye,Se,U.fileLoaderType)},addSchedulingInfo:function oe(U,K){C.addSchedulingInfo(U.mediaType,new Date,U.type,U.startTime,U.availabilityStartTime,U.duration,U.quality,U.range,K)},addRequestsQueue:function J(U,K,te){C.addRequestsQueue(U,K,te)},addBufferLevel:function I(U,K,te){C.addBufferLevel(U,K,te)},addBufferState:function H(U,K,te){C.addBufferState(U,K,te)},addDroppedFrames:function se(U){C.addDroppedFrames(x.default.VIDEO,U)},addPlayList:function pe(){S&&(C.addPlayList(S),S=null)},addDVBErrors:function A(U){C.addDVBErrors(U)},createPlaylistMetrics:function ee(U,K){(S=new p.PlayList).start=new Date,S.mstart=U,S.starttype=K},createPlaylistTraceMetrics:function G(U,K,te){!0===h&&(h=!1,(g=new p.PlayListTrace).representationid=U,g.start=new Date,g.mstart=K,g.playbackspeed=null!==te?te.toString():null)},updatePlayListTraceMetrics:function j(U){if(g)for(var K in g)g[K]=U[K]},pushPlayListTraceMetrics:function _(U,K){if(!1===h&&S&&g&&g.start){var te=g.start,ye=U.getTime()-te.getTime();g.duration=ye,g.stopreason=K,S.trace.push(g),h=!0}},clearAllCurrentMetrics:function $(){C.clearAllCurrentMetrics()}},function F(){C=C||Object(d.default)(L).getInstance({settings:O.settings}),function R(){h=!0,g=null,S=null}()}(),m}N.__dashjs_factory_name="DashMetrics",k.default=M.default.getSingletonFactory(N)},"./src/dash/SegmentBaseLoader.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/vo/Segment.js"),y=u("./src/streaming/vo/DashJSError.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/streaming/vo/FragmentRequest.js"),D=u("./src/streaming/net/URLLoader.js");function d(){var p,N,O,L,m,h,g,S,C,F,R,w,b,v=this.context;function $(Z,oe,he,ve){var re=null,ge=Z?b.resolve(Z.path):null,ie=ve||{init:!0,url:ge?ge.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:oe};N.debug("Start searching for initialization.");var de=se(ie);S.load({request:de,success:function(ne){if(ie.bytesLoaded=ie.range.end,!(re=L.findInitRange(ne)))return ie.range.end=ie.bytesLoaded+ie.bytesToLoad,$(Z,oe,he,ie);Z.range=re,he(Z)},error:function(){he(Z)}}),N.debug("Perform init search: "+ie.url)}function q(Z,oe,he,ve,re,ge){if(he&&(void 0===he.start||void 0===he.end)){var ie=he?he.toString().split("-"):null;he=ie?{start:parseFloat(ie[0]),end:parseFloat(ie[1])}:null}re=re||J;var de=null,ue=null,le=!!he,ce=Z?b.resolve(Z.path):null,ne={init:!1,url:ce?ce.url:void 0,range:le?he:{start:0,end:1500},searching:!le,bytesLoaded:ge?ge.bytesLoaded:0,bytesToLoad:1500,mediaType:oe},pe=se(ne);S.load({request:pe,success:function(_){var A=ne.bytesToLoad,U=_.byteLength;if(ne.bytesLoaded=ne.range.end-ne.range.start,de=L.parse(_),(ue=de.getBox("sidx"))&&ue.isComplete){var ye,Se,te=ue.references;if(null!=te&&te.length>0&&(ye=1===te[0].reference_type),ye){N.debug("Initiate multiple SIDX load."),ne.range.end=ne.range.start+ue.size;var ae,Y,W,_e,me=[],Te=0,Ne=(ue.offset||ne.range.start)+ue.size,Ie=function(ke){ke?(me=me.concat(ke),++Te>=Y&&(me.sort(function(Re,xe){return Re.startTime-xe.startTime<0?-1:0}),re(me,Z,ve))):re(null,Z,ve)};for(ae=0,Y=te.length;ae<Y;ae++)W=Ne,_e=Ne+te[ae].referenced_size-1,Ne+=te[ae].referenced_size,q(Z,oe,{start:W,end:_e},ve,Ie,ne)}else N.debug("Parsing segments from SIDX. representation "+oe+" - id: "+Z.id+" for range : "+ne.range.start+" - "+ne.range.end),Se=function V(Z,oe){for(var ue,ce,ne,he=Z.references,ve=he.length,re=Z.timescale,ge=Z.earliest_presentation_time,ie=oe.range.start+Z.offset+Z.first_offset+Z.size,de=[],pe=0;pe<ve;pe++)ce=he[pe].subsegment_duration,ne=he[pe].referenced_size,(ue=new x.default).duration=ce,ue.startTime=ge,ue.timescale=re,ue.mediaRange=ie+"-"+(ie+ne-1),de.push(ue),ge+=ce,ie+=ne;return de}(ue,ne),re(Se,Z,ve)}else{if(ue)ne.range.start=ue.offset||ne.range.start,ne.range.end=ne.range.start+(ue.size||A);else{if(U<ne.bytesLoaded)return void re(null,Z,ve);var K=de.getLastBox();K&&K.size?(ne.range.start=K.offset+K.size,ne.range.end=ne.range.start+A):ne.range.end+=A}q(Z,oe,ne.range,ve,null,ne)}},error:function(){re(null,Z,ve)}}),N.debug("Perform SIDX load for type ".concat(oe," : ").concat(ne.url," with range ").concat(ne.range.start," - ").concat(ne.range.end))}function J(Z,oe,he){he({segments:Z,representation:oe,error:Z?void 0:new y.default(C.SEGMENT_BASE_LOADER_ERROR_CODE,C.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function se(Z){if(Z.url){var oe=new T.default;return oe.setInfo(Z),oe}}return p={setConfig:function I(Z){Z.baseURLController&&(b=Z.baseURLController),Z.dashMetrics&&(h=Z.dashMetrics),Z.mediaPlayerModel&&(g=Z.mediaPlayerModel),Z.errHandler&&(O=Z.errHandler),Z.boxParser&&(L=Z.boxParser),Z.debug&&(N=Z.debug.getLogger(p)),Z.requestModifier&&(m=Z.requestModifier),Z.errors&&(C=Z.errors),Z.urlUtils&&(w=Z.urlUtils),Z.constants&&(F=Z.constants),Z.dashConstants&&(R=Z.dashConstants)},initialize:function f(){S=Object(D.default)(v).create({errHandler:O,dashMetrics:h,mediaPlayerModel:g,requestModifier:m,boxParser:L,errors:C,urlUtils:w,constants:F,dashConstants:R})},loadInitialization:function H(Z,oe){return new Promise(function(he){$(Z,oe,he)})},loadSegments:function z(Z,oe,he){return new Promise(function(ve){q(Z,oe,he,ve)})},reset:function X(){S&&(S.abort(),S=null)}}}d.__dashjs_factory_name="SegmentBaseLoader",k.default=M.default.getSingletonFactory(d)},"./src/dash/WebmSegmentBaseLoader.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/utils/EBMLParser.js"),y=u("./src/streaming/constants/Constants.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/dash/vo/Segment.js"),D=u("./src/streaming/vo/FragmentRequest.js"),d=u("./src/streaming/net/URLLoader.js"),v=u("./src/streaming/vo/DashJSError.js");function p(){var O,L,m,h,g,S,C,F,R,w,N=this.context;function H(V,se,Z,oe){var ve,re,ge,ie,de;for(re=[],ie=0,de=(ve=function I(V){var oe,he,se=[],Z=Object(x.default)(N).create({data:V});for(Z.consumeTagAndSize(m.Segment.Cues);Z.moreData()&&Z.consumeTagAndSize(m.Segment.Cues.CuePoint,!0);){for((oe={}).CueTime=Z.parseTag(m.Segment.Cues.CuePoint.CueTime),oe.CueTracks=[];Z.moreData()&&Z.consumeTag(m.Segment.Cues.CuePoint.CueTrackPositions,!0);){var ve=Z.getMatroskaCodedNum(),re=Z.getPos();if((he={}).Track=Z.parseTag(m.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===he.Track)throw new Error("Cue track cannot be 0");he.ClusterPosition=Z.parseTag(m.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),oe.CueTracks.push(he),Z.setPos(re+ve)}if(0===oe.CueTracks.length)throw new Error("Mandatory cuetrack not found");se.push(oe)}if(0===se.length)throw new Error("mandatory cuepoint not found");return se}(V)).length;ie<de;ie+=1)(ge=new T.default).duration=ie<ve.length-1?ve[ie+1].CueTime-ve[ie].CueTime:oe-ve[ie].CueTime,ge.startTime=ve[ie].CueTime,ge.timescale=1e3,ge.mediaRange=ve[ie].CueTracks[0].ClusterPosition+se+"-"+(ie<ve.length-1?ve[ie+1].CueTracks[0].ClusterPosition+se-1:Z-1),re.push(ge);return L.debug("Parsed cues: "+re.length+" cues."),re}function J(V){var se=new D.default;return se.setInfo(V),se}return O={setConfig:function f(V){if(!(V.baseURLController&&V.dashMetrics&&V.mediaPlayerModel&&V.errHandler))throw new Error(y.default.MISSING_CONFIG_ERROR);w=V.baseURLController,S=V.dashMetrics,C=V.mediaPlayerModel,h=V.errHandler,R=V.errors,L=V.debug.getLogger(O),g=V.requestModifier},initialize:function P(){F=Object(d.default)(N).create({errHandler:h,dashMetrics:S,mediaPlayerModel:C,requestModifier:g,errors:R})},loadInitialization:function z(V,se){return new Promise(function(Z){var oe=null,he=V?w.resolve(V.path):null,ve=V?V.range.split("-"):null,re={range:{start:ve?parseFloat(ve[0]):null,end:ve?parseFloat(ve[1]):null},request:oe,url:he?he.url:void 0,init:!0,mediaType:se};L.info("Start loading initialization."),oe=J(re),F.load({request:oe,success:function(){Z(V)},error:function(){Z(V)}}),L.debug("Perform init load: "+re.url)})},loadSegments:function q(V,se,Z){return new Promise(function(oe){var he=null,ve=V?w.resolve(V.path):null,re=ve?ve.url:void 0;he=J({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:he,url:re,init:!1,mediaType:se}),L.debug("Parsing ebml header"),F.load({request:he,success:function(ce){!function $(V,se,Z,oe){if(V&&0!==V.byteLength){var ve,re,ge,ie,he=Object(x.default)(N).create({data:V}),de=Z?Z.split("-"):null,ue=null,le={url:se,range:{start:de?parseFloat(de[0]):null,end:de?parseFloat(de[1]):null},request:ue};for(L.debug("Parse EBML header: "+le.url),he.skipOverElement(m.EBML),he.consumeTag(m.Segment),ge=he.getMatroskaCodedNum(),ge+=he.getPos(),ie=he.getPos();he.moreData()&&!he.consumeTagAndSize(m.Segment.Info,!0);)if(!(he.skipOverElement(m.Segment.SeekHead,!0)||he.skipOverElement(m.Segment.Tracks,!0)||he.skipOverElement(m.Segment.Cues,!0)||he.skipOverElement(m.Void,!0)))throw new Error("no valid top level element found");for(;void 0===ve;){var ce=he.getMatroskaCodedNum(!0),ne=he.getMatroskaCodedNum();ce===m.Segment.Info.Duration.tag?ve=he[m.Segment.Info.Duration.parse](ne):he.setPos(he.getPos()+ne)}ue=J(le),F.load({request:ue,success:function(j){re=H(j,ie,ge,ve),oe(re)},error:function(){L.error("Download Error: Cues "+le.url),oe(null)}}),L.debug("Perform cues load: "+le.url+" bytes="+le.range.start+"-"+le.range.end)}else oe(null)}(ce,re,Z,function(ne){oe({segments:ne,representation:V,error:ne?void 0:new v.default(R.SEGMENT_BASE_LOADER_ERROR_CODE,R.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){oe({representation:V,error:new v.default(R.SEGMENT_BASE_LOADER_ERROR_CODE,R.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function X(){F&&(F.abort(),F=null)}},function b(){m={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}}}(),O}p.__dashjs_factory_name="WebmSegmentBaseLoader",k.default=M.default.getSingletonFactory(p)},"./src/dash/constants/DashConstants.js":function(Oe,k,u){"use strict";function y(d,v){for(var p=0;p<v.length;p++){var N=v[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}u.r(k);var D=new(function(){function d(){(function x(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.init()}return function M(d,v,p){return v&&y(d.prototype,v),p&&y(d,p),d}(d,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime"}}]),d}());k.default=D},"./src/dash/controllers/RepresentationController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/core/FactoryMaker.js"),M=u("./src/streaming/MediaPlayerEvents.js"),T=u("./src/dash/utils/SegmentsUtils.js");function D(d){var R,w,b,P,f,v=(d=d||{}).eventBus,p=d.events,N=d.abrController,O=d.dashMetrics,L=d.playbackController,m=d.timelineConverter,h=d.type,g=d.streamInfo,S=d.dashConstants,C=d.segmentsController,F=d.isDynamic;function $(){return h}function z(){if(!(N&&O&&L&&m))throw new Error(x.default.MISSING_CONFIG_ERROR)}function J(){return b}function X(){return f}function V(){w=null,b=!0,P=[]}function oe(G){return new Promise(function(j,_){var A=G.hasInitialization(),U=G.hasSegments(),K=[];K.push(C.updateInitData(G,A)),K.push(C.updateSegmentData(G,U)),Promise.all(K).then(function(te){te[0]&&!te[0].error&&(G=function ve(G,j){return j&&!j.error&&j.representation?j.representation:G}(G,te[0])),te[1]&&!te[1].error&&(G=function re(G,j){if(j&&!j.error){var K,te,ye,Se,_=j.segments,A=[],U=0;for(K=0,te=_?_.length:0;K<te;K++)ye=_[K],(Se=Object(T.getTimeBasedSegment)(m,F,G,ye.startTime,ye.duration,ye.timescale,ye.media,ye.mediaRange,U))&&(A.push(Se),Se=null,U++);return A.length>0&&(G.segments=A),G}}(G,te[1])),function he(G){G.mediaFinishedInformation=C.getMediaFinishedInformation(G)}(G),function ce(G){if(J()){var A,j=O.getCurrentManifestUpdate(),_=!1;if(j){for(var K=0;K<j.representationInfo.length;K++)if((A=j.representationInfo[K]).index===G.index&&A.mediaType===$()){_=!0;break}_||O.addManifestUpdateRepresentationInfo(G,$())}if(function ue(){for(var G=0,j=P.length;G<j;G++){var _=P[G].segmentInfoType;if(!P[G].hasInitialization()||(_===S.SEGMENT_BASE||_===S.BASE_URL)&&!P[G].segments)return!1}return!0}()){N.setPlaybackQuality(h,g,function de(G){return P.indexOf(G)}(f));var te=O.getCurrentDVRInfo(h);te&&O.updateManifestUpdateInfo({latency:te.range.end-L.getTime()}),O.getCurrentRepresentationSwitch(X().adaptation.type)||ge(),le()}}}(G),j()}).catch(function(te){_(te)})})}function ge(){z();var G=new Date,j=X(),_=1e3*L.getTime();j&&O.addRepresentationSwitch(j.adaptation.type,G,_,j.id),v.trigger(M.default.REPRESENTATION_SWITCH,{mediaType:h,streamId:g.id,currentRepresentation:j,numberOfRepresentations:P.length},{streamId:g.id,mediaType:h})}function ie(G){return null==G||G>=P.length?null:P[G]}function le(G){b=!1,v.trigger(p.DATA_UPDATE_COMPLETED,{data:w,currentRepresentation:f,error:G},{streamId:g.id,mediaType:h})}function pe(G){f=G}function ee(G){if(G.newDuration){var j=X();j&&j.adaptation.period&&(j.adaptation.period.duration=G.newDuration)}}return R={getStreamId:function H(){return g.id},getType:$,getData:function q(){return w},isUpdating:J,updateData:function Z(G,j,_,A,U){if(z(),b=!0,P=j,pe(ie(U)),w=G,_!==x.default.VIDEO&&_!==x.default.AUDIO&&(_!==x.default.TEXT||!A))return le(),Promise.resolve();for(var te=[],ye=0,Se=P.length;ye<Se;ye++)te.push(oe(P[ye]));return Promise.all(te)},getCurrentRepresentation:X,getRepresentationForQuality:ie,prepareQualityChange:function ne(G){pe(ie(G)),ge()},reset:function se(){v.off(M.default.MANIFEST_VALIDITY_CHANGED,ee,R),V()}},function I(){V(),v.on(M.default.MANIFEST_VALIDITY_CHANGED,ee,R)}(),R}D.__dashjs_factory_name="RepresentationController",k.default=y.default.getClassFactory(D)},"./src/dash/controllers/SegmentBaseController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/dash/SegmentBaseLoader.js"),M=u("./src/dash/WebmSegmentBaseLoader.js");function T(d){var R,w,b,v=this.context,p=(d=d||{}).eventBus,N=d.events,O=d.dashMetrics,L=d.mediaPlayerModel,m=d.errHandler,h=d.baseURLController,g=d.debug,S=d.boxParser,C=d.requestModifier,F=d.errors;function f(q){return"webm"===(q?q.split("/")[1]:"").toLowerCase()}return R={initialize:function I(){w.initialize(),b.initialize()},getSegmentBaseInitSegment:function H(q){return f(q.representation.mimeType)?b.loadInitialization(q.representation,q.mediaType):w.loadInitialization(q.representation,q.mediaType)},getSegmentList:function $(q){return f(q.mimeType)?b.loadSegments(q.representation,q.mediaType,q.representation?q.representation.indexRange:null):w.loadSegments(q.representation,q.mediaType,q.representation?q.representation.indexRange:null)},reset:function z(){w.reset(),b.reset()}},function P(){w=Object(y.default)(v).getInstance(),b=Object(M.default)(v).getInstance(),w.setConfig({baseURLController:h,dashMetrics:O,mediaPlayerModel:L,errHandler:m,eventBus:p,events:N,errors:F,debug:g,boxParser:S,requestModifier:C}),b.setConfig({baseURLController:h,dashMetrics:O,mediaPlayerModel:L,errHandler:m,eventBus:p,events:N,errors:F,debug:g,requestModifier:C})}(),R}T.__dashjs_factory_name="SegmentBaseController";var D=x.default.getSingletonFactory(T);k.default=D},"./src/dash/controllers/SegmentsController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/dash/utils/TimelineSegmentsGetter.js"),M=u("./src/dash/utils/TemplateSegmentsGetter.js"),T=u("./src/dash/utils/ListSegmentsGetter.js"),D=u("./src/dash/utils/SegmentBaseGetter.js");function d(p){var h,g,N=this.context,O=(p=p||{}).dashConstants,L=p.type,m=p.segmentBaseController;function w(I){return I?I.segments?g[O.SEGMENT_BASE]:g[I.segmentInfoType]:null}return h={initialize:function C(I){g[O.SEGMENT_TIMELINE]=Object(y.default)(N).create(p,I),g[O.SEGMENT_TEMPLATE]=Object(M.default)(N).create(p,I),g[O.SEGMENT_LIST]=Object(T.default)(N).create(p,I),g[O.SEGMENT_BASE]=Object(D.default)(N).create(p,I)},updateInitData:function F(I,H){return H?Promise.resolve():m.getSegmentBaseInitSegment({representation:I,mediaType:L})},updateSegmentData:function R(I,H){return H?Promise.resolve():m.getSegmentList({mimeType:I.mimeType,representation:I,mediaType:L})},getSegmentByIndex:function b(I,H,$){var z=w(I);return z?z.getSegmentByIndex(I,H,$):null},getSegmentByTime:function P(I,H){var $=w(I);return $?$.getSegmentByTime(I,H):null},getMediaFinishedInformation:function f(I){var H=w(I);return H?H.getMediaFinishedInformation(I):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},function S(){g={}}(),h}d.__dashjs_factory_name="SegmentsController";var v=x.default.getClassFactory(d);k.default=v},"./src/dash/models/DashManifestModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/dash/constants/DashConstants.js"),M=u("./src/dash/vo/Representation.js"),T=u("./src/dash/vo/AdaptationSet.js"),D=u("./src/dash/vo/Period.js"),d=u("./src/dash/vo/Mpd.js"),v=u("./src/dash/vo/UTCTiming.js"),p=u("./src/dash/vo/Event.js"),N=u("./src/dash/vo/BaseURL.js"),O=u("./src/dash/vo/EventStream.js"),L=u("./src/dash/vo/ProducerReferenceTime.js"),m=u("./src/streaming/utils/ObjectUtils.js"),h=u("./src/streaming/utils/URLUtils.js"),g=u("./src/core/FactoryMaker.js"),S=u("./src/core/Debug.js"),C=u("./src/streaming/vo/DashJSError.js"),F=u("./src/core/errors/Errors.js"),R=u("./src/streaming/thumbnail/ThumbnailTracks.js");function w(q,J){var X;if(typeof Symbol>"u"||null==q[Symbol.iterator]){if(Array.isArray(q)||(X=f(q))||J&&q&&"number"==typeof q.length){X&&(q=X);var V=0,se=function(){};return{s:se,n:function(){return V>=q.length?{done:!0}:{done:!1,value:q[V++]}},e:function(re){throw re},f:se}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var he,Z=!0,oe=!1;return{s:function(){X=q[Symbol.iterator]()},n:function(){var re=X.next();return Z=re.done,re},e:function(re){oe=!0,he=re},f:function(){try{!Z&&null!=X.return&&X.return()}finally{if(oe)throw he}}}}function b(q){return function H(q){if(Array.isArray(q))return $(q)}(q)||function I(q){if(typeof Symbol<"u"&&Symbol.iterator in Object(q))return Array.from(q)}(q)||f(q)||function P(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(q,J){if(q){if("string"==typeof q)return $(q,J);var X=Object.prototype.toString.call(q).slice(8,-1);if("Object"===X&&q.constructor&&(X=q.constructor.name),"Map"===X||"Set"===X)return Array.from(q);if("Arguments"===X||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(X))return $(q,J)}}function $(q,J){(null==J||J>q.length)&&(J=q.length);for(var X=0,V=new Array(J);X<J;X++)V[X]=q[X];return V}function z(){var q,J,X,V,se=this.context,Z=Object(h.default)(se).getInstance(),oe=Number.isInteger||function(Me){return"number"==typeof Me&&isFinite(Me)&&Math.floor(Me)===Me};function ve(Me,$e){if(!Me)throw new Error("adaptation is not defined");if(!$e)throw new Error("type is not defined");if(Me.Representation_asArray&&Me.Representation_asArray.length){var mt=kt(Me.Representation_asArray[0]);if(mt&&mt.length>0&&R.THUMBNAILS_SCHEME_ID_URIS.indexOf(mt[0].schemeIdUri)>=0)return $e===x.default.IMAGE}if(Me.ContentComponent_asArray&&Me.ContentComponent_asArray.length>0){if(Me.ContentComponent_asArray.length>1)return $e===x.default.MUXED;if(Me.ContentComponent_asArray[0].contentType===$e)return!0}var Je=$e===x.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp($e);if(Me.Representation_asArray&&Me.Representation_asArray.length&&Je.test(Me.Representation_asArray[0].codecs))return!0;if(Me.hasOwnProperty(y.default.MIME_TYPE))return Je.test(Me.mimeType);if(Me.Representation_asArray)for(var Et,Yt=0;Yt<Me.Representation_asArray.length;Yt++)if((Et=Me.Representation_asArray[Yt]).hasOwnProperty(y.default.MIME_TYPE))return Je.test(Et.mimeType);return!1}function re(Me){if(!Me)throw new Error("adaptation is not defined");if(Me.hasOwnProperty(y.default.SEGMENT_TEMPLATE)||Me.hasOwnProperty(y.default.SEGMENT_TIMELINE)||Me.hasOwnProperty(y.default.SEGMENT_LIST)||Me.hasOwnProperty(y.default.SEGMENT_BASE))return!0;if(Me.Representation_asArray&&Me.Representation_asArray.length>0){var $e=Me.Representation_asArray[0];if($e.hasOwnProperty(y.default.SEGMENT_TEMPLATE)||$e.hasOwnProperty(y.default.SEGMENT_TIMELINE)||$e.hasOwnProperty(y.default.SEGMENT_LIST)||$e.hasOwnProperty(y.default.SEGMENT_BASE))return!0}return!1}function ge(Me){return ve(Me,x.default.AUDIO)}function ie(Me){return ve(Me,x.default.VIDEO)}function de(Me){return ve(Me,x.default.TEXT)}function ue(Me){return ve(Me,x.default.MUXED)}function le(Me){return ve(Me,x.default.IMAGE)}function A(){return function(Me,$e){return Me.bandwidth-$e.bandwidth}}function U(Me){return Me&&Array.isArray(Me.Representation_asArray)&&Me.Representation_asArray.sort(function(Me,$e){return Me.bandwidth-$e.bandwidth}),Me}function K(Me,$e){return Me&&Me.Period_asArray&&oe($e)&&Me.Period_asArray[$e]?Me.Period_asArray[$e].AdaptationSet_asArray:[]}function te(Me){return Me&&Me.Period_asArray?Me.Period_asArray:[]}function Ie(Me){var $e=!1;return Me&&Me.hasOwnProperty("type")&&($e=Me.type===y.default.DYNAMIC),$e}function kt(Me){return Me&&Me.EssentialProperty_asArray&&Me.EssentialProperty_asArray.length?Me.EssentialProperty_asArray.map(function($e){return{schemeIdUri:$e.schemeIdUri,value:$e.value}}):null}function Be(Me){if(!Me||!Me.S_asArray)return NaN;var $e=Me.S_asArray[0],mt=Me.S_asArray[1];return $e.hasOwnProperty("d")?$e.d:mt.t-$e.t}function Le(Me){return Me.adaptation.period.start-Me.presentationTimeOffset}function Qe(Me,$e){if(!Me)throw new Error("Period cannot be null or undefined");var mt=D.default.DEFAULT_ID+"_"+$e;return Me.hasOwnProperty(y.default.ID)&&Me.id.length>0&&"__proto__"!==Me.id&&(mt=Me.id),mt}function Ut(Me,$e){var Je,mt=[];if(!Me)return mt;for(Je=0;Je<Me.length;Je++){var tt=new O.default;if(tt.timescale=1,tt.representation=$e,!Me[Je].hasOwnProperty(x.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");tt.schemeIdUri=Me[Je].schemeIdUri,Me[Je].hasOwnProperty(y.default.TIMESCALE)&&(tt.timescale=Me[Je].timescale),Me[Je].hasOwnProperty(y.default.VALUE)&&(tt.value=Me[Je].value),mt.push(tt)}return mt}function Ye(Me){var $e=[],Je=!1;return(Me.BaseURL_asArray||[Me.baseUri]).some(function(tt){if(tt){var Et=new N.default,Yt=tt.__text||tt;return Z.isRelative(Yt)&&(Je=!0,Me.baseUri&&(Yt=Z.resolve(Yt,Me.baseUri))),Et.url=Yt,Et.serviceLocation=tt.hasOwnProperty(y.default.SERVICE_LOCATION)&&tt.serviceLocation.length?tt.serviceLocation:Yt,tt.hasOwnProperty(y.default.DVB_PRIORITY)&&(Et.dvb_priority=tt[y.default.DVB_PRIORITY]),tt.hasOwnProperty(y.default.DVB_WEIGHT)&&(Et.dvb_weight=tt[y.default.DVB_WEIGHT]),tt.hasOwnProperty(y.default.AVAILABILITY_TIME_OFFSET)&&(Et.availabilityTimeOffset=tt[y.default.AVAILABILITY_TIME_OFFSET]),tt.hasOwnProperty(y.default.AVAILABILITY_TIME_COMPLETE)&&(Et.availabilityTimeComplete="false"!==tt[y.default.AVAILABILITY_TIME_COMPLETE]),$e.push(Et),Je}}),$e}return q={getIsTypeOf:ve,getIsText:de,getIsFragmented:re,getProducerReferenceTimesForAdaptation:function ce(Me){var $e=Me&&Me.hasOwnProperty(y.default.PRODUCERREFERENCETIME_ASARRAY)?Me[y.default.PRODUCERREFERENCETIME_ASARRAY]:[];(Me&&Me.hasOwnProperty(y.default.REPRESENTATION_ASARRAY)?Me[y.default.REPRESENTATION_ASARRAY]:[]).forEach(function(tt){tt.hasOwnProperty(y.default.PRODUCERREFERENCETIME_ASARRAY)&&$e.push.apply($e,b(tt[y.default.PRODUCERREFERENCETIME_ASARRAY]))});var Je=[];return $e.forEach(function(tt){var Et=new L.default;tt.hasOwnProperty(y.default.ID)&&(Et[y.default.ID]=tt[y.default.ID],tt.hasOwnProperty(y.default.WALL_CLOCK_TIME)&&(Et[y.default.WALL_CLOCK_TIME]=tt[y.default.WALL_CLOCK_TIME],tt.hasOwnProperty(y.default.PRESENTATION_TIME)&&(Et[y.default.PRESENTATION_TIME]=tt[y.default.PRESENTATION_TIME],Je.push(Et))))}),Je},getLanguageForAdaptation:function ne(Me){var $e="";return Me&&Me.hasOwnProperty(y.default.LANG)&&($e=Me.lang.replace(/[^A-Za-z0-9-]/g,"")),$e},getViewpointForAdaptation:function pe(Me){return Me&&Me.hasOwnProperty(y.default.VIEWPOINT)?Me.Viewpoint:null},getRolesForAdaptation:function ee(Me){return Me&&Me.hasOwnProperty(y.default.ROLE_ASARRAY)?Me.Role_asArray:[]},getAccessibilityForAdaptation:function G(Me){return Me&&Me.hasOwnProperty(y.default.ACCESSIBILITY_ASARRAY)?Me.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function j(Me){return Me&&Me.hasOwnProperty(y.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?Me.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function _(Me){return Me&&Me.hasOwnProperty(y.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?Me.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function ae(Me,$e,mt){var Je=K($e,mt);return Je.length>0&&oe(Me)?Je[Me]:null},getIndexForAdaptation:function Y(Me,$e,mt){if(!Me)return-1;for(var Je=K($e,mt),tt=0;tt<Je.length;tt++)if(Object(m.default)(se).getInstance().areEqual(Je[tt],Me))return tt;return-1},getAdaptationForId:function Se(Me,$e,mt){var tt,Et,Je=K($e,mt);for(tt=0,Et=Je.length;tt<Et;tt++)if(Je[tt].hasOwnProperty(y.default.ID)&&Je[tt].id===Me)return Je[tt];return null},getAdaptationsForType:function W(Me,$e,mt){var tt,Et,Je=K(Me,$e),Yt=[];for(tt=0,Et=Je.length;tt<Et;tt++)ve(Je[tt],mt)&&Yt.push(U(Je[tt]));return Yt},getRealPeriods:te,getRealPeriodForIndex:function ye(Me,$e){var mt=te($e);return mt.length>0&&oe(Me)?mt[Me]:null},getCodec:function _e(Me,$e,mt){var Je=null;if(Me&&Me.Representation_asArray&&Me.Representation_asArray.length>0){var tt=oe($e)&&$e>=0&&$e<Me.Representation_asArray.length?Me.Representation_asArray[$e]:Me.Representation_asArray[0];tt&&(Je=tt.mimeType+';codecs="'+tt.codecs+'"',mt&&void 0!==tt.width&&(Je+=';width="'+tt.width+'";height="'+tt.height+'"'))}return Je&&(Je=Je.replace(/\sprofiles=[^;]*/g,"")),Je},getSelectionPriority:function Lt(Me){try{var $e=Me&&typeof Me.selectionPriority<"u"?parseInt(Me.selectionPriority):1;return isNaN($e)?1:$e}catch{return 1}},getMimeType:function Ee(Me){return Me&&Me.Representation_asArray&&Me.Representation_asArray.length>0?Me.Representation_asArray[0].mimeType:null},getKID:function me(Me){return Me&&Me.hasOwnProperty(y.default.CENC_DEFAULT_KID)?Me[y.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function Te(Me){if(!Me||!Array.isArray(Me.Label_asArray))return[];for(var $e=[],mt=0;mt<Me.Label_asArray.length;mt++)$e.push({lang:Me.Label_asArray[mt].lang,text:Me.Label_asArray[mt].__text||Me.Label_asArray[mt]});return $e},getContentProtectionData:function Ne(Me){return Me&&Me.hasOwnProperty(y.default.CONTENTPROTECTION_ASARRAY)&&0!==Me.ContentProtection_asArray.length?Me.ContentProtection_asArray:null},getIsDynamic:Ie,getId:function we(Me){return Me&&Me[y.default.ID]||null},hasProfile:function ke(Me,$e){var mt=!1;return Me&&Me.profiles&&Me.profiles.length>0&&(mt=-1!==Me.profiles.indexOf($e)),mt},getDuration:function Re(Me){return Me&&Me.hasOwnProperty(y.default.MEDIA_PRESENTATION_DURATION)?Me.mediaPresentationDuration:Me&&"dynamic"==Me.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function xe(Me){return Me&&Me.bandwidth?Me.bandwidth:NaN},getManifestUpdatePeriod:function ze(Me){var $e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,mt=NaN;return Me&&Me.hasOwnProperty(y.default.MINIMUM_UPDATE_PERIOD)&&(mt=Me.minimumUpdatePeriod),isNaN(mt)?mt:Math.max(mt-$e,1)},getPublishTime:function ut(Me){return Me&&Me.hasOwnProperty(y.default.PUBLISH_TIME)?new Date(Me[y.default.PUBLISH_TIME]):null},getRepresentationCount:function at(Me){return Me&&Array.isArray(Me.Representation_asArray)?Me.Representation_asArray.length:0},getBitrateListForAdaptation:function yt(Me){var $e=U(Me);return($e&&Array.isArray($e.Representation_asArray)?$e.Representation_asArray:[]).map(function(Je){return{bandwidth:Je.bandwidth,width:Je.width||0,height:Je.height||0,scanType:Je.scanType||null,id:Je.id||null}})},getRepresentationFor:function Zt(Me,$e){return $e&&$e.Representation_asArray&&$e.Representation_asArray.length>0&&oe(Me)?$e.Representation_asArray[Me]:null},getRepresentationsForAdaptation:function sn(Me){var Je,tt,$e=[],mt=function nn(Me){if(Me&&Me.period&&oe(Me.period.index)){var $e=Me.period.mpd.manifest.Period_asArray[Me.period.index];if($e&&$e.AdaptationSet_asArray&&oe(Me.index))return U($e.AdaptationSet_asArray[Me.index])}}(Me);if(mt&&mt.Representation_asArray){if(Me&&Me.period&&oe(Me.period.index)){var Et=Ye(Me.period.mpd.manifest);Et&&(tt=Et[0])}for(var Yt=0,an=mt.Representation_asArray.length;Yt<an;++Yt){var zt=mt.Representation_asArray[Yt],Vt=new M.default;if(Vt.index=Yt,Vt.adaptation=Me,zt.hasOwnProperty(y.default.ID)&&(Vt.id=zt.id),zt.hasOwnProperty(y.default.CODECS)&&(Vt.codecs=zt.codecs),zt.hasOwnProperty(y.default.MIME_TYPE)&&(Vt.mimeType=zt[y.default.MIME_TYPE]),zt.hasOwnProperty(y.default.CODEC_PRIVATE_DATA)&&(Vt.codecPrivateData=zt.codecPrivateData),zt.hasOwnProperty(y.default.BANDWITH)&&(Vt.bandwidth=zt.bandwidth),zt.hasOwnProperty(y.default.WIDTH)&&(Vt.width=zt.width),zt.hasOwnProperty(y.default.HEIGHT)&&(Vt.height=zt.height),zt.hasOwnProperty(y.default.SCAN_TYPE)&&(Vt.scanType=zt.scanType),zt.hasOwnProperty(y.default.MAX_PLAYOUT_RATE)&&(Vt.maxPlayoutRate=zt.maxPlayoutRate),zt.hasOwnProperty(y.default.SEGMENT_BASE)?(Je=zt.SegmentBase,Vt.segmentInfoType=y.default.SEGMENT_BASE):zt.hasOwnProperty(y.default.SEGMENT_LIST)?Vt.segmentInfoType=(Je=zt.SegmentList).hasOwnProperty(y.default.SEGMENT_TIMELINE)?y.default.SEGMENT_TIMELINE:y.default.SEGMENT_LIST:zt.hasOwnProperty(y.default.SEGMENT_TEMPLATE)?(Vt.segmentInfoType=(Je=zt.SegmentTemplate).hasOwnProperty(y.default.SEGMENT_TIMELINE)?y.default.SEGMENT_TIMELINE:y.default.SEGMENT_TEMPLATE,Je.hasOwnProperty(y.default.INITIALIZATION_MINUS)&&(Vt.initialization=Je.initialization.split("$Bandwidth$").join(zt.bandwidth).split("$RepresentationID$").join(zt.id))):Vt.segmentInfoType=y.default.BASE_URL,Vt.essentialProperties=kt(zt),Je){if(Je.hasOwnProperty(y.default.INITIALIZATION)){var qe=Je.Initialization;qe.hasOwnProperty(y.default.SOURCE_URL)&&(Vt.initialization=qe.sourceURL),qe.hasOwnProperty(y.default.RANGE)&&(Vt.range=qe.range)}else de(mt)&&re(mt)&&mt.mimeType&&-1===mt.mimeType.indexOf("application/mp4")&&(Vt.range=0);Je.hasOwnProperty(y.default.TIMESCALE)&&(Vt.timescale=Je.timescale),Je.hasOwnProperty(y.default.DURATION)?Vt.segmentDuration=Je.duration/Vt.timescale:zt.hasOwnProperty(y.default.SEGMENT_TEMPLATE)&&(Je=zt.SegmentTemplate).hasOwnProperty(y.default.SEGMENT_TIMELINE)&&(Vt.segmentDuration=Be(Je.SegmentTimeline)/Vt.timescale),Je.hasOwnProperty(y.default.MEDIA)&&(Vt.media=Je.media),Je.hasOwnProperty(y.default.START_NUMBER)&&(Vt.startNumber=Je.startNumber),Je.hasOwnProperty(y.default.INDEX_RANGE)&&(Vt.indexRange=Je.indexRange),Je.hasOwnProperty(y.default.PRESENTATION_TIME_OFFSET)&&(Vt.presentationTimeOffset=Je.presentationTimeOffset/Vt.timescale),Je.hasOwnProperty(y.default.AVAILABILITY_TIME_OFFSET)?Vt.availabilityTimeOffset=Je.availabilityTimeOffset:tt&&void 0!==tt.availabilityTimeOffset&&(Vt.availabilityTimeOffset=tt.availabilityTimeOffset),Je.hasOwnProperty(y.default.AVAILABILITY_TIME_COMPLETE)?Vt.availabilityTimeComplete="false"!==Je.availabilityTimeComplete:tt&&void 0!==tt.availabilityTimeComplete&&(Vt.availabilityTimeComplete=tt.availabilityTimeComplete)}Vt.MSETimeOffset=Le(Vt),Vt.path=[Me.period.index,Me.index,Yt],$e.push(Vt)}}return $e},getAdaptationsForPeriod:function Ce(Me){var Je,tt,Et,$e=Me&&oe(Me.index)?Me.mpd.manifest.Period_asArray[Me.index]:null,mt=[];if($e&&$e.AdaptationSet_asArray)for(Et=0;Et<$e.AdaptationSet_asArray.length;Et++)tt=$e.AdaptationSet_asArray[Et],Je=new T.default,tt.hasOwnProperty(y.default.ID)&&(Je.id=tt.id),Je.index=Et,Je.period=Me,ue(tt)?Je.type=x.default.MUXED:ge(tt)?Je.type=x.default.AUDIO:ie(tt)?Je.type=x.default.VIDEO:de(tt)?Je.type=x.default.TEXT:le(tt)?Je.type=x.default.IMAGE:J.warn("Unknown Adaptation stream type"),mt.push(Je);return mt},getRegularPeriods:function Ue(Me){var an,zt,$e=!!Me&&Ie(Me.manifest),mt=[],Je=null,tt=null,Et=null,Yt=null;for(zt=0,an=Me&&Me.manifest&&Me.manifest.Period_asArray?Me.manifest.Period_asArray.length:0;zt<an;zt++)(tt=Me.manifest.Period_asArray[zt]).hasOwnProperty(y.default.START)?(Yt=new D.default).start=tt.start:null!==Je&&Je.hasOwnProperty(y.default.DURATION)&&null!==Et?(Yt=new D.default).start=parseFloat((Et.start+Et.duration).toFixed(5)):0===zt&&!$e&&((Yt=new D.default).start=0),null!==Et&&isNaN(Et.duration)&&(null!==Yt?Et.duration=parseFloat((Yt.start-Et.start).toFixed(5)):J.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==Yt&&(Yt.id=Qe(tt,zt),Yt.index=zt,Yt.mpd=Me,tt.hasOwnProperty(y.default.DURATION)&&(Yt.duration=tt.duration),Et&&(Et.nextPeriodId=Yt.id),mt.push(Yt),Je=tt,Et=Yt),tt=null,Yt=null;return 0===mt.length||null!==Et&&isNaN(Et.duration)&&(Et.duration=parseFloat((function Ze(Me){!function ct(){if(!X||!X.hasOwnProperty("error"))throw new Error(x.default.MISSING_CONFIG_ERROR)}();var mt,$e=Ie(Me.mpd.manifest);return Me.mpd.manifest.mediaPresentationDuration?mt=Me.mpd.manifest.mediaPresentationDuration:Me.duration?mt=Me.duration:$e?mt=Number.POSITIVE_INFINITY:X.error(new C.default(F.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",Me)),mt}(Et)-Et.start).toFixed(5))),mt},getMpd:function st(Me){var $e=new d.default;return Me&&($e.manifest=Me,Me.hasOwnProperty(y.default.AVAILABILITY_START_TIME)?$e.availabilityStartTime=new Date(Me.availabilityStartTime.getTime()):Me.loadedTime&&($e.availabilityStartTime=new Date(Me.loadedTime.getTime())),Me.hasOwnProperty(y.default.AVAILABILITY_END_TIME)&&($e.availabilityEndTime=new Date(Me.availabilityEndTime.getTime())),Me.hasOwnProperty(y.default.MINIMUM_UPDATE_PERIOD)&&($e.minimumUpdatePeriod=Me.minimumUpdatePeriod),Me.hasOwnProperty(y.default.MEDIA_PRESENTATION_DURATION)&&($e.mediaPresentationDuration=Me.mediaPresentationDuration),Me.hasOwnProperty(y.default.SUGGESTED_PRESENTATION_DELAY)&&($e.suggestedPresentationDelay=Me.suggestedPresentationDelay),Me.hasOwnProperty(y.default.TIMESHIFT_BUFFER_DEPTH)&&($e.timeShiftBufferDepth=Me.timeShiftBufferDepth),Me.hasOwnProperty(y.default.MAX_SEGMENT_DURATION)&&($e.maxSegmentDuration=Me.maxSegmentDuration),Me.hasOwnProperty(y.default.PUBLISH_TIME)&&($e.publishTime=new Date(Me.publishTime))),$e},getEventsForPeriod:function ht(Me){var Et,Yt,$e=Me&&Me.mpd&&Me.mpd.manifest?Me.mpd.manifest:null,mt=$e?$e.Period_asArray:null,Je=mt&&Me&&oe(Me.index)?mt[Me.index].EventStream_asArray:null,tt=[];if(Je)for(Et=0;Et<Je.length;Et++){var an=new O.default;if(an.period=Me,an.timescale=1,!Je[Et].hasOwnProperty(x.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(an.schemeIdUri=Je[Et][x.default.SCHEME_ID_URI],Je[Et].hasOwnProperty(y.default.TIMESCALE)&&(an.timescale=Je[Et][y.default.TIMESCALE]),Je[Et].hasOwnProperty(y.default.VALUE)&&(an.value=Je[Et][y.default.VALUE]),Je[Et].hasOwnProperty(y.default.PRESENTATION_TIME_OFFSET)&&(an.presentationTimeOffset=Je[Et][y.default.PRESENTATION_TIME_OFFSET]),Yt=0;Je[Et].Event_asArray&&Yt<Je[Et].Event_asArray.length;Yt++){var zt=Je[Et].Event_asArray[Yt],Vt=new p.default;Vt.presentationTime=0,Vt.eventStream=an,zt.hasOwnProperty(y.default.PRESENTATION_TIME)&&(Vt.presentationTime=zt.presentationTime),Vt.calculatedPresentationTime=Vt.presentationTime/an.timescale+Me.start-(an.presentationTimeOffset?an.presentationTimeOffset/an.timescale:0),zt.hasOwnProperty(y.default.DURATION)&&(Vt.duration=zt.duration/an.timescale),Vt.id=zt.hasOwnProperty(y.default.ID)?zt.id:null,Vt.messageData=zt.Signal&&zt.Signal.Binary?V.decodeArray(zt.Signal.Binary.toString()):zt.messageData||zt.__cdata||zt.__text,tt.push(Vt)}}return tt},getEssentialPropertiesForRepresentation:kt,getEventStreamForAdaptationSet:function It(Me,$e){var mt,Je,tt;return Me&&Me.Period_asArray&&$e&&$e.period&&oe($e.period.index)&&(Je=Me.Period_asArray[$e.period.index])&&Je.AdaptationSet_asArray&&oe($e.index)&&(tt=Je.AdaptationSet_asArray[$e.index])&&(mt=tt.InbandEventStream_asArray),Ut(mt,null)},getEventStreamForRepresentation:function Wt(Me,$e){var mt,Je,tt,Et;return Me&&Me.Period_asArray&&$e&&$e.adaptation&&$e.adaptation.period&&oe($e.adaptation.period.index)&&(Je=Me.Period_asArray[$e.adaptation.period.index])&&Je.AdaptationSet_asArray&&oe($e.adaptation.index)&&(tt=Je.AdaptationSet_asArray[$e.adaptation.index])&&tt.Representation_asArray&&oe($e.index)&&(Et=tt.Representation_asArray[$e.index])&&(mt=Et.InbandEventStream_asArray),Ut(mt,$e)},getUTCTimingSources:function Fe(Me){var $e=Ie(Me),mt=!!Me&&Me.hasOwnProperty(y.default.AVAILABILITY_START_TIME),Je=Me?Me.UTCTiming_asArray:null,tt=[];return($e||mt)&&Je&&Je.forEach(function(Et){var Yt=new v.default;Et.hasOwnProperty(x.default.SCHEME_ID_URI)&&(Yt.schemeIdUri=Et.schemeIdUri,Et.hasOwnProperty(y.default.VALUE)&&(Yt.value=Et.value.toString(),tt.push(Yt)))}),tt},getBaseURLsFromElement:Ye,getRepresentationSortFunction:A,getLocation:function et(Me){if(Me&&Me.hasOwnProperty(x.default.LOCATION))return Me.Location=Me.Location_asArray[0],Me.Location},getPatchLocation:function Rt(Me){if(Me&&Me.hasOwnProperty(y.default.PATCH_LOCATION))return Me.PatchLocation=Me.PatchLocation_asArray[0],Me.PatchLocation},getSuggestedPresentationDelay:function Tt(Me){return Me&&Me.hasOwnProperty(y.default.SUGGESTED_PRESENTATION_DELAY)?Me.suggestedPresentationDelay:null},getAvailabilityStartTime:function bt(Me){return Me&&Me.hasOwnProperty(y.default.AVAILABILITY_START_TIME)&&null!==Me.availabilityStartTime?Me.availabilityStartTime.getTime():null},getServiceDescriptions:function rn(Me){var $e=[];if(Me&&Me.hasOwnProperty(y.default.SERVICE_DESCRIPTION)){var Je,mt=w(Me.ServiceDescription_asArray);try{for(mt.s();!(Je=mt.n()).done;){var tt=Je.value,Et=null,Yt=null,an=null,zt=null,Vt=null,qe=null;for(var ot in tt)tt.hasOwnProperty(ot)&&(ot===y.default.ID?Et=tt[ot]:ot===y.default.SERVICE_DESCRIPTION_SCOPE?Yt=tt[ot].schemeIdUri:ot===y.default.SERVICE_DESCRIPTION_LATENCY?an={target:parseInt(tt[ot].target),max:parseInt(tt[ot].max),min:parseInt(tt[ot].min),referenceId:parseInt(tt[ot].referenceId)}:ot===y.default.SERVICE_DESCRIPTION_PLAYBACK_RATE?zt={max:parseFloat(tt[ot].max),min:parseFloat(tt[ot].min)}:ot===y.default.SERVICE_DESCRIPTION_OPERATING_QUALITY?Vt={mediaType:tt[ot].mediaType,max:parseInt(tt[ot].max),min:parseInt(tt[ot].min),target:parseInt(tt[ot].target),type:tt[ot].type,maxQualityDifference:parseInt(tt[ot].maxQualityDifference)}:ot===y.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH&&(qe={mediaType:tt[ot].mediaType,max:parseInt(tt[ot].max),min:parseInt(tt[ot].min),target:parseInt(tt[ot].target)}));$e.push({id:Et,schemeIdUri:Yt,latency:an,playbackRate:zt,operatingQuality:Vt,operatingBandwidth:qe})}}catch(Ve){mt.e(Ve)}finally{mt.f()}}return $e},getSupplementalProperties:function lt(Me){var $e={};if(Me&&Me.hasOwnProperty(y.default.SUPPLEMENTAL_PROPERTY)){var Je,mt=w(Me.SupplementalProperty_asArray);try{for(mt.s();!(Je=mt.n()).done;){var tt=Je.value;tt.hasOwnProperty(x.default.SCHEME_ID_URI)&&tt.hasOwnProperty(y.default.VALUE)&&($e[tt[x.default.SCHEME_ID_URI]]=tt[y.default.VALUE])}}catch(Et){mt.e(Et)}finally{mt.f()}}return $e},setConfig:function jt(Me){!Me||(Me.errHandler&&(X=Me.errHandler),Me.BASE64&&(V=Me.BASE64))}},function he(){J=Object(S.default)(se).getInstance().getLogger(q)}(),q}z.__dashjs_factory_name="DashManifestModel",k.default=g.default.getSingletonFactory(z)},"./src/dash/models/PatchManifestModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/constants/DashConstants.js"),y=u("./src/core/FactoryMaker.js"),M=u("./src/core/Debug.js"),T=u("./src/dash/vo/SimpleXPath.js"),D=u("./src/dash/vo/PatchOperation.js");function d(){var v,p,N=this.context;return v={getIsPatch:function L(C){return C&&C.hasOwnProperty(x.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function m(C){return C&&C.hasOwnProperty(x.default.PUBLISH_TIME)?new Date(C[x.default.PUBLISH_TIME]):null},getOriginalPublishTime:function h(C){return C&&C.hasOwnProperty(x.default.ORIGINAL_PUBLISH_TIME)?new Date(C[x.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function g(C){return C&&C[x.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function S(C){return C?(C.__children||[]).map(function(F){var R=Object.keys(F)[0];if("add"!==R&&"remove"!==R&&"replace"!==R)return p.warn("Ignoring node of invalid action: ".concat(R)),null;var w=F[R],b=w.sel;if("add"===R&&w.type){if(!w.type.startsWith("@"))return p.warn("Ignoring add action for prefixed namespace declaration: ".concat(w.type,"=").concat(w.__text)),null;b="".concat(b,"/").concat(w.type)}var P=new T.default(b);if(!P.isValid())return p.warn("Ignoring action with invalid selector: ".concat(R," - ").concat(b)),null;var f=null;P.findsAttribute()?f=w.__text||"":"remove"!==R&&(f=w.__children.reduce(function(H,$){var z=Object.keys($)[0];return"#text"!==z&&(H[z]=H[z]||[],H[z].push($[z])),H},{}));var I=new D.default(R,P,f);return"add"===R&&(I.position=w.pos),I}).filter(function(F){return!!F}):[]}},function O(){p=Object(M.default)(N).getInstance().getLogger(v)}(),v}d.__dashjs_factory_name="PatchManifestModel",k.default=y.default.getSingletonFactory(d)},"./src/dash/parser/DashParser.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/dash/parser/objectiron.js"),M=u("./externals/xml2json.js"),T=u("./src/dash/parser/matchers/StringMatcher.js"),D=u("./src/dash/parser/matchers/DurationMatcher.js"),d=u("./src/dash/parser/matchers/DateTimeMatcher.js"),v=u("./src/dash/parser/matchers/NumericMatcher.js"),p=u("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),N=u("./src/dash/parser/maps/SegmentValuesMap.js");function O(L){var g,S,C,F,R,m=this.context,h=(L=L||{}).debug;return g={parse:function f(I){var H,$=window.performance.now();if(!(H=F.xml_str2json(I)))throw new Error("parsing the manifest failed");var z=window.performance.now();H.Patch?((H=H.Patch).add_asArray&&H.add_asArray.forEach(function(J){return R.run(J)}),H.replace_asArray&&H.replace_asArray.forEach(function(J){return R.run(J)})):R.run(H=H.MPD);var q=window.performance.now();return S.info("Parsing complete: ( xml2json: "+(z-$).toPrecision(3)+"ms, objectiron: "+(q-z).toPrecision(3)+"ms, total: "+((q-$)/1e3).toPrecision(3)+"s)"),H.protocol="DASH",H},getMatchers:function b(){return C},getIron:function P(){return R}},function w(){S=h.getLogger(g),C=[new D.default,new d.default,new v.default,new T.default],F=new M.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:C}),R=Object(y.default)(m).create({adaptationset:new p.default,period:new N.default})}(),g}O.__dashjs_factory_name="DashParser",k.default=x.default.getClassFactory(O)},"./src/dash/parser/maps/CommonProperty.js":function(Oe,k,u){"use strict";function y(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d){!function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D);var N;this._name=d,this._merge=(N=d)&&N.length&&N.charAt(0)===N.charAt(0).toUpperCase()}return function M(D,d,v){return d&&y(D.prototype,d),v&&y(D,v),D}(D,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),D}()},"./src/dash/parser/maps/MapNode.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/parser/maps/CommonProperty.js");function M(d,v){for(var p=0;p<v.length;p++){var N=v[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}k.default=function(){function d(v,p,N){var O=this;(function y(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this._name=v||"",this._properties=[],this._children=N||[],Array.isArray(p)&&p.forEach(function(L){O._properties.push(new x.default(L))})}return function T(d,v,p){return v&&M(d.prototype,v),p&&M(d,p),d}(d,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),d}()},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/parser/maps/MapNode.js"),y=u("./src/dash/constants/DashConstants.js");function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function D(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&d(h,g)}function d(h,g){return(d=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function v(h){var g=function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=L(h);if(g){var R=L(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return p(this,F)}}function p(h,g){return!g||"object"!==M(g)&&"function"!=typeof g?function N(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function L(h){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}k.default=function(h){D(S,h);var g=v(S);function S(){!function T(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S);var C=[y.default.PROFILES,y.default.WIDTH,y.default.HEIGHT,y.default.SAR,y.default.FRAMERATE,y.default.AUDIO_SAMPLING_RATE,y.default.MIME_TYPE,y.default.SEGMENT_PROFILES,y.default.CODECS,y.default.MAXIMUM_SAP_PERIOD,y.default.START_WITH_SAP,y.default.MAX_PLAYOUT_RATE,y.default.CODING_DEPENDENCY,y.default.SCAN_TYPE,y.default.FRAME_PACKING,y.default.AUDIO_CHANNEL_CONFIGURATION,y.default.CONTENT_PROTECTION,y.default.ESSENTIAL_PROPERTY,y.default.SUPPLEMENTAL_PROPERTY,y.default.INBAND_EVENT_STREAM];return g.call(this,y.default.ADAPTATION_SET,C,[new x.default(y.default.REPRESENTATION,C,[new x.default(y.default.SUB_REPRESENTATION,C)])])}return S}(x.default)},"./src/dash/parser/maps/SegmentValuesMap.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/parser/maps/MapNode.js"),y=u("./src/dash/constants/DashConstants.js");function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function D(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&d(h,g)}function d(h,g){return(d=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function v(h){var g=function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=L(h);if(g){var R=L(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return p(this,F)}}function p(h,g){return!g||"object"!==M(g)&&"function"!=typeof g?function N(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function L(h){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}k.default=function(h){D(S,h);var g=v(S);function S(){!function T(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S);var C=[y.default.SEGMENT_BASE,y.default.SEGMENT_TEMPLATE,y.default.SEGMENT_LIST];return g.call(this,y.default.PERIOD,C,[new x.default(y.default.ADAPTATION_SET,C,[new x.default(y.default.REPRESENTATION,C)])])}return S}(x.default)},"./src/dash/parser/matchers/BaseMatcher.js":function(Oe,k,u){"use strict";function y(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d,v){(function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this._test=d,this._converter=v}return function M(D,d,v){return d&&y(D.prototype,d),v&&y(D,v),D}(D,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),D}()},"./src/dash/parser/matchers/DateTimeMatcher.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/parser/matchers/BaseMatcher.js");function y(C){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(R){return typeof R}:function(R){return R&&"function"==typeof Symbol&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R})(C)}function T(C,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(F&&F.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),F&&D(C,F)}function D(C,F){return(D=Object.setPrototypeOf||function(w,b){return w.__proto__=b,w})(C,F)}function d(C){var F=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var b,w=O(C);if(F){var P=O(this).constructor;b=Reflect.construct(w,arguments,P)}else b=w.apply(this,arguments);return v(this,b)}}function v(C,F){return!F||"object"!==y(F)&&"function"!=typeof F?function p(C){if(void 0===C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C}(C):F}function O(C){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)})(C)}var g=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;k.default=function(C){T(R,C);var F=d(R);function R(){return function M(C,F){if(!(C instanceof F))throw new TypeError("Cannot call a class as a function")}(this,R),F.call(this,function(w){return g.test(w.value)},function(w){var P,b=g.exec(w);if(P=Date.UTC(parseInt(b[1],10),parseInt(b[2],10)-1,parseInt(b[3],10),parseInt(b[4],10),parseInt(b[5],10),b[6]&&parseInt(b[6],10)||0,b[7]&&1e3*parseFloat(b[7])||0),b[9]&&b[10]){var f=60*parseInt(b[9],10)+parseInt(b[10],10);P+=("+"===b[8]?-1:1)*f*60*1e3}return new Date(P)})}return R}(x.default)},"./src/dash/parser/matchers/DurationMatcher.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/parser/matchers/BaseMatcher.js"),y=u("./src/streaming/constants/Constants.js"),M=u("./src/dash/constants/DashConstants.js");function T(b){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(b)}function d(b,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(P&&P.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),P&&v(b,P)}function v(b,P){return(v=Object.setPrototypeOf||function(I,H){return I.__proto__=H,I})(b,P)}function p(b){var P=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var H,I=m(b);if(P){var $=m(this).constructor;H=Reflect.construct(I,arguments,$)}else H=I.apply(this,arguments);return N(this,H)}}function N(b,P){return!P||"object"!==T(P)&&"function"!=typeof P?function O(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}(b):P}function m(b){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(b)}var h=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;k.default=function(b){d(f,b);var P=p(f);function f(){return function D(b,P){if(!(b instanceof P))throw new TypeError("Cannot call a class as a function")}(this,f),P.call(this,function(I){for(var H=[M.default.MIN_BUFFER_TIME,M.default.MEDIA_PRESENTATION_DURATION,M.default.MINIMUM_UPDATE_PERIOD,M.default.TIMESHIFT_BUFFER_DEPTH,M.default.MAX_SEGMENT_DURATION,M.default.MAX_SUBSEGMENT_DURATION,M.default.SUGGESTED_PRESENTATION_DELAY,M.default.START,y.default.START_TIME,M.default.DURATION],$=H.length,z=0;z<$;z++)if(I.nodeName===H[z])return h.test(I.value);return!1},function(I){var H=h.exec(I),$=31536e3*parseFloat(H[3]||0)+2592e3*parseFloat(H[5]||0)+86400*parseFloat(H[7]||0)+3600*parseFloat(H[9]||0)+60*parseFloat(H[11]||0)+parseFloat(H[13]||0);return void 0!==H[1]&&($=-$),$})}return f}(x.default)},"./src/dash/parser/matchers/NumericMatcher.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/parser/matchers/BaseMatcher.js");function y(h){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function T(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function d(h){var g=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=O(h);if(g){var R=O(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return v(this,F)}}function v(h,g){return!g||"object"!==y(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function O(h){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}var L=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;k.default=function(h){T(S,h);var g=d(S);function S(){return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),g.call(this,function(C){return L.test(C.value)},function(C){return parseFloat(C)})}return S}(x.default)},"./src/dash/parser/matchers/StringMatcher.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/parser/matchers/BaseMatcher.js"),y=u("./src/dash/constants/DashConstants.js");function M(g){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(C){return typeof C}:function(C){return C&&"function"==typeof Symbol&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C})(g)}function T(g,S,C){return S in g?Object.defineProperty(g,S,{value:C,enumerable:!0,configurable:!0,writable:!0}):g[S]=C,g}function d(g,S){if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(S&&S.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),S&&v(g,S)}function v(g,S){return(v=Object.setPrototypeOf||function(F,R){return F.__proto__=R,F})(g,S)}function p(g){var S=function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var R,F=m(g);if(S){var w=m(this).constructor;R=Reflect.construct(F,arguments,w)}else R=F.apply(this,arguments);return N(this,R)}}function N(g,S){return!S||"object"!==M(S)&&"function"!=typeof S?function O(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}(g):S}function m(g){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(C){return C.__proto__||Object.getPrototypeOf(C)})(g)}k.default=function(g){d(C,g);var S=p(C);function C(){return function D(g,S){if(!(g instanceof S))throw new TypeError("Cannot call a class as a function")}(this,C),S.call(this,function(F,R){var w,b=(T(w={},y.default.MPD,[y.default.ID,y.default.PROFILES]),T(w,y.default.PERIOD,[y.default.ID]),T(w,y.default.BASE_URL,[y.default.SERVICE_LOCATION,y.default.BYTE_RANGE]),T(w,y.default.SEGMENT_BASE,[y.default.INDEX_RANGE]),T(w,y.default.INITIALIZATION,[y.default.RANGE]),T(w,y.default.REPRESENTATION_INDEX,[y.default.RANGE]),T(w,y.default.SEGMENT_LIST,[y.default.INDEX_RANGE]),T(w,y.default.BITSTREAM_SWITCHING,[y.default.RANGE]),T(w,y.default.SEGMENT_URL,[y.default.MEDIA_RANGE,y.default.INDEX_RANGE]),T(w,y.default.SEGMENT_TEMPLATE,[y.default.INDEX_RANGE,y.default.MEDIA,y.default.INDEX,y.default.INITIALIZATION_MINUS,y.default.BITSTREAM_SWITCHING_MINUS]),T(w,y.default.ASSET_IDENTIFIER,[y.default.VALUE,y.default.ID]),T(w,y.default.EVENT_STREAM,[y.default.VALUE]),T(w,y.default.ADAPTATION_SET,[y.default.PROFILES,y.default.MIME_TYPE,y.default.SEGMENT_PROFILES,y.default.CODECS,y.default.CONTENT_TYPE]),T(w,y.default.FRAME_PACKING,[y.default.VALUE,y.default.ID]),T(w,y.default.AUDIO_CHANNEL_CONFIGURATION,[y.default.VALUE,y.default.ID]),T(w,y.default.CONTENT_PROTECTION,[y.default.VALUE,y.default.ID]),T(w,y.default.ESSENTIAL_PROPERTY,[y.default.VALUE,y.default.ID]),T(w,y.default.SUPPLEMENTAL_PROPERTY,[y.default.VALUE,y.default.ID]),T(w,y.default.INBAND_EVENT_STREAM,[y.default.VALUE,y.default.ID]),T(w,y.default.ACCESSIBILITY,[y.default.VALUE,y.default.ID]),T(w,y.default.ROLE,[y.default.VALUE,y.default.ID]),T(w,y.default.RATING,[y.default.VALUE,y.default.ID]),T(w,y.default.VIEWPOINT,[y.default.VALUE,y.default.ID]),T(w,y.default.CONTENT_COMPONENT,[y.default.CONTENT_TYPE]),T(w,y.default.REPRESENTATION,[y.default.ID,y.default.DEPENDENCY_ID,y.default.MEDIA_STREAM_STRUCTURE_ID]),T(w,y.default.SUBSET,[y.default.ID]),T(w,y.default.METRICS,[y.default.METRICS_MINUS]),T(w,y.default.REPORTING,[y.default.VALUE,y.default.ID]),w);if(b.hasOwnProperty(R)){var P=b[R];return void 0!==P&&P.indexOf(F.name)>=0}return!1},function(F){return String(F)})}return C}(x.default)},"./src/dash/parser/objectiron.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(D){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(v){return typeof v}:function(v){return v&&"function"==typeof Symbol&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v})(D)}function M(D){function d(O,L){for(var m in O)L.hasOwnProperty(m)||(L[m]=O[m])}function v(O,L,m){for(var h=0,g=O.length;h<g;++h){var S=O[h];if(L[S.name])if(m[S.name]){if(S.merge){var C=L[S.name],F=m[S.name];"object"===y(C)&&"object"===y(F)?d(C,F):m[S.name]=C+F}}else m[S.name]=L[S.name]}}function p(O,L){for(var m=0,h=O.children.length;m<h;++m){var g=O.children[m],S=L[g.name+"_asArray"];if(S)for(var C=0,F=S.length;C<F;++C){var R=S[C];v(O.properties,L,R),p(g,R)}}}return{run:function N(O){if(null===O||"object"!==y(O))return O;if(O.Period_asArray&&"period"in D)for(var L=D.period,m=O.Period_asArray,h=0,g=m.length;h<g;++h){var S=m[h];if(p(L,S),"adaptationset"in D){var C=S.AdaptationSet_asArray;if(C)for(var F=D.adaptationset,R=0,w=C.length;R<w;++R)p(F,C[R])}}return O}}}M.__dashjs_factory_name="ObjectIron";var T=x.default.getClassFactory(M);k.default=T},"./src/dash/utils/ListSegmentsGetter.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/constants/Constants.js"),M=u("./src/dash/utils/SegmentsUtils.js");function T(d,v){var p=(d=d||{}).timelineConverter;function O(){if(!p||!p.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(y.default.MISSING_CONFIG_ERROR)}function m(g,S){if(O(),!g)return null;var C=g.adaptation.period.mpd.manifest.Period_asArray[g.adaptation.period.index].AdaptationSet_asArray[g.adaptation.index].Representation_asArray[g.index].SegmentList,F=C.SegmentURL_asArray.length,R=g&&!isNaN(g.startNumber)?g.startNumber:1,w=Math.max(R-1,0),b=Math.max(S-w,0),P=null;if(b<F){var f=C.SegmentURL_asArray[b];(P=Object(M.getIndexBasedSegment)(p,v,g,S))&&(P.replacementTime=(R+S-1)*g.segmentDuration,P.media=f.media?f.media:"",P.mediaRange=f.mediaRange,P.indexRange=f.indexRange)}return P}return{getSegmentByIndex:m,getSegmentByTime:function h(g,S){if(O(),!g)return null;var C=g.segmentDuration;if(isNaN(C))return null;var F=p.calcPeriodRelativeTimeFromMpdRelativeTime(g,S);return m(g,Math.floor(F/C))},getMediaFinishedInformation:function L(g){var S={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!g)return S;var C=g.adaptation.period.mpd.manifest.Period_asArray[g.adaptation.period.index].AdaptationSet_asArray[g.adaptation.index].Representation_asArray[g.index].SegmentList,F=g&&!isNaN(g.startNumber)?g.startNumber:1,R=Math.max(F-1,0);return S.numberOfSegments=R+C.SegmentURL_asArray.length,S}}}T.__dashjs_factory_name="ListSegmentsGetter";var D=x.default.getClassFactory(T);k.default=D},"./src/dash/utils/Round10.js":function(Oe,k,u){"use strict";function y(d,v){for(var p=0;p<v.length;p++){var N=v[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}u.r(k),u.d(k,"default",function(){return T});var T=function(){function d(){!function x(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")}(this,d)}return function M(d,v,p){return v&&y(d.prototype,v),p&&y(d,p),d}(d,null,[{key:"round10",value:function(p,N){return function D(d,v,p){return typeof p>"u"||0==+p?Math[d](v):(p=+p,null===(v=+v)||isNaN(v)||"number"!=typeof p||p%1!=0?NaN:(v=v.toString().split("e"),+((v=(v=Math[d](+(v[0]+"e"+(v[1]?+v[1]-p:-p)))).toString().split("e"))[0]+"e"+(v[1]?+v[1]+p:p))))}("round",p,N)}}]),d}()},"./src/dash/utils/SegmentBaseGetter.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/constants/Constants.js");function M(D){var d=(D=D||{}).timelineConverter;function p(){if(!d||!d.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(y.default.MISSING_CONFIG_ERROR)}function O(h,g){if(p(),!h)return null;var C,S=h.segments?h.segments.length:-1;if(g<S&&(C=h.segments[g])&&C.index===g)return C;for(var F=0;F<S;F++)if((C=h.segments[F])&&C.index===g)return C;return null}return{getSegmentByIndex:O,getSegmentByTime:function L(h,g){return p(),O(h,function m(h,g){if(!h)return-1;var R,w,b,P,f,S=h.segments,C=S?S.length:null,F=-1;if(S&&C>0)for(f=0;f<C;f++)if(g+(R=(P=(w=S[f]).duration)/2)>=(b=w.presentationStartTime)&&g-R<b+P){F=w.index;break}return F}(h,g))},getMediaFinishedInformation:function N(h){var g={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return!h||!h.segments||(g.numberOfSegments=h.segments.length),g}}}M.__dashjs_factory_name="SegmentBaseGetter";var T=x.default.getClassFactory(M);k.default=T},"./src/dash/utils/SegmentsUtils.js":function(Oe,k,u){"use strict";u.r(k),u.d(k,"unescapeDollarsInTemplate",function(){return T}),u.d(k,"replaceIDForTemplate",function(){return D}),u.d(k,"replaceTokenForTemplate",function(){return d}),u.d(k,"getIndexBasedSegment",function(){return N}),u.d(k,"getTimeBasedSegment",function(){return O});var x=u("./src/dash/vo/Segment.js");function y(L,m){for(;L.length<m;)L="0"+L;return L}function T(L){return L&&L.split("$$").join("$")}function D(L,m){if(!m||!L||-1===L.indexOf("$RepresentationID$"))return L;var h=m.toString();return L.split("$RepresentationID$").join(h)}function d(L,m,h){var S,C,F,R,w,b,P=m.length,f="%0".length;if(!L)return L;for(;;){if((S=L.indexOf("$"+m))<0||(C=L.indexOf("$",S+P))<0)return L;if((F=L.indexOf("%0",S+P))>S&&F<C)switch(R=L.charAt(C-1),w=parseInt(L.substring(F+f,C-1),10),R){case"d":case"i":case"u":b=y(h.toString(),w);break;case"x":b=y(h.toString(16),w);break;case"X":b=y(h.toString(16),w).toUpperCase();break;case"o":b=y(h.toString(8),w);break;default:return L}else b=h;L=L.substring(0,S)+b+L.substring(C+1)}}function v(L,m,h,g,S,C,F,R){var w=new x.default;return w.representation=L,w.duration=m,w.presentationStartTime=h,w.mediaStartTime=g,w.availabilityStartTime=S.calcAvailabilityStartTimeFromPresentationTime(C,L,F),w.availabilityEndTime=S.calcAvailabilityEndTimeFromPresentationTime(C+m,L,F),w.wallStartTime=S.calcWallTimeForSegment(w,F),w.replacementNumber=function M(L,m){return L.representation.startNumber+m}(w,R),w.index=R,w}function p(L,m,h,g){var S=m.adaptation.period;if(isFinite(S.duration)&&S.start+S.duration<=h.presentationStartTime)return!1;if(g){if("INF"===m.availabilityTimeOffset)return!0;var C=L.getClientReferenceTime();return h.availabilityStartTime.getTime()<=C&&(!isFinite(h.availabilityEndTime)||h.availabilityEndTime.getTime()>=C)}return!0}function N(L,m,h,g){var S,C,F;S=h.segmentDuration,isNaN(S)&&(S=h.adaptation.period.duration),C=parseFloat((h.adaptation.period.start+g*S).toFixed(5)),F=parseFloat((C+S).toFixed(5));var w=v(h,S,C,L.calcMediaTimeFromPresentationTime(C,h),L,F,m,g);return p(L,h,w,m)?w:null}function O(L,m,h,g,S,C,F,R,w,b){var I,$,P=g/C,f=S/C;return I=L.calcPresentationTimeFromMediaTime(P,h),p(L,h,$=v(h,f,I,P,L,I+f,m,w),m)?($.replacementTime=b||g,F=d(F,"Number",$.replacementNumber),F=d(F,"Time",$.replacementTime),$.media=F,$.mediaRange=R,$):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/constants/Constants.js"),M=u("./src/dash/utils/SegmentsUtils.js");function T(d,v){var p=(d=d||{}).timelineConverter;function O(){if(!p||!p.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(y.default.MISSING_CONFIG_ERROR)}function m(g,S){if(O(),!g)return null;var C=g.adaptation.period.mpd.manifest.Period_asArray[g.adaptation.period.index].AdaptationSet_asArray[g.adaptation.index].Representation_asArray[g.index].SegmentTemplate;S=Math.max(S,0);var F=Object(M.getIndexBasedSegment)(p,v,g,S);if(F){F.replacementTime=Math.round((S-1)*g.segmentDuration*g.timescale,10);var R=C.media;R=Object(M.replaceTokenForTemplate)(R,"Number",F.replacementNumber),R=Object(M.replaceTokenForTemplate)(R,"Time",F.replacementTime),F.media=R}return F}return{getSegmentByIndex:m,getSegmentByTime:function h(g,S){if(O(),!g)return null;var C=g.segmentDuration;if(isNaN(C))return null;var F=p.calcPeriodRelativeTimeFromMpdRelativeTime(g,S);return m(g,Math.floor(F/C))},getMediaFinishedInformation:function L(g){var S={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!g)return S;var C=g.segmentDuration;return S.numberOfSegments=isNaN(C)?1:Math.ceil(g.adaptation.period.duration/C),S}}}T.__dashjs_factory_name="TemplateSegmentsGetter";var D=x.default.getClassFactory(T);k.default=D},"./src/dash/utils/TimelineConverter.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/dash/constants/DashConstants.js"),D=u("./src/dash/models/DashManifestModel.js"),d=u("./src/core/Settings.js"),v=u("./src/streaming/constants/Constants.js"),p=u("./src/streaming/MediaPlayerEvents.js"),N=u("./src/streaming/constants/ConformanceViolationConstants.js");function O(){var g,S,C,F,L=this.context,m=Object(x.default)(L).getInstance(),h=Object(d.default)(L).getInstance();function P(le){F=le}function I(le,ce,ne,pe){var ee,G=ce.adaptation.period.mpd,j=G.availabilityStartTime;if(pe)ee=ne&&G.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(j.getTime()+1e3*(le+G.timeShiftBufferDepth)):G.availabilityEndTime;else if(ne){var _=ce.availabilityTimeOffset;ee=new Date(j.getTime()+1e3*(le-_))}else ee=j;return ee}function z(le,ce){return(le.getTime()-ce.mpd.availabilityStartTime.getTime()+1e3*F)/1e3}function q(le,ce){return le+(ce.adaptation.period.start-ce.presentationTimeOffset)}function oe(le){var ce={start:NaN,end:NaN},ne=le[0].getAdapter().getRegularPeriods()[0],pe=z(new Date,ne);if(!le||0===le.length)return{range:ce,now:pe};le.forEach(function(G){var j=G.getAdapter(),_=j.getMediaInfoForType(G.getStreamInfo(),v.default.VIDEO)||j.getMediaInfoForType(G.getStreamInfo(),v.default.AUDIO),U=j.getVoRepresentations(_)[0],K={start:NaN,end:NaN};if(U)if(U.segmentInfoType===T.default.SEGMENT_TIMELINE)K=function re(le){var A,U,K,te,ne=S.getRepresentationFor(le.index,le.adaptation.period.mpd.manifest.Period_asArray[le.adaptation.period.index].AdaptationSet_asArray[le.adaptation.index]),ee=ne.SegmentTemplate.timescale,G=ne.SegmentTemplate.SegmentTimeline.S_asArray,j={start:0,end:0},_=0;for(j.start=q(G[0].t/ee,le),K=0,te=G.length;K<te;K++)U=0,(A=G[K]).hasOwnProperty("r")&&(U=A.r),_+=A.d/ee*(1+U);return j.end=j.start+_,j}(U);else{var te=U.adaptation.period;K.start=te.start,K.end=Math.max(pe,te.start+te.duration)}!isNaN(K.start)&&(isNaN(ce.start)||ce.start>K.start)&&(ce.start=K.start),!isNaN(K.end)&&(isNaN(ce.end)||ce.end<K.end)&&(ce.end=K.end)}),ce.end=Math.min(pe,ce.end);var ee=ve(le,ce.end,!0);return ce.end=isNaN(ee)?ce.end:ee,ce.start=ne&&ne.mpd&&ne.mpd.timeShiftBufferDepth&&!isNaN(ne.mpd.timeShiftBufferDepth)&&!isNaN(ce.end)?Math.max(ce.end-ne.mpd.timeShiftBufferDepth,ce.start):ce.start,ce.start=ve(le,ce.start),{range:ce,now:pe}}function he(le,ce){C=le-ce.end}function ve(le,ce){var ne=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var pe=0,ee=!1,G=NaN;!ee&&pe<le.length;){var j=le[pe].getStreamInfo();j.start<=ce&&(!isFinite(j.duration)||j.start+j.duration>=ce)?(G=ce,ee=!0):!ne&&j.start>ce&&(isNaN(G)||j.start<G)?G=j.start:ne&&j.start+j.duration<ce&&(isNaN(G)||j.start+j.duration>G)&&(G=j.start+j.duration),pe+=1}return G}catch{return ce}}function ie(le){void 0!==le.offset&&!isNaN(le.offset)&&P(le.offset/1e3)}function de(){F=0,C=0}function ue(){m.off(y.default.UPDATE_TIME_SYNC_OFFSET,ie,this),de()}return g={initialize:function w(){de(),m.on(y.default.UPDATE_TIME_SYNC_OFFSET,ie,this)},getClientTimeOffset:function b(){return F},setClientTimeOffset:P,getClientReferenceTime:function f(){return Date.now()-1e3*C+1e3*F},calcAvailabilityStartTimeFromPresentationTime:function H(le,ce,ne){return I(le,ce,ne)},calcAvailabilityEndTimeFromPresentationTime:function $(le,ce,ne){return I(le,ce,ne,!0)},calcPresentationTimeFromWallTime:z,calcPresentationTimeFromMediaTime:q,calcPeriodRelativeTimeFromMpdRelativeTime:function ge(le,ce){return ce-le.adaptation.period.start},calcMediaTimeFromPresentationTime:function J(le,ce){return le-ce.adaptation.period.start+ce.presentationTimeOffset},calcWallTimeForSegment:function X(le,ce){var pe,ee;return ce&&(pe=le.presentationStartTime+le.representation.adaptation.period.mpd.suggestedPresentationDelay,ee=new Date(le.availabilityStartTime.getTime()+1e3*pe)),ee},calcTimeShiftBufferWindow:function V(le,ce){if(!ce)return function se(le){var ce={start:NaN,end:NaN},ne=0,pe=NaN;return le.forEach(function(ee){var G=ee.getStreamInfo();ne+=G.duration,(isNaN(pe)||G.start<pe)&&(pe=G.start)}),ce.start=pe,ce.end=pe+ne,ce}(le);if(h.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var ne=oe(le);return he(ne.now,ne.range),ne.range}return function Z(le){var ce={start:NaN,end:NaN};if(!le||0===le.length)return ce;var ne=le[0].getAdapter().getRegularPeriods()[0],pe=z(new Date,ne),ee=ne.mpd.timeShiftBufferDepth,G=isNaN(ee)?0:pe-ee;if(ce.start=ve(le,G),ce.end=!isNaN(ce.start)&&pe<ce.start?pe:ve(le,pe,!0),!isNaN(ee)&&ce.end<pe-ee&&(ce.end=NaN),h.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var j=oe(le);if(j.range.end<ce.start)return m.trigger(p.default.CONFORMANCE_VIOLATION,{level:N.default.LEVELS.WARNING,event:N.default.EVENTS.INVALID_DVR_WINDOW}),he(j.now,j.range),j.range}return ce}(le)},reset:ue},function R(){S=Object(D.default)(L).getInstance(),ue()}(),g}O.__dashjs_factory_name="TimelineConverter",k.default=M.default.getSingletonFactory(O)},"./src/dash/utils/TimelineSegmentsGetter.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/constants/Constants.js"),M=u("./src/dash/utils/SegmentsUtils.js");function T(d,v){var p=(d=d||{}).timelineConverter,N=d.dashMetrics;function L(){if(!p)throw new Error(y.default.MISSING_CONFIG_ERROR)}function h(F,R){var $,z,q,J,X,V,se,w=F.adaptation.period.mpd.manifest.Period_asArray[F.adaptation.period.index].AdaptationSet_asArray[F.adaptation.index].Representation_asArray[F.index].SegmentTemplate||F.adaptation.period.mpd.manifest.Period_asArray[F.adaptation.period.index].AdaptationSet_asArray[F.adaptation.index].Representation_asArray[F.index].SegmentList,P=w.SegmentURL_asArray,f=0,I=0,H=-1;se=F.timescale;var Z=!1;for(q=0,J=($=w.SegmentTimeline.S_asArray).length;q<J&&!Z;q++)for(V=0,(z=$[q]).hasOwnProperty("r")&&(V=z.r),z.hasOwnProperty("t")&&(I=(f=z.t)/se),V<0&&(V=g(F,$[q+1],z,se,I)),X=0;X<=V&&!Z;X++)(Z=R(f,I,w,P,z,se,++H,q))&&(F.segmentDuration=z.d/se),I=(f+=z.d)/se}function g(F,R,w,b,P){var f;if(R&&R.hasOwnProperty("t"))f=R.t/b;else try{var I=0;if(isNaN(F.adaptation.period.start)||isNaN(F.adaptation.period.duration)||!isFinite(F.adaptation.period.duration)){var H=N.getCurrentDVRInfo();I=isNaN(H.end)?0:H.end}else I=F.adaptation.period.start+F.adaptation.period.duration;f=p.calcMediaTimeFromPresentationTime(I,F),F.segmentDuration=w.d/b}catch{f=0}return Math.max(Math.ceil((f-P)/(w.d/b))-1,0)}return{getSegmentByIndex:function S(F,R,w){if(L(),!F)return null;var b=null,P=!1;return h(F,function(f,I,H,$,z,q,J,X){if(P||w<0){var V=H.media,se=z.mediaRange;return $&&(V=$[X].media||"",se=$[X].mediaRange),b=Object(M.getTimeBasedSegment)(p,v,F,f,z.d,q,V,se,J,z.tManifest),!0}return I>=w-.5*z.d/q&&(P=!0),!1}),b},getSegmentByTime:function C(F,R){if(L(),!F)return null;void 0===R&&(R=null);var w=null,b=p.calcMediaTimeFromPresentationTime(R,F);return h(F,function(P,f,I,H,$,z,q,J){if(b<f+$.d/z&&b>=f){var X=I.media,V=$.mediaRange;return H&&(X=H[J].media||"",V=H[J].mediaRange),w=Object(M.getTimeBasedSegment)(p,v,F,P,$.d,z,X,V,q,$.tManifest),!0}return!1}),w},getMediaFinishedInformation:function m(F){if(!F)return 0;var I,H,$,z,q,J,X,b=0,P=0,f=0;for(X=F.timescale,z=(I=(F.adaptation.period.mpd.manifest.Period_asArray[F.adaptation.period.index].AdaptationSet_asArray[F.adaptation.index].Representation_asArray[F.index].SegmentTemplate||F.adaptation.period.mpd.manifest.Period_asArray[F.adaptation.period.index].AdaptationSet_asArray[F.adaptation.index].Representation_asArray[F.index].SegmentList).SegmentTimeline.S_asArray).length,$=0;$<z;$++)for(J=0,(H=I[$]).hasOwnProperty("r")&&(J=H.r),H.hasOwnProperty("t")&&(P=(b=H.t)/X),J<0&&(J=g(F,I[$+1],H,X,P)),q=0;q<=J;q++)f++,P=(b+=H.d)/X;return{numberOfSegments:f,mediaTimeOfLastSignaledSegment:P}}}}T.__dashjs_factory_name="TimelineSegmentsGetter";var D=x.default.getClassFactory(T);k.default=D},"./src/dash/vo/AdaptationSet.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.period=null,this.index=-1,this.type=null}},"./src/dash/vo/BaseURL.js":function(Oe,k,u){"use strict";u.r(k);var T=function D(d,v,p,N){(function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this.url=d||"",this.serviceLocation=v||d||"",this.dvb_priority=p||1,this.dvb_weight=N||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};T.DEFAULT_DVB_PRIORITY=1,T.DEFAULT_DVB_WEIGHT=1,k.default=T},"./src/dash/vo/Event.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}},"./src/dash/vo/EventStream.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},"./src/dash/vo/ManifestInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}},"./src/dash/vo/MediaInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1}},"./src/dash/vo/Mpd.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}},"./src/dash/vo/PatchOperation.js":function(Oe,k,u){"use strict";function y(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d,v,p){(function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this.action=d,this.xpath=v,this.value=p,this.position=null}return function M(D,d,v){return d&&y(D.prototype,d),v&&y(D,v),D}(D,[{key:"getMpdTarget",value:function(v){return this.xpath.getMpdTarget(v,"remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position)}}]),D}()},"./src/dash/vo/Period.js":function(Oe,k,u){"use strict";u.r(k);var y=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};y.DEFAULT_ID="defaultId",k.default=y},"./src/dash/vo/ProducerReferenceTime.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},"./src/dash/vo/Representation.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/constants/DashConstants.js");function M(d,v){for(var p=0;p<v.length;p++){var N=v[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}k.default=function(){function d(){(function y(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return function T(d,v,p){return v&&M(d.prototype,v),p&&M(d,p),d}(d,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==x.default.BASE_URL&&this.segmentInfoType!==x.default.SEGMENT_BASE&&!this.indexRange}}]),d}()},"./src/dash/vo/RepresentationInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}},"./src/dash/vo/Segment.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},"./src/dash/vo/SimpleXPath.js":function(Oe,k,u){"use strict";function y(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d){var v=this;(function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")})(this,D),this.valid="/"==d[0],this.path=d.split("/").filter(function(p){return 0!==p.length}).map(function(p){var N={name:p},O=p.indexOf("[");if(-1!=O){N.name=p.substring(0,O);var L=p.substring(O+1,p.length-1);v.valid=v.valid&&-1==L.indexOf("[");var m=L.indexOf("=");-1!=m?(N.attribute={name:L.substring(1,m),value:L.substring(m+1)},-1!=["'",'"'].indexOf(N.attribute.value[0])&&(N.attribute.value=N.attribute.value.substring(1,N.attribute.value.length-1))):N.position=parseInt(L,10)-1}return N})}return function M(D,d,v){return d&&y(D.prototype,d),v&&y(D,v),D}(D,[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(v,p){for(var N=null,O=v,L=1,m="MPD";L<this.path.length&&null!==O;){N=O;var h=this.path[L];if(m=h.name,L!==this.path.length-1||!m.startsWith("@")){var g=N[m+"_asArray"]||[];0===g.length&&N[m]&&g.push(N[m]),h.position?O=g[h.position]||null:h.attribute?function(){var S=h.attribute;O=g.filter(function(C){return C[S.name]==S.value})[0]||null}():O=g[0]||null}L++}return null===O?null:m.startsWith("@")?{name:m.substring(1),leaf:O,target:O}:{name:m,leaf:O,target:p?N:O}}}]),D}()},"./src/dash/vo/StreamInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}},"./src/dash/vo/UTCTiming.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.schemeIdUri="",this.value=""}},"./src/streaming/FragmentLoader.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/net/URLLoader.js"),M=u("./src/streaming/vo/HeadRequest.js"),T=u("./src/streaming/vo/DashJSError.js"),D=u("./src/core/FactoryMaker.js");function d(v){var g,S,p=this.context,N=(v=v||{}).eventBus,O=v.events,L=v.urlUtils,m=v.errors,h=v.streamId;return g={checkForExistence:function F(P){var f=function($){N.trigger(O.CHECK_FOR_EXISTENCE_COMPLETED,{request:P,exists:$})};if(P){var I=new M.default(P.url);S.load({request:I,success:function(){f(!0)},error:function(){f(!1)}})}else f(!1)},load:function R(P){var f=function(H,$){N.trigger(O.LOADING_COMPLETED,{request:P,response:H||null,error:$||null,sender:g})};P?S.load({request:P,progress:function(H){N.trigger(O.LOADING_PROGRESS,{request:P,stream:H.stream,streamId:h}),H.data&&N.trigger(O.LOADING_DATA_PROGRESS,{request:P,response:H.data||null,error:null,sender:g})},success:function(H){f(H)},error:function(H,$,z){f(void 0,new T.default(m.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,z,$))},abort:function(H){H&&N.trigger(O.LOADING_ABANDONED,{mediaType:H.mediaType,request:H,sender:g})}}):f(void 0,new T.default(m.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,m.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function w(){S&&S.abort()},reset:function b(){S&&(S.abort(),S=null)}},function C(){S=Object(y.default)(p).create({errHandler:v.errHandler,errors:m,dashMetrics:v.dashMetrics,mediaPlayerModel:v.mediaPlayerModel,requestModifier:v.requestModifier,urlUtils:L,constants:x.default,boxParser:v.boxParser,dashConstants:v.dashConstants,requestTimeout:v.settings.get().streaming.fragmentRequestTimeout})}(),g}d.__dashjs_factory_name="FragmentLoader",k.default=D.default.getClassFactory(d)},"./src/streaming/ManifestLoader.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/dash/constants/DashConstants.js"),M=u("./src/streaming/controllers/XlinkController.js"),T=u("./src/streaming/net/URLLoader.js"),D=u("./src/streaming/utils/URLUtils.js"),d=u("./src/streaming/vo/TextRequest.js"),v=u("./src/streaming/vo/DashJSError.js"),p=u("./src/streaming/vo/metrics/HTTPRequest.js"),N=u("./src/core/EventBus.js"),O=u("./src/core/events/Events.js"),L=u("./src/core/errors/Errors.js"),m=u("./src/core/FactoryMaker.js"),h=u("./src/dash/parser/DashParser.js");function g(C){var P,f,I,H,$,F=this.context,R=(C=C||{}).debug,w=Object(N.default)(F).getInstance(),b=Object(D.default)(F).getInstance(),z=C.mssHandler,q=C.errHandler;function X(oe){w.trigger(O.default.INTERNAL_MANIFEST_LOADED,{manifest:oe.manifest})}return P={load:function se(oe){var he=new d.default(oe,p.HTTPRequest.MPD_TYPE);I.load({request:he,success:function(re,ge,ie){if(H){var de,ue,le;if(ie&&ie!==oe?(ue=b.parseBaseUrl(ie),de=ie):(b.isRelative(oe)&&(oe=b.resolve(oe,window.location.href)),ue=b.parseBaseUrl(oe)),"No Content"==ge)return void w.trigger(O.default.INTERNAL_MANIFEST_LOADED,{manifest:null});if(null===$&&($=function V(oe){var he=null;return oe.indexOf("SmoothStreamingMedia")>-1?(z&&(he=z.createMssParser(),z.registerEvents()),he):oe.indexOf("MPD")>-1||oe.indexOf("Patch")>-1?Object(h.default)(F).create({debug:R}):he}(re)),null===$)return void w.trigger(O.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(oe))});H.setMatchers($.getMatchers()),H.setIron($.getIron());try{le=$.parse(re)}catch{return void w.trigger(O.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(oe))})}le?(le.url=de||oe,le.originalUrl||(le.originalUrl=le.url),le.hasOwnProperty(x.default.LOCATION)&&(ue=b.parseBaseUrl(le.Location_asArray[0]),f.debug("BaseURI set by Location to: "+ue)),le.baseUri=ue,le.loadedTime=new Date,H.resolveManifestOnLoad(le),w.trigger(O.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:re})):w.trigger(O.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,L.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(oe))})}},error:function(re,ge,ie){w.trigger(O.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new v.default(L.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,L.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(oe,", ").concat(ie))})}})},reset:function Z(){w.off(O.default.XLINK_READY,X,P),z&&z.reset(),H&&(H.reset(),H=null),I&&(I.abort(),I=null)}},function J(){f=R.getLogger(P),w.on(O.default.XLINK_READY,X,P),I=Object(T.default)(F).create({errHandler:C.errHandler,dashMetrics:C.dashMetrics,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,urlUtils:b,constants:x.default,dashConstants:y.default,errors:L.default}),H=Object(M.default)(F).create({errHandler:q,dashMetrics:C.dashMetrics,mediaPlayerModel:C.mediaPlayerModel,requestModifier:C.requestModifier,settings:C.settings}),$=null}(),P}g.__dashjs_factory_name="ManifestLoader";var S=m.default.getClassFactory(g);k.default=S},"./src/streaming/ManifestUpdater.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),M=u("./src/streaming/MediaPlayerEvents.js"),T=u("./src/core/FactoryMaker.js"),D=u("./src/core/Debug.js"),d=u("./src/core/errors/Errors.js"),v=u("./src/dash/constants/DashConstants.js"),p=u("./src/streaming/utils/URLUtils.js");function N(){var h,g,S,C,F,R,w,b,P,f,I,H,O=this.context,L=Object(x.default)(O).getInstance(),m=Object(p.default)(O).getInstance();function X(){S=NaN,w=!1,F=!0,R=!1,se()}function se(){null!==C&&(clearTimeout(C),C=null)}function Z(le){se(),!R&&(isNaN(le)&&!isNaN(S)&&(le=1e3*S),isNaN(le)||(g.debug("Refresh manifest in "+le+" milliseconds."),C=setTimeout(ve,le)))}function oe(){var le=arguments.length>0&&void 0!==arguments[0]&&arguments[0];w=!0;var ce=P.getValue(),ne=ce.url,pe=f.getPatchLocation(ce),ee=f.getLocation(ce);pe&&!le?ne=pe:ee&&(ne=ee),m.isRelative(ne)&&(ne=m.resolve(ne,ce.url)),b.load(ne)}function he(le){if(le){if(f.getIsPatch(le)){var ce=le;le=P.getValue();var ne=f.isPatchValid(le,ce),pe=ne;if(ne){var ee=f.getPublishTime(le);pe=f.applyPatchToManifest(le,ce);var G=f.getPublishTime(le);pe=ee.getTime()!=G.getTime()}if(!pe)return g.debug("Patch provided is invalid, performing full manifest refresh"),void oe(!0);le.loadedTime=new Date}}else(le=P.getValue()).loadedTime=new Date;if(P.getValue()&&P.getValue().type===v.default.DYNAMIC&&le.type===v.default.STATIC)return L.trigger(y.default.DYNAMIC_TO_STATIC),w=!1,void(R=!0);P.setValue(le);var j=new Date,_=(j.getTime()-le.loadedTime.getTime())/1e3;1e3*(S=f.getManifestUpdatePeriod(le,_))>2147483647&&(S=2147483.647),L.trigger(y.default.MANIFEST_UPDATED,{manifest:le}),g.info("Manifest has been refreshed at "+j+"["+j.getTime()/1e3+"] "),F||Z()}function ve(){if(!F){if(w)return void Z(H.get().streaming.manifestUpdateRetryInterval);oe()}}function re(le){le.error?le.error.code===d.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&I.error(le.error):he(le.manifest)}function ge(){F=!1,Z()}function ie(){(F=!H.get().streaming.scheduling.scheduleWhilePaused)&&se()}function de(){w=!1}return h={initialize:function q(){X(),L.on(y.default.STREAMS_COMPOSED,de,this),L.on(M.default.PLAYBACK_STARTED,ge,this),L.on(M.default.PLAYBACK_PAUSED,ie,this),L.on(y.default.INTERNAL_MANIFEST_LOADED,re,this)},setManifest:function J(le){he(le)},refreshManifest:oe,getIsUpdating:function ue(){return w},setConfig:function z(le){!le||(le.manifestModel&&(P=le.manifestModel),le.adapter&&(f=le.adapter),le.manifestLoader&&(b=le.manifestLoader),le.errHandler&&(I=le.errHandler),le.settings&&(H=le.settings))},reset:function V(){L.off(M.default.PLAYBACK_STARTED,ge,this),L.off(M.default.PLAYBACK_PAUSED,ie,this),L.off(y.default.STREAMS_COMPOSED,de,this),L.off(y.default.INTERNAL_MANIFEST_LOADED,re,this),X()}},function $(){g=Object(D.default)(O).getInstance().getLogger(h)}(),h}N.__dashjs_factory_name="ManifestUpdater",k.default=T.default.getClassFactory(N)},"./src/streaming/MediaPlayer.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./externals/cea608-parser.js"),y=u.n(x),M=u("./src/streaming/constants/Constants.js"),T=u("./src/dash/constants/DashConstants.js"),D=u("./src/streaming/constants/MetricsConstants.js"),d=u("./src/streaming/controllers/PlaybackController.js"),v=u("./src/streaming/controllers/StreamController.js"),p=u("./src/streaming/controllers/GapController.js"),N=u("./src/streaming/controllers/CatchupController.js"),O=u("./src/streaming/controllers/ServiceDescriptionController.js"),L=u("./src/streaming/controllers/MediaController.js"),m=u("./src/streaming/controllers/BaseURLController.js"),h=u("./src/streaming/ManifestLoader.js"),g=u("./src/streaming/utils/ErrorHandler.js"),S=u("./src/streaming/utils/Capabilities.js"),C=u("./src/streaming/utils/CapabilitiesFilter.js"),F=u("./src/streaming/utils/RequestModifier.js"),R=u("./src/streaming/models/URIFragmentModel.js"),w=u("./src/streaming/models/ManifestModel.js"),b=u("./src/streaming/models/MediaPlayerModel.js"),P=u("./src/streaming/controllers/AbrController.js"),f=u("./src/streaming/net/SchemeLoaderFactory.js"),I=u("./src/streaming/models/VideoModel.js"),H=u("./src/streaming/models/CmcdModel.js"),$=u("./src/streaming/utils/DOMStorage.js"),z=u("./src/core/Debug.js"),q=u("./src/core/errors/Errors.js"),J=u("./src/core/EventBus.js"),X=u("./src/core/events/Events.js"),V=u("./src/streaming/MediaPlayerEvents.js"),se=u("./src/core/FactoryMaker.js"),Z=u("./src/core/Settings.js"),oe=u("./src/core/Version.js"),he=u("./src/dash/controllers/SegmentBaseController.js"),ve=u("./src/dash/DashAdapter.js"),re=u("./src/dash/DashMetrics.js"),ge=u("./src/dash/utils/TimelineConverter.js"),ie=u("./src/streaming/vo/metrics/HTTPRequest.js"),de=u("./externals/base64.js"),ue=u.n(de),le=u("./node_modules/codem-isoboxer/dist/iso_boxer.js"),ce=u.n(le),ne=u("./src/streaming/vo/DashJSError.js"),pe=u("./src/streaming/utils/SupervisorTools.js"),ee=u("./src/streaming/ManifestUpdater.js"),G=u("./src/streaming/utils/URLUtils.js"),j=u("./src/streaming/utils/BoxParser.js"),_=u("./src/streaming/text/TextController.js"),A=u("./src/streaming/models/CustomParametersModel.js");function U(){var Te,Ne,Ie,we,ke,Re,xe,ze,ut,at,yt,Lt,kt,Zt,nn,sn,Be,Le,Ce,Ue,Qe,st,ct,Ze,ht,Ut,It,Wt,Fe,Ye,et,Rt,Tt,bt,rn,lt,te="You must first call initialize() and set a source before calling this method",ye="You must first call initialize() and set a valid source and view before calling this method",Se="You must first call attachView() to set the video element before calling this method",Y="MediaPlayer not initialized!",W=this.context,_e=Object(J.default)(W).getInstance(),Ee=Object(Z.default)(W).getInstance(),me=Object(z.default)(W).getInstance({settings:Ee});function mt(){Ys(null),Ia(null),we=null,kt&&(kt.reset(),kt=null),Zt&&(Zt.reset(),Zt=null),Ce&&(Ce.reset(),Ce=null),Ee.reset(),sn&&(sn.reset(),sn=null)}function tt(){return!!Ie&&!!Tt.getElement()}function an(){return Object(oe.getVersionString)()}function ot(){if(!xe)throw ye;return It.isPaused()}function Sn(Ge){var Pt=Ze&&Ze.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,vt=Ye.getCurrentDVRInfo(Pt);if(!vt)return 0;var Qt=It.getLiveDelay(),gn=vt.range.start+Ge;return gn>vt.range.end-Qt&&(gn=vt.range.end-Qt),gn}function Mt(Ge){if(!xe)throw ye;var Pt=rr().currentTime;if(void 0!==Ge)Pt=Ze.getTimeRelativeToStreamId(Pt,Ge);else if(It.getIsDynamic()){var vt=Ze&&Ze.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,Qt=Ye.getCurrentDVRInfo(vt);Pt=null===Qt||0===Pt?0:Math.max(0,Pt-Qt.range.start)}return Pt}function Gn(){if(!xe)throw ye;var Ge=rr().duration;if(It.getIsDynamic()){var Pt=Ze&&Ze.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,vt=Ye.getCurrentDVRInfo(Pt);Ge=vt?vt.range.end-vt.range.start:0}return Ge}function De(Ge){Object(pe.checkParameterType)(Ge,"boolean"),ze=Ge}function Cr(){Ce.restoreDefaultUTCTimingSources()}function Jt(){return Ye}function rr(){if(!Tt.getElement())throw Se;return Tt.getElement()}function Ia(Ge){if(!ke)throw Y;Tt.setElement(Ge),Ge&&(ba(),function Hn(){if(!Zt){var Ge=dashjs.MetricsReporting;if("function"==typeof Ge){var Pt=Ge(W).create();Zt=Pt.createMetricsReporting({debug:me,eventBus:_e,mediaElement:rr(),adapter:Be,dashMetrics:Ye,mediaPlayerModel:Le,events:X.default,constants:M.default,metricsConstants:D.default})}}}(),function Ir(){if(!nn){var Ge=dashjs.MssHandler;"function"==typeof Ge&&(q.default.extend(Ge.errors),nn=Ge(W).create({eventBus:_e,mediaPlayerModel:Le,dashMetrics:Ye,manifestModel:et,playbackController:It,streamController:Ze,protectionController:kt,baseURLController:Qe,errHandler:Ue,events:X.default,constants:M.default,debug:me,initSegmentType:ie.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:ue.a,ISOBoxer:ce.a,settings:Ee}))}}(),Ze&&Ze.switchToVideoElement()),xe&&uu(),Er()}function Pa(Ge){if(!Re)throw te;var Pt=Ze.getActiveStreamInfo();return Pt?Lt.getTracksFor(Ge,Pt.id):[]}function Ys(Ge){if(!ke)throw Y;"string"==typeof Ge&&bt.initialize(Ge),Ie=Ge,(Re||xe)&&uu(),tt()&&Er()}function $s(){if(!Re)throw te;var Ge=Ze.getActiveStreamInfo();return Ge?Ze.getStreamById(Ge.id):null}function uu(){xe=!1,Re=!1,Be.reset(),Ze.reset(),Ut.reset(),Fe.reset(),It.reset(),Wt.reset(),ut.reset(),Lt.reset(),lt.reset(),kt&&(Ee.get().streaming.protection.keepProtectionMediaKeys?kt.stop():(kt.reset(),kt=null,ba())),ht.reset(),Rt.reset()}function Uo(){return Object(h.default)(W).create({debug:me,errHandler:Ue,dashMetrics:Ye,mediaPlayerModel:Le,requestModifier:Object(F.default)(W).getInstance(),mssHandler:nn,settings:Ee})}function ba(){if(kt)return kt;var Ge=dashjs.Protection;if("function"==typeof Ge){var Pt=Ge(W).create();return X.default.extend(Ge.events),V.default.extend(Ge.events,{publicOnly:!0}),q.default.extend(Ge.errors),st||(st=Object(S.default)(W).getInstance()),kt=Pt.createProtectionSystem({debug:me,errHandler:Ue,videoModel:Tt,customParametersModel:Ce,capabilities:st,eventBus:_e,events:X.default,BASE64:ue.a,constants:M.default,cmcdModel:Rt,settings:Ee})}return null}function jn(){if(!ke)throw Y;if(sn)return sn;var Ge=dashjs.OfflineController;if("function"==typeof Ge){X.default.extend(Ge.events),V.default.extend(Ge.events,{publicOnly:!0}),q.default.extend(Ge.errors);var Pt=Uo(),vt=Object(ee.default)(W).create();return vt.setConfig({manifestModel:et,adapter:Be,manifestLoader:Pt,errHandler:Ue}),sn=Ge(W).create({debug:me,manifestUpdater:vt,baseURLController:Qe,manifestLoader:Pt,manifestModel:et,mediaPlayerModel:Le,abrController:ut,playbackController:It,adapter:Be,errHandler:Ue,dashMetrics:Ye,timelineConverter:yt,segmentBaseController:lt,schemeLoaderFactory:at,eventBus:_e,events:X.default,errors:q.default,constants:M.default,settings:Ee,dashConstants:T.default,urlUtils:Object(G.default)(W).getInstance()})}return null}function vr(Ge){var Pt=Ze&&Ze.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,vt=Ye.getCurrentDVRInfo(Pt);return vt?Ge+(vt.manifestInfo.availableFrom.getTime()/1e3+vt.range.start):0}function Er(){sn&&sn.resetRecords(),!Re&&Ie&&(Re=!0,Ne.info("Streaming Initialized"),function Yn(){var Ge=Uo();Ze||(Ze=Object(v.default)(W).getInstance()),ht||(ht=Object(_.default)(W).create({errHandler:Ue,manifestModel:et,adapter:Be,mediaController:Lt,videoModel:Tt,settings:Ee})),ct.setConfig({capabilities:st,customParametersModel:Ce,adapter:Be,settings:Ee,manifestModel:et,errHandler:Ue}),Ze.setConfig({capabilities:st,capabilitiesFilter:ct,manifestLoader:Ge,manifestModel:et,mediaPlayerModel:Le,customParametersModel:Ce,protectionController:kt,textController:ht,adapter:Be,dashMetrics:Ye,errHandler:Ue,timelineConverter:yt,videoModel:Tt,playbackController:It,serviceDescriptionController:Wt,abrController:ut,mediaController:Lt,settings:Ee,baseURLController:Qe,uriFragmentModel:bt,segmentBaseController:lt}),Ut.setConfig({settings:Ee,playbackController:It,streamController:Ze,videoModel:Tt,timelineConverter:yt,adapter:Be}),It.setConfig({streamController:Ze,serviceDescriptionController:Wt,dashMetrics:Ye,adapter:Be,videoModel:Tt,timelineConverter:yt,settings:Ee}),Fe.setConfig({streamController:Ze,playbackController:It,mediaPlayerModel:Le,dashMetrics:Ye,videoModel:Tt,settings:Ee}),ut.setConfig({streamController:Ze,domStorage:rn,mediaPlayerModel:Le,customParametersModel:Ce,dashMetrics:Ye,adapter:Be,videoModel:Tt,settings:Ee}),Rt.setConfig({abrController:ut,dashMetrics:Ye,playbackController:It}),ut.initialize(),Ze.initialize(ze,we),ht.initialize(),Ut.initialize(),Fe.initialize(),Rt.initialize(),lt.initialize()}(),"string"==typeof Ie?Ze.load(Ie):Ze.loadWithManifest(Ie)),!xe&&tt()&&(xe=!0,Ne.info("Playback Initialized"))}return Te={initialize:function $e(Ge,Pt,vt){st||(st=Object(S.default)(W).getInstance()).setConfig({settings:Ee}),Ue||(Ue=Object(g.default)(W).getInstance()),st.supportsMediaSource()?(ke||(ke=!0,yt=Object(ge.default)(W).getInstance(),ut||(ut=Object(P.default)(W).getInstance()).setConfig({settings:Ee}),at||(at=Object(f.default)(W).getInstance()),It||(It=Object(d.default)(W).getInstance()),Lt||(Lt=Object(L.default)(W).getInstance()),Ze||(Ze=Object(v.default)(W).getInstance()),Ut||(Ut=Object(p.default)(W).getInstance()),Fe||(Fe=Object(N.default)(W).getInstance()),Wt||(Wt=Object(O.default)(W).getInstance()),ct||(ct=Object(C.default)(W).getInstance()),Be=Object(ve.default)(W).getInstance(),et=Object(w.default)(W).getInstance(),Rt=Object(H.default)(W).getInstance(),Ye=Object(re.default)(W).getInstance({settings:Ee}),rn=Object($.default)(W).getInstance({settings:Ee}),Be.setConfig({constants:M.default,cea608parser:y.a,errHandler:Ue,BASE64:ue.a}),Qe||(Qe=Object(m.default)(W).create()),Qe.setConfig({adapter:Be}),Wt.setConfig({adapter:Be}),lt||(lt=Object(he.default)(W).getInstance({dashMetrics:Ye,mediaPlayerModel:Le,errHandler:Ue,baseURLController:Qe,events:X.default,eventBus:_e,debug:me,boxParser:Object(j.default)(W).getInstance(),requestModifier:Object(F.default)(W).getInstance(),errors:q.default})),Lt.setConfig({domStorage:rn,settings:Ee,customParametersModel:Ce}),Le.setConfig({playbackController:It,serviceDescriptionController:Wt}),Cr(),De(void 0===vt||vt),jn()),Ge&&Ia(Ge),Pt&&Ys(Pt),Ne.info("[dash.js "+an()+"] MediaPlayer has been initialized")):Ue.error(new ne.default(q.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,q.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function Me(Ge){!Ge||(Ge.capabilities&&(st=Ge.capabilities),Ge.capabilitiesFilter&&(ct=Ge.capabilitiesFilter),Ge.streamController&&(Ze=Ge.streamController),Ge.textController&&(ht=Ge.textController),Ge.gapController&&(Ut=Ge.gapController),Ge.playbackController&&(It=Ge.playbackController),Ge.serviceDescriptionController&&(Wt=Ge.serviceDescriptionController),Ge.catchupController&&(Fe=Ge.catchupController),Ge.mediaPlayerModel&&(Le=Ge.mediaPlayerModel),Ge.customParametersModel&&(Ce=Ge.customParametersModel),Ge.abrController&&(ut=Ge.abrController),Ge.schemeLoaderFactory&&(at=Ge.schemeLoaderFactory),Ge.mediaController&&(Lt=Ge.mediaController),Ge.settings&&(Ee=Ge.settings))},on:function Et(Ge,Pt,vt,Qt){_e.on(Ge,Pt,vt,Qt)},off:function Yt(Ge,Pt,vt){_e.off(Ge,Pt,vt)},extend:function jf(Ge,Pt,vt){se.default.extend(Ge,Pt,vt,W)},attachView:Ia,attachSource:Ys,isReady:tt,play:function Vt(){if(!xe)throw ye;(!ze||ot()&&xe)&&It.play()},isPaused:ot,pause:function qe(){if(!xe)throw ye;It.pause()},isSeeking:function nt(){if(!xe)throw ye;return It.isSeeking()},isDynamic:function ft(){if(!xe)throw ye;return It.getIsDynamic()},getLowLatencyModeEnabled:function Nt(){if(!xe)throw ye;return It.getLowLatencyModeEnabled()},seek:function Ve(Ge){if(!xe)throw ye;if(Object(pe.checkParameterType)(Ge,"number"),isNaN(Ge))throw M.default.BAD_ARGUMENT_ERROR;var Pt=It.getIsDynamic()?Sn(Ge):Ge;It.seek(Pt)},setPlaybackRate:function Bt(Ge){rr().playbackRate=Ge},getPlaybackRate:function Ke(){return rr().playbackRate},setMute:function wt(Ge){Object(pe.checkParameterType)(Ge,"boolean"),rr().muted=Ge},isMuted:function _t(){return rr().muted},setVolume:function en(Ge){if("number"!=typeof Ge||isNaN(Ge)||Ge<0||Ge>1)throw M.default.BAD_ARGUMENT_ERROR;rr().volume=Ge},getVolume:function Dn(){return rr().volume},time:Mt,duration:Gn,timeAsUTC:function tn(){if(!xe)throw ye;return Mt()<0?NaN:vr(Mt())},durationAsUTC:function yn(){if(!xe)throw ye;return vr(Gn())},getActiveStream:$s,getDVRWindowSize:function Ht(){var Ge=Ze&&Ze.hasVideoTrack()?M.default.VIDEO:M.default.AUDIO,Pt=Ye.getCurrentDVRInfo(Ge);return Pt?Pt.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:Sn,getTargetLiveDelay:function mr(){if(!xe)throw ye;return It.getLiveDelay()},convertToTimeCode:function Fr(Ge){Ge=Math.max(Ge,0);var Pt=Math.floor(Ge/3600),vt=Math.floor(Ge%3600/60),Qt=Math.floor(Ge%3600%60);return(0===Pt?"":Pt<10?"0"+Pt.toString()+":":Pt.toString()+":")+(vt<10?"0"+vt.toString():vt.toString())+":"+(Qt<10?"0"+Qt.toString():Qt.toString())},formatUTC:function kf(Ge,Pt,vt){var Qt=arguments.length>3&&void 0!==arguments[3]&&arguments[3],gn=new Date(1e3*Ge),cr=gn.toLocaleDateString(Pt),Wr=gn.toLocaleTimeString(Pt,{hour12:vt});return Qt?Wr+" "+cr:Wr},getVersion:an,getDebug:function zt(){return me},getBufferLength:function Ln(Ge){var Pt=[M.default.VIDEO,M.default.AUDIO,M.default.TEXT];if(Ge)return-1!==Pt.indexOf(Ge)?Jt().getCurrentBufferLevel(Ge)||NaN:(Ne.warn("getBufferLength requested for invalid type"),NaN);var vt=Pt.map(function(gn){return Pa(gn).length>0?Jt().getCurrentBufferLevel(gn):Number.MAX_VALUE}).reduce(function(gn,cr){return Math.min(gn,cr)});return vt===Number.MAX_VALUE?NaN:vt},getTTMLRenderingDiv:function Ff(){return Tt?Tt.getTTMLRenderingDiv():null},getVideoElement:rr,getSource:function Oa(){if(!Ie)throw"You must first call attachSource() with a valid source before calling this method";return Ie},updateSource:function Bo(Ge){Ze.load(Ie=Ge)},getCurrentLiveLatency:function He(){if(!ke)throw Y;return xe?It.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function Si(Ge){if(!Re)throw te;return ut.getTopBitrateInfoFor(Ge)},setAutoPlay:De,getAutoPlay:function Pe(){return ze},getDashMetrics:Jt,getQualityFor:function Vr(Ge){if(!Re)throw te;if(Ge===M.default.IMAGE){var Pt=$s();if(!Pt)return-1;var vt=Pt.getThumbnailController();return vt?vt.getCurrentTrackIndex():-1}return ut.getQualityFor(Ge)},setQualityFor:function Ai(Ge,Pt){var vt=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Re)throw te;if(Ge===M.default.IMAGE){var Qt=$s();if(!Qt)return;var gn=Qt.getThumbnailController();gn&&gn.setTrackByIndex(Pt)}ut.setPlaybackQuality(Ge,Ze.getActiveStreamInfo(),Pt,{forceReplace:vt})},updatePortalSize:function fi(){ut.setElementSize(),ut.setWindowResizeEventCalled(!0)},enableText:function hn(Ge){var Pt=Ze.getActiveStreamInfo();return!(!Pt||!ht)&&ht.enableText(Pt.id,Ge)},enableForcedTextStreaming:function Cn(Ge){return!(!Ze.getActiveStreamInfo()||!ht)&&ht.enableForcedTextStreaming(Ge)},isTextEnabled:function xt(){var Ge=Ze.getActiveStreamInfo();return!(!Ge||!ht)&&ht.isTextEnabled(Ge)},setTextTrack:function Kr(Ge){if(!xe)throw ye;var Pt=Ze.getActiveStreamInfo();!Pt||!ht||ht.setTextTrack(Pt.id,Ge)},getBitrateInfoListFor:function iu(Ge){if(!Re)throw te;var Pt=$s();return Pt?Pt.getBitrateListFor(Ge):[]},getStreamsFromManifest:function Ra(Ge){if(!Re)throw te;return Be.getStreamsInfo(Ge)},getTracksFor:Pa,getTracksForTypeFromManifest:function su(Ge,Pt,vt){if(!Re)throw te;return(vt=vt||Be.getStreamsInfo(Pt,1)[0])?Be.getAllMediaInfoForType(vt,Ge,Pt):[]},getCurrentTrackFor:function Bf(Ge){if(!Re)throw te;var Pt=Ze.getActiveStreamInfo();return Lt.getCurrentTrackFor(Ge,Pt.id)},setInitialMediaSettingsFor:function on(Ge,Pt){if(!ke)throw Y;Lt.setInitialSettings(Ge,Pt)},getInitialMediaSettingsFor:function xo(Ge){if(!ke)throw Y;return Lt.getInitialSettings(Ge)},setCurrentTrack:function Uf(Ge){if(!Re)throw te;Lt.setTrack(Ge)},addABRCustomRule:function rt(Ge,Pt,vt){Ce.addAbrCustomRule(Ge,Pt,vt)},removeABRCustomRule:function St(Ge){Ce.removeAbrCustomRule(Ge)},removeAllABRCustomRule:function Gt(){Ce.removeAllAbrCustomRule()},getABRCustomRules:function _n(){return Ce.getAbrCustomRules()},getAverageThroughput:function Gs(Ge){var Pt=ut.getThroughputHistory(),vt=It.getIsDynamic();return Pt?Pt.getAverageThroughput(Ge,vt):0},retrieveManifest:function Fn(Ge,Pt){var vt=Uo(),Qt=this;_e.on(X.default.INTERNAL_MANIFEST_LOADED,function cr(Wr){Wr.error?Pt(null,Wr.error):Pt(Wr.manifest),_e.off(X.default.INTERNAL_MANIFEST_LOADED,cr,Qt),vt.reset()},Qt),bt.initialize(Ge),vt.load(Ge)},addUTCTimingSource:function $n(Ge,Pt){Ce.addUTCTimingSource(Ge,Pt)},removeUTCTimingSource:function Qn(Ge,Pt){Ce.removeUTCTimingSource(Ge,Pt)},clearDefaultUTCTimingSources:function zn(){Ce.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Cr,setXHRWithCredentialsForType:function We(Ge,Pt){Ce.setXHRWithCredentialsForType(Ge,Pt)},getXHRWithCredentialsForType:function it(Ge){return Ce.getXHRWithCredentialsForType(Ge)},getProtectionController:function kn(){return ba()},attachProtectionController:function Mm(Ge){kt=Ge},setProtectionData:function Sm(Ge){we=Ge,Ze&&Ze.setProtectionData(we)},registerLicenseRequestFilter:function $r(Ge){Ce.registerLicenseRequestFilter(Ge)},registerLicenseResponseFilter:function Dm(Ge){Ce.registerLicenseResponseFilter(Ge)},unregisterLicenseRequestFilter:function Cm(Ge){Ce.unregisterLicenseRequestFilter(Ge)},unregisterLicenseResponseFilter:function Qr(Ge){Ce.unregisterLicenseResponseFilter(Ge)},registerCustomCapabilitiesFilter:function di(Ge){Ce.registerCustomCapabilitiesFilter(Ge)},unregisterCustomCapabilitiesFilter:function au(Ge){Ce.unregisterCustomCapabilitiesFilter(Ge)},setCustomInitialTrackSelectionFunction:function Tm(Ge){Ce.setCustomInitialTrackSelectionFunction(Ge)},resetCustomInitialTrackSelectionFunction:function Vi(){Ce.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function xf(Ge){if(!Tt.getElement())throw Se;Tt.setTTMLRenderingDiv(Ge)},getCurrentTextTrackIndex:function pn(){var Pt=Ze.getActiveStreamInfo();if(Pt&&ht)return ht.getCurrentTrackIdx(Pt.id)},provideThumbnail:function Ms(Ge,Pt){if("function"==typeof Pt){if(Ge<0)return void Pt(null);var vt=It.getIsDynamic()?Sn(Ge):Ge,Qt=Ze.getStreamForTime(vt);if(null===Qt)return void Pt(null);var gn=Qt.getThumbnailController();return gn?gn.provide(vt,Pt):void Pt(null)}},getDashAdapter:function lu(){return Be},getOfflineController:function Dt(){return jn()},getSettings:function ou(){return Ee.get()},updateSettings:function Ii(Ge){Ee.update(Ge)},resetSettings:function zs(){Ee.reset()},reset:mt,destroy:function Je(){mt(),se.default.deleteSingletonInstances(W)}},function jt(){Ne=me.getLogger(Te),ke=!1,xe=!1,Re=!1,ze=!0,kt=null,sn=null,we=null,Be=null,lt=null,X.default.extend(V.default),Le=Object(b.default)(W).getInstance(),Ce=Object(A.default)(W).getInstance(),Tt=Object(I.default)(W).getInstance(),bt=Object(R.default)(W).getInstance()}(),Te}U.__dashjs_factory_name="MediaPlayer";var K=se.default.getClassFactory(U);K.events=V.default,K.errors=q.default,se.default.updateClassFactory(U.__dashjs_factory_name,K),k.default=K},"./src/streaming/MediaPlayerEvents.js":function(Oe,k,u){"use strict";function y(h){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function T(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function d(h){var g=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=O(h);if(g){var R=O(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return v(this,F)}}function v(h,g){return!g||"object"!==y(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function O(h){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){T(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).AST_IN_FUTURE="astInFuture",C.BUFFER_EMPTY="bufferStalled",C.BUFFER_LOADED="bufferLoaded",C.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",C.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",C.DYNAMIC_TO_STATIC="dynamicToStatic",C.ERROR="error",C.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",C.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",C.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",C.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",C.LOG="log",C.MANIFEST_LOADED="manifestLoaded",C.METRICS_CHANGED="metricsChanged",C.METRIC_CHANGED="metricChanged",C.METRIC_ADDED="metricAdded",C.METRIC_UPDATED="metricUpdated",C.PERIOD_SWITCH_STARTED="periodSwitchStarted",C.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",C.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",C.QUALITY_CHANGE_RENDERED="qualityChangeRendered",C.TRACK_CHANGE_RENDERED="trackChangeRendered",C.STREAM_INITIALIZING="streamInitializing",C.STREAM_UPDATED="streamUpdated",C.STREAM_ACTIVATED="streamActivated",C.STREAM_DEACTIVATED="streamDeactivated",C.STREAM_INITIALIZED="streamInitialized",C.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",C.TEXT_TRACKS_ADDED="allTextTracksAdded",C.TEXT_TRACK_ADDED="textTrackAdded",C.TTML_PARSED="ttmlParsed",C.TTML_TO_PARSE="ttmlToParse",C.CAPTION_RENDERED="captionRendered",C.CAPTION_CONTAINER_RESIZE="captionContainerResize",C.CAN_PLAY="canPlay",C.CAN_PLAY_THROUGH="canPlayThrough",C.PLAYBACK_ENDED="playbackEnded",C.PLAYBACK_ERROR="playbackError",C.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",C.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",C.PLAYBACK_LOADED_DATA="playbackLoadedData",C.PLAYBACK_PAUSED="playbackPaused",C.PLAYBACK_PLAYING="playbackPlaying",C.PLAYBACK_PROGRESS="playbackProgress",C.PLAYBACK_RATE_CHANGED="playbackRateChanged",C.PLAYBACK_SEEKED="playbackSeeked",C.PLAYBACK_SEEKING="playbackSeeking",C.PLAYBACK_STALLED="playbackStalled",C.PLAYBACK_STARTED="playbackStarted",C.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",C.PLAYBACK_WAITING="playbackWaiting",C.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",C.EVENT_MODE_ON_START="eventModeOnStart",C.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",C.CONFORMANCE_VIOLATION="conformanceViolation",C.REPRESENTATION_SWITCH="representationSwitch",C.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",C}return S}(u("./src/core/events/EventsBase.js").default));k.default=m},"./src/streaming/MediaPlayerFactory.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/MediaPlayer.js");var T,M=function y(){var N,p="application/dash+xml";function O(h,g,S){if(!h||!/^VIDEO$/i.test(h.nodeName))return null;if(h._dashjs_player)return h._dashjs_player;var C,F=h.id||h.name||"video element";if(!(g=g||[].slice.call(h.querySelectorAll("source")).filter(function(R){return R.type==p})[0])&&h.src)(g=document.createElement("source")).src=h.src;else if(!g&&!h.src)return null;return S=S||{},(C=Object(x.default)(S).create()).initialize(h,g.src,h.autoplay),N||(N=C.getDebug().getLogger()),N.debug("Converted "+F+" to dash.js player and added content: "+g.src),h._dashjs_player=C,C}function m(h){return/^VIDEO$/i.test(h.nodeName)?h:m(h.parentNode)}return{create:O,createAll:function L(h,g){var S=[];h=h||"[data-dashjs-player]";for(var C=(g=g||document).querySelectorAll(h),F=0;F<C.length;F++){var R=O(C[F],null);S.push(R)}for(var w=g.querySelectorAll('source[type="'+p+'"]'),b=0;b<w.length;b++){var f=O(m(w[b]),null);S.push(f)}return S}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?M.createAll():T=window.setInterval(function d(){window.dashjs&&(window.clearInterval(T),M.createAll())},500):window.addEventListener("load",function D(){window.removeEventListener("load",D),M.createAll()})),k.default=M},"./src/streaming/SourceBufferSink.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/Debug.js"),y=u("./src/streaming/vo/DashJSError.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/core/errors/Errors.js"),D=u("./src/core/Settings.js"),d=u("./src/streaming/constants/Constants.js"),v=u("./src/streaming/vo/metrics/HTTPRequest.js"),p=u("./src/core/events/Events.js");function m(g){var w,b,P,f,I,H,S=this.context,C=Object(D.default)(S).getInstance(),F=g.textController,R=g.eventBus,$=[],z=[],q=!1,J=g.mediaSource,X=null;function Z(Se){return new Promise(function(ae){ye(function(){f.changeType&&f.changeType(Se),ae()})})}function ve(Se){return f=F.getTextSourceBuffer(Se),Promise.resolve()}function re(){if("function"==typeof f.addEventListener)try{f.addEventListener("updateend",U,!1),f.addEventListener("error",K,!1),f.addEventListener("abort",K,!1)}catch{H=setInterval(U,50)}else H=setInterval(U,50)}function de(Se){return new Promise(function(ae){f&&C.get().streaming.buffer.useAppendWindow?ye(function(){try{if(!f)return void ae();var Y=J.duration,W=0;Se&&!isNaN(Se.start)&&!isNaN(Se.duration)&&isFinite(Se.duration)&&(Y=Se.start+Se.duration),Se&&!isNaN(Se.start)&&(W=Se.start),(f.appendWindowEnd!==Y||f.appendWindowStart!==W)&&(f.appendWindowStart=0,f.appendWindowEnd=Y+.01,f.appendWindowStart=Math.max(W-.1,0),P.debug("Updated append window for ".concat(I.type,". Set start to ").concat(f.appendWindowStart," and end to ").concat(f.appendWindowEnd))),ae()}catch{P.warn("Failed to set append window"),ae()}}):ae()})}function ue(Se){return new Promise(function(ae){f?ye(function(){try{f.timestampOffset!==Se&&!isNaN(Se)&&(f.timestampOffset=Se,P.debug("Set MSE timestamp offset to ".concat(Se))),ae()}catch{ae()}}):ae()})}function ee(){return new Promise(function(Se){ye(function(){var ae=f.appendWindowStart,Y=f.appendWindowEnd;f&&(f.abort(),f.appendWindowStart=ae,f.appendWindowEnd=Y),Se()})})}function j(){if(!q&&z.length>0){q=!0;var Se=z[0];z.splice(0,1);var ae=function(){q=!1,z.length>0&&j.call(this),Se&&Se.data&&Se.data.segmentType&&Se.data.segmentType!==v.HTTPRequest.INIT_SEGMENT_TYPE&&delete Se.data.bytes,Se.promise.resolve({chunk:Se.data})};try{X=Se.request,0===Se.data.bytes.byteLength?ae.call(this):(f.appendBuffer?f.appendBuffer(Se.data.bytes):f.append(Se.data.bytes,Se.data),ye(ae.bind(this)))}catch(Y){P.fatal('SourceBuffer append failed "'+Y+'"'),z.length>0?j():q=!1,delete Se.data.bytes,Se.promise.reject({chunk:Se.data,error:new y.default(Y.code,Y.message)})}}}function A(){$.length>0&&!f.updating&&($.shift()(),A())}function U(){f.updating||A()}function K(Se){!function te(Se,ae){R.trigger(Se,ae||{},{streamId:I.streamInfo.id,mediaType:b})}(p.default.SOURCE_BUFFER_ERROR,{error:Se.target||{},lastRequestAppended:X})}function ye(Se){$.push(Se),f.updating||A()}return w={getType:function ge(){return b},getAllBufferRanges:function ne(){try{return f.buffered}catch(Se){return P.error("getAllBufferRanges exception: "+Se.message),null}},getBuffer:function ce(){return f},append:function pe(Se){var ae=this,Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(W,_e){Se?(z.push({data:Se,promise:{resolve:W,reject:_e},request:Y}),ye(j.bind(ae))):_e({chunk:Se,error:new y.default(T.default.APPEND_ERROR_CODE,T.default.APPEND_ERROR_MESSAGE)})})},remove:function G(Se){return new Promise(function(ae,Y){var W=Se.start,_e=Se.end;W>=0&&_e>W?ye(function(){try{f.remove(W,_e),ye(function(){ae({from:W,to:_e,unintended:!1}),Se.resolve&&Se.resolve()})}catch(Ee){Y({from:W,to:_e,unintended:!1,error:new y.default(T.default.REMOVE_ERROR_CODE,T.default.REMOVE_ERROR_MESSAGE)}),Se.reject&&Se.reject(Ee)}}):ae()})},abort:function _(){return new Promise(function(Se){try{z=[],"open"===J.readyState?ye(function(){try{f&&f.abort(),Se()}catch{Se()}}):(f&&f.setTextTrack&&"ended"===J.readyState&&f.abort(),Se())}catch{Se()}})},reset:function le(){if(f){try{$=[],function ie(){try{"function"==typeof f.removeEventListener&&(f.removeEventListener("updateend",U,!1),f.removeEventListener("error",K,!1),f.removeEventListener("abort",K,!1)),clearInterval(H)}catch(Se){P.error(Se)}}(),q=!1,z=[],(!f.getClassName||"TextSourceBuffer"!==f.getClassName())&&(P.debug("Removing sourcebuffer from media source"),J.removeSourceBuffer(f))}catch{}f=null}X=null},updateTimestampOffset:ue,initializeForStreamSwitch:function se(Se,ae,Y){b=(I=Se).type;var W=I.codec;(function oe(Se){f=Se.getBuffer()})(Y),re();var _e=[];return _e.push(ee),_e.push(de(I.streamInfo)),_e.push(Z(W)),ae&&void 0!==ae.MSETimeOffset&&_e.push(ue(ae.MSETimeOffset)),Promise.all(_e)},initializeForFirstUse:function he(Se,ae,Y){b=(I=ae).type;var W=I.codec;try{if(W.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return ve(Se);f=J.addSourceBuffer(W),re();var _e=[];return _e.push(de(I.streamInfo)),Y&&void 0!==Y.MSETimeOffset&&_e.push(ue(Y.MSETimeOffset)),Promise.all(_e)}catch(Ee){return I.type==d.default.TEXT&&!I.isFragmented||-1!==W.indexOf('codecs="stpp')||-1!==W.indexOf('codecs="vtt')?ve(Se):Promise.reject(Ee)}},updateAppendWindow:de,changeType:Z},function V(){P=Object(x.default)(S).getInstance().getLogger(w)}(),w}m.__dashjs_factory_name="SourceBufferSink";var h=M.default.getClassFactory(m);k.default=h},"./src/streaming/Stream.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/dash/constants/DashConstants.js"),M=u("./src/streaming/StreamProcessor.js"),T=u("./src/streaming/controllers/FragmentController.js"),D=u("./src/streaming/thumbnail/ThumbnailController.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js"),p=u("./src/core/Debug.js"),N=u("./src/core/errors/Errors.js"),O=u("./src/core/FactoryMaker.js"),L=u("./src/streaming/vo/DashJSError.js"),m=u("./src/streaming/utils/BoxParser.js"),h=u("./src/streaming/utils/URLUtils.js"),g=u("./src/streaming/controllers/BlacklistController.js"),S=[x.default.VIDEO,x.default.AUDIO,x.default.TEXT,x.default.MUXED,x.default.IMAGE];function C(F){F=F||{};var ie,de,ue,le,ce,ne,pe,ee,G,j,_,A,U,K,te,ye,Se,ae,R=this.context,w=Object(d.default)(R).getInstance(),b=Object(h.default)(R).getInstance(),P=F.manifestModel,f=F.mediaPlayerModel,I=F.dashMetrics,H=F.manifestUpdater,$=F.adapter,z=F.timelineConverter,q=F.capabilities,J=F.errHandler,X=F.abrController,V=F.playbackController,se=F.eventController,Z=F.mediaController,oe=F.protectionController,he=F.textController,ve=F.videoModel,re=F.streamInfo,ge=F.settings;function Re(Ve,nt){return new Promise(function(ft,Nt){ht(),j=!0,Ye();var Bt=ve.getElement();S.forEach(function(Ke){(Ke!==x.default.VIDEO||!Bt||Bt&&/^VIDEO$/i.test(Bt.nodeName))&&function xe(Ve,nt){var Ke,ft=$.getAllMediaInfoForType(re,Ve),Nt=[],Bt=null;if(ft&&0!==ft.length){Ve===x.default.VIDEO&&(pe=!0),Ve===x.default.AUDIO&&(ee=!0);for(var wt=0,_t=ft.length;wt<_t;wt++)Bt=ft[wt],Ve===x.default.TEXT&&!!Bt.isEmbedded&&(he.addEmbeddedTrack(re,Bt),Nt.push(Bt)),ze(Bt)&&Z.addTrack(Bt);if(Nt.length>0&&(Z.setInitialMediaSettingsForType(Ve,re),he.setInitialSettings(Z.getInitialSettings(Ve)),he.addMediaInfosToBuffer(re,Ve,Nt)),0!==(ft=ft.filter(function(Dn){return!Dn.isEmbedded})).length){if(Ve===x.default.IMAGE)return void(A=Object(D.default)(R).create({streamInfo:re,adapter:$,baseURLController:F.baseURLController,timelineConverter:F.timelineConverter,debug:ye,eventBus:w,events:v.default,dashConstants:y.default,dashMetrics:F.dashMetrics,segmentBaseController:F.segmentBaseController})).initialize();w.trigger(v.default.STREAM_INITIALIZING,{streamInfo:re,mediaInfo:Bt}),Z.setInitialMediaSettingsForType(Ve,re);var en=function ut(Ve,nt){var ft=Ve&&Ve.length>0?Ve[0]:null,Nt=_.getModel(ft?ft.type:null),Bt=ft?ft.type:null,Ke=ft?ft.mimeType:null,wt=ft?ft.isFragmented:null,_t=Object(M.default)(R).create({streamInfo:re,type:Bt,mimeType:Ke,timelineConverter:z,adapter:$,manifestModel:P,mediaPlayerModel:f,fragmentModel:Nt,dashMetrics:F.dashMetrics,baseURLController:F.baseURLController,segmentBaseController:F.segmentBaseController,abrController:X,playbackController:V,mediaController:Z,textController:he,errHandler:J,settings:ge,boxParser:te,segmentBlacklistController:U});_t.initialize(nt,pe,wt),ue.push(_t);for(var en=0;en<Ve.length;en++)_t.addMediaInfo(Ve[en]);return Bt===x.default.TEXT&&he.addMediaInfosToBuffer(re,Bt,Ve,Nt),_t}(ft,nt);(Ke=Z.getCurrentTrackFor(Ve,re.id))&&(X.updateTopQualityIndex(Ke),en.selectMediaInfo(Ve===x.default.TEXT&&Ke.isEmbedded?ft[0]:Ke))}}else de.info("No "+Ve+" data.")}(Ke,Ve)}),function at(Ve){return new Promise(function(nt){var ft={},Nt=ue.map(function(Bt){return Bt.createBufferSinks(Ve)});Promise.all(Nt).then(function(Bt){Bt.forEach(function(Ke){Ke&&(ft[Ke.getType()]=Ke)}),nt(ft)}).catch(function(){nt(ft)})})}(nt).then(function(Ke){if(j=!1,0===ue.length){var wt="No streams to play.";J.error(new L.default(N.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,wt,P.getValue())),de.fatal(wt)}else et();he.createTracks(re),ft(Ke)}).catch(function(Ke){Nt(Ke)})})}function ze(Ve){var nt=Ve?Ve.type:null;return nt===x.default.MUXED?(de.fatal("Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),J.error(new L.default(N.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",P.getValue())),!1):!(nt!==x.default.TEXT&&nt!==x.default.IMAGE&&Ve.contentProtection&&!q.supportsEncryptedMedia()&&(J.error(new L.default(N.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,N.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function yt(Ve){for(var nt=ue?ue.length:0,Nt=0;Nt<nt;Nt++){var Bt=ue[Nt].getFragmentModel();Bt.abortRequests(),Bt.resetInitialSettings(),ue[Nt].reset(false,Ve)}he&&he.deactivateStream(re),ue=[],ce=!1,ne=!1,zt(!1),Le(!1),w.trigger(v.default.STREAM_DEACTIVATED,{streamInfo:re})}function Zt(Ve){yt(Ve),le=!1,pe=!1,ee=!1,G={},j=!1,Se=!1,ae=[]}function Le(Ve){Se=Ve}function Ce(){return re?re.start:NaN}function Ue(){return re?re.id:null}function Qe(){return re}function ht(){if(!ve||!X)throw new Error(x.default.MISSING_CONFIG_ERROR)}function It(Ve){Ve.error&&(J.error(Ve.error),de.fatal(Ve.error.message))}function Ye(){if(se){var Ve=$.getEventsFor(re);se.addInlineEvents(Ve)}}function et(){for(var Ve=ue.length,ft=G.audio||G.video?new L.default(N.default.DATA_UPDATE_FAILED_ERROR_CODE,N.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,Nt=0;Nt<Ve;Nt++)if(ue[Nt].isUpdating()||j)return;if(oe){oe.clearMediaInfoArray();for(var Bt=0;Bt<Ve&&ue[Bt];Bt++){var Ke=ue[Bt].getType(),wt=ue[Bt].getMediaInfo();if(Ke===x.default.AUDIO||Ke===x.default.VIDEO||Ke===x.default.TEXT&&wt.isFragmented){var _t=ue[Bt].getMediaInfo();_t&&oe.initializeForMedia(_t)}}}ft?J.error(ft):le||(le=!0,ve.waitForReadyState(x.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){w.trigger(v.default.STREAM_INITIALIZED,{streamInfo:re})}))}function Tt(){var Ve=Me(),nt=Ve.length;if(0!==nt){for(var ft=0;ft<nt;ft++)if(!Ve[ft].isBufferingCompleted()&&(Ve[ft].getType()===x.default.AUDIO||Ve[ft].getType()===x.default.VIDEO))return void de.debug("onBufferingCompleted - One streamProcessor has finished but",Ve[ft].getType(),"one is not buffering completed");de.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),ne=!0,w.trigger(v.default.STREAM_BUFFERING_COMPLETED,{streamInfo:re},{streamInfo:re})}else de.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function bt(Ve){G[Ve.mediaType]=Ve.error,et()}function rn(Ve){se&&se.addInbandEvents(Ve.events)}function lt(Ve){return Ve&&Ve.type?jt(Ve.type):null}function jt(Ve){return Ve?Me().filter(function(ft){return ft.getType()===Ve})[0]:null}function Me(){for(var nt,ft,Ve=[],Nt=0;Nt<ue.length;Nt++)((nt=(ft=ue[Nt]).getType())===x.default.AUDIO||nt===x.default.VIDEO||nt===x.default.TEXT)&&Ve.push(ft);return Ve}function Et(Ve,nt){var ft=Qe(),Nt=nt.getStreamInfo();if(!Nt||!ft)return!0;var Bt=$.getAdaptationForType(Nt.index,Ve,Nt),Ke=$.getAdaptationForType(ft.index,Ve,ft);return Bt&&Ke?!(!Yt(Ke)&&Yt(Bt)):!Bt&&!Ke}function Yt(Ve){return!!Ve&&!!(Ve.ContentProtection||Ve.Representation&&Ve.Representation.length>0&&Ve.Representation[0].ContentProtection)}function an(Ve,nt){var ft=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Ve||!Ve.hasOwnProperty("getStreamInfo"))return!1;var Nt=Ve.getStreamInfo(),Bt=ft?ft.getStreamInfo():Qe();if(!Nt||!Bt)return!1;var Ke=$.getAdaptationForType(Nt.index,nt,Nt),wt=$.getAdaptationForType(Bt.index,nt,Bt);if(!Ke||!wt)return!Ke&&!wt;var _t=Ke&&wt&&Ke.mimeType===wt.mimeType,en=wt.Representation_asArray.map(function(Sn){return Sn.codecs}),Dn=Ke.Representation_asArray.map(function(Sn){return Sn.codecs}),Ln=Dn.some(function(Sn){return en.indexOf(Sn)>-1}),Ht=Dn.some(function(Sn){return en.some(function(mr){return q.codecRootCompatibleWithCodec(mr,Sn)})});return Ln||Ht&&_t}function zt(Ve){K=Ve}function Vt(){return K}return ie={initialize:function W(){(function _e(){w.on(v.default.BUFFERING_COMPLETED,Tt,ie),w.on(v.default.DATA_UPDATE_COMPLETED,bt,ie),w.on(v.default.INBAND_EVENTS,rn,ie)})(),function me(){oe&&(w.on(v.default.KEY_ERROR,It,ie),w.on(v.default.SERVER_CERTIFICATE_UPDATED,It,ie),w.on(v.default.LICENSE_REQUEST_COMPLETE,It,ie),w.on(v.default.KEY_SYSTEM_SELECTED,It,ie),w.on(v.default.KEY_SESSION_CREATED,It,ie),w.on(v.default.KEY_STATUSES_CHANGED,It,ie))}(),he.initializeForStream(re),w.trigger(v.default.STREAM_UPDATED,{streamInfo:re})},getStreamId:function Ne(){return re?re.id:null},activate:function Ie(Ve,nt){return new Promise(function(ft,Nt){if(!ce)return Vt()?(ce=!0,w.trigger(v.default.STREAM_ACTIVATED,{streamInfo:re}),void ft(nt)):void function we(Ve,nt){return Re(Ve,nt)}(Ve,nt).then(function(Bt){ce=!0,w.trigger(v.default.STREAM_ACTIVATED,{streamInfo:re}),ft(Bt)}).catch(function(Bt){Nt(Bt)});ft(nt)})},deactivate:yt,getIsActive:function Lt(){return ce},getDuration:function sn(){return re?re.duration:NaN},getStartTime:Ce,getId:Ue,getStreamInfo:Qe,getHasAudioTrack:function st(){return ee},getHasVideoTrack:function ct(){return pe},startPreloading:function ke(Ve,nt){return new Promise(function(ft,Nt){Vt()?Nt():(de.info("[startPreloading] Preloading next stream with id ".concat(Ue())),zt(!0),Re(Ve,nt).then(function(){for(var Bt=0;Bt<ue.length&&ue[Bt];Bt++)ue[Bt].setExplicitBufferingTime(Ce()),ue[Bt].getScheduleController().startScheduleTimer();ft()}).catch(function(){zt(!1),Nt()}))})},getThumbnailController:function Ze(){return A},getBitrateListFor:function Ut(Ve){if(ht(),Ve===x.default.IMAGE)return A?A.getBitrateList():[];var nt=function Rt(Ve){for(var nt=null,ft=0;ft<ue.length;ft++)if((nt=ue[ft]).getType()===Ve)return nt.getMediaInfo();return null}(Ve);return X.getBitrateList(nt)},updateData:function mt(Ve){return new Promise(function(nt){j=!0,re=Ve,se&&Ye();for(var ft=[],Nt=0,Bt=ue.length;Nt<Bt;Nt++){var Ke=ue[Nt],wt=Ke.getMediaInfo();ft.push(Ke.updateStreamInfo(re));var _t=$.getAllMediaInfoForType(re,Ke.getType());if(_t){Ke.clearMediaInfoArray();for(var en=0;en<_t.length;en++){var Dn=_t[en];Ke.addMediaInfo(_t[en]),$.areMediaInfosEqual(wt,Dn)&&(X.updateTopQualityIndex(Dn),ft.push(Ke.selectMediaInfo(Dn)))}}}Promise.all(ft).then(function(){for(ft=[];ae.length>0;){var Ln=ae.pop(),Ht=Ln.newMediaInfo,Sn=lt(Ln.oldMediaInfo);if(!Sn)return;ft.push(Sn.prepareTrackSwitch()),Sn.selectMediaInfo(Ht)}return Promise.all(ft)}).then(function(){j=!1,et(),w.trigger(v.default.STREAM_UPDATED,{streamInfo:re}),nt()})})},reset:function nn(Ve){_&&(_.reset(),_=null),X&&re&&X.clearDataForStream(re.id),U&&(U.reset(),U=null),Zt(Ve),re=null,function Ee(){w.off(v.default.DATA_UPDATE_COMPLETED,bt,ie),w.off(v.default.BUFFERING_COMPLETED,Tt,ie),w.off(v.default.INBAND_EVENTS,rn,ie)}(),function Te(){oe&&(w.off(v.default.KEY_ERROR,It,ie),w.off(v.default.SERVER_CERTIFICATE_UPDATED,It,ie),w.off(v.default.LICENSE_REQUEST_COMPLETE,It,ie),w.off(v.default.KEY_SYSTEM_SELECTED,It,ie),w.off(v.default.KEY_SESSION_CREATED,It,ie),w.off(v.default.KEY_STATUSES_CHANGED,It,ie))}()},getProcessors:Me,setMediaSource:function kt(Ve){for(var nt=0;nt<ue.length;)ze(ue[nt].getMediaInfo())?(ue[nt].setMediaSource(Ve),nt++):(ue[nt].reset(),ue.splice(nt,1));if(0===ue.length){var ft="No streams to play.";J.error(new L.default(N.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,ft+"nostreams",P.getValue())),de.fatal(ft)}},isMediaCodecCompatible:function Je(Ve){var nt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return an(Ve,x.default.VIDEO,nt)&&an(Ve,x.default.AUDIO,nt)},isProtectionCompatible:function tt(Ve){return!Ve||Et(x.default.VIDEO,Ve)&&Et(x.default.AUDIO,Ve)},getPreloaded:Vt,getIsEndedEventSignaled:function Be(){return Se},setIsEndedEventSignaled:Le,getAdapter:function ot(){return $},getHasFinishedBuffering:function qe(){return ne},setPreloaded:zt,startScheduleControllers:function $e(){for(var Ve=ue.length,nt=0;nt<Ve&&ue[nt];nt++)ue[nt].getScheduleController().startScheduleTimer()},prepareTrackChange:function Wt(Ve){if(ce&&re){ne=!1;var nt=Ve.newMediaInfo,ft=P.getValue();$.setCurrentMediaInfo(re.id,nt.type,nt);var Nt=lt(nt);if(Nt){var Bt=V.getTime();de.info("Stream -  Process track changed at current time "+Bt),ft.refreshManifestOnSwitchTrack?(ae.push(Ve),H.getIsUpdating()||(de.debug("Stream -  Refreshing manifest for switch track"),H.refreshManifest())):Nt.selectMediaInfo(nt).then(function(){(nt.type===x.default.VIDEO||nt.type===x.default.AUDIO)&&X.updateTopQualityIndex(nt),Nt.prepareTrackSwitch()})}}},prepareQualityChange:function Fe(Ve){var nt=jt(Ve.mediaType);nt&&nt.prepareQualityChange(Ve)}},function Y(){try{ye=Object(p.default)(R).getInstance(),de=ye.getLogger(ie),Zt(),te=Object(m.default)(R).getInstance(),U=Object(g.default)(R).create({updateEventName:v.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:v.default.SEGMENT_LOCATION_BLACKLIST_ADD}),_=Object(T.default)(R).create({streamInfo:re,mediaPlayerModel:f,dashMetrics:I,errHandler:J,settings:ge,boxParser:te,dashConstants:y.default,urlUtils:b})}catch(Ve){throw Ve}}(),ie}C.__dashjs_factory_name="Stream",k.default=O.default.getClassFactory(C)},"./src/streaming/StreamProcessor.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/dash/constants/DashConstants.js"),M=u("./src/streaming/constants/MetricsConstants.js"),T=u("./src/streaming/models/FragmentModel.js"),D=u("./src/streaming/controllers/BufferController.js"),d=u("./src/streaming/text/NotFragmentedTextBufferController.js"),v=u("./src/streaming/controllers/ScheduleController.js"),p=u("./src/dash/controllers/RepresentationController.js"),N=u("./src/core/FactoryMaker.js"),O=u("./src/streaming/utils/SupervisorTools.js"),L=u("./src/core/EventBus.js"),m=u("./src/core/events/Events.js"),h=u("./src/dash/DashHandler.js"),g=u("./src/core/errors/Errors.js"),S=u("./src/streaming/vo/DashJSError.js"),C=u("./src/core/Debug.js"),F=u("./src/streaming/utils/RequestModifier.js"),R=u("./src/streaming/utils/URLUtils.js"),w=u("./src/streaming/utils/BoxParser.js"),b=u("./src/streaming/vo/metrics/PlayList.js"),P=u("./src/dash/controllers/SegmentsController.js"),f=u("./src/streaming/vo/metrics/HTTPRequest.js");function I(H){H=H||{};var pe,ee,G,j,_,A,U,K,te,ye,Se,ae,Y,$=this.context,z=Object(L.default)($).getInstance(),q=H.streamInfo,J=H.type,X=H.errHandler,V=H.mimeType,se=H.timelineConverter,Z=H.adapter,oe=H.manifestModel,he=H.mediaPlayerModel,ve=H.fragmentModel,re=H.abrController,ge=H.playbackController,ie=H.mediaController,de=H.textController,ue=H.dashMetrics,le=H.settings,ce=H.boxParser,ne=H.segmentBlacklistController;function Ee(){return q.id}function me(){return J}function Te(){return Z.getIsTextTrack(K.getData())}function Ne(){_=[],j=null,Y=0,te=!1,ye=!1}function xe(Ke){var wt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Ke.sender){if(ge.getIsManifestUpdateInProgress())return void kt();if((!Te()||de.isTextEnabled())&&A&&Ke.representationId&&!A.appendInitSegmentFromCache(Ke.representationId)){var _t=K.getCurrentRepresentation();if(0===_t.range)return void ze();var en=Se?Se.getInitRequest(j,_t):null;en?ve.executeRequest(en):wt&&(U.setInitSegmentRequired(!0),kt())}}}function ze(Ke){var wt=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(ge.getIsManifestUpdateInProgress()||A.getIsPruningInProgress())kt();else{var _t=Lt();_t?(te=!1,ut(_t)):at(wt)}}function ut(Ke){isNaN(Ke.startTime+Ke.duration)||(Y=Ke.startTime+Ke.duration),Ke.delayLoadingTime=(new Date).getTime()+U.getTimeToLoadDelay(),U.setTimeToLoadDelay(0),function yt(Ke){var wt=Ke.url;return Ke.range&&(wt=wt.concat("_",Ke.range)),ne.contains(wt)}(Ke)?(ee.warn("Fragment request url ".concat(Ke.url," for stream id ").concat(q.id," and media type ").concat(J," is on the ignore list and will be skipped")),kt()):(ee.debug("Next fragment request url for stream id ".concat(q.id," and media type ").concat(J," is ").concat(Ke.url)),ve.executeRequest(Ke))}function at(Ke){var _t,wt=K.getCurrentRepresentation();if(!le.get().streaming.gaps.enableSeekFix||!te&&0!==ge.getTime()||(G?G&&wt.segmentInfoType===y.default.SEGMENT_TIMELINE&&(_t=Se.getValidTimeAheadOfTargetTime(Y,j,wt,le.get().streaming.gaps.threshold)):_t=Se.getValidTimeAheadOfTargetTime(Y,j,wt,le.get().streaming.gaps.threshold),isNaN(_t)||_t===Y)){if(Se.isLastSegmentRequested(wt,Y)){var Dn=Se.getCurrentIndex();return ee.debug("Segment requesting for stream ".concat(q.id," has finished")),z.trigger(m.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:Dn},{streamId:q.id,mediaType:J}),A.segmentRequestingCompleted(Dn),void U.clearScheduleTimer()}Ke&&kt()}else ge.isSeeking()||0===ge.getTime()?(ee.warn("Adjusting playback time ".concat(_t," because of gap in the manifest. Seeking by ").concat(_t-Y)),ge.seek(_t,!1,!1)):(ee.warn("Adjusting buffering time ".concat(_t," because of gap in the manifest. Adjusting time by ").concat(_t-Y)),Nt(_t),Ke&&kt())}function Lt(){var wt,Ke=Je();if(isNaN(Y)||me()===x.default.TEXT&&!de.isTextEnabled())return null;var _t=te;if(Se){var en=K&&Ke?K.getRepresentationForQuality(Ke.quality):null;wt=_t?Se.getSegmentRequestForTime(j,en,Y):Se.getNextSegmentRequest(j,en)}return wt}function kt(){U.startScheduleTimer(ge.getLowLatencyModeEnabled()?le.get().streaming.scheduling.lowLatencyTimeout:le.get().streaming.scheduling.defaultTimeout)}function Zt(Ke){Ke.error||(U.setCurrentRepresentation(Z.convertRepresentationToRepresentationInfo(Ke.currentRepresentation)),A.getIsBufferingCompleted()||A.updateBufferTimestampOffset(Ke.currentRepresentation))}function nn(Ke){ue.addBufferState(J,Ke.state,U.getBufferTarget()),Ke.state===M.default.BUFFER_EMPTY&&!ge.isSeeking()&&(ee.info("Buffer is empty! Stalling!"),ue.pushPlayListTraceMetrics(new Date,b.PlayListTrace.REBUFFERING_REASON))}function sn(Ke){ve.syncExecutedRequestsWithBufferedRange(A.getBuffer().getAllBufferRanges(),q.duration),Ke.quotaExceeded&&Ke.from>ge.getTime()&&Nt(Ke.from),Ke.hasEnoughSpaceToAppend&&Ke.quotaExceeded&&U.startScheduleTimer()}function Be(Ke){if(Ke&&Ke.lastRequestAppended&&Ke.lastRequestAppended.url){var wt=Ke.lastRequestAppended.url;Ke.lastRequestAppended.range&&(wt=wt.concat("_",Ke.lastRequestAppended.range)),ee.warn("Blacklisting segment with url ".concat(wt)),ne.add(wt)}}function Qe(){Ve(),ye=!1}function st(Ke){ee.info("onFragmentLoadingAbandoned request: "+Ke.request.url+" has been aborted"),!ge.isSeeking()&&!U.getSwitchStrack()&&!ye&&(ee.info("onFragmentLoadingAbandoned request: "+Ke.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ke.request&&Ke.request.isInitializationRequest()?U.setInitSegmentRequired(!0):Nt(Ke.request.startTime+Ke.request.duration/2),U.startScheduleTimer(0))}function ct(Ke){ee.info("OnFragmentLoadingCompleted for stream id "+q.id+" and media type "+J+" - Url:",Ke.request?Ke.request.url:"undefined",Ke.request.range?", Range:"+Ke.request.range:""),Te()&&U.startScheduleTimer(0),Ke.error&&Ke.request.serviceLocation&&function Ze(Ke){ee.info("Fragment loading completed with an error"),Ke&&Ke.request&&Ke.request.type&&(Ke.request.type===f.HTTPRequest.INIT_SEGMENT_TYPE?xe({representationId:Ke.request.representationId,sender:{}},!1):Ke.request.type===f.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Nt(Ke.request.startTime+Ke.request.duration/2),ze({},!1)))}(Ke)}function ht(){Nt(ge.getTime()),mt().startScheduleTimer()}function Ut(Ke){var wt=Ke.currentTrackInfo;if(wt){var _t=_.find(function(en){return en.index===wt.index&&en.lang===wt.lang});_t&&bt(_t).then(function(){A.setIsBufferingCompleted(!1),Nt(ge.getTime()),U.setInitSegmentRequired(!0),U.startScheduleTimer()})}}function It(Ke){Nt(Ke.quotaExceededTime),U.clearScheduleTimer()}function Fe(){return A?A.getBuffer():null}function bt(Ke){Ke!==j&&(!Ke||!j||Ke.type===j.type)&&(j=Ke);var wt=Z.getRealAdaptation(q,j),_t=Z.getVoRepresentations(j);if(K){var Ht,en=K.getData(),Dn=re.getMaxAllowedIndexFor(J,q.id),Ln=re.getMinAllowedIndexFor(J,q.id),mr=null;return null!==en&&en.id===wt.id||J===x.default.TEXT?Ht=re.getQualityFor(J,q.id):(mr=re.getThroughputHistory().getAverageThroughput(J,G)||re.getInitialBitrateFor(J,q.id),Ht=re.getQualityForBitrate(j,mr,q.id)),void 0!==Ln&&Ht<Ln&&(Ht=Ln),Ht>Dn&&(Ht=Dn),K.updateData(wt,_t,J,j.isFragmented,Ht)}return Promise.resolve()}function mt(){return U}function Je(Ke){var wt;return void 0!==Ke?(Object(O.checkInteger)(Ke),wt=K?K.getRepresentationForQuality(Ke):null):wt=K?K.getCurrentRepresentation():null,Z.convertRepresentationToRepresentationInfo(wt)}function tt(){return!!A&&A.getIsBufferingCompleted()}function an(Ke){var wt=Ke.chunk,_t=wt.bytes,en=wt.quality,Dn=Je(en),Ln=K&&Dn?K.getRepresentationForQuality(Dn.quality):null;if(Dn&&Ln){var Ht=Z.getEventsFor(Dn.mediaInfo),Sn=Z.getEventsFor(Dn,Ln);if(Ht&&Ht.length>0||Sn&&Sn.length>0){var Mt=function zt(Ke,wt,_t,en){try{for(var Dn={},Ln=[],Ht=_t.concat(en),Sn=0,mr=Ht.length;Sn<mr;Sn++)Dn[Ht[Sn].schemeIdUri+"/"+Ht[Sn].value]=Ht[Sn];var Mt=Object(w.default)($).getInstance().parse(Ke),Gn=Mt.getBoxes("emsg");if(!Gn||0===Gn.length)return Ln;for(var tn=Mt.getBox("sidx"),yn=!tn||isNaN(tn.earliest_presentation_time)||isNaN(tn.timescale)?wt&&!isNaN(wt.mediaStartTime)?wt.mediaStartTime:0:tn.earliest_presentation_time/tn.timescale,Si=Math.max(yn,0),Vr=K.getCurrentRepresentation(),Ai=0,fi=Gn.length;Ai<fi;Ai++){var De=Z.getEvent(Gn[Ai],Dn,Si,Vr);De&&Ln.push(De)}return Ln}catch{return[]}}(_t,ve.getRequests({state:T.default.FRAGMENT_MODEL_EXECUTED,quality:en,index:wt.index})[0],Ht,Sn);z.trigger(m.default.INBAND_EVENTS,{events:Mt},{streamId:q.id})}}}function ot(){var Ke=ge.getTime();le.get().streaming.buffer.flushBufferAtTrackSwitch&&ge.seek(Ke+.001,!1,!0),Nt(Ke),A.setSeekTarget(Ke),U.startScheduleTimer()}function Ve(){var Ke=ge.getTime(),wt=A.getContinuousBufferTimeForTargetTime(Ke);Nt(isNaN(wt)?Ke:wt),U.startScheduleTimer()}function ft(Ke){Ke&&!isNaN(Ke.time)&&(Nt(Ke.time),A.setSeekTarget(Ke.time))}function Nt(Ke){Y=Ke,te=!0}return pe={initialize:function _e(Ke,wt,_t){ae=Object(P.default)($).create({events:m.default,eventBus:z,streamInfo:q,timelineConverter:se,dashConstants:y.default,segmentBaseController:H.segmentBaseController,type:J}),(Se=Object(h.default)($).create({streamInfo:q,type:J,timelineConverter:se,dashMetrics:ue,mediaPlayerModel:he,baseURLController:H.baseURLController,errHandler:X,segmentsController:ae,settings:le,boxParser:ce,events:m.default,eventBus:z,errors:g.default,debug:Object(C.default)($).getInstance(),requestModifier:Object(F.default)($).getInstance(),dashConstants:y.default,constants:x.default,urlUtils:Object(R.default)($).getInstance()})).initialize(G=q.manifestInfo.isDynamic),re.registerStreamType(J,pe),K=Object(p.default)($).create({streamInfo:q,type:J,abrController:re,dashMetrics:ue,playbackController:ge,timelineConverter:se,dashConstants:y.default,events:m.default,eventBus:z,errors:g.default,isDynamic:G,segmentsController:ae}),(A=function nt(Ke,wt){return Ke?Ke!==x.default.TEXT||wt?Object(D.default)($).create({streamInfo:q,type:Ke,mediaPlayerModel:he,manifestModel:oe,fragmentModel:ve,errHandler:X,mediaController:ie,representationController:K,adapter:Z,textController:de,abrController:re,playbackController:ge,settings:le}):Object(d.default)($).create({streamInfo:q,type:Ke,mimeType:V,fragmentModel:ve,textController:de,errHandler:X,settings:le}):(X.error(new S.default(g.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,g.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(J,_t))&&A.initialize(Ke),(U=Object(v.default)($).create({streamInfo:q,type:J,mimeType:V,adapter:Z,dashMetrics:ue,mediaPlayerModel:he,fragmentModel:ve,abrController:re,playbackController:ge,textController:de,mediaController:ie,bufferController:A,settings:le})).initialize(wt),Y=0,te=!1},getStreamId:Ee,getType:me,isUpdating:function we(){return!!K&&K.isUpdating()},getBufferController:function Ye(){return A},getFragmentModel:function et(){return ve},getScheduleController:mt,getRepresentationController:function Wt(){return K},getRepresentationInfo:Je,getBufferLevel:function Et(){return A?A.getBufferLevel():0},isBufferingCompleted:tt,createBufferSinks:function Vt(Ke){var wt=Fe();return wt?Promise.resolve(wt):A?A.createBufferSink(j,Ke):Promise.resolve(null)},updateStreamInfo:function Rt(Ke){return q=Ke,tt()?Promise.resolve():A.updateAppendWindow()},getStreamInfo:function Tt(){return q},selectMediaInfo:bt,clearMediaInfoArray:function lt(){_=[]},addMediaInfo:function rn(Ke){-1===_.indexOf(Ke)&&_.push(Ke)},prepareTrackSwitch:function qe(){return new Promise(function(Ke){ee.debug("Preparing track switch for type ".concat(J));var wt=J===x.default.TEXT||le.get().streaming.trackSwitchMode[J]===x.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&ge.getTimeToStreamEnd(q)>le.get().streaming.buffer.stallThreshold;if(A.getIsBufferingCompleted()&&!wt)return A.prepareForNonReplacementTrackSwitch(j.codec).then(function(){z.trigger(m.default.BUFFERING_COMPLETED,{},{streamId:q.id,mediaType:J})}).catch(function(){z.trigger(m.default.BUFFERING_COMPLETED,{},{streamId:q.id,mediaType:J})}),void Ke();U.clearScheduleTimer(),U.setSwitchTrack(!0),wt?(z.trigger(m.default.BUFFER_REPLACEMENT_STARTED,{mediaType:J,streamId:q.id},{mediaType:J,streamId:q.id}),ve.abortRequests(),A.prepareForReplacementTrackSwitch(j.codec).then(function(){var _t=Je();return A.updateBufferTimestampOffset(_t)}).then(function(){ot(),Ke()}).catch(function(){ot(),Ke()})):A.prepareForNonReplacementTrackSwitch(j.codec).then(function(){Ve(),Ke()}).catch(function(){Ve(),Ke()})})},prepareQualityChange:function Le(Ke){ee.debug("Preparing quality switch for type ".concat(J));var wt=Ke.newQuality;ye=!0,U.clearScheduleTimer();var _t=Je(wt);U.setCurrentRepresentation(_t),K.prepareQualityChange(wt),ve.abortRequests(),A.updateBufferTimestampOffset(_t).then(function(){Ke.reason&&Ke.reason.forceReplace?function Ce(){z.trigger(m.default.BUFFER_REPLACEMENT_STARTED,{mediaType:J,streamId:q.id},{mediaType:J,streamId:q.id}),A.prepareForReplacementQualitySwitch().then(function(){ot(),ye=!1}).catch(function(){ot(),ye=!1})}():le.get().streaming.buffer.fastSwitchEnabled?function Ue(Ke){var wt=ge.getTime(),_t=1.5,en=ve.getRequests({state:T.default.FRAGMENT_MODEL_EXECUTED,time:wt+_t,threshold:0})[0];if(en&&!Te()){var Dn=A.getBufferLevel(),Ln=re.getAbandonmentStateFor(q.id,J);en.quality<Ke.quality&&Dn>=_t&&Ln!==M.default.ABANDON_LOAD?(Nt(wt+_t),U.setCheckPlaybackQuality(!1),U.startScheduleTimer()):Qe()}else U.startScheduleTimer();ye=!1}(_t):Qe(),ue.pushPlayListTraceMetrics(new Date,b.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ue.createPlaylistTraceMetrics(_t.id,1e3*ge.getTime(),ge.getPlaybackRate())})},getMediaInfo:function jt(){return j},getMediaSource:function Me(){return A.getMediaSource()},setMediaSource:function $e(Ke){A.setMediaSource(Ke)},getBuffer:Fe,setExplicitBufferingTime:Nt,finalisePlayList:function Bt(Ke,wt){ue.pushPlayListTraceMetrics(Ke,wt)},probeNextRequest:function Yt(){var Ke=Je(),wt=K&&Ke?K.getRepresentationForQuality(Ke.quality):null;return Se.getNextSegmentRequestIdempotent(j,wt)},prepareInnerPeriodPlaybackSeeking:function ke(Ke){return new Promise(function(wt){U.clearScheduleTimer(),ve.abortRequests(),A.prepareForPlaybackSeek().then(function(){var _t=A.getAllRangesWithSafetyFactor(Ke.seekTime);return A.clearBuffers(_t)}).then(function(){var _t=A.getContinuousBufferTimeForTargetTime(Ke.seekTime);if(!isNaN(_t)&&!isNaN(q.duration)&&isFinite(q.duration)&&_t>=q.start+q.duration)A.setIsBufferingCompleted(!0),wt();else{var en=isNaN(_t)?Ke.seekTime:_t;Nt(en),A.setSeekTarget(en);var Dn=[];Dn.push(A.updateAppendWindow());var Ln=Je();Dn.push(A.updateBufferTimestampOffset(Ln)),Promise.all(Dn).then(function(){U.setInitSegmentRequired(!0),U.setCheckPlaybackQuality(!1),U.startScheduleTimer(),wt()})}}).catch(function(_t){ee.error(_t)})})},prepareOuterPeriodPlaybackSeeking:function Re(){return new Promise(function(Ke,wt){try{U.clearScheduleTimer(),ve.abortRequests(),A.prepareForPlaybackSeek().then(function(){return A.pruneAllSafely()}).then(function(){Ke()})}catch(_t){wt(_t)}})},reset:function Ie(Ke,wt){Se&&Se.reset(),A&&(A.reset(Ke,wt),A=null),U&&(U.reset(),U=null),K&&(K.reset(),K=null),ae&&(ae=null),re&&re.unRegisterStreamType(Ee(),J),z.off(m.default.DATA_UPDATE_COMPLETED,Zt,pe),z.off(m.default.INIT_FRAGMENT_NEEDED,xe,pe),z.off(m.default.MEDIA_FRAGMENT_NEEDED,ze,pe),z.off(m.default.MEDIA_FRAGMENT_LOADED,an,pe),z.off(m.default.BUFFER_LEVEL_STATE_CHANGED,nn,pe),z.off(m.default.BUFFER_CLEARED,sn,pe),z.off(m.default.SEEK_TARGET,ft,pe),z.off(m.default.FRAGMENT_LOADING_ABANDONED,st,pe),z.off(m.default.FRAGMENT_LOADING_COMPLETED,ct,pe),z.off(m.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ht,pe),z.off(m.default.SET_NON_FRAGMENTED_TEXT,Ut,pe),z.off(m.default.QUOTA_EXCEEDED,It,pe),z.off(m.default.SOURCE_BUFFER_ERROR,Be,pe),Ne(),J=null,q=null}},function W(){ee=Object(C.default)($).getInstance().getLogger(pe),Ne(),z.on(m.default.DATA_UPDATE_COMPLETED,Zt,pe,{priority:L.default.EVENT_PRIORITY_HIGH}),z.on(m.default.INIT_FRAGMENT_NEEDED,xe,pe),z.on(m.default.MEDIA_FRAGMENT_NEEDED,ze,pe),z.on(m.default.MEDIA_FRAGMENT_LOADED,an,pe),z.on(m.default.BUFFER_LEVEL_STATE_CHANGED,nn,pe),z.on(m.default.BUFFER_CLEARED,sn,pe),z.on(m.default.SEEK_TARGET,ft,pe),z.on(m.default.FRAGMENT_LOADING_ABANDONED,st,pe),z.on(m.default.FRAGMENT_LOADING_COMPLETED,ct,pe),z.on(m.default.QUOTA_EXCEEDED,It,pe),z.on(m.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ht,pe),z.on(m.default.SET_NON_FRAGMENTED_TEXT,Ut,pe),z.on(m.default.SOURCE_BUFFER_ERROR,Be,pe)}(),pe}I.__dashjs_factory_name="StreamProcessor",k.default=N.default.getClassFactory(I)},"./src/streaming/XlinkLoader.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/vo/DashJSError.js"),y=u("./src/streaming/net/URLLoader.js"),M=u("./src/streaming/vo/metrics/HTTPRequest.js"),T=u("./src/streaming/vo/TextRequest.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/core/errors/Errors.js");function N(O){O=O||{};var m=this.context,h=Object(D.default)(m).getInstance(),g=Object(y.default)(m).create({errHandler:O.errHandler,dashMetrics:O.dashMetrics,mediaPlayerModel:O.mediaPlayerModel,requestModifier:O.requestModifier,errors:p.default});return{load:function C(R,w,b){var P=function(H,$){w.resolved=!0,w.resolvedContent=H||null,h.trigger(d.default.XLINK_ELEMENT_LOADED,{element:w,resolveObject:b,error:H||$?null:new x.default(p.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,p.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+R)})};if("urn:mpeg:dash:resolve-to-zero:2013"===R)P(null,!0);else{var f=new T.default(R,M.HTTPRequest.XLINK_EXPANSION_TYPE);g.load({request:f,success:function(H){P(H)},error:function(){P(null)}})}},reset:function F(){g&&(g.abort(),g=null)}}}N.__dashjs_factory_name="XlinkLoader",k.default=v.default.getClassFactory(N)},"./src/streaming/constants/ConformanceViolationConstants.js":function(Oe,k,u){"use strict";u.r(k),k.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(Oe,k,u){"use strict";function y(d,v){for(var p=0;p<v.length;p++){var N=v[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}u.r(k);var D=new(function(){function d(){(function x(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.init()}return function M(d,v,p){return v&&y(d.prototype,v),p&&y(d,p),d}(d,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}]),d}());k.default=D},"./src/streaming/constants/MetricsConstants.js":function(Oe,k,u){"use strict";function y(d,v){for(var p=0;p<v.length;p++){var N=v[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}u.r(k);var D=new(function(){function d(){(function x(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.init()}return function M(d,v,p){return v&&y(d.prototype,v),p&&y(d,p),d}(d,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}]),d}());k.default=D},"./src/streaming/constants/ProtectionConstants.js":function(Oe,k,u){"use strict";function y(d,v){for(var p=0;p<v.length;p++){var N=v[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}u.r(k);var D=new(function(){function d(){(function x(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.init()}return function M(d,v,p){return v&&y(d.prototype,v),p&&y(d,p),d}(d,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}]),d}());k.default=D},"./src/streaming/controllers/AbrController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/rules/abr/ABRRulesCollection.js"),y=u("./src/streaming/constants/Constants.js"),M=u("./src/streaming/constants/MetricsConstants.js"),T=u("./src/streaming/vo/BitrateInfo.js"),D=u("./src/streaming/models/FragmentModel.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js"),p=u("./src/core/FactoryMaker.js"),N=u("./src/streaming/rules/RulesContext.js"),O=u("./src/streaming/rules/SwitchRequest.js"),L=u("./src/streaming/rules/SwitchRequestHistory.js"),m=u("./src/streaming/rules/DroppedFramesHistory.js"),h=u("./src/streaming/rules/ThroughputHistory.js"),g=u("./src/core/Debug.js"),S=u("./src/streaming/vo/metrics/HTTPRequest.js"),C=u("./src/streaming/utils/SupervisorTools.js"),F=u("./src/streaming/MediaPlayerEvents.js");function P(){var z,q,J,X,V,se,Z,oe,he,ve,re,ge,ie,de,ue,le,ce,ne,pe,ee,G,j,_,A,U,K,I=this.context,H=Object(g.default)(I).getInstance(),$=Object(d.default)(I).getInstance();function W(){V={},se={},oe={},Z={},pe={},j={},_={},A={},void 0===ve&&(ve=!1),ee&&ee.reset(),ne=void 0,ee=void 0,G=void 0,clearTimeout(he),he=null}function Te(Fe){var Ye=Fe.request.mediaType,et=Fe.streamId;if(Ye&&et&&Z[et]&&K.get().streaming.abr.autoSwitchBitrate[Ye]){var Rt=Z[et][Ye];if(Rt){var Tt=Object(N.default)(I).create({abrController:z,streamProcessor:Rt,currentRequest:Fe.request,useBufferOccupancyABR:j[Ye],useL2AABR:_[Ye],useLoLPABR:A[Ye],videoModel:de}),bt=J.shouldAbandonFragment(Tt,et);if(bt.quality>O.default.NO_CHANGE){var rn=Rt.getFragmentModel();rn.getRequests({state:D.default.FRAGMENT_MODEL_LOADING,index:Fe.request.index})[0]&&(rn.abortRequests(),oe[et][Ye].state=M.default.ABANDON_LOAD,pe[et][Ye].reset(),pe[et][Ye].push({oldValue:Zt(Ye,et),newValue:bt.quality,confidence:1,reason:bt.reason}),nn(Ye,X.getActiveStreamInfo(),bt.quality,bt.reason),clearTimeout(he),he=setTimeout(function(){oe[et][Ye].state=M.default.ALLOW_LOAD,he=null},K.get().streaming.abandonLoadTimeout))}}}}function Ne(Fe){Fe.mediaType===y.default.VIDEO&&(void 0!==ne&&ee.push(Fe.streamId,ne,de.getPlaybackQuality()),ne=Fe.newQuality)}function Ie(Fe){Fe.metric===M.default.HTTP_REQUEST&&Fe.value&&Fe.value.type===S.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Fe.mediaType===y.default.AUDIO||Fe.mediaType===y.default.VIDEO)&&G.push(Fe.mediaType,Fe.value,K.get().streaming.abr.useDeadTimeLatency),Fe.metric===M.default.BUFFER_LEVEL&&(Fe.mediaType===y.default.AUDIO||Fe.mediaType===y.default.VIDEO)&&function Qe(Fe,Ye){K.get().streaming.abr.ABRStrategy===y.default.ABR_STRATEGY_DYNAMIC&&function st(Fe,Ye){try{var et=ue.getStableBufferTime(),bt=j[Fe],rn=Ye>(bt?.5*et:et);j[Fe]=rn,rn!==bt&&q.info(rn?"["+Fe+"] switching from throughput to buffer occupancy ABR rule (buffer: "+Ye.toFixed(3)+").":"["+Fe+"] switching from buffer occupancy to throughput ABR rule (buffer: "+Ye.toFixed(3)+").")}catch(lt){q.error(lt)}}(Fe,Ye)}(Fe.mediaType,.001*Fe.value.level)}function we(Fe,Ye){try{return V[Ye]=V[Ye]||{},V[Ye].hasOwnProperty(Fe)||(V[Ye][Fe]=0),function at(Fe,Ye,et){if(Ye!==y.default.VIDEO||!K.get().streaming.abr.limitBitrateByPortal||!Z[et]||!Z[et][Ye])return Fe;ve||It();var Rt=Z[et][Ye].getStreamInfo(),Tt=ie.getAdaptationForType(Rt.index,Ye,Rt).Representation,bt=Fe;if(re>0&&ge>0){for(;bt>0&&Tt[bt]&&re<Tt[bt].width&&re-Tt[bt-1].width<Tt[bt].width-re;)bt-=1;for(;bt<Tt.length-1&&Tt[bt].width===Tt[bt+1].width;)bt+=1}return bt}(function ut(Fe,Ye,et){var Rt=V[et][Ye],Tt=K.get().streaming.abr.maxRepresentationRatio[Ye];return isNaN(Tt)||Tt>=1||Tt<0?Fe:Math.min(Fe,Math.round(Rt*Tt))}(function ze(Fe,Ye){var et=V[Ye][Fe],Rt=et;if(!Z[Ye]||!Z[Ye][Fe])return Rt;var Tt=ke(Fe,Ye);void 0!==Tt&&(Rt=Math.max(et,Tt));var bt=function Re(Fe,Ye){try{var et=ue.getAbrBitrateParameter("maxBitrate",Fe);return et>-1?Ce(Z[Ye][Fe].getMediaInfo(),et,Ye):void 0}catch{return}}(Fe,Ye);return void 0!==bt&&(Rt=Math.min(Rt,bt)),Rt}(Fe,Ye),Fe,Ye),Fe,Ye)}catch{return}}function ke(Fe,Ye){try{return function xe(Fe,Ye){try{var et=ue.getAbrBitrateParameter("minBitrate",Fe);if(et>-1){var Rt=Z[Ye][Fe].getMediaInfo(),Tt=Ue(Rt),bt=Ce(Rt,et,Ye);return Tt[bt]&&bt<Tt.length-1&&Tt[bt].bitrate<1e3*et&&bt++,bt}return}catch{return}}(Fe,Ye)}catch{return}}function Zt(Fe){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return Ye||(Ye=X.getActiveStreamInfo().id),Fe&&Z[Ye]&&Z[Ye][Fe]&&Ye?(se[Ye]=se[Ye]||{},se[Ye].hasOwnProperty(Fe)||(se[Ye][Fe]=0),se[Ye][Fe]):0}catch{return 0}}function nn(Fe,Ye,et){var Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(Ye&&Ye.id&&Fe){var Tt=Ye.id,bt=Zt(Fe,Tt);Object(C.checkInteger)(et);var rn=we(Fe,Tt);et!==bt&&et>=0&&et<=rn&&Be(Fe,bt,et,rn,Rt,Tt)}}function Be(Fe,Ye,et,Rt,Tt,bt){if(Fe&&Z[bt]&&Z[bt][Fe]){var rn=Z[bt][Fe].getStreamInfo(),lt=rn&&rn.manifestInfo&&rn.manifestInfo.isDynamic,jt=U.getCurrentBufferLevel(Fe);q.info("Stream ID: "+bt+" ["+Fe+"] switch from "+Ye+" to "+et+"/"+Rt+" (buffer: "+jt+") "+(Tt?JSON.stringify(Tt):".")),se[bt]=se[bt]||{},se[bt][Fe]=et;var Me=function Le(Fe,Ye,et){if(Ye&&Z&&Z[Fe]&&Z[Fe][Ye]){var Rt=Ue(Z[Fe][Ye].getMediaInfo());return Rt[et]?Rt[et]:null}return null}(bt,Fe,et);$.trigger(v.default.QUALITY_CHANGE_REQUESTED,{oldQuality:Ye,newQuality:et,reason:Tt,streamInfo:rn,bitrateInfo:Me,maxIdx:Rt,mediaType:Fe},{streamId:rn.id,mediaType:Fe});var $e=G.getAverageThroughput(Fe,lt);isNaN($e)||ce.setSavedBitrateSettings(Fe,$e)}}function Ce(Fe,Ye,et){var Rt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,Tt=Fe&&Fe.type?Z[et][Fe.type].getRepresentationInfo():null;if(K.get().streaming.abr.useDeadTimeLatency&&Rt&&Tt&&Tt.fragmentDuration){var bt=Tt.fragmentDuration;if((Rt/=1e3)>bt)return 0;Ye*=1-Rt/bt}for(var lt=Ue(Fe),jt=lt.length-1;jt>=0;jt--)if(1e3*Ye>=lt[jt].bitrate)return jt;return 0}function Ue(Fe){var Ye=[];if(!Fe||!Fe.bitrateList)return Ye;for(var Tt,et=Fe.bitrateList,Rt=Fe.type,bt=0,rn=et.length;bt<rn;bt++)(Tt=new T.default).mediaType=Rt,Tt.qualityIndex=bt,Tt.bitrate=et[bt].bandwidth,Tt.width=et[bt].width,Tt.height=et[bt].height,Tt.scanType=et[bt].scanType,Ye.push(Tt);return Ye}function It(){if(de){var Ye=K.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;re=de.getClientWidth()*Ye,ge=de.getClientHeight()*Ye}}return z={initialize:function ye(){ee=Object(m.default)(I).create(),G=Object(h.default)(I).create({settings:K}),(J=Object(x.default)(I).create({dashMetrics:U,customParametersModel:le,mediaPlayerModel:ue,settings:K})).initialize(),$.on(F.default.QUALITY_CHANGE_RENDERED,Ne,z),$.on(F.default.METRIC_ADDED,Ie,z),$.on(v.default.LOADING_PROGRESS,Te,z)},isPlayingAtTopQuality:function ht(Fe){var Ye=Fe?Fe.id:null,et=Zt(y.default.AUDIO,Ye),Rt=Zt(y.default.VIDEO,Ye);return et===we(y.default.AUDIO,Ye)&&Rt===we(y.default.VIDEO,Ye)},updateTopQualityIndex:function Ze(Fe){var Ye=Fe.type,et=Fe.streamInfo.id,Rt=Fe.representationCount-1;return V[et]=V[et]||{},V[et][Ye]=Rt,Rt},clearDataForStream:function Wt(Fe){ee&&ee.clearForStream(Fe),Z[Fe]&&delete Z[Fe],pe[Fe]&&delete pe[Fe],oe[Fe]&&delete oe[Fe]},getThroughputHistory:function ct(){return G},getBitrateList:Ue,getQualityForBitrate:Ce,getTopBitrateInfoFor:function yt(Fe){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Ye||(Ye=X.getActiveStreamInfo().id),Fe&&Z&&Z[Ye]&&Z[Ye][Fe]){var et=we(Fe,Ye),Rt=Ue(Z[Ye][Fe].getMediaInfo());return Rt[et]?Rt[et]:null}return null},getMinAllowedIndexFor:ke,getMaxAllowedIndexFor:we,getInitialBitrateFor:function Lt(Fe,Ye){if(function me(){if(!ce||!ce.hasOwnProperty("getSavedBitrateSettings"))throw new Error(y.default.MISSING_CONFIG_ERROR)}(),Fe===y.default.TEXT)return NaN;var et=ce.getSavedBitrateSettings(Fe),Rt=ue.getAbrBitrateParameter("initialBitrate",Fe),Tt=K.get().streaming.abr.initialRepresentationRatio[Fe];if(-1===Rt)if(Tt>-1){var bt=Z[Ye][Fe].getStreamInfo(),rn=ie.getAdaptationForType(bt.index,Fe,bt).Representation;Rt=Array.isArray(rn)?rn[Math.max(Math.round(rn.length*Tt)-1,0)].bandwidth/1e3:0}else Rt=isNaN(et)?Fe===y.default.VIDEO?1e3:100:et;return Rt},getQualityFor:Zt,getAbandonmentStateFor:function sn(Fe,Ye){return oe[Fe]&&oe[Fe][Ye]?oe[Fe][Ye].state:null},setPlaybackQuality:nn,checkPlaybackQuality:function kt(Fe,Ye){try{if(!(Fe&&Z&&Z[Ye]&&Z[Ye][Fe]))return!1;if(ee){var et=de.getPlaybackQuality();et&&ee.push(Ye,ne,et)}if(!K.get().streaming.abr.autoSwitchBitrate[Fe])return!1;var Rt=Zt(Fe,Ye),Tt=Object(N.default)(I).create({abrController:z,switchHistory:pe[Ye][Fe],droppedFramesHistory:ee,streamProcessor:Z[Ye][Fe],currentValue:Rt,useBufferOccupancyABR:j[Fe],useL2AABR:_[Fe],useLoLPABR:A[Fe],videoModel:de}),bt=ke(Fe,Ye),rn=we(Fe,Ye),lt=J.getMaxQuality(Tt),jt=lt.quality;return void 0!==bt&&(jt>O.default.NO_CHANGE?jt:Rt)<bt&&(jt=bt),jt>rn&&(jt=rn),pe[Ye][Fe].push({oldValue:Rt,newValue:jt}),jt>O.default.NO_CHANGE&&jt!==Rt&&(oe[Ye][Fe].state===M.default.ALLOW_LOAD||jt>Rt)&&(Be(Fe,Rt,jt,rn,lt.reason,Ye),!0)}catch{return!1}},setElementSize:It,setWindowResizeEventCalled:function Ut(Fe){ve=Fe},registerStreamType:function Se(Fe,Ye){var et=Ye.getStreamInfo().id;Z[et]||(Z[et]={}),pe[et]||(pe[et]={}),oe[et]||(oe[et]={}),pe[et][Fe]=Object(L.default)(I).create(),Z[et][Fe]=Ye,oe[et][Fe]={},oe[et][Fe].state=M.default.ALLOW_LOAD,function ae(Fe){var Ye=K.get().streaming.abr.ABRStrategy;Ye===y.default.ABR_STRATEGY_L2A?(j[Fe]=!1,A[Fe]=!1,_[Fe]=!0):Ye===y.default.ABR_STRATEGY_LoLP?(j[Fe]=!1,A[Fe]=!0,_[Fe]=!1):Ye===y.default.ABR_STRATEGY_BOLA?(j[Fe]=!0,A[Fe]=!1,_[Fe]=!1):Ye===y.default.ABR_STRATEGY_THROUGHPUT?(j[Fe]=!1,A[Fe]=!1,_[Fe]=!1):Ye===y.default.ABR_STRATEGY_DYNAMIC&&(j[Fe]=!(!j||!j[Fe])&&j[Fe],A[Fe]=!1,_[Fe]=!1)}(Fe),Fe===y.default.VIDEO&&It()},unRegisterStreamType:function Y(Fe,Ye){try{Z[Fe]&&Z[Fe][Ye]&&delete Z[Fe][Ye],pe[Fe]&&pe[Fe][Ye]&&delete pe[Fe][Ye],oe[Fe]&&oe[Fe][Ye]&&delete oe[Fe][Ye]}catch{}},setConfig:function Ee(Fe){!Fe||(Fe.streamController&&(X=Fe.streamController),Fe.domStorage&&(ce=Fe.domStorage),Fe.mediaPlayerModel&&(ue=Fe.mediaPlayerModel),Fe.customParametersModel&&(le=Fe.customParametersModel),Fe.dashMetrics&&(U=Fe.dashMetrics),Fe.adapter&&(ie=Fe.adapter),Fe.videoModel&&(de=Fe.videoModel),Fe.settings&&(K=Fe.settings))},reset:function _e(){W(),$.off(v.default.LOADING_PROGRESS,Te,z),$.off(F.default.QUALITY_CHANGE_RENDERED,Ne,z),$.off(F.default.METRIC_ADDED,Ie,z),J&&J.reset()}},function te(){q=H.getLogger(z),W()}(),z}P.__dashjs_factory_name="AbrController";var f=p.default.getSingletonFactory(P);f.QUALITY_DEFAULT=0,p.default.updateSingletonFactory(P.__dashjs_factory_name,f),k.default=f},"./src/streaming/controllers/BaseURLController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/models/BaseURLTreeModel.js"),y=u("./src/streaming/utils/BaseURLSelector.js"),M=u("./src/streaming/utils/URLUtils.js"),T=u("./src/dash/vo/BaseURL.js"),D=u("./src/core/FactoryMaker.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js");function p(){var N,O,g,S,L=this.context,m=Object(d.default)(L).getInstance(),h=Object(M.default)(L).getInstance();function C(I){g.invalidateSelectedIndexes(I.entry)}return N={reset:function P(){g.reset(),S.reset()},initialize:function f(I){g.setConfig({adapter:O}),function w(I){g.update(I),S.chooseSelector(O.getIsDVB(I))}(I)},resolve:function b(I){var $=g.getForPath(I).reduce(function(z,q){var J=S.select(q);return J?(h.isRelative(J.url)?z.url=h.resolve(J.url,z.url):(z.url=J.url,z.serviceLocation=J.serviceLocation),z.availabilityTimeOffset=J.availabilityTimeOffset,z.availabilityTimeComplete=J.availabilityTimeComplete,z):new T.default},new T.default);if(!h.isRelative($.url))return $},setConfig:function R(I){I.baseURLTreeModel&&(g=I.baseURLTreeModel),I.baseURLSelector&&(S=I.baseURLSelector),I.adapter&&(O=I.adapter)}},function F(){g=Object(x.default)(L).create(),S=Object(y.default)(L).create(),m.on(v.default.SERVICE_LOCATION_BLACKLIST_CHANGED,C,N)}(),N}p.__dashjs_factory_name="BaseURLController",k.default=D.default.getClassFactory(p)},"./src/streaming/controllers/BlacklistController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/EventBus.js");function M(T){T=T||{};var D,d=[],v=Object(y.default)(this.context).getInstance(),p=T.updateEventName,N=T.addBlacklistEventName;function L(S){-1===d.indexOf(S)&&(d.push(S),v.trigger(p,{entry:S}))}function m(S){L(S.entry)}return D={add:L,contains:function O(S){return!!(d.length&&S&&S.length)&&-1!==d.indexOf(S)},reset:function g(){d=[]}},function h(){N&&v.on(N,m,D)}(),D}M.__dashjs_factory_name="BlackListController",k.default=x.default.getClassFactory(M)},"./src/streaming/controllers/BufferController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/constants/MetricsConstants.js"),M=u("./src/streaming/models/FragmentModel.js"),T=u("./src/streaming/SourceBufferSink.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/core/Debug.js"),N=u("./src/streaming/utils/InitCache.js"),O=u("./src/streaming/vo/DashJSError.js"),L=u("./src/core/errors/Errors.js"),m=u("./src/streaming/vo/metrics/HTTPRequest.js"),h=u("./src/streaming/MediaPlayerEvents.js"),S=.01,F="BufferController";function R(w){w=w||{};var Z,oe,he,ve,re,ge,ie,de,ue,le,ce,ne,pe,ee,G,j,_,A,b=this.context,P=Object(D.default)(b).getInstance(),f=w.errHandler,I=w.fragmentModel,H=w.representationController,$=w.adapter,z=w.textController,q=w.abrController,J=w.playbackController,X=w.streamInfo,V=w.type,se=w.settings;function ae(qe){ge=qe}function Y(qe){return $.convertRepresentationToRepresentationInfo(H.getRepresentationForQuality(qe))}function _e(qe,ot,Ve){var nt=Y(Ve);return ot&&ot[V]&&(V===x.default.VIDEO||V===x.default.AUDIO)?ue.initializeForStreamSwitch(qe,nt,ot[V]):ue.initializeForFirstUse(X,qe,nt)}function Ee(qe){se.get().streaming.cacheInitSegments&&(oe.info("Init fragment finished loading saving to",V+"'s init cache"),G.save(qe.chunk)),oe.debug("Append Init fragment",V," with representationId:",qe.chunk.representationId," and quality:",qe.chunk.quality,", data size:",qe.chunk.bytes.byteLength),Ne(qe.chunk)}function Te(qe){Ne(qe.chunk,qe.request)}function Ne(qe){ue.append(qe,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).then(function(Ve){we(Ve)}).catch(function(Ve){we(Ve)}),qe.mediaInfo.type===x.default.VIDEO&&an(d.default.VIDEO_CHUNK_RECEIVED,{chunk:qe})}function Ie(qe){if(qe&&qe.length>0)for(var ot=0,Ve=qe.length;ot<Ve;ot++)oe.debug("Buffered range: "+qe.start(ot)+" - "+qe.end(ot)+", currentTime = ",J.getTime())}function we(qe){if(qe.error)return 22===qe.error.code&&function Re(){if(ee=!0,re=.8*Je(),oe.warn("Quota exceeded, Critical Buffer: "+re),re>0){var qe=Math.max(.2*re,1),ot=re-qe,Ve=Math.min(se.get().streaming.buffer.bufferTimeAtTopQuality,.9*ot),nt=Math.min(se.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*ot),ft={streaming:{buffer:{bufferToKeep:parseFloat(qe.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Ve.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(nt.toFixed(5))}}};se.update(ft)}}(),void((22===qe.error.code||!Et())&&(oe.warn("Clearing playback buffer to overcome quota exceed situation"),an(d.default.QUOTA_EXCEEDED,{criticalBufferLevel:re,quotaExceededTime:qe.chunk.start}),Ut(ht())));if(ue&&(Ue(),ee=!1,(ce=qe.chunk)&&ce.endFragment)){ce&&!isNaN(ce.index)&&(ie=Math.max(ce.index,ie),Qe());var ot=ue.getAllBufferRanges();ce.segmentType===m.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Ie(ot),nn(),function ke(){if(!isNaN(A)){if(V!==x.default.AUDIO&&V!==x.default.VIDEO)return void(A=NaN);var qe=J.getTime(),ot=Le(qe,0),Ve=Le(A,0);if(ot&&Ve&&ot.start===Ve.start)return void(A=NaN);var nt=H.getCurrentRepresentation().segmentDuration,ft=Le(A,nt);!ft||(se.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(qe-A)>nt?A<=ft.end&&J.seek(Math.max(A,ft.start),!1,!0):qe<ft.start&&J.seek(ft.start,!1,!0))}}()),ce&&an(d.default.BYTES_APPENDED_END_FRAGMENT,{quality:ce.quality,startTime:ce.start,index:ce.index,bufferedRanges:ot,segmentType:ce.segmentType,mediaType:V})}}function yt(){return new Promise(function(qe,ot){var Ve=Lt();if(!Ve||0===Ve.length)return nn(),void qe();Ut(Ve).then(function(){qe()}).catch(function(nt){ot(nt)})})}function Lt(qe){var ot=[],Ve=ue.getAllBufferRanges();if(!Ve||0===Ve.length)return ot;if(!qe&&0!==qe||isNaN(qe))ot.push({start:Ve.start(0),end:Ve.end(Ve.length-1)+.5});else{var nt=function kt(qe,ot){var Ve=se.get().streaming.buffer.bufferToKeep,nt=ot.start(0);if(qe-nt>Ve){var Nt=Math.max(0,qe-Ve),Bt=I.getRequests({state:M.default.FRAGMENT_MODEL_EXECUTED,time:qe,threshold:S})[0];if(Bt&&(Nt=Math.min(Bt.startTime,Nt)),Nt>0)return{start:nt,end:Nt}}return null}(qe,Ve),ft=function Zt(qe,ot){var Ve=ot.end(ot.length-1)+.5,ft=X.manifestInfo.duration>=se.get().streaming.buffer.longFormContentDurationThreshold?se.get().streaming.buffer.bufferTimeAtTopQualityLongForm:se.get().streaming.buffer.bufferTimeAtTopQuality;if(Ve-qe>ft){var Bt=qe+ft,Ke=I.getRequests({state:M.default.FRAGMENT_MODEL_EXECUTED,time:qe,threshold:S})[0];if(Ke&&(Bt=Math.max(Ke.startTime+Ke.duration,Bt)),Bt<Ve)return{start:Bt,end:Ve}}return null}(qe,Ve);nt&&ot.push(nt),ft&&ot.push(ft)}return ot}function nn(){(!_||V===x.default.TEXT&&z.isTextEnabled())&&Ue()}function sn(){st()}function Be(){st(),A=NaN}function Le(qe,ot){var wt,_t,Ve=ue.getAllBufferRanges(),nt=0,ft=0,Nt=null,Bt=null,Ke=0,en=isNaN(ot)?.15:ot;if(null!=Ve){for(_t=0,wt=Ve.length;_t<wt;_t++)if(nt=Ve.start(_t),ft=Ve.end(_t),null===Nt)Ke=Math.abs(nt-qe),(qe>=nt&&qe<ft||Ke<=en)&&(Nt=nt,Bt=ft);else{if(!((Ke=nt-Bt)<=en))break;Bt=ft}if(null!==Nt)return{start:Nt,end:Bt}}return null}function Ue(){if(J){var qe=se.get().streaming.gaps.jumpGaps&&!isNaN(se.get().streaming.gaps.smallGapLimit)?se.get().streaming.gaps.smallGapLimit:NaN;ve=Math.max(function Ce(qe,ot){var Ve;return se.get().streaming.gaps.jumpGaps&&(ot=se.get().streaming.gaps.smallGapLimit),null===(Ve=Le(qe,ot))?0:Ve.end-qe}(J.getTime()||0,qe),0),an(d.default.BUFFER_LEVEL_UPDATED,{mediaType:V,bufferLevel:ve}),st()}}function Qe(){var qe=ie>=de-1,ot=J.getTimeToStreamEnd(X)-ve<=0;(qe||ot)&&!he&&($e(!0),oe.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(X.id," and type ").concat(V)))}function st(){V!==x.default.AUDIO&&V!==x.default.VIDEO||((!J.getLowLatencyModeEnabled()&&ve<se.get().streaming.buffer.stallThreshold||0===ve)&&!he?ct(y.default.BUFFER_EMPTY):(he||ve>=se.get().streaming.buffer.stallThreshold||J.getLowLatencyModeEnabled()&&ve>0)&&ct(y.default.BUFFER_LOADED))}function ct(qe){le===qe||qe===y.default.BUFFER_EMPTY&&0===J.getTime()||V===x.default.TEXT&&!z.isTextEnabled()||(le=qe,an(d.default.BUFFER_LEVEL_STATE_CHANGED,{state:qe}),an(qe===y.default.BUFFER_LOADED?d.default.BUFFER_LOADED:d.default.BUFFER_EMPTY),oe.debug(qe===y.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ht(){var qe=[],ot=ue.getAllBufferRanges();if(!ot||0===ot.length)return qe;var Ve=J.getTime(),nt=Math.max(0,Ve-se.get().streaming.buffer.bufferToKeep),ft=I.getRequests({state:M.default.FRAGMENT_MODEL_EXECUTED,time:Ve,threshold:S})[0];if(ft)nt=Math.min(ft.startTime,nt);else if(0===Ve&&J.getIsDynamic())return[];if(ot.start(0)<=nt){for(var Nt={start:0,end:nt},Bt=0;Bt<ot.length&&ot.end(Bt)<=nt;Bt++)Nt.end=ot.end(Bt);Nt.start<Nt.end&&qe.push(Nt)}return qe}function Ut(qe){return new Promise(function(ot,Ve){if(qe&&ue&&0!==qe.length){var nt=[];qe.forEach(function(ft){nt.push(function It(qe){return new Promise(function(ot,Ve){qe.resolve=ot,qe.reject=Ve,j.push(qe)})}(ft))}),pe||Wt(),Promise.all(nt).then(function(){ot()}).catch(function(ft){Ve(ft)})}else ot()})}function Wt(){try{if(0===j.length||!ue)return oe.debug("Nothing to prune, halt pruning"),j=[],void(pe=!1);var qe=ue.getBuffer();if(!qe||!qe.buffered||0===qe.buffered.length)return oe.debug("SourceBuffer is empty (or does not exist), halt pruning"),j=[],void(pe=!1);var ot=j.shift();oe.debug("".concat(V,": Removing buffer from: ").concat(ot.start," to ").concat(ot.end)),pe=!0,J.getTime()<ot.end&&$e(!1),ue.remove(ot).then(function(nt){Fe(nt)}).catch(function(nt){Fe(nt)})}catch{pe=!1}}function Fe(qe){oe.debug("onRemoved buffer from:",qe.from,"to",qe.to),Ie(ue.getAllBufferRanges()),0===j.length&&(pe=!1,Ue()),qe.unintended&&(oe.warn("Detected unintended removal from:",qe.from,"to",qe.to,"setting streamprocessor time to",qe.from),an(d.default.SEEK_TARGET,{time:qe.from})),pe?Wt():(_?_=!1:Ue(),an(d.default.BUFFER_CLEARED,{from:qe.from,to:qe.to,unintended:qe.unintended,hasEnoughSpaceToAppend:Et(),quotaExceeded:ee}))}function Ye(qe){return new Promise(function(ot){qe&&void 0!==qe.MSETimeOffset&&ue&&ue.updateTimestampOffset?ue.updateTimestampOffset(qe.MSETimeOffset).then(function(){ot()}).catch(function(){ot()}):ot()})}function et(){return ue&&!he?ue.updateAppendWindow(X):Promise.resolve()}function Tt(){++ne*(se.get().streaming.wallclockTimeUpdateInterval/1e3)>=se.get().streaming.buffer.bufferPruningInterval&&(ne=0,function Ze(){!ue||V===x.default.TEXT||he||Ut(ht())}())}function bt(){st()}function $e(qe){he!==qe&&((he=qe)?an(d.default.BUFFERING_COMPLETED):de=Number.POSITIVE_INFINITY)}function Je(){try{var Ve,nt,qe=ue.getAllBufferRanges(),ot=0;if(!qe)return ot;for(nt=0,Ve=qe.length;nt<Ve;nt++)ot+=qe.end(nt)-qe.start(nt);return ot}catch{return 0}}function Et(){var qe=Je();return isNaN(qe)||qe<re}function an(qe,ot){P.trigger(qe,ot||{},{streamId:X.id,mediaType:V})}function zt(qe,ot){if(re=Number.POSITIVE_INFINITY,le=void 0,de=Number.POSITIVE_INFINITY,ie=0,ce=null,he=!1,pe=!1,ee=!1,ve=0,ne=0,j=[],A=NaN,ue){var Ve=ue;ue=null,!qe&&!ot&&Ve.abort().then(function(){Ve.reset(ot),Ve=null})}_=!1}return Z={initialize:function K(qe){ae(qe),P.on(d.default.INIT_FRAGMENT_LOADED,Ee,Z),P.on(d.default.MEDIA_FRAGMENT_LOADED,Te,Z),P.on(d.default.WALLCLOCK_TIME_UPDATED,Tt,Z),P.on(h.default.PLAYBACK_PLAYING,Be,Z),P.on(h.default.PLAYBACK_PROGRESS,nn,Z),P.on(h.default.PLAYBACK_TIME_UPDATED,nn,Z),P.on(h.default.PLAYBACK_RATE_CHANGED,bt,Z),P.on(h.default.PLAYBACK_STALLED,sn,Z)},getStreamId:function te(){return X.id},getType:function ye(){return V},getBufferControllerType:function Se(){return F},createBufferSink:function W(qe){var ot=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(Ve,nt){if(G&&qe&&ge){var ft=q.getQualityFor(V,X.id);ue=Object(T.default)(b).create({mediaSource:ge,textController:z,eventBus:P}),_e(qe,ot,ft).then(function(){return Ye(Y(ft))}).then(function(){Ve(ue)}).catch(function(Nt){oe.fatal("Caught error on create SourceBuffer: "+Nt),f.error(new O.default(L.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,L.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+V)),nt(Nt)})}else Ve(null)})},getBuffer:function rn(){return ue},getBufferLevel:function lt(){return ve},getRangeAt:Le,setMediaSource:ae,getMediaSource:function jt(){return ge},appendInitSegmentFromCache:function me(qe){var ot=G.extract(X.id,qe);return!!ot&&(oe.info("Append Init fragment",V," with representationId:",ot.representationId," and quality:",ot.quality,", data size:",ot.bytes.byteLength),Ne(ot),!0)},getIsBufferingCompleted:function Me(){return he},setIsBufferingCompleted:$e,getIsPruningInProgress:function mt(){return pe},reset:function Vt(qe,ot){P.off(d.default.INIT_FRAGMENT_LOADED,Ee,this),P.off(d.default.MEDIA_FRAGMENT_LOADED,Te,this),P.off(d.default.WALLCLOCK_TIME_UPDATED,Tt,this),P.off(h.default.PLAYBACK_PLAYING,Be,this),P.off(h.default.PLAYBACK_PROGRESS,nn,this),P.off(h.default.PLAYBACK_TIME_UPDATED,nn,this),P.off(h.default.PLAYBACK_RATE_CHANGED,bt,this),P.off(h.default.PLAYBACK_STALLED,sn,this),zt(qe,ot)},prepareForPlaybackSeek:function xe(){return he&&$e(!1),ue.abort()},prepareForReplacementTrackSwitch:function ze(qe){return new Promise(function(ot,Ve){ue.abort().then(function(){return et()}).then(function(){return ue.changeType(qe)}).then(function(){return yt()}).then(function(){$e(!1),ot()}).catch(function(nt){Ve(nt)})})},prepareForNonReplacementTrackSwitch:function at(qe){return new Promise(function(ot,Ve){et().then(function(){return ue.changeType(qe)}).then(function(){ot()}).catch(function(nt){Ve(nt)})})},prepareForReplacementQualitySwitch:function ut(){return new Promise(function(qe,ot){ue.abort().then(function(){return et()}).then(function(){return yt()}).then(function(){$e(!1),qe()}).catch(function(Ve){ot(Ve)})})},updateAppendWindow:et,getAllRangesWithSafetyFactor:Lt,getContinuousBufferTimeForTargetTime:function tt(qe){try{var ot=qe,Ve=ue.getAllBufferRanges();if(!Ve||0===Ve.length)return NaN;for(var nt=0;ot===qe&&nt<Ve.length;){var ft=Ve.start(nt),Nt=Ve.end(nt);ot>=ft&&ot<=Nt&&(ot=Nt),nt+=1}return ot===qe?NaN:ot}catch{}},clearBuffers:Ut,pruneAllSafely:yt,updateBufferTimestampOffset:Ye,setSeekTarget:function Yt(qe){A=qe},segmentRequestingCompleted:function Rt(qe){isNaN(qe)||(de=qe,Qe())}},function U(){oe=Object(p.default)(b).getInstance().getLogger(Z),G=Object(N.default)(b).getInstance(),zt()}(),Z}R.__dashjs_factory_name=F,k.default=v.default.getClassFactory(R)},"./src/streaming/controllers/CatchupController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),M=u("./src/core/EventBus.js"),T=u("./src/streaming/constants/Constants.js"),D=u("./src/streaming/MediaPlayerEvents.js"),d=u("./src/core/events/Events.js"),v=u("./src/streaming/constants/MetricsConstants.js");function p(){var L,m,h,g,S,C,F,R,w,b,P,N=this.context,O=Object(M.default)(N).getInstance();function J(){m=!1;var ne=typeof navigator<"u"?navigator.userAgent.toLowerCase():"",pe=/safari/.test(ne)&&!/chrome/.test(ne);h=pe?.25:.02}function X(){m=!1}function V(ne){if(ne.streamId===C.getActiveStreamInfo().id&&b){var pe=F.getLiveDelay();F.getBufferLevel()>pe/2&&(b=!1)}}function se(ne){ne.streamId===C.getActiveStreamInfo().id&&(b=ne.state===v.default.BUFFER_EMPTY)}function Z(){R.getCatchupModeEnabled()||g.setPlaybackRate(1)}function oe(){F.getIsDynamic()&&R.getCatchupModeEnabled()&&R.getCatchupPlaybackRate()>0&&!F.isPaused()&&!F.isSeeking()&&function re(){try{var ne=R.getLiveCatchupLatencyThreshold();return!(!F.getTime()>0||m||!isNaN(ne)&&F.getCurrentLiveLatency()>=ne)&&(ge()===T.default.LIVE_CATCHUP_MODE_LOLP?function de(ne,pe){try{return Math.abs(ve())>0||ne<pe}catch{return!1}}(F.getBufferLevel(),S.get().streaming.liveCatchup.playbackBufferMin):function ie(){try{return Math.abs(ve())>0}catch{return!1}}())}catch{return!1}}()&&function he(){if(!m&&g){var ne,pe=g.getPlaybackRate(),ee=R.getCatchupPlaybackRate(),G=F.getBufferLevel(),j=ve(),_=R.getCatchupMaxDrift();if(!isNaN(_)&&_>0&&j>_)P.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),m=!0,function ce(){var ne=C&&C.hasVideoTrack()?T.default.VIDEO:T.default.AUDIO,pe=w.getCurrentDVRInfo(ne),ee=pe?pe.range:null;ee&&!isNaN(ee.end)&&F.seek(ee.end-F.getLiveDelay(),!0,!1)}();else{var A=F.getCurrentLiveLatency(),U=F.getLiveDelay();(ne=ge()===T.default.LIVE_CATCHUP_MODE_LOLP?function le(ne,pe,ee,G,j,_){var U,A=ne;if(j<G){var ye=2*A/(1+Math.pow(Math.E,-5*(j-G)));P.debug("[LoL+ playback control_buffer-based] bufferLevel: "+j+", newRate: "+(U=1-A+ye))}else{var Se=.02;U=Math.abs(pe-ee)<=Se*ee?1:1-A+2*A/(1+Math.pow(Math.E,-5*(pe-ee))),P.debug("[LoL+ playback control_latency-based] latency: "+pe+", newRate: "+U)}return Math.abs(_-U)<=h&&(U=null),U}(ee,A,U,S.get().streaming.liveCatchup.playbackBufferMin,G,pe):function ue(ne,pe,ee,G,j){if(b)return 1;var A=pe-ee,te=1-ne+2*ne/(1+Math.pow(Math.E,-5*A));return F.getPlaybackStalled()&&G<=ee/2&&A>0&&(te=1),Math.abs(j-te)<=h&&(te=null),te}(ee,A,U,G,pe))&&(P.debug("[CatchupController]: Setting playback rate to ".concat(ne)),g.setPlaybackRate(ne))}}}()}function ve(){return F.getCurrentLiveLatency()-F.getLiveDelay()}function ge(){var ne=S.get().streaming.liveCatchup.playbackBufferMin;return S.get().streaming.liveCatchup.mode!==T.default.LIVE_CATCHUP_MODE_LOLP||null===ne||isNaN(ne)?T.default.LIVE_CATCHUP_MODE_DEFAULT:T.default.LIVE_CATCHUP_MODE_LOLP}return L={reset:function q(){(function $(){O.off(D.default.BUFFER_LEVEL_UPDATED,V,L),O.off(D.default.BUFFER_LEVEL_STATE_CHANGED,se,L),O.off(D.default.PLAYBACK_PROGRESS,oe,L),O.off(D.default.PLAYBACK_TIME_UPDATED,oe,L),O.off(D.default.PLAYBACK_SEEKED,oe,L),O.off(d.default.SETTING_UPDATED_CATCHUP_ENABLED,Z,L)})(),J(),g.setPlaybackRate(1,!0)},setConfig:function I(ne){!ne||(ne.settings&&(S=ne.settings),ne.videoModel&&(g=ne.videoModel),ne.streamController&&(C=ne.streamController),ne.playbackController&&(F=ne.playbackController),ne.dashMetrics&&(w=ne.dashMetrics),ne.mediaPlayerModel&&(R=ne.mediaPlayerModel))},initialize:function f(){!function H(){O.on(D.default.BUFFER_LEVEL_UPDATED,V,L),O.on(D.default.BUFFER_LEVEL_STATE_CHANGED,se,L),O.on(D.default.PLAYBACK_PROGRESS,oe,L),O.on(D.default.PLAYBACK_TIME_UPDATED,oe,L),O.on(D.default.PLAYBACK_SEEKED,X,L),O.on(d.default.SETTING_UPDATED_CATCHUP_ENABLED,Z,L)}()}},function z(){P=Object(y.default)(N).getInstance().getLogger(L),J()}(),L}p.__dashjs_factory_name="CatchupController",k.default=x.default.getSingletonFactory(p)},"./src/streaming/controllers/EventController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),M=u("./src/core/EventBus.js"),T=u("./src/streaming/MediaPlayerEvents.js"),D=u("./src/streaming/net/XHRLoader.js");function d(){var S,C,F,R,w,b,P,f,I,H,$,v="urn:mpeg:dash:event:2012",m_DISCARDED="discarded",m_UPDATED="updated",m_ADDED="added",h=this.context,g=Object(M.default)(h).getInstance();function q(){if(!P||!f)throw new Error("setConfig function has to be called previously")}function J(){$=!1,F={},R={},w=null,H=!1,b=Date.now()/1e3}function X(){try{null!==w&&$&&(clearInterval(w),w=null,$=!1,function re(){try{ie(R),ie(F)}catch{}}())}catch(U){throw U}}function oe(U,K){var te=arguments.length>2&&void 0!==arguments[2]&&arguments[2],ye=U.eventStream.schemeIdUri,Se=U.eventStream.value,ae=U.id,Y=m_DISCARDED;K[ye]||(K[ye]=[]);var W=K[ye].findIndex(function(_e){return(!Se||_e.eventStream.value&&_e.eventStream.value===Se)&&_e.id===ae});return-1===W?(K[ye].push(U),Y=m_ADDED):te&&(K[ye][W]=U,Y=m_UPDATED),Y}function he(U){try{1==U.eventStream.value&&g.trigger(T.default.MANIFEST_VALIDITY_CHANGED,{id:U.id,validUntil:U.calculatedPresentationTime,newDuration:4294967295==U.calculatedPresentationTime?NaN:U.calculatedPresentationTime+U.duration,newManifestValidAfter:NaN},{mode:T.default.EVENT_MODE_ON_START})}catch{}}function ve(){try{if(!H){H=!0;var U=f.getTime(),K=U-b;K=b>0?Math.max(0,K):0,ge(R,K,U),ge(F,K,U),b=U,H=!1}}catch{H=!1}}function ge(U,K,te){try{de(U,function(ae){if(void 0!==ae){var Y=isNaN(ae.duration)?0:ae.duration;ae.calculatedPresentationTime<=te&&ae.calculatedPresentationTime+K+Y>=te?ce(ae,U,T.default.EVENT_MODE_ON_START):(function ue(U,K,te){try{return U-K>te}catch{return!1}}(te,Y+K,ae.calculatedPresentationTime)||function le(U){try{return U.calculatedPresentationTime>U.eventStream.period.start+U.eventStream.period.duration}catch{return!1}}(ae))&&(C.debug("Deleting event ".concat(ae.id," as it is expired or invalid")),ne(U,ae))}})}catch{}}function ie(U){try{var K=f.getTime();de(U,function(Se){var ae=Se.eventStream&&Se.eventStream.period&&!isNaN(Se.eventStream.period.duration)?Se.eventStream.period.duration:NaN,Y=Se.eventStream&&Se.eventStream.period&&!isNaN(Se.eventStream.period.start)?Se.eventStream.period.start:NaN;isNaN(ae)||isNaN(Y)||Math.abs(Se.calculatedPresentationTime-K)<300&&ce(Se,U,T.default.EVENT_MODE_ON_START)})}catch{}}function de(U,K){try{if(U)for(var te=Object.keys(U),ye=0;ye<te.length;ye++)U[te[ye]].forEach(function(ae){void 0!==ae&&K(ae)})}catch{}}function ce(U,K,te){try{var ye=f.getTime(),Se=U.id;if(te===T.default.EVENT_MODE_ON_RECEIVE)return C.debug("Received event ".concat(Se)),void g.trigger(U.eventStream.schemeIdUri,{event:U},{mode:te});U.eventStream.schemeIdUri===v&&1==U.eventStream.value?(0!==U.duration||0!==U.presentationTimeDelta)&&(C.debug("Starting manifest refresh event ".concat(Se," at ").concat(ye)),ne(K,U),function pe(){try{q(),P.refreshManifest()}catch{}}()):"urn:mpeg:dash:event:callback:2015"===U.eventStream.schemeIdUri&&1==U.eventStream.value?(C.debug("Starting callback event ".concat(Se," at ").concat(ye)),ne(K,U),function ee(U){try{Object(D.default)(h).create({}).load({method:"get",url:U,request:{responseType:"arraybuffer"}})}catch(te){throw te}}(U.messageData)):(C.debug("Starting event ".concat(Se," at ").concat(ye)),ne(K,U),g.trigger(U.eventStream.schemeIdUri,{event:U},{mode:te}))}catch{}}function ne(U,K){var te=K.eventStream.schemeIdUri,ye=K.eventStream.value,Se=K.id;U[te]=U[te].filter(function(ae){return ye&&ae.eventStream.value&&ae.eventStream.value!==ye||ae.id!==Se}),0===U[te].length&&delete U[te]}return S={addInlineEvents:function se(U){try{if(q(),U)for(var K=0;K<U.length;K++){var te=U[K],ye=oe(te,F,!0);ye===m_ADDED?(C.debug("Added inline event with id ".concat(te.id)),ce(te,U,T.default.EVENT_MODE_ON_RECEIVE)):ye===m_UPDATED&&C.debug("Updated inline event with id ".concat(te.id))}}catch(Se){throw Se}},addInbandEvents:function Z(U){try{q();for(var K=0;K<U.length;K++){var te=U[K];oe(te,R,!1)===m_ADDED?(te.eventStream.schemeIdUri===v&&void 0===R[te.id]&&he(te),C.debug("Added inband event with id "+te.id),ce(te,U,T.default.EVENT_MODE_ON_RECEIVE)):C.debug("Inband event with scheme_id_uri ".concat(te.eventStream.schemeIdUri,", value ").concat(te.eventStream.value," and id ").concat(te.id," was ignored because it has been added before."))}ve()}catch(Se){throw Se}},getInbandEvents:function _(){return R},getInlineEvents:function j(){return F},start:function V(){try{q(),C.debug("Start Event Controller");var U=I.get().streaming.eventControllerRefreshDelay;!$&&!isNaN(U)&&($=!0,w=setInterval(ve,U))}catch(K){throw K}},setConfig:function G(U){try{if(!U)return;U.manifestUpdater&&(P=U.manifestUpdater),U.playbackController&&(f=U.playbackController),U.settings&&(I=U.settings)}catch(K){throw K}},reset:function A(){X(),J()}},function z(){C=Object(y.default)(h).getInstance().getLogger(S),J()}(),S}d.__dashjs_factory_name="EventController",k.default=x.default.getSingletonFactory(d)},"./src/streaming/controllers/FragmentController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/vo/DataChunk.js"),M=u("./src/streaming/models/FragmentModel.js"),T=u("./src/streaming/FragmentLoader.js"),D=u("./src/streaming/utils/RequestModifier.js"),d=u("./src/core/EventBus.js"),v=u("./src/core/events/Events.js"),p=u("./src/streaming/MediaPlayerEvents.js"),N=u("./src/core/errors/Errors.js"),O=u("./src/core/FactoryMaker.js"),L=u("./src/core/Debug.js");function m(h){h=h||{};var P,f,I,g=this.context,S=Object(d.default)(g).getInstance(),C=h.errHandler,F=h.mediaPlayerModel,R=h.dashMetrics,w=Object(L.default)(g).getInstance(),b=h.streamInfo;function $(){return b.id}function q(){for(var se in I)I[se].reset();I={}}function V(se){if(se.sender){var Z=se.request,oe=se.response,he=Z.isInitializationRequest(),ve=Z.mediaInfo.streamInfo;if(se.error&&(Z.mediaType===x.default.AUDIO||Z.mediaType===x.default.VIDEO||Z.mediaType===x.default.TEXT&&Z.mediaInfo.isFragmented)&&S.trigger(v.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:se.request.serviceLocation}),!oe||!ve)return void f.warn("No "+Z.mediaType+" bytes to push or stream is inactive.");var re=function X(se,Z,oe,he){var ve=new y.default;return ve.streamId=oe,ve.mediaInfo=Z.mediaInfo,ve.segmentType=Z.type,ve.start=Z.startTime,ve.duration=Z.duration,ve.end=ve.start+ve.duration,ve.bytes=se,ve.index=Z.index,ve.quality=Z.quality,ve.representationId=Z.representationId,ve.endFragment=he,ve}(oe,Z,b.id,se.type!==v.default.FRAGMENT_LOADING_PROGRESS);S.trigger(he?v.default.INIT_FRAGMENT_LOADED:v.default.MEDIA_FRAGMENT_LOADED,{chunk:re,request:Z},{streamId:ve.id,mediaType:Z.mediaType})}}return P={getStreamId:$,getModel:function z(se){var Z=I[se];return Z||(Z=Object(M.default)(g).create({streamInfo:b,type:se,dashMetrics:R,fragmentLoader:Object(T.default)(g).create({dashMetrics:R,mediaPlayerModel:F,errHandler:C,requestModifier:Object(D.default)(g).getInstance(),settings:h.settings,boxParser:h.boxParser,eventBus:S,events:v.default,errors:N.default,dashConstants:h.dashConstants,urlUtils:h.urlUtils,streamId:$()}),debug:w,eventBus:S,events:v.default}),I[se]=Z),Z},reset:function J(){S.off(p.default.FRAGMENT_LOADING_COMPLETED,V,this),S.off(p.default.FRAGMENT_LOADING_PROGRESS,V,this),q()}},function H(){f=w.getLogger(P),q(),S.on(p.default.FRAGMENT_LOADING_COMPLETED,V,P),S.on(p.default.FRAGMENT_LOADING_PROGRESS,V,P)}(),P}m.__dashjs_factory_name="FragmentController",k.default=O.default.getClassFactory(m)},"./src/streaming/controllers/GapController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),M=u("./src/core/events/Events.js"),T=u("./src/core/EventBus.js");function p(){var L,m,h,g,S,C,F,R,w,b,P,f,N=this.context,O=Object(T.default)(N).getInstance();function $(){(function ue(){f.debug("Stopping the gap controller"),S&&(clearInterval(S),S=null)})(),function X(){O.off(M.default.WALLCLOCK_TIME_UPDATED,he,this),O.off(M.default.INITIAL_STREAM_SWITCH,oe,this),O.off(M.default.PLAYBACK_SEEKING,V,this),O.off(M.default.BUFFER_REPLACEMENT_STARTED,se,L),O.off(M.default.TRACK_CHANGE_RENDERED,Z,L)}(),function z(){S=null,C=NaN,g=0,b=null,P={}}()}function V(){b&&(clearTimeout(b),b=null)}function se(ce){try{if(ce.streamId!==R.getActiveStreamInfo().id||!ce.mediaType)return;ce.streamId===R.getActiveStreamInfo().id&&(P[ce.mediaType]=!0)}catch(ne){f.error(ne)}}function Z(ce){!ce||!ce.mediaType||(P[ce.mediaType]=!1)}function oe(){S||function de(){try{S||(f.debug("Starting the gap controller"),S=setInterval(function(){ve()&&le(F.getTime())},100))}catch{}}()}function he(){if(ve(h.get().streaming.gaps.enableSeekFix)&&++g>=10){var ce=F.getTime();m===ce?le(ce,!0):(m=ce,C=NaN),g=0}}function ve(){var ce=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!R.getActiveStream())return!1;var ne=Object.keys(P).some(function(ee){return P[ee]}),pe=!!ce&&re();return!ne&&h.get().streaming.gaps.jumpGaps&&R.getActiveStreamProcessors().length>0&&(!F.isSeeking()||pe)&&!F.isPaused()&&!R.getIsStreamSwitchInProgress()&&!R.getHasMediaOrInitialisationError()}function re(){var ce=R.getActiveStream(),ne=parseFloat((ce.getStartTime()+ce.getDuration()).toFixed(5));return F.getTime()+h.get().streaming.gaps.threshold>=ne}function ge(ce,ne){try{if(!ce||ce.length<=1&&ne>0)return NaN;for(var pe=NaN,ee=0;isNaN(pe)&&ee<ce.length;){var G=ee>0?ce.end(ee-1):0;ne<ce.start(ee)&&G-ne<h.get().streaming.gaps.threshold&&(pe=ee),ee+=1}return pe}catch{return null}}function ie(ce,ne){for(var pe=0,ee=ce.length;pe<ee;pe++)if(ne>=ce.start(pe)&&ne<=ce.end(pe))return!0;return!1}function le(ce){var A,ne=arguments.length>1&&void 0!==arguments[1]&&arguments[1],pe=h.get().streaming.gaps.enableStallFix,ee=h.get().streaming.gaps.stallSeek,G=h.get().streaming.gaps.smallGapLimit,j=h.get().streaming.gaps.jumpLargeGaps,_=w.getBufferRange(),U=NaN,K=!1;if(A=ge(_,ce),!isNaN(A)){var te=_.start(A),ye=te-ce;ye>0&&(ye<=G||j)&&(U=te)}var Se=F.getTimeToStreamEnd();if(isNaN(U)&&ne&&isFinite(Se)&&!isNaN(Se)&&Se<G&&(U=parseFloat(F.getStreamEndTime().toFixed(5)),K=!0),pe&&isNaN(U)&&ne&&isNaN(A)&&ie(_,ce)&&(0===ee?(f.warn("Toggle play pause to break stall"),w.pause(),w.play()):(f.warn("Jumping ".concat(ee,"s to break stall")),U=ce+ee)),U>0&&C!==U&&U>ce&&!b){var ae=U-ce;if(K){var Y=R.getStreamForTime(U),W=Y&&!!Y.getPreloaded();f.warn("Jumping to end of stream because of gap from ".concat(ce," to ").concat(U,". Gap duration: ").concat(ae)),F.seek(U,!0,W)}else{var _e=F.getIsDynamic(),Ee=A>0?_.end(A-1):ce,me=_e?1e3*Math.max(0,ae-.1):0;b=window.setTimeout(function(){F.seek(U,!0,!0),f.warn("Jumping gap occuring in period ".concat(R.getActiveStream().getStreamId()," starting at ").concat(Ee," and ending at ").concat(U,". Jumping by: ").concat(U-Ee)),b=null},me)}C=U}}return L={reset:$,setConfig:function q(ce){!ce||(ce.settings&&(h=ce.settings),ce.playbackController&&(F=ce.playbackController),ce.streamController&&(R=ce.streamController),ce.videoModel&&(w=ce.videoModel))},initialize:function I(){!function J(){O.on(M.default.WALLCLOCK_TIME_UPDATED,he,this),O.on(M.default.INITIAL_STREAM_SWITCH,oe,this),O.on(M.default.PLAYBACK_SEEKING,V,this),O.on(M.default.BUFFER_REPLACEMENT_STARTED,se,L),O.on(M.default.TRACK_CHANGE_RENDERED,Z,L)}()}},function H(){f=Object(y.default)(N).getInstance().getLogger(L),$()}(),L}p.__dashjs_factory_name="GapController",k.default=x.default.getSingletonFactory(p)},"./src/streaming/controllers/MediaController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/core/events/Events.js"),M=u("./src/core/EventBus.js"),T=u("./src/core/FactoryMaker.js"),D=u("./src/core/Debug.js");function d(){var O,L,m,h,g,S,C,F,p=this.context,N=Object(M.default)(p).getInstance();function P(G,j){return G&&m[j]&&m[j][G]?m[j][G].list:[]}function f(G,j){return G&&m[j]&&m[j][G]?m[j][G].current:null}function H(G){var j=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(G&&G.streamInfo){var _=G.type,U=G.streamInfo.id,K=f(_,U);if(m[U]&&m[U][_]&&!X(G,K)&&(m[U][_].current=G,m[U][_].current&&(_!==x.default.TEXT||_===x.default.TEXT&&G.isFragmented)&&N.trigger(y.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:K,newMediaInfo:G,switchMode:h.get().streaming.trackSwitchMode[_]},{streamId:U}),!j)){var te=Z(G);if(!te||!m[U][_].storeLastSettings)return;te.roles&&(te.role=te.roles[0],delete te.roles),te.accessibility&&(te.accessibility=te.accessibility[0]),te.audioChannelConfiguration&&(te.audioChannelConfiguration=te.audioChannelConfiguration[0]),S[_]=te,F.setSavedMediaSettings(_,te)}}}function $(G,j){!G||!j||(g[G]=j)}function z(G){return G?g[G]:null}function X(G,j){if(!G&&!j)return!0;if(!G||!j)return!1;var _=G.id===j.id,A=G.viewpoint===j.viewpoint,U=G.lang===j.lang,K=G.codec===j.codec,te=G.roles.toString()===j.roles.toString(),ye=G.accessibility.toString()===j.accessibility.toString(),Se=G.audioChannelConfiguration.toString()===j.audioChannelConfiguration.toString();return _&&K&&A&&U&&te&&ye&&Se}function se(){m={},S={},function he(){g={audio:null,video:null,text:null}}()}function Z(G){var j={lang:G.lang,viewpoint:G.viewpoint,roles:G.roles,accessibility:G.accessibility,audioChannelConfiguration:G.audioChannelConfiguration};return j.lang||j.viewpoint||j.role&&j.role.length>0||j.accessibility&&j.accessibility.length>0||j.audioChannelConfiguration&&j.audioChannelConfiguration.length>0?j:null}function oe(G,j){var _=arguments.length>2&&void 0!==arguments[2]&&arguments[2],A=!G.lang||j.lang.match(G.lang),U=null==G.index||j.index===G.index,K=!G.viewpoint||G.viewpoint===j.viewpoint,te=!G.role||!!j.roles.filter(function(ae){return ae===G.role})[0],ye=!G.accessibility||!!j.accessibility.filter(function(ae){return ae===G.accessibility})[0],Se=!G.audioChannelConfiguration||!!j.audioChannelConfiguration.filter(function(ae){return ae===G.audioChannelConfiguration})[0];return A&&U&&K&&(te||j.type===x.default.AUDIO&&_)&&ye&&Se}function re(G){var A,j=0,_=[];return G.forEach(function(U){(A=Math.max.apply(Math,U.bitrateList.map(function(K){return K.bandwidth})))>j?(j=A,_=[U]):A===j&&_.push(U)}),_}function ge(G){var A,j=1/0,_=[];return G.forEach(function(U){var K=U.bitrateList.reduce(function(te,ye){var Se=Math.max(1,ye.width*ye.height);return te+ye.bandwidth/Se},0);(A=K/U.bitrateList.length)<j?(j=A,_=[U]):A===j&&_.push(U)}),_}function ie(G){var A,j=0,_=[];return G.forEach(function(U){(A=U.representationCount)>j?(j=A,_=[U]):A===j&&_.push(U)}),_}function de(G,j){if(G===x.default.TEXT)return j[0];var A,_=h.get().streaming.selectionModeForInitialTrack,U=C.getCustomInitialTrackSelectionFunction();if(U&&"function"==typeof U)A=U(j);else switch(_){case x.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:A=function ue(G){var j=function ve(G){var j=0,_=[];return G.forEach(function(A){isNaN(A.selectionPriority)||(A.selectionPriority>j?(j=A.selectionPriority,_=[A]):A.selectionPriority===j&&_.push(A))}),_}(G);return j.length>1&&(j=re(j)),j.length>1&&(j=ie(j)),j}(j);break;case x.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:A=function le(G){var j=re(G);return j.length>1&&(j=ie(j)),j}(j);break;case x.default.TRACK_SELECTION_MODE_FIRST_TRACK:A=ce(j);break;case x.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:A=function ne(G){var j=ge(G);return j.length>1&&(j=re(j)),j}(j);break;case x.default.TRACK_SELECTION_MODE_WIDEST_RANGE:A=function pe(G){var j=ie(G);return j.length>1&&(j=re(G)),j}(j);break;default:L.warn("Track selection mode ".concat(_," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),A=ce(j)}return A.length>0?A[0]:j[0]}function ce(G){return G[0]}return O={setInitialMediaSettingsForType:function w(G,j){var _=S[G]||z(G),A=P(G,j.id),U=[];_||(_=F.getSavedMediaSettings(G),$(G,_)),A&&0!==A.length&&(_&&A.forEach(function(K){oe(_,K,!!S[G])&&U.push(K)}),0===U.length?H(de(G,A),!0):H(U.length>1?de(G,U):U[0]))},addTrack:function b(G){if(G){var j=G.type;if(function J(G){return G===x.default.AUDIO||G===x.default.VIDEO||G===x.default.TEXT||G===x.default.IMAGE}(j)){var _=G.streamInfo.id;m[_]||(m[_]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var A=m[_][j].list,U=0,K=A.length;U<K;++U)if(X(A[U],G))return;A.push(G)}}},getTracksFor:P,getCurrentTrackFor:f,isCurrentTrack:function I(G){if(!G)return!1;var j=G.type,_=G.streamInfo.id;return m[_]&&m[_][j]&&X(m[_][j].current,G)},setTrack:H,selectInitialTrack:de,setInitialSettings:$,getInitialSettings:z,getTracksWithHighestBitrate:re,getTracksWithHighestEfficiency:ge,getTracksWithWidestRange:ie,isTracksEqual:X,matchSettings:oe,saveTextSettingsDisabled:function q(){F.setSavedMediaSettings(x.default.TEXT,null)},setConfig:function V(G){!G||(G.domStorage&&(F=G.domStorage),G.settings&&(h=G.settings),G.customParametersModel&&(C=G.customParametersModel))},reset:se},function R(){L=Object(D.default)(p).getInstance().getLogger(O),se()}(),O}d.__dashjs_factory_name="MediaController";var v=T.default.getSingletonFactory(d);T.default.updateSingletonFactory(d.__dashjs_factory_name,v),k.default=v},"./src/streaming/controllers/MediaSourceController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js");function M(){var T,D,d,v=this.context;return T={createMediaSource:function N(){var C="WebKitMediaSource"in window;return"MediaSource"in window?D=new MediaSource:C&&(D=new WebKitMediaSource),D},attachMediaSource:function O(C){var F=window.URL.createObjectURL(D);return C.setSource(F),F},detachMediaSource:function L(C){C.setSource(null)},setDuration:function m(C){!D||"open"!==D.readyState||null===C&&isNaN(C)||D.duration!==C&&(function S(C){for(var F=C.sourceBuffers,R=0;R<F.length;R++)if(F[R].updating)return!0;return!1}(D)?setTimeout(m.bind(null,C),50):(d.info("Set MediaSource duration:"+C),D.duration=C))},setSeekable:function h(C,F){D&&"function"==typeof D.setLiveSeekableRange&&"function"==typeof D.clearLiveSeekableRange&&"open"===D.readyState&&C>=0&&C<F&&(D.clearLiveSeekableRange(),D.setLiveSeekableRange(C,F))},signalEndOfStream:function g(C){if(C&&"open"===C.readyState){for(var F=C.sourceBuffers,R=0;R<F.length;R++)if(F[R].updating||0===F[R].buffered.length)return;d.info("call to mediaSource endOfStream"),C.endOfStream()}}},function p(){d=Object(y.default)(v).getInstance().getLogger(T)}(),T}M.__dashjs_factory_name="MediaSourceController",k.default=x.default.getSingletonFactory(M)},"./src/streaming/controllers/PlaybackController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),T=u("./src/core/FactoryMaker.js"),D=u("./src/core/Debug.js"),d=u("./src/streaming/MediaPlayerEvents.js"),v=u("./src/streaming/constants/MetricsConstants.js");function N(){var m,h,g,S,C,F,R,w,b,P,f,I,H,$,z,J,X,V,se,Z,oe,he,O=this.context,L=Object(y.default)(O).getInstance();function re(){ne(),H=!1,P=0,z=0,Z=!1,J=!1,oe=!1,X=NaN,R&&(L.off(M.default.DATA_UPDATE_COMPLETED,we,m),L.off(M.default.LOADING_PROGRESS,Ut,m),L.off(M.default.MANIFEST_UPDATED,et,m),L.off(M.default.STREAMS_COMPOSED,Rt,m),L.off(d.default.PLAYBACK_ENDED,Ue,m),L.off(d.default.STREAM_INITIALIZING,Wt,m),L.off(d.default.REPRESENTATION_SWITCH,Fe,m),L.off(d.default.BUFFER_LEVEL_STATE_CHANGED,xe,m),Ie(),function rn(){R.removeEventListener("canplay",ke),R.removeEventListener("canplaythrough",Re),R.removeEventListener("play",ze),R.removeEventListener("waiting",ut),R.removeEventListener("playing",at),R.removeEventListener("pause",yt),R.removeEventListener("error",Qe),R.removeEventListener("seeking",Lt),R.removeEventListener("seeked",kt),R.removeEventListener("timeupdate",Zt),R.removeEventListener("progress",nn),R.removeEventListener("ratechange",sn),R.removeEventListener("loadedmetadata",Be),R.removeEventListener("loadeddata",Le),R.removeEventListener("stalled",It),R.removeEventListener("ended",Ce)}()),b=null,R=null,f=null,I=null}function ue(){return parseFloat((le(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)-ee()).toFixed(5))}function le(lt){var jt=lt||f;return jt.start+jt.duration}function ce(){f&&R&&R.getElement()?R.play():H=!0}function ne(){f&&R&&R.pause()}function pe(lt,jt,Me){f&&R&&lt!==(isNaN(X)?R.getTime():X)&&((V=!0===Me)||(X=lt),h.info("Requesting seek to time: "+lt+(V?" (internal)":"")),R.setCurrentTime(lt,jt))}function ee(){return f&&R?R.getTime():null}function G(){return f&&R?R.isPaused():null}function j(){return f&&R?R.isSeeking():null}function _(){return f&&R?R.isStalled():null}function A(){return f&&R?R.getPlaybackRate():null}function K(){return f&&R?R.getEnded():null}function te(){return I}function me(){var lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!G()&&I&&0!==R.getReadyState()&&!j()&&!Z){lt||(lt=g.hasVideoTrack()?x.default.VIDEO:x.default.AUDIO);var jt=ee(),Me=Te(jt,lt);!isNaN(Me)&&Me!==jt&&!j()&&(_()||se||1===R.getReadyState())&&(h.debug("UpdateCurrentTime: Seek to actual time: ".concat(Me," from currentTime: ").concat(jt)),pe(Me,!1,!1))}}function Te(lt,jt){var Me=C.getCurrentDVRInfo(jt),$e=Me?Me.range:null;return $e?lt>$e.end?Math.max($e.end-P,$e.start):lt>0&&lt+.25<$e.start&&Math.abs(lt-$e.start)<31536e4?J?Math.max($e.end-P,$e.start):$e.start:lt:NaN}function Ne(){null===b&&(b=setInterval(function(){!function st(){L.trigger(M.default.WALLCLOCK_TIME_UPDATED,{isDynamic:I,time:new Date}),te()&&(g.addDVRMetric(),G()?function ct(){var lt=Date.now();(!$||lt>$+500)&&($=lt,Zt())}():me())}()},he.get().streaming.wallclockTimeUpdateInterval))}function Ie(){clearInterval(b),b=null}function we(lt){var jt=F.convertRepresentationToRepresentationInfo(lt.currentRepresentation),Me=jt?jt.mediaInfo.streamInfo:null;null===Me||f.id!==Me.id||(f=Me)}function ke(){L.trigger(M.default.CAN_PLAY)}function Re(){L.trigger(M.default.CAN_PLAY_THROUGH)}function xe(lt){lt.streamId===g.getActiveStreamInfo().id&&(se=lt.state===v.default.BUFFER_EMPTY,he.get().streaming.buffer.setStallState&&R.setStallState(lt.mediaType,lt.state===v.default.BUFFER_EMPTY))}function ze(){h.info("Native video element event: play"),me(),Ne(),L.trigger(M.default.PLAYBACK_STARTED,{startTime:ee()})}function ut(){h.info("Native video element event: waiting"),L.trigger(M.default.PLAYBACK_WAITING,{playingTime:ee()})}function at(){h.info("Native video element event: playing"),V=!1,L.trigger(M.default.PLAYBACK_PLAYING,{playingTime:ee()})}function yt(){h.info("Native video element event: pause"),L.trigger(M.default.PLAYBACK_PAUSED,{ended:K()})}function Lt(){if(!V){var lt=ee();!isNaN(X)&&X!==lt&&(lt=X),X=NaN,h.info("Seeking to: "+lt),Ne(),L.trigger(M.default.PLAYBACK_SEEKING,{seekTime:lt,streamId:f.id})}}function kt(){h.info("Native video element event: seeked"),V=!1,L.trigger(M.default.PLAYBACK_SEEKED)}function Zt(){f&&L.trigger(M.default.PLAYBACK_TIME_UPDATED,{timeToEnd:ue(),time:ee(),streamId:f.id})}function nn(){L.trigger(M.default.PLAYBACK_PROGRESS,{streamId:f.id})}function sn(){var lt=A();h.info("Native video element event: ratechange: ",lt),L.trigger(M.default.PLAYBACK_RATE_CHANGED,{playbackRate:lt})}function Be(){h.info("Native video element event: loadedmetadata"),L.trigger(M.default.PLAYBACK_METADATA_LOADED),Ne()}function Le(){h.info("Native video element event: loadeddata"),L.trigger(M.default.PLAYBACK_LOADED_DATA)}function Ce(){h.info("Native video element event: ended"),ne(),Ie();var lt=g?g.getActiveStreamInfo():null;!lt||L.trigger(M.default.PLAYBACK_ENDED,{isLast:lt.isLast})}function Ue(lt){if(b&&lt.isLast){h.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var jt=lt.seekTime?lt.seekTime:le();R.setCurrentTime(jt),ne(),Ie()}}function Qe(lt){L.trigger(M.default.PLAYBACK_ERROR,{error:(lt.target||lt.srcElement).error})}function Ut(lt){if(!1===lt.stream&&J&&!isNaN(lt.request.duration)){var jt=1.2*lt.request.duration;jt>P&&(h.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",jt.toFixed(2)),P=jt)}}function It(lt){L.trigger(M.default.PLAYBACK_STALLED,{e:lt})}function Wt(lt){!function Tt(lt){lt&&lt.supplementalProperties&&"true"===lt.supplementalProperties[x.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&(h.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),J=!0)}(lt.mediaInfo)}function Fe(lt){var jt=g.getActiveStreamInfo();!lt||!jt||!lt.currentRepresentation||!lt.streamId||lt.streamId!==jt.id||!lt.mediaType||lt.mediaType!==x.default.VIDEO&&lt.mediaType!==x.default.AUDIO||(J=!lt.currentRepresentation.availabilityTimeComplete)&&!oe&&(oe=!0)}function et(){Z=!0}function Rt(){Z=!1}return m={initialize:function ge(lt,jt){f=lt,!0!==jt&&function ie(){(function bt(){R.addEventListener("canplay",ke),R.addEventListener("canplaythrough",Re),R.addEventListener("play",ze),R.addEventListener("waiting",ut),R.addEventListener("playing",at),R.addEventListener("pause",yt),R.addEventListener("error",Qe),R.addEventListener("seeking",Lt),R.addEventListener("seeked",kt),R.addEventListener("timeupdate",Zt),R.addEventListener("progress",nn),R.addEventListener("ratechange",sn),R.addEventListener("loadedmetadata",Be),R.addEventListener("loadeddata",Le),R.addEventListener("stalled",It),R.addEventListener("ended",Ce)})(),I=f.manifestInfo.isDynamic,se=!1,V=!1,L.on(M.default.DATA_UPDATE_COMPLETED,we,m),L.on(M.default.LOADING_PROGRESS,Ut,m),L.on(M.default.MANIFEST_UPDATED,et,m),L.on(M.default.STREAMS_COMPOSED,Rt,m),L.on(d.default.PLAYBACK_ENDED,Ue,m,{priority:y.default.EVENT_PRIORITY_HIGH}),L.on(d.default.STREAM_INITIALIZING,Wt,m),L.on(d.default.REPRESENTATION_SWITCH,Fe,m),L.on(d.default.BUFFER_LEVEL_STATE_CHANGED,xe,m),H&&(H=!1,ce())}()},setConfig:function Ee(lt){!lt||(lt.streamController&&(g=lt.streamController),lt.serviceDescriptionController&&(S=lt.serviceDescriptionController),lt.dashMetrics&&(C=lt.dashMetrics),lt.adapter&&(F=lt.adapter),lt.videoModel&&(R=lt.videoModel),lt.timelineConverter&&(w=lt.timelineConverter),lt.settings&&(he=lt.settings))},getTimeToStreamEnd:ue,getBufferLevel:function Ze(){var lt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,jt=null;return g.getActiveStreamProcessors().forEach(function(Me){if(!lt||0===lt.length||-1===lt.indexOf(Me.getType())){var $e=Me.getBufferLevel();jt=null===jt?$e:Math.min(jt,$e)}}),jt},getPlaybackStalled:function de(){return se},getTime:ee,getLowLatencyModeEnabled:function ht(){return J},getInitialCatchupModeActivated:function Ye(){return oe},getIsManifestUpdateInProgress:function Se(){return Z},getPlaybackRate:A,getPlayedRanges:function U(){return f&&R?R.getPlayedRanges():null},getEnded:K,getIsDynamic:te,getStreamController:function ye(){return g},computeAndSetLiveDelay:function _e(lt,jt){var Me,$e,mt,Et=!isNaN(lt)&&isFinite(lt)?lt:NaN,Yt=F.getSuggestedPresentationDelay(),an=S.getServiceDescriptionSettings();return Me=isNaN(he.get().streaming.delay.liveDelay)?null===he.get().streaming.delay.liveDelayFragmentCount||isNaN(he.get().streaming.delay.liveDelayFragmentCount)||isNaN(Et)?an&&!isNaN(an.liveDelay)&&an.liveDelay>0?an.liveDelay:!0===he.get().streaming.delay.useSuggestedPresentationDelay&&null!==Yt&&!isNaN(Yt)&&Yt>0?Yt:isNaN(Et)?jt&&!isNaN(jt.minBufferTime)?4*jt.minBufferTime:4*f.manifestInfo.minBufferTime:4*Et:Et*he.get().streaming.delay.liveDelayFragmentCount:he.get().streaming.delay.liveDelay,null!==(mt=F.getAvailabilityStartTime())&&(z=mt),$e=jt&&jt.dvrWindowSize>0?Math.min(Me,jt.dvrWindowSize):Me,P=$e,$e},getLiveDelay:function Y(){return P},getCurrentLiveLatency:function W(){if(!I||isNaN(z))return NaN;var lt=ee();if(isNaN(lt)||0===lt)return 0;var jt=(new Date).getTime()+1e3*w.getClientTimeOffset();return Math.max(((jt-z-1e3*lt)/1e3).toFixed(3),0)},play:ce,isPaused:G,isStalled:_,pause:ne,isSeeking:j,getStreamEndTime:le,seek:pe,reset:re,updateCurrentTime:me,getAvailabilityStartTime:function ae(){return z}},function ve(){h=Object(D.default)(O).getInstance().getLogger(m),re()}(),m}N.__dashjs_factory_name="PlaybackController",k.default=T.default.getSingletonFactory(N)},"./src/streaming/controllers/ScheduleController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/models/FragmentModel.js"),M=u("./src/core/EventBus.js"),T=u("./src/core/events/Events.js"),D=u("./src/core/FactoryMaker.js"),d=u("./src/core/Debug.js"),v=u("./src/streaming/constants/MetricsConstants.js"),p=u("./src/streaming/MediaPlayerEvents.js");function N(O){O=O||{};var f,I,H,$,z,q,J,X,V,se,Z,oe,he,L=this.context,m=Object(M.default)(L).getInstance(),h=O.dashMetrics,g=O.mediaPlayerModel,S=O.fragmentModel,C=O.abrController,F=O.playbackController,R=O.textController,w=O.type,b=O.bufferController,P=O.settings;function ue(xe){if(!b.getIsBufferingCompleted()){le();var ze=isNaN(xe)?0:xe;q=setTimeout(ne,ze)}}function le(){q&&(clearTimeout(q),q=null)}function ne(){try{if(function ee(){try{return w===x.default.TEXT&&!R.isTextEnabled()||F.isPaused()&&(!F.getStreamController().getInitialPlayback()||!F.getStreamController().getAutoPlay())&&!P.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void le();if(function G(){try{return $&&(isNaN(se)||Z||function ce(){var ze=C.getMaxAllowedIndexFor(w,I.id);return!(!isNaN(V)&&V==ze||(H.info("Top quality "+w+" index has changed from "+V+" to "+ze),V=ze,0))}()||function j(){return!w||!$||h.getCurrentBufferLevel(w)<_()}())}catch{return!1}}()){var xe=!1;he&&(xe=C.checkPlaybackQuality(w,I.id)),xe||function pe(){oe||$.quality!==se||Z?(Z?(H.debug("Switch track for "+w+", representation id = "+$.id),Z=!1):H.debug("Quality has changed, get init request for representationid = "+$.id),m.trigger(T.default.INIT_FRAGMENT_NEEDED,{representationId:$.id,sender:f},{streamId:I.id,mediaType:w}),he=!1,oe=!1):(H.debug("Media segment needed for ".concat(w," and stream id ").concat(I.id)),m.trigger(T.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:I.id,mediaType:w}),he=!0)}()}else ue(F.getLowLatencyModeEnabled()?P.get().streaming.scheduling.lowLatencyTimeout:P.get().streaming.scheduling.defaultTimeout)}catch{ue(F.getLowLatencyModeEnabled()?P.get().streaming.scheduling.lowLatencyTimeout:P.get().streaming.scheduling.defaultTimeout)}}function _(){var xe=NaN;return!w||!$||(xe=w===x.default.TEXT?function A(){try{if(R.isTextEnabled()){if(isNaN($.fragmentDuration)){var xe=h.getCurrentSchedulingInfo(v.default.SCHEDULING_INFO);return xe?xe.duration:0}return $.fragmentDuration}return 0}catch{return 0}}():w===x.default.AUDIO&&J?function U(){try{var xe=h.getCurrentBufferLevel(x.default.VIDEO);return isNaN($.fragmentDuration)?xe+1:Math.max(xe+1,$.fragmentDuration)}catch{return 0}}():function K(){try{var xe=$.mediaInfo.streamInfo;return C.isPlayingAtTopQuality(xe)?xe.manifestInfo.duration>=P.get().streaming.buffer.longFormContentDurationThreshold?P.get().streaming.buffer.bufferTimeAtTopQualityLongForm:P.get().streaming.buffer.bufferTimeAtTopQuality:g.getStableBufferTime()}catch{return g.getStableBufferTime()}}()),xe}function Se(){ae(!0)}function ae(xe){if(F&&S){var ze=S.getRequests({state:y.default.FRAGMENT_MODEL_EXECUTED,time:F.getTime(),threshold:0})[0];ze&&F.getTime()>=ze.startTime&&((!X.mediaInfo||ze.mediaInfo.type===X.mediaInfo.type&&ze.mediaInfo.id!==X.mediaInfo.id)&&xe&&m.trigger(T.default.TRACK_CHANGE_RENDERED,{mediaType:w,oldMediaInfo:X.mediaInfo,newMediaInfo:ze.mediaInfo,streamId:I.id}),(ze.quality!==X.quality||ze.adaptationIndex!==X.adaptationIndex)&&xe&&(H.debug("Quality change rendered for streamId ".concat(I.id," and type ").concat(w)),m.trigger(T.default.QUALITY_CHANGE_RENDERED,{mediaType:w,oldQuality:X.quality,newQuality:ze.quality,streamId:I.id})),X={mediaInfo:ze.mediaInfo,quality:ze.quality,adaptationIndex:ze.adaptationIndex})}}function Y(xe){H.debug("Appended bytes for ".concat(xe.mediaType," and stream id ").concat(I.id)),(isNaN(xe.index)||isNaN(se))&&(se=xe.quality,H.info("["+w+"] lastInitializedRepresentationInfo changed to "+xe.quality)),ue(0)}function W(){S.abortRequests(),le()}function _e(){P.get().streaming.scheduling.scheduleWhilePaused||ue()}function Ee(xe){h.updatePlayListTraceMetrics({playbackspeed:xe.playbackRate.toString()})}function we(){he=!0,z=0,se=NaN,X={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},V=NaN,Z=!1,oe=!1}return f={initialize:function re(xe){J=xe,m.on(T.default.BYTES_APPENDED_END_FRAGMENT,Y,f),m.on(T.default.URL_RESOLUTION_FAILED,W,f),m.on(p.default.PLAYBACK_STARTED,_e,f),m.on(p.default.PLAYBACK_RATE_CHANGED,Ee,f),m.on(p.default.PLAYBACK_TIME_UPDATED,Se,f)},getType:function ge(){return w},getStreamId:function ie(){return I.id},setCurrentRepresentation:function de(xe){$=xe},setTimeToLoadDelay:function me(xe){z=xe},getTimeToLoadDelay:function Te(){return z},setSwitchTrack:function te(xe){Z=xe},getSwitchStrack:function ye(){return Z},startScheduleTimer:ue,clearScheduleTimer:le,reset:function ke(){m.off(T.default.BYTES_APPENDED_END_FRAGMENT,Y,f),m.off(T.default.URL_RESOLUTION_FAILED,W,f),m.off(p.default.PLAYBACK_STARTED,_e,f),m.off(p.default.PLAYBACK_RATE_CHANGED,Ee,f),m.off(p.default.PLAYBACK_TIME_UPDATED,Se,f),le(),ae(!1),we(),I=null},getBufferTarget:_,getPlaybackController:function Re(){return F},setCheckPlaybackQuality:function Ne(xe){he=xe},setInitSegmentRequired:function Ie(xe){oe=xe}},function ve(){H=Object(d.default)(L).getInstance().getLogger(f),we(),I=O.streamInfo}(),f}N.__dashjs_factory_name="ScheduleController",k.default=D.default.getClassFactory(N)},"./src/streaming/controllers/ServiceDescriptionController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),M=u("./src/streaming/constants/Constants.js"),T=u("./src/dash/constants/DashConstants.js"),D=[M.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],d_VIDEO="video",d_AUDIO="audio",d_ANY="any",d_ALL="all";function v(){var N,O,L,m,h,p=this.context;function F(){O={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:NaN},minBitrate:{},maxBitrate:{},initialBitrate:{}},L=[]}function z(V,se,Z){try{O[V][se]=Z/1e3}catch(oe){m.error(oe)}}return N={getServiceDescriptionSettings:function R(){return O},getProducerReferenceTimeOffsets:function q(){return L},calculateProducerReferenceTimeOffsets:function J(V){try{var se=[];if(V&&V.length>0){var Z=[M.default.VIDEO,M.default.AUDIO,M.default.TEXT],oe=h.getAvailabilityStartTime()/1e3;V.forEach(function(he){var ve=Z.reduce(function(re,ge){return re.concat(h.getAllMediaInfoForType(he,ge))},[]).reduce(function(re,ge){return h.getProducerReferenceTimes(he,ge).forEach(function(de){var ue=h.getVoRepresentations(ge);if(ue&&ue.length>0&&ue[0].adaptation&&ue[0].segmentInfoType===T.default.SEGMENT_TEMPLATE){var le=ue[0],ne=new Date(de[T.default.WALL_CLOCK_TIME]).getTime()/1e3;re.push({id:de[T.default.ID],to:oe-(ne-(de[T.default.PRESENTATION_TIME]/le[T.default.TIMESCALE]-le[T.default.PRESENTATION_TIME_OFFSET]+he.start))})}}),re},[]);se=se.concat(ve)})}L=se}catch(he){m.error(he),L=[]}},applyServiceDescription:function w(V){if(V&&V.serviceDescriptions){var se=V.serviceDescriptions.filter(function(he){return D.includes(he.schemeIdUri)}),Z=V.serviceDescriptions.filter(function(he){return null==he.schemeIdUri}),oe=se.length>0?se[se.length-1]:Z[Z.length-1];!oe||(oe.latency&&oe.latency.target>0&&function b(V){var se;if(se=V.schemeIdUri===M.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME?function f(V){return{liveDelay:V.latency.target/1e3,maxDrift:!isNaN(V.latency.max)&&V.latency.max>V.latency.target?(V.latency.max-V.latency.target+500)/1e3:NaN,referenceId:V.latency.referenceId||NaN}}(V):function P(V){return{liveDelay:V.latency.target/1e3,maxDrift:!isNaN(V.latency.max)&&V.latency.max>V.latency.target?(V.latency.max-V.latency.target+500)/1e3:NaN,referenceId:V.latency.referenceId||NaN}}(V),L.length>0){var Z=function X(V){var Z,se=0,oe=L.filter(function(he){return he.id===V.referenceId});return 0===oe.length?(se=L.length>0?L[0].to:0,Z=L[0].id||NaN):(se=oe[0].to||0,Z=oe[0].id||NaN),{to:se,id:Z}}(se),oe=Z.to,he=Z.id;O.liveDelay=se.liveDelay-oe,O.liveCatchup.maxDrift=se.maxDrift,m.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(oe," from ProducerReferenceTime element with id ").concat(he,".\n                Live Delay: ").concat(se.liveDelay-oe,", Live catchup max drift: ").concat(se.maxDrift,"\n            "))}else O.liveDelay=se.liveDelay,O.liveCatchup.maxDrift=se.maxDrift,m.debug("Found latency properties coming from service description: Live Delay: ".concat(se.liveDelay,", Live catchup max drift: ").concat(se.maxDrift))}(oe),oe.playbackRate&&oe.playbackRate.max>1&&function I(V){var se=Math.round(1e3*(V.playbackRate.max-1))/1e3;O.liveCatchup.playbackRate=se,m.debug("Found latency properties coming from service description: Live catchup playback rate: ".concat(se))}(oe),oe.operatingBandwidth&&function $(V){if(V&&V.operatingBandwidth&&V.operatingBandwidth.mediaType&&V.operatingBandwidth.mediaType!==d_ALL){var se={};se.minBandwidth=V.operatingBandwidth.min,se.maxBandwidth=V.operatingBandwidth.max,se.targetBandwidth=V.operatingBandwidth.target;var Z=[];V.operatingBandwidth.mediaType===d_VIDEO||V.operatingBandwidth.mediaType===d_AUDIO?Z.push(V.operatingBandwidth.mediaType):V.operatingBandwidth.mediaType===d_ANY&&(Z.push(d_AUDIO),Z.push(d_VIDEO)),Z.forEach(function(oe){isNaN(se.minBandwidth)||z("minBitrate",oe,se.minBandwidth),isNaN(se.maxBandwidth)||z("maxBitrate",oe,se.maxBandwidth),isNaN(se.targetBandwidth)||z("initialBitrate",oe,se.targetBandwidth)})}}(oe))}},reset:function C(){F()},setConfig:function S(V){!V||V.adapter&&(h=V.adapter)}},function g(){m=Object(y.default)(p).getInstance().getLogger(N),F()}(),N}v.__dashjs_factory_name="ServiceDescriptionController",k.default=x.default.getSingletonFactory(v)},"./src/streaming/controllers/StreamController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/constants/MetricsConstants.js"),M=u("./src/streaming/Stream.js"),T=u("./src/streaming/ManifestUpdater.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/streaming/vo/metrics/PlayList.js"),N=u("./src/core/Debug.js"),O=u("./src/streaming/utils/InitCache.js"),L=u("./src/streaming/utils/URLUtils.js"),m=u("./src/streaming/MediaPlayerEvents.js"),h=u("./src/streaming/controllers/TimeSyncController.js"),g=u("./src/streaming/controllers/MediaSourceController.js"),S=u("./src/streaming/vo/DashJSError.js"),C=u("./src/core/errors/Errors.js"),F=u("./src/streaming/controllers/EventController.js"),R=u("./src/streaming/constants/ConformanceViolationConstants.js");function w(J){return function I(J){if(Array.isArray(J))return H(J)}(J)||function f(J){if(typeof Symbol<"u"&&Symbol.iterator in Object(J))return Array.from(J)}(J)||function P(J,X){if(J){if("string"==typeof J)return H(J,X);var V=Object.prototype.toString.call(J).slice(8,-1);if("Object"===V&&J.constructor&&(V=J.constructor.name),"Map"===V||"Set"===V)return Array.from(J);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return H(J,X)}}(J)||function b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(J,X){(null==X||X>J.length)&&(X=J.length);for(var V=0,se=new Array(X);V<X;V++)se[V]=J[V];return se}function q(){var V,se,Z,oe,he,ve,re,ge,ie,de,ue,le,ce,ne,pe,ee,G,j,_,A,U,K,te,ye,Se,ae,Y,W,_e,Ee,me,Te,Ne,Ie,we,ke,Re,xe,ze,ut,at,yt,Lt,kt,Zt,nn,J=this.context,X=Object(D.default)(J).getInstance();function Ue(){!function st(){try{var We=ge.getStreamsInfo();if(!te&&0===We.length)throw new Error("There are no periods in the MPD");te&&We.length>0&&ie.updateManifestUpdateInfo({currentTime:Ne.getTime(),buffered:Te.getBufferRange(),presentationStartTime:We[0].start,clientTimeOffset:U.getClientTimeOffset()}),K.length>0&&function Dn(We){0!==We.length?K=K.filter(function(it){var Jt=We.filter(function(hn){return hn.id===it.getId()}).length>0||it.getId()===te.getId();return Jt||(se.debug("Removing stream ".concat(it.getId())),it.reset(!0)),Jt}):se.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(We);for(var it=[],Dt=0,Jt=We.length;Dt<Jt;Dt++){var hn=We[Dt];it.push(ct(hn)),ie.addManifestUpdateStreamInfo(hn)}Promise.all(it).then(function(){te||Ze(We),X.trigger(d.default.STREAMS_COMPOSED),an()}).catch(function(Cn){throw Cn})}catch(Cn){A.error(new S.default(C.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Cn.message+" nostreamscomposed",re.getValue())),Ee=!0,zn()}}()}function Qe(){kt=!0}function ct(We){var it=De(We.id);return it?it.updateData(We):(it=Object(M.default)(J).create({manifestModel:re,mediaPlayerModel:we,dashMetrics:ie,manifestUpdater:he,adapter:ge,timelineConverter:U,capabilities:Z,capabilitiesFilter:oe,errHandler:A,baseURLController:le,segmentBaseController:ce,textController:Se,abrController:pe,playbackController:Ne,eventController:G,mediaController:ee,protectionController:ye,videoModel:Te,streamInfo:We,settings:Lt}),K.push(it),it.initialize(),Promise.resolve())}function Ze(We){jt();var it=ie.getCurrentDVRInfo().range;if(it.end<it.start){Zt&&clearTimeout(Zt);var Dt=Math.min(1e3*(-1*(it.end-it.start)+2),2147483647);return se.debug("Waiting for ".concat(Dt," ms before playback can start")),X.trigger(d.default.AST_IN_FUTURE,{delay:Dt}),void(Zt=setTimeout(function(){Ze(We)},Dt))}Lt.get().streaming.applyProducerReferenceTime&&Ie.calculateProducerReferenceTimeOffsets(We);var Jt=We[0].manifestInfo;if(Lt.get().streaming.applyServiceDescription&&Ie.applyServiceDescription(Jt),ge.getIsDynamic()){var hn=Ln(We,Jt);Ne.computeAndSetLiveDelay(hn,Jt)}var Cn=function _t(){var We;if(ge.getIsDynamic()){var it=ie.getCurrentDVRInfo();We=(it&&it.range?it.range.end:0)-Ne.getLiveDelay();var Jt=it?it.range:null;if(Jt){var hn=en(!0);if(!isNaN(hn)){se.info("Start time from URI parameters: "+hn);var Cn=Lt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;We=Math.max(Math.min(We,hn),Jt.start+Cn)}}}else{We=Gs()[0].getStreamInfo().start;var pn=en(!1);isNaN(pn)||(se.info("Start time from URI parameters: "+pn),We=Math.max(We,pn))}return We}(),xt=lt(Cn),Kr=null!==xt?xt:K[0];X.trigger(d.default.INITIAL_STREAM_SWITCH,{startTime:Cn}),ht(Kr,null,Cn),function zt(){ze||(ze=setInterval(function(){!W&&Ne.getTimeToStreamEnd()<=0&&!Ne.isSeeking()&&X.trigger(d.default.PLAYBACK_ENDED,{isLast:Vr().isLast})},200))}()}function ht(We,it,Dt){try{if(W||!We||it===We&&We.getIsActive())return;W=!0,X.trigger(d.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:it?it.getStreamInfo():null,toStreamInfo:We.getStreamInfo()});var Jt=!1;te=We,it&&(Jt=bt(We,it),it.deactivate(Jt)),Dt=isNaN(Dt)?!Jt&&it?We.getStreamInfo().start:NaN:Dt,se.info("Switch to stream ".concat(We.getId(),". Seektime is ").concat(Dt,", current playback time is ").concat(Ne.getTime(),". Seamless period switch is set to ").concat(Jt)),at=at.filter(function(hn){return hn.getId()!==te.getId()}),Ne.initialize(Vr(),!!it),Te.getElement()&&Ut(Dt,Jt)}catch{W=!1}}function Ut(We,it){var Dt;function Jt(){if(me&&"open"===me.readyState){se.debug("MediaSource is open!"),window.URL.revokeObjectURL(Dt),me.removeEventListener("sourceopen",Jt),me.removeEventListener("webkitsourceopen",Jt),Nt();var Cn=ie.getCurrentDVRInfo();de.setSeekable(Cn.range.start,Cn.range.end),It(We,it)}}function hn(){me.addEventListener("sourceopen",Jt,!1),me.addEventListener("webkitsourceopen",Jt,!1),Dt=de.attachMediaSource(Te),se.debug("MediaSource attached to element.  Waiting on open...")}me?it?It(We,it):(de.detachMediaSource(Te),hn()):(me=de.createMediaSource(),hn())}function It(We,it){te.activate(me,it?ut:void 0,We).then(function(Dt){if(Dt){var Jt=Object.keys(Dt);Jt.length>0&&Dt[Jt[0]].getBuffer().changeType&&(yt=!0),ut=Dt}isNaN(We)||(X.trigger(d.default.SEEK_TARGET,{time:We},{streamId:te.getId()}),Ne.seek(We,!1,!0),te.startScheduleControllers()),W=!1,X.trigger(d.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Vr()})})}function Wt(We){var it=Ne.getTime(),Dt=We.seekTime,Jt=lt(Dt);Jt&&Jt!==te?Jt&&Jt!==te&&(Fe(it,Dt),function Rt(We,it){var Dt=We&&!isNaN(We.seekTime)?We.seekTime:NaN,hn=te.getProcessors().map(function(Cn){return Cn.prepareOuterPeriodPlaybackSeeking(We)});Promise.all(hn).then(function(){ht(it,te,Dt)}).catch(function(Cn){A.error(Cn)})}(We,Jt)):(Fe(it,Dt),function et(We){te.getProcessors().forEach(function(Dt){return Dt.prepareInnerPeriodPlaybackSeeking(We)}),Gn(p.PlayListTrace.USER_REQUEST_STOP_REASON)}(We)),tn(p.PlayList.SEEK_START_REASON)}function Fe(We,it){Ye()}function Ye(){at&&at.length>0&&(at.forEach(function(We){We.deactivate(!0)}),at=[])}function Tt(We){We.newMediaInfo.streamInfo.id===te.getId()&&(Ye(),te.prepareTrackChange(We))}function bt(We,it){try{return Lt.get().streaming.buffer.reuseExistingSourceBuffers&&(it.isProtectionCompatible(We)||kt)&&(yt||it.isMediaCodecCompatible(We,it))}catch{return!1}}function rn(We){var it=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;me&&!We.getPreloaded()&&bt(We,it)&&We.startPreloading(me,ut).then(function(){at.push(We)})}function lt(We){if(isNaN(We))return null;for(var it=K.length,Dt=0;Dt<it;Dt++){var Jt=K[Dt];if(We<parseFloat((Jt.getStartTime()+Jt.getDuration()).toFixed(5)))return Jt}return null}function jt(){try{var We=ge.getIsDynamic(),Dt=ge.getStreamsInfo()[0].manifestInfo,Jt=Ne.getTime(),hn=U.calcTimeShiftBufferWindow(K,We),Cn=ot();if(typeof hn.start>"u"||typeof hn.end>"u")return;Cn&&0!==Cn.length?Cn.forEach(function(xt){ie.addDVRInfo(xt.getType(),Jt,Dt,hn)}):ie.addDVRInfo(x.default.VIDEO,Jt,Dt,hn)}catch{}}function Me(We){if(xe&&Y){var it=we.getInitialBufferLevel(),Dt=[x.default.TEXT];(isNaN(it)||it<=Ne.getBufferLevel(Dt)||ge.getIsDynamic()&&it>Ne.getLiveDelay())&&(xe=!1,tn(p.PlayList.INITIAL_PLAYOUT_START_REASON),Ne.play())}We&&We.mediaType&&ie.addBufferLevel(We.mediaType,new Date,1e3*We.bufferLevel)}function $e(We){We.streamInfo.id===te.getId()&&We.reason&&We.reason.forceReplace&&Ye(),De(We.streamInfo.id).prepareQualityChange(We)}function mt(){if(ge.getIsDynamic()&&0!==Ne.getLiveDelay()){var We=ge.getStreamsInfo();if(We.length>0){var it=We[0].manifestInfo,Dt=Ln(We,it);Ne.computeAndSetLiveDelay(Dt,it)}}}function Je(){if(Sn()){var We=Te.getPlaybackQuality();We&&ie.addDroppedFrames(We)}}function tt(){se.debug("[onPlaybackStarted]"),!xe&&Re&&tn(p.PlayList.RESUME_FROM_PAUSE_START_REASON),xe&&(xe=!1),Re=!1}function Et(We){se.debug("[onPlaybackPaused]"),We.ended||(Re=!0,Gn(p.PlayListTrace.USER_REQUEST_STOP_REASON))}function Yt(We){se.debug("Stream with id ".concat(We.streamInfo.id," finished buffering")),me&&We.streamInfo.isLast?(se.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),de.signalEndOfStream(me)):an()}function an(){if(te&&te.getHasFinishedBuffering())for(var We=function ft(){var We=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var it=We||te||null;if(it){var Dt=it.getStreamInfo();return K.filter(function(Jt){var hn=Jt.getStreamInfo();return hn.start>Dt.start&&Dt.id!==hn.id})}}catch{return[]}}(te),it=0;it<We.length;){var Dt=We[it],Jt=0===it?te:We[it-1];!Dt.getPreloaded()&&Jt.getHasFinishedBuffering()&&me&&rn(Dt,Jt),it+=1}}function Vt(){ze&&(clearInterval(ze),ze=null)}function ot(){return te?te.getProcessors():[]}function Ve(We){if(te&&!te.getIsEndedEventSignaled()){te.setIsEndedEventSignaled(!0);var it=function nt(){var it=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||te||null;if(!it)return null;for(var Dt=it.getStreamInfo(),Jt=Dt.start,hn=0,Cn=-1,xt=NaN;hn<K.length;){var pn=K[hn].getStreamInfo(),rr=pn.start-Jt;rr>0&&(isNaN(xt)||rr<xt)&&Dt.id!==pn.id&&(xt=rr,Cn=hn),hn+=1}return Cn>=0?K[Cn]:null}();it?(se.debug("StreamController onEnded, found next stream with id ".concat(it.getStreamInfo().id,". Switching from ").concat(te.getStreamInfo().id," to ").concat(it.getStreamInfo().id)),ht(it,te,NaN)):(se.debug("StreamController no next stream found"),te.setIsEndedEventSignaled(!1)),Gn(it?p.PlayListTrace.END_OF_PERIOD_STOP_REASON:p.PlayListTrace.END_OF_CONTENT_STOP_REASON)}We&&We.isLast&&Vt()}function Nt(We){var it=We||Vr().manifestInfo.duration;de.setDuration(it)}function en(We){var it=ne.getURIFragmentData();if(!it||!it.t)return NaN;var Jt=Gs()[0].getStreamInfo().start;it.t=it.t.split(",")[0];var hn=-1!==it.t.indexOf("posix:")?"now"===it.t.substring(6)?Date.now()/1e3:parseInt(it.t.substring(6)):NaN;return We&&!isNaN(hn)?hn-Ne.getAvailabilityStartTime()/1e3:parseInt(it.t)+Jt}function Ln(We,it){try{var Dt=NaN;if(it&&!isNaN(it.maxFragmentDuration)&&isFinite(it.maxFragmentDuration))return it.maxFragmentDuration;if(We&&1===We.length){var Jt=We[0],Cn=[x.default.VIDEO,x.default.AUDIO,x.default.TEXT].reduce(function(xt,Kr){var pn=ge.getMediaInfoForType(Jt,Kr);return pn&&!1!==pn.isFragmented&&xt.push(pn),xt},[]).reduce(function(xt,Kr){var pn=ge.getVoRepresentations(Kr);return pn&&pn.length>0&&pn.forEach(function(rr){rr&&xt.push(rr)}),xt},[]).reduce(function(xt,Kr){var pn=ge.convertRepresentationToRepresentationInfo(Kr);return pn&&pn.fragmentDuration&&!isNaN(pn.fragmentDuration)&&xt.push(pn.fragmentDuration),xt},[]);Dt=Math.max.apply(Math,w(Cn))}return isFinite(Dt)?Dt:NaN}catch{return NaN}}function Ht(We){if(We.error)Ee=!0,zn();else{se.info("Manifest updated... updating data system wide.");var it=We.manifest;ge.updatePeriods(it);var Dt=ge.getUTCTimingSources();ge.getIsDynamic()&&(!Dt||0===Dt.length)&&X.trigger(m.default.CONFORMANCE_VIOLATION,{level:R.default.LEVELS.WARNING,event:R.default.EVENTS.NO_UTC_TIMING_ELEMENT});var Jt=ge.getIsDynamic()?Dt.concat(ke.getUTCTimingSources()):Dt,hn=_.isHTTPS(We.manifest.url);Jt.forEach(function(Cn){Cn.value.replace(/.*?:\/\//g,"")===Lt.get().streaming.utcSynchronization.defaultTimingSource.value.replace(/.*?:\/\//g,"")&&(Cn.value=Cn.value.replace(hn?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),hn?"https://":"http://"),se.debug("Matching default timing source protocol to manifest protocol: ",Cn.value))}),oe.filterUnsupportedFeatures(it).then(function(){le.initialize(it),ue.attemptSync(Jt,ge.getIsDynamic())})}}function Sn(){return!!te&&te.getHasVideoTrack()}function mr(){return!!te&&te.getHasAudioTrack()}function Gn(We,it){it=it||new Date,ot().forEach(function(Dt){Dt.finalisePlayList(it,We)}),ie.addPlayList()}function tn(We){ie.createPlaylistMetrics(1e3*Ne.getTime(),We)}function yn(We){if(We.error){var it="";switch(We.error.code){case 1:it="MEDIA_ERR_ABORTED";break;case 2:it="MEDIA_ERR_NETWORK";break;case 3:it="MEDIA_ERR_DECODE",nn.counts.mediaErrorDecode+=1;break;case 4:it="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:it="MEDIA_ERR_ENCRYPTED";break;default:it="UNKNOWN"}if("MEDIA_ERR_DECODE"===it&&Lt.get().errors.recoverAttempts.mediaErrorDecode>=nn.counts.mediaErrorDecode)return void function Si(){se.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var We=Ne.getTime();te.deactivate(!1),se.warn("MediaSource has been resetted. Resuming playback from time ".concat(We)),Ut(We,!1)}();_e=!0,We.error.message&&(it+=" ("+We.error.message+")"),We.error.msExtendedCode&&(it+=" (0x"+(We.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),se.fatal("Video Element Error: "+it),We.error&&se.fatal(We.error),A.error(new S.default(We.error.code,it)),zn()}}function Vr(){return te?te.getStreamInfo():null}function De(We){for(var it=0,Dt=K.length;it<Dt;it++)if(K[it].getId()===We)return K[it];return null}function Pe(){if(!(ve&&ve.hasOwnProperty("load")&&U&&U.hasOwnProperty("initialize")&&U.hasOwnProperty("reset")&&U.hasOwnProperty("getClientTimeOffset")&&re&&A&&ie&&Ne))throw new Error(x.default.MISSING_CONFIG_ERROR)}function Gt(We){isNaN(We.newDuration)||Nt(We.newDuration)}function Qn(){K=[],ye=null,W=!1,te=null,_e=!1,Ee=!1,xe=!0,Re=!1,Y=!0,ze=null,kt=!1,yt=!1,at=[],Zt=null,nn={counts:{mediaErrorDecode:0}}}function zn(){Pe(),ue.reset(),Gn(_e||Ee?p.PlayListTrace.FAILURE_STOP_REASON:p.PlayListTrace.USER_REQUEST_STOP_REASON);for(var We=0,it=K?K.length:0;We<it;We++)K[We].reset(_e);(function Ce(){X.off(m.default.PLAYBACK_TIME_UPDATED,Je,V),X.off(m.default.PLAYBACK_SEEKING,Wt,V),X.off(m.default.PLAYBACK_ERROR,yn,V),X.off(m.default.PLAYBACK_STARTED,tt,V),X.off(m.default.PLAYBACK_PAUSED,Et,V),X.off(m.default.PLAYBACK_ENDED,Ve,V),X.off(m.default.METRIC_ADDED,Cr,V),X.off(m.default.MANIFEST_VALIDITY_CHANGED,Gt,V),X.off(m.default.BUFFER_LEVEL_UPDATED,Me,V),X.off(m.default.QUALITY_CHANGE_REQUESTED,$e,V),d.default.KEY_SESSION_UPDATED&&X.off(d.default.KEY_SESSION_UPDATED,Qe,V),X.off(d.default.MANIFEST_UPDATED,Ht,V),X.off(d.default.STREAM_BUFFERING_COMPLETED,Yt,V),X.off(d.default.TIME_SYNCHRONIZATION_COMPLETED,Ue,V),X.off(d.default.CURRENT_TRACK_CHANGED,Tt,V),X.off(d.default.SETTING_UPDATED_LIVE_DELAY,mt,V),X.off(d.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,mt,V)})(),le.reset(),he.reset(),G.reset(),ie.clearAllCurrentMetrics(),re.setValue(null),ve.reset(),U.reset(),j.reset(),me&&(de.detachMediaSource(Te),me=null),Te=null,ye&&(ye=null,ae=null,re.getValue()&&X.trigger(d.default.PROTECTION_DESTROYED,{data:re.getValue().url})),Vt(),X.trigger(d.default.STREAM_TEARDOWN_COMPLETE),Qn()}function Cr(We){if(We.metric===y.default.DVR_INFO){var it=mr()?x.default.AUDIO:x.default.VIDEO;We.mediaType===it&&de.setSeekable(We.value.range.start,We.value.range.end)}}function Gs(){return K}return V={initialize:function Be(We,it){Pe(),Y=We,ae=it,U.initialize(),(he=Object(T.default)(J).create()).setConfig({manifestModel:re,adapter:ge,manifestLoader:ve,errHandler:A,settings:Lt}),he.initialize(),(G=Object(F.default)(J).getInstance()).setConfig({manifestUpdater:he,playbackController:Ne,settings:Lt}),G.start(),ue.setConfig({dashMetrics:ie,baseURLController:le,errHandler:A,settings:Lt}),ue.initialize(),ye&&(X.trigger(d.default.PROTECTION_CREATED,{controller:ye}),ye.setMediaElement(Te.getElement()),ae&&ye.setProtectionData(ae)),function Le(){X.on(m.default.PLAYBACK_TIME_UPDATED,Je,V),X.on(m.default.PLAYBACK_SEEKING,Wt,V),X.on(m.default.PLAYBACK_ERROR,yn,V),X.on(m.default.PLAYBACK_STARTED,tt,V),X.on(m.default.PLAYBACK_PAUSED,Et,V),X.on(m.default.PLAYBACK_ENDED,Ve,V),X.on(m.default.METRIC_ADDED,Cr,V),X.on(m.default.MANIFEST_VALIDITY_CHANGED,Gt,V),X.on(m.default.BUFFER_LEVEL_UPDATED,Me,V),X.on(m.default.QUALITY_CHANGE_REQUESTED,$e,V),d.default.KEY_SESSION_UPDATED&&X.on(d.default.KEY_SESSION_UPDATED,Qe,V),X.on(d.default.MANIFEST_UPDATED,Ht,V),X.on(d.default.STREAM_BUFFERING_COMPLETED,Yt,V),X.on(d.default.TIME_SYNCHRONIZATION_COMPLETED,Ue,V),X.on(d.default.CURRENT_TRACK_CHANGED,Tt,V),X.on(d.default.SETTING_UPDATED_LIVE_DELAY,mt,V),X.on(d.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,mt,V)}()},getActiveStreamInfo:Vr,addDVRMetric:jt,hasVideoTrack:Sn,hasAudioTrack:mr,getStreamById:De,getStreamForTime:lt,getTimeRelativeToStreamId:function qe(We,it){for(var Dt=null,Jt=0,hn=0,Cn=null,xt=0;xt<K.length;xt++){if(hn=(Dt=K[xt]).getStartTime(),Cn=Dt.getDuration(),Number.isFinite(hn)&&(Jt=hn),Dt.getId()===it)return We-Jt;Number.isFinite(Cn)&&(Jt+=Cn)}return null},load:function rt(We){Pe(),ve.load(We)},loadWithManifest:function St(We){(function He(){if(!he||!he.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),he.setManifest(We)},getActiveStreamProcessors:ot,setConfig:function _n(We){!We||(We.capabilities&&(Z=We.capabilities),We.capabilitiesFilter&&(oe=We.capabilitiesFilter),We.manifestLoader&&(ve=We.manifestLoader),We.manifestModel&&(re=We.manifestModel),We.mediaPlayerModel&&(we=We.mediaPlayerModel),We.customParametersModel&&(ke=We.customParametersModel),We.protectionController&&(ye=We.protectionController),We.adapter&&(ge=We.adapter),We.dashMetrics&&(ie=We.dashMetrics),We.errHandler&&(A=We.errHandler),We.timelineConverter&&(U=We.timelineConverter),We.videoModel&&(Te=We.videoModel),We.playbackController&&(Ne=We.playbackController),We.serviceDescriptionController&&(Ie=We.serviceDescriptionController),We.textController&&(Se=We.textController),We.abrController&&(pe=We.abrController),We.mediaController&&(ee=We.mediaController),We.settings&&(Lt=We.settings),We.baseURLController&&(le=We.baseURLController),We.uriFragmentModel&&(ne=We.uriFragmentModel),We.segmentBaseController&&(ce=We.segmentBaseController))},setProtectionData:function $n(We){ae=We,ye&&ye.setProtectionData(ae)},getIsStreamSwitchInProgress:function Ai(){return W},switchToVideoElement:function Mt(We){te&&(Ne.initialize(Vr()),Ut(We,!1))},getHasMediaOrInitialisationError:function fi(){return _e||Ee},getStreams:Gs,getActiveStream:function Bt(){return te},getInitialPlayback:function Ke(){return xe},getAutoPlay:function wt(){return Y},reset:zn},function sn(){se=Object(N.default)(J).getInstance().getLogger(V),ue=Object(h.default)(J).getInstance(),de=Object(g.default)(J).getInstance(),j=Object(O.default)(J).getInstance(),_=Object(L.default)(J).getInstance(),Qn()}(),V}q.__dashjs_factory_name="StreamController",k.default=v.default.getSingletonFactory(q)},"./src/streaming/controllers/TimeSyncController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/vo/DashJSError.js"),y=u("./src/streaming/vo/metrics/HTTPRequest.js"),M=u("./src/core/EventBus.js"),T=u("./src/core/events/Events.js"),D=u("./src/core/errors/Errors.js"),d=u("./src/core/FactoryMaker.js"),v=u("./src/core/Debug.js"),p=u("./src/streaming/utils/URLUtils.js");function F(){var f,I,H,$,z,q,J,X,V,se,Z,oe,he,ve,re,ge,w=this.context,b=Object(M.default)(w).getInstance(),P=Object(p.default)(w).getInstance();function ue(){X=[],V=[],se=null,Z=null,he=null,oe=NaN,H=!1,$=!1,ve=z.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function ne(){!z.get().streaming.utcSynchronization.enabled||H||$||!he||!he.value||!he.schemeIdUri||isNaN(oe)||isNaN(z.get().streaming.utcSynchronization.backgroundAttempts)||Z&&(Date.now()-Z)/1e3<30||(X=[],$=!0,pe(isNaN(z.get().streaming.utcSynchronization.backgroundAttempts)?2:z.get().streaming.utcSynchronization.backgroundAttempts))}function pe(Ie){try{if(Ie<=0)return void me();var we=Date.now();q[he.schemeIdUri](he.value,function(ke){var Re=Date.now(),xe=G(we,Re,ke);X.push(xe),pe(Ie-1)},function(){me()})}catch{me()}}function ee(){var we=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||0;if(!V||0===V.length||we>=V.length)_();else{var ke=V[we];if(ke)if(q.hasOwnProperty(ke.schemeIdUri)){var Re=(new Date).getTime();q[ke.schemeIdUri](ke.value,function(xe){var ze=(new Date).getTime(),ut=G(Re,ze,xe);he=ke,_(ut)},function(){ee(we+1)})}else ee(we+1);else _()}}function G(Ie,we,ke){return ke-(we-(we-Ie)/2)}function _(){var Ie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,we=isNaN(Ie);we&&z.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?W():_e(we,Ie)}function U(Ie){var we=Date.parse(Ie);return isNaN(we)&&(we=function A(Ie){var ze,ut,at=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(Ie);return ze=Date.UTC(parseInt(at[1],10),parseInt(at[2],10)-1,parseInt(at[3],10),parseInt(at[4],10),parseInt(at[5],10),at[6]&&(parseInt(at[6],10)||0),at[7]&&1e3*parseFloat(at[7])||0),at[9]&&at[10]&&(ut=60*parseInt(at[9],10)+parseInt(at[10],10),ze+=("+"===at[8]?-1:1)*ut*60*1e3),new Date(ze).getTime()}(Ie)),we}function K(Ie){return Date.parse(Ie)}function te(Ie){return Date.parse(Ie)}function ye(Ie,we,ke){ke()}function Se(Ie,we,ke){var Re=U(Ie);isNaN(Re)?ke():we(Re)}function ae(Ie,we,ke,Re,xe){var ze,ut,at=!1,yt=new XMLHttpRequest,Lt=xe?y.HTTPRequest.HEAD:y.HTTPRequest.GET,kt=we.match(/\S+/g);if(we=kt.shift(),ze=function(){at||(at=!0,kt.length?ae(Ie,kt.join(" "),ke,Re,xe):Re())},ut=function(){var sn,Be;200===yt.status&&(sn=xe?yt.getResponseHeader("Date"):yt.response,Be=Ie(sn),isNaN(Be)||(ke(Be),at=!0))},P.isRelative(we)){var Zt=ge.resolve();Zt&&(we=P.resolve(we,Zt.url))}yt.open(Lt,we),yt.timeout=5e3,yt.onload=ut,yt.onloadend=ze,yt.send()}function Y(Ie,we,ke){ae(te,Ie,we,ke,!0)}function W(){var Ie=J.getLatestMPDRequestHeaderValueByID("Date"),we=null!==Ie?new Date(Ie).getTime():Number.NaN;isNaN(we)?_e(!0):_e(!1,we-Date.now())}function _e(Ie,we){if(!isNaN(oe)&&!isNaN(we)&&!Ie&&function Ee(Ie){try{var ut,we=Te(Ie),ke=isNaN(ve)?30:ve,Re=isNaN(z.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:z.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,xe=isNaN(z.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:z.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,ze=isNaN(z.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:z.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;we?(ut=Math.min(ke*Re,xe),I.debug("Increasing timeBetweenSyncAttempts to ".concat(ut))):(ut=Math.max(ke/Re,ze),I.debug("Decreasing timeBetweenSyncAttempts to ".concat(ut))),ve=ut}catch{}}(we),!Ie&&!isNaN(we)){se=Date.now(),H=!1;var ke=isNaN(oe);oe=we,ke&&ne(),I.debug("Completed UTC sync. Setting client - server offset to ".concat(we))}Ie&&(he=null,H=!1,re.error(new x.default(D.default.TIME_SYNC_FAILED_ERROR_CODE,D.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),b.trigger(T.default.UPDATE_TIME_SYNC_OFFSET,{offset:we}),b.trigger(T.default.TIME_SYNCHRONIZATION_COMPLETED)}function me(){if(X&&0!==X.length){var Ie=X.reduce(function(we,ke){return we+ke},0)/X.length;Te(Ie)?I.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(I.debug("Completed background UTC sync. Setting client - server offset to ".concat(Ie)),b.trigger(T.default.UPDATE_TIME_SYNC_OFFSET,{offset:oe=Ie})),$=!1,Z=Date.now()}}function Te(Ie){try{if(isNaN(oe))return!0;var we=z.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(z.get().streaming.utcSynchronization.maximumAllowedDrift)?z.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Ie>=oe-we&&Ie<=oe+we}catch{return!0}}return f={initialize:function le(){ue(),q={"urn:mpeg:dash:utc:http-head:2014":Y,"urn:mpeg:dash:utc:http-xsdate:2014":ae.bind(null,U),"urn:mpeg:dash:utc:http-iso:2014":ae.bind(null,K),"urn:mpeg:dash:utc:direct:2014":Se,"urn:mpeg:dash:utc:http-head:2012":Y,"urn:mpeg:dash:utc:http-xsdate:2012":ae.bind(null,U),"urn:mpeg:dash:utc:http-iso:2012":ae.bind(null,K),"urn:mpeg:dash:utc:direct:2012":Se,"urn:mpeg:dash:utc:http-ntp:2014":ye,"urn:mpeg:dash:utc:ntp:2014":ye,"urn:mpeg:dash:utc:sntp:2014":ye}},attemptSync:function ce(Ie,we){if(V=Ie,!H){if(!function j(Ie){try{if(!Ie||!z.get().streaming.utcSynchronization.enabled)return!1;var we=isNaN(ve)?30:ve;return!(se&&we&&!isNaN(we))||(Date.now()-se)/1e3>=we}catch{return!0}}(we))return void b.trigger(T.default.TIME_SYNCHRONIZATION_COMPLETED);H=!0,ee()}},setConfig:function de(Ie){!Ie||(Ie.dashMetrics&&(J=Ie.dashMetrics),Ie.baseURLController&&(ge=Ie.baseURLController),Ie.errHandler&&(re=Ie.errHandler),Ie.settings&&(z=Ie.settings))},reset:function Ne(){ue(),b.off(T.default.ATTEMPT_BACKGROUND_SYNC,ne,f)}},function ie(){I=Object(v.default)(w).getInstance().getLogger(f),b.on(T.default.ATTEMPT_BACKGROUND_SYNC,ne,f)}(),f}F.__dashjs_factory_name="TimeSyncController";var R=d.default.getSingletonFactory(F);R.HTTP_TIMEOUT_MS=5e3,d.default.updateSingletonFactory(F.__dashjs_factory_name,R),k.default=R},"./src/streaming/controllers/XlinkController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/XlinkLoader.js"),y=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),T=u("./src/core/FactoryMaker.js"),D=u("./externals/xml2json.js"),d=u("./src/streaming/utils/URLUtils.js"),v=u("./src/dash/constants/DashConstants.js"),p="onLoad";function L(m){m=m||{};var C,F,R,w,b,P,h=this.context,g=Object(y.default)(h).getInstance(),S=Object(d.default)(h).getInstance();function q(ve,re,ge){var de,ue,ie={};ie.elements=ve,ie.type=re,ie.resolveType=ge,0===ie.elements.length&&X(ie);for(var le=0;le<ie.elements.length;le++)ue=S.isHTTPURL((de=ie.elements[le]).url)?de.url:de.originalContent.BaseURL+de.url,P.load(ue,de,ie)}function J(ve){var re,ge,ue="";if(ge=ve.resolveObject,(re=ve.element).resolvedContent){var le=0;0===re.resolvedContent.indexOf("<?xml")&&(le=re.resolvedContent.indexOf("?>")+2),ue=re.resolvedContent.substr(0,le)+"<response>"+re.resolvedContent.substr(le)+"</response>",re.resolvedContent=b.xml_str2json(ue)}(function oe(ve){var re;for(re=0;re<ve.elements.length;re++)if(!1===ve.elements[re].resolved)return!1;return!0})(ge)&&X(ge)}function X(ve){var ge,ie,re=[];if(function se(ve){var ge,ie,ue,le,ce,re=[];for(ue=ve.elements.length-1;ue>=0;ue--){if(ie=(ge=ve.elements[ue]).type+"_asArray",ge.resolvedContent){if(ge.resolvedContent)for(le=0;le<ge.resolvedContent[ie].length;le++)re.push(ge.resolvedContent[ie][le])}else delete ge.originalContent["xlink:actuate"],delete ge.originalContent["xlink:href"],re.push(ge.originalContent);for(ge.parentElement[ie].splice(ge.index,1),ce=0;ce<re.length;ce++)ge.parentElement[ie].splice(ge.index+ce,0,re[ce]);re=[]}ve.elements.length>0&&R.run(w)}(ve),"onActuate"===ve.resolveType&&g.trigger(M.default.XLINK_READY,{manifest:w}),ve.resolveType===p)switch(ve.type){case v.default.PERIOD:for(ge=0;ge<w[v.default.PERIOD+"_asArray"].length;ge++)(ie=w[v.default.PERIOD+"_asArray"][ge]).hasOwnProperty(v.default.ADAPTATION_SET+"_asArray")&&(re=re.concat(V(ie[v.default.ADAPTATION_SET+"_asArray"],ie,v.default.ADAPTATION_SET,p))),ie.hasOwnProperty(v.default.EVENT_STREAM+"_asArray")&&(re=re.concat(V(ie[v.default.EVENT_STREAM+"_asArray"],ie,v.default.EVENT_STREAM,p)));q(re,v.default.ADAPTATION_SET,p);break;case v.default.ADAPTATION_SET:g.trigger(M.default.XLINK_READY,{manifest:w})}}function V(ve,re,ge,ie){var ue,le,ce,de=[];for(le=ve.length-1;le>=0;le--)(ue=ve[le]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===ue["xlink:href"]&&ve.splice(le,1);for(le=0;le<ve.length;le++)(ue=ve[le]).hasOwnProperty("xlink:href")&&ue.hasOwnProperty("xlink:actuate")&&ue["xlink:actuate"]===ie&&(ce=Z(ue["xlink:href"],re,ge,le,ie,ue),de.push(ce));return de}function Z(ve,re,ge,ie,de,ue){return{url:ve,parentElement:re,type:ge,index:ie,resolveType:de,originalContent:ue,resolvedContent:null,resolved:!1}}return C={resolveManifestOnLoad:function $(ve){b=new D.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:F}),(w=ve).Period_asArray?q(V(w.Period_asArray,w,v.default.PERIOD,p),v.default.PERIOD,p):g.trigger(M.default.XLINK_READY,{manifest:w})},setMatchers:function I(ve){ve&&(F=ve)},setIron:function H(ve){ve&&(R=ve)},reset:function z(){g.off(M.default.XLINK_ELEMENT_LOADED,J,C),P&&(P.reset(),P=null)}},function f(){g.on(M.default.XLINK_ELEMENT_LOADED,J,C),P=Object(x.default)(h).create({errHandler:m.errHandler,dashMetrics:m.dashMetrics,mediaPlayerModel:m.mediaPlayerModel,requestModifier:m.requestModifier,settings:m.settings})}(),C}L.__dashjs_factory_name="XlinkController",k.default=T.default.getClassFactory(L)},"./src/streaming/metrics/MetricsReporting.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),y=u("./src/streaming/metrics/MetricsReportingEvents.js"),M=u("./src/streaming/metrics/controllers/MetricsCollectionController.js"),T=u("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),D=u("./src/streaming/metrics/reporting/ReportingFactory.js");function d(){var p=this.context;return{createMetricsReporting:function L(g){return Object(x.default)(p).getInstance({eventBus:g.eventBus,dashMetrics:g.dashMetrics,metricsConstants:g.metricsConstants,events:g.events}).initialise(),Object(M.default)(p).create(g)},getReportingFactory:function m(){return Object(D.default)(p).getInstance()},getMetricsHandlerFactory:function h(){return Object(T.default)(p).getInstance()}}}d.__dashjs_factory_name="MetricsReporting";var v=dashjs.FactoryMaker.getClassFactory(d);v.events=y.default,dashjs.FactoryMaker.updateClassFactory(d.__dashjs_factory_name,v),k.default=v},"./src/streaming/metrics/MetricsReportingEvents.js":function(Oe,k,u){"use strict";function y(h){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function T(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function d(h){var g=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=O(h);if(g){var R=O(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return v(this,F)}}function v(h,g){return!g||"object"!==y(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function O(h){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){T(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",C.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",C.CMCD_DATA_GENERATED="cmcdDataGenerated",C}return S}(u("./src/core/events/EventsBase.js").default));k.default=m},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/controllers/MetricsController.js"),y=u("./src/streaming/metrics/utils/ManifestParsing.js"),M=u("./src/streaming/metrics/MetricsReportingEvents.js");function T(D){var d,v={},p=this.context,N=(D=D||{}).eventBus,O=D.events;function L(S){if(!S.error){var C=Object.keys(v);Object(y.default)(p).getInstance({adapter:D.adapter,constants:D.constants}).getMetrics(S.manifest).forEach(function(R){var w=JSON.stringify(R);if(v.hasOwnProperty(w))C.splice(w,1);else try{var b=Object(x.default)(p).create(D);b.initialize(R),v[w]=b}catch{}}),C.forEach(function(R){v[R].reset(),delete v[R]}),N.trigger(M.default.METRICS_INITIALISATION_COMPLETE)}}function m(){Object.keys(v).forEach(function(S){v[S].reset()}),v={}}return d={reset:function g(){N.off(O.MANIFEST_UPDATED,L,d),N.off(O.STREAM_TEARDOWN_COMPLETE,m,d)}},function h(){N.on(O.MANIFEST_UPDATED,L,d),N.on(O.STREAM_TEARDOWN_COMPLETE,m,d)}(),d}T.__dashjs_factory_name="MetricsCollectionController",k.default=dashjs.FactoryMaker.getClassFactory(T)},"./src/streaming/metrics/controllers/MetricsController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/controllers/RangeController.js"),y=u("./src/streaming/metrics/controllers/ReportingController.js"),M=u("./src/streaming/metrics/controllers/MetricsHandlersController.js");function T(D){D=D||{};var d,v,p,O=this.context;function m(){d&&d.reset(),v&&v.reset(),p&&p.reset()}return{initialize:function L(h){try{(p=Object(x.default)(O).create({mediaElement:D.mediaElement})).initialize(h.Range),(v=Object(y.default)(O).create({debug:D.debug,metricsConstants:D.metricsConstants,mediaPlayerModel:D.mediaPlayerModel})).initialize(h.Reporting,p),(d=Object(M.default)(O).create({debug:D.debug,eventBus:D.eventBus,metricsConstants:D.metricsConstants,events:D.events})).initialize(h.metrics,v)}catch(g){throw m(),g}},reset:m}}T.__dashjs_factory_name="MetricsController",k.default=dashjs.FactoryMaker.getClassFactory(T)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function y(M){var D,T=[],d=this.context,v=(M=M||{}).eventBus,p=M.events,N=Object(x.default)(d).getInstance({debug:M.debug,eventBus:M.eventBus,metricsConstants:M.metricsConstants});function O(h){T.forEach(function(g){g.handleNewMetric(h.metric,h.value,h.mediaType)})}return D={initialize:function L(h,g){h.split(",").forEach(function(S,C,F){var R;if(-1!==S.indexOf("(")&&-1===S.indexOf(")")){var w=F[C+1];w&&-1===w.indexOf("(")&&-1!==w.indexOf(")")&&(S+=","+w,delete F[C+1])}(R=N.create(S,g))&&T.push(R)}),v.on(p.METRIC_ADDED,O,D),v.on(p.METRIC_UPDATED,O,D)},reset:function m(){v.off(p.METRIC_ADDED,O,D),v.off(p.METRIC_UPDATED,O,D),T.forEach(function(h){return h.reset()}),T=[]}}}y.__dashjs_factory_name="MetricsHandlersController",k.default=dashjs.FactoryMaker.getClassFactory(y)},"./src/streaming/metrics/controllers/RangeController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/utils/CustomTimeRanges.js");function y(M){var d,v,T=!1,D=this.context,p=(M=M||{}).mediaElement;return d={initialize:function N(h){h&&h.length&&(h.forEach(function(g){var S=g.starttime;v.add(S,S+g.duration)}),T=!!h[0]._useWallClockTime)},reset:function O(){v.clear()},isEnabled:function m(){var g,h=v.length;if(!h)return!0;g=T?(new Date).getTime()/1e3:p.currentTime;for(var S=0;S<h;S+=1){var C=v.start(S),F=v.end(S);if(C<=g&&g<F)return!0}return!1}},function L(){v=Object(x.default)(D).create()}(),d}y.__dashjs_factory_name="RangeController",k.default=dashjs.FactoryMaker.getClassFactory(y)},"./src/streaming/metrics/controllers/ReportingController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/reporting/ReportingFactory.js");function y(M){var T=[],d=Object(x.default)(this.context).getInstance(M);return{initialize:function v(O,L){O.some(function(m){var h=d.create(m,L);if(h)return T.push(h),!0})},reset:function p(){T.forEach(function(O){return O.reset()}),T=[]},report:function N(O,L){T.forEach(function(m){return m.report(O,L)})}}}y.__dashjs_factory_name="ReportingController",k.default=dashjs.FactoryMaker.getClassFactory(y)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),y=u("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),M=u("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),T=u("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function D(d){var v,p=(d=d||{}).debug?d.debug.getLogger(v):{},N=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,O=this.context,L={BufferLevel:x.default,DVBErrors:y.default,HttpList:M.default,PlayList:T.default,RepSwitchList:T.default,TcpList:T.default};return{create:function m(S,C){var R,F=S.match(N);if(F){try{(R=L[F[1]](O).create({eventBus:d.eventBus,metricsConstants:d.metricsConstants})).initialize(F[1],C,F[3],F[5])}catch(w){R=null,p.error("MetricsHandlerFactory: Could not create handler for type ".concat(F[1]," with args ").concat(F[3],", ").concat(F[5]," (").concat(w.message,")"))}return R}},register:function h(S,C){L[S]=C},unregister:function g(S){delete L[S]}}}D.__dashjs_factory_name="MetricsHandlerFactory",k.default=dashjs.FactoryMaker.getSingletonFactory(D)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/utils/HandlerHelpers.js");function y(M){M=M||{};var D,d,v,p,N,O=this.context,L=Object(x.default)(O).getInstance(),m=[],h=M.metricsConstants;function S(){var w=function g(){try{return Object.keys(m).map(function(w){return m[w]}).reduce(function(w,b){return w.level<b.level?w:b})}catch{return}}();w&&N!==w.t&&(N=w.t,D.report(v,w))}return{initialize:function C(w,b,P){b&&(d=L.validateN(P),D=b,v=L.reconstructFullMetricName(w,P),p=setInterval(S,d))},reset:function F(){clearInterval(p),p=null,d=0,D=null,N=null},handleNewMetric:function R(w,b,P){w===h.BUFFER_LEVEL&&(m[P]=b)}}}y.__dashjs_factory_name="BufferLevelHandler",k.default=dashjs.FactoryMaker.getClassFactory(y)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/MetricsReportingEvents.js");k.default=dashjs.FactoryMaker.getClassFactory(function y(M){var D,d=(M=M||{}).eventBus,v=M.metricsConstants;function p(){d.off(x.default.METRICS_INITIALISATION_COMPLETE,p,this),d.trigger(x.default.BECAME_REPORTING_PLAYER)}return{initialize:function N(m,h){h&&(D=h,d.on(x.default.METRICS_INITIALISATION_COMPLETE,p,this))},reset:function O(){D=null},handleNewMetric:function L(m,h){m===v.DVB_ERRORS&&D&&D.report(m,h)}}})},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(Oe,k,u){"use strict";function x(){var M,T;return{initialize:function D(p,N){M=p,T=N},reset:function d(){T=null,M=void 0},handleNewMetric:function v(p,N){p===M&&T&&T.report(M,N)}}}u.r(k),x.__dashjs_factory_name="GenericMetricHandler",k.default=dashjs.FactoryMaker.getClassFactory(x)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/utils/HandlerHelpers.js");function y(M){M=M||{};var D,d,v,p,N,O=[],L=Object(x.default)(this.context).getInstance(),m=M.metricsConstants;function h(){O.length&&D&&D.report(p,O),O=[]}return{initialize:function g(F,R,w,b){R&&(d=L.validateN(w),D=R,b&&b.length&&(v=b),p=L.reconstructFullMetricName(F,w,b),N=setInterval(h,d))},reset:function S(){clearInterval(N),N=null,d=null,v=null,O=[],D=null},handleNewMetric:function C(F,R){F===m.HTTP_REQUEST&&(!v||v===R.type)&&O.push(R)}}}y.__dashjs_factory_name="HttpListHandler",k.default=dashjs.FactoryMaker.getClassFactory(y)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function y(M){var d,T={"urn:dvb:dash:reporting:2014":x.default},D=this.context,v=(M=M||{}).debug?M.debug.getLogger(d):{},p=M.metricsConstants,N=M.mediaPlayerModel||{};return{create:function O(h,g){var S;try{(S=T[h.schemeIdUri](D).create({metricsConstants:p,mediaPlayerModel:N})).initialize(h,g)}catch(C){S=null,v.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(h.schemeIdUri," (").concat(C.message,")"))}return S},register:function L(h,g){T[h]=g},unregister:function m(h){delete T[h]}}}y.__dashjs_factory_name="ReportingFactory",k.default=dashjs.FactoryMaker.getSingletonFactory(y)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/utils/MetricSerialiser.js"),y=u("./src/streaming/metrics/utils/RNG.js"),M=u("./src/streaming/models/CustomParametersModel.js");function T(D){var d,p,N,O,L,m,h,g,v=this.context,F=[],R=(D=D||{}).metricsConstants;function I(){L=!1,m=!1,h=null,g=null}return d={report:function P($,z){Array.isArray(z)||(z=[z]),m&&g.isEnabled()&&z.forEach(function(q){var J=p.serialise(q);$!==R.DVB_ERRORS&&(J="metricname=".concat($,"&").concat(J)),function b($,z,q){var J=new XMLHttpRequest;J.withCredentials=N.getXHRWithCredentialsForType(R.HTTP_REQUEST_DVB_REPORTING_TYPE);var X=function(){var se=F.indexOf(J);-1!==se&&(F.splice(se,1),J.status>=200&&J.status<300?z&&z():q&&q())};F.push(J);try{J.open("GET",$),J.onloadend=X,J.onerror=X,J.send()}catch{J.onerror()}}(J="".concat(h,"?").concat(J),null,function(){m=!1})})},initialize:function f($,z){var q;if(g=z,!(h=$.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");L||((q=$.dvb_probability)&&(1e3===q||q/1e3>=O.random())&&(m=!0),L=!0)},reset:function H(){I()}},function w(){p=Object(x.default)(v).getInstance(),O=Object(y.default)(v).getInstance(),N=Object(M.default)(v).getInstance(),I()}(),d}T.__dashjs_factory_name="DVBReporting",k.default=dashjs.FactoryMaker.getClassFactory(T)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/vo/DVBErrors.js"),y=u("./src/streaming/metrics/MetricsReportingEvents.js");function M(T){var D,d,v=(T=T||{}).eventBus,p=T.dashMetrics,N=T.metricsConstants,O=T.events;function L(b){var P=new x.default;if(d){for(var f in b)b.hasOwnProperty(f)&&(P[f]=b[f]);P.mpdurl||(P.mpdurl=d.originalUrl||d.url),P.terror||(P.terror=new Date),p.addDVBErrors(P)}}function m(b){b.error||(d=b.manifest)}function h(b){L({errorcode:x.default.BASE_URL_CHANGED,servicelocation:b.entry})}function g(){L({errorcode:x.default.BECAME_REPORTER})}function C(b){b.metric===N.HTTP_REQUEST&&function S(b){(0===b.responsecode||null==b.responsecode||b.responsecode>=400||b.responsecode<100||b.responsecode>=600)&&L({errorcode:b.responsecode||x.default.CONNECTION_ERROR,url:b.url,terror:b.tresponse,servicelocation:b._serviceLocation})}(b.value)}function F(b){var f;switch(b.error?b.error.code:0){case MediaError.MEDIA_ERR_NETWORK:f=x.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:f=x.default.CORRUPT_MEDIA_OTHER;break;default:return}L({errorcode:f})}return D={initialise:function R(){v.on(O.MANIFEST_UPDATED,m,D),v.on(O.SERVICE_LOCATION_BLACKLIST_CHANGED,h,D),v.on(O.METRIC_ADDED,C,D),v.on(O.METRIC_UPDATED,C,D),v.on(O.PLAYBACK_ERROR,F,D),v.on(y.default.BECAME_REPORTING_PLAYER,g,D)},reset:function w(){v.off(O.MANIFEST_UPDATED,m,D),v.off(O.SERVICE_LOCATION_BLACKLIST_CHANGED,h,D),v.off(O.METRIC_ADDED,C,D),v.off(O.METRIC_UPDATED,C,D),v.off(O.PLAYBACK_ERROR,F,D),v.off(y.default.BECAME_REPORTING_PLAYER,g,D)}}}M.__dashjs_factory_name="DVBErrorsTranslator",k.default=dashjs.FactoryMaker.getSingletonFactory(M)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(Oe,k,u){"use strict";function x(){return{reconstructFullMetricName:function(M,T,D){var d=M;return T&&(d+="("+T,D&&D.length&&(d+=","+D),d+=")"),d},validateN:function(M){if(!M)throw new Error("missing n");if(isNaN(M))throw new Error("n is NaN");if(M<0)throw new Error("n must be positive");return M}}}u.r(k),x.__dashjs_factory_name="HandlerHelpers",k.default=dashjs.FactoryMaker.getSingletonFactory(x)},"./src/streaming/metrics/utils/ManifestParsing.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/metrics/vo/Metrics.js"),y=u("./src/streaming/metrics/vo/Range.js"),M=u("./src/streaming/metrics/vo/Reporting.js");function T(D){var v=(D=D||{}).adapter,p=D.constants;return{getMetrics:function O(L){var m=[];return L&&L.Metrics_asArray&&L.Metrics_asArray.forEach(function(h){var g=new x.default,S=v.getIsDynamic(L);h.hasOwnProperty("metrics")&&(g.metrics=h.metrics,h.Range_asArray&&h.Range_asArray.forEach(function(C){var F=new y.default;F.starttime=function N(L,m,h){var g,S,C=0;return m?C=v.getAvailabilityStartTime(L)/1e3:(g=v.getRegularPeriods(L)).length&&(C=g[0].start),S=C,h&&h.hasOwnProperty(p.START_TIME)&&(S+=h.starttime),S}(L,S,C),F.duration=C.hasOwnProperty("duration")?C.duration:v.getDuration(L),F._useWallClockTime=S,g.Range.push(F)}),h.Reporting_asArray&&(h.Reporting_asArray.forEach(function(C){var F=new M.default;C.hasOwnProperty(p.SCHEME_ID_URI)&&(F.schemeIdUri=C.schemeIdUri,C.hasOwnProperty("value")&&(F.value=C.value),C.hasOwnProperty(p.DVB_REPORTING_URL)&&(F.dvb_reportingUrl=C[p.DVB_REPORTING_URL]),C.hasOwnProperty(p.DVB_PROBABILITY)&&(F.dvb_probability=C[p.DVB_PROBABILITY]),g.Reporting.push(F))}),m.push(g)))}),m}}}T.__dashjs_factory_name="ManifestParsing",k.default=dashjs.FactoryMaker.getSingletonFactory(T)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(Oe,k,u){"use strict";function x(){return{serialise:function y(M){var d,v,T=[],D=[];for(d in M)if(M.hasOwnProperty(d)&&0!==d.indexOf("_")){if(null==(v=M[d])&&(v=""),Array.isArray(v)){if(!v.length)continue;D=[],v.forEach(function(p){var N="Object"!==Object.prototype.toString.call(p).slice(8,-1);D.push(N?p:y(p))}),v=D.map(encodeURIComponent).join(",")}else"string"==typeof v?v=encodeURIComponent(v):v instanceof Date?v=v.toISOString():"number"==typeof v&&(v=Math.round(v));T.push(d+"="+v)}return T.join("&")}}}u.r(k),x.__dashjs_factory_name="MetricSerialiser",k.default=dashjs.FactoryMaker.getSingletonFactory(x)},"./src/streaming/metrics/utils/RNG.js":function(Oe,k,u){"use strict";function x(){var d,v,p,y=window.crypto||window.msCrypto,M=Uint32Array,T=Math.pow(2,8*M.BYTES_PER_ELEMENT)-1;function N(){y&&(d||(d=new M(10)),y.getRandomValues(d),v=0)}return p={random:function O(L,m){var h;return L||(L=0),m||(m=1),y?(v===d.length&&N(),h=d[v]/T,v+=1):h=Math.random(),h*(m-L)+L}},N(),p}u.r(k),x.__dashjs_factory_name="RNG",k.default=dashjs.FactoryMaker.getSingletonFactory(x)},"./src/streaming/metrics/vo/DVBErrors.js":function(Oe,k,u){"use strict";u.r(k);var y=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};y.SSL_CONNECTION_FAILED_PREFIX="SSL",y.DNS_RESOLUTION_FAILED="C00",y.HOST_UNREACHABLE="C01",y.CONNECTION_REFUSED="C02",y.CONNECTION_ERROR="C03",y.CORRUPT_MEDIA_ISOBMFF="M00",y.CORRUPT_MEDIA_OTHER="M01",y.BASE_URL_CHANGED="F00",y.BECAME_REPORTER="S00",k.default=y},"./src/streaming/metrics/vo/Metrics.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.metrics="",this.Range=[],this.Reporting=[]}},"./src/streaming/metrics/vo/Range.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},"./src/streaming/metrics/vo/Reporting.js":function(Oe,k,u){"use strict";u.r(k);k.default=function T(){(function x(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")})(this,T),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3}},"./src/streaming/models/BaseURLTreeModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/utils/ObjectUtils.js"),y=u("./src/core/FactoryMaker.js");var T=NaN,D=function v(p,N){(function M(v,p){if(!(v instanceof p))throw new TypeError("Cannot call a class as a function")})(this,v),this.data={baseUrls:p||null,selectedIdx:N||T},this.children=[]};function d(){var v,p,N,O=this.context,L=Object(x.default)(O).getInstance();function S(f,I,H){var $=N.getBaseURLsFromElement(H);f[I]?L.areEqual($,f[I].data.baseUrls)||(f[I].data.baseUrls=$,f[I].data.selectedIdx=T):f[I]=new D($)}function C(f){!function g(){if(!N||!N.hasOwnProperty("getBaseURLsFromElement")||!N.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var I=N.getBaseURLsFromElement(f);L.areEqual(I,p.data.baseUrls)||(p.data.baseUrls=I,p.data.selectedIdx=T),f&&f.Period_asArray&&f.Period_asArray.forEach(function(H,$){S(p.children,$,H),H.AdaptationSet_asArray&&H.AdaptationSet_asArray.forEach(function(z,q){S(p.children[$].children,q,z),z.Representation_asArray&&z.Representation_asArray.sort(N.getRepresentationSortFunction()).forEach(function(J,X){S(p.children[$].children[q].children,X,J)})})})}function F(f,I){var H=I||p;f(H.data),H.children&&H.children.forEach(function($){return F(f,$)})}function b(){p=new D}return v={reset:b,update:function w(f){C(f)},getForPath:function P(f){var I=p,H=[I.data];return f&&f.forEach(function($){(I=I.children[$])&&H.push(I.data)}),H.filter(function($){return $.baseUrls.length})},invalidateSelectedIndexes:function R(f){F(function(I){isNaN(I.selectedIdx)||f===I.baseUrls[I.selectedIdx].serviceLocation&&(I.selectedIdx=T)})},setConfig:function h(f){f.adapter&&(N=f.adapter)}},function m(){b()}(),v}d.__dashjs_factory_name="BaseURLTreeModel",k.default=y.default.getClassFactory(d)},"./src/streaming/models/CmcdModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/EventBus.js"),y=u("./src/streaming/MediaPlayerEvents.js"),M=u("./src/streaming/metrics/MetricsReportingEvents.js"),T=u("./src/core/FactoryMaker.js"),D=u("./src/core/Settings.js"),d=u("./src/streaming/constants/Constants.js"),v=u("./src/streaming/vo/metrics/HTTPRequest.js"),p=u("./src/dash/models/DashManifestModel.js"),N=u("./src/core/Utils.js");function O(b,P){var f;if(typeof Symbol>"u"||null==b[Symbol.iterator]){if(Array.isArray(b)||(f=function L(b,P){if(b){if("string"==typeof b)return m(b,P);var f=Object.prototype.toString.call(b).slice(8,-1);if("Object"===f&&b.constructor&&(f=b.constructor.name),"Map"===f||"Set"===f)return Array.from(b);if("Arguments"===f||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return m(b,P)}}(b))||P&&b&&"number"==typeof b.length){f&&(b=f);var I=0,H=function(){};return{s:H,n:function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}},e:function(X){throw X},f:H}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var q,$=!0,z=!1;return{s:function(){f=b[Symbol.iterator]()},n:function(){var X=f.next();return $=X.done,X},e:function(X){z=!0,q=X},f:function(){try{!$&&null!=f.return&&f.return()}finally{if(z)throw q}}}}function m(b,P){(null==P||P>b.length)&&(P=b.length);for(var f=0,I=new Array(P);f<P;f++)I[f]=b[f];return I}var S_MANIFEST="m",S_AUDIO="a",S_VIDEO="v",S_INIT="i",S_CAPTION="c",S_ISOBMFF_TEXT_TRACK="tt",S_ENCRYPTION_KEY="k",S_OTHER="o",C_DASH="d",C_MSS="s",F_VOD="v",F_LIVE="l";function w(){var b,P,f,I,H,$,z,q,J,X,V=this.context,se=Object(x.default)(V).getInstance(),Z=Object(D.default)(V).getInstance();function re(){f={pr:1,nor:null,st:null,sf:null,sid:"".concat(N.default.generateUuid()),cid:null},J={},q={},X={},ie()}function ge(){ie()}function ie(){if($){var Re=$.getStreamController();if(Re&&"function"==typeof Re.getActiveStream){var xe=Re.getActiveStream();!xe||(z=xe.getProcessors())}}}function le(Re,xe){var at,ze={},ut=O(xe);try{for(ut.s();!(at=ut.n()).done;){var yt=at.value;Re[yt]&&(ze[yt]=Re[yt])}}catch(Lt){ut.e(Lt)}finally{ut.f()}return ze}function ne(Re){var xe=Z.get().streaming.cmcd.enabledKeys;return Re.filter(function(ze){return xe.includes(ze)})}function pe(Re){try{return Re.type===v.HTTPRequest.MPD_TYPE?function G(){var Re=K();return Re.ot=S_MANIFEST,Re}():Re.type===v.HTTPRequest.MEDIA_SEGMENT_TYPE?(function _(Re){X.hasOwnProperty(Re)||(X[Re]=!1),q.hasOwnProperty(Re)||(q[Re]=!1),J.hasOwnProperty(Re)||(J[Re]=!1)}(Re.mediaType),function j(Re){var sn,xe=K(),ze=function te(Re){try{return parseInt(Re.mediaInfo.bitrateList[Re.quality].bandwidth/1e3)}catch{return null}}(Re),ut=function Se(Re){try{return isNaN(Re.duration)?null:Math.round(1e3*Re.duration)}catch{return null}}(Re),at=function ae(Re){try{return 100*parseInt(I.getThroughputHistory().getSafeAverageThroughput(Re)/100)}catch{return null}}(Re.mediaType),yt=function Y(Re){try{var xe=f.pr,ze=H.getCurrentBufferLevel(Re);return isNaN(xe)||isNaN(ze)?null:100*parseInt(ze/xe*10)}catch{return null}}(Re.mediaType),Lt=W(Re.mediaType),kt=function ye(Re){try{var xe=I.getTopBitrateInfoFor(Re);return Math.round(xe.bitrate/1e3)}catch{return null}}(Re.mediaType),Zt=f.pr,nn=function Ie(Re){if(z&&0!==z.length){var ze,xe=O(z);try{for(xe.s();!(ze=xe.n()).done;){var ut=ze.value;if(ut.getType()===Re)return ut.probeNextRequest()}}catch(at){xe.e(at)}finally{xe.f()}}}(Re.mediaType);Re.mediaType===d.default.VIDEO&&(sn=S_VIDEO),Re.mediaType===d.default.AUDIO&&(sn=S_AUDIO),Re.mediaType===d.default.TEXT&&(sn="application/mp4"===Re.mediaInfo.mimeType?S_ISOBMFF_TEXT_TRACK:S_CAPTION);var Be=Z.get().streaming.cmcd.rtp;return Be||(Be=function we(Re){var xe=$.getPlaybackRate();xe||(xe=1);var ze=Re.quality,at=Re.mediaInfo,yt=Re.duration,Lt=W(Re.mediaType);0===Lt&&(Lt=500);var sn=at.bitrateList[ze].bandwidth*yt/1e3/(Lt/xe/1e3),Be=Z.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(Z.get().streaming.cmcd.rtpSafetyFactor)?Z.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(sn*Be/100)+1)}(Re)),xe.rtp=Be,nn&&(Re.url!==nn.url?xe.nor=encodeURIComponent(N.default.getRelativeUrl(Re.url,nn.url)):nn.range&&(xe.nrr=nn.range)),ze&&(xe.br=ze),sn&&(xe.ot=sn),isNaN(ut)||(xe.d=ut),isNaN(at)||(xe.mtp=at),isNaN(yt)||(xe.dl=yt),isNaN(Lt)||(xe.bl=Lt),isNaN(kt)||(xe.tb=kt),!isNaN(Zt)&&1!==Zt&&(xe.pr=Zt),J[Re.mediaType]&&(xe.bs=!0,J[Re.mediaType]=!1),(q[Re.mediaType]||!X[Re.mediaType])&&(xe.su=!0,q[Re.mediaType]=!1,X[Re.mediaType]=!0),xe}(Re)):Re.type===v.HTTPRequest.INIT_SEGMENT_TYPE?function A(){var Re=K();return Re.ot=S_INIT,Re.su=!0,Re}():Re.type===v.HTTPRequest.OTHER_TYPE||Re.type===v.HTTPRequest.XLINK_EXPANSION_TYPE?function U(){var Re=K();return Re.ot=S_OTHER,Re}():Re.type===v.HTTPRequest.LICENSE?function ee(Re){var xe=K();return xe.ot=S_ENCRYPTION_KEY,xe}():null}catch{return null}}function K(){var Re={},xe=Z.get().streaming.cmcd.cid?Z.get().streaming.cmcd.cid:f.cid;return Re.v=1,Re.sid=Z.get().streaming.cmcd.sid?Z.get().streaming.cmcd.sid:f.sid,Re.sid="".concat(Re.sid),xe&&(Re.cid="".concat(xe)),!isNaN(f.pr)&&1!==f.pr&&null!==f.pr&&(Re.pr=f.pr),f.st&&(Re.st=f.st),f.sf&&(Re.sf=f.sf),Re}function W(Re){try{var xe=H.getCurrentBufferLevel(Re);return isNaN(xe)?null:100*parseInt(10*xe)}catch{return null}}function _e(Re){try{f.pr=Re.playbackRate}catch{}}function Ee(Re){try{var xe=b.getIsDynamic(Re.data),ut=Re.protocol&&"MSS"===Re.protocol?C_MSS:C_DASH;f.st="".concat(xe?F_LIVE:F_VOD),f.sf="".concat(ut)}catch{}}function me(Re){try{Re.state&&Re.mediaType&&Re.state===y.default.BUFFER_EMPTY&&(J[Re.mediaType]||(J[Re.mediaType]=!0),q[Re.mediaType]||(q[Re.mediaType]=!0))}catch{}}function Te(){for(var Re in J)J.hasOwnProperty(Re)&&(J[Re]=!0);for(var xe in q)q.hasOwnProperty(xe)&&(q[xe]=!0)}function Ne(Re){try{if(!Re)return null;var xe=Object.keys(Re).sort(function(at,yt){return at.localeCompare(yt)}),ze=xe.length,ut=xe.reduce(function(at,yt,Lt){return"v"===yt&&1===Re[yt]||(at+="string"==typeof Re[yt]&&"ot"!==yt&&"sf"!==yt&&"st"!==yt?"".concat(yt,"=").concat(JSON.stringify(Re[yt])):"".concat(yt,"=").concat(Re[yt]),Lt<ze-1&&(at+=",")),at},"");return(ut=ut.replace(/=true/g,"")).replace(/,\s*$/,"")}catch{return null}}return P={getQueryParameter:function de(Re){try{if(Z.get().streaming.cmcd&&Z.get().streaming.cmcd.enabled){var xe=pe(Re),ut=Ne(function ue(Re){try{var xe=Z.get().streaming.cmcd.enabledKeys;return Object.keys(Re).filter(function(ze){return xe.includes(ze)}).reduce(function(ze,ut){return ze[ut]=Re[ut],ze},{})}catch{return Re}}(xe));return se.trigger(M.default.CMCD_DATA_GENERATED,{url:Re.url,mediaType:Re.mediaType,cmcdData:xe,cmcdString:ut}),{key:"CMCD",value:ut}}return null}catch{return null}},getHeaderParameters:function ce(Re){try{if(Z.get().streaming.cmcd&&Z.get().streaming.cmcd.enabled){var xe=pe(Re),ze=le(xe,ne(["br","d","ot","tb"])),ut=le(xe,ne(["bl","dl","mtp","nor","nrr","su"])),at=le(xe,ne(["bs","rtp"])),yt=le(xe,ne(["cid","pr","sf","sid","st","v"])),Lt={"CMCD-Object":Ne(ze),"CMCD-Request":Ne(ut),"CMCD-Status":Ne(at),"CMCD-Session":Ne(yt)};return se.trigger(M.default.CMCD_DATA_GENERATED,{url:Re.url,mediaType:Re.mediaType,cmcdData:xe,headers:Lt}),Lt}return null}catch{return null}},setConfig:function ve(Re){!Re||(Re.abrController&&(I=Re.abrController),Re.dashMetrics&&(H=Re.dashMetrics),Re.playbackController&&($=Re.playbackController))},reset:function ke(){se.off(y.default.PLAYBACK_RATE_CHANGED,_e,this),se.off(y.default.MANIFEST_LOADED,Ee,this),se.off(y.default.BUFFER_LEVEL_STATE_CHANGED,me,P),se.off(y.default.PLAYBACK_SEEKED,Te,P),re()},initialize:function he(){se.on(y.default.PLAYBACK_RATE_CHANGED,_e,P),se.on(y.default.MANIFEST_LOADED,Ee,P),se.on(y.default.BUFFER_LEVEL_STATE_CHANGED,me,P),se.on(y.default.PLAYBACK_SEEKED,Te,P),se.on(y.default.PERIOD_SWITCH_COMPLETED,ge,P)}},function oe(){b=Object(p.default)(V).getInstance(),re()}(),P}w.__dashjs_factory_name="CmcdModel",k.default=T.default.getSingletonFactory(w)},"./src/streaming/models/CustomParametersModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/vo/UTCTiming.js"),y=u("./src/core/FactoryMaker.js"),M=u("./src/core/Settings.js"),T=u("./src/streaming/utils/SupervisorTools.js"),D=u("./src/streaming/rules/abr/ABRRulesCollection.js"),d=u("./src/streaming/constants/Constants.js");function p(){var N,O,L,m,h,g,S,C,F=this.context,R=Object(M.default)(F).getInstance();function b(){m=[],h=[],g=[],C=[],S=null,O=[]}function ve(_,A){var U=-1;_.some(function(K,te){if(K===A)return U=te,!0}),!(U<0)&&_.splice(U,1)}function re(_){var A;for(A=0;A<C.length;A++)if(C[A].rulename===_)return A;return-1}function le(_,A){ne(_,A);var U=new x.default;U.schemeIdUri=_,U.value=A,O.push(U)}function ne(_,A){Object(T.checkParameterType)(_,"string"),Object(T.checkParameterType)(A,"string"),O.forEach(function(U,K){U.schemeIdUri===_&&U.value===A&&O.splice(K,1)})}return N={getCustomInitialTrackSelectionFunction:function $(){return S},setCustomInitialTrackSelectionFunction:function I(_){S=_},resetCustomInitialTrackSelectionFunction:function H(){S=null},getLicenseResponseFilters:function q(){return h},getLicenseRequestFilters:function z(){return m},getCustomCapabilitiesFilters:function Z(){return g},registerCustomCapabilitiesFilter:function oe(_){g.push(_)},registerLicenseResponseFilter:function X(_){h.push(_)},registerLicenseRequestFilter:function J(_){m.push(_)},unregisterCustomCapabilitiesFilter:function he(_){ve(g,_)},unregisterLicenseResponseFilter:function se(_){ve(h,_)},unregisterLicenseRequestFilter:function V(_){ve(m,_)},addAbrCustomRule:function ge(_,A,U){if("string"!=typeof _||_!==D.default.ABANDON_FRAGMENT_RULES&&_!==D.default.QUALITY_SWITCH_RULES||"string"!=typeof A)throw d.default.BAD_ARGUMENT_ERROR;var K=re(A);-1===K?C.push({type:_,rulename:A,rule:U}):(C[K].type=_,C[K].rule=U)},removeAllAbrCustomRule:function de(){C=[]},removeAbrCustomRule:function ie(_){if(_){var A=re(_);-1!==A&&C.splice(A,1)}else C=[]},getAbrCustomRules:function ue(){return C},addUTCTimingSource:le,removeUTCTimingSource:ne,getUTCTimingSources:function ce(){return O},clearDefaultUTCTimingSources:function pe(){O=[]},restoreDefaultUTCTimingSources:function ee(){var _=R.get().streaming.utcSynchronization.defaultTimingSource;le(_.scheme,_.value)},setXHRWithCredentialsForType:function G(_,A){_?L[_]=!!A:Object.keys(L).forEach(function(U){G(U,A)})},getXHRWithCredentialsForType:function j(_){var A=L[_];return void 0===A?L.default:A},setConfig:function f(){},reset:function P(){b()}},function w(){L={default:false},b()}(),N}p.__dashjs_factory_name="CustomParametersModel",k.default=y.default.getSingletonFactory(p)},"./src/streaming/models/FragmentModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/vo/FragmentRequest.js"),M="loading",T="executed",d="failed";function v(N){var F,R,w,b,O=(N=N||{}).eventBus,L=N.events,m=N.dashMetrics,h=N.fragmentLoader,g=N.debug,S=N.streamInfo,C=N.type;function H(ee){var te;return!!ee&&(te=!1,w.some(function(ye){if(function(K,te){return!isNaN(K.index)&&K.startTime===te.startTime&&K.adaptationIndex===te.adaptationIndex&&K.type===te.type}(ee,ye)||function(K,te){return isNaN(K.index)&&isNaN(te.index)&&K.quality===te.quality}(ee,ye)||function(K,te){return K.action===y.default.ACTION_COMPLETE&&K.action===te.action}(ee,ye))return te=!0}),te)}function q(ee){return isNaN(ee.duration)?.25:Math.min(ee.duration/8,.5)}function J(ee){w=w.filter(function(G){var j=q(G);return isNaN(G.startTime)||void 0!==ee&&G.startTime>=ee-j})}function V(ee,G){G<=ee+.5||(w=w.filter(function(j){var _=q(j);return isNaN(j.startTime)||j.startTime>=G-_||isNaN(j.duration)||j.startTime+j.duration<=ee+_}))}function ve(ee,G,j){for(var A=ee.length-1;A>=0;A--){var U=ee[A],K=U.startTime,te=K+U.duration;if(j=isNaN(j)?q(U):j,!isNaN(K)&&!isNaN(te)&&G+j>=K&&G-j<te||isNaN(K)&&isNaN(G))return U}return null}function ie(ee,G){m.addSchedulingInfo(ee,G),m.addRequestsQueue(ee.mediaType,b,w)}function de(ee){ee.sender===h&&(b.splice(b.indexOf(ee.request),1),ee.response&&!ee.error&&w.push(ee.request),ie(ee.request,ee.error?d:T),O.trigger(L.FRAGMENT_LOADING_COMPLETED,{request:ee.request,response:ee.response,error:ee.error,sender:this},{streamId:S.id,mediaType:C}))}function ue(ee){ee.sender===h&&O.trigger(L.FRAGMENT_LOADING_PROGRESS,{request:ee.request,response:ee.response,error:ee.error,sender:this},{streamId:S.id,mediaType:C})}function le(ee){ee.sender===h&&O.trigger(L.FRAGMENT_LOADING_ABANDONED,{request:ee.request},{streamId:S.id,mediaType:C})}function ce(){w=[],b=[]}return F={getStreamId:function f(){return S.id},getType:function I(){return C},getRequests:function z(ee){var j=[];return(ee?ee.state instanceof Array?ee.state:[ee.state]:[]).forEach(function(_){var A=function ge(ee){var G;switch(ee){case M:G=b;break;case T:G=w;break;default:G=[]}return G}(_);j=j.concat(function re(ee,G){return G.hasOwnProperty("time")?[ve(ee,G.time,G.threshold)]:ee.filter(function(j){for(var _ in G)if("state"!==_&&G.hasOwnProperty(_)&&j[_]!=G[_])return!1;return!0})}(A,ee))}),j},isFragmentLoaded:H,isFragmentLoadedOrPending:function $(ee){var _,G=!1,j=0;if(!(G=H(ee)))for(j=0;j<b.length;j++)ee.url===(_=b[j]).url&&ee.startTime===_.startTime&&(G=!0);return G},removeExecutedRequestsBeforeTime:J,removeExecutedRequestsAfterTime:function X(ee){w=w.filter(function(G){return isNaN(G.startTime)||void 0!==ee&&G.startTime<ee})},syncExecutedRequestsWithBufferedRange:function se(ee,G){if(ee&&0!==ee.length){for(var j=0,_=0,A=ee.length;_<A;_++)V(j,ee.start(_)),j=ee.end(_);G>0&&V(j,G)}else J()},abortRequests:function Z(){R.debug("abort requests"),h.abort(),b=[]},executeRequest:function oe(ee){ee.action===y.default.ACTION_DOWNLOAD?(ie(ee,M),b.push(ee),function he(ee){O.trigger(L.FRAGMENT_LOADING_STARTED,{request:ee},{streamId:S.id,mediaType:C}),h.load(ee)}(ee)):R.warn("Unknown request action.")},reset:function ne(){O.off(L.LOADING_COMPLETED,de,this),O.off(L.LOADING_DATA_PROGRESS,ue,this),O.off(L.LOADING_ABANDONED,le,this),h&&h.reset(),ce()},resetInitialSettings:ce,addExecutedRequest:function pe(ee){w.push(ee)}},function P(){R=g.getLogger(F),ce(),O.on(L.LOADING_COMPLETED,de,F),O.on(L.LOADING_DATA_PROGRESS,ue,F),O.on(L.LOADING_ABANDONED,le,F)}(),F}v.__dashjs_factory_name="FragmentModel";var p=x.default.getClassFactory(v);p.FRAGMENT_MODEL_LOADING=M,p.FRAGMENT_MODEL_EXECUTED=T,p.FRAGMENT_MODEL_CANCELED="canceled",p.FRAGMENT_MODEL_FAILED=d,x.default.updateClassFactory(v.__dashjs_factory_name,p),k.default=p},"./src/streaming/models/LowLatencyThroughputModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/Debug.js"),y=u("./src/core/FactoryMaker.js");function M(){var O,L,N=this.context,m={};function h(){L=Object(x.default)(N).getInstance().getLogger(O)}function g(w){for(var b={},P=0,f=0,I=0,H=0,$=w.length,z=0;z<$;++z)P+=w[z].chunkDownloadTimeRelativeMS,f+=w[z].bufferLevel,I+=w[z].chunkDownloadTimeRelativeMS*w[z].bufferLevel,H+=w[z].chunkDownloadTimeRelativeMS*w[z].chunkDownloadTimeRelativeMS;return b.m=(I-P*f/$)/(H-P*P/$),b.b=f/$-b.m*P/$,function(q){return b.m*q+b.b}}function S(w){var P,b=!0,f=w.reduce(function(I,H){return I+H.bufferLevelAtSegmentEnd},0)/w.length;return w.forEach(function(I){Math.abs(I.bufferLevelAtSegmentEnd/I.bufferLevelAtSegmentStart)<.95&&(b=!1),I.bufferLevelAtSegmentEnd/f<.8&&(b=!1),P?P>I.bitrate&&(b=!1):P=I.bitrate}),b}return O={setup:h,addMeasurement:function R(w,b,P,f,I){w&&w.mediaType&&!m[w.mediaType]&&(m[w.mediaType]=[]);var H=w.mediaInfo.bitrateList.find(function($){return $.id===w.representationId});m[w.mediaType].push({index:w.index,repId:w.representationId,mediaType:w.mediaType,requestTimeMS:f,adjustedAvailabilityStartTimeMS:w.availabilityStartTime.getTime(),segDurationMS:1e3*w.duration,chunksDurationMS:P.reduce(function($,z){return $+z.chunkDownloadDurationMS},0),segmentBytes:P.reduce(function($,z){return $+z.chunkBytes},0),bitrate:H&&H.bandwidth,bitrateList:w.mediaInfo.bitrateList,chunkMeasurements:P,fetchDownloadDurationMS:b,throughputCapacityDelayMS:I,getEstimatedBufferLevel:g(P.slice(1))}),m[w.mediaType].length>10&&m[w.mediaType].shift()},getThroughputCapacityDelayMS:function F(w,b){var P=m[w.mediaType]&&m[w.mediaType].slice(-3);return!P||P.length<3||!S(P)?0:b/4>250?250:b/4},getEstimatedDownloadDurationMS:function C(w){var b=m[w.mediaType].slice(-1).pop(),P=m[w.mediaType].slice(-3),f=b.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;b.bufferLevelAtSegmentStart=b.getEstimatedBufferLevel(f/2),b.bufferLevelAtSegmentEnd=b.getEstimatedBufferLevel(f);var I=S(P),H=I?.6:.8;if(b.isBufferStable&&1.05*b.segDurationMS<b.fetchDownloadDurationMS)return b.fetchDownloadDurationMS;if(!I||b.segDurationMS<b.fetchDownloadDurationMS||b.adjustedAvailabilityStartTimeMS<=b.requestTimeMS+b.throughputCapacityDelayMS-b.segDurationMS)return.8*b.fetchDownloadDurationMS;for(var $=b.requestTimeMS+b.throughputCapacityDelayMS-b.adjustedAvailabilityStartTimeMS,z=0,q=0,J=0,X=0;X<b.chunkMeasurements.length;X++){var V=b.chunkMeasurements[X];if($<q+V.chunkDownloadDurationMS)break;q+=V.chunkDownloadDurationMS,z+=V.chunkBytes,J++}if($<0&&L.warn("request time was before adjusted availibitly start time"),z&&q&&J>.2*b.chunkMeasurements.length){var Z=b.segmentBytes/(z/q);return b.fetchDownloadDurationMS<Z?b.fetchDownloadDurationMS*H:Z*H}var oe=b.bitrate;return b.bitrateList.some(function(he){if(he.bandwidth>b.bitrate)return oe=he.bandwidth,!0}),oe===b.bitrate?b.fetchDownloadDurationMS*H:H*b.segmentBytes*8*1e3/oe}},h(),O}M.__dashjs_factory_name="LowLatencyThroughputModel",k.default=y.default.getSingletonFactory(M)},"./src/streaming/models/ManifestModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js");function T(){var p,D=this.context,d=Object(x.default)(D).getInstance();return{getValue:function N(){return p},setValue:function O(L){p=L,L&&d.trigger(y.default.MANIFEST_LOADED,{data:L})}}}T.__dashjs_factory_name="ManifestModel",k.default=M.default.getSingletonFactory(T)},"./src/streaming/models/MediaPlayerModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Settings.js");function N(){var L,m,h=this.context,g=Object(y.default)(h).getInstance();function I(){var q=g.get().streaming.buffer.stableBufferTime>0?g.get().streaming.buffer.stableBufferTime:g.get().streaming.buffer.fastSwitchEnabled?20:12,J=L.getLiveDelay();return!isNaN(J)&&J>0?Math.min(q,J):q}return{getCatchupMaxDrift:function F(){if(!isNaN(g.get().streaming.liveCatchup.maxDrift)&&g.get().streaming.liveCatchup.maxDrift>0)return g.get().streaming.liveCatchup.maxDrift;var q=m.getServiceDescriptionSettings();return q&&q.liveCatchup&&!isNaN(q.liveCatchup.maxDrift)&&q.liveCatchup.maxDrift>0?q.liveCatchup.maxDrift:12},getCatchupModeEnabled:function w(){return null!==g.get().streaming.liveCatchup.enabled?g.get().streaming.liveCatchup.enabled:L.getInitialCatchupModeActivated()},getLiveCatchupLatencyThreshold:function b(){try{var q=g.get().streaming.liveCatchup.latencyThreshold,J=L.getLiveDelay();return null===q||isNaN(q)?NaN:Math.max(q,J)}catch{return NaN}},getStableBufferTime:I,getInitialBufferLevel:function f(){var q=g.get().streaming.buffer.initialBufferLevel;return isNaN(q)||q<0?0:Math.min(I(),q)},getRetryAttemptsForType:function H(q){var J=isNaN(g.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:g.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return L.getLowLatencyModeEnabled()?g.get().streaming.retryAttempts[q]*J:g.get().streaming.retryAttempts[q]},getRetryIntervalsForType:function $(q){var J=isNaN(g.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:g.get().streaming.retryIntervals.lowLatencyReductionFactor;return L.getLowLatencyModeEnabled()?g.get().streaming.retryIntervals[q]/J:g.get().streaming.retryIntervals[q]},getCatchupPlaybackRate:function R(){if(!isNaN(g.get().streaming.liveCatchup.playbackRate)&&g.get().streaming.liveCatchup.playbackRate>0)return g.get().streaming.liveCatchup.playbackRate;var q=m.getServiceDescriptionSettings();return q&&q.liveCatchup&&!isNaN(q.liveCatchup.playbackRate)&&q.liveCatchup.playbackRate>0?q.liveCatchup.playbackRate:.5},getAbrBitrateParameter:function P(q,J){try{var X=g.get().streaming.abr[q][J];if(!isNaN(X)&&-1!==X)return X;var V=m.getServiceDescriptionSettings();return V&&V[q]&&!isNaN(V[q][J])?V[q][J]:-1}catch{return-1}},setConfig:function C(q){q.playbackController&&(L=q.playbackController),q.serviceDescriptionController&&(m=q.serviceDescriptionController)},reset:function z(){}}}N.__dashjs_factory_name="MediaPlayerModel",k.default=x.default.getSingletonFactory(N)},"./src/streaming/models/MetricsModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/constants/MetricsConstants.js"),M=u("./src/streaming/vo/MetricsList.js"),T=u("./src/streaming/vo/metrics/HTTPRequest.js"),D=u("./src/streaming/vo/metrics/RepresentationSwitch.js"),d=u("./src/streaming/vo/metrics/BufferLevel.js"),v=u("./src/streaming/vo/metrics/BufferState.js"),p=u("./src/streaming/vo/metrics/DVRInfo.js"),N=u("./src/streaming/vo/metrics/DroppedFrames.js"),O=u("./src/streaming/vo/metrics/ManifestUpdate.js"),L=u("./src/streaming/vo/metrics/SchedulingInfo.js"),m=u("./src/core/EventBus.js"),h=u("./src/streaming/vo/metrics/RequestsQueue.js"),g=u("./src/core/events/Events.js"),S=u("./src/core/FactoryMaker.js");function C(F){var P,f,R=(F=F||{}).settings,w=this.context,b=Object(m.default)(w).getInstance();function H(){b.trigger(g.default.METRICS_CHANGED)}function $(_){b.trigger(g.default.METRIC_CHANGED,{mediaType:_}),H()}function z(_,A,U){b.trigger(g.default.METRIC_UPDATED,{mediaType:_,metric:A,value:U}),$(_)}function q(_,A,U){b.trigger(g.default.METRIC_ADDED,{mediaType:_,metric:A,value:U}),$(_)}function V(_,A){var U=null;return _&&(f.hasOwnProperty(_)?U=f[_]:A||(U=new M.default,f[_]=U)),U}function se(_,A,U){var K=V(_);null!==K&&(K[A].push(U),K[A].length>R.get().streaming.metrics.maxListDepth&&K[A].shift())}function ve(_,A,U){se(_,A,U),q(_,A,U)}return P={clearCurrentMetricsForType:function J(_){delete f[_],$(_)},clearAllCurrentMetrics:function X(){f={},H()},getMetricsFor:V,addHttpRequest:function oe(_,A,U,K,te,ye,Se,ae,Y,W,_e,Ee,me,Te,Ne,Ie){var we=new T.HTTPRequest;ye&&ye!==K&&(oe(_,null,U,K,te,null,null,ae,Y,null,null,null,me,null,null,Ie),we.actualurl=ye),we.tcpid=A,we.type=U,we.url=K,we.range=ae,we.trequest=Y,we.tresponse=W,we.responsecode=Ee,we._tfinish=_e,we._stream=_,we._mediaduration=me,we._quality=te,we._responseHeaders=Te,we._serviceLocation=Se,we._fileLoaderType=Ie,Ne?Ne.forEach(function(ke){!function Z(_,A,U,K,te){var ye=new T.HTTPRequestTrace;return ye.s=A,ye.d=U,ye.b=K,ye._t=te,_.trace.push(ye),_.interval||(_.interval=0),_.interval+=U,ye}(we,ke.s,ke.d,ke.b,ke.t)}):(delete we.interval,delete we.trace),ve(_,y.default.HTTP_REQUEST,we)},addRepresentationSwitch:function he(_,A,U,K,te){var ye=new D.default;ye.t=A,ye.mt=U,ye.to=K,te?ye.lto=te:delete ye.lto,ve(_,y.default.TRACK_SWITCH,ye)},addBufferLevel:function re(_,A,U){var K=new d.default;K.t=A,K.level=U,ve(_,y.default.BUFFER_LEVEL,K)},addBufferState:function ge(_,A,U){var K=new v.default;K.target=U,K.state=A,ve(_,y.default.BUFFER_STATE,K)},addDVRInfo:function ie(_,A,U,K){var te=new p.default;te.time=A,te.range=K,te.manifestInfo=U,ve(_,y.default.DVR_INFO,te)},addDroppedFrames:function de(_,A){var U=new N.default,K=V(_).DroppedFrames;!A||(U.time=A.creationTime,U.droppedFrames=A.droppedVideoFrames,!(K.length>0&&K[K.length-1]==U)&&ve(_,y.default.DROPPED_FRAMES,U))},addSchedulingInfo:function ue(_,A,U,K,te,ye,Se,ae,Y){var W=new L.default;W.mediaType=_,W.t=A,W.type=U,W.startTime=K,W.availabilityStartTime=te,W.duration=ye,W.quality=Se,W.range=ae,W.state=Y,ve(_,y.default.SCHEDULING_INFO,W)},addRequestsQueue:function le(_,A,U){var K=new h.default;K.loadingRequests=A,K.executedRequests=U,V(_).RequestsQueue=K,q(_,y.default.REQUESTS_QUEUE,K)},addManifestUpdate:function ce(_,A,U,K,te,ye,Se,ae,Y,W){var _e=new O.ManifestUpdate;_e.mediaType=_,_e.type=A,_e.requestTime=U,_e.fetchTime=K,_e.availabilityStartTime=te,_e.presentationStartTime=ye,_e.clientTimeOffset=Se,_e.currentTime=ae,_e.buffered=Y,_e.latency=W,se(x.default.STREAM,y.default.MANIFEST_UPDATE,_e),q(_,y.default.MANIFEST_UPDATE,_e)},updateManifestUpdateInfo:function ne(_,A){if(_){for(var U in A)_[U]=A[U];z(_.mediaType,y.default.MANIFEST_UPDATE,_)}},addManifestUpdateStreamInfo:function pe(_,A,U,K,te){if(_){var ye=new O.ManifestUpdateStreamInfo;ye.id=A,ye.index=U,ye.start=K,ye.duration=te,_.streamInfo.push(ye),z(_.mediaType,y.default.MANIFEST_UPDATE_STREAM_INFO,_)}},addManifestUpdateRepresentationInfo:function ee(_,A,U,K,te,ye,Se,ae){if(_&&_.representationInfo){var Y=new O.ManifestUpdateRepresentationInfo;Y.id=A,Y.index=U,Y.streamIndex=K,Y.mediaType=te,Y.startNumber=Se,Y.fragmentInfoType=ae,Y.presentationTimeOffset=ye,_.representationInfo.push(Y),z(_.mediaType,y.default.MANIFEST_UPDATE_TRACK_INFO,_)}},addPlayList:function G(_){_.trace&&Array.isArray(_.trace)?_.trace.forEach(function(A){A.hasOwnProperty("subreplevel")&&!A.subreplevel&&delete A.subreplevel}):delete _.trace,ve(x.default.STREAM,y.default.PLAY_LIST,_)},addDVBErrors:function j(_){ve(x.default.STREAM,y.default.DVB_ERRORS,_)}},function I(){f={}}(),P}C.__dashjs_factory_name="MetricsModel",k.default=S.default.getSingletonFactory(C)},"./src/streaming/models/URIFragmentModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/vo/URIFragmentData.js"),y=u("./src/core/FactoryMaker.js");function M(){var D;return{initialize:function d(p){if(D=new x.default,!p)return null;var N=p.indexOf("#");if(-1!==N)for(var O=p.substr(N+1).split("&"),L=0,m=O.length;L<m;++L){var h=O[L],g=h.indexOf("=");if(-1!==g){var S=h.substring(0,g);D.hasOwnProperty(S)&&(D[S]=h.substr(g+1))}}},getURIFragmentData:function v(){return D}}}M.__dashjs_factory_name="URIFragmentModel",k.default=y.default.getSingletonFactory(M)},"./src/streaming/models/VideoModel.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),T=u("./src/core/Debug.js"),D=u("./src/streaming/constants/Constants.js"),d=new Map([[D.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[D.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[D.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[D.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function v(){var p,N,O,L,m,S=this.context,C=Object(y.default)(S).getInstance(),F=[];function P(){O&&(O.playbackRate=1,O.removeEventListener("canplay",P))}function Z(){return F.length>0}function re(){if(O&&Z()&&0===O.playbackRate){var Ie=document.createEvent("Event");Ie.initEvent("waiting",!0,!1),O.dispatchEvent(Ie)}}function G(Ie,we){O&&O.addEventListener(Ie,we)}function j(Ie,we){O&&O.removeEventListener(Ie,we)}function _(){return O?O.readyState:NaN}function A(){return O?O.buffered:null}function W(Ie,we,ke,Re,xe){if(O)for(var ze=0;ze<O.textTracks.length;ze++)if(O.textTracks[ze].kind===Ie&&(!we||O.textTracks[ze].label==we)&&O.textTracks[ze].language===ke&&O.textTracks[ze].isTTML===Re&&O.textTracks[ze].isEmbedded===xe)return O.textTracks[ze];return null}function Te(Ie,we){Ie===D.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||_()>=Ie?we():function Ne(Ie,we){G(Ie,function Re(){j(Ie,Re),we(Ie)})}(d.get(Ie),we)}return p={initialize:function w(){C.on(M.default.PLAYBACK_PLAYING,re,this)},setCurrentTime:function I(Ie,we){L=Ie,Te(D.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(O){if(O.currentTime===L)return void(L=NaN);try{L=we?function H(Ie){var we=A(),ke=Ie,Re=9999999999;if(we)for(var xe=0;xe<we.length;xe++){var ze=we.start(xe),ut=we.end(xe),at=Math.abs(ze-Ie),yt=Math.abs(ut-Ie);if(Ie>=ze&&Ie<=ut)return Ie;at<Re&&(Re=at,ke=ze),yt<Re&&(Re=yt,ke=ut)}return ke}(L):L,O.currentTime=L,L=NaN}catch(ke){0===O.readyState&&ke.code===ke.INVALID_STATE_ERR&&setTimeout(function(){O.currentTime=L,L=NaN},400)}}})},play:function ie(){if(O){O.autoplay=!0;var Ie=O.play();Ie&&Ie.catch&&typeof Promise<"u"&&Ie.catch(function(we){"NotAllowedError"===we.name&&C.trigger(M.default.PLAYBACK_NOT_ALLOWED),N.warn("Caught pending play exception - continuing (".concat(we,")"))})}},isPaused:function de(){return O?O.paused:null},pause:function ue(){O&&(O.pause(),O.autoplay=!1)},isStalled:Z,isSeeking:function le(){return O?O.seeking||!isNaN(L):null},getTime:function ce(){return O?isNaN(L)?O.currentTime:L:null},getPlaybackRate:function ne(){return O?O.playbackRate:null},setPlaybackRate:function f(Ie){!O||(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&O.readyState<=2&&Ie>0?O.addEventListener("canplay",P):O.playbackRate=Ie)},getPlayedRanges:function pe(){return O?O.played:null},getEnded:function ee(){return O?O.ended:null},setStallState:function se(Ie,we){!function ve(Ie,we){we?function oe(Ie){null===Ie||!O||O.seeking||-1!==F.indexOf(Ie)||F.push(Ie)}(Ie):function he(Ie){var we=F.indexOf(Ie);null!==Ie&&-1!==we&&F.splice(we,1)}(Ie)}(Ie,we)},getElement:function $(){return O},setElement:function z(Ie){if(!(null==Ie||Ie&&/^(VIDEO|AUDIO)$/i.test(Ie.nodeName)))throw"element is not video or audio DOM type!";(O=Ie)&&(O.preload="auto")},setSource:function q(Ie){O&&(Ie?O.src=Ie:(O.removeAttribute("src"),O.load()))},getSource:function J(){return O?O.src:null},getTTMLRenderingDiv:function X(){return m},setTTMLRenderingDiv:function V(Ie){(m=Ie).style.position="absolute",m.style.display="flex",m.style.overflow="hidden",m.style.pointerEvents="none",m.style.top=0,m.style.left=0},getPlaybackQuality:function ge(){if(!O)return null;var Ie="webkitDroppedFrameCount"in O&&"webkitDecodedFrameCount"in O,ke=null;return"getVideoPlaybackQuality"in O?ke=O.getVideoPlaybackQuality():Ie&&(ke={droppedVideoFrames:O.webkitDroppedFrameCount,totalVideoFrames:O.webkitDroppedFrameCount+O.webkitDecodedFrameCount,creationTime:new Date}),ke},addEventListener:G,removeEventListener:j,getReadyState:_,getBufferRange:A,getClientWidth:function U(){return O?O.clientWidth:NaN},getClientHeight:function K(){return O?O.clientHeight:NaN},getTextTracks:function Y(){return O?O.textTracks:[]},getTextTrack:W,addTextTrack:function _e(Ie,we,ke,Re,xe){if(!O)return null;var ze=W(Ie,we,ke,Re,xe);return ze||((ze=O.addTextTrack(Ie,we,ke)).isEmbedded=xe,ze.isTTML=Re),ze},appendChild:function Ee(Ie){O&&(O.appendChild(Ie),void 0!==Ie.isTTML&&(O.textTracks[O.textTracks.length-1].isTTML=Ie.isTTML,O.textTracks[O.textTracks.length-1].isEmbedded=Ie.isEmbedded))},removeChild:function me(Ie){O&&O.removeChild(Ie)},getVideoWidth:function te(){return O?O.videoWidth:NaN},getVideoHeight:function ye(){return O?O.videoHeight:NaN},getVideoRelativeOffsetTop:function Se(){var Ie=O.parentNode.host||O.parentNode;return Ie?O.getBoundingClientRect().top-Ie.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function ae(){var Ie=O.parentNode.host||O.parentNode;return Ie?O.getBoundingClientRect().left-Ie.getBoundingClientRect().left:NaN},waitForReadyState:Te,reset:function b(){C.off(M.default.PLAYBACK_PLAYING,re,this)}},function R(){N=Object(T.default)(S).getInstance().getLogger(p),L=NaN}(),p}v.__dashjs_factory_name="VideoModel",k.default=x.default.getSingletonFactory(v)},"./src/streaming/net/FetchLoader.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Settings.js"),M=u("./src/streaming/constants/Constants.js");function T(h,g){return function v(h){if(Array.isArray(h))return h}(h)||function d(h,g){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(h)){var S=[],C=!0,F=!1,R=void 0;try{for(var b,w=h[Symbol.iterator]();!(C=(b=w.next()).done)&&(S.push(b.value),!g||S.length!==g);C=!0);}catch(P){F=!0,R=P}finally{try{!C&&null!=w.return&&w.return()}finally{if(F)throw R}}return S}}(h,g)||N(h,g)||function D(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(h,g){if(h){if("string"==typeof h)return O(h,g);var S=Object.prototype.toString.call(h).slice(8,-1);if("Object"===S&&h.constructor&&(S=h.constructor.name),"Map"===S||"Set"===S)return Array.from(h);if("Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return O(h,g)}}function O(h,g){(null==g||g>h.length)&&(g=h.length);for(var S=0,C=new Array(g);S<g;S++)C[S]=h[S];return C}function L(h){var b,g=this.context,S=(h=h||{}).requestModifier,C=h.lowLatencyThroughputModel,F=h.boxParser,R=Object(y.default)(g).getInstance();function I(J,X){J.reader.read().then(X).catch(function(V){J.onerror&&200===J.response.status&&J.onerror(V)})}function z(J,X){try{if((J=J.filter(function(Z){return Z.bytes>X/4/J.length})).length>1){var V=0,se=(J[J.length-1].ts-J[0].ts)/J.length;return J.forEach(function(Z,oe){var he=J[oe+1];if(he){var ve=he.ts-Z.ts;V+=ve<se?ve:0}}),V}return null}catch{return null}}return{load:function f(J){var he,X=new Date,V=J.request,se=new Headers;if(V.range&&se.append("Range","bytes="+V.range),J.headers)for(var Z in J.headers){var oe=J.headers[Z];oe&&se.append(Z,oe)}V.requestStartDate||(V.requestStartDate=X),S&&S.modifyRequestHeader({setRequestHeader:function(ue,le){se.append(ue,le)}}),"function"==typeof window.AbortController&&(he=new AbortController,J.abortController=he,he.signal.onabort=J.onabort);var ve={method:J.method,headers:se,credentials:J.withCredentials?"include":void 0,signal:he?he.signal:void 0},re=R.get().streaming.abr.fetchThroughputCalculationMode,ge=Date.now(),ie=0;new Promise(function(de){if(re===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&C&&(ie=C.getThroughputCapacityDelayMS(V,1e3*b.getCurrentBufferLevel(V.mediaType))))return setTimeout(de,ie);de()}).then(function(){var de=Date.now();fetch(J.url,ve).then(function(ue){J.response||(J.response={}),J.response.status=ue.status,J.response.statusText=ue.statusText,J.response.responseURL=ue.url,ue.ok||J.onerror();var ne,le="",ce=function p(h,g){var S;if(typeof Symbol>"u"||null==h[Symbol.iterator]){if(Array.isArray(h)||(S=N(h))||g&&h&&"number"==typeof h.length){S&&(h=S);var C=0,F=function(){};return{s:F,n:function(){return C>=h.length?{done:!0}:{done:!1,value:h[C++]}},e:function(f){throw f},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var b,R=!0,w=!1;return{s:function(){S=h[Symbol.iterator]()},n:function(){var f=S.next();return R=f.done,f},e:function(f){w=!0,b=f},f:function(){try{!R&&null!=S.return&&S.return()}finally{if(w)throw b}}}}(ue.headers.keys());try{for(ce.s();!(ne=ce.n()).done;){var pe=ne.value;le+=pe+": "+ue.headers.get(pe)+"\r\n"}}catch(Ne){ce.e(Ne)}finally{ce.f()}if(J.response.responseHeaders=le,!ue.body)return ue.arrayBuffer().then(function(Ne){J.response.response=Ne,J.progress({loaded:Ne.byteLength,total:Ne.byteLength,stream:!1}),J.onload(),J.onend()});var we,ke,ee=parseInt(ue.headers.get("Content-Length"),10),G=0,j=!1,_=new Uint8Array,A=0;if(re===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&C){var K=de,te=0,Se=T(ue.body.tee(),2),Y=Se[1];we=Se[0].getReader(),ke=[],we.read().then(function Re(xe){var ze=xe.value,ut=xe.done;if(te=Date.now(),ze&&ze.length){var at=te-K,yt=ze.length;ke.push({chunkDownloadTimeRelativeMS:te-de,chunkDownloadDurationMS:at,chunkBytes:yt,kbps:Math.round(8*yt/(at/1e3)),bufferLevel:b.getCurrentBufferLevel(V.mediaType)})}if(ut){var Lt=te-de,kt=ke.reduce(function(Zt,nn){return Zt+nn.chunkBytes},0);return C.addMeasurement(V,Lt,ke,ge,ie,le),void J.progress({loaded:kt,total:kt,lengthComputable:!0,time:C.getEstimatedDownloadDurationMS(V),stream:!0})}return K=Date.now(),we.read().then(Re)}),J.reader=Y.getReader()}else J.reader=ue.body.getReader();var W=[],_e=[],Ee=[],me=!0;I(J,function Ne(Ie){var we=Ie.value;if(Ie.done){if(_){if(re!==M.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Re=null;re===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&(Re=function q(J,X){try{var V,se;V=J.filter(function(de,ue){return ue<J.length-1}),se=X.filter(function(de,ue){return ue<X.length-1});var Z=[];if(V.length>1){for(var oe=0,he=0,ve=0;ve<V.length;ve++)if(V[ve]&&se[ve]){var re=se[ve].ts-V[ve].ts;if(re>1)Z.push(8*se[ve].bytes/re);else{0===he&&(he=V[ve].ts);var ge=se[ve].ts-he;ge>1?(Z.push(8*oe/ge),oe=0,he=0):oe+=se[ve].bytes}}if(Z.length>0)return Z.reduce(function(de,ue){return de+ue},0)/Z.length}return null}catch{return null}}(_e,Ee)),J.progress({loaded:G,total:isNaN(ee)?G:ee,lengthComputable:!0,time:z(W,G),throughput:Re,stream:!0})}J.response.response=_.buffer}return J.onload(),void J.onend()}if(we&&we.length>0){_=function H(J,X){if(0===J.length)return X;var V=new Uint8Array(J.length+X.length);return V.set(J),V.set(X,J.length),V}(_,we),G+=we.length,W.push({ts:Date.now(),bytes:we.length}),re===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&me&&F.findLastTopIsoBoxCompleted(["moof"],_,A).found&&(me=!1,_e.push({ts:performance.now(),bytes:we.length}));var ze=F.findLastTopIsoBoxCompleted(["moov","mdat"],_,A);if(ze.found){var at,ut=ze.lastCompletedOffset+ze.size;re===M.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&!me&&(me=!0,Ee.push({ts:performance.now(),bytes:_.length})),ut===_.length?(at=_,_=new Uint8Array):(at=new Uint8Array(_.subarray(0,ut)),_=_.subarray(ut)),J.progress({data:at.buffer,lengthComputable:!1,noTrace:!0}),A=0}else A=ze.lastCompletedOffset,j||(J.progress({lengthComputable:!1,noTrace:!0}),j=!0)}I(J,Ne)})}).catch(function(ue){J.onerror&&J.onerror(ue)})})},abort:function $(J){if(J.abortController)J.abortController.abort();else if(J.reader)try{J.reader.cancel(),J.onabort()}catch{}},calculateDownloadedTime:z,setup:function P(J){b=J.dashMetrics}}}L.__dashjs_factory_name="FetchLoader";var m=x.default.getClassFactory(L);k.default=m},"./src/streaming/net/HTTPLoader.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/net/XHRLoader.js"),y=u("./src/streaming/net/FetchLoader.js"),M=u("./src/streaming/vo/metrics/HTTPRequest.js"),T=u("./src/core/FactoryMaker.js"),D=u("./src/streaming/vo/DashJSError.js"),d=u("./src/streaming/models/CmcdModel.js"),v=u("./src/core/Utils.js"),p=u("./src/core/Debug.js"),N=u("./src/core/EventBus.js"),O=u("./src/core/events/Events.js"),L=u("./src/core/Settings.js"),m=u("./src/streaming/constants/Constants.js"),h=u("./src/streaming/models/LowLatencyThroughputModel.js"),g=u("./src/streaming/models/CustomParametersModel.js");function S(R,w,b){return w in R?Object.defineProperty(R,w,{value:b,enumerable:!0,configurable:!0,writable:!0}):R[w]=b,R}function C(R){var X,V,se,Z,oe,he,ve,re,ge,w=this.context,b=(R=R||{}).errHandler,P=R.dashMetrics,f=R.mediaPlayerModel,I=R.requestModifier,H=R.boxParser,$=R.errors,z=R.requestTimeout||0,q=Object(N.default)(w).getInstance(),J=Object(L.default)(w).getInstance();function de(ne,pe){var ye,ee=ne.request,G=[],j=!0,_=!0,A=new Date,U=A,K=0,te=null;if(!I||!P||!b)throw new Error("config object is not correct or missing");var me,Se=function(at){if(_=!1,ee.requestStartDate=A,ee.requestEndDate=new Date,ee.firstByteDate=ee.firstByteDate||A,ee.fileLoaderType=te,!ee.checkExistenceOnly){var yt=ye.response?ye.response.responseURL:null,Lt=ye.response?ye.response.status:null,kt=ye.response&&ye.response.getAllResponseHeaders?ye.response.getAllResponseHeaders():ye.response?ye.response.responseHeaders:[];P.addHttpRequest(ee,yt,Lt,kt,at?G:null),ee.type===M.HTTPRequest.MPD_TYPE&&P.addManifestUpdate(ee)}},ae=function(){if(-1!==V.indexOf(ye)&&(V.splice(V.indexOf(ye),1),_))if(Se(!1),pe>0){try{J.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&ee.type===M.HTTPRequest.MEDIA_SEGMENT_TYPE&&f.getRetryAttemptsForType(M.HTTPRequest.MEDIA_SEGMENT_TYPE)===pe&&q.trigger(O.default.ATTEMPT_BACKGROUND_SYNC)}catch{}pe--;var yt={config:ne};Z.push(yt),yt.timeout=setTimeout(function(){-1!==Z.indexOf(yt)&&(Z.splice(Z.indexOf(yt),1),de(ne,pe))},f.getRetryIntervalsForType(ee.type))}else{if(ee.type===M.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;b.error(new D.default(oe[ee.type],ee.url+" is not available",{request:ee,response:ye.response})),ne.error&&ne.error(ee,"error",ye.response.statusText),ne.complete&&ne.complete(ee,ye.response.statusText)}};ee.hasOwnProperty("availabilityTimeComplete")&&!1===ee.availabilityTimeComplete&&window.fetch&&"arraybuffer"===ee.responseType&&ee.type===M.HTTPRequest.MEDIA_SEGMENT_TYPE?((me=Object(y.default)(w).create({requestModifier:I,lowLatencyThroughputModel:re,boxParser:H})).setup({dashMetrics:P}),te=m.default.FILE_LOADER_TYPES.FETCH):(me=Object(x.default)(w).create({requestModifier:I}),te=m.default.FILE_LOADER_TYPES.XHR);var Te=null,Ne=I.modifyRequestURL(ee.url);if(J.get().streaming.cmcd&&J.get().streaming.cmcd.enabled){var Ie=J.get().streaming.cmcd.mode;if(Ie===m.default.CMCD_MODE_QUERY){var we=function ue(ne){try{var pe=[],ee=he.getQueryParameter(ne);return ee&&pe.push(ee),pe}catch{return[]}}(ee);Ne=v.default.addAditionalQueryParameterToUrl(Ne,we)}else Ie===m.default.CMCD_MODE_HEADER&&(Te=he.getHeaderParameters(ee))}ee.url=Ne;var ke=ee.checkExistenceOnly?M.HTTPRequest.HEAD:M.HTTPRequest.GET,Re=ve.getXHRWithCredentialsForType(ee.type);ye={url:Ne,method:ke,withCredentials:Re,request:ee,onload:function(){ye.response.status>=200&&ye.response.status<=299&&(Se(!0),ne.success&&ne.success(ye.response.response,ye.response.statusText,ye.response.responseURL),ne.complete&&ne.complete(ee,ye.response.statusText))},onend:ae,onerror:ae,progress:function(at){var yt=new Date;j&&(j=!1,(!at.lengthComputable||at.lengthComputable&&at.total!==at.loaded)&&(ee.firstByteDate=yt)),at.lengthComputable&&(ee.bytesLoaded=at.loaded,ee.bytesTotal=at.total),at.noTrace||(G.push({s:U,d:at.time?at.time:yt.getTime()-U.getTime(),b:[at.loaded?at.loaded-K:0],t:at.throughput}),U=yt,K=at.loaded),ne.progress&&at&&ne.progress(at)},onabort:function(){ne.abort&&ne.abort(ee)},ontimeout:function(at){var yt;yt=at.lengthComputable?"Request timeout: loaded: "+at.loaded+", out of: "+at.total+" : "+(at.loaded/at.total*100).toFixed(3)+"% Completed":"Request timeout: non-computable download size",ge.warn(yt)},loader:me,timeout:z,headers:Te};var xe=(new Date).getTime();if(isNaN(ee.delayLoadingTime)||xe>=ee.delayLoadingTime)V.push(ye),me.load(ye);else{var ze={httpRequest:ye};se.push(ze),ze.delayTimeout=setTimeout(function(){if(-1!==se.indexOf(ze)){se.splice(se.indexOf(ze),1);try{A=new Date,U=A,V.push(ze.httpRequest),me.load(ze.httpRequest)}catch{ze.httpRequest.onerror()}}},ee.delayLoadingTime-xe)}}return X={load:function le(ne){ne.request?de(ne,f.getRetryAttemptsForType(ne.request.type)):ne.error&&ne.error(ne.request,"error")},abort:function ce(){Z.forEach(function(ne){clearTimeout(ne.timeout),ne.config.request&&ne.config.abort&&ne.config.abort(ne.config.request)}),Z=[],se.forEach(function(ne){return clearTimeout(ne.delayTimeout)}),se=[],V.forEach(function(ne){ne.request.type!==M.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(ne.onloadend=ne.onerror=ne.onprogress=void 0,ne.loader.abort(ne))}),V=[]}},function ie(){var ne;ge=Object(p.default)(w).getInstance().getLogger(X),V=[],se=[],Z=[],he=Object(d.default)(w).getInstance(),re=Object(h.default)(w).getInstance(),ve=Object(g.default)(w).getInstance(),S(ne={},M.HTTPRequest.MPD_TYPE,$.DOWNLOAD_ERROR_ID_MANIFEST_CODE),S(ne,M.HTTPRequest.XLINK_EXPANSION_TYPE,$.DOWNLOAD_ERROR_ID_XLINK_CODE),S(ne,M.HTTPRequest.INIT_SEGMENT_TYPE,$.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),S(ne,M.HTTPRequest.MEDIA_SEGMENT_TYPE,$.DOWNLOAD_ERROR_ID_CONTENT_CODE),S(ne,M.HTTPRequest.INDEX_SEGMENT_TYPE,$.DOWNLOAD_ERROR_ID_CONTENT_CODE),S(ne,M.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,$.DOWNLOAD_ERROR_ID_CONTENT_CODE),S(ne,M.HTTPRequest.OTHER_TYPE,$.DOWNLOAD_ERROR_ID_CONTENT_CODE),oe=ne}(),X}C.__dashjs_factory_name="HTTPLoader";var F=T.default.getClassFactory(C);k.default=F},"./src/streaming/net/SchemeLoaderFactory.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/net/HTTPLoader.js");function M(){var d;function N(){d={}}function L(){N()}return function m(){L()}(),{getLoader:function O(h){for(var g in d)if(d.hasOwnProperty(g)&&h.startsWith(g))return d[g];return y.default},registerLoader:function v(h,g){d[h]=g},unregisterLoader:function p(h){d[h]&&delete d[h]},unregisterAllLoader:N,reset:L}}M.__dashjs_factory_name="SchemeLoaderFactory";var T=x.default.getSingletonFactory(M);k.default=T},"./src/streaming/net/URLLoader.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/net/SchemeLoaderFactory.js");function M(D){D=D||{};var p,N,d=this.context;return p=Object(y.default)(d).getInstance(),{load:function O(m){if(!N){var h=p.getLoader(m&&m.request?m.request.url:null);N=h(d).create({errHandler:D.errHandler,mediaPlayerModel:D.mediaPlayerModel,requestModifier:D.requestModifier,dashMetrics:D.dashMetrics,boxParser:D.boxParser?D.boxParser:null,constants:D.constants?D.constants:null,dashConstants:D.dashConstants?D.dashConstants:null,urlUtils:D.urlUtils?D.urlUtils:null,requestTimeout:isNaN(D.requestTimeout)?0:D.requestTimeout,errors:D.errors})}N.load(m)},abort:function L(){N&&N.abort()}}}M.__dashjs_factory_name="URLLoader";var T=x.default.getClassFactory(M);k.default=T},"./src/streaming/net/XHRLoader.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(T){var D=(T=T||{}).requestModifier;return{load:function v(N){var O=new Date,L=N.request,m=new XMLHttpRequest;if(m.open(N.method,N.url,!0),L.responseType&&(m.responseType=L.responseType),L.range&&m.setRequestHeader("Range","bytes="+L.range),L.requestStartDate||(L.requestStartDate=O),D&&(m=D.modifyRequestHeader(m)),N.headers)for(var h in N.headers){var g=N.headers[h];g&&m.setRequestHeader(h,g)}m.withCredentials=N.withCredentials,m.onload=N.onload,m.onloadend=N.onend,m.onerror=N.onerror,m.onprogress=N.progress,m.onabort=N.onabort,m.ontimeout=N.ontimeout,m.timeout=N.timeout,m.send(),N.response=m},abort:function p(N){var O=N.response;O.onloadend=O.onerror=O.onprogress=void 0,O.abort()}}}y.__dashjs_factory_name="XHRLoader";var M=x.default.getClassFactory(y);k.default=M},"./src/streaming/protection/CommonEncryption.js":function(Oe,k,u){"use strict";function y(d,v){for(var p=0;p<v.length;p++){var N=v[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}u.r(k);var T={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};k.default=function(){function d(){!function x(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")}(this,d)}return function M(d,v,p){return v&&y(d.prototype,v),p&&y(d,p),d}(d,null,[{key:"findCencContentProtection",value:function(p){for(var N=null,O=0;O<p.length;++O){var L=p[O];"urn:mpeg:dash:mp4protection:2011"===L.schemeIdUri.toLowerCase()&&("cenc"===L.value.toLowerCase()||"cbcs"===L.value.toLowerCase())&&(N=L)}return N}},{key:"getPSSHData",value:function(p){var N=8,O=new DataView(p),L=O.getUint8(N);return N+=20,L>0&&(N+=4+16*O.getUint32(N)),p.slice(N+=4)}},{key:"getPSSHForKeySystem",value:function(p,N){var O=d.parsePSSHList(N);return p&&O.hasOwnProperty(p.uuid.toLowerCase())?O[p.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(p,N){return"pssh"in p?(p.pssh.__text=p.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),N.decodeArray(p.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(p){if(null==p)return[];for(var N=new DataView(p.buffer||p),L={},m=0;;){var g,S=void 0,C=void 0,F=m;if(m>=N.buffer.byteLength)break;if(g=m+N.getUint32(m),1886614376===N.getUint32(m+=4))if(0===(S=N.getUint8(m+=4))||1===S){m++,m+=3,C="";var R=void 0,w=void 0;for(R=0;R<4;R++)C+=1===(w=N.getUint8(m+R).toString(16)).length?"0"+w:w;for(m+=4,C+="-",R=0;R<2;R++)C+=1===(w=N.getUint8(m+R).toString(16)).length?"0"+w:w;for(m+=2,C+="-",R=0;R<2;R++)C+=1===(w=N.getUint8(m+R).toString(16)).length?"0"+w:w;for(m+=2,C+="-",R=0;R<2;R++)C+=1===(w=N.getUint8(m+R).toString(16)).length?"0"+w:w;for(m+=2,C+="-",R=0;R<6;R++)C+=1===(w=N.getUint8(m+R).toString(16)).length?"0"+w:w;m+=6,m+=4,L[C=C.toLowerCase()]=N.buffer.slice(F,g),m=g}else m=g;else m=g}return L}},{key:"getLicenseServerUrlFromMediaInfo",value:function(p,N){try{if(!p||0===p.length)return null;for(var O=0,L=null;O<p.length&&!L;){var m=p[O];if(m&&m.contentProtection&&m.contentProtection.length>0){var h=m.contentProtection.filter(function(b){return b.schemeIdUri&&b.schemeIdUri===N});if(h&&h.length>0)for(var g=0;g<h.length&&!L;){for(var S=h[g],C=0;C<T.attributes.length&&!L;){for(var F=0,R=T.attributes[C];F<T.prefixes.length&&!L;)S[R]&&S[R].__prefix&&S[R].__prefix===T.prefixes[F]&&S[R].__text&&(L=S[R].__text),F+=1;C+=1}g+=1}}O+=1}return L}catch{return null}}}]),d}()},"./src/streaming/protection/Protection.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/controllers/ProtectionController.js"),y=u("./src/streaming/protection/controllers/ProtectionKeyController.js"),M=u("./src/streaming/protection/ProtectionEvents.js"),T=u("./src/streaming/protection/errors/ProtectionErrors.js"),D=u("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),d=u("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),v=u("./src/streaming/protection/models/ProtectionModel_01b.js"),p=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],N=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function O(){var m,h=this.context;function C(F,R){for(var w=0;w<R.length;w++){var b=R[w];if("function"==typeof F[b[Object.keys(b)[0]]])return b}return null}return m={createProtectionSystem:function g(F){var R=null,w=Object(y.default)(h).getInstance();w.setConfig({debug:F.debug,BASE64:F.BASE64,settings:F.settings}),w.initialize();var b=function S(F){var R=F.debug,w=R.getLogger(m),b=F.eventBus,P=F.errHandler,f=F.videoModel?F.videoModel.getElement():null;return f&&void 0===f.onencrypted||f&&void 0===f.mediaKeys?C(f,N)?(w.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(d.default)(h).create({debug:R,eventBus:b,events:F.events,api:C(f,N)})):C(f,p)?(w.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(v.default)(h).create({debug:R,eventBus:b,errHandler:P,events:F.events,api:C(f,p)})):(w.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(w.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(D.default)(h).create({debug:R,eventBus:b,events:F.events}))}(F);return!R&&b&&(R=Object(x.default)(h).create({protectionModel:b,protectionKeyController:w,eventBus:F.eventBus,debug:F.debug,events:F.events,BASE64:F.BASE64,constants:F.constants,cmcdModel:F.cmcdModel,customParametersModel:F.customParametersModel,settings:F.settings}),F.capabilities.setEncryptedMediaSupported(!0)),R}}}O.__dashjs_factory_name="Protection";var L=dashjs.FactoryMaker.getClassFactory(O);L.events=M.default,L.errors=T.default,dashjs.FactoryMaker.updateClassFactory(O.__dashjs_factory_name,L),k.default=L},"./src/streaming/protection/ProtectionEvents.js":function(Oe,k,u){"use strict";function y(h){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function T(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function d(h){var g=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=O(h);if(g){var R=O(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return v(this,F)}}function v(h,g){return!g||"object"!==y(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function O(h){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){T(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",C.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",C.KEY_ADDED="public_keyAdded",C.KEY_ERROR="public_keyError",C.KEY_MESSAGE="public_keyMessage",C.KEY_SESSION_CLOSED="public_keySessionClosed",C.KEY_SESSION_CREATED="public_keySessionCreated",C.KEY_SESSION_REMOVED="public_keySessionRemoved",C.KEY_STATUSES_CHANGED="public_keyStatusesChanged",C.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",C.KEY_SYSTEM_SELECTED="public_keySystemSelected",C.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",C.LICENSE_REQUEST_SENDING="public_licenseRequestSending",C.NEED_KEY="needkey",C.PROTECTION_CREATED="public_protectioncreated",C.PROTECTION_DESTROYED="public_protectiondestroyed",C.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",C.TEARDOWN_COMPLETE="protectionTeardownComplete",C.VIDEO_ELEMENT_SELECTED="videoElementSelected",C.KEY_SESSION_UPDATED="public_keySessionUpdated",C}return S}(u("./src/core/events/EventsBase.js").default));k.default=m},"./src/streaming/protection/controllers/ProtectionController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/CommonEncryption.js"),y=u("./src/streaming/protection/vo/MediaCapability.js"),M=u("./src/streaming/protection/vo/KeySystemConfiguration.js"),T=u("./src/streaming/protection/errors/ProtectionErrors.js"),D=u("./src/streaming/vo/DashJSError.js"),d=u("./src/streaming/protection/vo/LicenseRequest.js"),v=u("./src/streaming/protection/vo/LicenseResponse.js"),p=u("./src/streaming/vo/metrics/HTTPRequest.js"),N=u("./src/core/Utils.js"),O=u("./src/streaming/constants/Constants.js"),L=u("./src/core/FactoryMaker.js");function m(w){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(w)}function R(w){var se,Z,oe,he,ve,re,ge,ie,de,ue,le,b=(w=w||{}).protectionKeyController,P=w.protectionModel,f=w.eventBus,I=w.events,H=w.debug,$=w.BASE64,z=w.constants,q=[],J=w.cmcdModel,X=w.settings,V=w.customParametersModel;function ne(){if(!(f&&f.hasOwnProperty("on")&&b&&b.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function ee(Ce,Ue){de?oe.push(Ce):ie?ie&&function j(Ce){var Ue=Ce.findIndex(function(st){return st.ks===ie}),Qe=Ce[Ue];-1===Ue||!Qe.initData||_(Qe)}(Ce):function G(Ce,Ue){de=!0;var Ze,Qe=[];Ce=Ce.sort(function(ht,Ut){return(ve&&ve[ht.ks.systemString]&&ve[ht.ks.systemString].priority>=0?ve[ht.ks.systemString].priority:Ce.length)-(ve&&ve[Ut.ks.systemString]&&ve[Ut.ks.systemString].priority>=0?ve[Ut.ks.systemString].priority:Ce.length)}),oe.push(Ce);for(var st=0;st<Ce.length;st++){var ct=ke(Ce[st]);Qe.push({ks:Ce[st].ks,configs:[ct],protData:Ce[st].protData})}P.requestKeySystemAccess(Qe).then(function(ht){return Z.info("DRM: KeySystem Access Granted for system string ("+((Ze=ht.data).mksa&&Ze.mksa.selectedSystemString?Ze.mksa.selectedSystemString:Ze.keySystem.systemString)+")!  Selecting key system..."),P.selectKeySystem(Ze)}).then(function(ht){if(ie=ht,de=!1,P){f.trigger(I.KEY_SYSTEM_SELECTED,{data:Ze});var Ut=K(ie);Ut&&Ut.serverCertificate&&Ut.serverCertificate.length>0&&P.setServerCertificate($.decodeArray(Ut.serverCertificate).buffer);for(var It,Wt=0;Wt<oe.length;Wt++)for(It=0;It<oe[Wt].length;It++)if(ie===oe[Wt][It].ks){_(oe[Wt][It]);break}}}).catch(function(ht){ie=null,de=!1,Ue||f.trigger(I.KEY_SYSTEM_SELECTED,{data:null,error:new D.default(T.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,T.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+ht.error)})})}(Ce,Ue)}function _(Ce){if(b.isClearKey(ie)&&Ce.protData&&Ce.protData.hasOwnProperty("clearkeys")){var Ue={kids:Object.keys(Ce.protData.clearkeys)};Ce.initData=(new TextEncoder).encode(JSON.stringify(Ue))}Ce.sessionId?A(Ce):null!==Ce.initData&&U(Ce)}function A(Ce){ne(),P.loadKeySession(Ce)}function U(Ce){var Ue=x.default.getPSSHForKeySystem(ie,Ce?Ce.initData:null);if(Ue){if(function Se(Ce){if(!Ce)return!1;try{for(var Ue=P.getSessions(),Qe=0;Qe<Ue.length;Qe++)if(Ue[Qe].getKeyId()===Ce)return!0;return!1}catch{return!1}}(Ce.keyId)||ae(Ue))return;try{Ce.initData=Ue,P.createKeySession(Ce)}catch(Qe){f.trigger(I.KEY_SESSION_CREATED,{data:null,error:new D.default(T.default.KEY_SESSION_CREATED_ERROR_CODE,T.default.KEY_SESSION_CREATED_ERROR_MESSAGE+Qe.message)})}}else Ce&&Ce.initData?P.createKeySession(Ce):f.trigger(I.KEY_SESSION_CREATED,{data:null,error:new D.default(T.default.KEY_SESSION_CREATED_ERROR_CODE,T.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(ie?ie.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function K(Ce){if(Ce){var Ue=Ce.systemString;if(ve)return Ue in ve?ve[Ue]:null}return null}function ae(Ce){if(!Ce)return!1;try{for(var Ue=P.getAllInitData(),Qe=0;Qe<Ue.length;Qe++)if(b.initDataEquals(Ce,Ue[Qe]))return Z.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function Ee(Ce){ne(),Ce?(P.setMediaElement(Ce),f.on(I.NEED_KEY,sn,se)):null===Ce&&(P.setMediaElement(Ce),f.off(I.NEED_KEY,sn,se))}function ke(Ce){var Ue=Ce.protData,Qe=[],st=[],ct=Ue&&Ue.audioRobustness&&Ue.audioRobustness.length>0?Ue.audioRobustness:ge,Ze=Ue&&Ue.videoRobustness&&Ue.videoRobustness.length>0?Ue.videoRobustness:ge,ht=Ce.sessionType,Ut=Ue&&Ue.distinctiveIdentifier?Ue.distinctiveIdentifier:"optional",It=Ue&&Ue.persistentState?Ue.persistentState:"temporary"===ht?"optional":"required";return he.forEach(function(Wt){Wt.type===z.AUDIO?Qe.push(new y.default(Wt.codec,ct)):Wt.type===z.VIDEO&&st.push(new y.default(Wt.codec,Ze))}),new M.default(Qe,st,Ut,It,[ht])}function Re(Ce){Ce.error?f.trigger(I.KEY_STATUSES_CHANGED,{data:null,error:Ce.error}):Z.debug("DRM: key status = "+Ce.status)}function xe(Ce){Z.debug("DRM: onKeyMessage");var Ue=Ce.data;f.trigger(I.KEY_MESSAGE,{data:Ue});var Qe=Ue.messageType?Ue.messageType:"license-request",st=Ue.message,ct=Ue.sessionToken,Ze=K(ie),ht=b.getLicenseServerModelInstance(ie,Ze,Qe),Ut={sessionToken:ct,messageType:Qe};if(st&&0!==st.byteLength){if(!ht)return Z.debug("DRM: License server request not required for this message (type = "+Ce.data.messageType+").  Session ID = "+ct.getSessionId()),void ze(Ut);if(b.isClearKey(ie)){var It=b.processClearKeyLicenseRequest(ie,Ze,st);if(It)return Z.debug("DRM: ClearKey license request handled by application!"),ze(Ut),void P.updateKeySession(ct,It)}!function ut(Ce,Ue,Qe){var st=Ce.sessionToken,ct=Ce.messageType?Ce.messageType:"license-request",Ze={sessionToken:st,messageType:ct},ht=ie?ie.systemString:null,Ut=function Lt(Ce,Ue,Qe,st,ct){var Ze=null,ht=st.message;if(Ce&&Ce.serverURL){var Ut=Ce.serverURL;"string"==typeof Ut&&""!==Ut?Ze=Ut:"object"===m(Ut)&&Ut.hasOwnProperty(Ue)&&(Ze=Ut[Ue])}else if(Ce&&Ce.laURL&&""!==Ce.laURL)Ze=Ce.laURL;else if(!(Ze=x.default.getLicenseServerUrlFromMediaInfo(he,ie.schemeIdURI))&&!b.isClearKey(ie)){var It=x.default.getPSSHData(Qe.initData);(Ze=ie.getLicenseServerURLFromInitData(It))||(Ze=st.laURL)}return ct.getServerURLFromMessage(Ze,ht,Ue)}(Qe,ct,st,Ce,Ue);if(Ut){var It={},Wt=!1;Qe&&kt(It,Qe.httpRequestHeaders);var Fe=Ce.message;kt(It,ie.getRequestHeadersFromMessage(Fe)),Object.keys(It).forEach(function(tt){"authorization"===tt.toLowerCase()&&(Wt=!0)}),Qe&&"boolean"==typeof Qe.withCredentials&&(Wt=Qe.withCredentials);var et=function(Et){if(P)if(Et.status>=200&&Et.status<=299){var Yt=N.default.parseHttpHeaders(Et.getAllResponseHeaders?Et.getAllResponseHeaders():null),an=new v.default(Et.responseURL,Yt,Et.response);nn(V.getLicenseResponseFilters(),an).then(function(){var Vt=Ue.getLicenseMessage(an.data,ht,ct);null!==Vt?(ze(Ze),P.updateKeySession(st,Vt)):Zt(Et,Ze,ht,ct,Ue)})}else Zt(Et,Ze,ht,ct,Ue)},Rt=function(Et){ze(Ze,new D.default(T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ht+' update, XHR aborted. status is "'+Et.statusText+'" ('+Et.status+"), readyState is "+Et.readyState))},Tt=function(Et){ze(Ze,new D.default(T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ht+' update, XHR error. status is "'+Et.statusText+'" ('+Et.status+"), readyState is "+Et.readyState))},bt=ie.getLicenseRequestFromMessage(Fe),rn=Ue.getHTTPMethod(ct),lt=Ue.getResponseType(ht,ct),jt=Qe&&!isNaN(Qe.httpTimeout)?Qe.httpTimeout:8e3,Me=st.getSessionId()||null,$e=new d.default(Ut,rn,lt,It,Wt,ct,Me,bt),mt=isNaN(X.get().streaming.retryAttempts[p.HTTPRequest.LICENSE])?3:X.get().streaming.retryAttempts[p.HTTPRequest.LICENSE];nn(V.getLicenseRequestFilters(),$e).then(function(){at($e,mt,jt,et,Rt,Tt)})}else ze(Ze,new D.default(T.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(Ue,ht,Ze)}else ze(Ut,new D.default(T.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function ze(Ce,Ue){f.trigger(I.LICENSE_REQUEST_COMPLETE,{data:Ce,error:Ue})}function at(Ce,Ue,Qe,st,ct,Ze){var ht=new XMLHttpRequest;if(X.get().streaming.cmcd&&X.get().streaming.cmcd.enabled&&X.get().streaming.cmcd.mode===O.default.CMCD_MODE_QUERY){var It=J.getQueryParameter({url:Ce.url,type:p.HTTPRequest.LICENSE});It&&(Ce.url=N.default.addAditionalQueryParameterToUrl(Ce.url,[It]))}for(var Wt in ht.open(Ce.method,Ce.url,!0),ht.responseType=Ce.responseType,ht.withCredentials=Ce.withCredentials,Qe>0&&(ht.timeout=Qe),Ce.headers)ht.setRequestHeader(Wt,Ce.headers[Wt]);if(X.get().streaming.cmcd&&X.get().streaming.cmcd.enabled&&X.get().streaming.cmcd.mode===O.default.CMCD_MODE_HEADER){var Ye=J.getHeaderParameters({url:Ce.url,type:p.HTTPRequest.LICENSE});if(Ye)for(var et in Ye){var Rt=Ye[et];Rt&&ht.setRequestHeader(et,Rt)}}var Tt=function(){Ue--;var rn=isNaN(X.get().streaming.retryIntervals[p.HTTPRequest.LICENSE])?1e3:X.get().streaming.retryIntervals[p.HTTPRequest.LICENSE];le=setTimeout(function(){at(Ce,Ue,Qe,st,ct,Ze)},rn)};ht.onload=function(){ue=null,this.status>=200&&this.status<=299||Ue<=0?st(this):(Z.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Ue),Tt())},ht.ontimeout=ht.onerror=function(){ue=null,Ue<=0?Ze(this):(Z.warn("License request network request failed . Retrying it... Pending retries: "+Ue),Tt())},ht.onabort=function(){ct(this)},f.trigger(I.LICENSE_REQUEST_SENDING,{url:Ce.url,headers:Ce.headers,payload:Ce.data,sessionId:Ce.sessionId}),ue=ht,ht.send(Ce.data)}function yt(){ue&&(ue.onloadend=ue.onerror=ue.onprogress=void 0,ue.abort(),ue=null),le&&(clearTimeout(le),le=null)}function kt(Ce,Ue){if(Ue)for(var Qe in Ue)Ce[Qe]=Ue[Qe]}function Zt(Ce,Ue,Qe,st,ct){var Ze=Ce.response?ct.getErrorResponse(Ce.response,Qe,st):"NONE";ze(Ue,new D.default(T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Qe+' update, XHR complete. status is "'+Ce.statusText+'" ('+Ce.status+"), readyState is "+Ce.readyState+".  Response is "+Ze))}function nn(Ce,Ue){return Ce?Ce.reduce(function(Qe,st){return Qe.then(function(){return st(Ue)})},Promise.resolve()):Promise.resolve()}function sn(Ce,Ue){if(!X.get().streaming.protection.ignoreEmeEncryptedEvent){if(Z.debug("DRM: onNeedKey"),"cenc"!==Ce.key.initDataType)return void Z.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Ce.key.initDataType);if(0===he.length&&(Z.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(Ue=typeof Ue>"u"?1:Ue+1)<5))return void q.push(setTimeout(function(){sn(Ce,Ue)},500));var Qe=Ce.key.initData;if(ArrayBuffer.isView(Qe)&&(Qe=Qe.buffer),ie){var st=x.default.getPSSHForKeySystem(ie,Qe);if(st&&ae(st))return}Z.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Qe)));var ct=b.getSupportedKeySystemsFromSegmentPssh(Qe,ve,re);if(0===ct.length)return void Z.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");ee(ct,!1)}}return se={initializeForMedia:function pe(Ce){if(!Ce)throw new Error("mediaInfo can not be null or undefined");ne(),he.push(Ce);var Ue=b.getSupportedKeySystemsFromContentProtection(Ce.contentProtection,ve,re);Ue&&Ue.length>0&&ee(Ue,!0)},clearMediaInfoArray:function te(){he=[]},createKeySession:U,loadKeySession:A,removeKeySession:function Y(Ce){ne(),P.removeKeySession(Ce)},closeKeySession:function W(Ce){ne(),P.closeKeySession(Ce)},setServerCertificate:function _e(Ce){ne(),P.setServerCertificate(Ce)},setMediaElement:Ee,setSessionType:function me(Ce){re=Ce},setRobustnessLevel:function Te(Ce){ge=Ce},setProtectionData:function Ne(Ce){ve=Ce,b.setProtectionData(Ce)},getSupportedKeySystemsFromContentProtection:function ye(Ce){return ne(),b.getSupportedKeySystemsFromContentProtection(Ce,ve,re)},getKeySystems:function Be(){return b?b.getKeySystems():[]},setKeySystems:function Le(Ce){b&&b.setKeySystems(Ce)},stop:function Ie(){yt(),P&&P.stop()},reset:function we(){f.off(I.INTERNAL_KEY_MESSAGE,xe,se),f.off(I.INTERNAL_KEY_STATUS_CHANGED,Re,se),ne(),yt(),Ee(null),ie=null,de=!1,P&&(P.reset(),P=null),q.forEach(function(Ce){return clearTimeout(Ce)}),q=[],he=[],oe=[]}},function ce(){Z=H.getLogger(se),oe=[],he=[],re="temporary",ge="",ue=null,le=null,f.on(I.INTERNAL_KEY_MESSAGE,xe,se),f.on(I.INTERNAL_KEY_STATUS_CHANGED,Re,se)}(),se}R.__dashjs_factory_name="ProtectionController",k.default=L.default.getClassFactory(R)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/CommonEncryption.js"),y=u("./src/streaming/protection/drm/KeySystemClearKey.js"),M=u("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),T=u("./src/streaming/protection/drm/KeySystemWidevine.js"),D=u("./src/streaming/protection/drm/KeySystemPlayReady.js"),d=u("./src/streaming/protection/servers/DRMToday.js"),v=u("./src/streaming/protection/servers/PlayReady.js"),p=u("./src/streaming/protection/servers/Widevine.js"),N=u("./src/streaming/protection/servers/ClearKey.js"),O=u("./src/streaming/constants/ProtectionConstants.js");function L(){var h,g,S,C,F,R,w,b,m=this.context;function oe(re,ge){return ge&&re in ge?ge[re]:null}function he(re,ge){return re&&re.sessionId?re.sessionId:ge&&ge.sessionId?ge.sessionId:null}function ve(re,ge){return re&&re.sessionType?re.sessionType:ge}return h={initialize:function f(){var re;C=[],re=Object(D.default)(m).getInstance({BASE64:F,settings:R}),C.push(re),re=Object(T.default)(m).getInstance({BASE64:F}),C.push(re),re=Object(y.default)(m).getInstance({BASE64:F}),C.push(re),w=re,re=Object(M.default)(m).getInstance({BASE64:F,debug:g}),C.push(re),b=re},setProtectionData:function Z(re){for(var ie=0;ie<C.length;ie++){var de=C[ie];de.hasOwnProperty("init")&&de.init((le=de.systemString,ce=void 0,ce=null,re&&(ce=le in re?re[le]:null),ce))}var le,ce},isClearKey:function z(re){return re===w||re===b},initDataEquals:function q(re,ge){if(re.byteLength===ge.byteLength){for(var ie=new Uint8Array(re),de=new Uint8Array(ge),ue=0;ue<ie.length;ue++)if(ie[ue]!==de[ue])return!1;return!0}return!1},getKeySystems:function I(){return C},setKeySystems:function H(re){C=re},getKeySystemBySystemString:function $(re){for(var ge=0;ge<C.length;ge++)if(C[ge].systemString===re)return C[ge];return null},getSupportedKeySystemsFromContentProtection:function J(re,ge,ie){var de,ue,le,ce,ne=[];if(re){var pe=x.default.findCencContentProtection(re);for(le=0;le<C.length;++le){var ee=oe((ue=C[le]).systemString,ge);for(ce=0;ce<re.length;++ce)if((de=re[ce]).schemeIdUri.toLowerCase()===ue.schemeIdURI){var G=ue.getInitData(de,pe);ne.push({ks:C[le],keyId:de.keyId,initData:G,protData:ee,cdmData:ue.getCDMData(ee?ee.cdmData:null),sessionId:he(ee,de),sessionType:ve(ee,ie)})}}}return ne},getSupportedKeySystemsFromSegmentPssh:function X(re,ge,ie){for(var le,de=[],ue=x.default.parsePSSHList(re),ne=0;ne<C.length;++ne){var pe=oe((le=C[ne]).systemString,ge);le.uuid in ue&&de.push({ks:le,initData:ue[le.uuid],protData:pe,cdmData:le.getCDMData(pe?pe.cdmData:null),sessionId:he(pe),sessionType:ve(pe,ie)})}return de},getLicenseServerModelInstance:function V(re,ge,ie){if("license-release"===ie||"individualization-request"===ie)return null;var de=null;return ge&&ge.hasOwnProperty("drmtoday")?de=Object(d.default)(m).getInstance({BASE64:F}):re.systemString===O.default.WIDEVINE_KEYSTEM_STRING?de=Object(p.default)(m).getInstance():re.systemString===O.default.PLAYREADY_KEYSTEM_STRING?de=Object(v.default)(m).getInstance():re.systemString===O.default.CLEARKEY_KEYSTEM_STRING&&(de=Object(N.default)(m).getInstance()),de},processClearKeyLicenseRequest:function se(re,ge,ie){try{return re.getClearKeysFromProtectionData(ge,ie)}catch{return S.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function P(re){!re||(re.debug&&(S=(g=re.debug).getLogger(h)),re.BASE64&&(F=re.BASE64),re.settings&&(R=re.settings))}}}L.__dashjs_factory_name="ProtectionKeyController",k.default=dashjs.FactoryMaker.getSingletonFactory(L)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/vo/KeyPair.js"),y=u("./src/streaming/protection/vo/ClearKeyKeySet.js"),M=u("./src/streaming/protection/CommonEncryption.js"),T=u("./src/streaming/constants/ProtectionConstants.js"),D="e2719d58-a985-b3c9-781a-b030af78d30e",d=T.default.CLEARKEY_KEYSTEM_STRING;function p(N){var L=(N=N||{}).BASE64;function g(w){try{var b=w.replace(/-/g,"");return(b=btoa(b.match(/\w{2}/g).map(function(P){return String.fromCharCode(parseInt(P,16))}).join(""))).replace(/=/g,"")}catch{return null}}return{uuid:D,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:d,getInitData:function h(w,b){try{var P=M.default.parseInitDataFromContentProtection(w,L);if(!P&&b){var I={kids:[g(b["cenc:default_KID"])]};P=(new TextEncoder).encode(JSON.stringify(I))}return P}catch{return null}},getRequestHeadersFromMessage:function S(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function C(w){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(w))))},getLicenseServerURLFromInitData:function F(){return null},getCDMData:function R(){return null},getClearKeysFromProtectionData:function m(w,b){var P=null;if(w){for(var f=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(b))),I=[],H=0;H<f.kids.length;H++){var $=f.kids[H],z=w.clearkeys&&w.clearkeys.hasOwnProperty($)?w.clearkeys[$]:null;if(!z)throw new Error("DRM: ClearKey keyID ("+$+") is not known!");I.push(new x.default($,z))}P=new y.default(I)}return P}}}p.__dashjs_factory_name="KeySystemClearKey",k.default=dashjs.FactoryMaker.getSingletonFactory(p)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/CommonEncryption.js"),y=u("./src/streaming/constants/ProtectionConstants.js"),M="9a04f079-9840-4286-ab92-e65be0885f95",T=y.default.PLAYREADY_KEYSTEM_STRING;function v(p){var O="utf-16",L=(p=p||{}).BASE64,m=p.settings;function h(){if(!L||!L.hasOwnProperty("decodeArray")||!L.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:M,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:T,getInitData:function F(b){var $,z,q,J,X,P=new Uint8Array([112,115,115,104,0,0,0,0]),f=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),I=0,H=null;if(h(),!b)return null;if("pssh"in b)return x.default.parseInitDataFromContentProtection(b,L);if("pro"in b)H=L.decodeArray(b.pro.__text);else{if(!("prheader"in b))return null;H=L.decodeArray(b.prheader.__text)}return z=4+P.length+f.length+4+($=H.length),q=new ArrayBuffer(z),J=new Uint8Array(q),(X=new DataView(q)).setUint32(I,z),J.set(P,I+=4),J.set(f,I+=P.length),X.setUint32(I+=f.length,$),J.set(H,I+=4),I+=$,J.buffer},getRequestHeadersFromMessage:function g(b){var P,f,I={},H=new DOMParser;if(m&&m.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===O&&b&&b.byteLength%2==1)return I["Content-Type"]="text/xml; charset=utf-8",I;var $="utf-16"===O?new Uint16Array(b):new Uint8Array(b);P=String.fromCharCode.apply(null,$);for(var z=(f=H.parseFromString(P,"application/xml")).getElementsByTagName("name"),q=f.getElementsByTagName("value"),J=0;J<z.length;J++)I[z[J].childNodes[0].nodeValue]=q[J].childNodes[0].nodeValue;return I.hasOwnProperty("Content")&&(I["Content-Type"]=I.Content,delete I.Content),I.hasOwnProperty("Content-Type")||(I["Content-Type"]="text/xml; charset=utf-8"),I},getLicenseRequestFromMessage:function S(b){var P=null,f=new DOMParser;if(m&&m.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===O&&b&&b.byteLength%2==1)return b;var I="utf-16"===O?new Uint16Array(b):new Uint8Array(b);h();var H=String.fromCharCode.apply(null,I),$=f.parseFromString(H,"application/xml");if(!$.getElementsByTagName("PlayReadyKeyMessage")[0])return b;var z=$.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return z&&(P=L.decode(z)),P},getLicenseServerURLFromInitData:function C(b){if(b)for(var P=new DataView(b),f=P.getUint16(4,!0),I=6,H=new DOMParser,$=0;$<f;$++){var z=P.getUint16(I,!0),q=P.getUint16(I+=2,!0);if(I+=2,1===z){var J=b.slice(I,I+q),X=String.fromCharCode.apply(null,new Uint16Array(J)),V=H.parseFromString(X,"application/xml");if(V.getElementsByTagName("LA_URL")[0]){var se=V.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(se)return se}if(V.getElementsByTagName("LUI_URL")[0]){var Z=V.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Z)return Z}}else I+=q}return null},getCDMData:function w(b){var P,f,I,H;if(h(),!b)return null;for(P=[],H=0;H<b.length;++H)P.push(b.charCodeAt(H)),P.push(0);for(P=String.fromCharCode.apply(null,P),P=L.encode(P),f='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",P),I=[],H=0;H<f.length;++H)I.push(f.charCodeAt(H)),I.push(0);return new Uint8Array(I).buffer},setPlayReadyMessageFormat:function R(b){if("utf-8"!==b&&"utf-16"!==b)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');O=b}}}v.__dashjs_factory_name="KeySystemPlayReady",k.default=dashjs.FactoryMaker.getSingletonFactory(v)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/vo/KeyPair.js"),y=u("./src/streaming/protection/vo/ClearKeyKeySet.js"),M=u("./src/streaming/protection/CommonEncryption.js"),T=u("./src/streaming/constants/ProtectionConstants.js"),D="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",d=T.default.CLEARKEY_KEYSTEM_STRING;function p(N){var O,L=N.BASE64,m=N.debug.getLogger(O);return{uuid:D,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:d,getInitData:function g(w){return M.default.parseInitDataFromContentProtection(w,L)},getRequestHeadersFromMessage:function S(){return null},getLicenseRequestFromMessage:function C(w){return new Uint8Array(w)},getLicenseServerURLFromInitData:function F(){return null},getCDMData:function R(){return null},getClearKeysFromProtectionData:function h(w,b){var P=null;if(w){for(var f=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(b))),I=[],H=0;H<f.kids.length;H++){var $=f.kids[H],z=w.clearkeys&&w.clearkeys.hasOwnProperty($)?w.clearkeys[$]:null;if(!z)throw new Error("DRM: ClearKey keyID ("+$+") is not known!");I.push(new x.default($,z))}P=new y.default(I),m.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return P}}}p.__dashjs_factory_name="KeySystemW3CClearKey",k.default=dashjs.FactoryMaker.getSingletonFactory(p)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/CommonEncryption.js"),y=u("./src/streaming/constants/ProtectionConstants.js"),M="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",T=y.default.WIDEVINE_KEYSTEM_STRING;function d(v){var N=(v=v||{}).BASE64;return{uuid:M,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:T,getInitData:function O(S){return x.default.parseInitDataFromContentProtection(S,N)},getRequestHeadersFromMessage:function L(){return null},getLicenseRequestFromMessage:function m(S){return new Uint8Array(S)},getLicenseServerURLFromInitData:function h(){return null},getCDMData:function g(){return null}}}d.__dashjs_factory_name="KeySystemWidevine",k.default=dashjs.FactoryMaker.getSingletonFactory(d)},"./src/streaming/protection/errors/ProtectionErrors.js":function(Oe,k,u){"use strict";function y(h){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function T(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&D(h,g)}function D(h,g){return(D=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function d(h){var g=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=O(h);if(g){var R=O(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return v(this,F)}}function v(h,g){return!g||"object"!==y(g)&&"function"!=typeof g?function p(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function O(h){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}u.r(k);var m=new(function(h){T(S,h);var g=d(S);function S(){var C;return function M(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(C=g.call(this)).MEDIA_KEYERR_CODE=100,C.MEDIA_KEYERR_UNKNOWN_CODE=101,C.MEDIA_KEYERR_CLIENT_CODE=102,C.MEDIA_KEYERR_SERVICE_CODE=103,C.MEDIA_KEYERR_OUTPUT_CODE=104,C.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,C.MEDIA_KEYERR_DOMAIN_CODE=106,C.MEDIA_KEY_MESSAGE_ERROR_CODE=107,C.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,C.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,C.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,C.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,C.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,C.KEY_SESSION_CREATED_ERROR_CODE=113,C.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,C.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",C.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",C.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",C.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",C.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",C.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",C.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",C.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",C.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",C.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",C.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",C.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",C.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",C.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",C}return S}(u("./src/core/errors/ErrorsBase.js").default));k.default=m},"./src/streaming/protection/models/ProtectionModel_01b.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/controllers/ProtectionKeyController.js"),y=u("./src/streaming/protection/vo/NeedKey.js"),M=u("./src/streaming/vo/DashJSError.js"),T=u("./src/streaming/protection/vo/KeyMessage.js"),D=u("./src/streaming/protection/vo/KeySystemConfiguration.js"),d=u("./src/streaming/protection/vo/KeySystemAccess.js"),v=u("./src/streaming/protection/errors/ProtectionErrors.js");function p(N){var C,F,R,w,b,P,f,I,H,O=this.context,L=(N=N||{}).eventBus,m=N.events,h=N.debug,g=N.api,S=N.errHandler;function z(){R&&ue();for(var le=0;le<f.length;le++)he(f[le]);L.trigger(m.TEARDOWN_COMPLETE)}function he(le){try{R[g.cancelKeyRequest](w.systemString,le.sessionId)}catch(ce){L.trigger(m.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+le.sessionId+") "+ce.message})}}function de(le,ce){if(!ce||!le)return null;for(var ne=le.length,pe=0;pe<ne;pe++)if(le[pe].sessionId==ce)return le[pe];return null}function ue(){R.removeEventListener(g.keyerror,H),R.removeEventListener(g.needkey,H),R.removeEventListener(g.keymessage,H),R.removeEventListener(g.keyadded,H)}return C={getAllInitData:function q(){for(var le=[],ce=0;ce<P.length;ce++)le.push(P[ce].initData);for(var ne=0;ne<f.length;ne++)le.push(f[ne].initData);return le},getSessions:function J(){return f.concat(P)},requestKeySystemAccess:function X(le){return new Promise(function(ce,ne){var pe=R;pe||(pe=document.createElement("video"));for(var ee=!1,G=0;G<le.length;G++)for(var j=le[G].ks.systemString,_=le[G].configs,A=null,U=null,K=0;K<_.length;K++){var te=_[K].videoCapabilities;if(te&&0!==te.length){U=[];for(var ye=0;ye<te.length;ye++)""!==pe.canPlayType(te[ye].contentType,j)&&U.push(te[ye])}if(U&&(!U||0!==U.length)){ee=!0;var Se=new D.default(A,U),ae=b.getKeySystemBySystemString(j),Y=new d.default(ae,Se);L.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{data:Y}),ce({data:Y});break}}if(!ee){var W="Key system access denied! -- No valid audio/video content configurations detected!";L.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{error:W}),ne({error:W})}})},selectKeySystem:function V(le){return w=le.keySystem,Promise.resolve(w)},setMediaElement:function se(le){if(R!==le){if(R){ue();for(var ce=0;ce<f.length;ce++)he(f[ce]);f=[]}(R=le)&&(R.addEventListener(g.keyerror,H),R.addEventListener(g.needkey,H),R.addEventListener(g.keymessage,H),R.addEventListener(g.keyadded,H),L.trigger(m.VIDEO_ELEMENT_SELECTED))}},createKeySession:function Z(le){if(!w)throw new Error("Can not create sessions until you have selected a key system");if(I||0===f.length){var ce={sessionId:null,keyId:le.keyId,initData:le.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return P.push(ce),R[g.generateKeyRequest](w.systemString,new Uint8Array(le.initData)),ce}throw new Error("Multiple sessions not allowed!")},updateKeySession:function oe(le,ce){var ne=le.sessionId;if(b.isClearKey(w))for(var pe=0;pe<ce.keyPairs.length;pe++)R[g.addKey](w.systemString,ce.keyPairs[pe].key,ce.keyPairs[pe].keyID,ne);else R[g.addKey](w.systemString,new Uint8Array(ce),new Uint8Array(le.initData),ne);L.trigger(m.KEY_SESSION_UPDATED)},closeKeySession:he,setServerCertificate:function ve(){},loadKeySession:function re(){},removeKeySession:function ge(){},stop:z,reset:z},function $(){F=h.getLogger(C),R=null,w=null,P=[],f=[],b=Object(x.default)(O).getInstance(),H=function ie(){return{handleEvent:function(ce){var ne=null;switch(ce.type){case g.needkey:var pe=ArrayBuffer.isView(ce.initData)?ce.initData.buffer:ce.initData;L.trigger(m.NEED_KEY,{key:new y.default(pe,"cenc")});break;case g.keyerror:if((ne=de(f,ce.sessionId))||(ne=de(P,ce.sessionId)),ne){var ee=v.default.MEDIA_KEYERR_CODE,G="";switch(ce.errorCode.code){case 1:ee=v.default.MEDIA_KEYERR_UNKNOWN_CODE,G+="MEDIA_KEYERR_UNKNOWN - "+v.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:ee=v.default.MEDIA_KEYERR_CLIENT_CODE,G+="MEDIA_KEYERR_CLIENT - "+v.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:ee=v.default.MEDIA_KEYERR_SERVICE_CODE,G+="MEDIA_KEYERR_SERVICE - "+v.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:ee=v.default.MEDIA_KEYERR_OUTPUT_CODE,G+="MEDIA_KEYERR_OUTPUT - "+v.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:ee=v.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,G+="MEDIA_KEYERR_HARDWARECHANGE - "+v.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:ee=v.default.MEDIA_KEYERR_DOMAIN_CODE,G+="MEDIA_KEYERR_DOMAIN - "+v.default.MEDIA_KEYERR_DOMAIN_MESSAGE}L.trigger(m.KEY_ERROR,{error:new M.default(ee,G+="  System Code = "+ce.systemCode,ne)})}else F.error("No session token found for key error");break;case g.keyadded:(ne=de(f,ce.sessionId))||(ne=de(P,ce.sessionId)),ne?(F.debug("DRM: Key added."),L.trigger(m.KEY_ADDED,{data:ne})):F.debug("No session token found for key added");break;case g.keymessage:if((I=null!=ce.sessionId)?!(ne=de(f,ce.sessionId))&&P.length>0&&(ne=P.shift(),f.push(ne),ne.sessionId=ce.sessionId,L.trigger(m.KEY_SESSION_CREATED,{data:ne})):P.length>0&&(ne=P.shift(),f.push(ne),0!==P.length&&S.error(new M.default(v.default.MEDIA_KEY_MESSAGE_ERROR_CODE,v.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),ne){var j=ArrayBuffer.isView(ce.message)?ce.message.buffer:ce.message;ne.keyMessage=j,L.trigger(m.INTERNAL_KEY_MESSAGE,{data:new T.default(ne,j,ce.defaultURL)})}else F.warn("No session token found for key message")}}}}()}(),C}p.__dashjs_factory_name="ProtectionModel_01b",k.default=dashjs.FactoryMaker.getClassFactory(p)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/controllers/ProtectionKeyController.js"),y=u("./src/streaming/protection/vo/NeedKey.js"),M=u("./src/streaming/protection/errors/ProtectionErrors.js"),T=u("./src/streaming/vo/DashJSError.js"),D=u("./src/streaming/protection/vo/KeyMessage.js"),d=u("./src/streaming/protection/vo/KeySystemAccess.js"),v=u("./src/streaming/constants/ProtectionConstants.js"),p={};function N(O){var S,C,F,R,w,b,P,f,L=this.context,m=(O=O||{}).eventBus,h=O.events,g=O.debug;function X(ee,G,j,_){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var A="Insecure origins are not allowed";return m.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:A}),void _({error:A})}var te=ee[G].ks,ye=te.systemString;(function V(ee,G){return new Promise(function(j,_){se(ee,G,0,j,_)})})((ee[G].protData&&ee[G].protData.systemStringPriority?ee[G].protData.systemStringPriority:null)||(p[ye]?p[ye]:[ye]),ee[G].configs).then(function(ae){var Y="function"==typeof ae.getConfiguration?ae.getConfiguration():null,W=new d.default(te,Y);W.mksa=ae,m.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{data:W}),j({data:W})}).catch(function(ae){if(G+1<ee.length)X(ee,G+1,j,_);else{var Y="Key system access denied! ";m.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:Y+ae.message}),_({error:Y+ae.message})}})}function se(ee,G,j,_,A){var U=ee[j];C.debug("Requesting key system access for system string ".concat(U)),navigator.requestMediaKeySystemAccess(U,G).then(function(K){K.selectedSystemString=U,_(K)}).catch(function(K){j+1<ee.length?se(ee,G,j+1,_,A):A(K)})}function ue(ee){var G=ee.session;return G.removeEventListener("keystatuseschange",ee),G.removeEventListener("message",ee),G.close()}function ce(ee){for(var G=0;G<b.length;G++)if(b[G]===ee){b.splice(G,1);break}}function ne(ee){var G,j;return ee&&ee.length>0&&(ee[0]&&("string"==typeof ee[0]?G=ee[0]:j=ee[0]),ee[1]&&("string"==typeof ee[1]?G=ee[1]:j=ee[1])),{status:G,keyId:j}}function pe(ee,G){var j={session:ee,keyId:G.keyId,initData:G.initData,sessionId:G.sessionId,sessionType:G.sessionType,handleEvent:function(A){switch(A.type){case"keystatuseschange":m.trigger(h.KEY_STATUSES_CHANGED,{data:this}),A.target.keyStatuses.forEach(function(){var K=ne(arguments);m.trigger(h.INTERNAL_KEY_STATUS_CHANGED,"expired"===K.status?{error:new T.default(M.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,M.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}:K)});break;case"message":var U=ArrayBuffer.isView(A.message)?A.message.buffer:A.message;m.trigger(h.INTERNAL_KEY_MESSAGE,{data:new D.default(this,U,void 0,A.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return ee.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return ee.expiration},getKeyStatuses:function(){return ee.keyStatuses},getUsable:function(){var A=!1;return ee.keyStatuses.forEach(function(){"usable"===ne(arguments).status&&(A=!0)}),A}};return ee.addEventListener("keystatuseschange",j),ee.addEventListener("message",j),ee.closed.then(function(){ce(j),C.debug("DRM: Session closed.  SessionID = "+j.getSessionId()),m.trigger(h.KEY_SESSION_CLOSED,{data:j.getSessionId()})}),b.push(j),j}return S={getAllInitData:function z(){for(var ee=[],G=0;G<b.length;G++)b[G].initData&&ee.push(b[G].initData);return ee},getSessions:function q(){return b},requestKeySystemAccess:function J(ee){return new Promise(function(G,j){X(ee,0,G,j)})},selectKeySystem:function Z(ee){return new Promise(function(G,j){ee.mksa.createMediaKeys().then(function(_){return F=ee.keySystem,w=_,R?R.setMediaKeys(w):Promise.resolve()}).then(function(){G(F)}).catch(function(){j({error:"Error selecting keys system ("+ee.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function oe(ee){R!==ee&&(R&&(R.removeEventListener("encrypted",P),R.setMediaKeys&&R.setMediaKeys(null)),(R=ee)&&(R.addEventListener("encrypted",P),R.setMediaKeys&&w&&R.setMediaKeys(w)))},setServerCertificate:function he(ee){if(!F||!w)throw new Error("Can not set server certificate until you have selected a key system");w.setServerCertificate(ee).then(function(){C.info("DRM: License server certificate successfully updated."),m.trigger(h.SERVER_CERTIFICATE_UPDATED)}).catch(function(G){m.trigger(h.SERVER_CERTIFICATE_UPDATED,{error:new T.default(M.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,M.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+G.name)})})},createKeySession:function ve(ee){if(!F||!w)throw new Error("Can not create sessions until you have selected a key system");var G=w.createSession(ee.sessionType),j=pe(G,ee);G.generateRequest(F.systemString===v.default.CLEARKEY_KEYSTEM_STRING&&(ee.initData||ee.protData&&ee.protData.clearkeys)?v.default.INITIALIZATION_DATA_TYPE_KEYIDS:v.default.INITIALIZATION_DATA_TYPE_CENC,ee.initData).then(function(){C.debug("DRM: Session created.  SessionID = "+j.getSessionId()),m.trigger(h.KEY_SESSION_CREATED,{data:j})}).catch(function(A){ce(j),m.trigger(h.KEY_SESSION_CREATED,{data:null,error:new T.default(M.default.KEY_SESSION_CREATED_ERROR_CODE,M.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+A.name)})})},updateKeySession:function re(ee,G){var j=ee.session;f.isClearKey(F)&&(G=G.toJWK()),j.update(G).then(function(){m.trigger(h.KEY_SESSION_UPDATED)}).catch(function(_){m.trigger(h.KEY_ERROR,{error:new T.default(M.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+_.name,ee)})})},loadKeySession:function ge(ee){if(!F||!w)throw new Error("Can not load sessions until you have selected a key system");for(var G=ee.sessionId,j=0;j<b.length;j++)if(G===b[j].sessionId)return void C.warn("DRM: Ignoring session ID because we have already seen it!");var _=w.createSession(ee.sessionType),A=pe(_,ee);_.load(G).then(function(U){U?(C.debug("DRM: Session loaded.  SessionID = "+A.getSessionId()),m.trigger(h.KEY_SESSION_CREATED,{data:A})):(ce(A),m.trigger(h.KEY_SESSION_CREATED,{data:null,error:new T.default(M.default.KEY_SESSION_CREATED_ERROR_CODE,M.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+G+")")}))}).catch(function(U){ce(A),m.trigger(h.KEY_SESSION_CREATED,{data:null,error:new T.default(M.default.KEY_SESSION_CREATED_ERROR_CODE,M.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+G+")! "+U.name)})})},removeKeySession:function ie(ee){ee.session.remove().then(function(){C.debug("DRM: Session removed.  SessionID = "+ee.getSessionId()),m.trigger(h.KEY_SESSION_REMOVED,{data:ee.getSessionId()})},function(j){m.trigger(h.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+ee.getSessionId()+"). "+j.name})})},closeKeySession:function de(ee){ue(ee).catch(function(G){ce(ee),m.trigger(h.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+ee.getSessionId()+") "+G.name})})},stop:function $(){for(var ee,G=0;G<b.length;G++)(ee=b[G]).getUsable()||ue(ee).catch(function(){ce(ee)})},reset:function H(){var G,ee=b.length;0!==ee?function(){for(var j=function(U){ce(U),0===b.length&&(R?(R.removeEventListener("encrypted",P),R.setMediaKeys(null).then(function(){m.trigger(h.TEARDOWN_COMPLETE)})):m.trigger(h.TEARDOWN_COMPLETE))},_=0;_<ee;_++)!function(A){G.session.closed.then(function(){j(A)}),ue(G).catch(function(){j(A)})}(G=b[_])}():m.trigger(h.TEARDOWN_COMPLETE)}},function I(){C=g.getLogger(S),F=null,R=null,w=null,b=[],f=Object(x.default)(L).getInstance(),P=function le(){return{handleEvent:function(G){if("encrypted"===G.type&&G.initData){var j=ArrayBuffer.isView(G.initData)?G.initData.buffer:G.initData;m.trigger(h.NEED_KEY,{key:new y.default(j,G.initDataType)})}}}}()}(),S}p[v.default.PLAYREADY_KEYSTEM_STRING]=[v.default.PLAYREADY_KEYSTEM_STRING,v.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],p[v.default.WIDEVINE_KEYSTEM_STRING]=[v.default.WIDEVINE_KEYSTEM_STRING],p[v.default.CLEARKEY_KEYSTEM_STRING]=[v.default.CLEARKEY_KEYSTEM_STRING],N.__dashjs_factory_name="ProtectionModel_21Jan2015",k.default=dashjs.FactoryMaker.getClassFactory(N)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/controllers/ProtectionKeyController.js"),y=u("./src/streaming/protection/vo/NeedKey.js"),M=u("./src/streaming/vo/DashJSError.js"),T=u("./src/streaming/protection/errors/ProtectionErrors.js"),D=u("./src/streaming/protection/vo/KeyMessage.js"),d=u("./src/streaming/protection/vo/KeySystemConfiguration.js"),v=u("./src/streaming/protection/vo/KeySystemAccess.js");function p(N){var S,C,F,R,w,b,P,f,I,O=this.context,L=(N=N||{}).eventBus,m=N.events,h=N.debug,g=N.api;function $(){try{for(var ue=0;ue<P.length;ue++)oe(P[ue]);F&&F.removeEventListener(g.needkey,f),L.trigger(m.TEARDOWN_COMPLETE)}catch(le){L.trigger(m.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+le.message})}}function oe(ue){var le=ue.session;le.removeEventListener(g.error,ue),le.removeEventListener(g.message,ue),le.removeEventListener(g.ready,ue),le.removeEventListener(g.close,ue);for(var ce=0;ce<P.length;ce++)if(P[ce]===ue){P.splice(ce,1);break}le[g.release]()}function ie(){var ue=null,le=function(){F.removeEventListener("loadedmetadata",ue),F[g.setMediaKeys](w),L.trigger(m.VIDEO_ELEMENT_SELECTED)};F.readyState>=1?le():(ue=le.bind(this),F.addEventListener("loadedmetadata",ue))}return S={getAllInitData:function z(){for(var ue=[],le=0;le<P.length;le++)ue.push(P[le].initData);return ue},getSessions:function q(){return P},requestKeySystemAccess:function J(ue){return new Promise(function(le,ce){for(var ne=!1,pe=0;pe<ue.length;pe++)for(var ee=ue[pe].ks.systemString,G=ue[pe].configs,j=null,_=null,A=0;A<G.length;A++){var U=G[A].audioCapabilities,K=G[A].videoCapabilities;if(U&&0!==U.length){j=[];for(var te=0;te<U.length;te++)window[g.MediaKeys].isTypeSupported(ee,U[te].contentType)&&j.push(U[te])}if(K&&0!==K.length){_=[];for(var ye=0;ye<K.length;ye++)window[g.MediaKeys].isTypeSupported(ee,K[ye].contentType)&&_.push(K[ye])}if(!(!j&&!_||j&&0===j.length||_&&0===_.length)){ne=!0;var Se=new d.default(j,_),ae=I.getKeySystemBySystemString(ee),Y=new v.default(ae,Se);L.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{data:Y}),le({data:Y});break}}if(!ne){var W="Key system access denied! -- No valid audio/video content configurations detected!";L.trigger(m.KEY_SYSTEM_ACCESS_COMPLETE,{error:W}),ce({error:W})}})},selectKeySystem:function X(ue){return new Promise(function(le,ce){try{w=ue.mediaKeys=new window[g.MediaKeys](ue.keySystem.systemString),R=ue.keySystem,b=ue,F&&ie(),le(R)}catch{ce({error:"Error selecting keys system ("+R.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function V(ue){F!==ue&&(F&&F.removeEventListener(g.needkey,f),(F=ue)&&(F.addEventListener(g.needkey,f),w&&ie()))},createKeySession:function se(ue){if(!R||!w||!b)throw new Error("Can not create sessions until you have selected a key system");var le=null;if(b.ksConfiguration.videoCapabilities&&b.ksConfiguration.videoCapabilities.length>0&&(le=b.ksConfiguration.videoCapabilities[0]),null===le&&b.ksConfiguration.audioCapabilities&&b.ksConfiguration.audioCapabilities.length>0&&(le=b.ksConfiguration.audioCapabilities[0]),null===le)throw new Error("Can not create sessions for unknown content types.");var ne=w.createSession(le.contentType,new Uint8Array(ue.initData),ue.cdmData?new Uint8Array(ue.cdmData):null),pe=function de(ue,le){return{session:ue,keyId:le.keyId,initData:le.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(ne){switch(ne.type){case g.error:L.trigger(m.KEY_ERROR,{error:new M.default(T.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case g.message:var ee=ArrayBuffer.isView(ne.message)?ne.message.buffer:ne.message;L.trigger(m.INTERNAL_KEY_MESSAGE,{data:new D.default(this,ee,ne.destinationURL)});break;case g.ready:C.debug("DRM: Key added."),L.trigger(m.KEY_ADDED);break;case g.close:C.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),L.trigger(m.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(ne,ue);ne.addEventListener(g.error,pe),ne.addEventListener(g.message,pe),ne.addEventListener(g.ready,pe),ne.addEventListener(g.close,pe),P.push(pe),C.debug("DRM: Session created.  SessionID = "+pe.getSessionId()),L.trigger(m.KEY_SESSION_CREATED,{data:pe})},updateKeySession:function Z(ue,le){var ce=ue.session;I.isClearKey(R)?ce.update(new Uint8Array(le.toJWK())):ce.update(new Uint8Array(le)),L.trigger(m.KEY_SESSION_UPDATED)},closeKeySession:oe,setServerCertificate:function he(){},loadKeySession:function ve(){},removeKeySession:function re(){},stop:$,reset:$},function H(){C=h.getLogger(S),F=null,R=null,w=null,b=null,P=[],I=Object(x.default)(O).getInstance(),f=function ge(){return{handleEvent:function(le){if(le.type===g.needkey&&le.initData){var ce=ArrayBuffer.isView(le.initData)?le.initData.buffer:le.initData;L.trigger(m.NEED_KEY,{key:new y.default(ce,"cenc")})}}}}()}(),S}p.__dashjs_factory_name="ProtectionModel_3Feb2014",k.default=dashjs.FactoryMaker.getClassFactory(p)},"./src/streaming/protection/servers/ClearKey.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/protection/vo/KeyPair.js"),y=u("./src/streaming/protection/vo/ClearKeyKeySet.js");function M(){return{getServerURLFromMessage:function D(O){return O},getHTTPMethod:function d(){return"POST"},getResponseType:function v(){return"json"},getLicenseMessage:function p(O){if(!O.hasOwnProperty("keys"))return null;for(var L=[],m=0;m<O.keys.length;m++){var h=O.keys[m],g=h.kid.replace(/=/g,""),S=h.k.replace(/=/g,"");L.push(new x.default(g,S))}return new y.default(L)},getErrorResponse:function N(O){return String.fromCharCode.apply(null,new Uint8Array(O))}}}M.__dashjs_factory_name="ClearKey",k.default=dashjs.FactoryMaker.getSingletonFactory(M)},"./src/streaming/protection/servers/DRMToday.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/ProtectionConstants.js");function y(M){var T=(M=M||{}).BASE64,D={};return D[x.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(g){return T.decodeArray(g.license)},getErrorResponse:function(g){return g}},D[x.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(g){return g},getErrorResponse:function(g){return String.fromCharCode.apply(null,new Uint8Array(g))}},{getServerURLFromMessage:function p(h){return h},getHTTPMethod:function N(){return"POST"},getResponseType:function O(h){return D[h].responseType},getLicenseMessage:function L(h,g){return function v(){if(!T||!T.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),D[g].getLicenseMessage(h)},getErrorResponse:function m(h,g){return D[g].getErrorResponse(h)}}}y.__dashjs_factory_name="DRMToday",k.default=dashjs.FactoryMaker.getSingletonFactory(y)},"./src/streaming/protection/servers/PlayReady.js":function(Oe,k,u){"use strict";function x(){var M="http://schemas.xmlsoap.org/soap/envelope/";function T(m){var h=String.fromCharCode.apply(null,new Uint8Array(m));return decodeURIComponent(escape(h))}function D(m){if(window.DOMParser){var h=T(m),S=(new window.DOMParser).parseFromString(h,"text/xml"),C=S?S.getElementsByTagNameNS(M,"Envelope")[0]:null,F=C?C.getElementsByTagNameNS(M,"Body")[0]:null;if(F&&F.getElementsByTagNameNS(M,"Fault")[0])return null}return m}function d(m){var h="",g="",S="",C=-1,F=-1;if(window.DOMParser){var R=T(m),b=(new window.DOMParser).parseFromString(R,"text/xml"),P=b?b.getElementsByTagNameNS(M,"Envelope")[0]:null,f=P?P.getElementsByTagNameNS(M,"Body")[0]:null,I=f?f.getElementsByTagNameNS(M,"Fault")[0]:null,H=I?I.getElementsByTagName("detail")[0]:null,$=H?H.getElementsByTagName("Exception")[0]:null,z=null;if(null===I)return R;h=(z=I.getElementsByTagName("faultstring")[0].firstChild)?z.nodeValue:null,null!==$&&(g=(z=$.getElementsByTagName("StatusCode")[0])?z.firstChild.nodeValue:null,C=(S=(z=$.getElementsByTagName("Message")[0])?z.firstChild.nodeValue:null)?S.lastIndexOf("[")+1:-1,F=S?S.indexOf("]"):-1,S=S?S.substring(C,F):"")}var q="code: ".concat(g,", name: ").concat(h);return S&&(q+=", message: ".concat(S)),q}return{getServerURLFromMessage:function v(m){return m},getHTTPMethod:function p(){return"POST"},getResponseType:function N(){return"arraybuffer"},getLicenseMessage:function O(m){return D.call(this,m)},getErrorResponse:function L(m){return d.call(this,m)}}}u.r(k),x.__dashjs_factory_name="PlayReady",k.default=dashjs.FactoryMaker.getSingletonFactory(x)},"./src/streaming/protection/servers/Widevine.js":function(Oe,k,u){"use strict";function x(){return{getServerURLFromMessage:function M(p){return p},getHTTPMethod:function T(){return"POST"},getResponseType:function D(){return"arraybuffer"},getLicenseMessage:function d(p){return p},getErrorResponse:function v(p){return String.fromCharCode.apply(null,new Uint8Array(p))}}}u.r(k),x.__dashjs_factory_name="Widevine",k.default=dashjs.FactoryMaker.getSingletonFactory(x)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(Oe,k,u){"use strict";function y(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d,v){if(function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D),v&&"persistent"!==v&&"temporary"!==v)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=d,this.type=v}return function M(D,d,v){return d&&y(D.prototype,d),v&&y(D,v),D}(D,[{key:"toJWK",value:function(){var v,p=this.keyPairs.length,N={keys:[]};for(v=0;v<p;v++)N.keys.push({kty:"oct",alg:"A128KW",kid:this.keyPairs[v].keyID,k:this.keyPairs[v].key});this.type&&(N.type=this.type);var L=JSON.stringify(N),m=L.length,h=new ArrayBuffer(m),g=new Uint8Array(h);for(v=0;v<m;v++)g[v]=L.charCodeAt(v);return h}}]),D}()},"./src/streaming/protection/vo/KeyMessage.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D,d,v){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.sessionToken=T,this.message=D,this.defaultURL=d,this.messageType=v||"license-request"}},"./src/streaming/protection/vo/KeyPair.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.keyID=T,this.key=D}},"./src/streaming/protection/vo/KeySystemAccess.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.keySystem=T,this.ksConfiguration=D}},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D,d,v,p){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.initDataTypes=["cenc"],T&&T.length&&(this.audioCapabilities=T),D&&D.length&&(this.videoCapabilities=D),this.distinctiveIdentifier=d,this.persistentState=v,this.sessionTypes=p}},"./src/streaming/protection/vo/LicenseRequest.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D,d,v,p,N,O,L){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.url=T,this.method=D,this.responseType=d,this.headers=v,this.withCredentials=p,this.messageType=N,this.sessionId=O,this.data=L}},"./src/streaming/protection/vo/LicenseResponse.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D,d){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.url=T,this.headers=D,this.data=d}},"./src/streaming/protection/vo/MediaCapability.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.contentType=T,this.robustness=D}},"./src/streaming/protection/vo/NeedKey.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.initData=T,this.initDataType=D}},"./src/streaming/rules/DroppedFramesHistory.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(){var T={},D={},d={};return{push:function v(L,m,h){if(m){T[L]||(T[L]=[],D[L]=0,d[L]=0);var g=h&&h.droppedVideoFrames?h.droppedVideoFrames:0,S=h&&h.totalVideoFrames?h.totalVideoFrames:0,C=g-D;D[L]=g;var F=S-d;d[L]=S;var R=T[L];isNaN(m)||(R[m]?(R[m].droppedVideoFrames+=C,R[m].totalVideoFrames+=F):R[m]={droppedVideoFrames:C,totalVideoFrames:F})}},getFrameHistory:function p(L){return T[L]},clearForStream:function N(L){try{delete T[L],delete D[L],delete d[L]}catch{}},reset:function O(){T={},D={},d={}}}}y.__dashjs_factory_name="DroppedFramesHistory";var M=x.default.getClassFactory(y);k.default=M},"./src/streaming/rules/RulesContext.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(M){var D=(M=M||{}).abrController,d=M.switchHistory,v=M.droppedFramesHistory,p=M.currentRequest,N=M.useBufferOccupancyABR,O=M.useL2AABR,L=M.useLoLPABR,m=M.streamProcessor?M.streamProcessor.getScheduleController():null,h=M.streamProcessor?M.streamProcessor.getRepresentationInfo():null,g=M.videoModel?M.videoModel:null;function F(){return h?h.mediaInfo:null}return{getMediaType:function S(){var J=F();return J?J.type:null},getMediaInfo:F,getDroppedFramesHistory:function I(){return v},getCurrentRequest:function H(){return p},getSwitchHistory:function P(){return d},getStreamInfo:function C(){var J=F();return J?J.streamInfo:null},getScheduleController:function w(){return m},getAbrController:function b(){return D},getRepresentationInfo:function R(){return h},useBufferOccupancyABR:function $(){return N},useL2AABR:function z(){return O},useLoLPABR:function q(){return L},getVideoModel:function f(){return g}}}y.__dashjs_factory_name="RulesContext",k.default=x.default.getClassFactory(y)},"./src/streaming/rules/SwitchRequest.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),M={DEFAULT:.5,STRONG:1,WEAK:0};function T(d,v,p){return{quality:void 0===d?-1:d,reason:void 0===v?null:v,priority:function h(g){var S=M.DEFAULT;return(g===M.DEFAULT||g===M.STRONG||g===M.WEAK)&&(S=g),S}(p)}}T.__dashjs_factory_name="SwitchRequest";var D=x.default.getClassFactory(T);D.NO_CHANGE=-1,D.PRIORITY=M,x.default.updateClassFactory(T.__dashjs_factory_name,D),k.default=D},"./src/streaming/rules/SwitchRequestHistory.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/rules/SwitchRequest.js");function T(){var d=[],v=[];return{push:function p(L){L.newValue===y.default.NO_CHANGE&&(L.newValue=L.oldValue),d[L.oldValue]||(d[L.oldValue]={noDrops:0,drops:0,dropSize:0});var m=L.newValue-L.oldValue,h=m<0?1:0,g=h?-m:0,S=h?0:1;if(d[L.oldValue].drops+=h,d[L.oldValue].dropSize+=g,d[L.oldValue].noDrops+=S,v.push({idx:L.oldValue,noDrop:S,drop:h,dropSize:g}),v.length>8){var C=v.shift();d[C.idx].drops-=C.drop,d[C.idx].dropSize-=C.dropSize,d[C.idx].noDrops-=C.noDrop}},getSwitchRequests:function N(){return d},reset:function O(){d=[],v=[]}}}T.__dashjs_factory_name="SwitchRequestHistory";var D=x.default.getClassFactory(T);k.default=D},"./src/streaming/rules/ThroughputHistory.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/core/FactoryMaker.js");function M(T){var C,F,R,w,b,S=(T=T||{}).settings;function H(re,ge,ie,de){var ue=Math.pow(.5,ie/de.fast);re.fastEstimate=(1-ue)*ge+ue*re.fastEstimate;var le=Math.pow(.5,ie/de.slow);re.slowEstimate=(1-le)*ge+le*re.slowEstimate,re.totalWeight+=ie}function z(re,ge,ie){return S.get().streaming.abr.movingAverageMethod!==x.default.MOVING_AVERAGE_SLIDING_WINDOW?function J(re,ge){var ie=re?b.throughputHalfLife:b.latencyHalfLife,de=re?R[ge]:w[ge];if(!de||de.totalWeight<=0)return NaN;var ue=de.fastEstimate/(1-Math.pow(.5,de.totalWeight/ie.fast)),le=de.slowEstimate/(1-Math.pow(.5,de.totalWeight/ie.slow));return re?Math.min(ue,le):Math.max(ue,le)}(re,ge):function q(re,ge,ie){var de=function $(re,ge,ie){var de,ue;if(re?(de=C[ge],ue=ie?3:4):(de=F[ge],ue=4),de){if(ue>=de.length)ue=de.length;else if(re)for(var le=1;le<ue;++le){var ce=de[de.length-le]/de[de.length-le-1];if((ce>=1.3||ce<=1/1.3)&&(ue+=1)===de.length)break}}else ue=0;return ue}(re,ge,ie),le=(re?C:F)[ge];return 0!==de&&le&&0!==le.length?(le=le.slice(-de)).reduce(function(ce,ne){return ce+ne})/le.length:NaN}(re,ge,ie)}function X(re,ge){return z(!0,re,ge)}function Z(re){C[re]=C[re]||[],F[re]=F[re]||[],R[re]=R[re]||{fastEstimate:0,slowEstimate:0,totalWeight:0},w[re]=w[re]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function he(){C={},F={},R={},w={}}var ve={push:function I(re,ge,ie){if(ge.trace&&ge.trace.length){var de=ge.tresponse.getTime()-ge.trequest.getTime()||1,ue=ge._tfinish.getTime()-ge.tresponse.getTime()||1,le=ge.trace.reduce(function(G,j){return G+j.b[0]},0),ce=0,ne=0;if(ge._fileLoaderType&&ge._fileLoaderType===x.default.FILE_LOADER_TYPES.FETCH){if(S.get().streaming.abr.fetchThroughputCalculationMode===x.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING){var ee=ge.trace.reduce(function(G,j){return G+j._t},0);ne=Math.round(ee/ge.trace.length)}0===ne&&(ce=ge.trace.reduce(function(G,j){return G+j.d},0))}else ce=ie?ue:de+ue;if(0!==ce&&(ne=Math.round(8*le/ce)),Z(re),function f(re,ge,ie){return re===x.default.VIDEO?ie<S.get().streaming.cacheLoadThresholds[x.default.VIDEO]:re===x.default.AUDIO?ie<S.get().streaming.cacheLoadThresholds[x.default.AUDIO]:void 0}(re,0,ue)){if(C[re].length>0&&!C[re].hasCachedEntries)return;C[re].hasCachedEntries=!0}else C[re]&&C[re].hasCachedEntries&&function oe(re){delete C[re],delete F[re],delete R[re],delete w[re],Z(re)}(re);C[re].push(ne),C[re].length>20&&C[re].shift(),F[re].push(de),F[re].length>20&&F[re].shift(),H(R[re],ne,.001*ue,b.throughputHalfLife),H(w[re],de,1,b.latencyHalfLife)}},getAverageThroughput:X,getSafeAverageThroughput:function V(re,ge){var ie=X(re,ge);return isNaN(ie)||(ie*=S.get().streaming.abr.bandwidthSafetyFactor),ie},getAverageLatency:function se(re){return z(!1,re)},reset:he};return function P(){b={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},he()}(),ve}M.__dashjs_factory_name="ThroughputHistory",k.default=y.default.getClassFactory(M)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/rules/abr/ThroughputRule.js"),y=u("./src/streaming/rules/abr/InsufficientBufferRule.js"),M=u("./src/streaming/rules/abr/AbandonRequestsRule.js"),T=u("./src/streaming/rules/abr/DroppedFramesRule.js"),D=u("./src/streaming/rules/abr/SwitchHistoryRule.js"),d=u("./src/streaming/rules/abr/BolaRule.js"),v=u("./src/streaming/rules/abr/L2ARule.js"),p=u("./src/streaming/rules/abr/lolp/LoLpRule.js"),N=u("./src/core/FactoryMaker.js"),O=u("./src/streaming/rules/SwitchRequest.js"),L=u("./src/streaming/constants/Constants.js"),m="qualitySwitchRules",h="abandonFragmentRules";function g(C){var I,H,F=this.context,R=(C=C||{}).mediaPlayerModel,w=C.customParametersModel,b=C.dashMetrics,P=C.settings;function z(Z){return Z.filter(function(oe){return oe.quality>O.default.NO_CHANGE})}function q(Z){var ve,re,ge,ie,de,oe={},he=null;if(0!==Z.length){for(oe[O.default.PRIORITY.STRONG]={quality:O.default.NO_CHANGE,reason:null},oe[O.default.PRIORITY.WEAK]={quality:O.default.NO_CHANGE,reason:null},oe[O.default.PRIORITY.DEFAULT]={quality:O.default.NO_CHANGE,reason:null},ve=0,re=Z.length;ve<re;ve+=1)(ge=Z[ve]).quality!==O.default.NO_CHANGE&&(oe[ge.priority].quality===O.default.NO_CHANGE||oe[ge.priority].quality>ge.quality)&&(oe[ge.priority].quality=ge.quality,oe[ge.priority].reason=ge.reason||null);return oe[O.default.PRIORITY.WEAK].quality!==O.default.NO_CHANGE&&(he=oe[O.default.PRIORITY.WEAK]),oe[O.default.PRIORITY.DEFAULT].quality!==O.default.NO_CHANGE&&(he=oe[O.default.PRIORITY.DEFAULT]),oe[O.default.PRIORITY.STRONG].quality!==O.default.NO_CHANGE&&(he=oe[O.default.PRIORITY.STRONG]),he&&(ie=he.quality,de=he.reason),Object(O.default)(F).create(ie,de)}}return{initialize:function $(){I=[],H=[],P.get().streaming.abr.useDefaultABRRules&&(P.get().streaming.abr.ABRStrategy===L.default.ABR_STRATEGY_L2A?I.push(Object(v.default)(F).create({dashMetrics:b,settings:P})):P.get().streaming.abr.ABRStrategy===L.default.ABR_STRATEGY_LoLP?I.push(Object(p.default)(F).create({dashMetrics:b})):(I.push(Object(d.default)(F).create({dashMetrics:b,mediaPlayerModel:R,settings:P})),I.push(Object(x.default)(F).create({dashMetrics:b})),P.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&I.push(Object(y.default)(F).create({dashMetrics:b,settings:P})),P.get().streaming.abr.additionalAbrRules.switchHistoryRule&&I.push(Object(D.default)(F).create()),P.get().streaming.abr.additionalAbrRules.droppedFramesRule&&I.push(Object(T.default)(F).create()),P.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&H.push(Object(M.default)(F).create({dashMetrics:b,mediaPlayerModel:R,settings:P})))),w.getAbrCustomRules().forEach(function(oe){oe.type===m&&I.push(oe.rule(F).create()),oe.type===h&&H.push(oe.rule(F).create())})},reset:function V(){[I,H].forEach(function(Z){Z&&Z.length&&Z.forEach(function(oe){return oe.reset&&oe.reset()})}),I=[],H=[]},getMaxQuality:function J(Z){return q(z(I.map(function(re){return re.getMaxIndex(Z)})))||Object(O.default)(F).create()},getMinSwitchRequest:q,shouldAbandonFragment:function X(Z,oe){return q(z(H.map(function(ge){return ge.shouldAbandon(Z,oe)})))||Object(O.default)(F).create()},getQualitySwitchRules:function se(){return I}}}g.__dashjs_factory_name="ABRRulesCollection";var S=N.default.getClassFactory(g);S.QUALITY_SWITCH_RULES=m,S.ABANDON_FRAGMENT_RULES=h,N.default.updateSingletonFactory(g.__dashjs_factory_name,S),k.default=S},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/rules/SwitchRequest.js"),y=u("./src/core/FactoryMaker.js"),M=u("./src/core/Debug.js");function T(D){var h,g,S,C,F,N=this.context,O=(D=D||{}).mediaPlayerModel,L=D.dashMetrics,m=D.settings;function f(){S={},C={},F=[]}return h={shouldAbandon:function P(I){var H=Object(x.default)(N).create(x.default.NO_CHANGE,{name:T.__dashjs_factory_name});if(!(I&&I.hasOwnProperty("getMediaInfo")&&I.hasOwnProperty("getMediaType")&&I.hasOwnProperty("getCurrentRequest")&&I.hasOwnProperty("getRepresentationInfo")&&I.hasOwnProperty("getAbrController")))return H;var $=I.getMediaInfo(),z=I.getMediaType(),q=I.getStreamInfo(),J=q?q.id:null,X=I.getCurrentRequest();if(!isNaN(X.index)){!function w(I,H){S[I]=S[I]||{},S[I][H]=S[I][H]||{}}(z,X.index);var V=O.getStableBufferTime();if(L.getCurrentBufferLevel(z)>V)return H;var Z=S[z][X.index];if(null===Z||null===X.firstByteDate||C.hasOwnProperty(Z.id))return H;if(void 0===Z.firstByteTime&&(F[z]=[],Z.firstByteTime=X.firstByteDate.getTime(),Z.segmentDuration=X.duration,Z.bytesTotal=X.bytesTotal,Z.id=X.index),Z.bytesLoaded=X.bytesLoaded,Z.elapsedTime=(new Date).getTime()-Z.firstByteTime,Z.bytesLoaded>0&&Z.elapsedTime>0&&function b(I,H){F[I]=F[I]||[],F[I].push(H)}(z,Math.round(8*Z.bytesLoaded/Z.elapsedTime)),F[z].length>=5&&Z.elapsedTime>500&&Z.bytesLoaded<Z.bytesTotal){var oe=F[z].reduce(function(le,ce){return le+ce},0);if(Z.measuredBandwidthInKbps=Math.round(oe/F[z].length),Z.estimatedTimeOfDownload=+(8*Z.bytesTotal/Z.measuredBandwidthInKbps/1e3).toFixed(2),Z.estimatedTimeOfDownload<1.8*Z.segmentDuration||0===I.getRepresentationInfo().quality)return H;if(!C.hasOwnProperty(Z.id)){var he=I.getAbrController(),ve=Z.bytesTotal-Z.bytesLoaded,re=he.getBitrateList($),ge=he.getQualityForBitrate($,Z.measuredBandwidthInKbps*m.get().streaming.abr.bandwidthSafetyFactor,J),ie=he.getMinAllowedIndexFor(z,J),de=void 0!==ie?Math.max(ie,ge):ge;ve>Z.bytesTotal*re[de].bitrate/re[he.getQualityFor(z,J)].bitrate&&(H.quality=de,H.reason.throughput=Z.measuredBandwidthInKbps,H.reason.fragmentID=Z.id,C[Z.id]=Z,g.debug("["+z+"] frag id",Z.id," is asking to abandon and switch to quality to ",de," measured bandwidth was",Z.measuredBandwidthInKbps),delete S[z][Z.id])}}else Z.bytesLoaded===Z.bytesTotal&&delete S[z][Z.id]}return H},reset:f},function R(){g=Object(M.default)(N).getInstance().getLogger(h),f()}(),h}T.__dashjs_factory_name="AbandonRequestsRule",k.default=y.default.getClassFactory(T)},"./src/streaming/rules/abr/BolaRule.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/MetricsConstants.js"),y=u("./src/streaming/rules/SwitchRequest.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/streaming/vo/metrics/HTTPRequest.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/Debug.js"),p=u("./src/streaming/MediaPlayerEvents.js"),N=u("./src/streaming/constants/Constants.js"),h=10;function C(F){var f,I,H,R=this.context,w=(F=F||{}).dashMetrics,b=F.mediaPlayerModel,P=Object(D.default)(R).getInstance();function q(G,j,_){var A=_.reduce(function(ye,Se,ae){return Se>_[ye]?ae:ye},0);if(0===A)return null;var U=Math.max(G,h+2*j.length),K=(_[A]-1)/(U/h-1);return{gp:K,Vp:h/K}}function J(G){var j={},A=G.getMediaInfo().bitrateList.map(function(ye){return ye.bandwidth}),U=function z(G){return G.map(function(j){return Math.log(j)})}(A);U=U.map(function(ye){return ye-U[0]+1});var K=b.getStableBufferTime(),te=q(K,A,U);return te?(j.state=1,j.bitrates=A,j.utilities=U,j.stableBufferTime=K,j.Vp=te.Vp,j.gp=te.gp,j.lastQuality=0,X(j)):j.state=0,j}function X(G){G.placeholderBuffer=0,G.mostAdvancedSegmentStart=NaN,G.lastSegmentWasReplacement=!1,G.lastSegmentStart=NaN,G.lastSegmentDurationS=NaN,G.lastSegmentRequestTimeMs=NaN,G.lastSegmentFinishTimeMs=NaN}function V(G,j){var _=b.getStableBufferTime();if(G.stableBufferTime!==_){var A=q(_,G.bitrates,G.utilities);if(A.Vp!==G.Vp||A.gp!==G.gp){var U=w.getCurrentBufferLevel(j),K=U+G.placeholderBuffer;K-=h,K*=A.Vp/G.Vp,K+=h,G.stableBufferTime=_,G.Vp=A.Vp,G.gp=A.gp,G.placeholderBuffer=Math.max(0,K-U)}}}function oe(G,j){return G.Vp*(G.utilities[j]+G.gp)}function he(G,j){for(var _=G.bitrates[j],A=G.utilities[j],U=0,K=j-1;K>=0;--K)if(G.utilities[K]<G.utilities[j]){var te=G.bitrates[K];U=Math.max(U,G.Vp*(G.gp+(_*G.utilities[K]-te*A)/(_-te)))}return U}function re(G){var _=G.mediaType===N.default.AUDIO?[N.default.AUDIO]:H;for(var A in _)H.hasOwnProperty(A)&&2===H[A].state&&(H[A].placeholderBuffer=0)}function ge(){for(var G in H)if(H.hasOwnProperty(G)){var j=H[G];0!==j.state&&(j.state=1,X(j))}}function ie(G){if(G&&G.chunk&&G.chunk.mediaInfo){var j=H[G.chunk.mediaInfo.type];if(j&&0!==j.state){var _=G.chunk.start;isNaN(j.mostAdvancedSegmentStart)||_>j.mostAdvancedSegmentStart?(j.mostAdvancedSegmentStart=_,j.lastSegmentWasReplacement=!1):j.lastSegmentWasReplacement=!0,j.lastSegmentStart=_,j.lastSegmentDurationS=G.chunk.duration,j.lastQuality=G.chunk.quality,ue(j,G.chunk.mediaInfo.type)}}}function de(G){if(G&&G.metric===x.default.HTTP_REQUEST&&G.value&&G.value.type===T.HTTPRequest.MEDIA_SEGMENT_TYPE&&G.value.trace&&G.value.trace.length){var j=H[G.mediaType];j&&0!==j.state&&(j.lastSegmentRequestTimeMs=G.value.trequest.getTime(),j.lastSegmentFinishTimeMs=G.value._tfinish.getTime(),ue(j,G.mediaType))}}function ue(G,j){if(!isNaN(G.lastSegmentStart)&&!isNaN(G.lastSegmentRequestTimeMs)&&!isNaN(G.placeholderBuffer)){if(G.placeholderBuffer*=.99,!isNaN(G.lastSegmentFinishTimeMs)){var A=w.getCurrentBufferLevel(j)+.001*(G.lastSegmentFinishTimeMs-G.lastSegmentRequestTimeMs),U=oe(G,G.lastQuality),K=Math.max(0,U-A);G.placeholderBuffer=Math.min(K,G.placeholderBuffer)}G.lastSegmentWasReplacement&&!isNaN(G.lastSegmentDurationS)&&(G.placeholderBuffer+=G.lastSegmentDurationS),G.lastSegmentStart=NaN,G.lastSegmentRequestTimeMs=NaN}}function le(G){if(G){var j=H[G.mediaType];j&&0!==j.state&&(j.abrQuality=G.newQuality)}}function ce(G){if(G){var j=H[G.mediaType];if(j&&0!==j.state){var A,_=w.getCurrentBufferLevel(G.mediaType);A=j.abrQuality>0?he(j,j.abrQuality):h;var U=Math.max(0,A-_);j.placeholderBuffer=Math.min(j.placeholderBuffer,U)}}}function pe(){H={}}return f={getMaxIndex:function ne(G){var j=Object(y.default)(R).create();if(!(G&&G.hasOwnProperty("getMediaInfo")&&G.hasOwnProperty("getMediaType")&&G.hasOwnProperty("getScheduleController")&&G.hasOwnProperty("getStreamInfo")&&G.hasOwnProperty("getAbrController")&&G.hasOwnProperty("useBufferOccupancyABR")))return j;var _=G.getMediaInfo(),A=G.getMediaType(),U=G.getScheduleController(),K=G.getStreamInfo(),te=G.getAbrController(),ye=te.getThroughputHistory(),Se=K?K.id:null,ae=K&&K.manifestInfo&&K.manifestInfo.isDynamic,Y=G.useBufferOccupancyABR();if(j.reason=j.reason||{},!Y)return j;U.setTimeToLoadDelay(0);var W=function se(G){var j=G.getMediaType(),_=H[j];return _?0!==_.state&&V(_,j):(_=J(G),H[j]=_),_}(G);if(0===W.state)return j;var Ne,_e=w.getCurrentBufferLevel(A),Ee=ye.getAverageThroughput(A,ae),me=ye.getSafeAverageThroughput(A,ae),Te=ye.getAverageLatency(A);if(j.reason.state=W.state,j.reason.throughput=Ee,j.reason.latency=Te,isNaN(Ee))return j;switch(W.state){case 1:Ne=te.getQualityForBitrate(_,me,Se,Te),j.quality=Ne,j.reason.throughput=me,W.placeholderBuffer=Math.max(0,he(W,Ne)-_e),W.lastQuality=Ne,!isNaN(W.lastSegmentDurationS)&&_e>=W.lastSegmentDurationS&&(W.state=2);break;case 2:(function ve(G,j){var _=Date.now();isNaN(G.lastSegmentFinishTimeMs)?isNaN(G.lastCallTimeMs)||(G.placeholderBuffer+=Math.max(0,.001*(_-G.lastCallTimeMs))):G.placeholderBuffer+=Math.max(0,.001*(_-G.lastSegmentFinishTimeMs)),G.lastCallTimeMs=_,G.lastSegmentStart=NaN,G.lastSegmentRequestTimeMs=NaN,G.lastSegmentFinishTimeMs=NaN,V(G,j)})(W,A),Ne=function Z(G,j){for(var _=G.bitrates.length,A=NaN,U=NaN,K=0;K<_;++K){var te=(G.Vp*(G.utilities[K]+G.gp)-j)/G.bitrates[K];(isNaN(U)||te>=U)&&(U=te,A=K)}return A}(W,_e+W.placeholderBuffer);var Ie=te.getQualityForBitrate(_,me,Se,Te);Ne>W.lastQuality&&Ne>Ie&&(Ne=Math.max(Ie,W.lastQuality));var we=Math.max(0,_e+W.placeholderBuffer-oe(W,Ne));we<=W.placeholderBuffer?(W.placeholderBuffer-=we,we=0):(we-=W.placeholderBuffer,W.placeholderBuffer=0,Ne<te.getMaxAllowedIndexFor(A,Se)?U.setTimeToLoadDelay(1e3*we):we=0),j.quality=Ne,j.reason.throughput=Ee,j.reason.latency=Te,j.reason.bufferLevel=_e,j.reason.placeholderBuffer=W.placeholderBuffer,j.reason.delay=we,W.lastQuality=Ne;break;default:I.debug("BOLA ABR rule invoked in bad state."),j.quality=te.getQualityForBitrate(_,me,Se,Te),j.reason.state=W.state,j.reason.throughput=me,j.reason.latency=Te,W.state=1,X(W)}return j},reset:function ee(){pe(),P.off(p.default.BUFFER_EMPTY,re,f),P.off(p.default.PLAYBACK_SEEKING,ge,f),P.off(p.default.METRIC_ADDED,de,f),P.off(p.default.QUALITY_CHANGE_REQUESTED,le,f),P.off(p.default.FRAGMENT_LOADING_ABANDONED,ce,f),P.off(d.default.MEDIA_FRAGMENT_LOADED,ie,f)}},function $(){I=Object(v.default)(R).getInstance().getLogger(f),pe(),P.on(p.default.BUFFER_EMPTY,re,f),P.on(p.default.PLAYBACK_SEEKING,ge,f),P.on(p.default.METRIC_ADDED,de,f),P.on(p.default.QUALITY_CHANGE_REQUESTED,le,f),P.on(p.default.FRAGMENT_LOADING_ABANDONED,ce,f),P.on(d.default.MEDIA_FRAGMENT_LOADED,ie,f)}(),f}C.__dashjs_factory_name="BolaRule",k.default=M.default.getClassFactory(C)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/rules/SwitchRequest.js"),M=u("./src/core/Debug.js");function T(){var d,v,D=this.context;return d={getMaxIndex:function L(m){var h=Object(y.default)(D).create();if(!m||!m.hasOwnProperty("getDroppedFramesHistory"))return h;var g=m.getDroppedFramesHistory(),S=m.getStreamInfo().id;if(g){var C=g.getFrameHistory(S);if(!C||0===C.length)return h;for(var F=0,R=0,w=y.default.NO_CHANGE,b=1;b<C.length;b++)if(C[b]&&(F=C[b].droppedVideoFrames,(R=C[b].totalVideoFrames)>375&&F/R>.15)){v.debug("index: "+(w=b-1)+" Dropped Frames: "+F+" Total Frames: "+R);break}return Object(y.default)(D).create(w,{droppedFrames:F})}return h}},function O(){v=Object(M.default)(D).getInstance().getLogger(d)}(),d}T.__dashjs_factory_name="DroppedFramesRule",k.default=x.default.getClassFactory(T)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/core/Debug.js"),D=u("./src/streaming/rules/SwitchRequest.js"),d=u("./src/streaming/constants/Constants.js"),v=u("./src/streaming/constants/MetricsConstants.js"),p=u("./src/streaming/MediaPlayerEvents.js");function N(O){O=O||{};var C,F,R,h=this.context,g=Object(x.default)(h).getInstance(),S=O.dashMetrics;function I(){(R={})[d.default.VIDEO]={ignoreCount:2},R[d.default.AUDIO]={ignoreCount:2}}function H(){I()}function $(q){!isNaN(q.startTime)&&(q.mediaType===d.default.AUDIO||q.mediaType===d.default.VIDEO)&&R[q.mediaType].ignoreCount>0&&R[q.mediaType].ignoreCount--}return C={getMaxIndex:function P(q){var J=Object(D.default)(h).create();if(!q||!q.hasOwnProperty("getMediaType"))return J;!function b(){if(!S||!S.hasOwnProperty("getCurrentBufferLevel")||!S.hasOwnProperty("getCurrentBufferState"))throw new Error(d.default.MISSING_CONFIG_ERROR)}();var X=q.getMediaType(),V=S.getCurrentBufferState(X),Z=q.getRepresentationInfo().fragmentDuration,oe=q.getStreamInfo(),he=oe?oe.id:null,ve=q.getScheduleController(),re=oe&&oe.manifestInfo&&oe.manifestInfo.isDynamic;if(function f(q,J){return!q&&R[J].ignoreCount>0}(ve.getPlaybackController().getLowLatencyModeEnabled(),X)||!Z)return J;if(V&&V.state===v.default.BUFFER_EMPTY)F.debug("["+X+"] Switch to index 0; buffer is empty."),J.quality=0,J.reason="InsufficientBufferRule: Buffer is empty";else{var de=q.getMediaInfo(),ue=q.getAbrController(),le=ue.getThroughputHistory(),ce=S.getCurrentBufferLevel(X),ne=le.getAverageThroughput(X,re),pe=le.getAverageLatency(X);J.quality=ue.getQualityForBitrate(de,ne*(ce/Z)*.5,he,pe),J.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return J},reset:function z(){I(),g.off(p.default.PLAYBACK_SEEKING,H,C),g.off(y.default.BYTES_APPENDED_END_FRAGMENT,$,C)}},function w(){F=Object(T.default)(h).getInstance().getLogger(C),I(),g.on(p.default.PLAYBACK_SEEKING,H,C),g.on(y.default.BYTES_APPENDED_END_FRAGMENT,$,C)}(),C}N.__dashjs_factory_name="InsufficientBufferRule",k.default=M.default.getClassFactory(N)},"./src/streaming/rules/abr/L2ARule.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/MetricsConstants.js"),y=u("./src/streaming/rules/SwitchRequest.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/streaming/vo/metrics/HTTPRequest.js"),D=u("./src/core/EventBus.js"),d=u("./src/core/events/Events.js"),v=u("./src/core/Debug.js"),p=u("./src/streaming/constants/Constants.js");function m(h){var F,R,w,b,g=this.context,S=(h=h||{}).dashMetrics,C=Object(D.default)(g).getInstance();function f(re){var ge={},ie=re.getMediaInfo(),de=ie.bitrateList.map(function(ue){return ue.bandwidth/1e3});return ge.state=1,ge.bitrates=de,ge.lastQuality=0,function I(re){!re||!re.type||(w[re.type]={},w[re.type].w=[],w[re.type].prev_w=[],w[re.type].Q=0,w[re.type].segment_request_start_s=0,w[re.type].segment_download_finish_s=0,w[re.type].B_target=1.5)}(ie),H(ge),ge}function H(re){re.placeholderBuffer=0,re.mostAdvancedSegmentStart=NaN,re.lastSegmentWasReplacement=!1,re.lastSegmentStart=NaN,re.lastSegmentDurationS=NaN,re.lastSegmentRequestTimeMs=NaN,re.lastSegmentFinishTimeMs=NaN}function z(){for(var re in R)if(R.hasOwnProperty(re)){var ge=R[re];0!==ge.state&&(ge.state=1,H(ge))}}function q(re){if(re&&re.chunk&&re.chunk.mediaInfo){var ge=R[re.chunk.mediaInfo.type],ie=w[re.chunk.mediaInfo.type];if(ge&&0!==ge.state){var de=re.chunk.start;isNaN(ge.mostAdvancedSegmentStart)||de>ge.mostAdvancedSegmentStart?(ge.mostAdvancedSegmentStart=de,ge.lastSegmentWasReplacement=!1):ge.lastSegmentWasReplacement=!0,ge.lastSegmentStart=de,ge.lastSegmentDurationS=re.chunk.duration,ge.lastQuality=re.chunk.quality,X(ge,ie)}}}function J(re){if(re&&re.metric===x.default.HTTP_REQUEST&&re.value&&re.value.type===T.HTTPRequest.MEDIA_SEGMENT_TYPE&&re.value.trace&&re.value.trace.length){var ge=R[re.mediaType],ie=w[re.mediaType];ge&&0!==ge.state&&(ge.lastSegmentRequestTimeMs=re.value.trequest.getTime(),ge.lastSegmentFinishTimeMs=re.value._tfinish.getTime(),X(ge,ie))}}function X(re,ge){!isNaN(re.lastSegmentStart)&&!isNaN(re.lastSegmentRequestTimeMs)&&(ge.segment_request_start_s=.001*re.lastSegmentRequestTimeMs,ge.segment_download_finish_s=.001*re.lastSegmentFinishTimeMs,re.lastSegmentStart=NaN,re.lastSegmentRequestTimeMs=NaN)}function V(re){if(re&&re.mediaType){var ge=R[re.mediaType];ge&&0!==ge.state&&(ge.abrQuality=re.newQuality)}}function se(re,ge){if(re.length!==ge.length)return-1;for(var ie=0,de=0;de<re.length;de++)ie+=re[de]*ge[de];return ie}function he(){R={},w={}}return F={getMaxIndex:function oe(re){var W,ge=Object(y.default)(g).create(),de=Math.pow(4,.99),ue=Math.max(Math.pow(4,1),de*Math.sqrt(4)),le=re.getMediaInfo(),ce=re.getMediaType(),ne=le.bitrateList.map(function(Lt){return Lt.bandwidth}),pe=ne.length,ee=re.getScheduleController(),G=re.getStreamInfo(),j=re.getAbrController(),_=j.getThroughputHistory(),A=G&&G.manifestInfo&&G.manifestInfo.isDynamic,U=re.useL2AABR(),K=S.getCurrentBufferLevel(ce,!0),te=_.getSafeAverageThroughput(ce,A),ye=_.getAverageThroughput(ce,A),ae=_.getAverageLatency(ce),_e=re.getVideoModel().getPlaybackRate();if(!(re&&re.hasOwnProperty("getMediaInfo")&&re.hasOwnProperty("getMediaType")&&re.hasOwnProperty("getScheduleController")&&re.hasOwnProperty("getStreamInfo")&&re.hasOwnProperty("getAbrController")&&re.hasOwnProperty("useL2AABR")&&(ge.reason=ge.reason||{},U&&ce!==p.default.AUDIO)))return ge;ee.setTimeToLoadDelay(0);var Ee=function $(re){var ge=re.getMediaType(),ie=R[ge];return ie||(ie=f(re),R[ge]=ie),ie}(re);if(0===Ee.state)return ge;var me=w[ce];if(!me||(ge.reason.state=Ee.state,ge.reason.throughput=ye,ge.reason.latency=ae,isNaN(ye)))return ge;switch(Ee.state){case 1:if(W=j.getQualityForBitrate(le,te,G.id,ae),ge.quality=W,ge.reason.throughput=te,Ee.lastQuality=W,!isNaN(Ee.lastSegmentDurationS)&&K>=me.B_target){Ee.state=2,me.Q=de;for(var Te=0;Te<pe;++Te)me.prev_w[Te]=Te===Ee.lastQuality?1:0}break;case 2:var Ne=[],Ie=S.getCurrentHttpRequest(ce).trace.reduce(function(Lt,kt){return Lt+kt.d},0),we=S.getCurrentHttpRequest(ce).trace.reduce(function(Lt,kt){return Lt+kt.b[0]},0),ke=Math.round(8*we/Ie);ke<1&&(ke=1);for(var Re=Ee.lastSegmentDurationS,xe=1,ze=0;ze<pe;++ze)ne[ze]=ne[ze]/1e3,_e*ne[ze]>ke&&(xe=-1),me.w[ze]=me.prev_w[ze]+xe*(Re/(2*ue))*((me.Q+de)*(_e*ne[ze]/ke));me.w=function Z(re){for(var ge=re.length,ie=!1,de=[],ue=0;ue<ge;++ue)de[ue]=re[ue];for(var le=re.sort(function(j,_){return _-j}),ce=0,ne=0,pe=[],ee=0;ee<ge-1;++ee)if((ne=((ce+=le[ee])-1)/(ee+1))>=le[ee+1]){ie=!0;break}ie||(ne=(ce+le[ge-1]-1)/ge);for(var G=0;G<ge;++G)pe[G]=Math.max(de[G]-ne,0);return pe}(me.w);for(var ut=0;ut<pe;++ut)Ne[ut]=me.w[ut]-me.prev_w[ut],me.prev_w[ut]=me.w[ut];me.Q=Math.max(0,me.Q-Re+Re*_e*((se(ne,me.prev_w)+se(ne,Ne))/ke));for(var at=[],yt=0;yt<pe;++yt)at[yt]=Math.abs(ne[yt]-se(me.w,ne));(W=at.indexOf(Math.min.apply(Math,at)))>Ee.lastQuality&&ne[Ee.lastQuality+1]<=ke&&(W=Ee.lastQuality+1),ne[W]>=ke&&(me.Q=2*Math.max(de,me.Q)),ge.quality=W,ge.reason.throughput=ye,ge.reason.latency=ae,ge.reason.bufferLevel=K,Ee.lastQuality=ge.quality;break;default:b.debug("L2A ABR rule invoked in bad state."),ge.quality=j.getQualityForBitrate(le,te,G.id,ae),ge.reason.state=Ee.state,ge.reason.throughput=te,ge.reason.latency=ae,Ee.state=1,H(Ee)}return ge},reset:function ve(){he(),C.off(d.default.PLAYBACK_SEEKING,z,F),C.off(d.default.MEDIA_FRAGMENT_LOADED,q,F),C.off(d.default.METRIC_ADDED,J,F),C.off(d.default.QUALITY_CHANGE_REQUESTED,V,F)}},function P(){b=Object(v.default)(g).getInstance().getLogger(F),he(),C.on(d.default.PLAYBACK_SEEKING,z,F),C.on(d.default.MEDIA_FRAGMENT_LOADED,q,F),C.on(d.default.METRIC_ADDED,J,F),C.on(d.default.QUALITY_CHANGE_REQUESTED,V,F)}(),F}m.__dashjs_factory_name="L2ARule",k.default=M.default.getClassFactory(m)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),M=u("./src/streaming/rules/SwitchRequest.js");function T(){var d,v,D=this.context;return d={getMaxIndex:function L(m){for(var h=m?m.getSwitchHistory():null,g=h?h.getSwitchRequests():[],S=0,C=0,F=0,R=Object(M.default)(D).create(),w=0;w<g.length;w++)if(void 0!==g[w]&&(F+=g[w].dropSize,(S+=g[w].drops)+(C+=g[w].noDrops)>=6&&S/C>.075)){R.quality=w>0&&g[w].drops>0?w-1:w,R.reason={index:R.quality,drops:S,noDrops:C,dropSize:F},v.debug("Switch history rule index: "+R.quality+" samples: "+(S+C)+" drops: "+S);break}return R}},function O(){v=Object(y.default)(D).getInstance().getLogger(d)}(),d}T.__dashjs_factory_name="SwitchHistoryRule",k.default=x.default.getClassFactory(T)},"./src/streaming/rules/abr/ThroughputRule.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/rules/SwitchRequest.js"),M=u("./src/streaming/constants/Constants.js"),T=u("./src/streaming/constants/MetricsConstants.js");function D(d){var v=this.context,p=(d=d||{}).dashMetrics;return{getMaxIndex:function m(g){var S=Object(y.default)(v).create();if(!(g&&g.hasOwnProperty("getMediaInfo")&&g.hasOwnProperty("getMediaType")&&g.hasOwnProperty("useBufferOccupancyABR")&&g.hasOwnProperty("getAbrController")&&g.hasOwnProperty("getScheduleController")))return S;!function L(){if(!p||!p.hasOwnProperty("getCurrentBufferState"))throw new Error(M.default.MISSING_CONFIG_ERROR)}();var C=g.getMediaInfo(),F=g.getMediaType(),R=p.getCurrentBufferState(F),w=g.getScheduleController(),b=g.getAbrController(),P=g.getStreamInfo(),f=P?P.id:null,I=P&&P.manifestInfo?P.manifestInfo.isDynamic:null,H=b.getThroughputHistory(),$=H.getSafeAverageThroughput(F,I),z=H.getAverageLatency(F),q=g.useBufferOccupancyABR();return isNaN($)||!R||q||b.getAbandonmentStateFor(f,F)!==T.default.ABANDON_LOAD&&(R.state===T.default.BUFFER_LOADED||I)&&(S.quality=b.getQualityForBitrate(C,$,f,z),w.setTimeToLoadDelay(0),S.reason={throughput:$,latency:z}),S},reset:function h(){}}}D.__dashjs_factory_name="ThroughputRule",k.default=x.default.getClassFactory(D)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),M_MANUAL="manual_weight_selection",M_RANDOM="random_weight_selection",M_DYNAMIC="dynamic_weight_selection";function T(){var d,v,p,N,O,L,m,h,g,D=this.context;function F(){p=null,N=1,O=100,L=0,m=null,h=null,g=M_DYNAMIC}function R(){var oe=0;if(p)for(var he=0;he<p.length;he++){var ve=p[he];ve.state.throughput>oe&&(oe=ve.state.throughput)}return oe}function b(oe,he,ve){var re=oe.map(function(ie,de){return ve[de]*Math.pow(ie-he[de],2)}).reduce(function(ie,de){return ie+de});return(re<0?-1:1)*Math.sqrt(Math.abs(re))}function P(oe,he){return b([oe.state.throughput,oe.state.latency,oe.state.rebuffer,oe.state.switch],[he.state.throughput,he.state.latency,he.state.rebuffer,he.state.switch],[1,1,1,1])}function f(oe,he,ve){for(var re=0;re<he.length;re++){var ge=he[re],de=P(ge,oe);I(ge,ve,Math.exp(-1*Math.pow(de,2)/(2*Math.pow(.1,2))))}}function I(oe,he,ve){var re=oe.state,ge=[.01,.01,.01,.01];re.throughput=re.throughput+(he[0]-re.throughput)*ge[0]*ve,re.latency=re.latency+(he[1]-re.latency)*ge[1]*ve,re.rebuffer=re.rebuffer+(he[2]-re.rebuffer)*ge[2]*ve,re.switch=re.switch+(he[3]-re.switch)*ge[3]*ve}return d={getNextQuality:function $(oe,he,ve,re,ge,ie,de){var ue=ve,le=re,ce=he,ne=function V(oe){if(!p){p=[];var he=oe.bitrateList,ve=[];L=he[0].bandwidth,he.forEach(function(ie){ve.push(ie.bandwidth),ie.bandwidth<L&&(L=ie.bandwidth)}),N=function w(oe){var he=oe.map(function(ve){return Math.pow(ve,2)}).reduce(function(ve,re){return ve+re});return Math.sqrt(he)}(ve);for(var re=0;re<he.length;re++)p.push({qualityIndex:re,bitrate:he[re].bandwidth,state:{throughput:he[re].bandwidth/N,latency:0,rebuffer:0,switch:0}});h=function Z(oe){var he=[],ve=function se(oe){for(var he=[],ve=0;ve<oe;ve++){var re=[Math.random()*R(),Math.random(),Math.random(),Math.random()];he.push(re)}return he}(Math.pow(oe.length,2));he.push(ve[0]);for(var re=[1,1,1,1],ge=1;ge<oe.length;ge++){for(var ie=null,de=null,ue=0;ue<ve.length;ue++){for(var le=ve[ue],ce=null,ne=0;ne<he.length;ne++){var pe=b(le,he[ne],re);(null===ce||pe<ce)&&(ce=pe)}(null===de||ce>de)&&(ie=le,de=ce)}he.push(ie)}for(var ee=null,G=null,j=0;j<he.length;j++){for(var _=0,A=0;A<he.length;A++)j!==A&&(_+=b(he[j],he[A],re));(null===ee||_>ee)&&(ee=_,G=j)}var U=[];for(U.push(he[G]),he.splice(G,1);he.length>0;){for(var K=null,te=null,ye=0;ye<he.length;ye++){var Se=b(U[0],he[ye],re);(null===K||Se<K)&&(K=Se,te=ye)}U.push(he[te]),he.splice(te,1)}return U}(p)}return p}(oe),pe=he/N;pe>1&&(pe=R()),ve/=O,v.debug("getNextQuality called throughput:".concat(pe," latency:").concat(ve," bufferSize:").concat(re," currentQualityIndex:").concat(ie," playbackRate:").concat(ge));var A=ne[ie],U=A.bitrate*de.getSegmentDuration()/ce,K=Math.max(0,U-le);if(le-U<de.getMinBuffer())return v.debug("Buffer is low for bitrate= ".concat(A.bitrate," downloadTime=").concat(U," currentBuffer=").concat(le," rebuffer=").concat(K)),function H(oe,he){var ve=0,re=oe;if(p)for(var ge=0;ge<p.length;ge++){var ie=p[ge];ie.bitrate<oe.bitrate&&ie.bitrate>ve&&he>ie.bitrate&&(ve=ie.bitrate,re=ie)}return re}(A,ce).qualityIndex;switch(g){case M_MANUAL:!function z(){m=[.4,.4,.4,.4]}();break;case M_RANDOM:!function q(oe){m=function X(oe,he){for(var ve=[],re=Math.sqrt(2/oe),ge=0;ge<he;ge++)ve.push(Math.random()*re);return m=ve}(oe.length,4)}(ne);break;default:!function J(oe,he,ve,re,ge,ie,de){m||(m=h[h.length-1]);var ue=oe.findWeightVector(he,ve,re,ge,ie,de);null!==ue&&-1!==ue&&(m=ue)}(de,ne,ue,le,K,ce,ge)}for(var te=null,ye=null,Se=null,ae=0;ae<ne.length;ae++){var Y=ne[ae],W=Y.state,_e=[W.throughput,W.latency,W.rebuffer,W.switch],Ee=m.slice(),me=de.getNextBufferWithBitrate(Y.bitrate,le,ce),Te=me<de.getMinBuffer();Te&&v.debug("Buffer is low for bitrate=".concat(Y.bitrate," downloadTime=").concat(U," currentBuffer=").concat(le," nextBuffer=").concat(me)),(Y.bitrate>he-1e4||Te)&&Y.bitrate!==L&&(Ee[0]=100);var Ne=b(_e,[pe,0,0,0],Ee);(null===te||Ne<te)&&(te=Ne,ye=Y.qualityIndex,Se=Y)}var Ie=Math.abs(A.bitrate-Se.bitrate)/N;return f(A,ne,[pe,ve,K,Ie]),f(Se,ne,[pe,0,0,Ie]),ye},reset:function C(){F()}},function S(){v=Object(y.default)(D).getInstance().getLogger(d),F()}(),d}T.__dashjs_factory_name="LearningAbrController",k.default=x.default.getClassFactory(T)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/rules/abr/lolp/QoeInfo.js");function M(){var T,D,d,v,p;function O(){D=null,d=null,v=null,p=null}function m(R,w,b,P){var f=new y.default;return f.type=R,f.weights.bitrateReward=w||1,f.weights.bitrateSwitchPenalty=1,f.weights.rebufferPenalty=b||1e3,f.weights.latencyPenalty=[],f.weights.latencyPenalty.push({threshold:1.1,penalty:.05*P}),f.weights.latencyPenalty.push({threshold:1e8,penalty:.1*b}),f.weights.playbackSpeedPenalty=P||200,f}function g(R,w,b,P,f){f.bitrateWSum+=f.weights.bitrateReward*R,f.lastBitrate&&(f.bitrateSwitchWSum+=f.weights.bitrateSwitchPenalty*Math.abs(R-f.lastBitrate)),f.lastBitrate=R,f.rebufferWSum+=f.weights.rebufferPenalty*w;for(var I=0;I<f.weights.latencyPenalty.length;I++){var H=f.weights.latencyPenalty[I];if(b<=H.threshold){f.latencyWSum+=H.penalty*b;break}}f.playbackSpeedWSum+=f.weights.playbackSpeedPenalty*Math.abs(1-P),f.totalQoe=f.bitrateWSum-f.bitrateSwitchWSum-f.rebufferWSum-f.latencyWSum-f.playbackSpeedWSum}return T={setupPerSegmentQoe:function L(R,w,b){D=m("segment",R,w,b),d=R,v=w,p=b},logSegmentMetrics:function h(R,w,b,P){D&&g(R,w,b,P,D)},getPerSegmentQoe:function S(){return D},calculateSingleUseQoe:function C(R,w,b,P){var f=null;return d&&v&&p&&(f=m("segment",d,v,p)),f?(g(R,w,b,P,f),f.totalQoe):0},reset:function F(){O()}},function N(){O()}(),T}M.__dashjs_factory_name="LoLpQoeEvaluator",k.default=x.default.getClassFactory(M)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/Debug.js"),y=u("./src/core/FactoryMaker.js"),M=u("./src/streaming/rules/abr/lolp/LearningAbrController.js"),T=u("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),D=u("./src/streaming/rules/SwitchRequest.js"),d=u("./src/streaming/constants/MetricsConstants.js"),v=u("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),p=u("./src/streaming/constants/Constants.js");function L(m){var S,C,F,R,h=(m=m||{}).dashMetrics,g=this.context;return C={getMaxIndex:function b(I){try{var H=Object(D.default)(g).create(),$=I.getMediaInfo().type,z=I.getAbrController(),q=I.getStreamInfo(),J=z.getQualityFor($,q.id),X=I.getMediaInfo(),V=h.getCurrentBufferState($),se=I.getScheduleController(),Z=h.getCurrentBufferLevel($,!0),oe=q&&q.manifestInfo?q.manifestInfo.isDynamic:null,he=se.getPlaybackController(),ve=he.getCurrentLiveLatency();if(!I.useLoLPABR()||$===p.default.AUDIO)return H;ve||(ve=0);var re=he.getPlaybackRate(),ie=z.getThroughputHistory().getSafeAverageThroughput($,oe);if(S.debug("Throughput ".concat(Math.round(ie)," kbps")),isNaN(ie)||!V||z.getAbandonmentStateFor(q.id,$)===d.default.ABANDON_LOAD)return H;for(var de=X.bitrateList,ue=I.getRepresentationInfo().fragmentDuration,le=de[0].bandwidth/1e3,ce=de[de.length-1].bandwidth/1e3,ne=0;ne<de.length;ne++){var pe=de[ne].bandwidth/1e3;pe>ce?ce=pe:pe<le&&(le=pe)}var G=de[J].bandwidth/1e3,j=h.getCurrentHttpRequest($,!0),_=(j.tresponse.getTime()-j.trequest.getTime())/1e3,A=_>ue?_-ue:0;R.setupPerSegmentQoe(ue,ce,le),R.logSegmentMetrics(G,A,ve,re);var U=Object(v.default)(g).create({targetLatency:1.5,bufferMin:.3,segmentDuration:ue,qoeEvaluator:R});return H.quality=F.getNextQuality(X,1e3*ie,ve,Z,re,J,U),H.reason={throughput:ie,latency:ve},H.priority=D.default.PRIORITY.STRONG,se.setTimeToLoadDelay(0),H.quality!==J&&console.log("[TgcLearningRule]["+$+"] requesting switch to index: ",H.quality,"Average throughput",Math.round(ie),"kbps"),H}catch(K){throw K}},reset:function f(){!function P(){F.reset(),R.reset()}()}},function w(){S=Object(x.default)(g).getInstance().getLogger(C),F=Object(M.default)(g).create(),R=Object(T.default)(g).create()}(),C}L.__dashjs_factory_name="LoLPRule",k.default=y.default.getClassFactory(L)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(M){var p,L,m,T=M.targetLatency,D=M.bufferMin,d=M.segmentDuration,v=M.qoeEvaluator;function w(){return d}function P(f,I){var H=w();return I>H?f-H:f+H-I}return p={getMinBuffer:function R(){return D},getSegmentDuration:w,getNextBufferWithBitrate:function b(f,I,H){return P(I,f*d/H)},getNextBuffer:P,findWeightVector:function S(f,I,H,$,z,q){var J=null,X=null,V=null,se=Math.abs(I-m);return f.forEach(function(Z){L.forEach(function(oe){var he_latency=oe[1],he_buffer=oe[2],ve=Z.bitrate*d/z,re=P(H,ve),ge=Math.max(1e-5,ve-re),le=v.calculateSingleUseQoe(Z.bitrate,(0===he_buffer?10:1/he_buffer)*ge,(0===he_latency?10:1/he_latency)*Z.state.latency,q);(null===J||le>J)&&function C(f,I,H){return!(f>T+H)&&I>=D}(I,re,se)&&(J=le,X=oe,V=Z.bitrate)})}),null===X&&null===V&&(X=-1),m=I,X}},function h(){!function g(){L=function F(f,I){return function z(q,J,X){if(X===J)return q;for(var V=q.length,se=0;se<V;se++)for(var Z=q.shift(),oe=0;oe<f.length;oe++)q.push(Z.concat(f[oe]));return z(q,J,X+1)}(f.map(function(z){return[z]}),I,1)}([.2,.4,.6,.8,1],4),m=0}()}(),p}y.__dashjs_factory_name="LoLpWeightSelector",k.default=x.default.getClassFactory(y)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(){var M=0;function D(m){for(var h="",g=0;g<m.length;++g)h+=m[g].uchar;return h.length-h.replace(/^\s+/,"").length}function d(m){return"left: "+3.125*m.x+"%; top: "+6.66*m.y1+"%; width: "+(100-3.125*m.x)+"%; height: "+6.66*Math.max(m.y2-1-m.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function v(m){return"red"===m?"rgb(255, 0, 0)":"green"===m?"rgb(0, 255, 0)":"blue"===m?"rgb(0, 0, 255)":"cyan"===m?"rgb(0, 255, 255)":"magenta"===m?"rgb(255, 0, 255)":"yellow"===m?"rgb(255, 255, 0)":"white"===m?"rgb(255, 255, 255)":"black"===m?"rgb(0, 0, 0)":m}function p(m,h){var g=m.videoHeight/15;return h?"font-size: "+g+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(h.foreground?v(h.foreground):"rgb(255, 255, 255)")+"; font-style: "+(h.italics?"italic":"normal")+"; text-decoration: "+(h.underline?"underline":"none")+"; white-space: pre; background-color: "+(h.background?v(h.background):"transparent")+";":"font-size: "+g+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function N(m){return m.replace(/^\s+/g,"")}function O(m){return m.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function L(m,h,g,S){var $,z,C=null,R=!1,w=-1,b={start:h,end:g,spans:[]},P="style_cea608_white_black",f={},I={},H=[];for($=0;$<15;++$){var q=S.rows[$],J="",X=null;if(!1===q.isEmpty()){var V=D(q.chars);null===C&&(C={x:V,y1:$,y2:$+1,p:[]}),V!==w&&R&&(C.p.push(b),b={start:h,end:g,spans:[]},C.y2=$,C.name="region_"+C.x+"_"+C.y1+"_"+C.y2,!1===f.hasOwnProperty(C.name)?(H.push(C),f[C.name]=C):f[C.name].p.contat(C.p),C={x:V,y1:$,y2:$+1,p:[]});for(var se=0;se<q.chars.length;++se){var Z=q.chars[se],oe=Z.penState;if(null===X||!oe.equals(X)){J.trim().length>0&&(b.spans.push({name:P,line:J,row:$}),J="");var he="style_cea608_"+oe.foreground+"_"+oe.background;oe.underline&&(he+="_underline"),oe.italics&&(he+="_italics"),I.hasOwnProperty(he)||(I[he]=JSON.parse(JSON.stringify(oe))),X=oe,P=he}J+=Z.uchar}J.trim().length>0&&b.spans.push({name:P,line:J,row:$}),R=!0,w=V}else R=!1,w=-1,C&&(C.p.push(b),b={start:h,end:g,spans:[]},C.y2=$,C.name="region_"+C.x+"_"+C.y1+"_"+C.y2,!1===f.hasOwnProperty(C.name)?(H.push(C),f[C.name]=C):f[C.name].p.contat(C.p),C=null)}C&&(C.p.push(b),C.y2=$+1,C.name="region_"+C.x+"_"+C.y1+"_"+C.y2,!1===f.hasOwnProperty(C.name)?(H.push(C),f[C.name]=C):f[C.name].p.contat(C.p),C=null);var ve=[];for($=0;$<H.length;++$){var re=H[$],ge="sub_cea608_"+M++,ie=document.createElement("div");ie.id=ge;var de=d(re);ie.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+de;var ue=document.createElement("div");ue.className="paragraph bodyStyle",ue.style.cssText=p(m);var le=document.createElement("div");le.className="cueUniWrapper",le.style.cssText="unicode-bidi: normal; direction: ltr;";for(var ce=0;ce<re.p.length;++ce){var ne=re.p[ce],pe=0;for(z=0;z<ne.spans.length;++z){var ee=ne.spans[z];if(ee.line.length>0){if(0!==z&&pe!=ee.row){var G=document.createElement("br");G.className="lineBreak",le.appendChild(G)}var j=!1;pe===ee.row&&(j=!0),pe=ee.row;var _=I[ee.name],A=document.createElement("span");A.className="spanPadding "+ee.name+" customSpanColor",A.style.cssText=p(m,_),A.textContent=0!==z&&j?z===ne.spans.length-1?O(ee.line):ee.line:ne.spans.length>1&&z<ne.spans.length-1&&ee.row===ne.spans[z+1].row?N(ee.line):ee.line.trim(),le.appendChild(A)}}}ue.appendChild(le),ie.appendChild(ue);var U={bodyStyle:["%",90]};for(var K in I)I.hasOwnProperty(K)&&(U[K]=["%",90]);ve.push({type:"html",start:h,end:g,cueHTMLElement:ie,cueID:ge,cellResolution:[32,15],isFromCEA608:!0,fontSize:U,lineHeight:{},linePadding:{}})}return ve}}}y.__dashjs_factory_name="EmbeddedTextHtmlRender",k.default=x.default.getSingletonFactory(y)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/streaming/utils/InitCache.js"),D=u("./src/streaming/SourceBufferSink.js"),d=u("./src/streaming/vo/DashJSError.js"),v=u("./src/core/errors/Errors.js"),p="NotFragmentedTextBufferController";function N(O){O=O||{};var F,R,w,b,P,f,L=this.context,m=Object(x.default)(L).getInstance(),h=O.textController,g=O.errHandler,S=O.streamInfo,C=O.type;function V(K){b=K}function ve(K){R!==K&&(R=K)&&function U(K,te){m.trigger(K,te||{},{streamId:S.id,mediaType:C})}(y.default.BUFFERING_COMPLETED)}function ie(K){!K.chunk.bytes||R||(f.save(K.chunk),P.append(K.chunk),ve(!0))}return F={initialize:function $(K){V(K)},getStreamId:function q(){return S.id},getType:function J(){return C},getBufferControllerType:function H(){return p},createBufferSink:function z(K){return new Promise(function(te,ye){try{(P=Object(D.default)(L).create({mediaSource:b,textController:h,eventBus:m})).initializeForFirstUse(S,K),w||(P.getBuffer()&&"function"==typeof P.getBuffer().initialize&&P.getBuffer().initialize(),w=!0),te(P)}catch(Se){g.error(new d.default(v.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,v.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+C)),ye(Se)}})},getBuffer:function X(){return P},getBufferLevel:function oe(){return 0},getRangeAt:function de(){return null},getAllRangesWithSafetyFactor:function ue(){return[]},getContinuousBufferTimeForTargetTime:function le(){return Number.POSITIVE_INFINITY},setMediaSource:V,getMediaSource:function se(){return b},appendInitSegmentFromCache:function ge(K){return null!==f.extract(S.id,K)},getIsBufferingCompleted:function he(){return R},setIsBufferingCompleted:ve,getIsPruningInProgress:function Z(){return!1},reset:function re(K){m.off(y.default.INIT_FRAGMENT_LOADED,ie,F),!K&&P&&(P.abort(),P.reset(),P=null)},clearBuffers:function ce(){return Promise.resolve()},prepareForPlaybackSeek:function pe(){return Promise.resolve()},prepareForReplacementTrackSwitch:function ee(){return R=!1,Promise.resolve()},setSeekTarget:function j(){},updateAppendWindow:function G(){return Promise.resolve()},pruneAllSafely:function A(){return Promise.resolve()},updateBufferTimestampOffset:function ne(){return Promise.resolve()},segmentRequestingCompleted:function _(){}},function I(){w=!1,b=null,R=!1,f=Object(T.default)(L).getInstance(),m.on(y.default.INIT_FRAGMENT_LOADED,ie,F)}(),F}N.__dashjs_factory_name=p,k.default=M.default.getClassFactory(N)},"./src/streaming/text/TextController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/core/FactoryMaker.js"),M=u("./src/streaming/text/TextSourceBuffer.js"),T=u("./src/streaming/text/TextTracks.js"),D=u("./src/streaming/utils/VTTParser.js"),d=u("./src/streaming/utils/TTMLParser.js"),v=u("./src/core/EventBus.js"),p=u("./src/core/events/Events.js"),N=u("./src/streaming/MediaPlayerEvents.js"),O=u("./src/streaming/utils/SupervisorTools.js");function L(m){var b,P,f,I,H,$,z,q,J,X,V,se,Z,h=this.context,g=m.adapter,S=m.errHandler,C=m.manifestModel,F=m.mediaController,R=m.videoModel,w=m.settings;function ce(Se){var ae=Se.tracks,Y=Se.index,W=Se.streamId;!1===w.get().streaming.text.defaultEnabled&&!ee()||Z?j(W,-1):(q&&ae.some(function(Ee,me){if(F.matchSettings(q,Ee))return j(W,me),Y=me,!0}),X=!1),P[W].lastEnabledIndex=Y,z.trigger(N.default.TEXT_TRACKS_ADDED,{enabled:ee(),index:Y,tracks:ae,streamId:W}),se=!0}function ne(Se){if(!J&&Se&&Se.newMediaInfo){var ae=Se.newMediaInfo;ae.type===x.default.TEXT&&(q={lang:ae.lang,role:ae.roles[0],index:ae.index,codec:ae.codec,accessibility:ae.accessibility[0]})}}function ee(){var Se=!0;return X&&!V&&(Se=!1),Se}function j(Se,ae){(X=-1===ae)&&F&&F.saveTextSettingsDisabled();var Y=U(Se);if(Y!==ae&&I[Se]){I[Se].setModeForTrackIdx(Y,x.default.TEXT_HIDDEN),I[Se].setCurrentTrackIdx(ae),I[Se].setModeForTrackIdx(ae,x.default.TEXT_SHOWING);var W=I[Se].getCurrentTrackInfo();W&&W.isFragmented&&!W.isEmbedded?function _(Se,ae,Y){if(f[Se])for(var _e=f[Se].getConfig().fragmentedTracks,Ee=0;Ee<_e.length;Ee++){var me=_e[Ee];if(ae.lang===me.lang&&(me.id?ae.id===me.id:ae.index===me.index)){var Te=F.getCurrentTrackFor(x.default.TEXT,Se);(me.id?Te.id!==me.id:Te.index!==me.index)?(I[Se].deleteCuesFromTrackIdx(Y),f[Se].setCurrentFragmentedTrackIdx(Ee)):-1===Y&&z.trigger(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:Se,mediaType:x.default.TEXT})}}}(Se,W,Y):W&&!W.isFragmented&&function A(Se,ae){z.trigger(p.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:ae},{streamId:Se,mediaType:x.default.TEXT})}(Se,W),F.setTrack(W)}}function U(Se){return I[Se].getCurrentTrackIdx()}function te(){f={},I={},P={},X=!0,se=!1,Z=!1}return b={deactivateStream:function K(Se){if(Se){var ae=Se.id;f[ae]&&f[ae].resetMediaInfos(),I[ae]&&I[ae].deleteAllTextTracks()}},initialize:function he(){z.on(p.default.CURRENT_TRACK_CHANGED,ne,b),z.on(p.default.TEXT_TRACKS_QUEUE_INITIALIZED,ce,b)},initializeForStream:function ve(Se){var ae=Se.id,Y=Object(T.default)(h).create({videoModel:R,streamInfo:Se});Y.initialize(),I[ae]=Y;var W=Object(M.default)(h).create({errHandler:S,adapter:g,manifestModel:C,mediaController:F,videoModel:R,textTracks:Y,vttParser:H,ttmlParser:$,streamInfo:Se});W.initialize(),f[ae]=W,P[ae]={},P[ae].lastEnabledIndex=-1},createTracks:function re(Se){var ae=Se.id;!I[ae]||I[ae].createTracks()},getTextSourceBuffer:function ie(Se){var ae=Se.id;if(f&&f[ae])return f[ae]},getAllTracksAreDisabled:function de(){return X},addEmbeddedTrack:function ue(Se,ae){var Y=Se.id;!f[Y]||f[Y].addEmbeddedTrack(ae)},setInitialSettings:function le(Se){q=Se,J=!0},enableText:function pe(Se,ae){Object(O.checkParameterType)(ae,"boolean"),ee()!==ae&&(ae&&j(Se,P[Se].lastEnabledIndex),ae||(P[Se].lastEnabledIndex=U(Se),se?j(Se,-1):Z=!0))},isTextEnabled:ee,setTextTrack:j,getCurrentTrackIdx:U,enableForcedTextStreaming:function G(Se){Object(O.checkParameterType)(Se,"boolean"),V=Se},addMediaInfosToBuffer:function ge(Se,ae,Y){var _e=Se.id;!f[_e]||f[_e].addMediaInfos(ae,Y,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)},reset:function ye(){te(),z.off(p.default.CURRENT_TRACK_CHANGED,ne,b),z.off(p.default.TEXT_TRACKS_QUEUE_INITIALIZED,ce,b),Object.keys(f).forEach(function(Se){f[Se].resetEmbedded(),f[Se].reset()})}},function oe(){q=null,V=!1,se=!1,J=!1,Z=!1,H=Object(D.default)(h).getInstance(),$=Object(d.default)(h).getInstance(),z=Object(v.default)(h).getInstance(),te()}(),b}L.__dashjs_factory_name="TextController",k.default=y.default.getClassFactory(L)},"./src/streaming/text/TextSourceBuffer.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/vo/metrics/HTTPRequest.js"),M=u("./src/streaming/vo/TextTrackInfo.js"),T=u("./src/streaming/utils/BoxParser.js"),D=u("./src/streaming/utils/CustomTimeRanges.js"),d=u("./src/core/FactoryMaker.js"),v=u("./src/core/Debug.js"),p=u("./src/streaming/text/EmbeddedTextHtmlRender.js"),N=u("./node_modules/codem-isoboxer/dist/iso_boxer.js"),O=u.n(N),L=u("./externals/cea608-parser.js"),m=u.n(L),h=u("./src/core/EventBus.js"),g=u("./src/core/events/Events.js"),S=u("./src/streaming/vo/DashJSError.js"),C=u("./src/core/errors/Errors.js");function F(R){var V,se,Z,oe,he,ve,re,ge,ie,de,ue,le,ce,ne,pe,ee,w=R.errHandler,b=R.manifestModel,P=R.mediaController,f=R.videoModel,I=R.textTracks,H=R.vttParser,$=R.ttmlParser,z=R.streamInfo,q=this.context,J=Object(h.default)(q).getInstance(),X=!1;function A(){(function _(){ve=null,ge=NaN,ie=[],de=null,re=!1})(),he=[],oe=null}function te(Le){var Ce=new M.default;for(var Qe in Le)Ce[Qe]=Le[Qe];Ce.labels=Le.labels,Ce.defaultTrack=function kt(Le){var Ce=!1;return le.length>1&&Le.isEmbedded?Ce=Le.id&&Le.id===x.default.CC1:1===le.length?Le.id&&"string"==typeof Le.id&&"CC"===Le.id.substring(0,2)&&(Ce=!0):0===le.length&&(Ce=Le.index===he[0].index),Ce}(Le),Ce.isFragmented=Le.isFragmented,Ce.isEmbedded=!!Le.isEmbedded,Ce.isTTML=function Te(Le){return Le.codec&&Le.codec.search(x.default.STPP)>=0||Le.mimeType&&Le.mimeType.search(x.default.TTML)>=0}(Le),Ce.kind=function Ne(Le,Ce){var Ue=Le.roles&&Le.roles.length>0?Ce[Le.roles[0]]:Ce.caption;return Ue===Ce.caption||Ue===Ce.subtitle?Ue:Ce.caption}(Le,{subtitle:"subtitles",caption:"captions"}),I.addTextTrack(Ce)}function ae(Le){var Ce=Le.chunk;Ce.mediaInfo.embeddedCaptions&&Ie(Ce.bytes,Ce)}function me(Le){ue=Le}function Ie(Le,Ce){var Ue=Ce.mediaInfo,Qe=Ue.type,ct=Ue.codec||Ue.mimeType;ct?-1!==Ue.codec.indexOf("application/mp4")?function we(Le,Ce,Ue){var Qe;if("InitializationSegment"===Ce.segmentType)re=!0,ge=Z.getMediaTimescaleFromMoov(Le);else{if(!re)return;(Qe=Z.getSamplesInfo(Le).sampleList).length>0&&(de=Qe[0].cts-Ce.start*ge),Ue.search(x.default.STPP)>=0?function ke(Le,Ce,Ue){var Qe,st;for(oe=null!==oe?oe:Zt(Ue),Qe=0;Qe<Ce.length;Qe++){var ct=Ce[Qe],Ze=ct.cts,ht=Lt(),Ut=ht+Ze/ge;V.buffered.add(Ut,Ut+ct.duration/ge);var Wt=new DataView(Le,ct.offset,ct.subSizes[0]),Fe=O.a.Utils.dataViewToString(Wt,x.default.UTF8),Ye=[],et=ct.offset+ct.subSizes[0];for(st=1;st<ct.subSizes.length;st++){var Rt=new Uint8Array(Le,et,ct.subSizes[st]),Tt=String.fromCharCode.apply(null,Rt);Ye.push(Tt),et+=ct.subSizes[st]}try{var bt=b.getValue(),lt=oe.parse(Fe,bt.ttmlTimeIsRelative?Ze/ge:0,Ze/ge,(Ze+ct.duration)/ge,Ye);I.addCaptions(ue,ht,lt)}catch(jt){ve.removeExecutedRequestsBeforeTime(),this.remove(),se.error("TTML parser error: "+jt.message)}}}(Le,Qe,Ue):function Re(Le,Ce){var Ue,Qe,st,ct=[];for(Ue=0;Ue<Ce.length;Ue++){var Ze=Ce[Ue];Ze.cts-=de;var Ut=Lt()+Ze.cts/ge;V.buffered.add(Ut,Ut+Ze.duration/ge);var Wt=Le.slice(Ze.offset,Ze.offset+Ze.size),Fe=O.a.parseBuffer(Wt);for(Qe=0;Qe<Fe.boxes.length;Qe++){var Ye=Fe.boxes[Qe];if(se.debug("VTT box1: "+Ye.type),"vtte"!==Ye.type&&"vttc"===Ye.type)for(se.debug("VTT vttc boxes.length = "+Ye.boxes.length),st=0;st<Ye.boxes.length;st++){var et=Ye.boxes[st];if(se.debug("VTT box2: "+et.type),"payl"===et.type){var Rt=et.cue_text;se.debug("VTT cue_text = "+Rt);var Tt=Ze.cts/ge,bt=(Ze.cts+Ze.duration)/ge;ct.push({start:Tt,end:bt,data:Rt,styles:{}}),se.debug("VTT "+Tt+"-"+bt+" : "+Rt)}}}}ct.length>0&&I.addCaptions(ue,0,ct)}(Le,Qe)}}(Le,Ce,ct):Qe===x.default.VIDEO?function ze(Le,Ce){var Ue,Qe;if(Ce.segmentType===y.HTTPRequest.INIT_SEGMENT_TYPE)0===ce&&(ce=Z.getMediaTimescaleFromMoov(Le));else if(Ce.segmentType===y.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===ce)return void se.warn("CEA-608: No timescale for embeddedTextTrack yet");var st=(Qe=Z.getSamplesInfo(Le)).lastSequenceNumber;if(!pe[0]&&!pe[1]&&function ut(){for(var Le,Ce=0;Ce<le.length;Ce++){if(-1===(Le=I.getTrackIdxForId(le[Ce].id)))return void se.warn("CEA-608: data before track is ready.");var Ue=at(Le);pe[Ce]=new m.a.Cea608Parser(Ce+1,{newCue:Ue},null)}}(),ce){if(null!==ne&&st!==ne+Qe.numSequences)for(Ue=0;Ue<pe.length;Ue++)pe[Ue]&&pe[Ue].reset();for(var ct=function yt(Le,Ce){if(0===Ce.length)return null;for(var Ue={splits:[],fields:[[],[]]},Qe=new DataView(Le),st=0;st<Ce.length;st++)for(var ct=Ce[st],Ze=m.a.findCea608Nalus(Qe,ct.offset,ct.size),ht=null,Ut=0,It=0;It<Ze.length;It++)for(var Wt=m.a.extractCea608DataFromRange(Qe,Ze[It]),Fe=0;Fe<2;Fe++)if(Wt[Fe].length>0){ct.cts!==ht?Ut=0:Ut+=1;var Ye=Lt();Ue.fields[Fe].push([ct.cts+Ye*ce,Wt[Fe],Ut]),ht=ct.cts}return Ue.fields.forEach(function(Rt){Rt.sort(function(Tt,bt){return Tt[0]===bt[0]?Tt[2]-bt[2]:Tt[0]-bt[0]})}),Ue}(Le,Qe.sampleList),Ze=0;Ze<pe.length;Ze++){var ht=ct.fields[Ze],Ut=pe[Ze];if(Ut)for(Ue=0;Ue<ht.length;Ue++)Ut.addData(ht[Ue][0]/ce,ht[Ue][1])}ne=st}}}(Le,Ce):function xe(Le,Ce,Ue){var Qe,st,ct=new DataView(Le,0,Le.byteLength);st=O.a.Utils.dataViewToString(ct,x.default.UTF8);try{Qe=Zt(Ue).parse(st,0),I.addCaptions(I.getCurrentTrackIdx(),0,Qe),V.buffered&&V.buffered.add(Ce.start,Ce.end)}catch(Ze){w.error(new S.default(C.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,C.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+Ze.message,st))}}(Le,Ce,ct):se.error("No text type defined")}function at(Le){return function Ce(Ue,Qe,st){var ct;(ct=f.getTTMLRenderingDiv()?ee.createHTMLCaptionsFromScreen(f.getElement(),Ue,Qe,st):[{start:Ue,end:Qe,data:st.getDisplayText(),styles:{}}])&&I.addCaptions(Le,0,ct)}}function Lt(){return isNaN(V.timestampOffset)?0:V.timestampOffset}function Zt(Le){var Ce;return Le.search(x.default.VTT)>=0?Ce=H:(Le.search(x.default.TTML)>=0||Le.search(x.default.STPP)>=0)&&(Ce=$),Ce}function sn(Le){le.forEach(function(Ce){var Ue=I.getTrackIdxForId(Ce.id);Ue>=0&&I.deleteCuesFromTrackIdx(Ue,Le.from,Le.to)})}return V={initialize:function U(){X||function Y(){le=[],ue=null,ce=0,pe=[],ne=null,X=!0,ee=Object(p.default)(q).getInstance(),J.on(g.default.VIDEO_CHUNK_RECEIVED,ae,V),J.on(g.default.BUFFER_CLEARED,sn,V)}()},addMediaInfos:function K(Le,Ce,Ue){if(he=he.concat(Ce),Le===x.default.TEXT&&Ce[0].isFragmented&&!Ce[0].isEmbedded){ve=Ue,V.buffered=Object(D.default)(q).create(),ie=P.getTracksFor(x.default.TEXT,z.id).filter(function(Ze){return Ze.isFragmented});for(var Qe=P.getCurrentTrackFor(x.default.TEXT,z.id),st=0;st<ie.length;st++)if(ie[st]===Qe){me(st);break}}for(var ct=0;ct<Ce.length;ct++)te(Ce[ct])},resetMediaInfos:function Be(){he=[]},getStreamId:function j(){return z.id},append:Ie,abort:function ye(){},addEmbeddedTrack:function _e(Le){if(X&&Le)if(Le.id===x.default.CC1||Le.id===x.default.CC3){for(var Ce=0;Ce<le.length;Ce++)if(le[Ce].id===Le.id)return;le.push(Le)}else se.warn("Embedded track "+Le.id+" not supported!")},resetEmbedded:function W(){J.off(g.default.VIDEO_CHUNK_RECEIVED,ae,V),J.off(g.default.BUFFER_CLEARED,sn,V),I&&I.deleteAllTextTracks(),X=!1,le=[],pe=[null,null],ne=null},getConfig:function Ee(){return{fragmentModel:ve,fragmentedTracks:ie,videoModel:f}},setCurrentFragmentedTrackIdx:me,remove:function nn(Le,Ce){void 0===Le&&Le===Ce&&(Le=V.buffered.start(0),Ce=V.buffered.end(V.buffered.length-1)),V.buffered.remove(Le,Ce),I.deleteCuesFromTrackIdx(ue,Le,Ce)},reset:function Se(){A(),he=[],Z=null}},function G(){se=Object(v.default)(q).getInstance().getLogger(V),Z=Object(T.default)(q).getInstance(),A()}(),V}F.__dashjs_factory_name="TextSourceBuffer",k.default=d.default.getClassFactory(F)},"./src/streaming/text/TextTracks.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),T=u("./src/streaming/MediaPlayerEvents.js"),D=u("./src/core/FactoryMaker.js"),d=u("./src/core/Debug.js"),v=u("./node_modules/imsc/src/main/js/main.js");function N(O){var S,C,F,R,w,b,P,f,I,H,$,z,q,J,X,V,se,L=this.context,m=Object(y.default)(L).getInstance(),h=O.videoModel,g=O.streamInfo;function ve(Ee){return h.addTextTrack(Ee.kind,void 0!==Ee.id?Ee.id:Ee.lang,Ee.lang,Ee.isTTML,Ee.isEmbedded)}function ie(Ee,me,Te,Ne,Ie,we){var xe=0,ze=0;Ee/me>Te/Ne?xe=(ze=me)/Ne*Te:ze=(xe=Ee)/Te*Ne;var ut,at,yt=0,Lt=0;return xe/ze>Ie?(Lt=ze,yt=ze*Ie):(yt=xe,Lt=xe/Ie),ut=(Ee-yt)/2,at=(me-Lt)/2,we?{x:ut+.1*yt,y:at+.1*Lt,w:.8*yt,h:.8*Lt}:{x:ut,y:at,w:yt,h:Lt}}function de(Ee,me){var Te=h.getClientWidth(),Ne=h.getClientHeight(),Ie=h.getVideoWidth(),we=h.getVideoHeight(),ke=h.getVideoRelativeOffsetTop(),Re=h.getVideoRelativeOffsetLeft();if(0!==Ie&&0!==we){var xe=Ie/we,ze=!1;Ee.isFromCEA608&&(xe=3.5/3,ze=!0);var ut=ie.call(this,Te,Ne,Ie,we,xe,ze),at=ut.w,yt=ut.h,Lt=ut.x,kt=ut.y;if(at!=I||yt!=H||Lt!=P||kt!=f||me){if(P=Lt+Re,f=kt+ke,I=at,H=yt,$){var Zt=$.style;Zt&&(Zt.left=P+"px",Zt.top=f+"px",Zt.width=I+"px",Zt.height=H+"px",Zt.zIndex=q&&document[q]||J?V:null,m.trigger(T.default.CAPTION_CONTAINER_RESIZE))}var nn=Ee.activeCues;if(nn)for(var sn=nn.length,Be=0;Be<sn;++Be){var Le=nn[Be];Le.scaleCue(Le)}}}}function ue(Ee){var Ne,Ie,we,ke,Re;if(Ee.cellResolution){var xe=[I/Ee.cellResolution[0],H/Ee.cellResolution[1]];if(Ee.linePadding)for(Ne in Ee.linePadding)if(Ee.linePadding.hasOwnProperty(Ne)){Ie=(Ee.linePadding[Ne]*xe[0]).toString();for(var ut=document.getElementsByClassName("spanPadding"),at=0;at<ut.length;at++)ut[at].style.cssText=ut[at].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ie),ut[at].style.cssText=ut[at].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ie)}if(Ee.fontSize){for(Ne in Ee.fontSize)if(Ee.fontSize.hasOwnProperty(Ne)){"%"===Ee.fontSize[Ne][0]?we=Ee.fontSize[Ne][1]/100:"c"===Ee.fontSize[Ne][0]&&(we=Ee.fontSize[Ne][1]),Ie=(we*xe[1]).toString(),Re="defaultFontSize"!==Ne?document.getElementsByClassName(Ne):document.getElementsByClassName("paragraph");for(var yt=0;yt<Re.length;yt++)Re[yt].style.cssText=Re[yt].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ie)}if(Ee.lineHeight)for(Ne in Ee.lineHeight)if(Ee.lineHeight.hasOwnProperty(Ne)){"%"===Ee.lineHeight[Ne][0]?ke=Ee.lineHeight[Ne][1]/100:"c"===Ee.fontSize[Ne][0]&&(ke=Ee.lineHeight[Ne][1]),Ie=(ke*xe[1]).toString(),Re=document.getElementsByClassName(Ne);for(var Lt=0;Lt<Re.length;Lt++)Re[Lt].style.cssText=Re[Lt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ie)}}}if(Ee.isd){var kt=document.getElementById(Ee.cueID);kt&&$.removeChild(kt),le(Ee)}}function le(Ee){if($){var me=document.createElement("div");$.appendChild(me),X=Object(v.renderHTML)(Ee.isd,me,function(Te){var Ne=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,Ie=/^#(.*)$/;if(Ne.test(Te)){var we=Ne.exec(Te),ke=parseInt(we[4],10)-1;return"data:image/png;base64,"+btoa(Ee.images[ke])}if(Ie.test(Te)){var ze=Ie.exec(Te);return"data:image/png;base64,"+Ee.embeddedImages[ze[1]]}return null},$.clientHeight,$.clientWidth,!1,function(Te){C.info("renderCaption :",Te)},X,!0),me.id=Ee.cueID,m.trigger(T.default.CAPTION_RENDERED,{captionDiv:me,currentTrackIdx:b})}}function ce(Ee,me,Te){var Ne=ne(Ee),Ie=this;if(Ne&&Array.isArray(Te)&&0!==Te.length)for(var we=0;we<Te.length;we++){var ke=void 0,Re=Te[we];Ne.cellResolution=Re.cellResolution,Ne.isFromCEA608=Re.isFromCEA608,"html"!==Re.type||!$||isNaN(Re.start)||isNaN(Re.end)?Re.data&&!isNaN(Re.start)&&!isNaN(Re.end)&&(ke=new F(Re.start-me,Re.end-me,Re.data),Re.styles&&(void 0!==Re.styles.align&&"align"in ke&&(ke.align=Re.styles.align),void 0!==Re.styles.line&&"line"in ke&&(ke.line=Re.styles.line),void 0!==Re.styles.position&&"position"in ke&&(ke.position=Re.styles.position),void 0!==Re.styles.size&&"size"in ke&&(ke.size=Re.styles.size)),ke.onenter=function(){Ne.mode===x.default.TEXT_SHOWING&&m.trigger(T.default.CAPTION_RENDERED,{currentTrackIdx:b})}):((ke=new F(Re.start+me,Re.end+me,"")).cueHTMLElement=Re.cueHTMLElement,ke.isd=Re.isd,ke.images=Re.images,ke.embeddedImages=Re.embeddedImages,ke.cueID=Re.cueID,ke.scaleCue=ue.bind(Ie),ke.cellResolution=Re.cellResolution,ke.lineHeight=Re.lineHeight,ke.linePadding=Re.linePadding,ke.fontSize=Re.fontSize,$.style.left=P+"px",$.style.top=f+"px",$.style.width=I+"px",$.style.height=H+"px",ke.onenter=function(){Ne.mode===x.default.TEXT_SHOWING&&(this.isd?(le(this),C.debug("Cue enter id:"+this.cueID)):($.appendChild(this.cueHTMLElement),ue.call(Ie,this),m.trigger(T.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:b})))},ke.onexit=function(){if($)for(var xe=$.childNodes,ze=0;ze<xe.length;++ze)xe[ze].id===this.cueID&&(C.debug("Cue exit id:"+xe[ze].id),$.removeChild(xe[ze]),--ze)});try{ke?_(Ne,ke)||Ne.addCue(ke):C.error("impossible to display subtitles.")}catch(xe){throw U(Ne),Ne.addCue(ke),xe}}}function ne(Ee){return Ee>=0&&R[Ee]?h.getTextTrack(R[Ee].kind,R[Ee].id,R[Ee].lang,R[Ee].isTTML,R[Ee].isEmbedded):null}function G(Ee){var me=this;if(Ee!==b){var Te=ne(b=Ee);j.call(this,Te),z&&(clearInterval(z),z=null),Te&&"html"===Te.renderingType&&(de.call(this,Te,!0),window.ResizeObserver?(se=new window.ResizeObserver(function(){de.call(me,Te,!0)})).observe(h.getElement()):z=setInterval(de.bind(this,Te),500))}}function j(Ee){Y.call(this),Ee&&"html"===Ee.renderingType?Se.call(this):ae.call(this)}function _(Ee,me){if(!Ee.cues)return!1;for(var Te=0;Te<Ee.cues.length;Te++)if(Ee.cues[Te].startTime===me.startTime&&Ee.cues[Te].endTime===me.endTime)return!0;return!1}function A(Ee,me,Te){var Ne=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(isNaN(me)||(Ne?Ee.startTime:Ee.endTime)>=me)&&(isNaN(Te)||(Ne?Ee.endTime:Ee.startTime)<=Te)}function U(Ee,me,Te){var Ne=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(Ee.cues)for(var Ie=Ee.cues,ke=Ie.length-1;ke>=0;ke--)A(Ie[ke],me,Te,Ne)&&(Ie[ke].onexit&&Ie[ke].onexit(),Ee.removeCue(Ie[ke]))}function Se(){var Ee=document.getElementById("native-cue-style");if(!Ee){(Ee=document.createElement("style")).id="native-cue-style",document.head.appendChild(Ee);var me=Ee.sheet,Te=h.getElement();try{Te&&me.insertRule(Te.id?"#"+Te.id+"::cue {background: transparent}":0!==Te.classList.length?"."+Te.className+"::cue {background: transparent}":"video::cue {background: transparent}",0)}catch(Ne){C.info(""+Ne.message)}}}function ae(){var Ee=document.getElementById("native-cue-style");Ee&&document.head.removeChild(Ee)}function Y(){if($)for(;$.firstChild;)$.removeChild($.firstChild)}return S={initialize:function oe(){typeof window>"u"||typeof navigator>"u"||(F=window.VTTCue||window.TextTrackCue,R=[],w=[],b=-1,P=0,f=0,I=0,H=0,$=null,z=null,J=!1,V=2147483647,X=null,void 0!==document.fullscreenElement?q="fullscreenElement":void 0!==document.webkitIsFullScreen?q="webkitIsFullScreen":document.msFullscreenElement?q="msFullscreenElement":document.mozFullScreen&&(q="mozFullScreen"))},getStreamId:function he(){return g.id},addTextTrack:function re(Ee){R.push(Ee)},addCaptions:ce,createTracks:function ge(){R.sort(function(Re,xe){return Re.index-xe.index}),$=h.getTTMLRenderingDiv();for(var Ee=-1,me=0;me<R.length;me++){var Te=ve(R[me]);w.push(Te),R[me].defaultTrack&&(Te.default=!0,Ee=me);var Ne=ne(me);Ne&&(Ne.mode=x.default.TEXT_SHOWING,Ne.renderingType=$&&(R[me].isTTML||R[me].isEmbedded)?"html":"default"),ce(me,0,R[me].captionData),m.trigger(T.default.TEXT_TRACK_ADDED)}if(G.call(this,Ee),Ee>=0){m.on(T.default.PLAYBACK_METADATA_LOADED,function Re(){var xe=ne(Ee);xe&&"html"===xe.renderingType&&de.call(this,xe,!0),m.off(T.default.PLAYBACK_METADATA_LOADED,Re,this)},this);for(var we=0;we<R.length;we++){var ke=ne(we);ke&&(ke.mode=we===Ee?x.default.TEXT_SHOWING:x.default.TEXT_HIDDEN)}}m.trigger(M.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:b,tracks:R,streamId:g.id})},getCurrentTrackIdx:function pe(){return b},setCurrentTrackIdx:G,getTrackIdxForId:function ee(Ee){for(var me=-1,Te=0;Te<R.length;Te++)if(R[Te].id===Ee){me=Te;break}return me},getCurrentTrackInfo:function _e(){return R[b]},setModeForTrackIdx:function W(Ee,me){var Te=ne(Ee);Te&&Te.mode!==me&&(Te.mode=me)},deleteCuesFromTrackIdx:function K(Ee,me,Te){var Ne=ne(Ee);Ne&&U(Ne,me,Te)},deleteAllTextTracks:function te(){for(var Ee=w?w.length:0,me=0;me<Ee;me++){var Te=ne(me);Te&&U.call(this,Te,g.start,g.start+g.duration,!1)}w=[],R=[],z&&(clearInterval(z),z=null),se&&h&&(se.unobserve(h.getElement()),se=null),b=-1,Y.call(this)},deleteTextTrack:function ye(Ee){h.removeChild(w[Ee]),w.splice(Ee,1)}},function Z(){C=Object(d.default)(L).getInstance().getLogger(S)}(),S}N.__dashjs_factory_name="TextTracks",k.default=D.default.getClassFactory(N)},"./src/streaming/thumbnail/ThumbnailController.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/constants/Constants.js"),M=u("./src/streaming/vo/Thumbnail.js"),T=u("./src/streaming/thumbnail/ThumbnailTracks.js"),D=u("./src/streaming/vo/BitrateInfo.js"),d=u("./src/dash/utils/SegmentsUtils.js");function v(p){var L,m,N=this.context,O=p.streamInfo;function R(f){m.setTrackByIndex(f)}function P(){m&&m.reset()}return L={getStreamId:function S(){return O.id},initialize:function g(){m.addTracks();var f=m.getTracks();f&&f.length>0&&R(0)},provide:function C(f,I){if("function"==typeof I){var z,H=m.getCurrentTrack();if(!H||H.segmentDuration<=0||null==f)return void I(null);(z=m.getThumbnailRequestForTime(f))&&(H.segmentDuration=z.duration);var q=Math.floor(f%H.segmentDuration*H.tilesHor*H.tilesVert/H.segmentDuration),J=new M.default;if(J.width=Math.floor(H.widthPerTile),J.height=Math.floor(H.heightPerTile),J.x=Math.floor(q%H.tilesHor)*H.widthPerTile,J.y=Math.floor(q/H.tilesHor)*H.heightPerTile,"readThumbnail"in H)return H.readThumbnail(f,function(V){J.url=V,I(J)});if(z)J.url=z.url,H.segmentDuration=NaN;else{var X=Math.floor(f/H.segmentDuration);J.url=function F(f,I){var H=I+f.startNumber,$=Object(d.replaceTokenForTemplate)(f.templateUrl,"Number",H);return $=Object(d.replaceTokenForTemplate)($,"Time",(H-1)*f.segmentDuration*f.timescale),$=Object(d.replaceTokenForTemplate)($,"Bandwidth",f.bandwidth),Object(d.unescapeDollarsInTemplate)($)}(H,X)}I(J)}},setTrackByIndex:R,getCurrentTrackIndex:function w(){return m.getCurrentTrackIndex()},getBitrateList:function b(){var f=m.getTracks(),I=0;return f.map(function(H){var $=new D.default;return $.mediaType=y.default.IMAGE,$.qualityIndex=I++,$.bitrate=H.bitrate,$.width=H.width,$.height=H.height,$})},reset:P},function h(){P(),m=Object(T.default)(N).create({streamInfo:O,adapter:p.adapter,baseURLController:p.baseURLController,timelineConverter:p.timelineConverter,debug:p.debug,eventBus:p.eventBus,events:p.events,dashConstants:p.dashConstants,dashMetrics:p.dashMetrics,segmentBaseController:p.segmentBaseController})}(),L}v.__dashjs_factory_name="ThumbnailController",k.default=x.default.getClassFactory(v)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(Oe,k,u){"use strict";u.r(k),u.d(k,"THUMBNAILS_SCHEME_ID_URIS",function(){return L});var x=u("./src/streaming/constants/Constants.js"),y=u("./src/dash/constants/DashConstants.js"),M=u("./src/core/FactoryMaker.js"),T=u("./src/streaming/vo/ThumbnailTrackInfo.js"),D=u("./src/streaming/utils/URLUtils.js"),d=u("./src/dash/utils/SegmentsUtils.js"),v=u("./src/streaming/utils/BoxParser.js"),p=u("./src/streaming/net/XHRLoader.js"),N=u("./src/dash/DashHandler.js"),O=u("./src/dash/controllers/SegmentsController.js"),L=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function m(h){var H,$,z,q,J,X,V,se,g=this.context,S=h.adapter,C=h.baseURLController,F=h.streamInfo,R=h.timelineConverter,w=h.debug,b=h.eventBus,P=h.events,f=h.dashConstants,I=Object(D.default)(g).getInstance();function he(pe,ee){var G=new T.default;G.id=pe.id,G.bitrate=pe.bandwidth,G.width=pe.width,G.height=pe.height,G.tilesHor=1,G.tilesVert=1,pe.essentialProperties&&pe.essentialProperties.forEach(function(j){if(L.indexOf(j.schemeIdUri)>=0&&j.value){var _=j.value.split("x");2===_.length&&!isNaN(_[0])&&!isNaN(_[1])&&(G.tilesHor=parseInt(_[0],10),G.tilesVert=parseInt(_[1],10))}}),ee?X.updateSegmentData(pe).then(function(j){!function ve(pe,ee,G){var j=[],_=function re(pe,ee){var _,A,U,K,G=[],j=0;for(_=0,A=pe.segments.length;_<A;_++)U=pe.segments[_],(K=Object(d.getTimeBasedSegment)(R,S.getIsDynamic(),ee,U.startTime,U.duration,U.timescale,U.media,U.mediaRange,j))&&(G.push(K),K=null,j++);return G}(G,ee);ee.segments=_,pe.segmentDuration=ee.segments[0].duration,pe.readThumbnail=function(A,U){var K=null;j.some(function(te){if(te.start<=A&&te.end>A)return K=te.url,!0}),K?U(K):ee.segments.some(function(te){if(te.mediaStartTime<=A&&te.mediaStartTime+te.duration>A){var ye=C.resolve(ee.path);return V.load({method:"get",url:ye.url,request:{range:te.mediaRange,responseType:"arraybuffer"},onload:function(ae){var Y=se.getSamplesInfo(ae.target.response),W=new Blob([ae.target.response.slice(Y.sampleList[0].offset,Y.sampleList[0].offset+Y.sampleList[0].size)],{type:"image/jpeg"}),_e=window.URL.createObjectURL(W);j.push({start:te.mediaStartTime,end:te.mediaStartTime+te.duration,url:_e}),U&&U(_e)}}),!0}})}}(G,pe,j)}):(G.startNumber=pe.startNumber,G.segmentDuration=pe.segmentDuration,G.timescale=pe.timescale,G.templateUrl=function ge(pe){var ee=I.isRelative(pe.media)?I.resolve(pe.media,C.resolve(pe.path).url):pe.media;return ee?Object(d.replaceIDForTemplate)(ee,pe.id):""}(pe)),G.tilesHor>0&&G.tilesVert>0&&(G.widthPerTile=G.width/G.tilesHor,G.heightPerTile=G.height/G.tilesVert,$.push(G))}function ne(){$=[],q=-1,J=null}return H={getTracks:function ie(){return $},addTracks:function oe(){if(F&&S&&(J=S.getMediaInfoForType(F,x.default.IMAGE))){var pe=S.getVoRepresentations(J);pe&&pe.length>0&&pe.forEach(function(ee){(ee.segmentInfoType===y.default.SEGMENT_TEMPLATE&&ee.segmentDuration>0&&ee.media||ee.segmentInfoType===y.default.SEGMENT_TIMELINE)&&he(ee),ee.segmentInfoType===y.default.SEGMENT_BASE&&he(ee,!0)}),$.length>0&&$.sort(function(ee,G){return ee.bitrate-G.bitrate})}},reset:ne,setTrackByIndex:function le(pe){!$||0===$.length||(pe>=$.length&&(pe=$.length-1),q=pe)},getCurrentTrack:function ue(){return q<0?null:$[q]},getCurrentTrackIndex:function de(){return q},getThumbnailRequestForTime:function ce(pe){for(var ee,G=S.getVoRepresentations(J),j=0;j<G.length;j++)if($[q].id===G[j].id){ee=G[j];break}return z.getSegmentRequestForTime(J,ee,pe)}},function Z(){ne(),V=Object(p.default)(g).create({}),se=Object(v.default)(g).getInstance(),X=Object(O.default)(g).create({events:P,eventBus:b,streamInfo:F,timelineConverter:R,dashConstants:f,dashMetrics:h.dashMetrics,segmentBaseController:h.segmentBaseController,type:x.default.IMAGE}),(z=Object(N.default)(g).create({streamInfo:F,type:x.default.IMAGE,timelineConverter:R,segmentsController:X,baseURLController:C,debug:w,eventBus:b,events:P,dashConstants:f,urlUtils:I})).initialize(!!S&&S.getIsDynamic())}(),H}m.__dashjs_factory_name="ThumbnailTracks",k.default=M.default.getClassFactory(m)},"./src/streaming/utils/BaseURLSelector.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/errors/Errors.js"),y=u("./src/core/EventBus.js"),M=u("./src/core/events/Events.js"),T=u("./src/streaming/controllers/BlacklistController.js"),D=u("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),d=u("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),v=u("./src/core/FactoryMaker.js"),p=u("./src/streaming/vo/DashJSError.js"),N=u("./src/streaming/utils/SupervisorTools.js");function O(){var h,g,S,C,F,L=this.context,m=Object(y.default)(L).getInstance();function f(){g.reset()}return h={chooseSelector:function b(I){Object(N.checkParameterType)(I,"boolean"),F=I?C:S},select:function P(I){if(I){var H=I.baseUrls,$=I.selectedIdx;if(!isNaN($))return H[$];var z=F.select(H);return z?(I.selectedIdx=H.indexOf(z),z):(m.trigger(M.default.URL_RESOLUTION_FAILED,{error:new p.default(x.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,x.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(F===S&&f()))}},reset:f,setConfig:function w(I){I.selector&&(F=I.selector)}},function R(){g=Object(T.default)(L).create({updateEventName:M.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:M.default.SERVICE_LOCATION_BLACKLIST_ADD}),S=Object(d.default)(L).create({blacklistController:g}),C=Object(D.default)(L).create({blacklistController:g}),F=S}(),h}O.__dashjs_factory_name="BaseURLSelector",k.default=v.default.getClassFactory(O)},"./src/streaming/utils/BoxParser.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/Debug.js"),y=u("./src/streaming/utils/IsoFile.js"),M=u("./src/core/FactoryMaker.js"),T=u("./node_modules/codem-isoboxer/dist/iso_boxer.js"),D=u.n(T),d=u("./src/streaming/vo/IsoBoxSearchInfo.js");function v(){var p,N,O=this.context;function m(b){if(!b)return null;void 0===b.fileStart&&(b.fileStart=0);var P=D.a.parseBuffer(b),f=Object(y.default)(O).create();return f.setData(P),f}function C(b,P){return b[P+3]>>>0|b[P+2]<<8>>>0|b[P+1]<<16>>>0|b[P]<<24>>>0}function F(b,P){return String.fromCharCode(b[P++])+String.fromCharCode(b[P++])+String.fromCharCode(b[P++])+String.fromCharCode(b[P])}return N={parse:m,findLastTopIsoBoxCompleted:function h(b,P,f){if(void 0===f&&(f=0),!P||f+8>=P.byteLength)return new d.default(0,!1);for(var H,I=P instanceof ArrayBuffer?new Uint8Array(P):P,$=0;f<I.byteLength;){var z=C(I,f),q=F(I,f+4);if(0===z)break;f+z<=I.byteLength&&(b.indexOf(q)>=0?H=new d.default(f,!0,z):$=f+z),f+=z}return H||new d.default($,!1)},getMediaTimescaleFromMoov:function S(b){var P=m(b),f=P?P.getBox("mdhd"):void 0;return f?f.timescale:NaN},getSamplesInfo:function g(b){if(!b||0===b.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var H,z,q,J,X,V,se,Z,oe,he,ve,re,ge,ie,de,ue,P=m(b),f=P.getBoxes("moof"),I=P.getBoxes("mfhd");de=P.getBoxes("moof").length,ie=I[I.length-1].sequence_number,z=0,X=[];var le=-1,ce=-1;for(he=0;he<f.length;he++){var ne=f[he],pe=ne.getChildBoxes("traf");for(Z=0;Z<pe.length;Z++){var ee=pe[Z],G=ee.getChildBox("tfhd"),j=ee.getChildBox("tfdt");J=j.baseMediaDecodeTime;var _=ee.getChildBoxes("trun"),A=ee.getChildBoxes("subs");for(oe=0;oe<_.length;oe++){var U=_[oe];for(z=U.sample_count,ge=(G.base_data_offset||0)+(U.data_offset||0),se=0;se<z;se++){var K={dts:J,cts:J+(void 0!==(V=U.samples[se]).sample_composition_time_offset?V.sample_composition_time_offset:0),duration:H=void 0!==V.sample_duration?V.sample_duration:G.default_sample_duration,offset:ne.offset+ge,size:q=void 0!==V.sample_size?V.sample_size:G.default_sample_size,subSizes:[q]};if(A)for(ve=0;ve<A.length;ve++){var te=A[ve];if(le<te.entry_count-1&&se>ce&&(le++,ce+=te.entries[le].sample_delta),se==ce){K.subSizes=[];var ye=te.entries[le];for(re=0;re<ye.subsample_count;re++)K.subSizes.push(ye.subsamples[re].subsample_size)}}X.push(K),ge+=q,J+=H}}ue=J-j.baseMediaDecodeTime}}return{sampleList:X,lastSequenceNumber:ie,totalDuration:ue,numSequences:de}},findInitRange:function R(b){var P=null,H=m(b);if(!H)return P;var $=H.getBox("ftyp"),z=H.getBox("moov");return p.debug("Searching for initialization."),z&&z.isComplete&&p.debug("Found the initialization.  Range: "+(P=($?$.offset:z.offset)+"-"+(z.offset+z.size-1))),P},parsePayload:function w(b,P,f){if(void 0===f&&(f=0),!P||f+8>=P.byteLength)return new d.default(0,!1);for(var H,I=P instanceof ArrayBuffer?new Uint8Array(P):P,$=0;f<I.byteLength;){var z=C(I,f),q=F(I,f+4);if(0===z)break;f+z<=I.byteLength&&(b.indexOf(q)>=0?H=new d.default(f,!0,z,q):$=f+z),f+=z}return H||new d.default($,!1)}},function L(){p=Object(x.default)(O).getInstance().getLogger(N)}(),N}v.__dashjs_factory_name="BoxParser",k.default=M.default.getSingletonFactory(v)},"./src/streaming/utils/Capabilities.js":function(Oe,k,u){"use strict";u.r(k),u.d(k,"supportsMediaSource",function(){return D});var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/thumbnail/ThumbnailTracks.js"),M=u("./src/streaming/constants/Constants.js"),T=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function D(){var v="WebKitMediaSource"in window,p="MediaSource"in window;return v||p}function d(){var v,p,N;return v={setConfig:function L(b){!b||b.settings&&(p=b.settings)},supportsMediaSource:D,supportsEncryptedMedia:function m(){return N},supportsCodec:function g(b,P){return P!==M.default.AUDIO&&P!==M.default.VIDEO?Promise.resolve(!0):function S(b,P){return p.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(b.codec&&P===M.default.AUDIO||P===M.default.VIDEO&&b.codec&&b.width&&b.height&&b.bitrate&&b.framerate)}(b,P)?function F(b,P){return new Promise(function(f){if(b&&b.codec){var I={type:"media-source"};I[P]={},I[P].contentType=b.codec,I[P].width=b.width,I[P].height=b.height,I[P].bitrate=parseInt(b.bitrate),I[P].framerate=parseFloat(b.framerate),navigator.mediaCapabilities.decodingInfo(I).then(function(H){f(H.supported)}).catch(function(){f(!1)})}else f(!1)})}(b,P):function C(b){return new Promise(function(P){if(b&&b.codec){var f=b.codec;b.width&&b.height&&(f+=';width="'+b.width+'";height="'+b.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(f)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(f)?P(!0):P(!1)}else P(!1)})}(b)},setEncryptedMediaSupported:function h(b){N=b},supportsEssentialProperty:function R(b){try{return-1!==y.THUMBNAILS_SCHEME_ID_URIS.indexOf(b.schemeIdUri)}catch{return!0}},codecRootCompatibleWithCodec:function w(b,P){for(var H,f=b.split(".")[0],I=0===P.indexOf(f),$=0;$<T.length;$++)if(T[$].codec===f){H=T[$];break}return H?I||H.compatibleCodecs.some(function(z){return 0===P.indexOf(z)}):I}},function O(){N=!1}(),v}d.__dashjs_factory_name="Capabilities",k.default=x.default.getSingletonFactory(d)},"./src/streaming/utils/CapabilitiesFilter.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),M=u("./src/streaming/constants/Constants.js"),T=u("./src/core/EventBus.js"),D=u("./src/core/events/Events.js");function d(){var N,O,L,m,h,g,v=this.context,p=Object(T.default)(v).getInstance();function R(z,q){if(!q||!q.Period_asArray||0===q.Period_asArray.length)return Promise.resolve();var J=[];return q.Period_asArray.forEach(function(X){J.push(function w(z,q){return new Promise(function(J){if(z&&z.AdaptationSet_asArray&&0!==z.AdaptationSet_asArray.length){var X=[];z.AdaptationSet_asArray.forEach(function(V){O.getIsTypeOf(V,q)&&X.push(function b(z,q){return new Promise(function(J){if(z.Representation_asArray&&0!==z.Representation_asArray.length){var X=[],V=[];z.Representation_asArray.forEach(function(se,Z){var oe=O.getCodec(z,Z,!1),he=function P(z,q,J){switch(z){case M.default.VIDEO:return function f(z,q){return{codec:q,width:z.width||null,height:z.height||null,framerate:z.frameRate||null,bitrate:z.bandwidth||null}}(q,J);case M.default.AUDIO:return function I(z,q){return{codec:q,bitrate:z.bandwidth||null,samplerate:z.audioSamplingRate||null}}(q,J);default:return null}}(q,se,oe);V.push(he),X.push(L.supportsCodec(he,q))}),Promise.all(X).then(function(se){z.Representation_asArray=z.Representation_asArray.filter(function(Z,oe){return se[oe]||g.debug("[Stream] Codec ".concat(V[oe].codec," not supported ")),se[oe]}),J()}).catch(function(){J()})}else J()})}(V,q))}),Promise.all(X).then(function(){z.AdaptationSet_asArray=z.AdaptationSet_asArray.filter(function(V){var se=V.Representation_asArray&&V.Representation_asArray.length>0;return se||(p.trigger(D.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:V}),g.warn("AdaptationSet has been removed because of no supported Representation")),se}),J()}).catch(function(){J()})}else J()})}(X,z))}),Promise.all(J)}return N={setConfig:function C(z){!z||(z.adapter&&(O=z.adapter),z.capabilities&&(L=z.capabilities),z.settings&&(m=z.settings),z.customParametersModel&&(h=z.customParametersModel))},filterUnsupportedFeatures:function F(z){return new Promise(function(q){var J=[];J.push(R(M.default.VIDEO,z)),J.push(R(M.default.AUDIO,z)),Promise.all(J).then(function(){m.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function H(z){!z||!z.Period_asArray||0===z.Period_asArray.length||z.Period_asArray.forEach(function(q){q.AdaptationSet_asArray=q.AdaptationSet_asArray.filter(function(J){return!J.Representation_asArray||0===J.Representation_asArray.length||(J.Representation_asArray=J.Representation_asArray.filter(function(X){var V=O.getEssentialPropertiesForRepresentation(X);if(V&&V.length>0)for(var se=0;se<V.length;){if(!L.supportsEssentialProperty(V[se]))return g.debug("[Stream] EssentialProperty not supported: "+V[se].schemeIdUri),!1;se+=1}return!0}),J.Representation_asArray&&J.Representation_asArray.length>0)})})}(z),function $(z){var q=h.getCustomCapabilitiesFilters();!q||0===q.length||!z||!z.Period_asArray||0===z.Period_asArray.length||z.Period_asArray.forEach(function(J){J.AdaptationSet_asArray=J.AdaptationSet_asArray.filter(function(X){return!X.Representation_asArray||0===X.Representation_asArray.length||(X.Representation_asArray=X.Representation_asArray.filter(function(V){return!q.some(function(se){return!se(V)})}),X.Representation_asArray&&X.Representation_asArray.length>0)})})}(z),q()}).catch(function(){q()})})}},function S(){g=Object(y.default)(v).getInstance().getLogger(N)}(),N}d.__dashjs_factory_name="CapabilitiesFilter",k.default=x.default.getSingletonFactory(d)},"./src/streaming/utils/CustomTimeRanges.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/utils/SupervisorTools.js");function M(){return{customTimeRangeArray:[],length:0,add:function d(m,h){var g=0;for(g=0;g<this.customTimeRangeArray.length&&m>this.customTimeRangeArray[g].start;g++);for(this.customTimeRangeArray.splice(g,0,{start:m,end:h}),g=0;g<this.customTimeRangeArray.length-1;g++)this.mergeRanges(g,g+1)&&g--;this.length=this.customTimeRangeArray.length},clear:function v(){this.customTimeRangeArray=[],this.length=0},remove:function p(m,h){for(var g=0;g<this.customTimeRangeArray.length;g++)if(m<=this.customTimeRangeArray[g].start&&h>=this.customTimeRangeArray[g].end)this.customTimeRangeArray.splice(g,1),g--;else{if(m>this.customTimeRangeArray[g].start&&h<this.customTimeRangeArray[g].end){this.customTimeRangeArray.splice(g+1,0,{start:h,end:this.customTimeRangeArray[g].end}),this.customTimeRangeArray[g].end=m;break}m>this.customTimeRangeArray[g].start&&m<this.customTimeRangeArray[g].end?this.customTimeRangeArray[g].end=m:h>this.customTimeRangeArray[g].start&&h<this.customTimeRangeArray[g].end&&(this.customTimeRangeArray[g].start=h)}this.length=this.customTimeRangeArray.length},mergeRanges:function N(m,h){var g=this.customTimeRangeArray[m],S=this.customTimeRangeArray[h];return g.start<=S.start&&S.start<=g.end&&g.end<=S.end?(g.end=S.end,this.customTimeRangeArray.splice(h,1),!0):S.start<=g.start&&g.start<=S.end&&S.end<=g.end?(g.start=S.start,this.customTimeRangeArray.splice(h,1),!0):S.start<=g.start&&g.start<=S.end&&g.end<=S.end?(this.customTimeRangeArray.splice(m,1),!0):g.start<=S.start&&S.start<=g.end&&S.end<=g.end&&(this.customTimeRangeArray.splice(h,1),!0)},start:function O(m){return Object(y.checkInteger)(m),m>=this.customTimeRangeArray.length||m<0?NaN:this.customTimeRangeArray[m].start},end:function L(m){return Object(y.checkInteger)(m),m>=this.customTimeRangeArray.length||m<0?NaN:this.customTimeRangeArray[m].end}}}M.__dashjs_factory_name="CustomTimeRanges",k.default=x.default.getClassFactory(M)},"./src/streaming/utils/DOMStorage.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),M=u("./src/streaming/constants/Constants.js"),T=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],D="dashjs_?_bitrate",d="dashjs_?_settings",v="localStorage",N="lastBitrate",O="lastMediaSettings";function L(h){var C,F,R,g=this.context,S=(h=h||{}).settings;function b(X){if(void 0!==R)return R;R=!1;var Z;try{typeof window<"u"&&(Z=window[X])}catch(oe){return F.warn("DOMStorage access denied: "+oe.message),R}if(!Z||X!==v&&"sessionStorage"!==X)return R;try{Z.setItem("1","1"),Z.removeItem("1"),R=!0}catch(oe){F.warn("DOMStorage is supported, but cannot be used: "+oe.message)}return R}function f(){var X=6e5;return Math.round((new Date).getTime()/X)*X}function I(X,V){return b(X)&&S.get().streaming[V+"CachingInfo"].enabled}function H(){if(!S)throw new Error(M.default.MISSING_CONFIG_ERROR)}return C={getSavedBitrateSettings:function z(X){var V=NaN;if(H(),I(v,N)){var se=D.replace(/\?/,X);try{var Z=JSON.parse(localStorage.getItem(se))||{},oe=(new Date).getTime()-parseInt(Z.timestamp,10)>=S.get().streaming.lastBitrateCachingInfo.ttl||!1,he=parseFloat(Z.bitrate);isNaN(he)||oe?oe&&localStorage.removeItem(se):(V=he,F.debug("Last saved bitrate for "+X+" was "+he))}catch{return null}}return V},setSavedBitrateSettings:function J(X,V){if(I(v,N)&&V){var se=D.replace(/\?/,X);try{localStorage.setItem(se,JSON.stringify({bitrate:V.toFixed(3),timestamp:f()}))}catch(Z){F.error(Z.message)}}},getSavedMediaSettings:function $(X){var V=null;if(H(),I(v,O)){var se=d.replace(/\?/,X);try{var Z=JSON.parse(localStorage.getItem(se))||{},oe=(new Date).getTime()-parseInt(Z.timestamp,10)>=S.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;V=Z.settings,oe&&(localStorage.removeItem(se),V=null)}catch{return null}}return V},setSavedMediaSettings:function q(X,V){if(I(v,O)){var se=d.replace(/\?/,X);try{localStorage.setItem(se,JSON.stringify({settings:V,timestamp:f()}))}catch(Z){F.error(Z.message)}}}},function w(){F=Object(y.default)(g).getInstance().getLogger(C),function P(){b(v)&&T.forEach(function(X){var V=localStorage.getItem(X.oldKey);if(V){localStorage.removeItem(X.oldKey);try{localStorage.setItem(X.newKey,V)}catch(se){F.error(se.message)}}})}()}(),C}L.__dashjs_factory_name="DOMStorage";var m=x.default.getSingletonFactory(L);k.default=m},"./src/streaming/utils/DefaultURLUtils.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(){var M,T=/^[a-z][a-z0-9+\-_.]*:/i,D=/^https?:\/\//i,d=/^https:\/\//i,v=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,p=function(I,H){try{return new window.URL(I,H).toString()}catch{return I}},N=function(I,H){var $=L;if(!H||!S(I))return I;C(I)&&($=m),F(I)&&($=g);var z=$(H),q="/"!==z.charAt(z.length-1)&&"/"!==I.charAt(0)?"/":"";return[z,I].join(q)};function L(f){var I=f.indexOf("/"),H=f.lastIndexOf("/");return-1!==I?H===I+1?f:(-1!==f.indexOf("?")&&(f=f.substring(0,f.indexOf("?"))),f.substring(0,H+1)):""}function m(f){var I=f.match(v);return I?I[1]:""}function g(f){var I=f.match(T);return I?I[0]:""}function S(f){return!T.test(f)}function C(f){return S(f)&&"/"===f.charAt(0)}function F(f){return 0===f.indexOf("//")}return function O(){try{new window.URL("x","http://y"),M=p}catch{}finally{M=M||N}}(),{parseBaseUrl:L,parseOrigin:m,parseScheme:g,isRelative:S,isPathAbsolute:C,isSchemeRelative:F,isHTTPURL:function R(f){return D.test(f)},isHTTPS:function w(f){return d.test(f)},removeHostname:function h(f){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(f)[2].substring(1)},resolve:function b(f,I){return M(f,I)}}}y.__dashjs_factory_name="DefaultURLUtils",k.default=x.default.getSingletonFactory(y)},"./src/streaming/utils/EBMLParser.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(M){M=M||{};var T,D=new DataView(M.data),d=0;function N(F,R){var w=!0,b=0;if(void 0===R&&(R=!1),F.tag>16777215?(D.getUint32(d)!==F.tag&&(w=!1),b=4):F.tag>65535?(256*D.getUint16(d)+D.getUint8(d+2)!==F.tag&&(w=!1),b=3):F.tag>255?(D.getUint16(d)!==F.tag&&(w=!1),b=2):(D.getUint8(d)!==F.tag&&(w=!1),b=1),!w&&F.required&&!R)throw new Error("required tag not found");return w&&(d+=b),w}function h(F){var R=1,w=128,P=-1,f=0,I=D.getUint8(d),H=0;for(H=0;H<8;H+=1){if((I&w)===w){f=void 0===F?I&~w:I,P=H;break}w>>=1}for(H=0;H<P;H+=1,R+=1)f=f<<8|255&D.getUint8(d+R);return d+=R,f}return T={getPos:function v(){return d},setPos:function p(F){d=F},consumeTag:N,consumeTagAndSize:function O(F,R){var w=N(F,R);return w&&h(),w},parseTag:function L(F){var R;return N(F),R=h(),T[F.parse](R)},skipOverElement:function m(F,R){var b,w=N(F,R);return w&&(b=h(),d+=b),w},getMatroskaCodedNum:h,getMatroskaFloat:function g(F){var R;switch(F){case 4:R=D.getFloat32(d),d+=4;break;case 8:R=D.getFloat64(d),d+=8}return R},getMatroskaUint:function S(F){for(var R=0,w=0;w<F;w+=1)R<<=8,R|=255&D.getUint8(d+w);return d+=F,R},moreData:function C(){return d<D.byteLength}}}y.__dashjs_factory_name="EBMLParser",k.default=x.default.getClassFactory(y)},"./src/streaming/utils/ErrorHandler.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/EventBus.js"),y=u("./src/core/events/Events.js"),M=u("./src/core/FactoryMaker.js");function T(){var d=this.context,v=Object(x.default)(d).getInstance();return{error:function p(N){v.trigger(y.default.ERROR,{error:N})}}}T.__dashjs_factory_name="ErrorHandler",k.default=M.default.getSingletonFactory(T)},"./src/streaming/utils/InitCache.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(){var M={};return{save:function T(p){var N=p.streamId,O=p.representationId;M[N]=M[N]||{},M[N][O]=p},extract:function D(p,N){return M&&M[p]&&M[p][N]?M[p][N]:null},reset:function d(){M={}}}}y.__dashjs_factory_name="InitCache",k.default=x.default.getSingletonFactory(y)},"./src/streaming/utils/IsoFile.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/vo/IsoBox.js"),y=u("./src/core/FactoryMaker.js");function M(){var D;function v(L){var m=[];if(!L||!D||"function"!=typeof D.fetchAll)return m;for(var g,h=D.fetchAll(L),S=0,C=h.length;S<C;S++)(g=O(h[S]))&&m.push(g);return m}function O(L){if(!L)return null;var m=new x.default(L);return L.hasOwnProperty("_incomplete")&&(m.isComplete=!L._incomplete),m}return{getBox:function d(L){return L&&D&&D.boxes&&0!==D.boxes.length&&"function"==typeof D.fetch?O(D.fetch(L)):null},getBoxes:v,setData:function p(L){D=L},getLastBox:function N(){if(!D||!D.boxes||!D.boxes.length)return null;var m=v(D.boxes[D.boxes.length-1].type);return m.length>0?m[m.length-1]:null}}}M.__dashjs_factory_name="IsoFile",k.default=y.default.getClassFactory(M)},"./src/streaming/utils/ObjectUtils.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./node_modules/fast-deep-equal/index.js"),M=u.n(y);function T(){return{areEqual:function d(v,p){return M()(v,p)}}}T.__dashjs_factory_name="ObjectUtils",k.default=x.default.getSingletonFactory(T)},"./src/streaming/utils/RequestModifier.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(){return{modifyRequestURL:function T(d){return d},modifyRequestHeader:function D(d){return d}}}y.__dashjs_factory_name="RequestModifier",k.default=x.default.getSingletonFactory(y)},"./src/streaming/utils/SupervisorTools.js":function(Oe,k,u){"use strict";u.r(k),u.d(k,"checkParameterType",function(){return M}),u.d(k,"checkInteger",function(){return T}),u.d(k,"checkRange",function(){return D}),u.d(k,"checkIsVideoOrAudioType",function(){return d});var x=u("./src/streaming/constants/Constants.js");function y(v){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(v)}function M(v,p){if(y(v)!==p)throw x.default.BAD_ARGUMENT_ERROR}function T(v){if(null===v||isNaN(v)||v%1!=0)throw x.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function D(v,p,N){if(v<p||v>N)throw x.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function d(v){if("string"!=typeof v||v!==x.default.AUDIO&&v!==x.default.VIDEO)throw x.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js"),M=u("./src/core/EventBus.js"),T=u("./src/core/events/Events.js"),D=u("./node_modules/imsc/src/main/js/main.js"),v=u("./src/streaming/MediaPlayerEvents.js"),p=u("./src/streaming/constants/ConformanceViolationConstants.js");function N(){var m,h,O=this.context,L=Object(M.default)(O).getInstance(),g=0;function C(){var R="cue_TTML_"+g;return g++,R}return m={parse:function F(R,w,b,P,f){var $,z,q,I="",H=[],J={},X={},V="",se="",Z={onOpenTag:function(ge,ie,de){if(de[" imagetype"]&&!de[" imageType"]&&(L.trigger(v.default.CONFORMANCE_VIOLATION,{level:p.default.LEVELS.ERROR,event:p.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),de[" imageType"]=de[" imagetype"]),"image"===ie&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===ge||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===ge)){if(!de[" imageType"]||"PNG"!==de[" imageType"].value)return void h.warn("smpte-tt imageType != PNG. Discarded");V=de["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){V&&(X[V]=se.trim()),se="",V=""},onText:function(ge){V&&(se+=ge)}};if(!R)throw I="no ttml data to parse",new Error(I);J.data=R,L.trigger(T.default.TTML_TO_PARSE,J);var oe=Object(D.fromXML)(J.data,function(re){I=re},Z);L.trigger(T.default.TTML_PARSED,{ttmlString:J.data,ttmlDoc:oe});var he=oe.getMediaTimeEvents();for(q=0;q<he.length;q++){var ve=Object(D.generateISD)(oe,he[q],function(re){I=re});ve.contents.some(function(re){return re.contents.length})&&($=he[q]+w<b?b:he[q]+w)<(z=he[q+1]+w>P?P:he[q+1]+w)&&H.push({start:$,end:z,type:"html",cueID:C(),isd:ve,images:f,embeddedImages:X})}if(""!==I)throw h.error(I),new Error(I);return H}},function S(){h=Object(y.default)(O).getInstance().getLogger(m)}(),m}N.__dashjs_factory_name="TTMLParser",k.default=x.default.getSingletonFactory(N)},"./src/streaming/utils/URLUtils.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/streaming/utils/DefaultURLUtils.js");function M(){var d,v=[],p=this.context;function m(I,H,$){var z=function N(I){var H;for(H=0;H<v.length;H++)if(v[H].regex.test(I))return v[H].utils;return d}($||H);return z&&"function"==typeof z[I]?z[I](H,$):d[I](H,$)}return function O(){d=Object(y.default)(p).getInstance()}(),{registerUrlRegex:function L(I,H){v.push({regex:I,utils:H})},parseBaseUrl:function h(I){return m("parseBaseUrl",I)},parseOrigin:function g(I){return m("parseOrigin",I)},parseScheme:function C(I){return m("parseScheme",I)},isRelative:function F(I){return m("isRelative",I)},isPathAbsolute:function R(I){return m("isPathAbsolute",I)},isSchemeRelative:function w(I){return m("isSchemeRelative",I)},isHTTPURL:function b(I){return m("isHTTPURL",I)},isHTTPS:function P(I){return m("isHTTPS",I)},removeHostname:function S(I){return m("removeHostname",I)},resolve:function f(I,H){return m("resolve",I,H)}}}M.__dashjs_factory_name="URLUtils";var T=x.default.getSingletonFactory(M);k.default=T},"./src/streaming/utils/VTTParser.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js"),y=u("./src/core/Debug.js");function T(){var d,v,p,N,O,L,D=this.context;function g(R){var w=R.split(":"),b=w.length-1;return R=60*parseInt(w[b-1],10)+parseFloat(w[b]),2===b&&(R+=3600*parseInt(w[0],10)),R}function S(R){var w=R.split(N),b=w[1].split(L);return b.shift(),w[1]=b[0],b.shift(),{cuePoints:w,styles:C(b)}}function C(R){var w={};return R.forEach(function(b){if(b.split(/:/).length>1){var P=b.split(/:/)[1];P&&-1!=P.search(/%/)&&(P=parseInt(P.replace(/%/,""),10)),(b.match(/align/)||b.match(/A/))&&(w.align=P),(b.match(/line/)||b.match(/L/))&&(w.line=P),(b.match(/position/)||b.match(/P/))&&(w.position=P),(b.match(/size/)||b.match(/S/))&&(w.size=P)}}),w}function F(R,w){for(var I,b=w,P="",f="";""!==R[b]&&b<R.length;)b++;if((I=b-w)>1)for(var H=0;H<I;H++){if((f=R[w+H]).match(N)){P="";break}P+=f,H!==I-1&&(P+="\n")}else(f=R[w]).match(N)||(P=f);return P}return d={parse:function h(R){var b,P,w=[];if(!R)return w;b=(R=R.split(p)).length,P=-1;for(var f=0;f<b;f++){var I=R[f];if(I.length>0&&"WEBVTT"!==I&&I.match(N)){var H=S(I),$=H.cuePoints,z=H.styles,q=F(R,f+1),J=g($[0].replace(O,"")),X=g($[1].replace(O,""));!isNaN(J)&&!isNaN(X)&&J>=P&&X>J?""!==q?(P=J,w.push({start:J,end:X,data:q,styles:z})):v.error("Skipping cue due to empty/malformed cue text"):v.error("Skipping cue due to incorrect cue timing")}}return w}},function m(){v=Object(y.default)(D).getInstance().getLogger(d),p=/(?:\r\n|\r|\n)/gm,N=/-->/,O=/(^[\s]+|[\s]+$)/g,L=/\s\b/g}(),d}T.__dashjs_factory_name="VTTParser",k.default=x.default.getSingletonFactory(T)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(M){var D=(M=M||{}).blacklistController;return{select:function d(v){var N,p=0;return v&&v.some(function(O,L){return p=L,!D.contains(O.serviceLocation)})&&(N=v[p]),N}}}y.__dashjs_factory_name="BasicSelector",k.default=x.default.getClassFactory(y)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/core/FactoryMaker.js");function y(M){var D=(M=M||{}).blacklistController;return{select:function p(N){return N&&function v(N){var S,C,m=0,h=[],g=0;if((C=N.sort(function(R,w){var b=R.dvb_priority-w.dvb_priority;return isNaN(b)?0:b}).filter(function(R,w,b){return!w||b[0].dvb_priority&&R.dvb_priority&&b[0].dvb_priority===R.dvb_priority})).length)return C.length>1&&(C.forEach(function(F){h.push(m+=F.dvb_weight)}),S=Math.floor(Math.random()*(m-1)),h.every(function(F,R){return g=R,!(S<F)})),C[g]}(function d(N){var O=[];return N.filter(function(g){return!D.contains(g.serviceLocation)||(g.dvb_priority&&O.push(g.dvb_priority),!1)}).filter(function(g){return!(O.length&&g.dvb_priority&&-1!==O.indexOf(g.dvb_priority))})}(N))}}}y.__dashjs_factory_name="DVBSelector",k.default=x.default.getClassFactory(y)},"./src/streaming/vo/BitrateInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}},"./src/streaming/vo/DashJSError.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D,d){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.code=T||null,this.message=D||null,this.data=d||null}},"./src/streaming/vo/DataChunk.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},"./src/streaming/vo/FragmentRequest.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/vo/metrics/HTTPRequest.js");function M(d,v){for(var p=0;p<v.length;p++){var N=v[p];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}var D=function(){function d(v){(function y(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")})(this,d),this.action=d.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=v||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}return function T(d,v,p){return v&&M(d.prototype,v),p&&M(d,p),d}(d,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===x.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(p){this.type=p&&p.init?x.HTTPRequest.INIT_SEGMENT_TYPE:x.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=p&&p.url?p.url:null,this.range=p&&p.range?p.range.start+"-"+p.range.end:null,this.mediaType=p&&p.mediaType?p.mediaType:null}}]),d}();D.ACTION_DOWNLOAD="download",D.ACTION_COMPLETE="complete",k.default=D},"./src/streaming/vo/HeadRequest.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/vo/FragmentRequest.js");function y(m){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function T(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),h&&D(m,h)}function D(m,h){return(D=Object.setPrototypeOf||function(S,C){return S.__proto__=C,S})(m,h)}function d(m){var h=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var C,S=O(m);if(h){var F=O(this).constructor;C=Reflect.construct(S,arguments,F)}else C=S.apply(this,arguments);return v(this,C)}}function v(m,h){return!h||"object"!==y(h)&&"function"!=typeof h?function p(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(m):h}function O(m){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}k.default=function(m){T(g,m);var h=d(g);function g(S){var C;return function M(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}(this,g),(C=h.call(this,S)).checkForExistenceOnly=!0,C}return g}(x.default)},"./src/streaming/vo/IsoBox.js":function(Oe,k,u){"use strict";function y(D,d){for(var v=0;v<d.length;v++){var p=d[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(D,p.key,p)}}u.r(k),k.default=function(){function D(d){if(function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}(this,D),this.offset=d._offset,this.type=d.type,this.size=d.size,this.boxes=[],d.boxes)for(var v=0;v<d.boxes.length;v++)this.boxes.push(new D(d.boxes[v]));switch(this.isComplete=!0,d.type){case"sidx":if(this.timescale=d.timescale,this.earliest_presentation_time=d.earliest_presentation_time,this.first_offset=d.first_offset,this.references=d.references,d.references){this.references=[];for(var p=0;p<d.references.length;p++)this.references.push({reference_type:d.references[p].reference_type,referenced_size:d.references[p].referenced_size,subsegment_duration:d.references[p].subsegment_duration})}break;case"emsg":this.id=d.id,this.version=1===d.version?1:0,this.value=d.value,this.timescale=d.timescale,this.scheme_id_uri=d.scheme_id_uri,this.presentation_time_delta=1===d.version?d.presentation_time:d.presentation_time_delta,this.event_duration=d.event_duration,this.message_data=d.message_data;break;case"mdhd":this.timescale=d.timescale;break;case"mfhd":this.sequence_number=d.sequence_number;break;case"subs":this.entry_count=d.entry_count,this.entries=d.entries;break;case"tfhd":this.base_data_offset=d.base_data_offset,this.sample_description_index=d.sample_description_index,this.default_sample_duration=d.default_sample_duration,this.default_sample_size=d.default_sample_size,this.default_sample_flags=d.default_sample_flags,this.flags=d.flags;break;case"tfdt":this.version=d.version,this.baseMediaDecodeTime=d.baseMediaDecodeTime,this.flags=d.flags;break;case"trun":if(this.sample_count=d.sample_count,this.first_sample_flags=d.first_sample_flags,this.data_offset=d.data_offset,this.flags=d.flags,this.samples=d.samples,d.samples){this.samples=[];for(var O=0,L=d.samples.length;O<L;O++)this.samples.push({sample_size:d.samples[O].sample_size,sample_duration:d.samples[O].sample_duration,sample_composition_time_offset:d.samples[O].sample_composition_time_offset})}}}return function M(D,d,v){return d&&y(D.prototype,d),v&&y(D,v),D}(D,[{key:"getChildBox",value:function(v){for(var p=0;p<this.boxes.length;p++)if(this.boxes[p].type===v)return this.boxes[p]}},{key:"getChildBoxes",value:function(v){for(var p=[],N=0;N<this.boxes.length;N++)this.boxes[N].type===v&&p.push(this.boxes[N]);return p}}]),D}()},"./src/streaming/vo/IsoBoxSearchInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(T,D,d){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.lastCompletedOffset=T,this.found=D,this.size=d}},"./src/streaming/vo/MetricsList.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},"./src/streaming/vo/TextRequest.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/Constants.js"),y=u("./src/streaming/vo/FragmentRequest.js");function M(h){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(h)}function D(h,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),g&&d(h,g)}function d(h,g){return(d=Object.setPrototypeOf||function(C,F){return C.__proto__=F,C})(h,g)}function v(h){var g=function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var F,C=L(h);if(g){var R=L(this).constructor;F=Reflect.construct(C,arguments,R)}else F=C.apply(this,arguments);return p(this,F)}}function p(h,g){return!g||"object"!==M(g)&&"function"!=typeof g?function N(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(h):g}function L(h){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)})(h)}k.default=function(h){D(S,h);var g=v(S);function S(C,F){var R;return function T(h,g){if(!(h instanceof g))throw new TypeError("Cannot call a class as a function")}(this,S),(R=g.call(this)).url=C||null,R.type=F||null,R.mediaType=x.default.STREAM,R.responseType="",R}return S}(y.default)},"./src/streaming/vo/TextTrackInfo.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/dash/vo/MediaInfo.js");function y(m){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(m)}function T(m,h){if("function"!=typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function");m.prototype=Object.create(h&&h.prototype,{constructor:{value:m,writable:!0,configurable:!0}}),h&&D(m,h)}function D(m,h){return(D=Object.setPrototypeOf||function(S,C){return S.__proto__=C,S})(m,h)}function d(m){var h=function N(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var C,S=O(m);if(h){var F=O(this).constructor;C=Reflect.construct(S,arguments,F)}else C=S.apply(this,arguments);return v(this,C)}}function v(m,h){return!h||"object"!==y(h)&&"function"!=typeof h?function p(m){if(void 0===m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(m):h}function O(m){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(m)}k.default=function(m){T(g,m);var h=d(g);function g(){var S;return function M(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")}(this,g),(S=h.call(this)).captionData=null,S.label=null,S.defaultTrack=!1,S.kind=null,S.isFragmented=!1,S.isEmbedded=!1,S.isTTML=null,S}return g}(x.default)},"./src/streaming/vo/Thumbnail.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},"./src/streaming/vo/ThumbnailTrackInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},"./src/streaming/vo/URIFragmentData.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}},"./src/streaming/vo/metrics/BufferLevel.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.t=null,this.level=null}},"./src/streaming/vo/metrics/BufferState.js":function(Oe,k,u){"use strict";u.r(k);var x=u("./src/streaming/constants/MetricsConstants.js");k.default=function T(){(function y(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")})(this,T),this.target=null,this.state=x.default.BUFFER_EMPTY}},"./src/streaming/vo/metrics/DVRInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.time=null,this.range=null,this.manifestInfo=null}},"./src/streaming/vo/metrics/DroppedFrames.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.time=null,this.droppedFrames=null}},"./src/streaming/vo/metrics/HTTPRequest.js":function(Oe,k,u){"use strict";function x(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")}u.r(k),u.d(k,"HTTPRequest",function(){return y}),u.d(k,"HTTPRequestTrace",function(){return M});var y=function T(){x(this,T),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},M=function T(){x(this,T),this.s=null,this.d=null,this.b=[],this._t=null};y.GET="GET",y.HEAD="HEAD",y.MPD_TYPE="MPD",y.XLINK_EXPANSION_TYPE="XLinkExpansion",y.INIT_SEGMENT_TYPE="InitializationSegment",y.INDEX_SEGMENT_TYPE="IndexSegment",y.MEDIA_SEGMENT_TYPE="MediaSegment",y.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",y.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",y.DVB_REPORTING_TYPE="DVBReporting",y.LICENSE="license",y.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(Oe,k,u){"use strict";function x(D,d){if(!(D instanceof d))throw new TypeError("Cannot call a class as a function")}u.r(k),u.d(k,"ManifestUpdate",function(){return y}),u.d(k,"ManifestUpdateStreamInfo",function(){return M}),u.d(k,"ManifestUpdateRepresentationInfo",function(){return T});var y=function D(){x(this,D),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},M=function D(){x(this,D),this.id=null,this.index=null,this.start=null,this.duration=null},T=function D(){x(this,D),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},"./src/streaming/vo/metrics/PlayList.js":function(Oe,k,u){"use strict";function x(T,D){if(!(T instanceof D))throw new TypeError("Cannot call a class as a function")}u.r(k),u.d(k,"PlayList",function(){return y}),u.d(k,"PlayListTrace",function(){return M});var y=function T(){x(this,T),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};y.INITIAL_PLAYOUT_START_REASON="initial_playout",y.SEEK_START_REASON="seek",y.RESUME_FROM_PAUSE_START_REASON="resume",y.METRICS_COLLECTION_START_REASON="metrics_collection_start";var M=function T(){x(this,T),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};M.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",M.REBUFFERING_REASON="rebuffering",M.USER_REQUEST_STOP_REASON="user_request",M.END_OF_PERIOD_STOP_REASON="end_of_period",M.END_OF_CONTENT_STOP_REASON="end_of_content",M.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",M.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.t=null,this.mt=null,this.to=null,this.lto=null}},"./src/streaming/vo/metrics/RequestsQueue.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.loadingRequests=[],this.executedRequests=[]}},"./src/streaming/vo/metrics/SchedulingInfo.js":function(Oe,k,u){"use strict";u.r(k),k.default=function M(){(function x(M,T){if(!(M instanceof T))throw new TypeError("Cannot call a class as a function")})(this,M),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}},0:function(Oe,k){},1:function(Oe,k){}}).default},386:(Cs,Oe,k)=>{var u;!function(x,y,M,T){"use strict";var S,D=["","webkit","Moz","MS","ms","o"],d=y.createElement("div"),p=Math.round,N=Math.abs,O=Date.now;function L(De,Pe,He){return setTimeout(w(De,He),Pe)}function m(De,Pe,He){return!!Array.isArray(De)&&(h(De,He[Pe],He),!0)}function h(De,Pe,He){var rt;if(De)if(De.forEach)De.forEach(Pe,He);else if(De.length!==T)for(rt=0;rt<De.length;)Pe.call(He,De[rt],rt,De),rt++;else for(rt in De)De.hasOwnProperty(rt)&&Pe.call(He,De[rt],rt,De)}function g(De,Pe,He){var rt="DEPRECATED METHOD: "+Pe+"\n"+He+" AT \n";return function(){var St=new Error("get-stack-trace"),Gt=St&&St.stack?St.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",_n=x.console&&(x.console.warn||x.console.log);return _n&&_n.call(x.console,rt,Gt),De.apply(this,arguments)}}S="function"!=typeof Object.assign?function(Pe){if(Pe===T||null===Pe)throw new TypeError("Cannot convert undefined or null to object");for(var He=Object(Pe),rt=1;rt<arguments.length;rt++){var St=arguments[rt];if(St!==T&&null!==St)for(var Gt in St)St.hasOwnProperty(Gt)&&(He[Gt]=St[Gt])}return He}:Object.assign;var C=g(function(Pe,He,rt){for(var St=Object.keys(He),Gt=0;Gt<St.length;)(!rt||rt&&Pe[St[Gt]]===T)&&(Pe[St[Gt]]=He[St[Gt]]),Gt++;return Pe},"extend","Use `assign`."),F=g(function(Pe,He){return C(Pe,He,!0)},"merge","Use `assign`.");function R(De,Pe,He){var St,rt=Pe.prototype;(St=De.prototype=Object.create(rt)).constructor=De,St._super=rt,He&&S(St,He)}function w(De,Pe){return function(){return De.apply(Pe,arguments)}}function b(De,Pe){return"function"==typeof De?De.apply(Pe&&Pe[0]||T,Pe):De}function P(De,Pe){return De===T?Pe:De}function f(De,Pe,He){h(z(Pe),function(rt){De.addEventListener(rt,He,!1)})}function I(De,Pe,He){h(z(Pe),function(rt){De.removeEventListener(rt,He,!1)})}function H(De,Pe){for(;De;){if(De==Pe)return!0;De=De.parentNode}return!1}function $(De,Pe){return De.indexOf(Pe)>-1}function z(De){return De.trim().split(/\s+/g)}function q(De,Pe,He){if(De.indexOf&&!He)return De.indexOf(Pe);for(var rt=0;rt<De.length;){if(He&&De[rt][He]==Pe||!He&&De[rt]===Pe)return rt;rt++}return-1}function J(De){return Array.prototype.slice.call(De,0)}function X(De,Pe,He){for(var rt=[],St=[],Gt=0;Gt<De.length;){var _n=Pe?De[Gt][Pe]:De[Gt];q(St,_n)<0&&rt.push(De[Gt]),St[Gt]=_n,Gt++}return He&&(rt=Pe?rt.sort(function(Qn,zn){return Qn[Pe]>zn[Pe]}):rt.sort()),rt}function V(De,Pe){for(var He,rt,St=Pe[0].toUpperCase()+Pe.slice(1),Gt=0;Gt<D.length;){if((rt=(He=D[Gt])?He+St:Pe)in De)return rt;Gt++}return T}var se=1;function oe(De){var Pe=De.ownerDocument||De;return Pe.defaultView||Pe.parentWindow||x}var ve="ontouchstart"in x,re=V(x,"PointerEvent")!==T,ge=ve&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ie="touch",ue="mouse",ae=["x","y"],Y=["clientX","clientY"];function W(De,Pe){var He=this;this.manager=De,this.callback=Pe,this.element=De.element,this.target=De.options.inputTarget,this.domHandler=function(rt){b(De.options.enable,[De])&&He.handler(rt)},this.init()}function Ee(De,Pe,He){var rt=He.pointers.length,St=He.changedPointers.length,Gt=1&Pe&&rt-St==0,_n=12&Pe&&rt-St==0;He.isFirst=!!Gt,He.isFinal=!!_n,Gt&&(De.session={}),He.eventType=Pe,function me(De,Pe){var He=De.session,rt=Pe.pointers,St=rt.length;He.firstInput||(He.firstInput=Ie(Pe)),St>1&&!He.firstMultiple?He.firstMultiple=Ie(Pe):1===St&&(He.firstMultiple=!1);var Gt=He.firstInput,_n=He.firstMultiple,$n=_n?_n.center:Gt.center,Qn=Pe.center=we(rt);Pe.timeStamp=O(),Pe.deltaTime=Pe.timeStamp-Gt.timeStamp,Pe.angle=ze($n,Qn),Pe.distance=xe($n,Qn),function Te(De,Pe){var He=Pe.center,rt=De.offsetDelta||{},St=De.prevDelta||{},Gt=De.prevInput||{};(1===Pe.eventType||4===Gt.eventType)&&(St=De.prevDelta={x:Gt.deltaX||0,y:Gt.deltaY||0},rt=De.offsetDelta={x:He.x,y:He.y}),Pe.deltaX=St.x+(He.x-rt.x),Pe.deltaY=St.y+(He.y-rt.y)}(He,Pe),Pe.offsetDirection=Re(Pe.deltaX,Pe.deltaY);var zn=ke(Pe.deltaTime,Pe.deltaX,Pe.deltaY);Pe.overallVelocityX=zn.x,Pe.overallVelocityY=zn.y,Pe.overallVelocity=N(zn.x)>N(zn.y)?zn.x:zn.y,Pe.scale=_n?function at(De,Pe){return xe(Pe[0],Pe[1],Y)/xe(De[0],De[1],Y)}(_n.pointers,rt):1,Pe.rotation=_n?function ut(De,Pe){return ze(Pe[1],Pe[0],Y)+ze(De[1],De[0],Y)}(_n.pointers,rt):0,Pe.maxPointers=He.prevInput?Pe.pointers.length>He.prevInput.maxPointers?Pe.pointers.length:He.prevInput.maxPointers:Pe.pointers.length,function Ne(De,Pe){var St,Gt,_n,$n,He=De.lastInterval||Pe,rt=Pe.timeStamp-He.timeStamp;if(8!=Pe.eventType&&(rt>25||He.velocity===T)){var Qn=Pe.deltaX-He.deltaX,zn=Pe.deltaY-He.deltaY,Cr=ke(rt,Qn,zn);Gt=Cr.x,_n=Cr.y,St=N(Cr.x)>N(Cr.y)?Cr.x:Cr.y,$n=Re(Qn,zn),De.lastInterval=Pe}else St=He.velocity,Gt=He.velocityX,_n=He.velocityY,$n=He.direction;Pe.velocity=St,Pe.velocityX=Gt,Pe.velocityY=_n,Pe.direction=$n}(He,Pe);var Cr=De.element;H(Pe.srcEvent.target,Cr)&&(Cr=Pe.srcEvent.target),Pe.target=Cr}(De,He),De.emit("hammer.input",He),De.recognize(He),De.session.prevInput=He}function Ie(De){for(var Pe=[],He=0;He<De.pointers.length;)Pe[He]={clientX:p(De.pointers[He].clientX),clientY:p(De.pointers[He].clientY)},He++;return{timeStamp:O(),pointers:Pe,center:we(Pe),deltaX:De.deltaX,deltaY:De.deltaY}}function we(De){var Pe=De.length;if(1===Pe)return{x:p(De[0].clientX),y:p(De[0].clientY)};for(var He=0,rt=0,St=0;St<Pe;)He+=De[St].clientX,rt+=De[St].clientY,St++;return{x:p(He/Pe),y:p(rt/Pe)}}function ke(De,Pe,He){return{x:Pe/De||0,y:He/De||0}}function Re(De,Pe){return De===Pe?1:N(De)>=N(Pe)?De<0?2:4:Pe<0?8:16}function xe(De,Pe,He){He||(He=ae);var rt=Pe[He[0]]-De[He[0]],St=Pe[He[1]]-De[He[1]];return Math.sqrt(rt*rt+St*St)}function ze(De,Pe,He){return He||(He=ae),180*Math.atan2(Pe[He[1]]-De[He[1]],Pe[He[0]]-De[He[0]])/Math.PI}W.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(oe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&I(this.element,this.evEl,this.domHandler),this.evTarget&&I(this.target,this.evTarget,this.domHandler),this.evWin&&I(oe(this.element),this.evWin,this.domHandler)}};var yt={mousedown:1,mousemove:2,mouseup:4},Lt="mousedown",kt="mousemove mouseup";function Zt(){this.evEl=Lt,this.evWin=kt,this.pressed=!1,W.apply(this,arguments)}R(Zt,W,{handler:function(Pe){var He=yt[Pe.type];1&He&&0===Pe.button&&(this.pressed=!0),2&He&&1!==Pe.which&&(He=4),this.pressed&&(4&He&&(this.pressed=!1),this.callback(this.manager,He,{pointers:[Pe],changedPointers:[Pe],pointerType:ue,srcEvent:Pe}))}});var nn={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},sn={2:ie,3:"pen",4:ue,5:"kinect"},Be="pointerdown",Le="pointermove pointerup pointercancel";function Ce(){this.evEl=Be,this.evWin=Le,W.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}x.MSPointerEvent&&!x.PointerEvent&&(Be="MSPointerDown",Le="MSPointerMove MSPointerUp MSPointerCancel"),R(Ce,W,{handler:function(Pe){var He=this.store,rt=!1,St=Pe.type.toLowerCase().replace("ms",""),Gt=nn[St],_n=sn[Pe.pointerType]||Pe.pointerType,$n=_n==ie,Qn=q(He,Pe.pointerId,"pointerId");1&Gt&&(0===Pe.button||$n)?Qn<0&&(He.push(Pe),Qn=He.length-1):12&Gt&&(rt=!0),!(Qn<0)&&(He[Qn]=Pe,this.callback(this.manager,Gt,{pointers:He,changedPointers:[Pe],pointerType:_n,srcEvent:Pe}),rt&&He.splice(Qn,1))}});var Ue={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Qe="touchstart",st="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=Qe,this.evWin=st,this.started=!1,W.apply(this,arguments)}function Ze(De,Pe){var He=J(De.touches),rt=J(De.changedTouches);return 12&Pe&&(He=X(He.concat(rt),"identifier",!0)),[He,rt]}R(ct,W,{handler:function(Pe){var He=Ue[Pe.type];if(1===He&&(this.started=!0),this.started){var rt=Ze.call(this,Pe,He);12&He&&rt[0].length-rt[1].length==0&&(this.started=!1),this.callback(this.manager,He,{pointers:rt[0],changedPointers:rt[1],pointerType:ie,srcEvent:Pe})}}});var ht={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ut="touchstart touchmove touchend touchcancel";function It(){this.evTarget=Ut,this.targetIds={},W.apply(this,arguments)}function Wt(De,Pe){var He=J(De.touches),rt=this.targetIds;if(3&Pe&&1===He.length)return rt[He[0].identifier]=!0,[He,He];var St,Gt,_n=J(De.changedTouches),$n=[],Qn=this.target;if(Gt=He.filter(function(zn){return H(zn.target,Qn)}),1===Pe)for(St=0;St<Gt.length;)rt[Gt[St].identifier]=!0,St++;for(St=0;St<_n.length;)rt[_n[St].identifier]&&$n.push(_n[St]),12&Pe&&delete rt[_n[St].identifier],St++;return $n.length?[X(Gt.concat($n),"identifier",!0),$n]:void 0}function et(){W.apply(this,arguments);var De=w(this.handler,this);this.touch=new It(this.manager,De),this.mouse=new Zt(this.manager,De),this.primaryTouch=null,this.lastTouches=[]}function Rt(De,Pe){1&De?(this.primaryTouch=Pe.changedPointers[0].identifier,Tt.call(this,Pe)):12&De&&Tt.call(this,Pe)}function Tt(De){var Pe=De.changedPointers[0];if(Pe.identifier===this.primaryTouch){var He={x:Pe.clientX,y:Pe.clientY};this.lastTouches.push(He);var rt=this.lastTouches;setTimeout(function(){var Gt=rt.indexOf(He);Gt>-1&&rt.splice(Gt,1)},2500)}}function bt(De){for(var Pe=De.srcEvent.clientX,He=De.srcEvent.clientY,rt=0;rt<this.lastTouches.length;rt++){var St=this.lastTouches[rt],Gt=Math.abs(Pe-St.x),_n=Math.abs(He-St.y);if(Gt<=25&&_n<=25)return!0}return!1}R(It,W,{handler:function(Pe){var He=ht[Pe.type],rt=Wt.call(this,Pe,He);!rt||this.callback(this.manager,He,{pointers:rt[0],changedPointers:rt[1],pointerType:ie,srcEvent:Pe})}}),R(et,W,{handler:function(Pe,He,rt){var Gt=rt.pointerType==ue;if(!(Gt&&rt.sourceCapabilities&&rt.sourceCapabilities.firesTouchEvents)){if(rt.pointerType==ie)Rt.call(this,He,rt);else if(Gt&&bt.call(this,rt))return;this.callback(Pe,He,rt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var rn=V(d.style,"touchAction"),lt=rn!==T,jt="compute",$e="manipulation",mt="none",Je="pan-x",tt="pan-y",Et=function zt(){if(!lt)return!1;var De={},Pe=x.CSS&&x.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(He){De[He]=!Pe||x.CSS.supports("touch-action",He)}),De}();function Yt(De,Pe){this.manager=De,this.set(Pe)}function Bt(De){this.options=S({},this.defaults,De||{}),this.id=function Z(){return se++}(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Ke(De){return 16&De?"cancel":8&De?"end":4&De?"move":2&De?"start":""}function wt(De){return 16==De?"down":8==De?"up":2==De?"left":4==De?"right":""}function _t(De,Pe){var He=Pe.manager;return He?He.get(De):De}function en(){Bt.apply(this,arguments)}function Dn(){en.apply(this,arguments),this.pX=null,this.pY=null}function Ln(){en.apply(this,arguments)}function Ht(){Bt.apply(this,arguments),this._timer=null,this._input=null}function Sn(){en.apply(this,arguments)}function mr(){en.apply(this,arguments)}function Mt(){Bt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Gn(De,Pe){return(Pe=Pe||{}).recognizers=P(Pe.recognizers,Gn.defaults.preset),new Si(De,Pe)}function Si(De,Pe){this.options=S({},Gn.defaults,Pe||{}),this.options.inputTarget=this.options.inputTarget||De,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=De,this.input=function _e(De){return new(De.options.inputClass||(re?Ce:ge?It:ve?et:Zt))(De,Ee)}(this),this.touchAction=new Yt(this,this.options.touchAction),Vr(this,!0),h(this.options.recognizers,function(He){var rt=this.add(new He[0](He[1]));He[2]&&rt.recognizeWith(He[2]),He[3]&&rt.requireFailure(He[3])},this)}function Vr(De,Pe){var rt,He=De.element;He.style&&(h(De.options.cssProps,function(St,Gt){rt=V(He.style,Gt),Pe?(De.oldCssProps[rt]=He.style[rt],He.style[rt]=St):He.style[rt]=De.oldCssProps[rt]||""}),Pe||(De.oldCssProps={}))}Yt.prototype={set:function(De){De==jt&&(De=this.compute()),lt&&this.manager.element.style&&Et[De]&&(this.manager.element.style[rn]=De),this.actions=De.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var De=[];return h(this.manager.recognizers,function(Pe){b(Pe.options.enable,[Pe])&&(De=De.concat(Pe.getTouchAction()))}),function an(De){if($(De,mt))return mt;var Pe=$(De,Je),He=$(De,tt);return Pe&&He?mt:Pe||He?Pe?Je:tt:$(De,$e)?$e:"auto"}(De.join(" "))},preventDefaults:function(De){var Pe=De.srcEvent,He=De.offsetDirection;if(!this.manager.session.prevented){var rt=this.actions,St=$(rt,mt)&&!Et[mt],Gt=$(rt,tt)&&!Et[tt],_n=$(rt,Je)&&!Et[Je];if(St&&1===De.pointers.length&&De.distance<2&&De.deltaTime<250)return;return _n&&Gt||!(St||Gt&&6&He||_n&&24&He)?void 0:this.preventSrc(Pe)}Pe.preventDefault()},preventSrc:function(De){this.manager.session.prevented=!0,De.preventDefault()}},Bt.prototype={defaults:{},set:function(De){return S(this.options,De),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(De){if(m(De,"recognizeWith",this))return this;var Pe=this.simultaneous;return Pe[(De=_t(De,this)).id]||(Pe[De.id]=De,De.recognizeWith(this)),this},dropRecognizeWith:function(De){return m(De,"dropRecognizeWith",this)||(De=_t(De,this),delete this.simultaneous[De.id]),this},requireFailure:function(De){if(m(De,"requireFailure",this))return this;var Pe=this.requireFail;return-1===q(Pe,De=_t(De,this))&&(Pe.push(De),De.requireFailure(this)),this},dropRequireFailure:function(De){if(m(De,"dropRequireFailure",this))return this;De=_t(De,this);var Pe=q(this.requireFail,De);return Pe>-1&&this.requireFail.splice(Pe,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(De){return!!this.simultaneous[De.id]},emit:function(De){var Pe=this,He=this.state;function rt(St){Pe.manager.emit(St,De)}He<8&&rt(Pe.options.event+Ke(He)),rt(Pe.options.event),De.additionalEvent&&rt(De.additionalEvent),He>=8&&rt(Pe.options.event+Ke(He))},tryEmit:function(De){if(this.canEmit())return this.emit(De);this.state=32},canEmit:function(){for(var De=0;De<this.requireFail.length;){if(!(33&this.requireFail[De].state))return!1;De++}return!0},recognize:function(De){var Pe=S({},De);if(!b(this.options.enable,[this,Pe]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(Pe),30&this.state&&this.tryEmit(Pe)},process:function(De){},getTouchAction:function(){},reset:function(){}},R(en,Bt,{defaults:{pointers:1},attrTest:function(De){var Pe=this.options.pointers;return 0===Pe||De.pointers.length===Pe},process:function(De){var Pe=this.state,He=De.eventType,rt=6&Pe,St=this.attrTest(De);return rt&&(8&He||!St)?16|Pe:rt||St?4&He?8|Pe:2&Pe?4|Pe:2:32}}),R(Dn,en,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var De=this.options.direction,Pe=[];return 6&De&&Pe.push(tt),24&De&&Pe.push(Je),Pe},directionTest:function(De){var Pe=this.options,He=!0,rt=De.distance,St=De.direction,Gt=De.deltaX,_n=De.deltaY;return St&Pe.direction||(6&Pe.direction?(St=0===Gt?1:Gt<0?2:4,He=Gt!=this.pX,rt=Math.abs(De.deltaX)):(St=0===_n?1:_n<0?8:16,He=_n!=this.pY,rt=Math.abs(De.deltaY))),De.direction=St,He&&rt>Pe.threshold&&St&Pe.direction},attrTest:function(De){return en.prototype.attrTest.call(this,De)&&(2&this.state||!(2&this.state)&&this.directionTest(De))},emit:function(De){this.pX=De.deltaX,this.pY=De.deltaY;var Pe=wt(De.direction);Pe&&(De.additionalEvent=this.options.event+Pe),this._super.emit.call(this,De)}}),R(Ln,en,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[mt]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.scale-1)>this.options.threshold||2&this.state)},emit:function(De){1!==De.scale&&(De.additionalEvent=this.options.event+(De.scale<1?"in":"out")),this._super.emit.call(this,De)}}),R(Ht,Bt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(De){var Pe=this.options,He=De.pointers.length===Pe.pointers,rt=De.distance<Pe.threshold,St=De.deltaTime>Pe.time;if(this._input=De,!rt||!He||12&De.eventType&&!St)this.reset();else if(1&De.eventType)this.reset(),this._timer=L(function(){this.state=8,this.tryEmit()},Pe.time,this);else if(4&De.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(De){8===this.state&&(De&&4&De.eventType?this.manager.emit(this.options.event+"up",De):(this._input.timeStamp=O(),this.manager.emit(this.options.event,this._input)))}}),R(Sn,en,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[mt]},attrTest:function(De){return this._super.attrTest.call(this,De)&&(Math.abs(De.rotation)>this.options.threshold||2&this.state)}}),R(mr,en,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Dn.prototype.getTouchAction.call(this)},attrTest:function(De){var He,Pe=this.options.direction;return 30&Pe?He=De.overallVelocity:6&Pe?He=De.overallVelocityX:24&Pe&&(He=De.overallVelocityY),this._super.attrTest.call(this,De)&&Pe&De.offsetDirection&&De.distance>this.options.threshold&&De.maxPointers==this.options.pointers&&N(He)>this.options.velocity&&4&De.eventType},emit:function(De){var Pe=wt(De.offsetDirection);Pe&&this.manager.emit(this.options.event+Pe,De),this.manager.emit(this.options.event,De)}}),R(Mt,Bt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$e]},process:function(De){var Pe=this.options,He=De.pointers.length===Pe.pointers,rt=De.distance<Pe.threshold,St=De.deltaTime<Pe.time;if(this.reset(),1&De.eventType&&0===this.count)return this.failTimeout();if(rt&&St&&He){if(4!=De.eventType)return this.failTimeout();var Gt=!this.pTime||De.timeStamp-this.pTime<Pe.interval,_n=!this.pCenter||xe(this.pCenter,De.center)<Pe.posThreshold;if(this.pTime=De.timeStamp,this.pCenter=De.center,_n&&Gt?this.count+=1:this.count=1,this._input=De,0==this.count%Pe.taps)return this.hasRequireFailures()?(this._timer=L(function(){this.state=8,this.tryEmit()},Pe.interval,this),2):8}return 32},failTimeout:function(){return this._timer=L(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Gn.VERSION="2.0.7",Gn.defaults={domEvents:!1,touchAction:jt,enable:!0,inputTarget:null,inputClass:null,preset:[[Sn,{enable:!1}],[Ln,{enable:!1},["rotate"]],[mr,{direction:6}],[Dn,{direction:6},["swipe"]],[Mt],[Mt,{event:"doubletap",taps:2},["tap"]],[Ht]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Si.prototype={set:function(De){return S(this.options,De),De.touchAction&&this.touchAction.update(),De.inputTarget&&(this.input.destroy(),this.input.target=De.inputTarget,this.input.init()),this},stop:function(De){this.session.stopped=De?2:1},recognize:function(De){var Pe=this.session;if(!Pe.stopped){this.touchAction.preventDefaults(De);var He,rt=this.recognizers,St=Pe.curRecognizer;(!St||St&&8&St.state)&&(St=Pe.curRecognizer=null);for(var Gt=0;Gt<rt.length;)He=rt[Gt],2===Pe.stopped||St&&He!=St&&!He.canRecognizeWith(St)?He.reset():He.recognize(De),!St&&14&He.state&&(St=Pe.curRecognizer=He),Gt++}},get:function(De){if(De instanceof Bt)return De;for(var Pe=this.recognizers,He=0;He<Pe.length;He++)if(Pe[He].options.event==De)return Pe[He];return null},add:function(De){if(m(De,"add",this))return this;var Pe=this.get(De.options.event);return Pe&&this.remove(Pe),this.recognizers.push(De),De.manager=this,this.touchAction.update(),De},remove:function(De){if(m(De,"remove",this))return this;if(De=this.get(De)){var Pe=this.recognizers,He=q(Pe,De);-1!==He&&(Pe.splice(He,1),this.touchAction.update())}return this},on:function(De,Pe){if(De!==T&&Pe!==T){var He=this.handlers;return h(z(De),function(rt){He[rt]=He[rt]||[],He[rt].push(Pe)}),this}},off:function(De,Pe){if(De!==T){var He=this.handlers;return h(z(De),function(rt){Pe?He[rt]&&He[rt].splice(q(He[rt],Pe),1):delete He[rt]}),this}},emit:function(De,Pe){this.options.domEvents&&function Ai(De,Pe){var He=y.createEvent("Event");He.initEvent(De,!0,!0),He.gesture=Pe,Pe.target.dispatchEvent(He)}(De,Pe);var He=this.handlers[De]&&this.handlers[De].slice();if(He&&He.length){Pe.type=De,Pe.preventDefault=function(){Pe.srcEvent.preventDefault()};for(var rt=0;rt<He.length;)He[rt](Pe),rt++}},destroy:function(){this.element&&Vr(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},S(Gn,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Si,Input:W,TouchAction:Yt,TouchInput:It,MouseInput:Zt,PointerEventInput:Ce,TouchMouseInput:et,SingleTouchInput:ct,Recognizer:Bt,AttrRecognizer:en,Tap:Mt,Pan:Dn,Swipe:mr,Pinch:Ln,Rotate:Sn,Press:Ht,on:f,off:I,each:h,merge:F,extend:C,assign:S,inherit:R,bindFn:w,prefixed:V}),(typeof x<"u"?x:typeof self<"u"?self:{}).Hammer=Gn,(u=function(){return Gn}.call(Oe,k,Oe,Cs))!==T&&(Cs.exports=u)}(window,document)}},Cs=>{Cs(Cs.s=0)}]);